(self.webpackChunkIceBreaker=self.webpackChunkIceBreaker||[]).push([[792],{25:(pi,Pa,ua)=>{"use strict";function Vn(r){return"function"==typeof r}function Ci(r){const n=r(i=>{Error.call(i),i.stack=(new Error).stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}const Ms=Ci(r=>function(n){r(this),this.message=n?`${n.length} errors occurred during unsubscription:\n${n.map((i,s)=>`${s+1}) ${i.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=n});function Yl(r,t){if(r){const n=r.indexOf(t);0<=n&&r.splice(n,1)}}class l{constructor(t){this.initialTeardown=t,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let t;if(!this.closed){this.closed=!0;const{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(const o of n)o.remove(this);else n.remove(this);const{initialTeardown:i}=this;if(Vn(i))try{i()}catch(o){t=o instanceof Ms?o.errors:[o]}const{_finalizers:s}=this;if(s){this._finalizers=null;for(const o of s)try{M(o)}catch(a){t=t??[],a instanceof Ms?t=[...t,...a.errors]:t.push(a)}}if(t)throw new Ms(t)}}add(t){var n;if(t&&t!==this)if(this.closed)M(t);else{if(t instanceof l){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._finalizers=null!==(n=this._finalizers)&&void 0!==n?n:[]).push(t)}}_hasParent(t){const{_parentage:n}=this;return n===t||Array.isArray(n)&&n.includes(t)}_addParent(t){const{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(t),n):n?[n,t]:t}_removeParent(t){const{_parentage:n}=this;n===t?this._parentage=null:Array.isArray(n)&&Yl(n,t)}remove(t){const{_finalizers:n}=this;n&&Yl(n,t),t instanceof l&&t._removeParent(this)}}l.EMPTY=(()=>{const r=new l;return r.closed=!0,r})();const de=l.EMPTY;function H(r){return r instanceof l||r&&"closed"in r&&Vn(r.remove)&&Vn(r.add)&&Vn(r.unsubscribe)}function M(r){Vn(r)?r():r.unsubscribe()}const E={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},v={setTimeout(r,t,...n){const{delegate:i}=v;return i?.setTimeout?i.setTimeout(r,t,...n):setTimeout(r,t,...n)},clearTimeout(r){const{delegate:t}=v;return(t?.clearTimeout||clearTimeout)(r)},delegate:void 0};function S(r){v.setTimeout(()=>{const{onUnhandledError:t}=E;if(!t)throw r;t(r)})}function T(){}const C=d("C",void 0,void 0);function d(r,t,n){return{kind:r,value:t,error:n}}let m=null;function p(r){if(E.useDeprecatedSynchronousErrorHandling){const t=!m;if(t&&(m={errorThrown:!1,error:null}),r(),t){const{errorThrown:n,error:i}=m;if(m=null,n)throw i}}else r()}class y extends l{constructor(t){super(),this.isStopped=!1,t?(this.destination=t,H(t)&&t.add(this)):this.destination=z}static create(t,n,i){return new N(t,n,i)}next(t){this.isStopped?L(function g(r){return d("N",r,void 0)}(t),this):this._next(t)}error(t){this.isStopped?L(function f(r){return d("E",void 0,r)}(t),this):(this.isStopped=!0,this._error(t))}complete(){this.isStopped?L(C,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(t){this.destination.next(t)}_error(t){try{this.destination.error(t)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const b=Function.prototype.bind;function x(r,t){return b.call(r,t)}class D{constructor(t){this.partialObserver=t}next(t){const{partialObserver:n}=this;if(n.next)try{n.next(t)}catch(i){U(i)}}error(t){const{partialObserver:n}=this;if(n.error)try{n.error(t)}catch(i){U(i)}else U(t)}complete(){const{partialObserver:t}=this;if(t.complete)try{t.complete()}catch(n){U(n)}}}class N extends y{constructor(t,n,i){let s;if(super(),Vn(t)||!t)s={next:t??void 0,error:n??void 0,complete:i??void 0};else{let o;this&&E.useDeprecatedNextContext?(o=Object.create(t),o.unsubscribe=()=>this.unsubscribe(),s={next:t.next&&x(t.next,o),error:t.error&&x(t.error,o),complete:t.complete&&x(t.complete,o)}):s=t}this.destination=new D(s)}}function U(r){E.useDeprecatedSynchronousErrorHandling?function h(r){E.useDeprecatedSynchronousErrorHandling&&m&&(m.errorThrown=!0,m.error=r)}(r):S(r)}function L(r,t){const{onStoppedNotification:n}=E;n&&v.setTimeout(()=>n(r,t))}const z={closed:!0,next:T,error:function R(r){throw r},complete:T},F="function"==typeof Symbol&&Symbol.observable||"@@observable";function q(r){return r}function Z(r){return 0===r.length?q:1===r.length?r[0]:function(n){return r.reduce((i,s)=>s(i),n)}}let X=(()=>{class r{constructor(n){n&&(this._subscribe=n)}lift(n){const i=new r;return i.source=this,i.operator=n,i}subscribe(n,i,s){const o=function ie(r){return r&&r instanceof y||function oe(r){return r&&Vn(r.next)&&Vn(r.error)&&Vn(r.complete)}(r)&&H(r)}(n)?n:new N(n,i,s);return p(()=>{const{operator:a,source:c}=this;o.add(a?a.call(o,c):c?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(n){try{return this._subscribe(n)}catch(i){n.error(i)}}forEach(n,i){return new(i=W(i))((s,o)=>{const a=new N({next:c=>{try{n(c)}catch(u){o(u),a.unsubscribe()}},error:o,complete:s});this.subscribe(a)})}_subscribe(n){var i;return null===(i=this.source)||void 0===i?void 0:i.subscribe(n)}[F](){return this}pipe(...n){return Z(n)(this)}toPromise(n){return new(n=W(n))((i,s)=>{let o;this.subscribe(a=>o=a,a=>s(a),()=>i(o))})}}return r.create=t=>new r(t),r})();function W(r){var t;return null!==(t=r??E.Promise)&&void 0!==t?t:Promise}const re=Ci(r=>function(){r(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let le=(()=>{class r extends X{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){const i=new pe(this,this);return i.operator=n,i}_throwIfClosed(){if(this.closed)throw new re}next(n){p(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const i of this.currentObservers)i.next(n)}})}error(n){p(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;const{observers:i}=this;for(;i.length;)i.shift().error(n)}})}complete(){p(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return(null===(n=this.observers)||void 0===n?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){const{hasError:i,isStopped:s,observers:o}=this;return i||s?de:(this.currentObservers=null,o.push(n),new l(()=>{this.currentObservers=null,Yl(o,n)}))}_checkFinalizedStatuses(n){const{hasError:i,thrownError:s,isStopped:o}=this;i?n.error(s):o&&n.complete()}asObservable(){const n=new X;return n.source=this,n}}return r.create=(t,n)=>new pe(t,n),r})();class pe extends le{constructor(t,n){super(),this.destination=t,this.source=n}next(t){var n,i;null===(i=null===(n=this.destination)||void 0===n?void 0:n.next)||void 0===i||i.call(n,t)}error(t){var n,i;null===(i=null===(n=this.destination)||void 0===n?void 0:n.error)||void 0===i||i.call(n,t)}complete(){var t,n;null===(n=null===(t=this.destination)||void 0===t?void 0:t.complete)||void 0===n||n.call(t)}_subscribe(t){var n,i;return null!==(i=null===(n=this.source)||void 0===n?void 0:n.subscribe(t))&&void 0!==i?i:de}}function Ae(r){return Vn(r?.lift)}function $(r){return t=>{if(Ae(t))return t.lift(function(n){try{return r(n,this)}catch(i){this.error(i)}});throw new TypeError("Unable to lift unknown Observable type")}}function P(r,t,n,i,s){return new K(r,t,n,i,s)}class K extends y{constructor(t,n,i,s,o,a){super(t),this.onFinalize=o,this.shouldUnsubscribe=a,this._next=n?function(c){try{n(c)}catch(u){t.error(u)}}:super._next,this._error=s?function(c){try{s(c)}catch(u){t.error(u)}finally{this.unsubscribe()}}:super._error,this._complete=i?function(){try{i()}catch(c){t.error(c)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var t;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:n}=this;super.unsubscribe(),!n&&(null===(t=this.onFinalize)||void 0===t||t.call(this))}}}function te(r,t){return $((n,i)=>{let s=0;n.subscribe(P(i,o=>{i.next(r.call(t,o,s++))}))})}function Wt(r){return this instanceof Wt?(this.v=r,this):new Wt(r)}function rt(r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n,t=r[Symbol.asyncIterator];return t?t.call(r):(r=function ot(r){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&r[t],i=0;if(n)return n.call(r);if(r&&"number"==typeof r.length)return{next:function(){return r&&i>=r.length&&(r=void 0),{value:r&&r[i++],done:!r}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(r),n={},i("next"),i("throw"),i("return"),n[Symbol.asyncIterator]=function(){return this},n);function i(o){n[o]=r[o]&&function(a){return new Promise(function(c,u){!function s(o,a,c,u){Promise.resolve(u).then(function(_){o({value:_,done:c})},a)}(c,u,(a=r[o](a)).done,a.value)})}}}"function"==typeof SuppressedError&&SuppressedError;const _n=r=>r&&"number"==typeof r.length&&"function"!=typeof r;function Fn(r){return Vn(r?.then)}function On(r){return Vn(r[F])}function Xr(r){return Symbol.asyncIterator&&Vn(r?.[Symbol.asyncIterator])}function Qi(r){return new TypeError(`You provided ${null!==r&&"object"==typeof r?"an invalid object":`'${r}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const Rr=function Ti(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function Jr(r){return Vn(r?.[Rr])}function Sr(r){return function Ye(r,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var s,i=n.apply(r,t||[]),o=[];return s=Object.create(("function"==typeof AsyncIterator?AsyncIterator:Object).prototype),c("next"),c("throw"),c("return",function a(G){return function(Y){return Promise.resolve(Y).then(G,O)}}),s[Symbol.asyncIterator]=function(){return this},s;function c(G,Y){i[G]&&(s[G]=function(ne){return new Promise(function(ee,Q){o.push([G,ne,ee,Q])>1||u(G,ne)})},Y&&(s[G]=Y(s[G])))}function u(G,Y){try{!function _(G){G.value instanceof Wt?Promise.resolve(G.value.v).then(A,O):B(o[0][2],G)}(i[G](Y))}catch(ne){B(o[0][3],ne)}}function A(G){u("next",G)}function O(G){u("throw",G)}function B(G,Y){G(Y),o.shift(),o.length&&u(o[0][0],o[0][1])}}(this,arguments,function*(){const n=r.getReader();try{for(;;){const{value:i,done:s}=yield Wt(n.read());if(s)return yield Wt(void 0);yield yield Wt(i)}}finally{n.releaseLock()}})}function Hi(r){return Vn(r?.getReader)}function Lr(r){if(r instanceof X)return r;if(null!=r){if(On(r))return function Hr(r){return new X(t=>{const n=r[F]();if(Vn(n.subscribe))return n.subscribe(t);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(r);if(_n(r))return function es(r){return new X(t=>{for(let n=0;n<r.length&&!t.closed;n++)t.next(r[n]);t.complete()})}(r);if(Fn(r))return function Zl(r){return new X(t=>{r.then(n=>{t.closed||(t.next(n),t.complete())},n=>t.error(n)).then(null,S)})}(r);if(Xr(r))return fl(r);if(Jr(r))return function Kl(r){return new X(t=>{for(const n of r)if(t.next(n),t.closed)return;t.complete()})}(r);if(Hi(r))return function eu(r){return fl(Sr(r))}(r)}throw Qi(r)}function fl(r){return new X(t=>{(function Jl(r,t){var n,i,s,o;return function ze(r,t,n,i){return new(n||(n=Promise))(function(o,a){function c(A){try{_(i.next(A))}catch(O){a(O)}}function u(A){try{_(i.throw(A))}catch(O){a(O)}}function _(A){A.done?o(A.value):function s(o){return o instanceof n?o:new n(function(a){a(o)})}(A.value).then(c,u)}_((i=i.apply(r,t||[])).next())})}(this,void 0,void 0,function*(){try{for(n=rt(r);!(i=yield n.next()).done;)if(t.next(i.value),t.closed)return}catch(a){s={error:a}}finally{try{i&&!i.done&&(o=n.return)&&(yield o.call(n))}finally{if(s)throw s.error}}t.complete()})})(r,t).catch(n=>t.error(n))})}function Ls(r,t,n,i=0,s=!1){const o=t.schedule(function(){n(),s?r.add(this.schedule(null,i)):this.unsubscribe()},i);if(r.add(o),!s)return o}function xt(r,t,n=1/0){return Vn(t)?xt((i,s)=>te((o,a)=>t(i,o,s,a))(Lr(r(i,s))),n):("number"==typeof t&&(n=t),$((i,s)=>function Be(r,t,n,i,s,o,a,c){const u=[];let _=0,A=0,O=!1;const B=()=>{O&&!u.length&&!_&&t.complete()},G=ne=>_<i?Y(ne):u.push(ne),Y=ne=>{o&&t.next(ne),_++;let ee=!1;Lr(n(ne,A++)).subscribe(P(t,Q=>{s?.(Q),o?G(Q):t.next(Q)},()=>{ee=!0},void 0,()=>{if(ee)try{for(_--;u.length&&_<i;){const Q=u.shift();a?Ls(t,a,()=>Y(Q)):Y(Q)}B()}catch(Q){t.error(Q)}}))};return r.subscribe(P(t,G,()=>{O=!0,B()})),()=>{c?.()}}(i,s,r,n)))}function tn(r=1/0){return xt(q,r)}const St=new X(r=>r.complete());function nn(r){return r[r.length-1]}function _r(r){return Vn(nn(r))?r.pop():void 0}function rn(r){return function Cr(r){return r&&Vn(r.schedule)}(nn(r))?r.pop():void 0}function Ai(r,t=0){return $((n,i)=>{n.subscribe(P(i,s=>Ls(i,r,()=>i.next(s),t),()=>Ls(i,r,()=>i.complete(),t),s=>Ls(i,r,()=>i.error(s),t)))})}function mi(r,t=0){return $((n,i)=>{i.add(r.schedule(()=>n.subscribe(i),t))})}function Fi(r,t){if(!r)throw new Error("Iterable cannot be null");return new X(n=>{Ls(n,t,()=>{const i=r[Symbol.asyncIterator]();Ls(n,t,()=>{i.next().then(s=>{s.done?n.complete():n.next(s.value)})},0,!0)})})}function si(r,t){return t?function ho(r,t){if(null!=r){if(On(r))return function Wi(r,t){return Lr(r).pipe(mi(t),Ai(t))}(r,t);if(_n(r))return function js(r,t){return new X(n=>{let i=0;return t.schedule(function(){i===r.length?n.complete():(n.next(r[i++]),n.closed||this.schedule())})})}(r,t);if(Fn(r))return function Po(r,t){return Lr(r).pipe(mi(t),Ai(t))}(r,t);if(Xr(r))return Fi(r,t);if(Jr(r))return function Ro(r,t){return new X(n=>{let i;return Ls(n,t,()=>{i=r[Rr](),Ls(n,t,()=>{let s,o;try{({value:s,done:o}=i.next())}catch(a){return void n.error(a)}o?n.complete():n.next(s)},0,!0)}),()=>Vn(i?.return)&&i.return()})}(r,t);if(Hi(r))return function vp(r,t){return Fi(Sr(r),t)}(r,t)}throw Qi(r)}(r,t):Lr(r)}class Es extends le{constructor(t){super(),this._value=t}get value(){return this.getValue()}_subscribe(t){const n=super._subscribe(t);return!n.closed&&t.next(this._value),n}getValue(){const{hasError:t,thrownError:n,_value:i}=this;if(t)throw n;return this._throwIfClosed(),i}next(t){super.next(this._value=t)}}function Un(...r){return si(r,rn(r))}function hh(r={}){const{connector:t=(()=>new le),resetOnError:n=!0,resetOnComplete:i=!0,resetOnRefCountZero:s=!0}=r;return o=>{let a,c,u,_=0,A=!1,O=!1;const B=()=>{c?.unsubscribe(),c=void 0},G=()=>{B(),a=u=void 0,A=O=!1},Y=()=>{const ne=a;G(),ne?.unsubscribe()};return $((ne,ee)=>{_++,!O&&!A&&B();const Q=u=u??t();ee.add(()=>{_--,0===_&&!O&&!A&&(c=Ql(Y,s))}),Q.subscribe(ee),!a&&_>0&&(a=new N({next:ue=>Q.next(ue),error:ue=>{O=!0,B(),c=Ql(G,n,ue),Q.error(ue)},complete:()=>{A=!0,B(),c=Ql(G,i),Q.complete()}}),Lr(ne).subscribe(a))})(o)}}function Ql(r,t,...n){if(!0===t)return void r();if(!1===t)return;const i=new N({next:()=>{i.unsubscribe(),r()}});return Lr(t(...n)).subscribe(i)}function eo(r,t){return $((n,i)=>{let s=null,o=0,a=!1;const c=()=>a&&!s&&i.complete();n.subscribe(P(i,u=>{s?.unsubscribe();let _=0;const A=o++;Lr(r(u,A)).subscribe(s=P(i,O=>i.next(t?t(u,O,A,_++):O),()=>{s=null,c()}))},()=>{a=!0,c()}))})}function _p(r,t){return r===t}function Fr(r){for(let t in r)if(r[t]===Fr)return t;throw Error("Could not find renamed property on target object.")}function pl(r,t){for(const n in t)t.hasOwnProperty(n)&&!r.hasOwnProperty(n)&&(r[n]=t[n])}function Di(r){if("string"==typeof r)return r;if(Array.isArray(r))return"["+r.map(Di).join(", ")+"]";if(null==r)return""+r;if(r.overriddenName)return`${r.overriddenName}`;if(r.name)return`${r.name}`;const t=r.toString();if(null==t)return""+t;const n=t.indexOf("\n");return-1===n?t:t.substring(0,n)}function nu(r,t){return null==r||""===r?null===t?"":t:null==t||""===t?r:r+" "+t}const ru=Fr({__forward_ref__:Fr});function Ur(r){return r.__forward_ref__=Ur,r.toString=function(){return Di(this())},r}function Rn(r){return iu(r)?r():r}function iu(r){return"function"==typeof r&&r.hasOwnProperty(ru)&&r.__forward_ref__===Ur}function su(r){return r&&!!r.\u0275providers}class jt extends Error{constructor(t,n){super(function ml(r,t){return`NG0${Math.abs(r)}${t?": "+t:""}`}(t,n)),this.code=t}}function Hn(r){return"string"==typeof r?r:null==r?"":String(r)}function ou(r,t){throw new jt(-201,!1)}function fs(r,t){null==r&&function Bn(r,t,n,i){throw new Error(`ASSERTION ERROR: ${r}`+(null==i?"":` [Expected=> ${n} ${i} ${t} <=Actual]`))}(t,r,null,"!=")}function Dn(r){return{token:r.token,providedIn:r.providedIn||null,factory:r.factory,value:void 0}}function Cs(r){return{providers:r.providers||[],imports:r.imports||[]}}function tc(r){return ph(r,rc)||ph(r,mh)}function ph(r,t){return r.hasOwnProperty(t)?r[t]:null}function nc(r){return r&&(r.hasOwnProperty(uu)||r.hasOwnProperty(Mp))?r[uu]:null}const rc=Fr({\u0275prov:Fr}),uu=Fr({\u0275inj:Fr}),mh=Fr({ngInjectableDef:Fr}),Mp=Fr({ngInjectorDef:Fr});var fr=function(r){return r[r.Default=0]="Default",r[r.Host=1]="Host",r[r.Self=2]="Self",r[r.SkipSelf=4]="SkipSelf",r[r.Optional=8]="Optional",r}(fr||{});let gl;function ps(r){const t=gl;return gl=r,t}function $o(r,t,n){const i=tc(r);return i&&"root"==i.providedIn?void 0===i.value?i.value=i.factory():i.value:n&fr.Optional?null:void 0!==t?t:void ou(Di(r))}const Ht=globalThis;class hn{constructor(t,n){this._desc=t,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof n?this.__NG_ELEMENT_ID__=n:void 0!==n&&(this.\u0275prov=Dn({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}const ic={},fu="__NG_DI_FLAG__",gi="ngTempTokenPath",w=/\n/gm,j="__source";let V;function se(r){const t=V;return V=r,t}function ae(r,t=fr.Default){if(void 0===V)throw new jt(-203,!1);return null===V?$o(r,void 0,t):V.get(r,t&fr.Optional?null:void 0,t)}function me(r,t=fr.Default){return(function du(){return gl}()||ae)(Rn(r),t)}function _e(r,t=fr.Default){return me(r,We(t))}function We(r){return typeof r>"u"||"number"==typeof r?r:0|(r.optional&&8)|(r.host&&1)|(r.self&&2)|(r.skipSelf&&4)}function it(r){const t=[];for(let n=0;n<r.length;n++){const i=Rn(r[n]);if(Array.isArray(i)){if(0===i.length)throw new jt(900,!1);let s,o=fr.Default;for(let a=0;a<i.length;a++){const c=i[a],u=Ue(c);"number"==typeof u?-1===u?s=c.token:o|=u:s=c}t.push(me(s,o))}else t.push(me(i))}return t}function Ze(r,t){return r[fu]=t,r.prototype[fu]=t,r}function Ue(r){return r[fu]}function ht(r){return{toString:r}.toString()}var at=function(r){return r[r.OnPush=0]="OnPush",r[r.Default=1]="Default",r}(at||{}),nt=function(r){return r[r.Emulated=0]="Emulated",r[r.None=2]="None",r[r.ShadowDom=3]="ShadowDom",r}(nt||{});const gn={},un=[],Mn=Fr({\u0275cmp:Fr}),Tn=Fr({\u0275dir:Fr}),rr=Fr({\u0275pipe:Fr}),Yr=Fr({\u0275mod:Fr}),Nr=Fr({\u0275fac:Fr}),oi=Fr({__NG_ELEMENT_ID__:Fr}),ts=Fr({__NG_ENV_ID__:Fr});function ns(r,t,n){let i=r.length;for(;;){const s=r.indexOf(t,n);if(-1===s)return s;if(0===s||r.charCodeAt(s-1)<=32){const o=t.length;if(s+o===i||r.charCodeAt(s+o)<=32)return s}n=s+1}}function Fs(r,t,n){let i=0;for(;i<n.length;){const s=n[i];if("number"==typeof s){if(0!==s)break;i++;const o=n[i++],a=n[i++],c=n[i++];r.setAttribute(t,a,c,o)}else{const o=s,a=n[++i];Qr(o)?r.setProperty(t,o,a):r.setAttribute(t,o,a),i++}}return i}function qr(r){return 3===r||4===r||6===r}function Qr(r){return 64===r.charCodeAt(0)}function Tr(r,t){if(null!==t&&0!==t.length)if(null===r||0===r.length)r=t.slice();else{let n=-1;for(let i=0;i<t.length;i++){const s=t[i];"number"==typeof s?n=s:0===n||rs(r,n,s,null,-1===n||2===n?t[++i]:null)}}return r}function rs(r,t,n,i,s){let o=0,a=r.length;if(-1===t)a=-1;else for(;o<r.length;){const c=r[o++];if("number"==typeof c){if(c===t){a=-1;break}if(c>t){a=o-1;break}}}for(;o<r.length;){const c=r[o];if("number"==typeof c)break;if(c===n){if(null===i)return void(null!==s&&(r[o+1]=s));if(i===r[o+1])return void(r[o+2]=s)}o++,null!==i&&o++,null!==s&&o++}-1!==a&&(r.splice(a,0,t),o=a+1),r.splice(o++,0,n),null!==i&&r.splice(o++,0,i),null!==s&&r.splice(o++,0,s)}const ai="ng-template";function is(r,t,n){let i=0,s=!0;for(;i<r.length;){let o=r[i++];if("string"==typeof o&&s){const a=r[i++];if(n&&"class"===o&&-1!==ns(a.toLowerCase(),t,0))return!0}else{if(1===o){for(;i<r.length&&"string"==typeof(o=r[i++]);)if(o.toLowerCase()===t)return!0;return!1}"number"==typeof o&&(s=!1)}}return!1}function ei(r){return 4===r.type&&r.value!==ai}function qi(r,t,n){return t===(4!==r.type||n?r.value:ai)}function sc(r,t,n){let i=4;const s=r.attrs||[],o=function jL(r){for(let t=0;t<r.length;t++)if(qr(r[t]))return t;return r.length}(s);let a=!1;for(let c=0;c<t.length;c++){const u=t[c];if("number"!=typeof u){if(!a)if(4&i){if(i=2|1&i,""!==u&&!qi(r,u,n)||""===u&&1===t.length){if(cs(i))return!1;a=!0}}else{const _=8&i?u:t[++c];if(8&i&&null!==r.attrs){if(!is(r.attrs,_,n)){if(cs(i))return!1;a=!0}continue}const O=Ep(8&i?"class":u,s,ei(r),n);if(-1===O){if(cs(i))return!1;a=!0;continue}if(""!==_){let B;B=O>o?"":s[O+1].toLowerCase();const G=8&i?B:null;if(G&&-1!==ns(G,_,0)||2&i&&_!==B){if(cs(i))return!1;a=!0}}}}else{if(!a&&!cs(i)&&!cs(u))return!1;if(a&&cs(u))continue;a=!1,i=u|1&i}}return cs(i)||a}function cs(r){return 0==(1&r)}function Ep(r,t,n,i){if(null===t)return-1;let s=0;if(i||!n){let o=!1;for(;s<t.length;){const a=t[s];if(a===r)return s;if(3===a||6===a)o=!0;else{if(1===a||2===a){let c=t[++s];for(;"string"==typeof c;)c=t[++s];continue}if(4===a)break;if(0===a){s+=4;continue}}s+=o?1:2}return-1}return function NL(r,t){let n=r.indexOf(4);if(n>-1)for(n++;n<r.length;){const i=r[n];if("number"==typeof i)return-1;if(i===t)return n;n++}return-1}(t,r)}function xw(r,t,n=!1){for(let i=0;i<t.length;i++)if(sc(r,t[i],n))return!0;return!1}function ww(r,t){return r?":not("+t.trim()+")":t}function FL(r){let t=r[0],n=1,i=2,s="",o=!1;for(;n<r.length;){let a=r[n];if("string"==typeof a)if(2&i){const c=r[++n];s+="["+a+(c.length>0?'="'+c+'"':"")+"]"}else 8&i?s+="."+a:4&i&&(s+=" "+a);else""!==s&&!cs(a)&&(t+=ww(o,s),s=""),i=a,o=o||!cs(i);n++}return""!==s&&(t+=ww(o,s)),t}function Cp(r){return ht(()=>{const t=Mw(r),n={...t,decls:r.decls,vars:r.vars,template:r.template,consts:r.consts||null,ngContentSelectors:r.ngContentSelectors,onPush:r.changeDetection===at.OnPush,directiveDefs:null,pipeDefs:null,dependencies:t.standalone&&r.dependencies||null,getStandaloneInjector:null,signals:r.signals??!1,data:r.data||{},encapsulation:r.encapsulation||nt.Emulated,styles:r.styles||un,_:null,schemas:r.schemas||null,tView:null,id:""};Ew(n);const i=r.dependencies;return n.directiveDefs=Tp(i,!1),n.pipeDefs=Tp(i,!0),n.id=function qL(r){let t=0;const n=[r.selectors,r.ngContentSelectors,r.hostVars,r.hostAttrs,r.consts,r.vars,r.decls,r.encapsulation,r.standalone,r.signals,r.exportAs,JSON.stringify(r.inputs),JSON.stringify(r.outputs),Object.getOwnPropertyNames(r.type.prototype),!!r.contentQueries,!!r.viewQuery].join("|");for(const s of n)t=Math.imul(31,t)+s.charCodeAt(0)<<0;return t+=2147483648,"c"+t}(n),n})}function zL(r){return Ar(r)||ms(r)}function GL(r){return null!==r}function Xo(r){return ht(()=>({type:r.type,bootstrap:r.bootstrap||un,declarations:r.declarations||un,imports:r.imports||un,exports:r.exports||un,transitiveCompileScopes:null,schemas:r.schemas||null,id:r.id||null}))}function Sw(r,t){if(null==r)return gn;const n={};for(const i in r)if(r.hasOwnProperty(i)){let s=r[i],o=s;Array.isArray(s)&&(o=s[1],s=s[0]),n[s]=i,t&&(t[s]=o)}return n}function Kn(r){return ht(()=>{const t=Mw(r);return Ew(t),t})}function to(r){return{type:r.type,name:r.name,factory:null,pure:!1!==r.pure,standalone:!0===r.standalone,onDestroy:r.type.prototype.ngOnDestroy||null}}function Ar(r){return r[Mn]||null}function ms(r){return r[Tn]||null}function Us(r){return r[rr]||null}function fo(r,t){const n=r[Yr]||null;if(!n&&!0===t)throw new Error(`Type ${Di(r)} does not have '\u0275mod' property.`);return n}function Mw(r){const t={};return{type:r.type,providersResolver:null,factory:null,hostBindings:r.hostBindings||null,hostVars:r.hostVars||0,hostAttrs:r.hostAttrs||null,contentQueries:r.contentQueries||null,declaredInputs:t,inputTransforms:null,inputConfig:r.inputs||gn,exportAs:r.exportAs||null,standalone:!0===r.standalone,signals:!0===r.signals,selectors:r.selectors||un,viewQuery:r.viewQuery||null,features:r.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:Sw(r.inputs,t),outputs:Sw(r.outputs)}}function Ew(r){r.features?.forEach(t=>t(r))}function Tp(r,t){if(!r)return null;const n=t?Us:zL;return()=>("function"==typeof r?r():r).map(i=>n(i)).filter(GL)}const Ii=0,pn=1,sr=2,bi=3,Yo=4,bh=5,Ts=6,mu=7,Ui=8,yl=9,gu=10,Qn=11,_h=12,Cw=13,yu=14,Bi=15,xh=16,vu=17,fa=18,wh=19,Tw=20,vl=21,La=22,Sh=23,Mh=24,wr=25,Tv=1,Aw=2,pa=7,bu=9,gs=11;function no(r){return Array.isArray(r)&&"object"==typeof r[Tv]}function Bs(r){return Array.isArray(r)&&!0===r[Tv]}function Av(r){return 0!=(4&r.flags)}function oc(r){return r.componentOffset>-1}function Dp(r){return 1==(1&r.flags)}function Zo(r){return!!r.template}function Dv(r){return 0!=(512&r[sr])}function ac(r,t){return r.hasOwnProperty(Nr)?r[Nr]:null}let ys=null,Ip=!1;function Oo(r){const t=ys;return ys=r,t}const Pw={version:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{}};function Ow(r){if(!Ch(r)||r.dirty){if(!r.producerMustRecompute(r)&&!Nw(r))return void(r.dirty=!1);r.producerRecomputeValue(r),r.dirty=!1}}function jw(r){r.dirty=!0,function Lw(r){if(void 0===r.liveConsumerNode)return;const t=Ip;Ip=!0;try{for(const n of r.liveConsumerNode)n.dirty||jw(n)}finally{Ip=t}}(r),r.consumerMarkedDirty?.(r)}function Pv(r){return r&&(r.nextProducerIndex=0),Oo(r)}function Rv(r,t){if(Oo(t),r&&void 0!==r.producerNode&&void 0!==r.producerIndexOfThis&&void 0!==r.producerLastReadVersion){if(Ch(r))for(let n=r.nextProducerIndex;n<r.producerNode.length;n++)Pp(r.producerNode[n],r.producerIndexOfThis[n]);for(;r.producerNode.length>r.nextProducerIndex;)r.producerNode.pop(),r.producerLastReadVersion.pop(),r.producerIndexOfThis.pop()}}function Nw(r){_u(r);for(let t=0;t<r.producerNode.length;t++){const n=r.producerNode[t],i=r.producerLastReadVersion[t];if(i!==n.version||(Ow(n),i!==n.version))return!0}return!1}function kw(r){if(_u(r),Ch(r))for(let t=0;t<r.producerNode.length;t++)Pp(r.producerNode[t],r.producerIndexOfThis[t]);r.producerNode.length=r.producerLastReadVersion.length=r.producerIndexOfThis.length=0,r.liveConsumerNode&&(r.liveConsumerNode.length=r.liveConsumerIndexOfThis.length=0)}function Pp(r,t){if(function Uw(r){r.liveConsumerNode??=[],r.liveConsumerIndexOfThis??=[]}(r),_u(r),1===r.liveConsumerNode.length)for(let i=0;i<r.producerNode.length;i++)Pp(r.producerNode[i],r.producerIndexOfThis[i]);const n=r.liveConsumerNode.length-1;if(r.liveConsumerNode[t]=r.liveConsumerNode[n],r.liveConsumerIndexOfThis[t]=r.liveConsumerIndexOfThis[n],r.liveConsumerNode.length--,r.liveConsumerIndexOfThis.length--,t<r.liveConsumerNode.length){const i=r.liveConsumerIndexOfThis[t],s=r.liveConsumerNode[t];_u(s),s.producerIndexOfThis[i]=t}}function Ch(r){return r.consumerIsAlwaysLive||(r?.liveConsumerNode?.length??0)>0}function _u(r){r.producerNode??=[],r.producerIndexOfThis??=[],r.producerLastReadVersion??=[]}let Bw=null;function Gw(r){const t=Oo(null);try{return r()}finally{Oo(t)}}const Hw=()=>{},sj=(()=>({...Pw,consumerIsAlwaysLive:!0,consumerAllowSignalWrites:!1,consumerMarkedDirty:r=>{r.schedule(r.ref)},hasRun:!1,cleanupFn:Hw}))();class oj{constructor(t,n,i){this.previousValue=t,this.currentValue=n,this.firstChange=i}isFirstChange(){return this.firstChange}}function Lo(){return Ww}function Ww(r){return r.type.prototype.ngOnChanges&&(r.setInput=lj),aj}function aj(){const r=$w(this),t=r?.current;if(t){const n=r.previous;if(n===gn)r.previous=t;else for(let i in t)n[i]=t[i];r.current=null,this.ngOnChanges(t)}}function lj(r,t,n,i){const s=this.declaredInputs[n],o=$w(r)||function cj(r,t){return r[qw]=t}(r,{previous:gn,current:null}),a=o.current||(o.current={}),c=o.previous,u=c[s];a[s]=new oj(u&&u.currentValue,t,c===gn),r[i]=t}Lo.ngInherit=!0;const qw="__ngSimpleChanges__";function $w(r){return r[qw]||null}const ma=function(r,t,n){};function li(r){for(;Array.isArray(r);)r=r[Ii];return r}function Rp(r,t){return li(t[r])}function ro(r,t){return li(t[r.index])}function Zw(r,t){return r.data[t]}function xu(r,t){return r[t]}function po(r,t){const n=t[r];return no(n)?n:n[Ii]}function _l(r,t){return null==t?null:r[t]}function Kw(r){r[vu]=0}function mj(r){1024&r[sr]||(r[sr]|=1024,Qw(r,1))}function Jw(r){1024&r[sr]&&(r[sr]&=-1025,Qw(r,-1))}function Qw(r,t){let n=r[bi];if(null===n)return;n[bh]+=t;let i=n;for(n=n[bi];null!==n&&(1===t&&1===i[bh]||-1===t&&0===i[bh]);)n[bh]+=t,i=n,n=n[bi]}const Wn={lFrame:uS(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function nS(){return Wn.bindingsEnabled}function Pt(){return Wn.lFrame.lView}function Dr(){return Wn.lFrame.tView}function Pi(r){return Wn.lFrame.contextLView=r,r[Ui]}function Ri(r){return Wn.lFrame.contextLView=null,r}function vs(){let r=rS();for(;null!==r&&64===r.type;)r=r.parent;return r}function rS(){return Wn.lFrame.currentTNode}function ga(r,t){const n=Wn.lFrame;n.currentTNode=r,n.isParent=t}function kv(){return Wn.lFrame.isParent}function Fv(){Wn.lFrame.isParent=!1}function Vs(){const r=Wn.lFrame;let t=r.bindingRootIndex;return-1===t&&(t=r.bindingRootIndex=r.tView.bindingStartIndex),t}function Su(){return Wn.lFrame.bindingIndex++}function Tj(r,t){const n=Wn.lFrame;n.bindingIndex=n.bindingRootIndex=r,Uv(t)}function Uv(r){Wn.lFrame.currentDirectiveIndex=r}function aS(){return Wn.lFrame.currentQueryIndex}function Vv(r){Wn.lFrame.currentQueryIndex=r}function Dj(r){const t=r[pn];return 2===t.type?t.declTNode:1===t.type?r[Ts]:null}function lS(r,t,n){if(n&fr.SkipSelf){let s=t,o=r;for(;!(s=s.parent,null!==s||n&fr.Host||(s=Dj(o),null===s||(o=o[yu],10&s.type))););if(null===s)return!1;t=s,r=o}const i=Wn.lFrame=cS();return i.currentTNode=t,i.lView=r,!0}function zv(r){const t=cS(),n=r[pn];Wn.lFrame=t,t.currentTNode=n.firstChild,t.lView=r,t.tView=n,t.contextLView=r,t.bindingIndex=n.bindingStartIndex,t.inI18n=!1}function cS(){const r=Wn.lFrame,t=null===r?null:r.child;return null===t?uS(r):t}function uS(r){const t={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:r,child:null,inI18n:!1};return null!==r&&(r.child=t),t}function dS(){const r=Wn.lFrame;return Wn.lFrame=r.parent,r.currentTNode=null,r.lView=null,r}const hS=dS;function Gv(){const r=dS();r.isParent=!0,r.tView=null,r.selectedIndex=-1,r.contextLView=null,r.elementDepthCount=0,r.currentDirectiveIndex=-1,r.currentNamespace=null,r.bindingRootIndex=-1,r.bindingIndex=-1,r.currentQueryIndex=0}function zs(){return Wn.lFrame.selectedIndex}function lc(r){Wn.lFrame.selectedIndex=r}function Si(){const r=Wn.lFrame;return Zw(r.tView,r.selectedIndex)}function Op(){Wn.lFrame.currentNamespace="svg"}function Lp(){!function Oj(){Wn.lFrame.currentNamespace=null}()}let pS=!0;function jp(){return pS}function xl(r){pS=r}function Np(r,t){for(let n=t.directiveStart,i=t.directiveEnd;n<i;n++){const o=r.data[n].type.prototype,{ngAfterContentInit:a,ngAfterContentChecked:c,ngAfterViewInit:u,ngAfterViewChecked:_,ngOnDestroy:A}=o;a&&(r.contentHooks??=[]).push(-n,a),c&&((r.contentHooks??=[]).push(n,c),(r.contentCheckHooks??=[]).push(n,c)),u&&(r.viewHooks??=[]).push(-n,u),_&&((r.viewHooks??=[]).push(n,_),(r.viewCheckHooks??=[]).push(n,_)),null!=A&&(r.destroyHooks??=[]).push(n,A)}}function kp(r,t,n){mS(r,t,3,n)}function Fp(r,t,n,i){(3&r[sr])===n&&mS(r,t,n,i)}function Hv(r,t){let n=r[sr];(3&n)===t&&(n&=8191,n+=1,r[sr]=n)}function mS(r,t,n,i){const o=i??-1,a=t.length-1;let c=0;for(let u=void 0!==i?65535&r[vu]:0;u<a;u++)if("number"==typeof t[u+1]){if(c=t[u],null!=i&&c>=i)break}else t[u]<0&&(r[vu]+=65536),(c<o||-1==o)&&(jj(r,n,t,u),r[vu]=(4294901760&r[vu])+u+2),u++}function gS(r,t){ma(4,r,t);const n=Oo(null);try{t.call(r)}finally{Oo(n),ma(5,r,t)}}function jj(r,t,n,i){const s=n[i]<0,o=n[i+1],c=r[s?-n[i]:n[i]];s?r[sr]>>13<r[vu]>>16&&(3&r[sr])===t&&(r[sr]+=8192,gS(c,o)):gS(c,o)}const Mu=-1;class Ah{constructor(t,n,i){this.factory=t,this.resolving=!1,this.canSeeViewProviders=n,this.injectImpl=i}}function qv(r){return r!==Mu}function Dh(r){return 32767&r}function Ih(r,t){let n=function Uj(r){return r>>16}(r),i=t;for(;n>0;)i=i[yu],n--;return i}let $v=!0;function Up(r){const t=$v;return $v=r,t}const yS=255,vS=5;let Bj=0;const ya={};function Bp(r,t){const n=bS(r,t);if(-1!==n)return n;const i=t[pn];i.firstCreatePass&&(r.injectorIndex=t.length,Xv(i.data,r),Xv(t,null),Xv(i.blueprint,null));const s=Vp(r,t),o=r.injectorIndex;if(qv(s)){const a=Dh(s),c=Ih(s,t),u=c[pn].data;for(let _=0;_<8;_++)t[o+_]=c[a+_]|u[a+_]}return t[o+8]=s,o}function Xv(r,t){r.push(0,0,0,0,0,0,0,0,t)}function bS(r,t){return-1===r.injectorIndex||r.parent&&r.parent.injectorIndex===r.injectorIndex||null===t[r.injectorIndex+8]?-1:r.injectorIndex}function Vp(r,t){if(r.parent&&-1!==r.parent.injectorIndex)return r.parent.injectorIndex;let n=0,i=null,s=t;for(;null!==s;){if(i=CS(s),null===i)return Mu;if(n++,s=s[yu],-1!==i.injectorIndex)return i.injectorIndex|n<<16}return Mu}function Yv(r,t,n){!function Vj(r,t,n){let i;"string"==typeof n?i=n.charCodeAt(0)||0:n.hasOwnProperty(oi)&&(i=n[oi]),null==i&&(i=n[oi]=Bj++);const s=i&yS;t.data[r+(s>>vS)]|=1<<s}(r,t,n)}function _S(r,t,n){if(n&fr.Optional||void 0!==r)return r;ou()}function xS(r,t,n,i){if(n&fr.Optional&&void 0===i&&(i=null),!(n&(fr.Self|fr.Host))){const s=r[yl],o=ps(void 0);try{return s?s.get(t,i,n&fr.Optional):$o(t,i,n&fr.Optional)}finally{ps(o)}}return _S(i,0,n)}function wS(r,t,n,i=fr.Default,s){if(null!==r){if(2048&t[sr]&&!(i&fr.Self)){const a=function $j(r,t,n,i,s){let o=r,a=t;for(;null!==o&&null!==a&&2048&a[sr]&&!(512&a[sr]);){const c=SS(o,a,n,i|fr.Self,ya);if(c!==ya)return c;let u=o.parent;if(!u){const _=a[Tw];if(_){const A=_.get(n,ya,i);if(A!==ya)return A}u=CS(a),a=a[yu]}o=u}return s}(r,t,n,i,ya);if(a!==ya)return a}const o=SS(r,t,n,i,ya);if(o!==ya)return o}return xS(t,n,i,s)}function SS(r,t,n,i,s){const o=function Hj(r){if("string"==typeof r)return r.charCodeAt(0)||0;const t=r.hasOwnProperty(oi)?r[oi]:void 0;return"number"==typeof t?t>=0?t&yS:qj:t}(n);if("function"==typeof o){if(!lS(t,r,i))return i&fr.Host?_S(s,0,i):xS(t,n,i,s);try{let a;if(a=o(i),null!=a||i&fr.Optional)return a;ou()}finally{hS()}}else if("number"==typeof o){let a=null,c=bS(r,t),u=Mu,_=i&fr.Host?t[Bi][Ts]:null;for((-1===c||i&fr.SkipSelf)&&(u=-1===c?Vp(r,t):t[c+8],u!==Mu&&ES(i,!1)?(a=t[pn],c=Dh(u),t=Ih(u,t)):c=-1);-1!==c;){const A=t[pn];if(MS(o,c,A.data)){const O=Gj(c,t,n,a,i,_);if(O!==ya)return O}u=t[c+8],u!==Mu&&ES(i,t[pn].data[c+8]===_)&&MS(o,c,t)?(a=A,c=Dh(u),t=Ih(u,t)):c=-1}}return s}function Gj(r,t,n,i,s,o){const a=t[pn],c=a.data[r+8],A=zp(c,a,n,null==i?oc(c)&&$v:i!=a&&0!=(3&c.type),s&fr.Host&&o===c);return null!==A?cc(t,a,A,c):ya}function zp(r,t,n,i,s){const o=r.providerIndexes,a=t.data,c=1048575&o,u=r.directiveStart,A=o>>20,B=s?c+A:r.directiveEnd;for(let G=i?c:c+A;G<B;G++){const Y=a[G];if(G<u&&n===Y||G>=u&&Y.type===n)return G}if(s){const G=a[u];if(G&&Zo(G)&&G.type===n)return u}return null}function cc(r,t,n,i){let s=r[n];const o=t.data;if(function Nj(r){return r instanceof Ah}(s)){const a=s;a.resolving&&function xp(r,t){const n=t?`. Dependency path: ${t.join(" > ")} > ${r}`:"";throw new jt(-200,`Circular dependency in DI detected for ${r}${n}`)}(function jr(r){return"function"==typeof r?r.name||r.toString():"object"==typeof r&&null!=r&&"function"==typeof r.type?r.type.name||r.type.toString():Hn(r)}(o[n]));const c=Up(a.canSeeViewProviders);a.resolving=!0;const _=a.injectImpl?ps(a.injectImpl):null;lS(r,i,fr.Default);try{s=r[n]=a.factory(void 0,o,r,i),t.firstCreatePass&&n>=i.directiveStart&&function Lj(r,t,n){const{ngOnChanges:i,ngOnInit:s,ngDoCheck:o}=t.type.prototype;if(i){const a=Ww(t);(n.preOrderHooks??=[]).push(r,a),(n.preOrderCheckHooks??=[]).push(r,a)}s&&(n.preOrderHooks??=[]).push(0-r,s),o&&((n.preOrderHooks??=[]).push(r,o),(n.preOrderCheckHooks??=[]).push(r,o))}(n,o[n],t)}finally{null!==_&&ps(_),Up(c),a.resolving=!1,hS()}}return s}function MS(r,t,n){return!!(n[t+(r>>vS)]&1<<r)}function ES(r,t){return!(r&fr.Self||r&fr.Host&&t)}class Gs{constructor(t,n){this._tNode=t,this._lView=n}get(t,n,i){return wS(this._tNode,this._lView,t,We(i),n)}}function qj(){return new Gs(vs(),Pt())}function bs(r){return ht(()=>{const t=r.prototype.constructor,n=t[Nr]||Zv(t),i=Object.prototype;let s=Object.getPrototypeOf(r.prototype).constructor;for(;s&&s!==i;){const o=s[Nr]||Zv(s);if(o&&o!==n)return o;s=Object.getPrototypeOf(s)}return o=>new o})}function Zv(r){return iu(r)?()=>{const t=Zv(Rn(r));return t&&t()}:ac(r)}function CS(r){const t=r[pn],n=t.type;return 2===n?t.declTNode:1===n?r[Ts]:null}const Cu="__parameters__";function Au(r,t,n){return ht(()=>{const i=function Kv(r){return function(...n){if(r){const i=r(...n);for(const s in i)this[s]=i[s]}}}(t);function s(...o){if(this instanceof s)return i.apply(this,o),this;const a=new s(...o);return c.annotation=a,c;function c(u,_,A){const O=u.hasOwnProperty(Cu)?u[Cu]:Object.defineProperty(u,Cu,{value:[]})[Cu];for(;O.length<=A;)O.push(null);return(O[A]=O[A]||[]).push(a),u}}return n&&(s.prototype=Object.create(n.prototype)),s.prototype.ngMetadataName=r,s.annotationCls=s,s})}function Iu(r,t){r.forEach(n=>Array.isArray(n)?Iu(n,t):t(n))}function AS(r,t,n){t>=r.length?r.push(n):r.splice(t,0,n)}function Hp(r,t){return t>=r.length-1?r.pop():r.splice(t,1)[0]}function mo(r,t,n){let i=Pu(r,t);return i>=0?r[1|i]=n:(i=~i,function eN(r,t,n,i){let s=r.length;if(s==t)r.push(n,i);else if(1===s)r.push(i,r[0]),r[0]=n;else{for(s--,r.push(r[s-1],r[s]);s>t;)r[s]=r[s-2],s--;r[t]=n,r[t+1]=i}}(r,i,t,n)),i}function Jv(r,t){const n=Pu(r,t);if(n>=0)return r[1|n]}function Pu(r,t){return function DS(r,t,n){let i=0,s=r.length>>n;for(;s!==i;){const o=i+(s-i>>1),a=r[o<<n];if(t===a)return o<<n;a>t?s=o:i=o+1}return~(s<<n)}(r,t,1)}const qp=Ze(Au("Optional"),8),$p=Ze(Au("SkipSelf"),4);function Jp(r){return 128==(128&r.flags)}var wl=function(r){return r[r.Important=1]="Important",r[r.DashCase=2]="DashCase",r}(wl||{});const xN=/^>|^->|<!--|-->|--!>|<!-$/g,wN=/(<|>)/g,SN="\u200b$1\u200b";const r0=new Map;let MN=0;const o0="__ngContext__";function As(r,t){no(t)?(r[o0]=t[wh],function CN(r){r0.set(r[wh],r)}(t)):r[o0]=t}let a0;function l0(r,t){return a0(r,t)}function Nh(r){const t=r[bi];return Bs(t)?t[bi]:t}function YS(r){return KS(r[_h])}function ZS(r){return KS(r[Yo])}function KS(r){for(;null!==r&&!Bs(r);)r=r[Yo];return r}function Lu(r,t,n,i,s){if(null!=i){let o,a=!1;Bs(i)?o=i:no(i)&&(a=!0,i=i[Ii]);const c=li(i);0===r&&null!==n?null==s?tM(t,n,c):uc(t,n,c,s||null,!0):1===r&&null!==n?uc(t,n,c,s||null,!0):2===r?function sm(r,t,n){const i=rm(r,t);i&&function WN(r,t,n,i){r.removeChild(t,n,i)}(r,i,t,n)}(t,c,a):3===r&&t.destroyNode(c),null!=o&&function XN(r,t,n,i,s){const o=n[pa];o!==li(n)&&Lu(t,r,i,o,s);for(let c=gs;c<n.length;c++){const u=n[c];Fh(u[pn],u,r,t,i,o)}}(t,r,o,n,s)}}function c0(r,t){return r.createComment(function VS(r){return r.replace(xN,t=>t.replace(wN,SN))}(t))}function tm(r,t,n){return r.createElement(t,n)}function QS(r,t){const n=r[bu],i=n.indexOf(t);Jw(t),n.splice(i,1)}function nm(r,t){if(r.length<=gs)return;const n=gs+t,i=r[n];if(i){const s=i[xh];null!==s&&s!==r&&QS(s,i),t>0&&(r[n-1][Yo]=i[Yo]);const o=Hp(r,gs+t);!function kN(r,t){Fh(r,t,t[Qn],2,null,null),t[Ii]=null,t[Ts]=null}(i[pn],i);const a=o[fa];null!==a&&a.detachView(o[pn]),i[bi]=null,i[Yo]=null,i[sr]&=-129}return i}function u0(r,t){if(!(256&t[sr])){const n=t[Qn];t[Sh]&&kw(t[Sh]),t[Mh]&&kw(t[Mh]),n.destroyNode&&Fh(r,t,n,3,null,null),function BN(r){let t=r[_h];if(!t)return d0(r[pn],r);for(;t;){let n=null;if(no(t))n=t[_h];else{const i=t[gs];i&&(n=i)}if(!n){for(;t&&!t[Yo]&&t!==r;)no(t)&&d0(t[pn],t),t=t[bi];null===t&&(t=r),no(t)&&d0(t[pn],t),n=t&&t[Yo]}t=n}}(t)}}function d0(r,t){if(!(256&t[sr])){t[sr]&=-129,t[sr]|=256,function HN(r,t){let n;if(null!=r&&null!=(n=r.destroyHooks))for(let i=0;i<n.length;i+=2){const s=t[n[i]];if(!(s instanceof Ah)){const o=n[i+1];if(Array.isArray(o))for(let a=0;a<o.length;a+=2){const c=s[o[a]],u=o[a+1];ma(4,c,u);try{u.call(c)}finally{ma(5,c,u)}}else{ma(4,s,o);try{o.call(s)}finally{ma(5,s,o)}}}}}(r,t),function GN(r,t){const n=r.cleanup,i=t[mu];if(null!==n)for(let o=0;o<n.length-1;o+=2)if("string"==typeof n[o]){const a=n[o+3];a>=0?i[a]():i[-a].unsubscribe(),o+=2}else n[o].call(i[n[o+1]]);null!==i&&(t[mu]=null);const s=t[vl];if(null!==s){t[vl]=null;for(let o=0;o<s.length;o++)(0,s[o])()}}(r,t),1===t[pn].type&&t[Qn].destroy();const n=t[xh];if(null!==n&&Bs(t[bi])){n!==t[bi]&&QS(n,t);const i=t[fa];null!==i&&i.detachView(r)}!function TN(r){r0.delete(r[wh])}(t)}}function h0(r,t,n){return function eM(r,t,n){let i=t;for(;null!==i&&40&i.type;)i=(t=i).parent;if(null===i)return n[Ii];{const{componentOffset:s}=i;if(s>-1){const{encapsulation:o}=r.data[i.directiveStart+s];if(o===nt.None||o===nt.Emulated)return null}return ro(i,n)}}(r,t.parent,n)}function uc(r,t,n,i,s){r.insertBefore(t,n,i,s)}function tM(r,t,n){r.appendChild(t,n)}function nM(r,t,n,i,s){null!==i?uc(r,t,n,i,s):tM(r,t,n)}function rm(r,t){return r.parentNode(t)}let f0,y0,sM=function iM(r,t,n){return 40&r.type?ro(r,n):null};function im(r,t,n,i){const s=h0(r,i,t),o=t[Qn],c=function rM(r,t,n){return sM(r,t,n)}(i.parent||t[Ts],i,t);if(null!=s)if(Array.isArray(n))for(let u=0;u<n.length;u++)nM(o,s,n[u],c,!1);else nM(o,s,n,c,!1);void 0!==f0&&f0(o,i,t,n,s)}function kh(r,t){if(null!==t){const n=t.type;if(3&n)return ro(t,r);if(4&n)return p0(-1,r[t.index]);if(8&n){const i=t.child;if(null!==i)return kh(r,i);{const s=r[t.index];return Bs(s)?p0(-1,s):li(s)}}if(32&n)return l0(t,r)()||li(r[t.index]);{const i=aM(r,t);return null!==i?Array.isArray(i)?i[0]:kh(Nh(r[Bi]),i):kh(r,t.next)}}return null}function aM(r,t){return null!==t?r[Bi][Ts].projection[t.projection]:null}function p0(r,t){const n=gs+r+1;if(n<t.length){const i=t[n],s=i[pn].firstChild;if(null!==s)return kh(i,s)}return t[pa]}function m0(r,t,n,i,s,o,a){for(;null!=n;){const c=i[n.index],u=n.type;if(a&&0===t&&(c&&As(li(c),i),n.flags|=2),32!=(32&n.flags))if(8&u)m0(r,t,n.child,i,s,o,!1),Lu(t,r,s,c,o);else if(32&u){const _=l0(n,i);let A;for(;A=_();)Lu(t,r,s,A,o);Lu(t,r,s,c,o)}else 16&u?cM(r,t,i,n,s,o):Lu(t,r,s,c,o);n=a?n.projectionNext:n.next}}function Fh(r,t,n,i,s,o){m0(n,i,r.firstChild,t,s,o,!1)}function cM(r,t,n,i,s,o){const a=n[Bi],u=a[Ts].projection[i.projection];if(Array.isArray(u))for(let _=0;_<u.length;_++)Lu(t,r,s,u[_],o);else{let _=u;const A=a[bi];Jp(i)&&(_.flags|=128),m0(r,t,_,A,s,o,!0)}}function uM(r,t,n){""===n?r.removeAttribute(t,"class"):r.setAttribute(t,"class",n)}function dM(r,t,n){const{mergedAttrs:i,classes:s,styles:o}=n;null!==i&&Fs(r,t,i),null!==s&&uM(r,t,s),null!==o&&function ZN(r,t,n){r.setAttribute(t,"style",n)}(r,t,o)}class mM{constructor(t){this.changingThisBreaksApplicationSecurity=t}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}const zh=new hn("ENVIRONMENT_INITIALIZER"),EM=new hn("INJECTOR",-1),CM=new hn("INJECTOR_DEF_TYPES");class S0{get(t,n=ic){if(n===ic){const i=new Error(`NullInjectorError: No provider for ${Di(t)}!`);throw i.name="NullInjectorError",i}return n}}function S3(...r){return{\u0275providers:TM(0,r),\u0275fromNgModule:!0}}function TM(r,...t){const n=[],i=new Set;let s;const o=a=>{n.push(a)};return Iu(t,a=>{const c=a;cm(c,o,[],i)&&(s||=[],s.push(c))}),void 0!==s&&AM(s,o),n}function AM(r,t){for(let n=0;n<r.length;n++){const{ngModule:i,providers:s}=r[n];E0(s,o=>{t(o,i)})}}function cm(r,t,n,i){if(!(r=Rn(r)))return!1;let s=null,o=nc(r);const a=!o&&Ar(r);if(o||a){if(a&&!a.standalone)return!1;s=r}else{const u=r.ngModule;if(o=nc(u),!o)return!1;s=u}const c=i.has(s);if(a){if(c)return!1;if(i.add(s),a.dependencies){const u="function"==typeof a.dependencies?a.dependencies():a.dependencies;for(const _ of u)cm(_,t,n,i)}}else{if(!o)return!1;{if(null!=o.imports&&!c){let _;i.add(s);try{Iu(o.imports,A=>{cm(A,t,n,i)&&(_||=[],_.push(A))})}finally{}void 0!==_&&AM(_,t)}if(!c){const _=ac(s)||(()=>new s);t({provide:s,useFactory:_,deps:un},s),t({provide:CM,useValue:s,multi:!0},s),t({provide:zh,useValue:()=>me(s),multi:!0},s)}const u=o.providers;if(null!=u&&!c){const _=r;E0(u,A=>{t(A,_)})}}}return s!==r&&void 0!==r.providers}function E0(r,t){for(let n of r)su(n)&&(n=n.\u0275providers),Array.isArray(n)?E0(n,t):t(n)}const M3=Fr({provide:String,useValue:Fr});function C0(r){return null!==r&&"object"==typeof r&&M3 in r}function dc(r){return"function"==typeof r}const T0=new hn("Set Injector scope."),um={},C3={};let A0;function dm(){return void 0===A0&&(A0=new S0),A0}class go{}class Fu extends go{get destroyed(){return this._destroyed}constructor(t,n,i,s){super(),this.parent=n,this.source=i,this.scopes=s,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,I0(t,a=>this.processProvider(a)),this.records.set(EM,Uu(void 0,this)),s.has("environment")&&this.records.set(go,Uu(void 0,this));const o=this.records.get(T0);null!=o&&"string"==typeof o.value&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(CM.multi,un,fr.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const n of this._ngOnDestroyHooks)n.ngOnDestroy();const t=this._onDestroyHooks;this._onDestroyHooks=[];for(const n of t)n()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear()}}onDestroy(t){return this.assertNotDestroyed(),this._onDestroyHooks.push(t),()=>this.removeOnDestroy(t)}runInContext(t){this.assertNotDestroyed();const n=se(this),i=ps(void 0);try{return t()}finally{se(n),ps(i)}}get(t,n=ic,i=fr.Default){if(this.assertNotDestroyed(),t.hasOwnProperty(ts))return t[ts](this);i=We(i);const o=se(this),a=ps(void 0);try{if(!(i&fr.SkipSelf)){let u=this.records.get(t);if(void 0===u){const _=function P3(r){return"function"==typeof r||"object"==typeof r&&r instanceof hn}(t)&&tc(t);u=_&&this.injectableDefInScope(_)?Uu(D0(t),um):null,this.records.set(t,u)}if(null!=u)return this.hydrate(t,u)}return(i&fr.Self?dm():this.parent).get(t,n=i&fr.Optional&&n===ic?null:n)}catch(c){if("NullInjectorError"===c.name){if((c[gi]=c[gi]||[]).unshift(Di(t)),o)throw c;return function bt(r,t,n,i){const s=r[gi];throw t[j]&&s.unshift(t[j]),r.message=function ct(r,t,n,i=null){r=r&&"\n"===r.charAt(0)&&"\u0275"==r.charAt(1)?r.slice(2):r;let s=Di(t);if(Array.isArray(t))s=t.map(Di).join(" -> ");else if("object"==typeof t){let o=[];for(let a in t)if(t.hasOwnProperty(a)){let c=t[a];o.push(a+":"+("string"==typeof c?JSON.stringify(c):Di(c)))}s=`{${o.join(", ")}}`}return`${n}${i?"("+i+")":""}[${s}]: ${r.replace(w,"\n  ")}`}("\n"+r.message,s,n,i),r.ngTokenPath=s,r[gi]=null,r}(c,t,"R3InjectorError",this.source)}throw c}finally{ps(a),se(o)}}resolveInjectorInitializers(){const t=se(this),n=ps(void 0);try{const s=this.get(zh.multi,un,fr.Self);for(const o of s)o()}finally{se(t),ps(n)}}toString(){const t=[],n=this.records;for(const i of n.keys())t.push(Di(i));return`R3Injector[${t.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new jt(205,!1)}processProvider(t){let n=dc(t=Rn(t))?t:Rn(t&&t.provide);const i=function A3(r){return C0(r)?Uu(void 0,r.useValue):Uu(PM(r),um)}(t);if(dc(t)||!0!==t.multi)this.records.get(n);else{let s=this.records.get(n);s||(s=Uu(void 0,um,!0),s.factory=()=>it(s.multi),this.records.set(n,s)),n=t,s.multi.push(t)}this.records.set(n,i)}hydrate(t,n){return n.value===um&&(n.value=C3,n.value=n.factory()),"object"==typeof n.value&&n.value&&function I3(r){return null!==r&&"object"==typeof r&&"function"==typeof r.ngOnDestroy}(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}injectableDefInScope(t){if(!t.providedIn)return!1;const n=Rn(t.providedIn);return"string"==typeof n?"any"===n||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(t){const n=this._onDestroyHooks.indexOf(t);-1!==n&&this._onDestroyHooks.splice(n,1)}}function D0(r){const t=tc(r),n=null!==t?t.factory:ac(r);if(null!==n)return n;if(r instanceof hn)throw new jt(204,!1);if(r instanceof Function)return function T3(r){const t=r.length;if(t>0)throw function Oh(r,t){const n=[];for(let i=0;i<r;i++)n.push(t);return n}(t,"?"),new jt(204,!1);const n=function Sp(r){return r&&(r[rc]||r[mh])||null}(r);return null!==n?()=>n.factory(r):()=>new r}(r);throw new jt(204,!1)}function PM(r,t,n){let i;if(dc(r)){const s=Rn(r);return ac(s)||D0(s)}if(C0(r))i=()=>Rn(r.useValue);else if(function IM(r){return!(!r||!r.useFactory)}(r))i=()=>r.useFactory(...it(r.deps||[]));else if(function DM(r){return!(!r||!r.useExisting)}(r))i=()=>me(Rn(r.useExisting));else{const s=Rn(r&&(r.useClass||r.provide));if(!function D3(r){return!!r.deps}(r))return ac(s)||D0(s);i=()=>new s(...it(r.deps))}return i}function Uu(r,t,n=!1){return{factory:r,value:t,multi:n?[]:void 0}}function I0(r,t){for(const n of r)Array.isArray(n)?I0(n,t):n&&su(n)?I0(n.\u0275providers,t):t(n)}const hm=new hn("AppId",{providedIn:"root",factory:()=>R3}),R3="ng",RM=new hn("Platform Initializer"),hc=new hn("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),OM=new hn("CSP nonce",{providedIn:"root",factory:()=>function Nu(){if(void 0!==y0)return y0;if(typeof document<"u")return document;throw new jt(210,!1)}().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});let LM=(r,t,n)=>null;function F0(r,t,n=!1){return LM(r,t,n)}class z3{}class kM{}class H3{resolveComponentFactory(t){throw function G3(r){const t=Error(`No component factory found for ${Di(r)}.`);return t.ngComponent=r,t}(t)}}let vm=(()=>{class r{static{this.NULL=new H3}}return r})();function W3(){return zu(vs(),Pt())}function zu(r,t){return new yo(ro(r,t))}let yo=(()=>{class r{constructor(n){this.nativeElement=n}static{this.__NG_ELEMENT_ID__=W3}}return r})();function q3(r){return r instanceof yo?r.nativeElement:r}class UM{}let Fa=(()=>{class r{constructor(){this.destroyNode=null}static{this.__NG_ELEMENT_ID__=()=>function $3(){const r=Pt(),n=po(vs().index,r);return(no(n)?n:r)[Qn]}()}}return r})(),X3=(()=>{class r{static{this.\u0275prov=Dn({token:r,providedIn:"root",factory:()=>null})}}return r})();class Wh{constructor(t){this.full=t,this.major=t.split(".")[0],this.minor=t.split(".")[1],this.patch=t.split(".").slice(2).join(".")}}const Y3=new Wh("16.2.12"),V0={};function GM(r,t=null,n=null,i){const s=HM(r,t,n,i);return s.resolveInjectorInitializers(),s}function HM(r,t=null,n=null,i,s=new Set){const o=[n||un,S3(r)];return i=i||("object"==typeof r?void 0:Di(r)),new Fu(o,t||dm(),i||null,s)}let vo=(()=>{class r{static{this.THROW_IF_NOT_FOUND=ic}static{this.NULL=new S0}static create(n,i){if(Array.isArray(n))return GM({name:""},i,n,"");{const s=n.name??"";return GM({name:s},n.parent,n.providers,s)}}static{this.\u0275prov=Dn({token:r,providedIn:"any",factory:()=>me(EM)})}static{this.__NG_ELEMENT_ID__=-1}}return r})();function G0(r){return r.ngOriginalError}class Ua{constructor(){this._console=console}handleError(t){const n=this._findOriginalError(t);this._console.error("ERROR",t),n&&this._console.error("ORIGINAL ERROR",n)}_findOriginalError(t){let n=t&&G0(t);for(;n&&G0(n);)n=G0(n);return n||null}}function H0(r){return t=>{setTimeout(r,void 0,t)}}const Mi=class rk extends le{constructor(t=!1){super(),this.__isAsync=t}emit(t){super.next(t)}subscribe(t,n,i){let s=t,o=n||(()=>null),a=i;if(t&&"object"==typeof t){const u=t;s=u.next?.bind(u),o=u.error?.bind(u),a=u.complete?.bind(u)}this.__isAsync&&(o=H0(o),s&&(s=H0(s)),a&&(a=H0(a)));const c=super.subscribe({next:s,error:o,complete:a});return t instanceof l&&t.add(c),c}};function qM(...r){}class ci{constructor({enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:n=!1,shouldCoalesceRunChangeDetection:i=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Mi(!1),this.onMicrotaskEmpty=new Mi(!1),this.onStable=new Mi(!1),this.onError=new Mi(!1),typeof Zone>"u")throw new jt(908,!1);Zone.assertZonePatched();const s=this;s._nesting=0,s._outer=s._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(s._inner=s._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(s._inner=s._inner.fork(Zone.longStackTraceZoneSpec)),s.shouldCoalesceEventChangeDetection=!i&&n,s.shouldCoalesceRunChangeDetection=i,s.lastRequestAnimationFrameId=-1,s.nativeRequestAnimationFrame=function ik(){const r="function"==typeof Ht.requestAnimationFrame;let t=Ht[r?"requestAnimationFrame":"setTimeout"],n=Ht[r?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&t&&n){const i=t[Zone.__symbol__("OriginalDelegate")];i&&(t=i);const s=n[Zone.__symbol__("OriginalDelegate")];s&&(n=s)}return{nativeRequestAnimationFrame:t,nativeCancelAnimationFrame:n}}().nativeRequestAnimationFrame,function ak(r){const t=()=>{!function ok(r){r.isCheckStableRunning||-1!==r.lastRequestAnimationFrameId||(r.lastRequestAnimationFrameId=r.nativeRequestAnimationFrame.call(Ht,()=>{r.fakeTopEventTask||(r.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{r.lastRequestAnimationFrameId=-1,q0(r),r.isCheckStableRunning=!0,W0(r),r.isCheckStableRunning=!1},void 0,()=>{},()=>{})),r.fakeTopEventTask.invoke()}),q0(r))}(r)};r._inner=r._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,i,s,o,a,c)=>{if(function ck(r){return!(!Array.isArray(r)||1!==r.length)&&!0===r[0].data?.__ignore_ng_zone__}(c))return n.invokeTask(s,o,a,c);try{return $M(r),n.invokeTask(s,o,a,c)}finally{(r.shouldCoalesceEventChangeDetection&&"eventTask"===o.type||r.shouldCoalesceRunChangeDetection)&&t(),XM(r)}},onInvoke:(n,i,s,o,a,c,u)=>{try{return $M(r),n.invoke(s,o,a,c,u)}finally{r.shouldCoalesceRunChangeDetection&&t(),XM(r)}},onHasTask:(n,i,s,o)=>{n.hasTask(s,o),i===s&&("microTask"==o.change?(r._hasPendingMicrotasks=o.microTask,q0(r),W0(r)):"macroTask"==o.change&&(r.hasPendingMacrotasks=o.macroTask))},onHandleError:(n,i,s,o)=>(n.handleError(s,o),r.runOutsideAngular(()=>r.onError.emit(o)),!1)})}(s)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!ci.isInAngularZone())throw new jt(909,!1)}static assertNotInAngularZone(){if(ci.isInAngularZone())throw new jt(909,!1)}run(t,n,i){return this._inner.run(t,n,i)}runTask(t,n,i,s){const o=this._inner,a=o.scheduleEventTask("NgZoneEvent: "+s,t,sk,qM,qM);try{return o.runTask(a,n,i)}finally{o.cancelTask(a)}}runGuarded(t,n,i){return this._inner.runGuarded(t,n,i)}runOutsideAngular(t){return this._outer.run(t)}}const sk={};function W0(r){if(0==r._nesting&&!r.hasPendingMicrotasks&&!r.isStable)try{r._nesting++,r.onMicrotaskEmpty.emit(null)}finally{if(r._nesting--,!r.hasPendingMicrotasks)try{r.runOutsideAngular(()=>r.onStable.emit(null))}finally{r.isStable=!0}}}function q0(r){r.hasPendingMicrotasks=!!(r._hasPendingMicrotasks||(r.shouldCoalesceEventChangeDetection||r.shouldCoalesceRunChangeDetection)&&-1!==r.lastRequestAnimationFrameId)}function $M(r){r._nesting++,r.isStable&&(r.isStable=!1,r.onUnstable.emit(null))}function XM(r){r._nesting--,W0(r)}class lk{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Mi,this.onMicrotaskEmpty=new Mi,this.onStable=new Mi,this.onError=new Mi}run(t,n,i){return t.apply(n,i)}runGuarded(t,n,i){return t.apply(n,i)}runOutsideAngular(t){return t()}runTask(t,n,i,s){return t.apply(n,i)}}const YM=new hn("",{providedIn:"root",factory:ZM});function ZM(){const r=_e(ci);let t=!0;return function tu(...r){const t=rn(r),n=function wi(r,t){return"number"==typeof nn(r)?r.pop():t}(r,1/0),i=r;return i.length?1===i.length?Lr(i[0]):tn(n)(si(i,t)):St}(new X(s=>{t=r.isStable&&!r.hasPendingMacrotasks&&!r.hasPendingMicrotasks,r.runOutsideAngular(()=>{s.next(t),s.complete()})}),new X(s=>{let o;r.runOutsideAngular(()=>{o=r.onStable.subscribe(()=>{ci.assertNotInAngularZone(),queueMicrotask(()=>{!t&&!r.hasPendingMacrotasks&&!r.hasPendingMicrotasks&&(t=!0,s.next(!0))})})});const a=r.onUnstable.subscribe(()=>{ci.assertInAngularZone(),t&&(t=!1,r.runOutsideAngular(()=>{s.next(!1)}))});return()=>{o.unsubscribe(),a.unsubscribe()}}).pipe(hh()))}function Ba(r){return r instanceof Function?r():r}let $0=(()=>{class r{constructor(){this.renderDepth=0,this.handler=null}begin(){this.handler?.validateBegin(),this.renderDepth++}end(){this.renderDepth--,0===this.renderDepth&&this.handler?.execute()}ngOnDestroy(){this.handler?.destroy(),this.handler=null}static{this.\u0275prov=Dn({token:r,providedIn:"root",factory:()=>new r})}}return r})();function qh(r){for(;r;){r[sr]|=64;const t=Nh(r);if(Dv(r)&&!t)return r;r=t}return null}const tE=new hn("",{providedIn:"root",factory:()=>!1});let xm=null;function sE(r,t){return r[t]??lE()}function oE(r,t){const n=lE();n.producerNode?.length&&(r[t]=xm,n.lView=r,xm=aE())}const bk={...Pw,consumerIsAlwaysLive:!0,consumerMarkedDirty:r=>{qh(r.lView)},lView:null};function aE(){return Object.create(bk)}function lE(){return xm??=aE(),xm}const ir={};function An(r){cE(Dr(),Pt(),zs()+r,!1)}function cE(r,t,n,i){if(!i)if(3==(3&t[sr])){const o=r.preOrderCheckHooks;null!==o&&kp(t,o,n)}else{const o=r.preOrderHooks;null!==o&&Fp(t,o,0,n)}lc(n)}function kt(r,t=fr.Default){const n=Pt();return null===n?me(r,t):wS(vs(),n,Rn(r),t)}function wm(r,t,n,i,s,o,a,c,u,_,A){const O=t.blueprint.slice();return O[Ii]=s,O[sr]=140|i,(null!==_||r&&2048&r[sr])&&(O[sr]|=2048),Kw(O),O[bi]=O[yu]=r,O[Ui]=n,O[gu]=a||r&&r[gu],O[Qn]=c||r&&r[Qn],O[yl]=u||r&&r[yl]||null,O[Ts]=o,O[wh]=function EN(){return MN++}(),O[La]=A,O[Tw]=_,O[Bi]=2==t.type?r[Bi]:O,O}function Wu(r,t,n,i,s){let o=r.data[t];if(null===o)o=function X0(r,t,n,i,s){const o=rS(),a=kv(),u=r.data[t]=function Tk(r,t,n,i,s,o){let a=t?t.injectorIndex:-1,c=0;return function wu(){return null!==Wn.skipHydrationRootTNode}()&&(c|=128),{type:n,index:i,insertBeforeIndex:null,injectorIndex:a,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:c,providerIndexes:0,value:s,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:t,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,a?o:o&&o.parent,n,t,i,s);return null===r.firstChild&&(r.firstChild=u),null!==o&&(a?null==o.child&&null!==u.parent&&(o.child=u):null===o.next&&(o.next=u,u.prev=o)),u}(r,t,n,i,s),function Cj(){return Wn.lFrame.inI18n}()&&(o.flags|=32);else if(64&o.type){o.type=n,o.value=i,o.attrs=s;const a=function Th(){const r=Wn.lFrame,t=r.currentTNode;return r.isParent?t:t.parent}();o.injectorIndex=null===a?-1:a.injectorIndex}return ga(o,!0),o}function $h(r,t,n,i){if(0===n)return-1;const s=t.length;for(let o=0;o<n;o++)t.push(i),r.blueprint.push(i),r.data.push(null);return s}function dE(r,t,n,i,s){const o=sE(t,Sh),a=zs(),c=2&i;try{lc(-1),c&&t.length>wr&&cE(r,t,wr,!1),ma(c?2:0,s);const _=c?o:null,A=Pv(_);try{null!==_&&(_.dirty=!1),n(i,s)}finally{Rv(_,A)}}finally{c&&null===t[Sh]&&oE(t,Sh),lc(a),ma(c?3:1,s)}}function Y0(r,t,n){if(Av(t)){const i=Oo(null);try{const o=t.directiveEnd;for(let a=t.directiveStart;a<o;a++){const c=r.data[a];c.contentQueries&&c.contentQueries(1,n[a],a)}}finally{Oo(i)}}}function Z0(r,t,n){nS()&&(function Lk(r,t,n,i){const s=n.directiveStart,o=n.directiveEnd;oc(n)&&function Vk(r,t,n){const i=ro(t,r),s=hE(n);let a=16;n.signals?a=4096:n.onPush&&(a=64);const c=Sm(r,wm(r,s,null,a,i,t,null,r[gu].rendererFactory.createRenderer(i,n),null,null,null));r[t.index]=c}(t,n,r.data[s+n.componentOffset]),r.firstCreatePass||Bp(n,t),As(i,t);const a=n.initialInputs;for(let c=s;c<o;c++){const u=r.data[c],_=cc(t,r,c,n);As(_,t),null!==a&&zk(0,c-s,_,u,0,a),Zo(u)&&(po(n.index,t)[Ui]=cc(t,r,c,n))}}(r,t,n,ro(n,t)),64==(64&n.flags)&&yE(r,t,n))}function K0(r,t,n=ro){const i=t.localNames;if(null!==i){let s=t.index+1;for(let o=0;o<i.length;o+=2){const a=i[o+1],c=-1===a?n(t,r):r[a];r[s++]=c}}}function hE(r){const t=r.tView;return null===t||t.incompleteFirstPass?r.tView=J0(1,null,r.template,r.decls,r.vars,r.directiveDefs,r.pipeDefs,r.viewQuery,r.schemas,r.consts,r.id):t}function J0(r,t,n,i,s,o,a,c,u,_,A){const O=wr+i,B=O+s,G=function xk(r,t){const n=[];for(let i=0;i<t;i++)n.push(i<r?null:ir);return n}(O,B),Y="function"==typeof _?_():_;return G[pn]={type:r,blueprint:G,template:n,queries:null,viewQuery:c,declTNode:t,data:G.slice().fill(null,O),bindingStartIndex:O,expandoStartIndex:B,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof o?o():o,pipeRegistry:"function"==typeof a?a():a,firstChild:null,schemas:u,consts:Y,incompleteFirstPass:!1,ssrId:A}}let fE=r=>null;function pE(r,t,n,i){for(let s in r)if(r.hasOwnProperty(s)){n=null===n?{}:n;const o=r[s];null===i?mE(n,t,s,o):i.hasOwnProperty(s)&&mE(n,t,i[s],o)}return n}function mE(r,t,n,i){r.hasOwnProperty(n)?r[n].push(t,i):r[n]=[t,i]}function Q0(r,t,n,i){if(nS()){const s=null===i?null:{"":-1},o=function Nk(r,t){const n=r.directiveRegistry;let i=null,s=null;if(n)for(let o=0;o<n.length;o++){const a=n[o];if(xw(t,a.selectors,!1))if(i||(i=[]),Zo(a))if(null!==a.findHostDirectiveDefs){const c=[];s=s||new Map,a.findHostDirectiveDefs(a,c,s),i.unshift(...c,a),eb(r,t,c.length)}else i.unshift(a),eb(r,t,0);else s=s||new Map,a.findHostDirectiveDefs?.(a,i,s),i.push(a)}return null===i?null:[i,s]}(r,n);let a,c;null===o?a=c=null:[a,c]=o,null!==a&&gE(r,t,n,a,s,c),s&&function kk(r,t,n){if(t){const i=r.localNames=[];for(let s=0;s<t.length;s+=2){const o=n[t[s+1]];if(null==o)throw new jt(-301,!1);i.push(t[s],o)}}}(n,i,s)}n.mergedAttrs=Tr(n.mergedAttrs,n.attrs)}function gE(r,t,n,i,s,o){for(let _=0;_<i.length;_++)Yv(Bp(n,t),r,i[_].type);!function Uk(r,t,n){r.flags|=1,r.directiveStart=t,r.directiveEnd=t+n,r.providerIndexes=t}(n,r.data.length,i.length);for(let _=0;_<i.length;_++){const A=i[_];A.providersResolver&&A.providersResolver(A)}let a=!1,c=!1,u=$h(r,t,i.length,null);for(let _=0;_<i.length;_++){const A=i[_];n.mergedAttrs=Tr(n.mergedAttrs,A.hostAttrs),Bk(r,n,t,u,A),Fk(u,A,s),null!==A.contentQueries&&(n.flags|=4),(null!==A.hostBindings||null!==A.hostAttrs||0!==A.hostVars)&&(n.flags|=64);const O=A.type.prototype;!a&&(O.ngOnChanges||O.ngOnInit||O.ngDoCheck)&&((r.preOrderHooks??=[]).push(n.index),a=!0),!c&&(O.ngOnChanges||O.ngDoCheck)&&((r.preOrderCheckHooks??=[]).push(n.index),c=!0),u++}!function Ak(r,t,n){const s=t.directiveEnd,o=r.data,a=t.attrs,c=[];let u=null,_=null;for(let A=t.directiveStart;A<s;A++){const O=o[A],B=n?n.get(O):null,Y=B?B.outputs:null;u=pE(O.inputs,A,u,B?B.inputs:null),_=pE(O.outputs,A,_,Y);const ne=null===u||null===a||ei(t)?null:Gk(u,A,a);c.push(ne)}null!==u&&(u.hasOwnProperty("class")&&(t.flags|=8),u.hasOwnProperty("style")&&(t.flags|=16)),t.initialInputs=c,t.inputs=u,t.outputs=_}(r,n,o)}function yE(r,t,n){const i=n.directiveStart,s=n.directiveEnd,o=n.index,a=function Aj(){return Wn.lFrame.currentDirectiveIndex}();try{lc(o);for(let c=i;c<s;c++){const u=r.data[c],_=t[c];Uv(c),(null!==u.hostBindings||0!==u.hostVars||null!==u.hostAttrs)&&jk(u,_)}}finally{lc(-1),Uv(a)}}function jk(r,t){null!==r.hostBindings&&r.hostBindings(1,t)}function eb(r,t,n){t.componentOffset=n,(r.components??=[]).push(t.index)}function Fk(r,t,n){if(n){if(t.exportAs)for(let i=0;i<t.exportAs.length;i++)n[t.exportAs[i]]=r;Zo(t)&&(n[""]=r)}}function Bk(r,t,n,i,s){r.data[i]=s;const o=s.factory||(s.factory=ac(s.type)),a=new Ah(o,Zo(s),kt);r.blueprint[i]=a,n[i]=a,function Rk(r,t,n,i,s){const o=s.hostBindings;if(o){let a=r.hostBindingOpCodes;null===a&&(a=r.hostBindingOpCodes=[]);const c=~t.index;(function Ok(r){let t=r.length;for(;t>0;){const n=r[--t];if("number"==typeof n&&n<0)return n}return 0})(a)!=c&&a.push(c),a.push(n,i,o)}}(r,t,i,$h(r,n,s.hostVars,ir),s)}function va(r,t,n,i,s,o){const a=ro(r,t);!function tb(r,t,n,i,s,o,a){if(null==o)r.removeAttribute(t,s,n);else{const c=null==a?Hn(o):a(o,i||"",s);r.setAttribute(t,s,c,n)}}(t[Qn],a,o,r.value,n,i,s)}function zk(r,t,n,i,s,o){const a=o[t];if(null!==a)for(let c=0;c<a.length;)vE(i,n,a[c++],a[c++],a[c++])}function vE(r,t,n,i,s){const o=Oo(null);try{const a=r.inputTransforms;null!==a&&a.hasOwnProperty(i)&&(s=a[i].call(t,s)),null!==r.setInput?r.setInput(t,s,n,i):t[i]=s}finally{Oo(o)}}function Gk(r,t,n){let i=null,s=0;for(;s<n.length;){const o=n[s];if(0!==o)if(5!==o){if("number"==typeof o)break;if(r.hasOwnProperty(o)){null===i&&(i=[]);const a=r[o];for(let c=0;c<a.length;c+=2)if(a[c]===t){i.push(o,a[c+1],n[s+1]);break}}s+=2}else s+=2;else s+=4}return i}function bE(r,t,n,i){return[r,!0,!1,t,null,0,i,n,null,null,null]}function _E(r,t){const n=r.contentQueries;if(null!==n)for(let i=0;i<n.length;i+=2){const o=n[i+1];if(-1!==o){const a=r.data[o];Vv(n[i]),a.contentQueries(2,t[o],o)}}}function Sm(r,t){return r[_h]?r[Cw][Yo]=t:r[_h]=t,r[Cw]=t,t}function nb(r,t,n){Vv(0);const i=Oo(null);try{t(r,n)}finally{Oo(i)}}function xE(r){return r[mu]||(r[mu]=[])}function wE(r){return r.cleanup||(r.cleanup=[])}function ME(r,t){const n=r[yl],i=n?n.get(Ua,null):null;i&&i.handleError(t)}function rb(r,t,n,i,s){for(let o=0;o<n.length;){const a=n[o++],c=n[o++];vE(r.data[a],t[a],i,c,s)}}function Hk(r,t){const n=po(t,r),i=n[pn];!function Wk(r,t){for(let n=t.length;n<r.blueprint.length;n++)t.push(r.blueprint[n])}(i,n);const s=n[Ii];null!==s&&null===n[La]&&(n[La]=F0(s,n[yl])),ib(i,n,n[Ui])}function ib(r,t,n){zv(t);try{const i=r.viewQuery;null!==i&&nb(1,i,n);const s=r.template;null!==s&&dE(r,t,s,1,n),r.firstCreatePass&&(r.firstCreatePass=!1),r.staticContentQueries&&_E(r,t),r.staticViewQueries&&nb(2,r.viewQuery,n);const o=r.components;null!==o&&function qk(r,t){for(let n=0;n<t.length;n++)Hk(r,t[n])}(t,o)}catch(i){throw r.firstCreatePass&&(r.incompleteFirstPass=!0,r.firstCreatePass=!1),i}finally{t[sr]&=-5,Gv()}}let EE=(()=>{class r{constructor(){this.all=new Set,this.queue=new Map}create(n,i,s){const o=typeof Zone>"u"?null:Zone.current,a=function ij(r,t,n){const i=Object.create(sj);n&&(i.consumerAllowSignalWrites=!0),i.fn=r,i.schedule=t;const s=a=>{i.cleanupFn=a};return i.ref={notify:()=>jw(i),run:()=>{if(i.dirty=!1,i.hasRun&&!Nw(i))return;i.hasRun=!0;const a=Pv(i);try{i.cleanupFn(),i.cleanupFn=Hw,i.fn(s)}finally{Rv(i,a)}},cleanup:()=>i.cleanupFn()},i.ref}(n,_=>{this.all.has(_)&&this.queue.set(_,o)},s);let c;this.all.add(a),a.notify();const u=()=>{a.cleanup(),c?.(),this.all.delete(a),this.queue.delete(a)};return c=i?.onDestroy(u),{destroy:u}}flush(){if(0!==this.queue.size)for(const[n,i]of this.queue)this.queue.delete(n),i?i.run(()=>n.run()):n.run()}get isQueueEmpty(){return 0===this.queue.size}static{this.\u0275prov=Dn({token:r,providedIn:"root",factory:()=>new r})}}return r})();function Mm(r,t,n){let i=n?r.styles:null,s=n?r.classes:null,o=0;if(null!==t)for(let a=0;a<t.length;a++){const c=t[a];"number"==typeof c?o=c:1==o?s=nu(s,c):2==o&&(i=nu(i,c+": "+t[++a]+";"))}n?r.styles=i:r.stylesWithoutHost=i,n?r.classes=s:r.classesWithoutHost=s}function Xh(r,t,n,i,s=!1){for(;null!==n;){const o=t[n.index];null!==o&&i.push(li(o)),Bs(o)&&CE(o,i);const a=n.type;if(8&a)Xh(r,t,n.child,i);else if(32&a){const c=l0(n,t);let u;for(;u=c();)i.push(u)}else if(16&a){const c=aM(t,n);if(Array.isArray(c))i.push(...c);else{const u=Nh(t[Bi]);Xh(u[pn],u,c,i,!0)}}n=s?n.projectionNext:n.next}return i}function CE(r,t){for(let n=gs;n<r.length;n++){const i=r[n],s=i[pn].firstChild;null!==s&&Xh(i[pn],i,s,t)}r[pa]!==r[Ii]&&t.push(r[pa])}function Em(r,t,n,i=!0){const s=t[gu],o=s.rendererFactory,a=s.afterRenderEventManager;o.begin?.(),a?.begin();try{TE(r,t,r.template,n)}catch(u){throw i&&ME(t,u),u}finally{o.end?.(),s.effectManager?.flush(),a?.end()}}function TE(r,t,n,i){const s=t[sr];if(256!=(256&s)){t[gu].effectManager?.flush(),zv(t);try{Kw(t),function sS(r){return Wn.lFrame.bindingIndex=r}(r.bindingStartIndex),null!==n&&dE(r,t,n,2,i);const a=3==(3&s);if(a){const _=r.preOrderCheckHooks;null!==_&&kp(t,_,null)}else{const _=r.preOrderHooks;null!==_&&Fp(t,_,0,null),Hv(t,0)}if(function Yk(r){for(let t=YS(r);null!==t;t=ZS(t)){if(!t[Aw])continue;const n=t[bu];for(let i=0;i<n.length;i++){mj(n[i])}}}(t),AE(t,2),null!==r.contentQueries&&_E(r,t),a){const _=r.contentCheckHooks;null!==_&&kp(t,_)}else{const _=r.contentHooks;null!==_&&Fp(t,_,1),Hv(t,1)}!function _k(r,t){const n=r.hostBindingOpCodes;if(null===n)return;const i=sE(t,Mh);try{for(let s=0;s<n.length;s++){const o=n[s];if(o<0)lc(~o);else{const a=o,c=n[++s],u=n[++s];Tj(c,a),i.dirty=!1;const _=Pv(i);try{u(2,t[a])}finally{Rv(i,_)}}}}finally{null===t[Mh]&&oE(t,Mh),lc(-1)}}(r,t);const c=r.components;null!==c&&IE(t,c,0);const u=r.viewQuery;if(null!==u&&nb(2,u,i),a){const _=r.viewCheckHooks;null!==_&&kp(t,_)}else{const _=r.viewHooks;null!==_&&Fp(t,_,2),Hv(t,2)}!0===r.firstUpdatePass&&(r.firstUpdatePass=!1),t[sr]&=-73,Jw(t)}finally{Gv()}}}function AE(r,t){for(let n=YS(r);null!==n;n=ZS(n))for(let i=gs;i<n.length;i++)DE(n[i],t)}function Zk(r,t,n){DE(po(t,r),n)}function DE(r,t){if(!function fj(r){return 128==(128&r[sr])}(r))return;const n=r[pn],i=r[sr];if(80&i&&0===t||1024&i||2===t)TE(n,r,n.template,r[Ui]);else if(r[bh]>0){AE(r,1);const s=n.components;null!==s&&IE(r,s,1)}}function IE(r,t,n){for(let i=0;i<t.length;i++)Zk(r,t[i],n)}class Yh{get rootNodes(){const t=this._lView,n=t[pn];return Xh(n,t,n.firstChild,[])}constructor(t,n){this._lView=t,this._cdRefInjectingView=n,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[Ui]}set context(t){this._lView[Ui]=t}get destroyed(){return 256==(256&this._lView[sr])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const t=this._lView[bi];if(Bs(t)){const n=t[8],i=n?n.indexOf(this):-1;i>-1&&(nm(t,i),Hp(n,i))}this._attachedToViewContainer=!1}u0(this._lView[pn],this._lView)}onDestroy(t){!function eS(r,t){if(256==(256&r[sr]))throw new jt(911,!1);null===r[vl]&&(r[vl]=[]),r[vl].push(t)}(this._lView,t)}markForCheck(){qh(this._cdRefInjectingView||this._lView)}detach(){this._lView[sr]&=-129}reattach(){this._lView[sr]|=128}detectChanges(){Em(this._lView[pn],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new jt(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function UN(r,t){Fh(r,t,t[Qn],2,null,null)}(this._lView[pn],this._lView)}attachToAppRef(t){if(this._attachedToViewContainer)throw new jt(902,!1);this._appRef=t}}class Kk extends Yh{constructor(t){super(t),this._view=t}detectChanges(){const t=this._view;Em(t[pn],t,t[Ui],!1)}checkNoChanges(){}get context(){return null}}class PE extends vm{constructor(t){super(),this.ngModule=t}resolveComponentFactory(t){const n=Ar(t);return new Zh(n,this.ngModule)}}function RE(r){const t=[];for(let n in r)r.hasOwnProperty(n)&&t.push({propName:r[n],templateName:n});return t}class Qk{constructor(t,n){this.injector=t,this.parentInjector=n}get(t,n,i){i=We(i);const s=this.injector.get(t,V0,i);return s!==V0||n===V0?s:this.parentInjector.get(t,n,i)}}class Zh extends kM{get inputs(){const t=this.componentDef,n=t.inputTransforms,i=RE(t.inputs);if(null!==n)for(const s of i)n.hasOwnProperty(s.propName)&&(s.transform=n[s.propName]);return i}get outputs(){return RE(this.componentDef.outputs)}constructor(t,n){super(),this.componentDef=t,this.ngModule=n,this.componentType=t.type,this.selector=function UL(r){return r.map(FL).join(",")}(t.selectors),this.ngContentSelectors=t.ngContentSelectors?t.ngContentSelectors:[],this.isBoundToModule=!!n}create(t,n,i,s){let o=(s=s||this.ngModule)instanceof go?s:s?.injector;o&&null!==this.componentDef.getStandaloneInjector&&(o=this.componentDef.getStandaloneInjector(o)||o);const a=o?new Qk(t,o):t,c=a.get(UM,null);if(null===c)throw new jt(407,!1);const O={rendererFactory:c,sanitizer:a.get(X3,null),effectManager:a.get(EE,null),afterRenderEventManager:a.get($0,null)},B=c.createRenderer(null,this.componentDef),G=this.componentDef.selectors[0][0]||"div",Y=i?function wk(r,t,n,i){const o=i.get(tE,!1)||n===nt.ShadowDom,a=r.selectRootElement(t,o);return function Sk(r){fE(r)}(a),a}(B,i,this.componentDef.encapsulation,a):tm(B,G,function Jk(r){const t=r.toLowerCase();return"svg"===t?"svg":"math"===t?"math":null}(G)),Q=this.componentDef.signals?4608:this.componentDef.onPush?576:528;let ue=null;null!==Y&&(ue=F0(Y,a,!0));const ce=J0(0,null,null,1,0,null,null,null,null,null,null),ye=wm(null,ce,null,Q,null,null,O,B,a,null,ue);let Ee,Le;zv(ye);try{const Fe=this.componentDef;let Xe,Me=null;Fe.findHostDirectiveDefs?(Xe=[],Me=new Map,Fe.findHostDirectiveDefs(Fe,Xe,Me),Xe.push(Fe)):Xe=[Fe];const Ne=function tF(r,t){const n=r[pn],i=wr;return r[i]=t,Wu(n,i,2,"#host",null)}(ye,Y),dt=function nF(r,t,n,i,s,o,a){const c=s[pn];!function rF(r,t,n,i){for(const s of r)t.mergedAttrs=Tr(t.mergedAttrs,s.hostAttrs);null!==t.mergedAttrs&&(Mm(t,t.mergedAttrs,!0),null!==n&&dM(i,n,t))}(i,r,t,a);let u=null;null!==t&&(u=F0(t,s[yl]));const _=o.rendererFactory.createRenderer(t,n);let A=16;n.signals?A=4096:n.onPush&&(A=64);const O=wm(s,hE(n),null,A,s[r.index],r,o,_,null,null,u);return c.firstCreatePass&&eb(c,r,i.length-1),Sm(s,O),s[r.index]=O}(Ne,Y,Fe,Xe,ye,O,B);Le=Zw(ce,wr),Y&&function sF(r,t,n,i){if(i)Fs(r,n,["ng-version",Y3.full]);else{const{attrs:s,classes:o}=function BL(r){const t=[],n=[];let i=1,s=2;for(;i<r.length;){let o=r[i];if("string"==typeof o)2===s?""!==o&&t.push(o,r[++i]):8===s&&n.push(o);else{if(!cs(s))break;s=o}i++}return{attrs:t,classes:n}}(t.selectors[0]);s&&Fs(r,n,s),o&&o.length>0&&uM(r,n,o.join(" "))}}(B,Fe,Y,i),void 0!==n&&function oF(r,t,n){const i=r.projection=[];for(let s=0;s<t.length;s++){const o=n[s];i.push(null!=o?Array.from(o):null)}}(Le,this.ngContentSelectors,n),Ee=function iF(r,t,n,i,s,o){const a=vs(),c=s[pn],u=ro(a,s);gE(c,s,a,n,null,i);for(let A=0;A<n.length;A++)As(cc(s,c,a.directiveStart+A,a),s);yE(c,s,a),u&&As(u,s);const _=cc(s,c,a.directiveStart+a.componentOffset,a);if(r[Ui]=s[Ui]=_,null!==o)for(const A of o)A(_,t);return Y0(c,a,r),_}(dt,Fe,Xe,Me,ye,[aF]),ib(ce,ye,null)}finally{Gv()}return new eF(this.componentType,Ee,zu(Le,ye),ye,Le)}}class eF extends z3{constructor(t,n,i,s,o){super(),this.location=i,this._rootLView=s,this._tNode=o,this.previousInputValues=null,this.instance=n,this.hostView=this.changeDetectorRef=new Kk(s),this.componentType=t}setInput(t,n){const i=this._tNode.inputs;let s;if(null!==i&&(s=i[t])){if(this.previousInputValues??=new Map,this.previousInputValues.has(t)&&Object.is(this.previousInputValues.get(t),n))return;const o=this._rootLView;rb(o[pn],o,s,t,n),this.previousInputValues.set(t,n),qh(po(this._tNode.index,o))}}get injector(){return new Gs(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(t){this.hostView.onDestroy(t)}}function aF(){const r=vs();Np(Pt()[pn],r)}function Zr(r){let t=function OE(r){return Object.getPrototypeOf(r.prototype).constructor}(r.type),n=!0;const i=[r];for(;t;){let s;if(Zo(r))s=t.\u0275cmp||t.\u0275dir;else{if(t.\u0275cmp)throw new jt(903,!1);s=t.\u0275dir}if(s){if(n){i.push(s);const a=r;a.inputs=Cm(r.inputs),a.inputTransforms=Cm(r.inputTransforms),a.declaredInputs=Cm(r.declaredInputs),a.outputs=Cm(r.outputs);const c=s.hostBindings;c&&dF(r,c);const u=s.viewQuery,_=s.contentQueries;if(u&&cF(r,u),_&&uF(r,_),pl(r.inputs,s.inputs),pl(r.declaredInputs,s.declaredInputs),pl(r.outputs,s.outputs),null!==s.inputTransforms&&(null===a.inputTransforms&&(a.inputTransforms={}),pl(a.inputTransforms,s.inputTransforms)),Zo(s)&&s.data.animation){const A=r.data;A.animation=(A.animation||[]).concat(s.data.animation)}}const o=s.features;if(o)for(let a=0;a<o.length;a++){const c=o[a];c&&c.ngInherit&&c(r),c===Zr&&(n=!1)}}t=Object.getPrototypeOf(t)}!function lF(r){let t=0,n=null;for(let i=r.length-1;i>=0;i--){const s=r[i];s.hostVars=t+=s.hostVars,s.hostAttrs=Tr(s.hostAttrs,n=Tr(n,s.hostAttrs))}}(i)}function Cm(r){return r===gn?{}:r===un?[]:r}function cF(r,t){const n=r.viewQuery;r.viewQuery=n?(i,s)=>{t(i,s),n(i,s)}:t}function uF(r,t){const n=r.contentQueries;r.contentQueries=n?(i,s,o)=>{t(i,s,o),n(i,s,o)}:t}function dF(r,t){const n=r.hostBindings;r.hostBindings=n?(i,s)=>{t(i,s),n(i,s)}:t}function Tm(r){return!!function sb(r){return null!==r&&("function"==typeof r||"object"==typeof r)}(r)&&(Array.isArray(r)||!(r instanceof Map)&&Symbol.iterator in r)}function ba(r,t,n){return r[t]=n}function Ds(r,t,n){return!Object.is(r[t],n)&&(r[t]=n,!0)}function Ko(r,t,n,i){const s=Pt();return Ds(s,Su(),t)&&(Dr(),va(Si(),s,r,t,n,i)),Ko}function $r(r,t,n,i,s,o,a,c){const u=Pt(),_=Dr(),A=r+wr,O=_.firstCreatePass?function NF(r,t,n,i,s,o,a,c,u){const _=t.consts,A=Wu(t,r,4,a||null,_l(_,c));Q0(t,n,A,_l(_,u)),Np(t,A);const O=A.tView=J0(2,A,i,s,o,t.directiveRegistry,t.pipeRegistry,null,t.schemas,_,null);return null!==t.queries&&(t.queries.template(t,A),O.queries=t.queries.embeddedTView(A)),A}(A,_,u,t,n,i,s,o,a):_.data[A];ga(O,!1);const B=ZE(_,u,O,r);jp()&&im(_,u,B,O),As(B,u),Sm(u,u[A]=bE(B,u,B,O)),Dp(O)&&Z0(_,u,O),null!=a&&K0(u,O,c)}let ZE=function KE(r,t,n,i){return xl(!0),t[Qn].createComment("")};function Ir(r,t,n){const i=Pt();return Ds(i,Su(),t)&&function bo(r,t,n,i,s,o,a,c){const u=ro(t,n);let A,_=t.inputs;!c&&null!=_&&(A=_[i])?(rb(r,n,A,i,s),oc(t)&&function Ik(r,t){const n=po(t,r);16&n[sr]||(n[sr]|=64)}(n,t.index)):3&t.type&&(i=function Dk(r){return"class"===r?"className":"for"===r?"htmlFor":"formaction"===r?"formAction":"innerHtml"===r?"innerHTML":"readonly"===r?"readOnly":"tabindex"===r?"tabIndex":r}(i),s=null!=a?a(s,t.value||"",i):s,o.setProperty(u,i,s))}(Dr(),Si(),i,r,t,i[Qn],n,!1),Ir}function db(r,t,n,i,s){const a=s?"class":"style";rb(r,n,t.inputs[a],a,i)}function Dt(r,t,n,i){const s=Pt(),o=Dr(),a=wr+r,c=s[Qn],u=o.firstCreatePass?function BF(r,t,n,i,s,o){const a=t.consts,u=Wu(t,r,2,i,_l(a,s));return Q0(t,n,u,_l(a,o)),null!==u.attrs&&Mm(u,u.attrs,!1),null!==u.mergedAttrs&&Mm(u,u.mergedAttrs,!0),null!==t.queries&&t.queries.elementStart(t,u),u}(a,o,s,t,n,i):o.data[a],_=QE(o,s,u,c,t,r);s[a]=_;const A=Dp(u);return ga(u,!0),dM(c,_,u),32!=(32&u.flags)&&jp()&&im(o,s,_,u),0===function yj(){return Wn.lFrame.elementDepthCount}()&&As(_,s),function vj(){Wn.lFrame.elementDepthCount++}(),A&&(Z0(o,s,u),Y0(o,u,s)),null!==i&&K0(s,u),Dt}function Nt(){let r=vs();kv()?Fv():(r=r.parent,ga(r,!1));const t=r;(function _j(r){return Wn.skipHydrationRootTNode===r})(t)&&function Mj(){Wn.skipHydrationRootTNode=null}(),function bj(){Wn.lFrame.elementDepthCount--}();const n=Dr();return n.firstCreatePass&&(Np(n,r),Av(r)&&n.queries.elementEnd(r)),null!=t.classesWithoutHost&&function kj(r){return 0!=(8&r.flags)}(t)&&db(n,t,Pt(),t.classesWithoutHost,!0),null!=t.stylesWithoutHost&&function Fj(r){return 0!=(16&r.flags)}(t)&&db(n,t,Pt(),t.stylesWithoutHost,!1),Nt}function _s(r,t,n,i){return Dt(r,t,n,i),Nt(),_s}let QE=(r,t,n,i,s,o)=>(xl(!0),tm(i,s,function fS(){return Wn.lFrame.currentNamespace}()));function td(r,t,n){const i=Pt(),s=Dr(),o=r+wr,a=s.firstCreatePass?function GF(r,t,n,i,s){const o=t.consts,a=_l(o,i),c=Wu(t,r,8,"ng-container",a);return null!==a&&Mm(c,a,!0),Q0(t,n,c,_l(o,s)),null!==t.queries&&t.queries.elementStart(t,c),c}(o,s,i,t,n):s.data[o];ga(a,!0);const c=tC(s,i,a,r);return i[o]=c,jp()&&im(s,i,c,a),As(c,i),Dp(a)&&(Z0(s,i,a),Y0(s,a,i)),null!=n&&K0(i,a),td}function nd(){let r=vs();const t=Dr();return kv()?Fv():(r=r.parent,ga(r,!1)),t.firstCreatePass&&(Np(t,r),Av(r)&&t.queries.elementEnd(r)),nd}let tC=(r,t,n,i)=>(xl(!0),c0(t[Qn],""));function Jo(){return Pt()}function tf(r){return!!r&&"function"==typeof r.then}function nC(r){return!!r&&"function"==typeof r.subscribe}function Or(r,t,n,i){const s=Pt(),o=Dr(),a=vs();return function iC(r,t,n,i,s,o,a){const c=Dp(i),_=r.firstCreatePass&&wE(r),A=t[Ui],O=xE(t);let B=!0;if(3&i.type||a){const ne=ro(i,t),ee=a?a(ne):ne,Q=O.length,ue=a?ye=>a(li(ye[i.index])):i.index;let ce=null;if(!a&&c&&(ce=function qF(r,t,n,i){const s=r.cleanup;if(null!=s)for(let o=0;o<s.length-1;o+=2){const a=s[o];if(a===n&&s[o+1]===i){const c=t[mu],u=s[o+2];return c.length>u?c[u]:null}"string"==typeof a&&(o+=2)}return null}(r,t,s,i.index)),null!==ce)(ce.__ngLastListenerFn__||ce).__ngNextListenerFn__=o,ce.__ngLastListenerFn__=o,B=!1;else{o=oC(i,t,A,o,!1);const ye=n.listen(ee,s,o);O.push(o,ye),_&&_.push(s,ue,Q,Q+1)}}else o=oC(i,t,A,o,!1);const G=i.outputs;let Y;if(B&&null!==G&&(Y=G[s])){const ne=Y.length;if(ne)for(let ee=0;ee<ne;ee+=2){const Ee=t[Y[ee]][Y[ee+1]].subscribe(o),Le=O.length;O.push(o,Ee),_&&_.push(s,i.index,Le,-(Le+1))}}}(o,s,s[Qn],a,r,t,i),Or}function sC(r,t,n,i){try{return ma(6,t,n),!1!==n(i)}catch(s){return ME(r,s),!1}finally{ma(7,t,n)}}function oC(r,t,n,i,s){return function o(a){if(a===Function)return i;qh(r.componentOffset>-1?po(r.index,t):t);let u=sC(t,n,i,a),_=o.__ngNextListenerFn__;for(;_;)u=sC(t,n,_,a)&&u,_=_.__ngNextListenerFn__;return s&&!1===u&&a.preventDefault(),u}}function or(r=1){return function Ij(r){return(Wn.lFrame.contextLView=function Pj(r,t){for(;r>0;)t=t[yu],r--;return t}(r,Wn.lFrame.contextLView))[Ui]}(r)}function Rm(r,t){return r<<17|t<<2}function Ml(r){return r>>17&32767}function fb(r){return 2|r}function pc(r){return(131068&r)>>2}function pb(r,t){return-131069&r|t<<2}function mb(r){return 1|r}function gC(r,t,n,i,s){const o=r[n+1],a=null===t;let c=i?Ml(o):pc(o),u=!1;for(;0!==c&&(!1===u||a);){const A=r[c+1];t5(r[c],t)&&(u=!0,r[c+1]=i?mb(A):fb(A)),c=i?Ml(A):pc(A)}u&&(r[n+1]=i?fb(o):mb(o))}function t5(r,t){return null===r||null==t||(Array.isArray(r)?r[1]:r)===t||!(!Array.isArray(r)||"string"!=typeof t)&&Pu(r,t)>=0}function Om(r,t,n){return ea(r,t,n,!1),Om}function Qo(r,t){return ea(r,t,null,!0),Qo}function ea(r,t,n,i){const s=Pt(),o=Dr(),a=function Na(r){const t=Wn.lFrame,n=t.bindingIndex;return t.bindingIndex=t.bindingIndex+r,n}(2);o.firstUpdatePass&&function MC(r,t,n,i){const s=r.data;if(null===s[n+1]){const o=s[zs()],a=function SC(r,t){return t>=r.expandoStartIndex}(r,n);(function AC(r,t){return 0!=(r.flags&(t?8:16))})(o,i)&&null===t&&!a&&(t=!1),t=function u5(r,t,n,i){const s=function Bv(r){const t=Wn.lFrame.currentDirectiveIndex;return-1===t?null:r[t]}(r);let o=i?t.residualClasses:t.residualStyles;if(null===s)0===(i?t.classBindings:t.styleBindings)&&(n=nf(n=gb(null,r,t,n,i),t.attrs,i),o=null);else{const a=t.directiveStylingLast;if(-1===a||r[a]!==s)if(n=gb(s,r,t,n,i),null===o){let u=function d5(r,t,n){const i=n?t.classBindings:t.styleBindings;if(0!==pc(i))return r[Ml(i)]}(r,t,i);void 0!==u&&Array.isArray(u)&&(u=gb(null,r,t,u[1],i),u=nf(u,t.attrs,i),function h5(r,t,n,i){r[Ml(n?t.classBindings:t.styleBindings)]=i}(r,t,i,u))}else o=function f5(r,t,n){let i;const s=t.directiveEnd;for(let o=1+t.directiveStylingLast;o<s;o++)i=nf(i,r[o].hostAttrs,n);return nf(i,t.attrs,n)}(r,t,i)}return void 0!==o&&(i?t.residualClasses=o:t.residualStyles=o),n}(s,o,t,i),function QF(r,t,n,i,s,o){let a=o?t.classBindings:t.styleBindings,c=Ml(a),u=pc(a);r[i]=n;let A,_=!1;if(Array.isArray(n)?(A=n[1],(null===A||Pu(n,A)>0)&&(_=!0)):A=n,s)if(0!==u){const B=Ml(r[c+1]);r[i+1]=Rm(B,c),0!==B&&(r[B+1]=pb(r[B+1],i)),r[c+1]=function KF(r,t){return 131071&r|t<<17}(r[c+1],i)}else r[i+1]=Rm(c,0),0!==c&&(r[c+1]=pb(r[c+1],i)),c=i;else r[i+1]=Rm(u,0),0===c?c=i:r[u+1]=pb(r[u+1],i),u=i;_&&(r[i+1]=fb(r[i+1])),gC(r,A,i,!0),gC(r,A,i,!1),function e5(r,t,n,i,s){const o=s?r.residualClasses:r.residualStyles;null!=o&&"string"==typeof t&&Pu(o,t)>=0&&(n[i+1]=mb(n[i+1]))}(t,A,r,i,o),a=Rm(c,u),o?t.classBindings=a:t.styleBindings=a}(s,o,t,n,a,i)}}(o,r,a,i),t!==ir&&Ds(s,a,t)&&function CC(r,t,n,i,s,o,a,c){if(!(3&t.type))return;const u=r.data,_=u[c+1],A=function JF(r){return 1==(1&r)}(_)?TC(u,t,n,s,pc(_),a):void 0;Lm(A)||(Lm(o)||function ZF(r){return 2==(2&r)}(_)&&(o=TC(u,null,n,s,c,a)),function YN(r,t,n,i,s){if(t)s?r.addClass(n,i):r.removeClass(n,i);else{let o=-1===i.indexOf("-")?void 0:wl.DashCase;null==s?r.removeStyle(n,i,o):("string"==typeof s&&s.endsWith("!important")&&(s=s.slice(0,-10),o|=wl.Important),r.setStyle(n,i,s,o))}}(i,a,Rp(zs(),n),s,o))}(o,o.data[zs()],s,s[Qn],r,s[a+1]=function y5(r,t){return null==r||""===r||("string"==typeof t?r+=t:"object"==typeof r&&(r=Di(function Sl(r){return r instanceof mM?r.changingThisBreaksApplicationSecurity:r}(r)))),r}(t,n),i,a)}function gb(r,t,n,i,s){let o=null;const a=n.directiveEnd;let c=n.directiveStylingLast;for(-1===c?c=n.directiveStart:c++;c<a&&(o=t[c],i=nf(i,o.hostAttrs,s),o!==r);)c++;return null!==r&&(n.directiveStylingLast=c),i}function nf(r,t,n){const i=n?1:2;let s=-1;if(null!==t)for(let o=0;o<t.length;o++){const a=t[o];"number"==typeof a?s=a:s===i&&(Array.isArray(r)||(r=void 0===r?[]:["",r]),mo(r,a,!!n||t[++o]))}return void 0===r?null:r}function TC(r,t,n,i,s,o){const a=null===t;let c;for(;s>0;){const u=r[s],_=Array.isArray(u),A=_?u[1]:u,O=null===A;let B=n[s+1];B===ir&&(B=O?un:void 0);let G=O?Jv(B,i):A===i?B:void 0;if(_&&!Lm(G)&&(G=Jv(u,i)),Lm(G)&&(c=G,a))return c;const Y=r[s+1];s=a?Ml(Y):pc(Y)}if(null!==t){let u=o?t.residualClasses:t.residualStyles;null!=u&&(c=Jv(u,i))}return c}function Lm(r){return void 0!==r}function qt(r,t=""){const n=Pt(),i=Dr(),s=r+wr,o=i.firstCreatePass?Wu(i,s,1,t,null):i.data[s],a=DC(i,n,o,t,r);n[s]=a,jp()&&im(i,n,a,o),ga(o,!1)}let DC=(r,t,n,i,s)=>(xl(!0),function em(r,t){return r.createText(t)}(t[Qn],i));function xs(r){return _o("",r,""),xs}function _o(r,t,n){const i=Pt(),s=function $u(r,t,n,i){return Ds(r,Su(),n)?t+Hn(n)+i:ir}(i,r,t,n);return s!==ir&&function Va(r,t,n){const i=Rp(t,r);!function JS(r,t,n){r.setValue(t,n)}(r[Qn],i,n)}(i,zs(),s),_o}const mc=void 0;var U5=["en",[["a","p"],["AM","PM"],mc],[["AM","PM"],mc,mc],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],mc,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],mc,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",mc,"{1} 'at' {0}",mc],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function F5(r){const n=Math.floor(Math.abs(r)),i=r.toString().replace(/^[^.]*\.?/,"").length;return 1===n&&0===i?1:5}];let id={};function Hs(r){const t=function B5(r){return r.toLowerCase().replace(/_/g,"-")}(r);let n=ZC(t);if(n)return n;const i=t.split("-")[0];if(n=ZC(i),n)return n;if("en"===i)return U5;throw new jt(701,!1)}function ZC(r){return r in id||(id[r]=Ht.ng&&Ht.ng.common&&Ht.ng.common.locales&&Ht.ng.common.locales[r]),id[r]}var ui=function(r){return r[r.LocaleId=0]="LocaleId",r[r.DayPeriodsFormat=1]="DayPeriodsFormat",r[r.DayPeriodsStandalone=2]="DayPeriodsStandalone",r[r.DaysFormat=3]="DaysFormat",r[r.DaysStandalone=4]="DaysStandalone",r[r.MonthsFormat=5]="MonthsFormat",r[r.MonthsStandalone=6]="MonthsStandalone",r[r.Eras=7]="Eras",r[r.FirstDayOfWeek=8]="FirstDayOfWeek",r[r.WeekendRange=9]="WeekendRange",r[r.DateFormat=10]="DateFormat",r[r.TimeFormat=11]="TimeFormat",r[r.DateTimeFormat=12]="DateTimeFormat",r[r.NumberSymbols=13]="NumberSymbols",r[r.NumberFormats=14]="NumberFormats",r[r.CurrencyCode=15]="CurrencyCode",r[r.CurrencySymbol=16]="CurrencySymbol",r[r.CurrencyName=17]="CurrencyName",r[r.Currencies=18]="Currencies",r[r.Directionality=19]="Directionality",r[r.PluralCase=20]="PluralCase",r[r.ExtraData=21]="ExtraData",r}(ui||{});const sd="en-US";let KC=sd;function bb(r,t,n,i,s){if(r=Rn(r),Array.isArray(r))for(let o=0;o<r.length;o++)bb(r[o],t,n,i,s);else{const o=Dr(),a=Pt(),c=vs();let u=dc(r)?r:Rn(r.provide);const _=PM(r),A=1048575&c.providerIndexes,O=c.directiveStart,B=c.providerIndexes>>20;if(dc(r)||!r.multi){const G=new Ah(_,s,kt),Y=xb(u,t,s?A:A+B,O);-1===Y?(Yv(Bp(c,a),o,u),_b(o,r,t.length),t.push(u),c.directiveStart++,c.directiveEnd++,s&&(c.providerIndexes+=1048576),n.push(G),a.push(G)):(n[Y]=G,a[Y]=G)}else{const G=xb(u,t,A+B,O),Y=xb(u,t,A,A+B),ee=Y>=0&&n[Y];if(s&&!ee||!s&&!(G>=0&&n[G])){Yv(Bp(c,a),o,u);const Q=function FU(r,t,n,i,s){const o=new Ah(r,n,kt);return o.multi=[],o.index=t,o.componentProviders=0,w2(o,s,i&&!n),o}(s?kU:NU,n.length,s,i,_);!s&&ee&&(n[Y].providerFactory=Q),_b(o,r,t.length,0),t.push(u),c.directiveStart++,c.directiveEnd++,s&&(c.providerIndexes+=1048576),n.push(Q),a.push(Q)}else _b(o,r,G>-1?G:Y,w2(n[s?Y:G],_,!s&&i));!s&&i&&ee&&n[Y].componentProviders++}}}function _b(r,t,n,i){const s=dc(t),o=function E3(r){return!!r.useClass}(t);if(s||o){const u=(o?Rn(t.useClass):t).prototype.ngOnDestroy;if(u){const _=r.destroyHooks||(r.destroyHooks=[]);if(!s&&t.multi){const A=_.indexOf(n);-1===A?_.push(n,[i,u]):_[A+1].push(i,u)}else _.push(n,u)}}}function w2(r,t,n){return n&&r.componentProviders++,r.multi.push(t)-1}function xb(r,t,n,i){for(let s=n;s<i;s++)if(t[s]===r)return s;return-1}function NU(r,t,n,i){return wb(this.multi,[])}function kU(r,t,n,i){const s=this.multi;let o;if(this.providerFactory){const a=this.providerFactory.componentProviders,c=cc(n,n[pn],this.providerFactory.index,i);o=c.slice(0,a),wb(s,o);for(let u=a;u<c.length;u++)o.push(c[u])}else o=[],wb(s,o);return o}function wb(r,t){for(let n=0;n<r.length;n++)t.push((0,r[n])());return t}function _i(r,t=[]){return n=>{n.providersResolver=(i,s)=>function jU(r,t,n){const i=Dr();if(i.firstCreatePass){const s=Zo(r);bb(n,i.data,i.blueprint,s,!0),bb(t,i.data,i.blueprint,s,!1)}}(i,s?s(r):r,t)}}class gc{}class S2{}class Sb extends gc{constructor(t,n,i){super(),this._parent=n,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new PE(this);const s=fo(t);this._bootstrapComponents=Ba(s.bootstrap),this._r3Injector=HM(t,n,[{provide:gc,useValue:this},{provide:vm,useValue:this.componentFactoryResolver},...i],Di(t),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(t)}get injector(){return this._r3Injector}destroy(){const t=this._r3Injector;!t.destroyed&&t.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(t){this.destroyCbs.push(t)}}class Mb extends S2{constructor(t){super(),this.moduleType=t}create(t){return new Sb(this.moduleType,t,[])}}class M2 extends gc{constructor(t){super(),this.componentFactoryResolver=new PE(this),this.instance=null;const n=new Fu([...t.providers,{provide:gc,useValue:this},{provide:vm,useValue:this.componentFactoryResolver}],t.parent||dm(),t.debugName,new Set(["environment"]));this.injector=n,t.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(t){this.injector.onDestroy(t)}}function Eb(r,t,n=null){return new M2({providers:r,parent:t,debugName:n,runEnvironmentInitializers:!0}).injector}let VU=(()=>{class r{constructor(n){this._injector=n,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(n){if(!n.standalone)return null;if(!this.cachedInjectors.has(n)){const i=TM(0,n.type),s=i.length>0?Eb([i],this._injector,`Standalone[${n.type.name}]`):null;this.cachedInjectors.set(n,s)}return this.cachedInjectors.get(n)}ngOnDestroy(){try{for(const n of this.cachedInjectors.values())null!==n&&n.destroy()}finally{this.cachedInjectors.clear()}}static{this.\u0275prov=Dn({token:r,providedIn:"environment",factory:()=>new r(me(go))})}}return r})();function Cb(r){r.getStandaloneInjector=t=>t.get(VU).getOrCreateStandaloneInjector(r)}function R2(r,t,n,i,s,o){const a=t+n;return Ds(r,a,s)?ba(r,a+1,o?i.call(o,s):i(s)):function uf(r,t){const n=r[t];return n===ir?void 0:n}(r,a+1)}function Um(r,t){const n=Dr();let i;const s=r+wr;n.firstCreatePass?(i=function s4(r,t){if(t)for(let n=t.length-1;n>=0;n--){const i=t[n];if(r===i.name)return i}}(t,n.pipeRegistry),n.data[s]=i,i.onDestroy&&(n.destroyHooks??=[]).push(s,i.onDestroy)):i=n.data[s];const o=i.factory||(i.factory=ac(i.type)),c=ps(kt);try{const u=Up(!1),_=o();return Up(u),function UF(r,t,n,i){n>=r.data.length&&(r.data[n]=null,r.blueprint[n]=null),t[n]=i}(n,Pt(),s,_),_}finally{ps(c)}}function Bm(r,t,n){const i=r+wr,s=Pt(),o=xu(s,i);return function df(r,t){return r[pn].data[t].pure}(s,i)?R2(s,Vs(),t,o.transform,n,o):o.transform(n)}function u4(){return this._results[Symbol.iterator]()}class Ab{get changes(){return this._changes||(this._changes=new Mi)}constructor(t=!1){this._emitDistinctChangesOnly=t,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const n=Ab.prototype;n[Symbol.iterator]||(n[Symbol.iterator]=u4)}get(t){return this._results[t]}map(t){return this._results.map(t)}filter(t){return this._results.filter(t)}find(t){return this._results.find(t)}reduce(t,n){return this._results.reduce(t,n)}forEach(t){this._results.forEach(t)}some(t){return this._results.some(t)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(t,n){const i=this;i.dirty=!1;const s=function jo(r){return r.flat(Number.POSITIVE_INFINITY)}(t);(this._changesDetected=!function Jj(r,t,n){if(r.length!==t.length)return!1;for(let i=0;i<r.length;i++){let s=r[i],o=t[i];if(n&&(s=n(s),o=n(o)),o!==s)return!1}return!0}(i._results,s,n))&&(i._results=s,i.length=s.length,i.last=s[this.length-1],i.first=s[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}function h4(r,t,n,i=!0){const s=t[pn];if(function VN(r,t,n,i){const s=gs+i,o=n.length;i>0&&(n[s-1][Yo]=t),i<o-gs?(t[Yo]=n[s],AS(n,gs+i,t)):(n.push(t),t[Yo]=null),t[bi]=n;const a=t[xh];null!==a&&n!==a&&function zN(r,t){const n=r[bu];t[Bi]!==t[bi][bi][Bi]&&(r[Aw]=!0),null===n?r[bu]=[t]:n.push(t)}(a,t);const c=t[fa];null!==c&&c.insertView(r),t[sr]|=128}(s,t,r,n),i){const o=p0(n,r),a=t[Qn],c=rm(a,r[pa]);null!==c&&function FN(r,t,n,i,s,o){i[Ii]=s,i[Ts]=t,Fh(r,i,n,1,s,o)}(s,r[Ts],a,t,c,o)}}let za=(()=>{class r{static{this.__NG_ELEMENT_ID__=m4}}return r})();const f4=za,p4=class extends f4{constructor(t,n,i){super(),this._declarationLView=t,this._declarationTContainer=n,this.elementRef=i}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(t,n){return this.createEmbeddedViewImpl(t,n)}createEmbeddedViewImpl(t,n,i){const s=function d4(r,t,n,i){const s=t.tView,c=wm(r,s,n,4096&r[sr]?4096:16,null,t,null,null,null,i?.injector??null,i?.hydrationInfo??null);c[xh]=r[t.index];const _=r[fa];return null!==_&&(c[fa]=_.createEmbeddedView(s)),ib(s,c,n),c}(this._declarationLView,this._declarationTContainer,t,{injector:n,hydrationInfo:i});return new Yh(s)}};function m4(){return Vm(vs(),Pt())}function Vm(r,t){return 4&r.type?new p4(t,r,zu(r,t)):null}let na=(()=>{class r{static{this.__NG_ELEMENT_ID__=x4}}return r})();function x4(){return G2(vs(),Pt())}const w4=na,V2=class extends w4{constructor(t,n,i){super(),this._lContainer=t,this._hostTNode=n,this._hostLView=i}get element(){return zu(this._hostTNode,this._hostLView)}get injector(){return new Gs(this._hostTNode,this._hostLView)}get parentInjector(){const t=Vp(this._hostTNode,this._hostLView);if(qv(t)){const n=Ih(t,this._hostLView),i=Dh(t);return new Gs(n[pn].data[i+8],n)}return new Gs(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(t){const n=z2(this._lContainer);return null!==n&&n[t]||null}get length(){return this._lContainer.length-gs}createEmbeddedView(t,n,i){let s,o;"number"==typeof i?s=i:null!=i&&(s=i.index,o=i.injector);const c=t.createEmbeddedViewImpl(n||{},o,null);return this.insertImpl(c,s,false),c}createComponent(t,n,i,s,o){const a=t&&!function Rh(r){return"function"==typeof r}(t);let c;if(a)c=n;else{const ne=n||{};c=ne.index,i=ne.injector,s=ne.projectableNodes,o=ne.environmentInjector||ne.ngModuleRef}const u=a?t:new Zh(Ar(t)),_=i||this.parentInjector;if(!o&&null==u.ngModule){const ee=(a?_:this.parentInjector).get(go,null);ee&&(o=ee)}Ar(u.componentType??{});const G=u.create(_,s,null,o);return this.insertImpl(G.hostView,c,false),G}insert(t,n){return this.insertImpl(t,n,!1)}insertImpl(t,n,i){const s=t._lView;if(function pj(r){return Bs(r[bi])}(s)){const u=this.indexOf(t);if(-1!==u)this.detach(u);else{const _=s[bi],A=new V2(_,_[Ts],_[bi]);A.detach(A.indexOf(t))}}const a=this._adjustIndex(n),c=this._lContainer;return h4(c,s,a,!i),t.attachToViewContainerRef(),AS(Db(c),a,t),t}move(t,n){return this.insert(t,n)}indexOf(t){const n=z2(this._lContainer);return null!==n?n.indexOf(t):-1}remove(t){const n=this._adjustIndex(t,-1),i=nm(this._lContainer,n);i&&(Hp(Db(this._lContainer),n),u0(i[pn],i))}detach(t){const n=this._adjustIndex(t,-1),i=nm(this._lContainer,n);return i&&null!=Hp(Db(this._lContainer),n)?new Yh(i):null}_adjustIndex(t,n=0){return t??this.length+n}};function z2(r){return r[8]}function Db(r){return r[8]||(r[8]=[])}function G2(r,t){let n;const i=t[r.index];return Bs(i)?n=i:(n=bE(i,t,null,r),t[r.index]=n,Sm(t,n)),H2(n,t,r,i),new V2(n,r,t)}let H2=function W2(r,t,n,i){if(r[pa])return;let s;s=8&n.type?li(i):function S4(r,t){const n=r[Qn],i=n.createComment(""),s=ro(t,r);return uc(n,rm(n,s),i,function qN(r,t){return r.nextSibling(t)}(n,s),!1),i}(t,n),r[pa]=s};class Ib{constructor(t){this.queryList=t,this.matches=null}clone(){return new Ib(this.queryList)}setDirty(){this.queryList.setDirty()}}class Pb{constructor(t=[]){this.queries=t}createEmbeddedView(t){const n=t.queries;if(null!==n){const i=null!==t.contentQueries?t.contentQueries[0]:n.length,s=[];for(let o=0;o<i;o++){const a=n.getByIndex(o);s.push(this.queries[a.indexInDeclarationView].clone())}return new Pb(s)}return null}insertView(t){this.dirtyQueriesWithMatches(t)}detachView(t){this.dirtyQueriesWithMatches(t)}dirtyQueriesWithMatches(t){for(let n=0;n<this.queries.length;n++)null!==J2(t,n).matches&&this.queries[n].setDirty()}}class q2{constructor(t,n,i=null){this.predicate=t,this.flags=n,this.read=i}}class Rb{constructor(t=[]){this.queries=t}elementStart(t,n){for(let i=0;i<this.queries.length;i++)this.queries[i].elementStart(t,n)}elementEnd(t){for(let n=0;n<this.queries.length;n++)this.queries[n].elementEnd(t)}embeddedTView(t){let n=null;for(let i=0;i<this.length;i++){const s=null!==n?n.length:0,o=this.getByIndex(i).embeddedTView(t,s);o&&(o.indexInDeclarationView=i,null!==n?n.push(o):n=[o])}return null!==n?new Rb(n):null}template(t,n){for(let i=0;i<this.queries.length;i++)this.queries[i].template(t,n)}getByIndex(t){return this.queries[t]}get length(){return this.queries.length}track(t){this.queries.push(t)}}class Ob{constructor(t,n=-1){this.metadata=t,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=n}elementStart(t,n){this.isApplyingToNode(n)&&this.matchTNode(t,n)}elementEnd(t){this._declarationNodeIndex===t.index&&(this._appliesToNextNode=!1)}template(t,n){this.elementStart(t,n)}embeddedTView(t,n){return this.isApplyingToNode(t)?(this.crossesNgTemplate=!0,this.addMatch(-t.index,n),new Ob(this.metadata)):null}isApplyingToNode(t){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const n=this._declarationNodeIndex;let i=t.parent;for(;null!==i&&8&i.type&&i.index!==n;)i=i.parent;return n===(null!==i?i.index:-1)}return this._appliesToNextNode}matchTNode(t,n){const i=this.metadata.predicate;if(Array.isArray(i))for(let s=0;s<i.length;s++){const o=i[s];this.matchTNodeWithReadOption(t,n,C4(n,o)),this.matchTNodeWithReadOption(t,n,zp(n,t,o,!1,!1))}else i===za?4&n.type&&this.matchTNodeWithReadOption(t,n,-1):this.matchTNodeWithReadOption(t,n,zp(n,t,i,!1,!1))}matchTNodeWithReadOption(t,n,i){if(null!==i){const s=this.metadata.read;if(null!==s)if(s===yo||s===na||s===za&&4&n.type)this.addMatch(n.index,-2);else{const o=zp(n,t,s,!1,!1);null!==o&&this.addMatch(n.index,o)}else this.addMatch(n.index,i)}}addMatch(t,n){null===this.matches?this.matches=[t,n]:this.matches.push(t,n)}}function C4(r,t){const n=r.localNames;if(null!==n)for(let i=0;i<n.length;i+=2)if(n[i]===t)return n[i+1];return null}function A4(r,t,n,i){return-1===n?function T4(r,t){return 11&r.type?zu(r,t):4&r.type?Vm(r,t):null}(t,r):-2===n?function D4(r,t,n){return n===yo?zu(t,r):n===za?Vm(t,r):n===na?G2(t,r):void 0}(r,t,i):cc(r,r[pn],n,t)}function $2(r,t,n,i){const s=t[fa].queries[i];if(null===s.matches){const o=r.data,a=n.matches,c=[];for(let u=0;u<a.length;u+=2){const _=a[u];c.push(_<0?null:A4(t,o[_],a[u+1],n.metadata.read))}s.matches=c}return s.matches}function Lb(r,t,n,i){const s=r.queries.getByIndex(n),o=s.matches;if(null!==o){const a=$2(r,t,s,n);for(let c=0;c<o.length;c+=2){const u=o[c];if(u>0)i.push(a[c/2]);else{const _=o[c+1],A=t[-u];for(let O=gs;O<A.length;O++){const B=A[O];B[xh]===B[bi]&&Lb(B[pn],B,_,i)}if(null!==A[bu]){const O=A[bu];for(let B=0;B<O.length;B++){const G=O[B];Lb(G[pn],G,_,i)}}}}}return i}function jb(r){const t=Pt(),n=Dr(),i=aS();Vv(i+1);const s=J2(n,i);if(r.dirty&&function hj(r){return 4==(4&r[sr])}(t)===(2==(2&s.metadata.flags))){if(null===s.matches)r.reset([]);else{const o=s.crossesNgTemplate?Lb(n,t,i,[]):$2(n,t,s,i);r.reset(o,q3),r.notifyOnChanges()}return!0}return!1}function X2(r,t,n){const i=Dr();i.firstCreatePass&&(function K2(r,t,n){null===r.queries&&(r.queries=new Rb),r.queries.track(new Ob(t,n))}(i,new q2(r,t,n),-1),2==(2&t)&&(i.staticViewQueries=!0)),function Z2(r,t,n){const i=new Ab(4==(4&n));(function Ck(r,t,n,i){const s=xE(t);s.push(n),r.firstCreatePass&&wE(r).push(i,s.length-1)})(r,t,i,i.destroy),null===t[fa]&&(t[fa]=new Pb),t[fa].queries.push(new Ib(i))}(i,Pt(),t)}function J2(r,t){return r.queries.getByIndex(t)}function Q2(r,t){return Vm(r,t)}const zb=new hn("Application Initializer");let Gb=(()=>{class r{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((n,i)=>{this.resolve=n,this.reject=i}),this.appInits=_e(zb,{optional:!0})??[]}runInitializers(){if(this.initialized)return;const n=[];for(const s of this.appInits){const o=s();if(tf(o))n.push(o);else if(nC(o)){const a=new Promise((c,u)=>{o.subscribe({complete:c,error:u})});n.push(a)}}const i=()=>{this.done=!0,this.resolve()};Promise.all(n).then(()=>{i()}).catch(s=>{this.reject(s)}),0===n.length&&i(),this.initialized=!0}static{this.\u0275fac=function(i){return new(i||r)}}static{this.\u0275prov=Dn({token:r,factory:r.\u0275fac,providedIn:"root"})}}return r})(),gT=(()=>{class r{log(n){console.log(n)}warn(n){console.warn(n)}static{this.\u0275fac=function(i){return new(i||r)}}static{this.\u0275prov=Dn({token:r,factory:r.\u0275fac,providedIn:"platform"})}}return r})();const Ga=new hn("LocaleId",{providedIn:"root",factory:()=>_e(Ga,fr.Optional|fr.SkipSelf)||function J4(){return typeof $localize<"u"&&$localize.locale||sd}()});let Hm=(()=>{class r{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new Es(!1)}add(){this.hasPendingTasks.next(!0);const n=this.taskId++;return this.pendingTasks.add(n),n}remove(n){this.pendingTasks.delete(n),0===this.pendingTasks.size&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks.next(!1)}static{this.\u0275fac=function(i){return new(i||r)}}static{this.\u0275prov=Dn({token:r,factory:r.\u0275fac,providedIn:"root"})}}return r})();class tB{constructor(t,n){this.ngModuleFactory=t,this.componentFactories=n}}let yT=(()=>{class r{compileModuleSync(n){return new Mb(n)}compileModuleAsync(n){return Promise.resolve(this.compileModuleSync(n))}compileModuleAndAllComponentsSync(n){const i=this.compileModuleSync(n),o=Ba(fo(n).declarations).reduce((a,c)=>{const u=Ar(c);return u&&a.push(new Zh(u)),a},[]);return new tB(i,o)}compileModuleAndAllComponentsAsync(n){return Promise.resolve(this.compileModuleAndAllComponentsSync(n))}clearCache(){}clearCacheFor(n){}getModuleId(n){}static{this.\u0275fac=function(i){return new(i||r)}}static{this.\u0275prov=Dn({token:r,factory:r.\u0275fac,providedIn:"root"})}}return r})();const xT=new hn(""),qm=new hn("");let Xb,qb=(()=>{class r{constructor(n,i,s){this._ngZone=n,this.registry=i,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,Xb||(function SB(r){Xb=r}(s),s.addToWindow(i)),this._watchAngularEvents(),n.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{ci.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;0!==this._callbacks.length;){let n=this._callbacks.pop();clearTimeout(n.timeoutId),n.doneCb(this._didWork)}this._didWork=!1});else{let n=this.getPendingTasks();this._callbacks=this._callbacks.filter(i=>!i.updateCb||!i.updateCb(n)||(clearTimeout(i.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(n=>({source:n.source,creationLocation:n.creationLocation,data:n.data})):[]}addCallback(n,i,s){let o=-1;i&&i>0&&(o=setTimeout(()=>{this._callbacks=this._callbacks.filter(a=>a.timeoutId!==o),n(this._didWork,this.getPendingTasks())},i)),this._callbacks.push({doneCb:n,timeoutId:o,updateCb:s})}whenStable(n,i,s){if(s&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(n,i,s),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(n){this.registry.registerApplication(n,this)}unregisterApplication(n){this.registry.unregisterApplication(n)}findProviders(n,i,s){return[]}static{this.\u0275fac=function(i){return new(i||r)(me(ci),me($b),me(qm))}}static{this.\u0275prov=Dn({token:r,factory:r.\u0275fac})}}return r})(),$b=(()=>{class r{constructor(){this._applications=new Map}registerApplication(n,i){this._applications.set(n,i)}unregisterApplication(n){this._applications.delete(n)}unregisterAllApplications(){this._applications.clear()}getTestability(n){return this._applications.get(n)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(n,i=!0){return Xb?.findTestabilityInTree(this,n,i)??null}static{this.\u0275fac=function(i){return new(i||r)}}static{this.\u0275prov=Dn({token:r,factory:r.\u0275fac,providedIn:"platform"})}}return r})(),El=null;const wT=new hn("AllowMultipleToken"),Yb=new hn("PlatformDestroyListeners"),Zb=new hn("appBootstrapListener");class MT{constructor(t,n){this.name=t,this.token=n}}function CT(r,t,n=[]){const i=`Platform: ${t}`,s=new hn(i);return(o=[])=>{let a=Kb();if(!a||a.injector.get(wT,!1)){const c=[...n,...o,{provide:s,useValue:!0}];r?r(c):function CB(r){if(El&&!El.get(wT,!1))throw new jt(400,!1);(function ST(){!function QL(r){Bw=r}(()=>{throw new jt(600,!1)})})(),El=r;const t=r.get(AT);(function ET(r){r.get(RM,null)?.forEach(n=>n())})(r)}(function TT(r=[],t){return vo.create({name:t,providers:[{provide:T0,useValue:"platform"},{provide:Yb,useValue:new Set([()=>El=null])},...r]})}(c,i))}return function AB(r){const t=Kb();if(!t)throw new jt(401,!1);return t}()}}function Kb(){return El?.get(AT)??null}let AT=(()=>{class r{constructor(n){this._injector=n,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(n,i){const s=function DB(r="zone.js",t){return"noop"===r?new lk:"zone.js"===r?new ci(t):r}(i?.ngZone,function DT(r){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:r?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:r?.runCoalescing??!1}}({eventCoalescing:i?.ngZoneEventCoalescing,runCoalescing:i?.ngZoneRunCoalescing}));return s.run(()=>{const o=function BU(r,t,n){return new Sb(r,t,n)}(n.moduleType,this.injector,function LT(r){return[{provide:ci,useFactory:r},{provide:zh,multi:!0,useFactory:()=>{const t=_e(PB,{optional:!0});return()=>t.initialize()}},{provide:OT,useFactory:IB},{provide:YM,useFactory:ZM}]}(()=>s)),a=o.injector.get(Ua,null);return s.runOutsideAngular(()=>{const c=s.onError.subscribe({next:u=>{a.handleError(u)}});o.onDestroy(()=>{$m(this._modules,o),c.unsubscribe()})}),function IT(r,t,n){try{const i=n();return tf(i)?i.catch(s=>{throw t.runOutsideAngular(()=>r.handleError(s)),s}):i}catch(i){throw t.runOutsideAngular(()=>r.handleError(i)),i}}(a,s,()=>{const c=o.injector.get(Gb);return c.runInitializers(),c.donePromise.then(()=>(function JC(r){fs(r,"Expected localeId to be defined"),"string"==typeof r&&(KC=r.toLowerCase().replace(/_/g,"-"))}(o.injector.get(Ga,sd)||sd),this._moduleDoBootstrap(o),o))})})}bootstrapModule(n,i=[]){const s=PT({},i);return function MB(r,t,n){const i=new Mb(n);return Promise.resolve(i)}(0,0,n).then(o=>this.bootstrapModuleFactory(o,s))}_moduleDoBootstrap(n){const i=n.injector.get(ld);if(n._bootstrapComponents.length>0)n._bootstrapComponents.forEach(s=>i.bootstrap(s));else{if(!n.instance.ngDoBootstrap)throw new jt(-403,!1);n.instance.ngDoBootstrap(i)}this._modules.push(n)}onDestroy(n){this._destroyListeners.push(n)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new jt(404,!1);this._modules.slice().forEach(i=>i.destroy()),this._destroyListeners.forEach(i=>i());const n=this._injector.get(Yb,null);n&&(n.forEach(i=>i()),n.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}static{this.\u0275fac=function(i){return new(i||r)(me(vo))}}static{this.\u0275prov=Dn({token:r,factory:r.\u0275fac,providedIn:"platform"})}}return r})();function PT(r,t){return Array.isArray(t)?t.reduce(PT,r):{...r,...t}}let ld=(()=>{class r{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=_e(OT),this.zoneIsStable=_e(YM),this.componentTypes=[],this.components=[],this.isStable=_e(Hm).hasPendingTasks.pipe(eo(n=>n?Un(!1):this.zoneIsStable),function bp(r,t=q){return r=r??_p,$((n,i)=>{let s,o=!0;n.subscribe(P(i,a=>{const c=t(a);(o||!r(s,c))&&(o=!1,s=c,i.next(a))}))})}(),hh()),this._injector=_e(go)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(n,i){const s=n instanceof kM;if(!this._injector.get(Gb).done)throw!s&&function pu(r){const t=Ar(r)||ms(r)||Us(r);return null!==t&&t.standalone}(n),new jt(405,!1);let a;a=s?n:this._injector.get(vm).resolveComponentFactory(n),this.componentTypes.push(a.componentType);const c=function EB(r){return r.isBoundToModule}(a)?void 0:this._injector.get(gc),_=a.create(vo.NULL,[],i||a.selector,c),A=_.location.nativeElement,O=_.injector.get(xT,null);return O?.registerApplication(A),_.onDestroy(()=>{this.detachView(_.hostView),$m(this.components,_),O?.unregisterApplication(A)}),this._loadComponent(_),_}tick(){if(this._runningTick)throw new jt(101,!1);try{this._runningTick=!0;for(let n of this._views)n.detectChanges()}catch(n){this.internalErrorHandler(n)}finally{this._runningTick=!1}}attachView(n){const i=n;this._views.push(i),i.attachToAppRef(this)}detachView(n){const i=n;$m(this._views,i),i.detachFromAppRef()}_loadComponent(n){this.attachView(n.hostView),this.tick(),this.components.push(n);const i=this._injector.get(Zb,[]);i.push(...this._bootstrapListeners),i.forEach(s=>s(n))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(n=>n()),this._views.slice().forEach(n=>n.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(n){return this._destroyListeners.push(n),()=>$m(this._destroyListeners,n)}destroy(){if(this._destroyed)throw new jt(406,!1);const n=this._injector;n.destroy&&!n.destroyed&&n.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static{this.\u0275fac=function(i){return new(i||r)}}static{this.\u0275prov=Dn({token:r,factory:r.\u0275fac,providedIn:"root"})}}return r})();function $m(r,t){const n=r.indexOf(t);n>-1&&r.splice(n,1)}const OT=new hn("",{providedIn:"root",factory:()=>_e(Ua).handleError.bind(void 0)});function IB(){const r=_e(ci),t=_e(Ua);return n=>r.runOutsideAngular(()=>t.handleError(n))}let PB=(()=>{class r{constructor(){this.zone=_e(ci),this.applicationRef=_e(ld)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static{this.\u0275fac=function(i){return new(i||r)}}static{this.\u0275prov=Dn({token:r,factory:r.\u0275fac,providedIn:"root"})}}return r})();let Xm=(()=>{class r{static{this.__NG_ELEMENT_ID__=OB}}return r})();function OB(r){return function LB(r,t,n){if(oc(r)&&!n){const i=po(r.index,t);return new Yh(i,i)}return 47&r.type?new Yh(t[Bi],t):null}(vs(),Pt(),16==(16&r))}class UT{constructor(){}supports(t){return Tm(t)}create(t){return new UB(t)}}const FB=(r,t)=>t;class UB{constructor(t){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=t||FB}forEachItem(t){let n;for(n=this._itHead;null!==n;n=n._next)t(n)}forEachOperation(t){let n=this._itHead,i=this._removalsHead,s=0,o=null;for(;n||i;){const a=!i||n&&n.currentIndex<VT(i,s,o)?n:i,c=VT(a,s,o),u=a.currentIndex;if(a===i)s--,i=i._nextRemoved;else if(n=n._next,null==a.previousIndex)s++;else{o||(o=[]);const _=c-s,A=u-s;if(_!=A){for(let B=0;B<_;B++){const G=B<o.length?o[B]:o[B]=0,Y=G+B;A<=Y&&Y<_&&(o[B]=G+1)}o[a.previousIndex]=A-_}}c!==u&&t(a,c,u)}}forEachPreviousItem(t){let n;for(n=this._previousItHead;null!==n;n=n._nextPrevious)t(n)}forEachAddedItem(t){let n;for(n=this._additionsHead;null!==n;n=n._nextAdded)t(n)}forEachMovedItem(t){let n;for(n=this._movesHead;null!==n;n=n._nextMoved)t(n)}forEachRemovedItem(t){let n;for(n=this._removalsHead;null!==n;n=n._nextRemoved)t(n)}forEachIdentityChange(t){let n;for(n=this._identityChangesHead;null!==n;n=n._nextIdentityChange)t(n)}diff(t){if(null==t&&(t=[]),!Tm(t))throw new jt(900,!1);return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let s,o,a,n=this._itHead,i=!1;if(Array.isArray(t)){this.length=t.length;for(let c=0;c<this.length;c++)o=t[c],a=this._trackByFn(c,o),null!==n&&Object.is(n.trackById,a)?(i&&(n=this._verifyReinsertion(n,o,a,c)),Object.is(n.item,o)||this._addIdentityChange(n,o)):(n=this._mismatch(n,o,a,c),i=!0),n=n._next}else s=0,function vF(r,t){if(Array.isArray(r))for(let n=0;n<r.length;n++)t(r[n]);else{const n=r[Symbol.iterator]();let i;for(;!(i=n.next()).done;)t(i.value)}}(t,c=>{a=this._trackByFn(s,c),null!==n&&Object.is(n.trackById,a)?(i&&(n=this._verifyReinsertion(n,c,a,s)),Object.is(n.item,c)||this._addIdentityChange(n,c)):(n=this._mismatch(n,c,a,s),i=!0),n=n._next,s++}),this.length=s;return this._truncate(n),this.collection=t,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let t;for(t=this._previousItHead=this._itHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._additionsHead;null!==t;t=t._nextAdded)t.previousIndex=t.currentIndex;for(this._additionsHead=this._additionsTail=null,t=this._movesHead;null!==t;t=t._nextMoved)t.previousIndex=t.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(t,n,i,s){let o;return null===t?o=this._itTail:(o=t._prev,this._remove(t)),null!==(t=null===this._unlinkedRecords?null:this._unlinkedRecords.get(i,null))?(Object.is(t.item,n)||this._addIdentityChange(t,n),this._reinsertAfter(t,o,s)):null!==(t=null===this._linkedRecords?null:this._linkedRecords.get(i,s))?(Object.is(t.item,n)||this._addIdentityChange(t,n),this._moveAfter(t,o,s)):t=this._addAfter(new BB(n,i),o,s),t}_verifyReinsertion(t,n,i,s){let o=null===this._unlinkedRecords?null:this._unlinkedRecords.get(i,null);return null!==o?t=this._reinsertAfter(o,t._prev,s):t.currentIndex!=s&&(t.currentIndex=s,this._addToMoves(t,s)),t}_truncate(t){for(;null!==t;){const n=t._next;this._addToRemovals(this._unlink(t)),t=n}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(t,n,i){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(t);const s=t._prevRemoved,o=t._nextRemoved;return null===s?this._removalsHead=o:s._nextRemoved=o,null===o?this._removalsTail=s:o._prevRemoved=s,this._insertAfter(t,n,i),this._addToMoves(t,i),t}_moveAfter(t,n,i){return this._unlink(t),this._insertAfter(t,n,i),this._addToMoves(t,i),t}_addAfter(t,n,i){return this._insertAfter(t,n,i),this._additionsTail=null===this._additionsTail?this._additionsHead=t:this._additionsTail._nextAdded=t,t}_insertAfter(t,n,i){const s=null===n?this._itHead:n._next;return t._next=s,t._prev=n,null===s?this._itTail=t:s._prev=t,null===n?this._itHead=t:n._next=t,null===this._linkedRecords&&(this._linkedRecords=new BT),this._linkedRecords.put(t),t.currentIndex=i,t}_remove(t){return this._addToRemovals(this._unlink(t))}_unlink(t){null!==this._linkedRecords&&this._linkedRecords.remove(t);const n=t._prev,i=t._next;return null===n?this._itHead=i:n._next=i,null===i?this._itTail=n:i._prev=n,t}_addToMoves(t,n){return t.previousIndex===n||(this._movesTail=null===this._movesTail?this._movesHead=t:this._movesTail._nextMoved=t),t}_addToRemovals(t){return null===this._unlinkedRecords&&(this._unlinkedRecords=new BT),this._unlinkedRecords.put(t),t.currentIndex=null,t._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=t,t._prevRemoved=null):(t._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=t),t}_addIdentityChange(t,n){return t.item=n,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=t:this._identityChangesTail._nextIdentityChange=t,t}}class BB{constructor(t,n){this.item=t,this.trackById=n,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class VB{constructor(){this._head=null,this._tail=null}add(t){null===this._head?(this._head=this._tail=t,t._nextDup=null,t._prevDup=null):(this._tail._nextDup=t,t._prevDup=this._tail,t._nextDup=null,this._tail=t)}get(t,n){let i;for(i=this._head;null!==i;i=i._nextDup)if((null===n||n<=i.currentIndex)&&Object.is(i.trackById,t))return i;return null}remove(t){const n=t._prevDup,i=t._nextDup;return null===n?this._head=i:n._nextDup=i,null===i?this._tail=n:i._prevDup=n,null===this._head}}class BT{constructor(){this.map=new Map}put(t){const n=t.trackById;let i=this.map.get(n);i||(i=new VB,this.map.set(n,i)),i.add(t)}get(t,n){const s=this.map.get(t);return s?s.get(t,n):null}remove(t){const n=t.trackById;return this.map.get(n).remove(t)&&this.map.delete(n),t}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function VT(r,t,n){const i=r.previousIndex;if(null===i)return i;let s=0;return n&&i<n.length&&(s=n[i]),i+t+s}function GT(){return new Km([new UT])}let Km=(()=>{class r{static{this.\u0275prov=Dn({token:r,providedIn:"root",factory:GT})}constructor(n){this.factories=n}static create(n,i){if(null!=i){const s=i.factories.slice();n=n.concat(s)}return new r(n)}static extend(n){return{provide:r,useFactory:i=>r.create(n,i||GT()),deps:[[r,new $p,new qp]]}}find(n){const i=this.factories.find(s=>s.supports(n));if(null!=i)return i;throw new jt(901,!1)}}return r})();const qB=CT(null,"core",[]);let $B=(()=>{class r{constructor(n){}static{this.\u0275fac=function(i){return new(i||r)(me(ld))}}static{this.\u0275mod=Xo({type:r})}static{this.\u0275inj=Cs({})}}return r})();let r_=null;function Cl(){return r_}class aV{}const xo=new hn("DocumentToken");let i_=(()=>{class r{historyGo(n){throw new Error("Not implemented")}static{this.\u0275fac=function(i){return new(i||r)}}static{this.\u0275prov=Dn({token:r,factory:function(){return _e(cV)},providedIn:"platform"})}}return r})();const lV=new hn("Location Initialized");let cV=(()=>{class r extends i_{constructor(){super(),this._doc=_e(xo),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Cl().getBaseHref(this._doc)}onPopState(n){const i=Cl().getGlobalEventTarget(this._doc,"window");return i.addEventListener("popstate",n,!1),()=>i.removeEventListener("popstate",n)}onHashChange(n){const i=Cl().getGlobalEventTarget(this._doc,"window");return i.addEventListener("hashchange",n,!1),()=>i.removeEventListener("hashchange",n)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(n){this._location.pathname=n}pushState(n,i,s){this._history.pushState(n,i,s)}replaceState(n,i,s){this._history.replaceState(n,i,s)}forward(){this._history.forward()}back(){this._history.back()}historyGo(n=0){this._history.go(n)}getState(){return this._history.state}static{this.\u0275fac=function(i){return new(i||r)}}static{this.\u0275prov=Dn({token:r,factory:function(){return new r},providedIn:"platform"})}}return r})();function s_(r,t){if(0==r.length)return t;if(0==t.length)return r;let n=0;return r.endsWith("/")&&n++,t.startsWith("/")&&n++,2==n?r+t.substring(1):1==n?r+t:r+"/"+t}function QT(r){const t=r.match(/#|\?|$/),n=t&&t.index||r.length;return r.slice(0,n-("/"===r[n-1]?1:0))+r.slice(n)}function Ha(r){return r&&"?"!==r[0]?"?"+r:r}let vc=(()=>{class r{historyGo(n){throw new Error("Not implemented")}static{this.\u0275fac=function(i){return new(i||r)}}static{this.\u0275prov=Dn({token:r,factory:function(){return _e(tA)},providedIn:"root"})}}return r})();const eA=new hn("appBaseHref");let tA=(()=>{class r extends vc{constructor(n,i){super(),this._platformLocation=n,this._removeListenerFns=[],this._baseHref=i??this._platformLocation.getBaseHrefFromDOM()??_e(xo).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}prepareExternalUrl(n){return s_(this._baseHref,n)}path(n=!1){const i=this._platformLocation.pathname+Ha(this._platformLocation.search),s=this._platformLocation.hash;return s&&n?`${i}${s}`:i}pushState(n,i,s,o){const a=this.prepareExternalUrl(s+Ha(o));this._platformLocation.pushState(n,i,a)}replaceState(n,i,s,o){const a=this.prepareExternalUrl(s+Ha(o));this._platformLocation.replaceState(n,i,a)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(n=0){this._platformLocation.historyGo?.(n)}static{this.\u0275fac=function(i){return new(i||r)(me(i_),me(eA,8))}}static{this.\u0275prov=Dn({token:r,factory:r.\u0275fac,providedIn:"root"})}}return r})(),uV=(()=>{class r extends vc{constructor(n,i){super(),this._platformLocation=n,this._baseHref="",this._removeListenerFns=[],null!=i&&(this._baseHref=i)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}path(n=!1){let i=this._platformLocation.hash;return null==i&&(i="#"),i.length>0?i.substring(1):i}prepareExternalUrl(n){const i=s_(this._baseHref,n);return i.length>0?"#"+i:i}pushState(n,i,s,o){let a=this.prepareExternalUrl(s+Ha(o));0==a.length&&(a=this._platformLocation.pathname),this._platformLocation.pushState(n,i,a)}replaceState(n,i,s,o){let a=this.prepareExternalUrl(s+Ha(o));0==a.length&&(a=this._platformLocation.pathname),this._platformLocation.replaceState(n,i,a)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(n=0){this._platformLocation.historyGo?.(n)}static{this.\u0275fac=function(i){return new(i||r)(me(i_),me(eA,8))}}static{this.\u0275prov=Dn({token:r,factory:r.\u0275fac})}}return r})(),o_=(()=>{class r{constructor(n){this._subject=new Mi,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=n;const i=this._locationStrategy.getBaseHref();this._basePath=function fV(r){if(new RegExp("^(https?:)?//").test(r)){const[,n]=r.split(/\/\/[^\/]+/);return n}return r}(QT(nA(i))),this._locationStrategy.onPopState(s=>{this._subject.emit({url:this.path(!0),pop:!0,state:s.state,type:s.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(n=!1){return this.normalize(this._locationStrategy.path(n))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(n,i=""){return this.path()==this.normalize(n+Ha(i))}normalize(n){return r.stripTrailingSlash(function hV(r,t){if(!r||!t.startsWith(r))return t;const n=t.substring(r.length);return""===n||["/",";","?","#"].includes(n[0])?n:t}(this._basePath,nA(n)))}prepareExternalUrl(n){return n&&"/"!==n[0]&&(n="/"+n),this._locationStrategy.prepareExternalUrl(n)}go(n,i="",s=null){this._locationStrategy.pushState(s,"",n,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+Ha(i)),s)}replaceState(n,i="",s=null){this._locationStrategy.replaceState(s,"",n,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+Ha(i)),s)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(n=0){this._locationStrategy.historyGo?.(n)}onUrlChange(n){return this._urlChangeListeners.push(n),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(i=>{this._notifyUrlChangeListeners(i.url,i.state)})),()=>{const i=this._urlChangeListeners.indexOf(n);this._urlChangeListeners.splice(i,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(n="",i){this._urlChangeListeners.forEach(s=>s(n,i))}subscribe(n,i,s){return this._subject.subscribe({next:n,error:i,complete:s})}static{this.normalizeQueryParams=Ha}static{this.joinWithSlash=s_}static{this.stripTrailingSlash=QT}static{this.\u0275fac=function(i){return new(i||r)(me(vc))}}static{this.\u0275prov=Dn({token:r,factory:function(){return function dV(){return new o_(me(vc))}()},providedIn:"root"})}}return r})();function nA(r){return r.replace(/\/index.html$/,"")}var Qm=function(r){return r[r.Decimal=0]="Decimal",r[r.Percent=1]="Percent",r[r.Currency=2]="Currency",r[r.Scientific=3]="Scientific",r}(Qm||{}),Vi=function(r){return r[r.Decimal=0]="Decimal",r[r.Group=1]="Group",r[r.List=2]="List",r[r.PercentSign=3]="PercentSign",r[r.PlusSign=4]="PlusSign",r[r.MinusSign=5]="MinusSign",r[r.Exponential=6]="Exponential",r[r.SuperscriptingExponent=7]="SuperscriptingExponent",r[r.PerMille=8]="PerMille",r[r.Infinity=9]="Infinity",r[r.NaN=10]="NaN",r[r.TimeSeparator=11]="TimeSeparator",r[r.CurrencyDecimal=12]="CurrencyDecimal",r[r.CurrencyGroup=13]="CurrencyGroup",r}(Vi||{});function ko(r,t){const n=Hs(r),i=n[ui.NumberSymbols][t];if(typeof i>"u"){if(t===Vi.CurrencyDecimal)return n[ui.NumberSymbols][Vi.Decimal];if(t===Vi.CurrencyGroup)return n[ui.NumberSymbols][Vi.Group]}return i}const BV=/^(\d+)?\.((\d+)(-(\d+))?)?$/;function p_(r){const t=parseInt(r);if(isNaN(t))throw new Error("Invalid integer literal when parsing "+r);return t}function dA(r,t){t=encodeURIComponent(t);for(const n of r.split(";")){const i=n.indexOf("="),[s,o]=-1==i?[n,""]:[n.slice(0,i),n.slice(i+1)];if(s.trim()===t)return decodeURIComponent(o)}return null}class QV{constructor(t,n,i,s){this.$implicit=t,this.ngForOf=n,this.index=i,this.count=s}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let y_=(()=>{class r{set ngForOf(n){this._ngForOf=n,this._ngForOfDirty=!0}set ngForTrackBy(n){this._trackByFn=n}get ngForTrackBy(){return this._trackByFn}constructor(n,i,s){this._viewContainer=n,this._template=i,this._differs=s,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(n){n&&(this._template=n)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const n=this._ngForOf;!this._differ&&n&&(this._differ=this._differs.find(n).create(this.ngForTrackBy))}if(this._differ){const n=this._differ.diff(this._ngForOf);n&&this._applyChanges(n)}}_applyChanges(n){const i=this._viewContainer;n.forEachOperation((s,o,a)=>{if(null==s.previousIndex)i.createEmbeddedView(this._template,new QV(s.item,this._ngForOf,-1,-1),null===a?void 0:a);else if(null==a)i.remove(null===o?void 0:o);else if(null!==o){const c=i.get(o);i.move(c,a),pA(c,s)}});for(let s=0,o=i.length;s<o;s++){const c=i.get(s).context;c.index=s,c.count=o,c.ngForOf=this._ngForOf}n.forEachIdentityChange(s=>{pA(i.get(s.currentIndex),s)})}static ngTemplateContextGuard(n,i){return!0}static{this.\u0275fac=function(i){return new(i||r)(kt(na),kt(za),kt(Km))}}static{this.\u0275dir=Kn({type:r,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0})}}return r})();function pA(r,t){r.context.$implicit=t.item}let v_=(()=>{class r{constructor(n,i){this._viewContainer=n,this._context=new e6,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=i}set ngIf(n){this._context.$implicit=this._context.ngIf=n,this._updateView()}set ngIfThen(n){mA("ngIfThen",n),this._thenTemplateRef=n,this._thenViewRef=null,this._updateView()}set ngIfElse(n){mA("ngIfElse",n),this._elseTemplateRef=n,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(n,i){return!0}static{this.\u0275fac=function(i){return new(i||r)(kt(na),kt(za))}}static{this.\u0275dir=Kn({type:r,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0})}}return r})();class e6{constructor(){this.$implicit=null,this.ngIf=null}}function mA(r,t){if(t&&!t.createEmbeddedView)throw new Error(`${r} must be a TemplateRef, but received '${Di(t)}'.`)}function ia(r,t){return new jt(2100,!1)}class r6{createSubscription(t,n){return Gw(()=>t.subscribe({next:n,error:i=>{throw i}}))}dispose(t){Gw(()=>t.unsubscribe())}}class i6{createSubscription(t,n){return t.then(n,i=>{throw i})}dispose(t){}}const s6=new i6,o6=new r6;let yA=(()=>{class r{constructor(n){this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null,this._ref=n}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(n){return this._obj?n!==this._obj?(this._dispose(),this.transform(n)):this._latestValue:(n&&this._subscribe(n),this._latestValue)}_subscribe(n){this._obj=n,this._strategy=this._selectStrategy(n),this._subscription=this._strategy.createSubscription(n,i=>this._updateLatestValue(n,i))}_selectStrategy(n){if(tf(n))return s6;if(nC(n))return o6;throw ia()}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(n,i){n===this._obj&&(this._latestValue=i,this._ref.markForCheck())}static{this.\u0275fac=function(i){return new(i||r)(kt(Xm,16))}}static{this.\u0275pipe=to({name:"async",type:r,pure:!1,standalone:!0})}}return r})(),bA=(()=>{class r{constructor(n){this._locale=n}transform(n,i,s){if(!function x_(r){return!(null==r||""===r||r!=r)}(n))return null;s=s||this._locale;try{return function qV(r,t,n){return function h_(r,t,n,i,s,o,a=!1){let c="",u=!1;if(isFinite(r)){let _=function XV(r){let i,s,o,a,c,t=Math.abs(r)+"",n=0;for((s=t.indexOf("."))>-1&&(t=t.replace(".","")),(o=t.search(/e/i))>0?(s<0&&(s=o),s+=+t.slice(o+1),t=t.substring(0,o)):s<0&&(s=t.length),o=0;"0"===t.charAt(o);o++);if(o===(c=t.length))i=[0],s=1;else{for(c--;"0"===t.charAt(c);)c--;for(s-=o,i=[],a=0;o<=c;o++,a++)i[a]=Number(t.charAt(o))}return s>22&&(i=i.splice(0,21),n=s-1,s=1),{digits:i,exponent:n,integerLen:s}}(r);a&&(_=function $V(r){if(0===r.digits[0])return r;const t=r.digits.length-r.integerLen;return r.exponent?r.exponent+=2:(0===t?r.digits.push(0,0):1===t&&r.digits.push(0),r.integerLen+=2),r}(_));let A=t.minInt,O=t.minFrac,B=t.maxFrac;if(o){const ue=o.match(BV);if(null===ue)throw new Error(`${o} is not a valid digit info`);const ce=ue[1],ye=ue[3],Ee=ue[5];null!=ce&&(A=p_(ce)),null!=ye&&(O=p_(ye)),null!=Ee?B=p_(Ee):null!=ye&&O>B&&(B=O)}!function YV(r,t,n){if(t>n)throw new Error(`The minimum number of digits after fraction (${t}) is higher than the maximum (${n}).`);let i=r.digits,s=i.length-r.integerLen;const o=Math.min(Math.max(t,s),n);let a=o+r.integerLen,c=i[a];if(a>0){i.splice(Math.max(r.integerLen,a));for(let O=a;O<i.length;O++)i[O]=0}else{s=Math.max(0,s),r.integerLen=1,i.length=Math.max(1,a=o+1),i[0]=0;for(let O=1;O<a;O++)i[O]=0}if(c>=5)if(a-1<0){for(let O=0;O>a;O--)i.unshift(0),r.integerLen++;i.unshift(1),r.integerLen++}else i[a-1]++;for(;s<Math.max(0,o);s++)i.push(0);let u=0!==o;const _=t+r.integerLen,A=i.reduceRight(function(O,B,G,Y){return Y[G]=(B+=O)<10?B:B-10,u&&(0===Y[G]&&G>=_?Y.pop():u=!1),B>=10?1:0},0);A&&(i.unshift(A),r.integerLen++)}(_,O,B);let G=_.digits,Y=_.integerLen;const ne=_.exponent;let ee=[];for(u=G.every(ue=>!ue);Y<A;Y++)G.unshift(0);for(;Y<0;Y++)G.unshift(0);Y>0?ee=G.splice(Y,G.length):(ee=G,G=[0]);const Q=[];for(G.length>=t.lgSize&&Q.unshift(G.splice(-t.lgSize,G.length).join(""));G.length>t.gSize;)Q.unshift(G.splice(-t.gSize,G.length).join(""));G.length&&Q.unshift(G.join("")),c=Q.join(ko(n,i)),ee.length&&(c+=ko(n,s)+ee.join("")),ne&&(c+=ko(n,Vi.Exponential)+"+"+ne)}else c=ko(n,Vi.Infinity);return c=r<0&&!u?t.negPre+c+t.negSuf:t.posPre+c+t.posSuf,c}(r,function f_(r,t="-"){const n={minInt:1,minFrac:0,maxFrac:0,posPre:"",posSuf:"",negPre:"",negSuf:"",gSize:0,lgSize:0},i=r.split(";"),s=i[0],o=i[1],a=-1!==s.indexOf(".")?s.split("."):[s.substring(0,s.lastIndexOf("0")+1),s.substring(s.lastIndexOf("0")+1)],c=a[0],u=a[1]||"";n.posPre=c.substring(0,c.indexOf("#"));for(let A=0;A<u.length;A++){const O=u.charAt(A);"0"===O?n.minFrac=n.maxFrac=A+1:"#"===O?n.maxFrac=A+1:n.posSuf+=O}const _=c.split(",");if(n.gSize=_[1]?_[1].length:0,n.lgSize=_[2]||_[1]?(_[2]||_[1]).length:0,o){const A=s.length-n.posPre.length-n.posSuf.length,O=o.indexOf("#");n.negPre=o.substring(0,O).replace(/'/g,""),n.negSuf=o.slice(O+A).replace(/'/g,"")}else n.negPre=t+n.posPre,n.negSuf=n.posSuf;return n}(function a_(r,t){return Hs(r)[ui.NumberFormats][t]}(t,Qm.Decimal),ko(t,Vi.MinusSign)),t,Vi.Group,Vi.Decimal,n)}(function w_(r){if("string"==typeof r&&!isNaN(Number(r)-parseFloat(r)))return Number(r);if("number"!=typeof r)throw new Error(`${r} is not a number`);return r}(n),s,i)}catch(o){throw ia()}}static{this.\u0275fac=function(i){return new(i||r)(kt(Ga,16))}}static{this.\u0275pipe=to({name:"number",type:r,pure:!0,standalone:!0})}}return r})();let _A=(()=>{class r{static{this.\u0275fac=function(i){return new(i||r)}}static{this.\u0275mod=Xo({type:r})}static{this.\u0275inj=Cs({})}}return r})();function wA(r){return"server"===r}let C6=(()=>{class r{static{this.\u0275prov=Dn({token:r,providedIn:"root",factory:()=>new T6(me(xo),window)})}}return r})();class T6{constructor(t,n){this.document=t,this.window=n,this.offset=()=>[0,0]}setOffset(t){this.offset=Array.isArray(t)?()=>t:t}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(t){this.supportsScrolling()&&this.window.scrollTo(t[0],t[1])}scrollToAnchor(t){if(!this.supportsScrolling())return;const n=function A6(r,t){const n=r.getElementById(t)||r.getElementsByName(t)[0];if(n)return n;if("function"==typeof r.createTreeWalker&&r.body&&"function"==typeof r.body.attachShadow){const i=r.createTreeWalker(r.body,NodeFilter.SHOW_ELEMENT);let s=i.currentNode;for(;s;){const o=s.shadowRoot;if(o){const a=o.getElementById(t)||o.querySelector(`[name="${t}"]`);if(a)return a}s=i.nextNode()}}return null}(this.document,t);n&&(this.scrollToElement(n),n.focus())}setHistoryScrollRestoration(t){this.supportsScrolling()&&(this.window.history.scrollRestoration=t)}scrollToElement(t){const n=t.getBoundingClientRect(),i=n.left+this.window.pageXOffset,s=n.top+this.window.pageYOffset,o=this.offset();this.window.scrollTo(i-o[0],s-o[1])}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}class SA{}class K6 extends aV{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class E_ extends K6{static makeCurrent(){!function oV(r){r_||(r_=r)}(new E_)}onAndCancel(t,n,i){return t.addEventListener(n,i),()=>{t.removeEventListener(n,i)}}dispatchEvent(t,n){t.dispatchEvent(n)}remove(t){t.parentNode&&t.parentNode.removeChild(t)}createElement(t,n){return(n=n||this.getDefaultDocument()).createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,n){return"window"===n?window:"document"===n?t:"body"===n?t.body:null}getBaseHref(t){const n=function J6(){return vf=vf||document.querySelector("base"),vf?vf.getAttribute("href"):null}();return null==n?null:function Q6(r){dg=dg||document.createElement("a"),dg.setAttribute("href",r);const t=dg.pathname;return"/"===t.charAt(0)?t:`/${t}`}(n)}resetBaseElement(){vf=null}getUserAgent(){return window.navigator.userAgent}getCookie(t){return dA(document.cookie,t)}}let dg,vf=null,t8=(()=>{class r{build(){return new XMLHttpRequest}static{this.\u0275fac=function(i){return new(i||r)}}static{this.\u0275prov=Dn({token:r,factory:r.\u0275fac})}}return r})();const C_=new hn("EventManagerPlugins");let AA=(()=>{class r{constructor(n,i){this._zone=i,this._eventNameToPlugin=new Map,n.forEach(s=>{s.manager=this}),this._plugins=n.slice().reverse()}addEventListener(n,i,s){return this._findPluginFor(i).addEventListener(n,i,s)}getZone(){return this._zone}_findPluginFor(n){let i=this._eventNameToPlugin.get(n);if(i)return i;if(i=this._plugins.find(o=>o.supports(n)),!i)throw new jt(5101,!1);return this._eventNameToPlugin.set(n,i),i}static{this.\u0275fac=function(i){return new(i||r)(me(C_),me(ci))}}static{this.\u0275prov=Dn({token:r,factory:r.\u0275fac})}}return r})();class DA{constructor(t){this._doc=t}}const T_="ng-app-id";let IA=(()=>{class r{constructor(n,i,s,o={}){this.doc=n,this.appId=i,this.nonce=s,this.platformId=o,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=wA(o),this.resetHostNodes()}addStyles(n){for(const i of n)1===this.changeUsageCount(i,1)&&this.onStyleAdded(i)}removeStyles(n){for(const i of n)this.changeUsageCount(i,-1)<=0&&this.onStyleRemoved(i)}ngOnDestroy(){const n=this.styleNodesInDOM;n&&(n.forEach(i=>i.remove()),n.clear());for(const i of this.getAllStyles())this.onStyleRemoved(i);this.resetHostNodes()}addHost(n){this.hostNodes.add(n);for(const i of this.getAllStyles())this.addStyleToHost(n,i)}removeHost(n){this.hostNodes.delete(n)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(n){for(const i of this.hostNodes)this.addStyleToHost(i,n)}onStyleRemoved(n){const i=this.styleRef;i.get(n)?.elements?.forEach(s=>s.remove()),i.delete(n)}collectServerRenderedStyles(){const n=this.doc.head?.querySelectorAll(`style[${T_}="${this.appId}"]`);if(n?.length){const i=new Map;return n.forEach(s=>{null!=s.textContent&&i.set(s.textContent,s)}),i}return null}changeUsageCount(n,i){const s=this.styleRef;if(s.has(n)){const o=s.get(n);return o.usage+=i,o.usage}return s.set(n,{usage:i,elements:[]}),i}getStyleElement(n,i){const s=this.styleNodesInDOM,o=s?.get(i);if(o?.parentNode===n)return s.delete(i),o.removeAttribute(T_),o;{const a=this.doc.createElement("style");return this.nonce&&a.setAttribute("nonce",this.nonce),a.textContent=i,this.platformIsServer&&a.setAttribute(T_,this.appId),a}}addStyleToHost(n,i){const s=this.getStyleElement(n,i);n.appendChild(s);const o=this.styleRef,a=o.get(i)?.elements;a?a.push(s):o.set(i,{elements:[s],usage:1})}resetHostNodes(){const n=this.hostNodes;n.clear(),n.add(this.doc.head)}static{this.\u0275fac=function(i){return new(i||r)(me(xo),me(hm),me(OM,8),me(hc))}}static{this.\u0275prov=Dn({token:r,factory:r.\u0275fac})}}return r})();const A_={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},D_=/%COMP%/g,s8=new hn("RemoveStylesOnCompDestroy",{providedIn:"root",factory:()=>!1});function RA(r,t){return t.map(n=>n.replace(D_,r))}let OA=(()=>{class r{constructor(n,i,s,o,a,c,u,_=null){this.eventManager=n,this.sharedStylesHost=i,this.appId=s,this.removeStylesOnCompDestroy=o,this.doc=a,this.platformId=c,this.ngZone=u,this.nonce=_,this.rendererByCompId=new Map,this.platformIsServer=wA(c),this.defaultRenderer=new I_(n,a,u,this.platformIsServer)}createRenderer(n,i){if(!n||!i)return this.defaultRenderer;this.platformIsServer&&i.encapsulation===nt.ShadowDom&&(i={...i,encapsulation:nt.Emulated});const s=this.getOrCreateRenderer(n,i);return s instanceof jA?s.applyToHost(n):s instanceof P_&&s.applyStyles(),s}getOrCreateRenderer(n,i){const s=this.rendererByCompId;let o=s.get(i.id);if(!o){const a=this.doc,c=this.ngZone,u=this.eventManager,_=this.sharedStylesHost,A=this.removeStylesOnCompDestroy,O=this.platformIsServer;switch(i.encapsulation){case nt.Emulated:o=new jA(u,_,i,this.appId,A,a,c,O);break;case nt.ShadowDom:return new c8(u,_,n,i,a,c,this.nonce,O);default:o=new P_(u,_,i,A,a,c,O)}s.set(i.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}static{this.\u0275fac=function(i){return new(i||r)(me(AA),me(IA),me(hm),me(s8),me(xo),me(hc),me(ci),me(OM))}}static{this.\u0275prov=Dn({token:r,factory:r.\u0275fac})}}return r})();class I_{constructor(t,n,i,s){this.eventManager=t,this.doc=n,this.ngZone=i,this.platformIsServer=s,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(t,n){return n?this.doc.createElementNS(A_[n]||n,t):this.doc.createElement(t)}createComment(t){return this.doc.createComment(t)}createText(t){return this.doc.createTextNode(t)}appendChild(t,n){(LA(t)?t.content:t).appendChild(n)}insertBefore(t,n,i){t&&(LA(t)?t.content:t).insertBefore(n,i)}removeChild(t,n){t&&t.removeChild(n)}selectRootElement(t,n){let i="string"==typeof t?this.doc.querySelector(t):t;if(!i)throw new jt(-5104,!1);return n||(i.textContent=""),i}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,n,i,s){if(s){n=s+":"+n;const o=A_[s];o?t.setAttributeNS(o,n,i):t.setAttribute(n,i)}else t.setAttribute(n,i)}removeAttribute(t,n,i){if(i){const s=A_[i];s?t.removeAttributeNS(s,n):t.removeAttribute(`${i}:${n}`)}else t.removeAttribute(n)}addClass(t,n){t.classList.add(n)}removeClass(t,n){t.classList.remove(n)}setStyle(t,n,i,s){s&(wl.DashCase|wl.Important)?t.style.setProperty(n,i,s&wl.Important?"important":""):t.style[n]=i}removeStyle(t,n,i){i&wl.DashCase?t.style.removeProperty(n):t.style[n]=""}setProperty(t,n,i){t[n]=i}setValue(t,n){t.nodeValue=n}listen(t,n,i){if("string"==typeof t&&!(t=Cl().getGlobalEventTarget(this.doc,t)))throw new Error(`Unsupported event target ${t} for event ${n}`);return this.eventManager.addEventListener(t,n,this.decoratePreventDefault(i))}decoratePreventDefault(t){return n=>{if("__ngUnwrap__"===n)return t;!1===(this.platformIsServer?this.ngZone.runGuarded(()=>t(n)):t(n))&&n.preventDefault()}}}function LA(r){return"TEMPLATE"===r.tagName&&void 0!==r.content}class c8 extends I_{constructor(t,n,i,s,o,a,c,u){super(t,o,a,u),this.sharedStylesHost=n,this.hostEl=i,this.shadowRoot=i.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const _=RA(s.id,s.styles);for(const A of _){const O=document.createElement("style");c&&O.setAttribute("nonce",c),O.textContent=A,this.shadowRoot.appendChild(O)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}appendChild(t,n){return super.appendChild(this.nodeOrShadowRoot(t),n)}insertBefore(t,n,i){return super.insertBefore(this.nodeOrShadowRoot(t),n,i)}removeChild(t,n){return super.removeChild(this.nodeOrShadowRoot(t),n)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class P_ extends I_{constructor(t,n,i,s,o,a,c,u){super(t,o,a,c),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=s,this.styles=u?RA(u,i.styles):i.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}}class jA extends P_{constructor(t,n,i,s,o,a,c,u){const _=s+"-"+i.id;super(t,n,i,o,a,c,u,_),this.contentAttr=function o8(r){return"_ngcontent-%COMP%".replace(D_,r)}(_),this.hostAttr=function a8(r){return"_nghost-%COMP%".replace(D_,r)}(_)}applyToHost(t){this.applyStyles(),this.setAttribute(t,this.hostAttr,"")}createElement(t,n){const i=super.createElement(t,n);return super.setAttribute(i,this.contentAttr,""),i}}let u8=(()=>{class r extends DA{constructor(n){super(n)}supports(n){return!0}addEventListener(n,i,s){return n.addEventListener(i,s,!1),()=>this.removeEventListener(n,i,s)}removeEventListener(n,i,s){return n.removeEventListener(i,s)}static{this.\u0275fac=function(i){return new(i||r)(me(xo))}}static{this.\u0275prov=Dn({token:r,factory:r.\u0275fac})}}return r})();const NA=["alt","control","meta","shift"],d8={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},h8={alt:r=>r.altKey,control:r=>r.ctrlKey,meta:r=>r.metaKey,shift:r=>r.shiftKey};let f8=(()=>{class r extends DA{constructor(n){super(n)}supports(n){return null!=r.parseEventName(n)}addEventListener(n,i,s){const o=r.parseEventName(i),a=r.eventCallback(o.fullKey,s,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Cl().onAndCancel(n,o.domEventName,a))}static parseEventName(n){const i=n.toLowerCase().split("."),s=i.shift();if(0===i.length||"keydown"!==s&&"keyup"!==s)return null;const o=r._normalizeKey(i.pop());let a="",c=i.indexOf("code");if(c>-1&&(i.splice(c,1),a="code."),NA.forEach(_=>{const A=i.indexOf(_);A>-1&&(i.splice(A,1),a+=_+".")}),a+=o,0!=i.length||0===o.length)return null;const u={};return u.domEventName=s,u.fullKey=a,u}static matchEventFullKeyCode(n,i){let s=d8[n.key]||n.key,o="";return i.indexOf("code.")>-1&&(s=n.code,o="code."),!(null==s||!s)&&(s=s.toLowerCase()," "===s?s="space":"."===s&&(s="dot"),NA.forEach(a=>{a!==s&&(0,h8[a])(n)&&(o+=a+".")}),o+=s,o===i)}static eventCallback(n,i,s){return o=>{r.matchEventFullKeyCode(o,n)&&s.runGuarded(()=>i(o))}}static _normalizeKey(n){return"esc"===n?"escape":n}static{this.\u0275fac=function(i){return new(i||r)(me(xo))}}static{this.\u0275prov=Dn({token:r,factory:r.\u0275fac})}}return r})();const y8=CT(qB,"browser",[{provide:hc,useValue:"browser"},{provide:RM,useValue:function p8(){E_.makeCurrent()},multi:!0},{provide:xo,useFactory:function g8(){return function e3(r){y0=r}(document),document},deps:[]}]),v8=new hn(""),UA=[{provide:qm,useClass:class e8{addToWindow(t){Ht.getAngularTestability=(i,s=!0)=>{const o=t.findTestabilityInTree(i,s);if(null==o)throw new jt(5103,!1);return o},Ht.getAllAngularTestabilities=()=>t.getAllTestabilities(),Ht.getAllAngularRootElements=()=>t.getAllRootElements(),Ht.frameworkStabilizers||(Ht.frameworkStabilizers=[]),Ht.frameworkStabilizers.push(i=>{const s=Ht.getAllAngularTestabilities();let o=s.length,a=!1;const c=function(u){a=a||u,o--,0==o&&i(a)};s.forEach(u=>{u.whenStable(c)})})}findTestabilityInTree(t,n,i){return null==n?null:t.getTestability(n)??(i?Cl().isShadowRoot(n)?this.findTestabilityInTree(t,n.host,!0):this.findTestabilityInTree(t,n.parentElement,!0):null)}},deps:[]},{provide:xT,useClass:qb,deps:[ci,$b,qm]},{provide:qb,useClass:qb,deps:[ci,$b,qm]}],BA=[{provide:T0,useValue:"root"},{provide:Ua,useFactory:function m8(){return new Ua},deps:[]},{provide:C_,useClass:u8,multi:!0,deps:[xo,ci,hc]},{provide:C_,useClass:f8,multi:!0,deps:[xo]},OA,IA,AA,{provide:UM,useExisting:OA},{provide:SA,useClass:t8,deps:[]},[]];let b8=(()=>{class r{constructor(n){}static withServerTransition(n){return{ngModule:r,providers:[{provide:hm,useValue:n.appId}]}}static{this.\u0275fac=function(i){return new(i||r)(me(v8,12))}}static{this.\u0275mod=Xo({type:r})}static{this.\u0275inj=Cs({providers:[...BA,...UA],imports:[_A,$B]})}}return r})(),VA=(()=>{class r{constructor(n){this._doc=n}getTitle(){return this._doc.title}setTitle(n){this._doc.title=n||""}static{this.\u0275fac=function(i){return new(i||r)(me(xo))}}static{this.\u0275prov=Dn({token:r,factory:function(i){let s=null;return s=i?new i:function x8(){return new VA(me(xo))}(),s},providedIn:"root"})}}return r})();typeof window<"u"&&window;const{isArray:C8}=Array,{getPrototypeOf:T8,prototype:A8,keys:D8}=Object;function WA(r){if(1===r.length){const t=r[0];if(C8(t))return{args:t,keys:null};if(function I8(r){return r&&"object"==typeof r&&T8(r)===A8}(t)){const n=D8(t);return{args:n.map(i=>t[i]),keys:n}}}return{args:r,keys:null}}const{isArray:P8}=Array;function qA(r){return te(t=>function R8(r,t){return P8(t)?r(...t):r(t)}(r,t))}function $A(r,t){return r.reduce((n,i,s)=>(n[i]=t[s],n),{})}let XA=(()=>{class r{constructor(n,i){this._renderer=n,this._elementRef=i,this.onChange=s=>{},this.onTouched=()=>{}}setProperty(n,i){this._renderer.setProperty(this._elementRef.nativeElement,n,i)}registerOnTouched(n){this.onTouched=n}registerOnChange(n){this.onChange=n}setDisabledState(n){this.setProperty("disabled",n)}static{this.\u0275fac=function(i){return new(i||r)(kt(Fa),kt(yo))}}static{this.\u0275dir=Kn({type:r})}}return r})(),bc=(()=>{class r extends XA{static{this.\u0275fac=function(){let n;return function(s){return(n||(n=bs(r)))(s||r)}}()}static{this.\u0275dir=Kn({type:r,features:[Zr]})}}return r})();const wa=new hn("NgValueAccessor"),j8={provide:wa,useExisting:Ur(()=>bf),multi:!0},k8=new hn("CompositionEventMode");let bf=(()=>{class r extends XA{constructor(n,i,s){super(n,i),this._compositionMode=s,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function N8(){const r=Cl()?Cl().getUserAgent():"";return/android (\d+)/.test(r.toLowerCase())}())}writeValue(n){this.setProperty("value",n??"")}_handleInput(n){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(n)}_compositionStart(){this._composing=!0}_compositionEnd(n){this._composing=!1,this._compositionMode&&this.onChange(n)}static{this.\u0275fac=function(i){return new(i||r)(kt(Fa),kt(yo),kt(k8,8))}}static{this.\u0275dir=Kn({type:r,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(i,s){1&i&&Or("input",function(a){return s._handleInput(a.target.value)})("blur",function(){return s.onTouched()})("compositionstart",function(){return s._compositionStart()})("compositionend",function(a){return s._compositionEnd(a.target.value)})},features:[_i([j8]),Zr]})}}return r})();const Is=new hn("NgValidators"),Dl=new hn("NgAsyncValidators");function hg(r){return null}function sD(r){return null!=r}function oD(r){return tf(r)?si(r):r}function aD(r){let t={};return r.forEach(n=>{t=null!=n?{...t,...n}:t}),0===Object.keys(t).length?null:t}function lD(r,t){return t.map(n=>n(r))}function cD(r){return r.map(t=>function U8(r){return!r.validate}(t)?t:n=>t.validate(n))}function O_(r){return null!=r?function uD(r){if(!r)return null;const t=r.filter(sD);return 0==t.length?null:function(n){return aD(lD(n,t))}}(cD(r)):null}function L_(r){return null!=r?function dD(r){if(!r)return null;const t=r.filter(sD);return 0==t.length?null:function(n){return function O8(...r){const t=_r(r),{args:n,keys:i}=WA(r),s=new X(o=>{const{length:a}=n;if(!a)return void o.complete();const c=new Array(a);let u=a,_=a;for(let A=0;A<a;A++){let O=!1;Lr(n[A]).subscribe(P(o,B=>{O||(O=!0,_--),c[A]=B},()=>u--,void 0,()=>{(!u||!O)&&(_||o.next(i?$A(i,c):c),o.complete())}))}});return t?s.pipe(qA(t)):s}(lD(n,t).map(oD)).pipe(te(aD))}}(cD(r)):null}function hD(r,t){return null===r?[t]:Array.isArray(r)?[...r,t]:[r,t]}function j_(r){return r?Array.isArray(r)?r:[r]:[]}function fg(r,t){return Array.isArray(r)?r.includes(t):r===t}function mD(r,t){const n=j_(t);return j_(r).forEach(s=>{fg(n,s)||n.push(s)}),n}function gD(r,t){return j_(t).filter(n=>!fg(r,n))}class yD{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(t){this._rawValidators=t||[],this._composedValidatorFn=O_(this._rawValidators)}_setAsyncValidators(t){this._rawAsyncValidators=t||[],this._composedAsyncValidatorFn=L_(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(t){this._onDestroyCallbacks.push(t)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(t=>t()),this._onDestroyCallbacks=[]}reset(t=void 0){this.control&&this.control.reset(t)}hasError(t,n){return!!this.control&&this.control.hasError(t,n)}getError(t,n){return this.control?this.control.getError(t,n):null}}class $s extends yD{get formDirective(){return null}get path(){return null}}class Il extends yD{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class vD{constructor(t){this._cd=t}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let N_=(()=>{class r extends vD{constructor(n){super(n)}static{this.\u0275fac=function(i){return new(i||r)(kt(Il,2))}}static{this.\u0275dir=Kn({type:r,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(i,s){2&i&&Qo("ng-untouched",s.isUntouched)("ng-touched",s.isTouched)("ng-pristine",s.isPristine)("ng-dirty",s.isDirty)("ng-valid",s.isValid)("ng-invalid",s.isInvalid)("ng-pending",s.isPending)},features:[Zr]})}}return r})();const _f="VALID",mg="INVALID",dd="PENDING",xf="DISABLED";function gg(r){return null!=r&&!Array.isArray(r)&&"object"==typeof r}class V_{constructor(t,n){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(t),this._assignAsyncValidators(n)}get validator(){return this._composedValidatorFn}set validator(t){this._rawValidators=this._composedValidatorFn=t}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(t){this._rawAsyncValidators=this._composedAsyncValidatorFn=t}get parent(){return this._parent}get valid(){return this.status===_f}get invalid(){return this.status===mg}get pending(){return this.status==dd}get disabled(){return this.status===xf}get enabled(){return this.status!==xf}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(t){this._assignValidators(t)}setAsyncValidators(t){this._assignAsyncValidators(t)}addValidators(t){this.setValidators(mD(t,this._rawValidators))}addAsyncValidators(t){this.setAsyncValidators(mD(t,this._rawAsyncValidators))}removeValidators(t){this.setValidators(gD(t,this._rawValidators))}removeAsyncValidators(t){this.setAsyncValidators(gD(t,this._rawAsyncValidators))}hasValidator(t){return fg(this._rawValidators,t)}hasAsyncValidator(t){return fg(this._rawAsyncValidators,t)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(t={}){this.touched=!0,this._parent&&!t.onlySelf&&this._parent.markAsTouched(t)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(t=>t.markAllAsTouched())}markAsUntouched(t={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(n=>{n.markAsUntouched({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}markAsDirty(t={}){this.pristine=!1,this._parent&&!t.onlySelf&&this._parent.markAsDirty(t)}markAsPristine(t={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(n=>{n.markAsPristine({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}markAsPending(t={}){this.status=dd,!1!==t.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!t.onlySelf&&this._parent.markAsPending(t)}disable(t={}){const n=this._parentMarkedDirty(t.onlySelf);this.status=xf,this.errors=null,this._forEachChild(i=>{i.disable({...t,onlySelf:!0})}),this._updateValue(),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...t,skipPristineCheck:n}),this._onDisabledChange.forEach(i=>i(!0))}enable(t={}){const n=this._parentMarkedDirty(t.onlySelf);this.status=_f,this._forEachChild(i=>{i.enable({...t,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors({...t,skipPristineCheck:n}),this._onDisabledChange.forEach(i=>i(!1))}_updateAncestors(t){this._parent&&!t.onlySelf&&(this._parent.updateValueAndValidity(t),t.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(t){this._parent=t}getRawValue(){return this.value}updateValueAndValidity(t={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===_f||this.status===dd)&&this._runAsyncValidator(t.emitEvent)),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.updateValueAndValidity(t)}_updateTreeValidity(t={emitEvent:!0}){this._forEachChild(n=>n._updateTreeValidity(t)),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?xf:_f}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(t){if(this.asyncValidator){this.status=dd,this._hasOwnPendingAsyncValidator=!0;const n=oD(this.asyncValidator(this));this._asyncValidationSubscription=n.subscribe(i=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(i,{emitEvent:t})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(t,n={}){this.errors=t,this._updateControlsErrors(!1!==n.emitEvent)}get(t){let n=t;return null==n||(Array.isArray(n)||(n=n.split(".")),0===n.length)?null:n.reduce((i,s)=>i&&i._find(s),this)}getError(t,n){const i=n?this.get(n):this;return i&&i.errors?i.errors[t]:null}hasError(t,n){return!!this.getError(t,n)}get root(){let t=this;for(;t._parent;)t=t._parent;return t}_updateControlsErrors(t){this.status=this._calculateStatus(),t&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(t)}_initObservables(){this.valueChanges=new Mi,this.statusChanges=new Mi}_calculateStatus(){return this._allControlsDisabled()?xf:this.errors?mg:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(dd)?dd:this._anyControlsHaveStatus(mg)?mg:_f}_anyControlsHaveStatus(t){return this._anyControls(n=>n.status===t)}_anyControlsDirty(){return this._anyControls(t=>t.dirty)}_anyControlsTouched(){return this._anyControls(t=>t.touched)}_updatePristine(t={}){this.pristine=!this._anyControlsDirty(),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}_updateTouched(t={}){this.touched=this._anyControlsTouched(),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}_registerOnCollectionChange(t){this._onCollectionChange=t}_setUpdateStrategy(t){gg(t)&&null!=t.updateOn&&(this._updateOn=t.updateOn)}_parentMarkedDirty(t){return!t&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(t){return null}_assignValidators(t){this._rawValidators=Array.isArray(t)?t.slice():t,this._composedValidatorFn=function H8(r){return Array.isArray(r)?O_(r):r||null}(this._rawValidators)}_assignAsyncValidators(t){this._rawAsyncValidators=Array.isArray(t)?t.slice():t,this._composedAsyncValidatorFn=function W8(r){return Array.isArray(r)?L_(r):r||null}(this._rawAsyncValidators)}}const hd=new hn("CallSetDisabledState",{providedIn:"root",factory:()=>yg}),yg="always";function wf(r,t,n=yg){(function G_(r,t){const n=function fD(r){return r._rawValidators}(r);null!==t.validator?r.setValidators(hD(n,t.validator)):"function"==typeof n&&r.setValidators([n]);const i=function pD(r){return r._rawAsyncValidators}(r);null!==t.asyncValidator?r.setAsyncValidators(hD(i,t.asyncValidator)):"function"==typeof i&&r.setAsyncValidators([i]);const s=()=>r.updateValueAndValidity();_g(t._rawValidators,s),_g(t._rawAsyncValidators,s)})(r,t),t.valueAccessor.writeValue(r.value),(r.disabled||"always"===n)&&t.valueAccessor.setDisabledState?.(r.disabled),function X8(r,t){t.valueAccessor.registerOnChange(n=>{r._pendingValue=n,r._pendingChange=!0,r._pendingDirty=!0,"change"===r.updateOn&&wD(r,t)})}(r,t),function Z8(r,t){const n=(i,s)=>{t.valueAccessor.writeValue(i),s&&t.viewToModelUpdate(i)};r.registerOnChange(n),t._registerOnDestroy(()=>{r._unregisterOnChange(n)})}(r,t),function Y8(r,t){t.valueAccessor.registerOnTouched(()=>{r._pendingTouched=!0,"blur"===r.updateOn&&r._pendingChange&&wD(r,t),"submit"!==r.updateOn&&r.markAsTouched()})}(r,t),function $8(r,t){if(t.valueAccessor.setDisabledState){const n=i=>{t.valueAccessor.setDisabledState(i)};r.registerOnDisabledChange(n),t._registerOnDestroy(()=>{r._unregisterOnDisabledChange(n)})}}(r,t)}function _g(r,t){r.forEach(n=>{n.registerOnValidatorChange&&n.registerOnValidatorChange(t)})}function wD(r,t){r._pendingDirty&&r.markAsDirty(),r.setValue(r._pendingValue,{emitModelToViewChange:!1}),t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1}function ED(r,t){const n=r.indexOf(t);n>-1&&r.splice(n,1)}function CD(r){return"object"==typeof r&&null!==r&&2===Object.keys(r).length&&"value"in r&&"disabled"in r}const TD=class extends V_{constructor(t=null,n,i){super(function U_(r){return(gg(r)?r.validators:r)||null}(n),function B_(r,t){return(gg(t)?t.asyncValidators:r)||null}(i,n)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(t),this._setUpdateStrategy(n),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),gg(n)&&(n.nonNullable||n.initialValueIsDefault)&&(this.defaultValue=CD(t)?t.value:t)}setValue(t,n={}){this.value=this._pendingValue=t,this._onChange.length&&!1!==n.emitModelToViewChange&&this._onChange.forEach(i=>i(this.value,!1!==n.emitViewToModelChange)),this.updateValueAndValidity(n)}patchValue(t,n={}){this.setValue(t,n)}reset(t=this.defaultValue,n={}){this._applyFormState(t),this.markAsPristine(n),this.markAsUntouched(n),this.setValue(this.value,n),this._pendingChange=!1}_updateValue(){}_anyControls(t){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(t){this._onChange.push(t)}_unregisterOnChange(t){ED(this._onChange,t)}registerOnDisabledChange(t){this._onDisabledChange.push(t)}_unregisterOnDisabledChange(t){ED(this._onDisabledChange,t)}_forEachChild(t){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(t){CD(t)?(this.value=this._pendingValue=t.value,t.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=t}},iz={provide:Il,useExisting:Ur(()=>wg)},ID=(()=>Promise.resolve())();let wg=(()=>{class r extends Il{constructor(n,i,s,o,a,c){super(),this._changeDetectorRef=a,this.callSetDisabledState=c,this.control=new TD,this._registered=!1,this.name="",this.update=new Mi,this._parent=n,this._setValidators(i),this._setAsyncValidators(s),this.valueAccessor=function q_(r,t){if(!t)return null;let n,i,s;return Array.isArray(t),t.forEach(o=>{o.constructor===bf?n=o:function Q8(r){return Object.getPrototypeOf(r.constructor)===bc}(o)?i=o:s=o}),s||i||n||null}(0,o)}ngOnChanges(n){if(this._checkForErrors(),!this._registered||"name"in n){if(this._registered&&(this._checkName(),this.formDirective)){const i=n.name.previousValue;this.formDirective.removeControl({name:i,path:this._getPath(i)})}this._setUpControl()}"isDisabled"in n&&this._updateDisabled(n),function W_(r,t){if(!r.hasOwnProperty("model"))return!1;const n=r.model;return!!n.isFirstChange()||!Object.is(t,n.currentValue)}(n,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(n){this.viewModel=n,this.update.emit(n)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){wf(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(n){ID.then(()=>{this.control.setValue(n,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(n){const i=n.isDisabled.currentValue,s=0!==i&&function cd(r){return"boolean"==typeof r?r:null!=r&&"false"!==r}(i);ID.then(()=>{s&&!this.control.disabled?this.control.disable():!s&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(n){return this._parent?function vg(r,t){return[...t.path,r]}(n,this._parent):[n]}static{this.\u0275fac=function(i){return new(i||r)(kt($s,9),kt(Is,10),kt(Dl,10),kt(wa,10),kt(Xm,8),kt(hd,8))}}static{this.\u0275dir=Kn({type:r,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[_i([iz]),Zr,Lo]})}}return r})(),RD=(()=>{class r{static{this.\u0275fac=function(i){return new(i||r)}}static{this.\u0275mod=Xo({type:r})}static{this.\u0275inj=Cs({})}}return r})();let _c=(()=>{class r{constructor(){this._validator=hg}ngOnChanges(n){if(this.inputName in n){const i=this.normalizeInput(n[this.inputName].currentValue);this._enabled=this.enabled(i),this._validator=this._enabled?this.createValidator(i):hg,this._onChange&&this._onChange()}}validate(n){return this._validator(n)}registerOnValidatorChange(n){this._onChange=n}enabled(n){return null!=n}static{this.\u0275fac=function(i){return new(i||r)}}static{this.\u0275dir=Kn({type:r,features:[Lo]})}}return r})();const Tz={provide:Is,useExisting:Ur(()=>Sg),multi:!0};let Sg=(()=>{class r extends _c{constructor(){super(...arguments),this.inputName="maxlength",this.normalizeInput=n=>function VD(r){return"number"==typeof r?r:parseInt(r,10)}(n),this.createValidator=n=>function rD(r){return t=>function ZA(r){return null!=r&&"number"==typeof r.length}(t.value)&&t.value.length>r?{maxlength:{requiredLength:r,actualLength:t.value.length}}:null}(n)}static{this.\u0275fac=function(){let n;return function(s){return(n||(n=bs(r)))(s||r)}}()}static{this.\u0275dir=Kn({type:r,selectors:[["","maxlength","","formControlName",""],["","maxlength","","formControl",""],["","maxlength","","ngModel",""]],hostVars:1,hostBindings:function(i,s){2&i&&Ko("maxlength",s._enabled?s.maxlength:null)},inputs:{maxlength:"maxlength"},features:[_i([Tz]),Zr]})}}return r})(),Dz=(()=>{class r{static{this.\u0275fac=function(i){return new(i||r)}}static{this.\u0275mod=Xo({type:r})}static{this.\u0275inj=Cs({imports:[RD]})}}return r})(),YD=(()=>{class r{static withConfig(n){return{ngModule:r,providers:[{provide:hd,useValue:n.callSetDisabledState??yg}]}}static{this.\u0275fac=function(i){return new(i||r)}}static{this.\u0275mod=Xo({type:r})}static{this.\u0275inj=Cs({imports:[Dz]})}}return r})();function fd(r,t){return Vn(t)?xt(r,t,1):xt(r,1)}function $a(r,t){return $((n,i)=>{let s=0;n.subscribe(P(i,o=>r.call(t,o,s++)&&i.next(o)))})}function Mf(r){return $((t,n)=>{try{t.subscribe(n)}finally{n.add(r)}})}class Mg{}class Eg{}class sa{constructor(t){this.normalizedNames=new Map,this.lazyUpdate=null,t?"string"==typeof t?this.lazyInit=()=>{this.headers=new Map,t.split("\n").forEach(n=>{const i=n.indexOf(":");if(i>0){const s=n.slice(0,i),o=s.toLowerCase(),a=n.slice(i+1).trim();this.maybeSetNormalizedName(s,o),this.headers.has(o)?this.headers.get(o).push(a):this.headers.set(o,[a])}})}:typeof Headers<"u"&&t instanceof Headers?(this.headers=new Map,t.forEach((n,i)=>{this.setHeaderEntries(i,n)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(t).forEach(([n,i])=>{this.setHeaderEntries(n,i)})}:this.headers=new Map}has(t){return this.init(),this.headers.has(t.toLowerCase())}get(t){this.init();const n=this.headers.get(t.toLowerCase());return n&&n.length>0?n[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(t){return this.init(),this.headers.get(t.toLowerCase())||null}append(t,n){return this.clone({name:t,value:n,op:"a"})}set(t,n){return this.clone({name:t,value:n,op:"s"})}delete(t,n){return this.clone({name:t,value:n,op:"d"})}maybeSetNormalizedName(t,n){this.normalizedNames.has(n)||this.normalizedNames.set(n,t)}init(){this.lazyInit&&(this.lazyInit instanceof sa?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(t=>this.applyUpdate(t)),this.lazyUpdate=null))}copyFrom(t){t.init(),Array.from(t.headers.keys()).forEach(n=>{this.headers.set(n,t.headers.get(n)),this.normalizedNames.set(n,t.normalizedNames.get(n))})}clone(t){const n=new sa;return n.lazyInit=this.lazyInit&&this.lazyInit instanceof sa?this.lazyInit:this,n.lazyUpdate=(this.lazyUpdate||[]).concat([t]),n}applyUpdate(t){const n=t.name.toLowerCase();switch(t.op){case"a":case"s":let i=t.value;if("string"==typeof i&&(i=[i]),0===i.length)return;this.maybeSetNormalizedName(t.name,n);const s=("a"===t.op?this.headers.get(n):void 0)||[];s.push(...i),this.headers.set(n,s);break;case"d":const o=t.value;if(o){let a=this.headers.get(n);if(!a)return;a=a.filter(c=>-1===o.indexOf(c)),0===a.length?(this.headers.delete(n),this.normalizedNames.delete(n)):this.headers.set(n,a)}else this.headers.delete(n),this.normalizedNames.delete(n)}}setHeaderEntries(t,n){const i=(Array.isArray(n)?n:[n]).map(o=>o.toString()),s=t.toLowerCase();this.headers.set(s,i),this.maybeSetNormalizedName(t,s)}forEach(t){this.init(),Array.from(this.normalizedNames.keys()).forEach(n=>t(this.normalizedNames.get(n),this.headers.get(n)))}}class Pz{encodeKey(t){return ZD(t)}encodeValue(t){return ZD(t)}decodeKey(t){return decodeURIComponent(t)}decodeValue(t){return decodeURIComponent(t)}}const Oz=/%(\d[a-f0-9])/gi,Lz={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function ZD(r){return encodeURIComponent(r).replace(Oz,(t,n)=>Lz[n]??t)}function Cg(r){return`${r}`}class Pl{constructor(t={}){if(this.updates=null,this.cloneFrom=null,this.encoder=t.encoder||new Pz,t.fromString){if(t.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function Rz(r,t){const n=new Map;return r.length>0&&r.replace(/^\?/,"").split("&").forEach(s=>{const o=s.indexOf("="),[a,c]=-1==o?[t.decodeKey(s),""]:[t.decodeKey(s.slice(0,o)),t.decodeValue(s.slice(o+1))],u=n.get(a)||[];u.push(c),n.set(a,u)}),n}(t.fromString,this.encoder)}else t.fromObject?(this.map=new Map,Object.keys(t.fromObject).forEach(n=>{const i=t.fromObject[n],s=Array.isArray(i)?i.map(Cg):[Cg(i)];this.map.set(n,s)})):this.map=null}has(t){return this.init(),this.map.has(t)}get(t){this.init();const n=this.map.get(t);return n?n[0]:null}getAll(t){return this.init(),this.map.get(t)||null}keys(){return this.init(),Array.from(this.map.keys())}append(t,n){return this.clone({param:t,value:n,op:"a"})}appendAll(t){const n=[];return Object.keys(t).forEach(i=>{const s=t[i];Array.isArray(s)?s.forEach(o=>{n.push({param:i,value:o,op:"a"})}):n.push({param:i,value:s,op:"a"})}),this.clone(n)}set(t,n){return this.clone({param:t,value:n,op:"s"})}delete(t,n){return this.clone({param:t,value:n,op:"d"})}toString(){return this.init(),this.keys().map(t=>{const n=this.encoder.encodeKey(t);return this.map.get(t).map(i=>n+"="+this.encoder.encodeValue(i)).join("&")}).filter(t=>""!==t).join("&")}clone(t){const n=new Pl({encoder:this.encoder});return n.cloneFrom=this.cloneFrom||this,n.updates=(this.updates||[]).concat(t),n}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(t=>this.map.set(t,this.cloneFrom.map.get(t))),this.updates.forEach(t=>{switch(t.op){case"a":case"s":const n=("a"===t.op?this.map.get(t.param):void 0)||[];n.push(Cg(t.value)),this.map.set(t.param,n);break;case"d":if(void 0===t.value){this.map.delete(t.param);break}{let i=this.map.get(t.param)||[];const s=i.indexOf(Cg(t.value));-1!==s&&i.splice(s,1),i.length>0?this.map.set(t.param,i):this.map.delete(t.param)}}}),this.cloneFrom=this.updates=null)}}class jz{constructor(){this.map=new Map}set(t,n){return this.map.set(t,n),this}get(t){return this.map.has(t)||this.map.set(t,t.defaultValue()),this.map.get(t)}delete(t){return this.map.delete(t),this}has(t){return this.map.has(t)}keys(){return this.map.keys()}}function KD(r){return typeof ArrayBuffer<"u"&&r instanceof ArrayBuffer}function JD(r){return typeof Blob<"u"&&r instanceof Blob}function QD(r){return typeof FormData<"u"&&r instanceof FormData}class Ef{constructor(t,n,i,s){let o;if(this.url=n,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=t.toUpperCase(),function Nz(r){switch(r){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||s?(this.body=void 0!==i?i:null,o=s):o=i,o&&(this.reportProgress=!!o.reportProgress,this.withCredentials=!!o.withCredentials,o.responseType&&(this.responseType=o.responseType),o.headers&&(this.headers=o.headers),o.context&&(this.context=o.context),o.params&&(this.params=o.params)),this.headers||(this.headers=new sa),this.context||(this.context=new jz),this.params){const a=this.params.toString();if(0===a.length)this.urlWithParams=n;else{const c=n.indexOf("?");this.urlWithParams=n+(-1===c?"?":c<n.length-1?"&":"")+a}}else this.params=new Pl,this.urlWithParams=n}serializeBody(){return null===this.body?null:KD(this.body)||JD(this.body)||QD(this.body)||function kz(r){return typeof URLSearchParams<"u"&&r instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof Pl?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||QD(this.body)?null:JD(this.body)?this.body.type||null:KD(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof Pl?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(t={}){const n=t.method||this.method,i=t.url||this.url,s=t.responseType||this.responseType,o=void 0!==t.body?t.body:this.body,a=void 0!==t.withCredentials?t.withCredentials:this.withCredentials,c=void 0!==t.reportProgress?t.reportProgress:this.reportProgress;let u=t.headers||this.headers,_=t.params||this.params;const A=t.context??this.context;return void 0!==t.setHeaders&&(u=Object.keys(t.setHeaders).reduce((O,B)=>O.set(B,t.setHeaders[B]),u)),t.setParams&&(_=Object.keys(t.setParams).reduce((O,B)=>O.set(B,t.setParams[B]),_)),new Ef(n,i,o,{params:_,headers:u,context:A,reportProgress:c,responseType:s,withCredentials:a})}}var pd=function(r){return r[r.Sent=0]="Sent",r[r.UploadProgress=1]="UploadProgress",r[r.ResponseHeader=2]="ResponseHeader",r[r.DownloadProgress=3]="DownloadProgress",r[r.Response=4]="Response",r[r.User=5]="User",r}(pd||{});class e1{constructor(t,n=200,i="OK"){this.headers=t.headers||new sa,this.status=void 0!==t.status?t.status:n,this.statusText=t.statusText||i,this.url=t.url||null,this.ok=this.status>=200&&this.status<300}}class t1 extends e1{constructor(t={}){super(t),this.type=pd.ResponseHeader}clone(t={}){return new t1({headers:t.headers||this.headers,status:void 0!==t.status?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}}class md extends e1{constructor(t={}){super(t),this.type=pd.Response,this.body=void 0!==t.body?t.body:null}clone(t={}){return new md({body:void 0!==t.body?t.body:this.body,headers:t.headers||this.headers,status:void 0!==t.status?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}}class eI extends e1{constructor(t){super(t,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${t.url||"(unknown url)"}`:`Http failure response for ${t.url||"(unknown url)"}: ${t.status} ${t.statusText}`,this.error=t.error||null}}function n1(r,t){return{body:t,headers:r.headers,context:r.context,observe:r.observe,params:r.params,reportProgress:r.reportProgress,responseType:r.responseType,withCredentials:r.withCredentials}}let tI=(()=>{class r{constructor(n){this.handler=n}request(n,i,s={}){let o;if(n instanceof Ef)o=n;else{let u,_;u=s.headers instanceof sa?s.headers:new sa(s.headers),s.params&&(_=s.params instanceof Pl?s.params:new Pl({fromObject:s.params})),o=new Ef(n,i,void 0!==s.body?s.body:null,{headers:u,context:s.context,params:_,reportProgress:s.reportProgress,responseType:s.responseType||"json",withCredentials:s.withCredentials})}const a=Un(o).pipe(fd(u=>this.handler.handle(u)));if(n instanceof Ef||"events"===s.observe)return a;const c=a.pipe($a(u=>u instanceof md));switch(s.observe||"body"){case"body":switch(o.responseType){case"arraybuffer":return c.pipe(te(u=>{if(null!==u.body&&!(u.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return u.body}));case"blob":return c.pipe(te(u=>{if(null!==u.body&&!(u.body instanceof Blob))throw new Error("Response is not a Blob.");return u.body}));case"text":return c.pipe(te(u=>{if(null!==u.body&&"string"!=typeof u.body)throw new Error("Response is not a string.");return u.body}));default:return c.pipe(te(u=>u.body))}case"response":return c;default:throw new Error(`Unreachable: unhandled observe type ${s.observe}}`)}}delete(n,i={}){return this.request("DELETE",n,i)}get(n,i={}){return this.request("GET",n,i)}head(n,i={}){return this.request("HEAD",n,i)}jsonp(n,i){return this.request("JSONP",n,{params:(new Pl).append(i,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(n,i={}){return this.request("OPTIONS",n,i)}patch(n,i,s={}){return this.request("PATCH",n,n1(s,i))}post(n,i,s={}){return this.request("POST",n,n1(s,i))}put(n,i,s={}){return this.request("PUT",n,n1(s,i))}static{this.\u0275fac=function(i){return new(i||r)(me(Mg))}}static{this.\u0275prov=Dn({token:r,factory:r.\u0275fac})}}return r})();function iI(r,t){return t(r)}function Uz(r,t){return(n,i)=>t.intercept(n,{handle:s=>r(s,i)})}const Vz=new hn(""),Cf=new hn(""),sI=new hn("");function zz(){let r=null;return(t,n)=>{null===r&&(r=(_e(Vz,{optional:!0})??[]).reduceRight(Uz,iI));const i=_e(Hm),s=i.add();return r(t,n).pipe(Mf(()=>i.remove(s)))}}let oI=(()=>{class r extends Mg{constructor(n,i){super(),this.backend=n,this.injector=i,this.chain=null,this.pendingTasks=_e(Hm)}handle(n){if(null===this.chain){const s=Array.from(new Set([...this.injector.get(Cf),...this.injector.get(sI,[])]));this.chain=s.reduceRight((o,a)=>function Bz(r,t,n){return(i,s)=>n.runInContext(()=>t(i,o=>r(o,s)))}(o,a,this.injector),iI)}const i=this.pendingTasks.add();return this.chain(n,s=>this.backend.handle(s)).pipe(Mf(()=>this.pendingTasks.remove(i)))}static{this.\u0275fac=function(i){return new(i||r)(me(Eg),me(go))}}static{this.\u0275prov=Dn({token:r,factory:r.\u0275fac})}}return r})();const qz=/^\)\]\}',?\n/;let lI=(()=>{class r{constructor(n){this.xhrFactory=n}handle(n){if("JSONP"===n.method)throw new jt(-2800,!1);const i=this.xhrFactory;return(i.\u0275loadImpl?si(i.\u0275loadImpl()):Un(null)).pipe(eo(()=>new X(o=>{const a=i.build();if(a.open(n.method,n.urlWithParams),n.withCredentials&&(a.withCredentials=!0),n.headers.forEach((ne,ee)=>a.setRequestHeader(ne,ee.join(","))),n.headers.has("Accept")||a.setRequestHeader("Accept","application/json, text/plain, */*"),!n.headers.has("Content-Type")){const ne=n.detectContentTypeHeader();null!==ne&&a.setRequestHeader("Content-Type",ne)}if(n.responseType){const ne=n.responseType.toLowerCase();a.responseType="json"!==ne?ne:"text"}const c=n.serializeBody();let u=null;const _=()=>{if(null!==u)return u;const ne=a.statusText||"OK",ee=new sa(a.getAllResponseHeaders()),Q=function $z(r){return"responseURL"in r&&r.responseURL?r.responseURL:/^X-Request-URL:/m.test(r.getAllResponseHeaders())?r.getResponseHeader("X-Request-URL"):null}(a)||n.url;return u=new t1({headers:ee,status:a.status,statusText:ne,url:Q}),u},A=()=>{let{headers:ne,status:ee,statusText:Q,url:ue}=_(),ce=null;204!==ee&&(ce=typeof a.response>"u"?a.responseText:a.response),0===ee&&(ee=ce?200:0);let ye=ee>=200&&ee<300;if("json"===n.responseType&&"string"==typeof ce){const Ee=ce;ce=ce.replace(qz,"");try{ce=""!==ce?JSON.parse(ce):null}catch(Le){ce=Ee,ye&&(ye=!1,ce={error:Le,text:ce})}}ye?(o.next(new md({body:ce,headers:ne,status:ee,statusText:Q,url:ue||void 0})),o.complete()):o.error(new eI({error:ce,headers:ne,status:ee,statusText:Q,url:ue||void 0}))},O=ne=>{const{url:ee}=_(),Q=new eI({error:ne,status:a.status||0,statusText:a.statusText||"Unknown Error",url:ee||void 0});o.error(Q)};let B=!1;const G=ne=>{B||(o.next(_()),B=!0);let ee={type:pd.DownloadProgress,loaded:ne.loaded};ne.lengthComputable&&(ee.total=ne.total),"text"===n.responseType&&a.responseText&&(ee.partialText=a.responseText),o.next(ee)},Y=ne=>{let ee={type:pd.UploadProgress,loaded:ne.loaded};ne.lengthComputable&&(ee.total=ne.total),o.next(ee)};return a.addEventListener("load",A),a.addEventListener("error",O),a.addEventListener("timeout",O),a.addEventListener("abort",O),n.reportProgress&&(a.addEventListener("progress",G),null!==c&&a.upload&&a.upload.addEventListener("progress",Y)),a.send(c),o.next({type:pd.Sent}),()=>{a.removeEventListener("error",O),a.removeEventListener("abort",O),a.removeEventListener("load",A),a.removeEventListener("timeout",O),n.reportProgress&&(a.removeEventListener("progress",G),null!==c&&a.upload&&a.upload.removeEventListener("progress",Y)),a.readyState!==a.DONE&&a.abort()}})))}static{this.\u0275fac=function(i){return new(i||r)(me(SA))}}static{this.\u0275prov=Dn({token:r,factory:r.\u0275fac})}}return r})();const r1=new hn("XSRF_ENABLED"),cI=new hn("XSRF_COOKIE_NAME",{providedIn:"root",factory:()=>"XSRF-TOKEN"}),uI=new hn("XSRF_HEADER_NAME",{providedIn:"root",factory:()=>"X-XSRF-TOKEN"});class dI{}let Zz=(()=>{class r{constructor(n,i,s){this.doc=n,this.platform=i,this.cookieName=s,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const n=this.doc.cookie||"";return n!==this.lastCookieString&&(this.parseCount++,this.lastToken=dA(n,this.cookieName),this.lastCookieString=n),this.lastToken}static{this.\u0275fac=function(i){return new(i||r)(me(xo),me(hc),me(cI))}}static{this.\u0275prov=Dn({token:r,factory:r.\u0275fac})}}return r})();function Kz(r,t){const n=r.url.toLowerCase();if(!_e(r1)||"GET"===r.method||"HEAD"===r.method||n.startsWith("http://")||n.startsWith("https://"))return t(r);const i=_e(dI).getToken(),s=_e(uI);return null!=i&&!r.headers.has(s)&&(r=r.clone({headers:r.headers.set(s,i)})),t(r)}var Rl=function(r){return r[r.Interceptors=0]="Interceptors",r[r.LegacyInterceptors=1]="LegacyInterceptors",r[r.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",r[r.NoXsrfProtection=3]="NoXsrfProtection",r[r.JsonpSupport=4]="JsonpSupport",r[r.RequestsMadeViaParent=5]="RequestsMadeViaParent",r[r.Fetch=6]="Fetch",r}(Rl||{});function xc(r,t){return{\u0275kind:r,\u0275providers:t}}function Jz(...r){const t=[tI,lI,oI,{provide:Mg,useExisting:oI},{provide:Eg,useExisting:lI},{provide:Cf,useValue:Kz,multi:!0},{provide:r1,useValue:!0},{provide:dI,useClass:Zz}];for(const n of r)t.push(...n.\u0275providers);return function M0(r){return{\u0275providers:r}}(t)}const hI=new hn("LEGACY_INTERCEPTOR_FN");let eG=(()=>{class r{static{this.\u0275fac=function(i){return new(i||r)}}static{this.\u0275mod=Xo({type:r})}static{this.\u0275inj=Cs({providers:[Jz(xc(Rl.LegacyInterceptors,[{provide:hI,useFactory:zz},{provide:Cf,useExisting:hI,multi:!0}]))]})}}return r})();function i1(...r){const t=rn(r),n=_r(r),{args:i,keys:s}=WA(r);if(0===i.length)return si([],t);const o=new X(function aG(r,t,n=q){return i=>{fI(t,()=>{const{length:s}=r,o=new Array(s);let a=s,c=s;for(let u=0;u<s;u++)fI(t,()=>{const _=si(r[u],t);let A=!1;_.subscribe(P(i,O=>{o[u]=O,A||(A=!0,c--),c||i.next(n(o.slice()))},()=>{--a||i.complete()}))},i)},i)}}(i,t,s?a=>$A(s,a):q));return n?o.pipe(qA(n)):o}function fI(r,t,n){r?Ls(n,r,t):t()}const Ag=Ci(r=>function(){r(this),this.name="EmptyError",this.message="no elements in sequence"});function s1(...r){return function lG(){return tn(1)}()(si(r,rn(r)))}function pI(r){return new X(t=>{Lr(r()).subscribe(t)})}function Tf(r,t){const n=Vn(r)?r:()=>r,i=s=>s.error(n());return new X(t?s=>t.schedule(i,0,s):i)}function o1(){return $((r,t)=>{let n=null;r._refCount++;const i=P(t,void 0,void 0,void 0,()=>{if(!r||r._refCount<=0||0<--r._refCount)return void(n=null);const s=r._connection,o=n;n=null,s&&(!o||s===o)&&s.unsubscribe(),t.unsubscribe()});r.subscribe(i),i.closed||(n=r.connect())})}class mI extends X{constructor(t,n){super(),this.source=t,this.subjectFactory=n,this._subject=null,this._refCount=0,this._connection=null,Ae(t)&&(this.lift=t.lift)}_subscribe(t){return this.getSubject().subscribe(t)}getSubject(){const t=this._subject;return(!t||t.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:t}=this;this._subject=this._connection=null,t?.unsubscribe()}connect(){let t=this._connection;if(!t){t=this._connection=new l;const n=this.getSubject();t.add(this.source.subscribe(P(n,void 0,()=>{this._teardown(),n.complete()},i=>{this._teardown(),n.error(i)},()=>this._teardown()))),t.closed&&(this._connection=null,t=l.EMPTY)}return t}refCount(){return o1()(this)}}function gd(r){return r<=0?()=>St:$((t,n)=>{let i=0;t.subscribe(P(n,s=>{++i<=r&&(n.next(s),r<=i&&n.complete())}))})}function Dg(r){return $((t,n)=>{let i=!1;t.subscribe(P(n,s=>{i=!0,n.next(s)},()=>{i||n.next(r),n.complete()}))})}function gI(r=uG){return $((t,n)=>{let i=!1;t.subscribe(P(n,s=>{i=!0,n.next(s)},()=>i?n.complete():n.error(r())))})}function uG(){return new Ag}function wc(r,t){const n=arguments.length>=2;return i=>i.pipe(r?$a((s,o)=>r(s,o,i)):q,gd(1),n?Dg(t):gI(()=>new Ag))}function Ps(r,t,n){const i=Vn(r)||t||n?{next:r,error:t,complete:n}:r;return i?$((s,o)=>{var a;null===(a=i.subscribe)||void 0===a||a.call(i);let c=!0;s.subscribe(P(o,u=>{var _;null===(_=i.next)||void 0===_||_.call(i,u),o.next(u)},()=>{var u;c=!1,null===(u=i.complete)||void 0===u||u.call(i),o.complete()},u=>{var _;c=!1,null===(_=i.error)||void 0===_||_.call(i,u),o.error(u)},()=>{var u,_;c&&(null===(u=i.unsubscribe)||void 0===u||u.call(i)),null===(_=i.finalize)||void 0===_||_.call(i)}))}):q}function Sc(r){return $((t,n)=>{let o,i=null,s=!1;i=t.subscribe(P(n,void 0,void 0,a=>{o=Lr(r(a,Sc(r)(t))),i?(i.unsubscribe(),i=null,o.subscribe(n)):s=!0})),s&&(i.unsubscribe(),i=null,o.subscribe(n))})}function a1(r){return r<=0?()=>St:$((t,n)=>{let i=[];t.subscribe(P(n,s=>{i.push(s),r<i.length&&i.shift()},()=>{for(const s of i)n.next(s);n.complete()},void 0,()=>{i=null}))})}const lr="primary",Af=Symbol("RouteTitle");class gG{constructor(t){this.params=t||{}}has(t){return Object.prototype.hasOwnProperty.call(this.params,t)}get(t){if(this.has(t)){const n=this.params[t];return Array.isArray(n)?n[0]:n}return null}getAll(t){if(this.has(t)){const n=this.params[t];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}}function yd(r){return new gG(r)}function yG(r,t,n){const i=n.path.split("/");if(i.length>r.length||"full"===n.pathMatch&&(t.hasChildren()||i.length<r.length))return null;const s={};for(let o=0;o<i.length;o++){const a=i[o],c=r[o];if(a.startsWith(":"))s[a.substring(1)]=c;else if(a!==c.path)return null}return{consumed:r.slice(0,i.length),posParams:s}}function Sa(r,t){const n=r?Object.keys(r):void 0,i=t?Object.keys(t):void 0;if(!n||!i||n.length!=i.length)return!1;let s;for(let o=0;o<n.length;o++)if(s=n[o],!yI(r[s],t[s]))return!1;return!0}function yI(r,t){if(Array.isArray(r)&&Array.isArray(t)){if(r.length!==t.length)return!1;const n=[...r].sort(),i=[...t].sort();return n.every((s,o)=>i[o]===s)}return r===t}function vI(r){return r.length>0?r[r.length-1]:null}function Ol(r){return function oG(r){return!!r&&(r instanceof X||Vn(r.lift)&&Vn(r.subscribe))}(r)?r:tf(r)?si(Promise.resolve(r)):Un(r)}const bG={exact:function xI(r,t,n){if(!Mc(r.segments,t.segments)||!Ig(r.segments,t.segments,n)||r.numberOfChildren!==t.numberOfChildren)return!1;for(const i in t.children)if(!r.children[i]||!xI(r.children[i],t.children[i],n))return!1;return!0},subset:wI},bI={exact:function _G(r,t){return Sa(r,t)},subset:function xG(r,t){return Object.keys(t).length<=Object.keys(r).length&&Object.keys(t).every(n=>yI(r[n],t[n]))},ignored:()=>!0};function _I(r,t,n){return bG[n.paths](r.root,t.root,n.matrixParams)&&bI[n.queryParams](r.queryParams,t.queryParams)&&!("exact"===n.fragment&&r.fragment!==t.fragment)}function wI(r,t,n){return SI(r,t,t.segments,n)}function SI(r,t,n,i){if(r.segments.length>n.length){const s=r.segments.slice(0,n.length);return!(!Mc(s,n)||t.hasChildren()||!Ig(s,n,i))}if(r.segments.length===n.length){if(!Mc(r.segments,n)||!Ig(r.segments,n,i))return!1;for(const s in t.children)if(!r.children[s]||!wI(r.children[s],t.children[s],i))return!1;return!0}{const s=n.slice(0,r.segments.length),o=n.slice(r.segments.length);return!!(Mc(r.segments,s)&&Ig(r.segments,s,i)&&r.children[lr])&&SI(r.children[lr],t,o,i)}}function Ig(r,t,n){return t.every((i,s)=>bI[n](r[s].parameters,i.parameters))}class vd{constructor(t=new Kr([],{}),n={},i=null){this.root=t,this.queryParams=n,this.fragment=i}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=yd(this.queryParams)),this._queryParamMap}toString(){return MG.serialize(this)}}class Kr{constructor(t,n){this.segments=t,this.children=n,this.parent=null,Object.values(n).forEach(i=>i.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Pg(this)}}class Df{constructor(t,n){this.path=t,this.parameters=n}get parameterMap(){return this._parameterMap||(this._parameterMap=yd(this.parameters)),this._parameterMap}toString(){return CI(this)}}function Mc(r,t){return r.length===t.length&&r.every((n,i)=>n.path===t[i].path)}let If=(()=>{class r{static{this.\u0275fac=function(i){return new(i||r)}}static{this.\u0275prov=Dn({token:r,factory:function(){return new l1},providedIn:"root"})}}return r})();class l1{parse(t){const n=new jG(t);return new vd(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(t){const n=`/${Pf(t.root,!0)}`,i=function TG(r){const t=Object.keys(r).map(n=>{const i=r[n];return Array.isArray(i)?i.map(s=>`${Rg(n)}=${Rg(s)}`).join("&"):`${Rg(n)}=${Rg(i)}`}).filter(n=>!!n);return t.length?`?${t.join("&")}`:""}(t.queryParams);return`${n}${i}${"string"==typeof t.fragment?`#${function EG(r){return encodeURI(r)}(t.fragment)}`:""}`}}const MG=new l1;function Pg(r){return r.segments.map(t=>CI(t)).join("/")}function Pf(r,t){if(!r.hasChildren())return Pg(r);if(t){const n=r.children[lr]?Pf(r.children[lr],!1):"",i=[];return Object.entries(r.children).forEach(([s,o])=>{s!==lr&&i.push(`${s}:${Pf(o,!1)}`)}),i.length>0?`${n}(${i.join("//")})`:n}{const n=function SG(r,t){let n=[];return Object.entries(r.children).forEach(([i,s])=>{i===lr&&(n=n.concat(t(s,i)))}),Object.entries(r.children).forEach(([i,s])=>{i!==lr&&(n=n.concat(t(s,i)))}),n}(r,(i,s)=>s===lr?[Pf(r.children[lr],!1)]:[`${s}:${Pf(i,!1)}`]);return 1===Object.keys(r.children).length&&null!=r.children[lr]?`${Pg(r)}/${n[0]}`:`${Pg(r)}/(${n.join("//")})`}}function MI(r){return encodeURIComponent(r).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Rg(r){return MI(r).replace(/%3B/gi,";")}function c1(r){return MI(r).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Og(r){return decodeURIComponent(r)}function EI(r){return Og(r.replace(/\+/g,"%20"))}function CI(r){return`${c1(r.path)}${function CG(r){return Object.keys(r).map(t=>`;${c1(t)}=${c1(r[t])}`).join("")}(r.parameters)}`}const AG=/^[^\/()?;#]+/;function u1(r){const t=r.match(AG);return t?t[0]:""}const DG=/^[^\/()?;=#]+/,PG=/^[^=?&#]+/,OG=/^[^&#]+/;class jG{constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Kr([],{}):new Kr([],this.parseChildren())}parseQueryParams(){const t={};if(this.consumeOptional("?"))do{this.parseQueryParam(t)}while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let i={};return this.peekStartsWith("(")&&(i=this.parseParens(!1)),(t.length>0||Object.keys(n).length>0)&&(i[lr]=new Kr(t,n)),i}parseSegment(){const t=u1(this.remaining);if(""===t&&this.peekStartsWith(";"))throw new jt(4009,!1);return this.capture(t),new Df(Og(t),this.parseMatrixParams())}parseMatrixParams(){const t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){const n=function IG(r){const t=r.match(DG);return t?t[0]:""}(this.remaining);if(!n)return;this.capture(n);let i="";if(this.consumeOptional("=")){const s=u1(this.remaining);s&&(i=s,this.capture(i))}t[Og(n)]=Og(i)}parseQueryParam(t){const n=function RG(r){const t=r.match(PG);return t?t[0]:""}(this.remaining);if(!n)return;this.capture(n);let i="";if(this.consumeOptional("=")){const a=function LG(r){const t=r.match(OG);return t?t[0]:""}(this.remaining);a&&(i=a,this.capture(i))}const s=EI(n),o=EI(i);if(t.hasOwnProperty(s)){let a=t[s];Array.isArray(a)||(a=[a],t[s]=a),a.push(o)}else t[s]=o}parseParens(t){const n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const i=u1(this.remaining),s=this.remaining[i.length];if("/"!==s&&")"!==s&&";"!==s)throw new jt(4010,!1);let o;i.indexOf(":")>-1?(o=i.slice(0,i.indexOf(":")),this.capture(o),this.capture(":")):t&&(o=lr);const a=this.parseChildren();n[o]=1===Object.keys(a).length?a[lr]:new Kr([],a),this.consumeOptional("//")}return n}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return!!this.peekStartsWith(t)&&(this.remaining=this.remaining.substring(t.length),!0)}capture(t){if(!this.consumeOptional(t))throw new jt(4011,!1)}}function TI(r){return r.segments.length>0?new Kr([],{[lr]:r}):r}function AI(r){const t={};for(const i of Object.keys(r.children)){const o=AI(r.children[i]);if(i===lr&&0===o.segments.length&&o.hasChildren())for(const[a,c]of Object.entries(o.children))t[a]=c;else(o.segments.length>0||o.hasChildren())&&(t[i]=o)}return function NG(r){if(1===r.numberOfChildren&&r.children[lr]){const t=r.children[lr];return new Kr(r.segments.concat(t.segments),t.children)}return r}(new Kr(r.segments,t))}function Ec(r){return r instanceof vd}function DI(r){let t;const s=TI(function n(o){const a={};for(const u of o.children){const _=n(u);a[u.outlet]=_}const c=new Kr(o.url,a);return o===r&&(t=c),c}(r.root));return t??s}function II(r,t,n,i){let s=r;for(;s.parent;)s=s.parent;if(0===t.length)return d1(s,s,s,n,i);const o=function FG(r){if("string"==typeof r[0]&&1===r.length&&"/"===r[0])return new RI(!0,0,r);let t=0,n=!1;const i=r.reduce((s,o,a)=>{if("object"==typeof o&&null!=o){if(o.outlets){const c={};return Object.entries(o.outlets).forEach(([u,_])=>{c[u]="string"==typeof _?_.split("/"):_}),[...s,{outlets:c}]}if(o.segmentPath)return[...s,o.segmentPath]}return"string"!=typeof o?[...s,o]:0===a?(o.split("/").forEach((c,u)=>{0==u&&"."===c||(0==u&&""===c?n=!0:".."===c?t++:""!=c&&s.push(c))}),s):[...s,o]},[]);return new RI(n,t,i)}(t);if(o.toRoot())return d1(s,s,new Kr([],{}),n,i);const a=function UG(r,t,n){if(r.isAbsolute)return new jg(t,!0,0);if(!n)return new jg(t,!1,NaN);if(null===n.parent)return new jg(n,!0,0);const i=Lg(r.commands[0])?0:1;return function BG(r,t,n){let i=r,s=t,o=n;for(;o>s;){if(o-=s,i=i.parent,!i)throw new jt(4005,!1);s=i.segments.length}return new jg(i,!1,s-o)}(n,n.segments.length-1+i,r.numberOfDoubleDots)}(o,s,r),c=a.processChildren?Of(a.segmentGroup,a.index,o.commands):OI(a.segmentGroup,a.index,o.commands);return d1(s,a.segmentGroup,c,n,i)}function Lg(r){return"object"==typeof r&&null!=r&&!r.outlets&&!r.segmentPath}function Rf(r){return"object"==typeof r&&null!=r&&r.outlets}function d1(r,t,n,i,s){let a,o={};i&&Object.entries(i).forEach(([u,_])=>{o[u]=Array.isArray(_)?_.map(A=>`${A}`):`${_}`}),a=r===t?n:PI(r,t,n);const c=TI(AI(a));return new vd(c,o,s)}function PI(r,t,n){const i={};return Object.entries(r.children).forEach(([s,o])=>{i[s]=o===t?n:PI(o,t,n)}),new Kr(r.segments,i)}class RI{constructor(t,n,i){if(this.isAbsolute=t,this.numberOfDoubleDots=n,this.commands=i,t&&i.length>0&&Lg(i[0]))throw new jt(4003,!1);const s=i.find(Rf);if(s&&s!==vI(i))throw new jt(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class jg{constructor(t,n,i){this.segmentGroup=t,this.processChildren=n,this.index=i}}function OI(r,t,n){if(r||(r=new Kr([],{})),0===r.segments.length&&r.hasChildren())return Of(r,t,n);const i=function zG(r,t,n){let i=0,s=t;const o={match:!1,pathIndex:0,commandIndex:0};for(;s<r.segments.length;){if(i>=n.length)return o;const a=r.segments[s],c=n[i];if(Rf(c))break;const u=`${c}`,_=i<n.length-1?n[i+1]:null;if(s>0&&void 0===u)break;if(u&&_&&"object"==typeof _&&void 0===_.outlets){if(!jI(u,_,a))return o;i+=2}else{if(!jI(u,{},a))return o;i++}s++}return{match:!0,pathIndex:s,commandIndex:i}}(r,t,n),s=n.slice(i.commandIndex);if(i.match&&i.pathIndex<r.segments.length){const o=new Kr(r.segments.slice(0,i.pathIndex),{});return o.children[lr]=new Kr(r.segments.slice(i.pathIndex),r.children),Of(o,0,s)}return i.match&&0===s.length?new Kr(r.segments,{}):i.match&&!r.hasChildren()?h1(r,t,n):i.match?Of(r,0,s):h1(r,t,n)}function Of(r,t,n){if(0===n.length)return new Kr(r.segments,{});{const i=function VG(r){return Rf(r[0])?r[0].outlets:{[lr]:r}}(n),s={};if(Object.keys(i).some(o=>o!==lr)&&r.children[lr]&&1===r.numberOfChildren&&0===r.children[lr].segments.length){const o=Of(r.children[lr],t,n);return new Kr(r.segments,o.children)}return Object.entries(i).forEach(([o,a])=>{"string"==typeof a&&(a=[a]),null!==a&&(s[o]=OI(r.children[o],t,a))}),Object.entries(r.children).forEach(([o,a])=>{void 0===i[o]&&(s[o]=a)}),new Kr(r.segments,s)}}function h1(r,t,n){const i=r.segments.slice(0,t);let s=0;for(;s<n.length;){const o=n[s];if(Rf(o)){const u=GG(o.outlets);return new Kr(i,u)}if(0===s&&Lg(n[0])){i.push(new Df(r.segments[t].path,LI(n[0]))),s++;continue}const a=Rf(o)?o.outlets[lr]:`${o}`,c=s<n.length-1?n[s+1]:null;a&&c&&Lg(c)?(i.push(new Df(a,LI(c))),s+=2):(i.push(new Df(a,{})),s++)}return new Kr(i,{})}function GG(r){const t={};return Object.entries(r).forEach(([n,i])=>{"string"==typeof i&&(i=[i]),null!==i&&(t[n]=h1(new Kr([],{}),0,i))}),t}function LI(r){const t={};return Object.entries(r).forEach(([n,i])=>t[n]=`${i}`),t}function jI(r,t,n){return r==n.path&&Sa(t,n.parameters)}const Lf="imperative";class Ma{constructor(t,n){this.id=t,this.url=n}}class Ng extends Ma{constructor(t,n,i="imperative",s=null){super(t,n),this.type=0,this.navigationTrigger=i,this.restoredState=s}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Ll extends Ma{constructor(t,n,i){super(t,n),this.urlAfterRedirects=i,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class jf extends Ma{constructor(t,n,i,s){super(t,n),this.reason=i,this.code=s,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class bd extends Ma{constructor(t,n,i,s){super(t,n),this.reason=i,this.code=s,this.type=16}}class kg extends Ma{constructor(t,n,i,s){super(t,n),this.error=i,this.target=s,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class NI extends Ma{constructor(t,n,i,s){super(t,n),this.urlAfterRedirects=i,this.state=s,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class HG extends Ma{constructor(t,n,i,s){super(t,n),this.urlAfterRedirects=i,this.state=s,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class WG extends Ma{constructor(t,n,i,s,o){super(t,n),this.urlAfterRedirects=i,this.state=s,this.shouldActivate=o,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class qG extends Ma{constructor(t,n,i,s){super(t,n),this.urlAfterRedirects=i,this.state=s,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class $G extends Ma{constructor(t,n,i,s){super(t,n),this.urlAfterRedirects=i,this.state=s,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class XG{constructor(t){this.route=t,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class YG{constructor(t){this.route=t,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class ZG{constructor(t){this.snapshot=t,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class KG{constructor(t){this.snapshot=t,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class JG{constructor(t){this.snapshot=t,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class QG{constructor(t){this.snapshot=t,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class kI{constructor(t,n,i){this.routerEvent=t,this.position=n,this.anchor=i,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class f1{}class p1{constructor(t){this.url=t}}class eH{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new Nf,this.attachRef=null}}let Nf=(()=>{class r{constructor(){this.contexts=new Map}onChildOutletCreated(n,i){const s=this.getOrCreateContext(n);s.outlet=i,this.contexts.set(n,s)}onChildOutletDestroyed(n){const i=this.getContext(n);i&&(i.outlet=null,i.attachRef=null)}onOutletDeactivated(){const n=this.contexts;return this.contexts=new Map,n}onOutletReAttached(n){this.contexts=n}getOrCreateContext(n){let i=this.getContext(n);return i||(i=new eH,this.contexts.set(n,i)),i}getContext(n){return this.contexts.get(n)||null}static{this.\u0275fac=function(i){return new(i||r)}}static{this.\u0275prov=Dn({token:r,factory:r.\u0275fac,providedIn:"root"})}}return r})();class FI{constructor(t){this._root=t}get root(){return this._root.value}parent(t){const n=this.pathFromRoot(t);return n.length>1?n[n.length-2]:null}children(t){const n=m1(t,this._root);return n?n.children.map(i=>i.value):[]}firstChild(t){const n=m1(t,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(t){const n=g1(t,this._root);return n.length<2?[]:n[n.length-2].children.map(s=>s.value).filter(s=>s!==t)}pathFromRoot(t){return g1(t,this._root).map(n=>n.value)}}function m1(r,t){if(r===t.value)return t;for(const n of t.children){const i=m1(r,n);if(i)return i}return null}function g1(r,t){if(r===t.value)return[t];for(const n of t.children){const i=g1(r,n);if(i.length)return i.unshift(t),i}return[]}class Xa{constructor(t,n){this.value=t,this.children=n}toString(){return`TreeNode(${this.value})`}}function _d(r){const t={};return r&&r.children.forEach(n=>t[n.value.outlet]=n),t}class UI extends FI{constructor(t,n){super(t),this.snapshot=n,y1(this,t)}toString(){return this.snapshot.toString()}}function BI(r,t){const n=function tH(r,t){const a=new Fg([],{},{},"",{},lr,t,null,{});return new zI("",new Xa(a,[]))}(0,t),i=new Es([new Df("",{})]),s=new Es({}),o=new Es({}),a=new Es({}),c=new Es(""),u=new xd(i,s,a,c,o,lr,t,n.root);return u.snapshot=n.root,new UI(new Xa(u,[]),n)}class xd{constructor(t,n,i,s,o,a,c,u){this.urlSubject=t,this.paramsSubject=n,this.queryParamsSubject=i,this.fragmentSubject=s,this.dataSubject=o,this.outlet=a,this.component=c,this._futureSnapshot=u,this.title=this.dataSubject?.pipe(te(_=>_[Af]))??Un(void 0),this.url=t,this.params=n,this.queryParams=i,this.fragment=s,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(te(t=>yd(t)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(te(t=>yd(t)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function VI(r,t="emptyOnly"){const n=r.pathFromRoot;let i=0;if("always"!==t)for(i=n.length-1;i>=1;){const s=n[i],o=n[i-1];if(s.routeConfig&&""===s.routeConfig.path)i--;else{if(o.component)break;i--}}return function nH(r){return r.reduce((t,n)=>({params:{...t.params,...n.params},data:{...t.data,...n.data},resolve:{...n.data,...t.resolve,...n.routeConfig?.data,...n._resolvedData}}),{params:{},data:{},resolve:{}})}(n.slice(i))}class Fg{get title(){return this.data?.[Af]}constructor(t,n,i,s,o,a,c,u,_){this.url=t,this.params=n,this.queryParams=i,this.fragment=s,this.data=o,this.outlet=a,this.component=c,this.routeConfig=u,this._resolve=_}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=yd(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=yd(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(i=>i.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class zI extends FI{constructor(t,n){super(n),this.url=t,y1(this,n)}toString(){return GI(this._root)}}function y1(r,t){t.value._routerState=r,t.children.forEach(n=>y1(r,n))}function GI(r){const t=r.children.length>0?` { ${r.children.map(GI).join(", ")} } `:"";return`${r.value}${t}`}function v1(r){if(r.snapshot){const t=r.snapshot,n=r._futureSnapshot;r.snapshot=n,Sa(t.queryParams,n.queryParams)||r.queryParamsSubject.next(n.queryParams),t.fragment!==n.fragment&&r.fragmentSubject.next(n.fragment),Sa(t.params,n.params)||r.paramsSubject.next(n.params),function vG(r,t){if(r.length!==t.length)return!1;for(let n=0;n<r.length;++n)if(!Sa(r[n],t[n]))return!1;return!0}(t.url,n.url)||r.urlSubject.next(n.url),Sa(t.data,n.data)||r.dataSubject.next(n.data)}else r.snapshot=r._futureSnapshot,r.dataSubject.next(r._futureSnapshot.data)}function b1(r,t){const n=Sa(r.params,t.params)&&function wG(r,t){return Mc(r,t)&&r.every((n,i)=>Sa(n.parameters,t[i].parameters))}(r.url,t.url);return n&&!(!r.parent!=!t.parent)&&(!r.parent||b1(r.parent,t.parent))}let HI=(()=>{class r{constructor(){this.activated=null,this._activatedRoute=null,this.name=lr,this.activateEvents=new Mi,this.deactivateEvents=new Mi,this.attachEvents=new Mi,this.detachEvents=new Mi,this.parentContexts=_e(Nf),this.location=_e(na),this.changeDetector=_e(Xm),this.environmentInjector=_e(go),this.inputBinder=_e(Ug,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(n){if(n.name){const{firstChange:i,previousValue:s}=n.name;if(i)return;this.isTrackedInParentContexts(s)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(s)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(n){return this.parentContexts.getContext(n)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const n=this.parentContexts.getContext(this.name);n?.route&&(n.attachRef?this.attach(n.attachRef,n.route):this.activateWith(n.route,n.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new jt(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new jt(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new jt(4012,!1);this.location.detach();const n=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(n.instance),n}attach(n,i){this.activated=n,this._activatedRoute=i,this.location.insert(n.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(n.instance)}deactivate(){if(this.activated){const n=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(n)}}activateWith(n,i){if(this.isActivated)throw new jt(4013,!1);this._activatedRoute=n;const s=this.location,a=n.snapshot.component,c=this.parentContexts.getOrCreateContext(this.name).children,u=new rH(n,c,s.injector);this.activated=s.createComponent(a,{index:s.length,injector:u,environmentInjector:i??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static{this.\u0275fac=function(i){return new(i||r)}}static{this.\u0275dir=Kn({type:r,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[Lo]})}}return r})();class rH{constructor(t,n,i){this.route=t,this.childContexts=n,this.parent=i}get(t,n){return t===xd?this.route:t===Nf?this.childContexts:this.parent.get(t,n)}}const Ug=new hn("");let WI=(()=>{class r{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(n){this.unsubscribeFromRouteData(n),this.subscribeToRouteData(n)}unsubscribeFromRouteData(n){this.outletDataSubscriptions.get(n)?.unsubscribe(),this.outletDataSubscriptions.delete(n)}subscribeToRouteData(n){const{activatedRoute:i}=n,s=i1([i.queryParams,i.params,i.data]).pipe(eo(([o,a,c],u)=>(c={...o,...a,...c},0===u?Un(c):Promise.resolve(c)))).subscribe(o=>{if(!n.isActivated||!n.activatedComponentRef||n.activatedRoute!==i||null===i.component)return void this.unsubscribeFromRouteData(n);const a=function sV(r){const t=Ar(r);if(!t)return null;const n=new Zh(t);return{get selector(){return n.selector},get type(){return n.componentType},get inputs(){return n.inputs},get outputs(){return n.outputs},get ngContentSelectors(){return n.ngContentSelectors},get isStandalone(){return t.standalone},get isSignal(){return t.signals}}}(i.component);if(a)for(const{templateName:c}of a.inputs)n.activatedComponentRef.setInput(c,o[c]);else this.unsubscribeFromRouteData(n)});this.outletDataSubscriptions.set(n,s)}static{this.\u0275fac=function(i){return new(i||r)}}static{this.\u0275prov=Dn({token:r,factory:r.\u0275fac})}}return r})();function kf(r,t,n){if(n&&r.shouldReuseRoute(t.value,n.value.snapshot)){const i=n.value;i._futureSnapshot=t.value;const s=function sH(r,t,n){return t.children.map(i=>{for(const s of n.children)if(r.shouldReuseRoute(i.value,s.value.snapshot))return kf(r,i,s);return kf(r,i)})}(r,t,n);return new Xa(i,s)}{if(r.shouldAttach(t.value)){const o=r.retrieve(t.value);if(null!==o){const a=o.route;return a.value._futureSnapshot=t.value,a.children=t.children.map(c=>kf(r,c)),a}}const i=function oH(r){return new xd(new Es(r.url),new Es(r.params),new Es(r.queryParams),new Es(r.fragment),new Es(r.data),r.outlet,r.component,r)}(t.value),s=t.children.map(o=>kf(r,o));return new Xa(i,s)}}const _1="ngNavigationCancelingError";function qI(r,t){const{redirectTo:n,navigationBehaviorOptions:i}=Ec(t)?{redirectTo:t,navigationBehaviorOptions:void 0}:t,s=$I(!1,0,t);return s.url=n,s.navigationBehaviorOptions=i,s}function $I(r,t,n){const i=new Error("NavigationCancelingError: "+(r||""));return i[_1]=!0,i.cancellationCode=t,n&&(i.url=n),i}function XI(r){return r&&r[_1]}let YI=(()=>{class r{static{this.\u0275fac=function(i){return new(i||r)}}static{this.\u0275cmp=Cp({type:r,selectors:[["ng-component"]],standalone:!0,features:[Cb],decls:1,vars:0,template:function(i,s){1&i&&_s(0,"router-outlet")},dependencies:[HI],encapsulation:2})}}return r})();function x1(r){const t=r.children&&r.children.map(x1),n=t?{...r,children:t}:{...r};return!n.component&&!n.loadComponent&&(t||n.loadChildren)&&n.outlet&&n.outlet!==lr&&(n.component=YI),n}function oa(r){return r.outlet||lr}function Ff(r){if(!r)return null;if(r.routeConfig?._injector)return r.routeConfig._injector;for(let t=r.parent;t;t=t.parent){const n=t.routeConfig;if(n?._loadedInjector)return n._loadedInjector;if(n?._injector)return n._injector}return null}class pH{constructor(t,n,i,s,o){this.routeReuseStrategy=t,this.futureState=n,this.currState=i,this.forwardEvent=s,this.inputBindingEnabled=o}activate(t){const n=this.futureState._root,i=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,i,t),v1(this.futureState.root),this.activateChildRoutes(n,i,t)}deactivateChildRoutes(t,n,i){const s=_d(n);t.children.forEach(o=>{const a=o.value.outlet;this.deactivateRoutes(o,s[a],i),delete s[a]}),Object.values(s).forEach(o=>{this.deactivateRouteAndItsChildren(o,i)})}deactivateRoutes(t,n,i){const s=t.value,o=n?n.value:null;if(s===o)if(s.component){const a=i.getContext(s.outlet);a&&this.deactivateChildRoutes(t,n,a.children)}else this.deactivateChildRoutes(t,n,i);else o&&this.deactivateRouteAndItsChildren(n,i)}deactivateRouteAndItsChildren(t,n){t.value.component&&this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,n):this.deactivateRouteAndOutlet(t,n)}detachAndStoreRouteSubtree(t,n){const i=n.getContext(t.value.outlet),s=i&&t.value.component?i.children:n,o=_d(t);for(const a of Object.keys(o))this.deactivateRouteAndItsChildren(o[a],s);if(i&&i.outlet){const a=i.outlet.detach(),c=i.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:a,route:t,contexts:c})}}deactivateRouteAndOutlet(t,n){const i=n.getContext(t.value.outlet),s=i&&t.value.component?i.children:n,o=_d(t);for(const a of Object.keys(o))this.deactivateRouteAndItsChildren(o[a],s);i&&(i.outlet&&(i.outlet.deactivate(),i.children.onOutletDeactivated()),i.attachRef=null,i.route=null)}activateChildRoutes(t,n,i){const s=_d(n);t.children.forEach(o=>{this.activateRoutes(o,s[o.value.outlet],i),this.forwardEvent(new QG(o.value.snapshot))}),t.children.length&&this.forwardEvent(new KG(t.value.snapshot))}activateRoutes(t,n,i){const s=t.value,o=n?n.value:null;if(v1(s),s===o)if(s.component){const a=i.getOrCreateContext(s.outlet);this.activateChildRoutes(t,n,a.children)}else this.activateChildRoutes(t,n,i);else if(s.component){const a=i.getOrCreateContext(s.outlet);if(this.routeReuseStrategy.shouldAttach(s.snapshot)){const c=this.routeReuseStrategy.retrieve(s.snapshot);this.routeReuseStrategy.store(s.snapshot,null),a.children.onOutletReAttached(c.contexts),a.attachRef=c.componentRef,a.route=c.route.value,a.outlet&&a.outlet.attach(c.componentRef,c.route.value),v1(c.route.value),this.activateChildRoutes(t,null,a.children)}else{const c=Ff(s.snapshot);a.attachRef=null,a.route=s,a.injector=c,a.outlet&&a.outlet.activateWith(s,a.injector),this.activateChildRoutes(t,null,a.children)}}else this.activateChildRoutes(t,null,i)}}class ZI{constructor(t){this.path=t,this.route=this.path[this.path.length-1]}}class Bg{constructor(t,n){this.component=t,this.route=n}}function mH(r,t,n){const i=r._root;return Uf(i,t?t._root:null,n,[i.value])}function wd(r,t){const n=Symbol(),i=t.get(r,n);return i===n?"function"!=typeof r||function wp(r){return null!==tc(r)}(r)?t.get(r):r:i}function Uf(r,t,n,i,s={canDeactivateChecks:[],canActivateChecks:[]}){const o=_d(t);return r.children.forEach(a=>{(function yH(r,t,n,i,s={canDeactivateChecks:[],canActivateChecks:[]}){const o=r.value,a=t?t.value:null,c=n?n.getContext(r.value.outlet):null;if(a&&o.routeConfig===a.routeConfig){const u=function vH(r,t,n){if("function"==typeof n)return n(r,t);switch(n){case"pathParamsChange":return!Mc(r.url,t.url);case"pathParamsOrQueryParamsChange":return!Mc(r.url,t.url)||!Sa(r.queryParams,t.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!b1(r,t)||!Sa(r.queryParams,t.queryParams);default:return!b1(r,t)}}(a,o,o.routeConfig.runGuardsAndResolvers);u?s.canActivateChecks.push(new ZI(i)):(o.data=a.data,o._resolvedData=a._resolvedData),Uf(r,t,o.component?c?c.children:null:n,i,s),u&&c&&c.outlet&&c.outlet.isActivated&&s.canDeactivateChecks.push(new Bg(c.outlet.component,a))}else a&&Bf(t,c,s),s.canActivateChecks.push(new ZI(i)),Uf(r,null,o.component?c?c.children:null:n,i,s)})(a,o[a.value.outlet],n,i.concat([a.value]),s),delete o[a.value.outlet]}),Object.entries(o).forEach(([a,c])=>Bf(c,n.getContext(a),s)),s}function Bf(r,t,n){const i=_d(r),s=r.value;Object.entries(i).forEach(([o,a])=>{Bf(a,s.component?t?t.children.getContext(o):null:t,n)}),n.canDeactivateChecks.push(new Bg(s.component&&t&&t.outlet&&t.outlet.isActivated?t.outlet.component:null,s))}function Vf(r){return"function"==typeof r}function KI(r){return r instanceof Ag||"EmptyError"===r?.name}const Vg=Symbol("INITIAL_VALUE");function Sd(){return eo(r=>i1(r.map(t=>t.pipe(gd(1),function cG(...r){const t=rn(r);return $((n,i)=>{(t?s1(r,n,t):s1(r,n)).subscribe(i)})}(Vg)))).pipe(te(t=>{for(const n of t)if(!0!==n){if(n===Vg)return Vg;if(!1===n||n instanceof vd)return n}return!0}),$a(t=>t!==Vg),gd(1)))}function JI(r){return function k(...r){return Z(r)}(Ps(t=>{if(Ec(t))throw qI(0,t)}),te(t=>!0===t))}class zg{constructor(t){this.segmentGroup=t||null}}class QI{constructor(t){this.urlTree=t}}function Md(r){return Tf(new zg(r))}function eP(r){return Tf(new QI(r))}class FH{constructor(t,n){this.urlSerializer=t,this.urlTree=n}noMatchError(t){return new jt(4002,!1)}lineralizeSegments(t,n){let i=[],s=n.root;for(;;){if(i=i.concat(s.segments),0===s.numberOfChildren)return Un(i);if(s.numberOfChildren>1||!s.children[lr])return Tf(new jt(4e3,!1));s=s.children[lr]}}applyRedirectCommands(t,n,i){return this.applyRedirectCreateUrlTree(n,this.urlSerializer.parse(n),t,i)}applyRedirectCreateUrlTree(t,n,i,s){const o=this.createSegmentGroup(t,n.root,i,s);return new vd(o,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(t,n){const i={};return Object.entries(t).forEach(([s,o])=>{if("string"==typeof o&&o.startsWith(":")){const c=o.substring(1);i[s]=n[c]}else i[s]=o}),i}createSegmentGroup(t,n,i,s){const o=this.createSegments(t,n.segments,i,s);let a={};return Object.entries(n.children).forEach(([c,u])=>{a[c]=this.createSegmentGroup(t,u,i,s)}),new Kr(o,a)}createSegments(t,n,i,s){return n.map(o=>o.path.startsWith(":")?this.findPosParam(t,o,s):this.findOrReturn(o,i))}findPosParam(t,n,i){const s=i[n.path.substring(1)];if(!s)throw new jt(4001,!1);return s}findOrReturn(t,n){let i=0;for(const s of n){if(s.path===t.path)return n.splice(i),s;i++}return t}}const w1={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function UH(r,t,n,i,s){const o=S1(r,t,n);return o.matched?(i=function lH(r,t){return r.providers&&!r._injector&&(r._injector=Eb(r.providers,t,`Route: ${r.path}`)),r._injector??t}(t,i),function jH(r,t,n,i){const s=t.canMatch;return s&&0!==s.length?Un(s.map(a=>{const c=wd(a,r);return Ol(function MH(r){return r&&Vf(r.canMatch)}(c)?c.canMatch(t,n):r.runInContext(()=>c(t,n)))})).pipe(Sd(),JI()):Un(!0)}(i,t,n).pipe(te(a=>!0===a?o:{...w1}))):Un(o)}function S1(r,t,n){if(""===t.path)return"full"===t.pathMatch&&(r.hasChildren()||n.length>0)?{...w1}:{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};const s=(t.matcher||yG)(n,r,t);if(!s)return{...w1};const o={};Object.entries(s.posParams??{}).forEach(([c,u])=>{o[c]=u.path});const a=s.consumed.length>0?{...o,...s.consumed[s.consumed.length-1].parameters}:o;return{matched:!0,consumedSegments:s.consumed,remainingSegments:n.slice(s.consumed.length),parameters:a,positionalParamSegments:s.posParams??{}}}function tP(r,t,n,i){return n.length>0&&function zH(r,t,n){return n.some(i=>Gg(r,t,i)&&oa(i)!==lr)}(r,n,i)?{segmentGroup:new Kr(t,VH(i,new Kr(n,r.children))),slicedSegments:[]}:0===n.length&&function GH(r,t,n){return n.some(i=>Gg(r,t,i))}(r,n,i)?{segmentGroup:new Kr(r.segments,BH(r,0,n,i,r.children)),slicedSegments:n}:{segmentGroup:new Kr(r.segments,r.children),slicedSegments:n}}function BH(r,t,n,i,s){const o={};for(const a of i)if(Gg(r,n,a)&&!s[oa(a)]){const c=new Kr([],{});o[oa(a)]=c}return{...s,...o}}function VH(r,t){const n={};n[lr]=t;for(const i of r)if(""===i.path&&oa(i)!==lr){const s=new Kr([],{});n[oa(i)]=s}return n}function Gg(r,t,n){return(!(r.hasChildren()||t.length>0)||"full"!==n.pathMatch)&&""===n.path}class $H{constructor(t,n,i,s,o,a,c){this.injector=t,this.configLoader=n,this.rootComponentType=i,this.config=s,this.urlTree=o,this.paramsInheritanceStrategy=a,this.urlSerializer=c,this.allowRedirects=!0,this.applyRedirects=new FH(this.urlSerializer,this.urlTree)}noMatchError(t){return new jt(4002,!1)}recognize(){const t=tP(this.urlTree.root,[],[],this.config).segmentGroup;return this.processSegmentGroup(this.injector,this.config,t,lr).pipe(Sc(n=>{if(n instanceof QI)return this.allowRedirects=!1,this.urlTree=n.urlTree,this.match(n.urlTree);throw n instanceof zg?this.noMatchError(n):n}),te(n=>{const i=new Fg([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},lr,this.rootComponentType,null,{}),s=new Xa(i,n),o=new zI("",s),a=function kG(r,t,n=null,i=null){return II(DI(r),t,n,i)}(i,[],this.urlTree.queryParams,this.urlTree.fragment);return a.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(a),this.inheritParamsAndData(o._root),{state:o,tree:a}}))}match(t){return this.processSegmentGroup(this.injector,this.config,t.root,lr).pipe(Sc(i=>{throw i instanceof zg?this.noMatchError(i):i}))}inheritParamsAndData(t){const n=t.value,i=VI(n,this.paramsInheritanceStrategy);n.params=Object.freeze(i.params),n.data=Object.freeze(i.data),t.children.forEach(s=>this.inheritParamsAndData(s))}processSegmentGroup(t,n,i,s){return 0===i.segments.length&&i.hasChildren()?this.processChildren(t,n,i):this.processSegment(t,n,i,i.segments,s,!0)}processChildren(t,n,i){const s=[];for(const o of Object.keys(i.children))"primary"===o?s.unshift(o):s.push(o);return si(s).pipe(fd(o=>{const a=i.children[o],c=function hH(r,t){const n=r.filter(i=>oa(i)===t);return n.push(...r.filter(i=>oa(i)!==t)),n}(n,o);return this.processSegmentGroup(t,c,a,o)}),function hG(r,t){return $(function dG(r,t,n,i,s){return(o,a)=>{let c=n,u=t,_=0;o.subscribe(P(a,A=>{const O=_++;u=c?r(u,A,O):(c=!0,A),i&&a.next(u)},s&&(()=>{c&&a.next(u),a.complete()})))}}(r,t,arguments.length>=2,!0))}((o,a)=>(o.push(...a),o)),Dg(null),function fG(r,t){const n=arguments.length>=2;return i=>i.pipe(r?$a((s,o)=>r(s,o,i)):q,a1(1),n?Dg(t):gI(()=>new Ag))}(),xt(o=>{if(null===o)return Md(i);const a=nP(o);return function XH(r){r.sort((t,n)=>t.value.outlet===lr?-1:n.value.outlet===lr?1:t.value.outlet.localeCompare(n.value.outlet))}(a),Un(a)}))}processSegment(t,n,i,s,o,a){return si(n).pipe(fd(c=>this.processSegmentAgainstRoute(c._injector??t,n,c,i,s,o,a).pipe(Sc(u=>{if(u instanceof zg)return Un(null);throw u}))),wc(c=>!!c),Sc(c=>{if(KI(c))return function WH(r,t,n){return 0===t.length&&!r.children[n]}(i,s,o)?Un([]):Md(i);throw c}))}processSegmentAgainstRoute(t,n,i,s,o,a,c){return function HH(r,t,n,i){return!!(oa(r)===i||i!==lr&&Gg(t,n,r))&&("**"===r.path||S1(t,r,n).matched)}(i,s,o,a)?void 0===i.redirectTo?this.matchSegmentAgainstRoute(t,s,i,o,a,c):c&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(t,s,n,i,o,a):Md(s):Md(s)}expandSegmentAgainstRouteUsingRedirect(t,n,i,s,o,a){return"**"===s.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(t,i,s,a):this.expandRegularSegmentAgainstRouteUsingRedirect(t,n,i,s,o,a)}expandWildCardWithParamsAgainstRouteUsingRedirect(t,n,i,s){const o=this.applyRedirects.applyRedirectCommands([],i.redirectTo,{});return i.redirectTo.startsWith("/")?eP(o):this.applyRedirects.lineralizeSegments(i,o).pipe(xt(a=>{const c=new Kr(a,{});return this.processSegment(t,n,c,a,s,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(t,n,i,s,o,a){const{matched:c,consumedSegments:u,remainingSegments:_,positionalParamSegments:A}=S1(n,s,o);if(!c)return Md(n);const O=this.applyRedirects.applyRedirectCommands(u,s.redirectTo,A);return s.redirectTo.startsWith("/")?eP(O):this.applyRedirects.lineralizeSegments(s,O).pipe(xt(B=>this.processSegment(t,i,n,B.concat(_),a,!1)))}matchSegmentAgainstRoute(t,n,i,s,o,a){let c;if("**"===i.path){const u=s.length>0?vI(s).parameters:{};c=Un({snapshot:new Fg(s,u,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,rP(i),oa(i),i.component??i._loadedComponent??null,i,iP(i)),consumedSegments:[],remainingSegments:[]}),n.children={}}else c=UH(n,i,s,t).pipe(te(({matched:u,consumedSegments:_,remainingSegments:A,parameters:O})=>u?{snapshot:new Fg(_,O,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,rP(i),oa(i),i.component??i._loadedComponent??null,i,iP(i)),consumedSegments:_,remainingSegments:A}:null));return c.pipe(eo(u=>null===u?Md(n):this.getChildConfig(t=i._injector??t,i,s).pipe(eo(({routes:_})=>{const A=i._loadedInjector??t,{snapshot:O,consumedSegments:B,remainingSegments:G}=u,{segmentGroup:Y,slicedSegments:ne}=tP(n,B,G,_);if(0===ne.length&&Y.hasChildren())return this.processChildren(A,_,Y).pipe(te(Q=>null===Q?null:[new Xa(O,Q)]));if(0===_.length&&0===ne.length)return Un([new Xa(O,[])]);const ee=oa(i)===o;return this.processSegment(A,_,Y,ne,ee?lr:o,!0).pipe(te(Q=>[new Xa(O,Q)]))}))))}getChildConfig(t,n,i){return n.children?Un({routes:n.children,injector:t}):n.loadChildren?void 0!==n._loadedRoutes?Un({routes:n._loadedRoutes,injector:n._loadedInjector}):function LH(r,t,n,i){const s=t.canLoad;return void 0===s||0===s.length?Un(!0):Un(s.map(a=>{const c=wd(a,r);return Ol(function _H(r){return r&&Vf(r.canLoad)}(c)?c.canLoad(t,n):r.runInContext(()=>c(t,n)))})).pipe(Sd(),JI())}(t,n,i).pipe(xt(s=>s?this.configLoader.loadChildren(t,n).pipe(Ps(o=>{n._loadedRoutes=o.routes,n._loadedInjector=o.injector})):function kH(r){return Tf($I(!1,3))}())):Un({routes:[],injector:t})}}function YH(r){const t=r.value.routeConfig;return t&&""===t.path}function nP(r){const t=[],n=new Set;for(const i of r){if(!YH(i)){t.push(i);continue}const s=t.find(o=>i.value.routeConfig===o.value.routeConfig);void 0!==s?(s.children.push(...i.children),n.add(s)):t.push(i)}for(const i of n){const s=nP(i.children);t.push(new Xa(i.value,s))}return t.filter(i=>!n.has(i))}function rP(r){return r.data||{}}function iP(r){return r.resolve||{}}function sP(r){return"string"==typeof r.title||null===r.title}function M1(r){return eo(t=>{const n=r(t);return n?si(n).pipe(te(()=>t)):Un(t)})}const Ed=new hn("ROUTES");let E1=(()=>{class r{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=_e(yT)}loadComponent(n){if(this.componentLoaders.get(n))return this.componentLoaders.get(n);if(n._loadedComponent)return Un(n._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(n);const i=Ol(n.loadComponent()).pipe(te(oP),Ps(o=>{this.onLoadEndListener&&this.onLoadEndListener(n),n._loadedComponent=o}),Mf(()=>{this.componentLoaders.delete(n)})),s=new mI(i,()=>new le).pipe(o1());return this.componentLoaders.set(n,s),s}loadChildren(n,i){if(this.childrenLoaders.get(i))return this.childrenLoaders.get(i);if(i._loadedRoutes)return Un({routes:i._loadedRoutes,injector:i._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(i);const o=function n9(r,t,n,i){return Ol(r.loadChildren()).pipe(te(oP),xt(s=>s instanceof S2||Array.isArray(s)?Un(s):si(t.compileModuleAsync(s))),te(s=>{i&&i(r);let o,a,c=!1;return Array.isArray(s)?(a=s,!0):(o=s.create(n).injector,a=o.get(Ed,[],{optional:!0,self:!0}).flat()),{routes:a.map(x1),injector:o}}))}(i,this.compiler,n,this.onLoadEndListener).pipe(Mf(()=>{this.childrenLoaders.delete(i)})),a=new mI(o,()=>new le).pipe(o1());return this.childrenLoaders.set(i,a),a}static{this.\u0275fac=function(i){return new(i||r)}}static{this.\u0275prov=Dn({token:r,factory:r.\u0275fac,providedIn:"root"})}}return r})();function oP(r){return function r9(r){return r&&"object"==typeof r&&"default"in r}(r)?r.default:r}let Hg=(()=>{class r{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new le,this.transitionAbortSubject=new le,this.configLoader=_e(E1),this.environmentInjector=_e(go),this.urlSerializer=_e(If),this.rootContexts=_e(Nf),this.inputBindingEnabled=null!==_e(Ug,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>Un(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=s=>this.events.next(new YG(s)),this.configLoader.onLoadStartListener=s=>this.events.next(new XG(s))}complete(){this.transitions?.complete()}handleNavigationRequest(n){const i=++this.navigationId;this.transitions?.next({...this.transitions.value,...n,id:i})}setupNavigations(n,i,s){return this.transitions=new Es({id:0,currentUrlTree:i,currentRawUrl:i,currentBrowserUrl:i,extractedUrl:n.urlHandlingStrategy.extract(i),urlAfterRedirects:n.urlHandlingStrategy.extract(i),rawUrl:i,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:Lf,restoredState:null,currentSnapshot:s.snapshot,targetSnapshot:null,currentRouterState:s,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe($a(o=>0!==o.id),te(o=>({...o,extractedUrl:n.urlHandlingStrategy.extract(o.rawUrl)})),eo(o=>{this.currentTransition=o;let a=!1,c=!1;return Un(o).pipe(Ps(u=>{this.currentNavigation={id:u.id,initialUrl:u.rawUrl,extractedUrl:u.extractedUrl,trigger:u.source,extras:u.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),eo(u=>{const _=u.currentBrowserUrl.toString(),A=!n.navigated||u.extractedUrl.toString()!==_||_!==u.currentUrlTree.toString();if(!A&&"reload"!==(u.extras.onSameUrlNavigation??n.onSameUrlNavigation)){const B="";return this.events.next(new bd(u.id,this.urlSerializer.serialize(u.rawUrl),B,0)),u.resolve(null),St}if(n.urlHandlingStrategy.shouldProcessUrl(u.rawUrl))return Un(u).pipe(eo(B=>{const G=this.transitions?.getValue();return this.events.next(new Ng(B.id,this.urlSerializer.serialize(B.extractedUrl),B.source,B.restoredState)),G!==this.transitions?.getValue()?St:Promise.resolve(B)}),function ZH(r,t,n,i,s,o){return xt(a=>function qH(r,t,n,i,s,o,a="emptyOnly"){return new $H(r,t,n,i,s,a,o).recognize()}(r,t,n,i,a.extractedUrl,s,o).pipe(te(({state:c,tree:u})=>({...a,targetSnapshot:c,urlAfterRedirects:u}))))}(this.environmentInjector,this.configLoader,this.rootComponentType,n.config,this.urlSerializer,n.paramsInheritanceStrategy),Ps(B=>{o.targetSnapshot=B.targetSnapshot,o.urlAfterRedirects=B.urlAfterRedirects,this.currentNavigation={...this.currentNavigation,finalUrl:B.urlAfterRedirects};const G=new NI(B.id,this.urlSerializer.serialize(B.extractedUrl),this.urlSerializer.serialize(B.urlAfterRedirects),B.targetSnapshot);this.events.next(G)}));if(A&&n.urlHandlingStrategy.shouldProcessUrl(u.currentRawUrl)){const{id:B,extractedUrl:G,source:Y,restoredState:ne,extras:ee}=u,Q=new Ng(B,this.urlSerializer.serialize(G),Y,ne);this.events.next(Q);const ue=BI(0,this.rootComponentType).snapshot;return this.currentTransition=o={...u,targetSnapshot:ue,urlAfterRedirects:G,extras:{...ee,skipLocationChange:!1,replaceUrl:!1}},Un(o)}{const B="";return this.events.next(new bd(u.id,this.urlSerializer.serialize(u.extractedUrl),B,1)),u.resolve(null),St}}),Ps(u=>{const _=new HG(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(_)}),te(u=>(this.currentTransition=o={...u,guards:mH(u.targetSnapshot,u.currentSnapshot,this.rootContexts)},o)),function CH(r,t){return xt(n=>{const{targetSnapshot:i,currentSnapshot:s,guards:{canActivateChecks:o,canDeactivateChecks:a}}=n;return 0===a.length&&0===o.length?Un({...n,guardsResult:!0}):function TH(r,t,n,i){return si(r).pipe(xt(s=>function OH(r,t,n,i,s){const o=t&&t.routeConfig?t.routeConfig.canDeactivate:null;return o&&0!==o.length?Un(o.map(c=>{const u=Ff(t)??s,_=wd(c,u);return Ol(function SH(r){return r&&Vf(r.canDeactivate)}(_)?_.canDeactivate(r,t,n,i):u.runInContext(()=>_(r,t,n,i))).pipe(wc())})).pipe(Sd()):Un(!0)}(s.component,s.route,n,t,i)),wc(s=>!0!==s,!0))}(a,i,s,r).pipe(xt(c=>c&&function bH(r){return"boolean"==typeof r}(c)?function AH(r,t,n,i){return si(t).pipe(fd(s=>s1(function IH(r,t){return null!==r&&t&&t(new ZG(r)),Un(!0)}(s.route.parent,i),function DH(r,t){return null!==r&&t&&t(new JG(r)),Un(!0)}(s.route,i),function RH(r,t,n){const i=t[t.length-1],o=t.slice(0,t.length-1).reverse().map(a=>function gH(r){const t=r.routeConfig?r.routeConfig.canActivateChild:null;return t&&0!==t.length?{node:r,guards:t}:null}(a)).filter(a=>null!==a).map(a=>pI(()=>Un(a.guards.map(u=>{const _=Ff(a.node)??n,A=wd(u,_);return Ol(function wH(r){return r&&Vf(r.canActivateChild)}(A)?A.canActivateChild(i,r):_.runInContext(()=>A(i,r))).pipe(wc())})).pipe(Sd())));return Un(o).pipe(Sd())}(r,s.path,n),function PH(r,t,n){const i=t.routeConfig?t.routeConfig.canActivate:null;if(!i||0===i.length)return Un(!0);const s=i.map(o=>pI(()=>{const a=Ff(t)??n,c=wd(o,a);return Ol(function xH(r){return r&&Vf(r.canActivate)}(c)?c.canActivate(t,r):a.runInContext(()=>c(t,r))).pipe(wc())}));return Un(s).pipe(Sd())}(r,s.route,n))),wc(s=>!0!==s,!0))}(i,o,r,t):Un(c)),te(c=>({...n,guardsResult:c})))})}(this.environmentInjector,u=>this.events.next(u)),Ps(u=>{if(o.guardsResult=u.guardsResult,Ec(u.guardsResult))throw qI(0,u.guardsResult);const _=new WG(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot,!!u.guardsResult);this.events.next(_)}),$a(u=>!!u.guardsResult||(this.cancelNavigationTransition(u,"",3),!1)),M1(u=>{if(u.guards.canActivateChecks.length)return Un(u).pipe(Ps(_=>{const A=new qG(_.id,this.urlSerializer.serialize(_.extractedUrl),this.urlSerializer.serialize(_.urlAfterRedirects),_.targetSnapshot);this.events.next(A)}),eo(_=>{let A=!1;return Un(_).pipe(function KH(r,t){return xt(n=>{const{targetSnapshot:i,guards:{canActivateChecks:s}}=n;if(!s.length)return Un(n);let o=0;return si(s).pipe(fd(a=>function JH(r,t,n,i){const s=r.routeConfig,o=r._resolve;return void 0!==s?.title&&!sP(s)&&(o[Af]=s.title),function QH(r,t,n,i){const s=function e9(r){return[...Object.keys(r),...Object.getOwnPropertySymbols(r)]}(r);if(0===s.length)return Un({});const o={};return si(s).pipe(xt(a=>function t9(r,t,n,i){const s=Ff(t)??i,o=wd(r,s);return Ol(o.resolve?o.resolve(t,n):s.runInContext(()=>o(t,n)))}(r[a],t,n,i).pipe(wc(),Ps(c=>{o[a]=c}))),a1(1),function pG(r){return te(()=>r)}(o),Sc(a=>KI(a)?St:Tf(a)))}(o,r,t,i).pipe(te(a=>(r._resolvedData=a,r.data=VI(r,n).resolve,s&&sP(s)&&(r.data[Af]=s.title),null)))}(a.route,i,r,t)),Ps(()=>o++),a1(1),xt(a=>o===s.length?Un(n):St))})}(n.paramsInheritanceStrategy,this.environmentInjector),Ps({next:()=>A=!0,complete:()=>{A||this.cancelNavigationTransition(_,"",2)}}))}),Ps(_=>{const A=new $G(_.id,this.urlSerializer.serialize(_.extractedUrl),this.urlSerializer.serialize(_.urlAfterRedirects),_.targetSnapshot);this.events.next(A)}))}),M1(u=>{const _=A=>{const O=[];A.routeConfig?.loadComponent&&!A.routeConfig._loadedComponent&&O.push(this.configLoader.loadComponent(A.routeConfig).pipe(Ps(B=>{A.component=B}),te(()=>{})));for(const B of A.children)O.push(..._(B));return O};return i1(_(u.targetSnapshot.root)).pipe(Dg(),gd(1))}),M1(()=>this.afterPreactivation()),te(u=>{const _=function iH(r,t,n){const i=kf(r,t._root,n?n._root:void 0);return new UI(i,t)}(n.routeReuseStrategy,u.targetSnapshot,u.currentRouterState);return this.currentTransition=o={...u,targetRouterState:_},o}),Ps(()=>{this.events.next(new f1)}),((r,t,n,i)=>te(s=>(new pH(t,s.targetRouterState,s.currentRouterState,n,i).activate(r),s)))(this.rootContexts,n.routeReuseStrategy,u=>this.events.next(u),this.inputBindingEnabled),gd(1),Ps({next:u=>{a=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Ll(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects))),n.titleStrategy?.updateTitle(u.targetRouterState.snapshot),u.resolve(!0)},complete:()=>{a=!0}}),function mG(r){return $((t,n)=>{Lr(r).subscribe(P(n,()=>n.complete(),T)),!n.closed&&t.subscribe(n)})}(this.transitionAbortSubject.pipe(Ps(u=>{throw u}))),Mf(()=>{a||c||this.cancelNavigationTransition(o,"",1),this.currentNavigation?.id===o.id&&(this.currentNavigation=null)}),Sc(u=>{if(c=!0,XI(u))this.events.next(new jf(o.id,this.urlSerializer.serialize(o.extractedUrl),u.message,u.cancellationCode)),function aH(r){return XI(r)&&Ec(r.url)}(u)?this.events.next(new p1(u.url)):o.resolve(!1);else{this.events.next(new kg(o.id,this.urlSerializer.serialize(o.extractedUrl),u,o.targetSnapshot??void 0));try{o.resolve(n.errorHandler(u))}catch(_){o.reject(_)}}return St}))}))}cancelNavigationTransition(n,i,s){const o=new jf(n.id,this.urlSerializer.serialize(n.extractedUrl),i,s);this.events.next(o),n.resolve(!1)}static{this.\u0275fac=function(i){return new(i||r)}}static{this.\u0275prov=Dn({token:r,factory:r.\u0275fac,providedIn:"root"})}}return r})();function aP(r){return r!==Lf}let lP=(()=>{class r{buildTitle(n){let i,s=n.root;for(;void 0!==s;)i=this.getResolvedTitleForRoute(s)??i,s=s.children.find(o=>o.outlet===lr);return i}getResolvedTitleForRoute(n){return n.data[Af]}static{this.\u0275fac=function(i){return new(i||r)}}static{this.\u0275prov=Dn({token:r,factory:function(){return _e(i9)},providedIn:"root"})}}return r})(),i9=(()=>{class r extends lP{constructor(n){super(),this.title=n}updateTitle(n){const i=this.buildTitle(n);void 0!==i&&this.title.setTitle(i)}static{this.\u0275fac=function(i){return new(i||r)(me(VA))}}static{this.\u0275prov=Dn({token:r,factory:r.\u0275fac,providedIn:"root"})}}return r})(),s9=(()=>{class r{static{this.\u0275fac=function(i){return new(i||r)}}static{this.\u0275prov=Dn({token:r,factory:function(){return _e(a9)},providedIn:"root"})}}return r})();class o9{shouldDetach(t){return!1}store(t,n){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,n){return t.routeConfig===n.routeConfig}}let a9=(()=>{class r extends o9{static{this.\u0275fac=function(){let n;return function(s){return(n||(n=bs(r)))(s||r)}}()}static{this.\u0275prov=Dn({token:r,factory:r.\u0275fac,providedIn:"root"})}}return r})();const Wg=new hn("",{providedIn:"root",factory:()=>({})});let l9=(()=>{class r{static{this.\u0275fac=function(i){return new(i||r)}}static{this.\u0275prov=Dn({token:r,factory:function(){return _e(c9)},providedIn:"root"})}}return r})(),c9=(()=>{class r{shouldProcessUrl(n){return!0}extract(n){return n}merge(n,i){return n}static{this.\u0275fac=function(i){return new(i||r)}}static{this.\u0275prov=Dn({token:r,factory:r.\u0275fac,providedIn:"root"})}}return r})();var zf=function(r){return r[r.COMPLETE=0]="COMPLETE",r[r.FAILED=1]="FAILED",r[r.REDIRECTING=2]="REDIRECTING",r}(zf||{});function cP(r,t){r.events.pipe($a(n=>n instanceof Ll||n instanceof jf||n instanceof kg||n instanceof bd),te(n=>n instanceof Ll||n instanceof bd?zf.COMPLETE:n instanceof jf&&(0===n.code||1===n.code)?zf.REDIRECTING:zf.FAILED),$a(n=>n!==zf.REDIRECTING),gd(1)).subscribe(()=>{t()})}function u9(r){throw r}function d9(r,t,n){return t.parse("/")}const h9={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},f9={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Uo=(()=>{class r{get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){return"computed"!==this.canceledNavigationResolution?this.currentPageId:this.location.getState()?.\u0275routerPageId??this.currentPageId}get events(){return this._events}constructor(){this.disposed=!1,this.currentPageId=0,this.console=_e(gT),this.isNgZoneEnabled=!1,this._events=new le,this.options=_e(Wg,{optional:!0})||{},this.pendingTasks=_e(Hm),this.errorHandler=this.options.errorHandler||u9,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||d9,this.navigated=!1,this.lastSuccessfulId=-1,this.urlHandlingStrategy=_e(l9),this.routeReuseStrategy=_e(s9),this.titleStrategy=_e(lP),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=_e(Ed,{optional:!0})?.flat()??[],this.navigationTransitions=_e(Hg),this.urlSerializer=_e(If),this.location=_e(o_),this.componentInputBindingEnabled=!!_e(Ug,{optional:!0}),this.eventsSubscription=new l,this.isNgZoneEnabled=_e(ci)instanceof ci&&ci.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new vd,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=BI(0,null),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe(n=>{this.lastSuccessfulId=n.id,this.currentPageId=this.browserPageId},n=>{this.console.warn(`Unhandled Navigation Error: ${n}`)}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){const n=this.navigationTransitions.events.subscribe(i=>{try{const{currentTransition:s}=this.navigationTransitions;if(null===s)return void(uP(i)&&this._events.next(i));if(i instanceof Ng)aP(s.source)&&(this.browserUrlTree=s.extractedUrl);else if(i instanceof bd)this.rawUrlTree=s.rawUrl;else if(i instanceof NI){if("eager"===this.urlUpdateStrategy){if(!s.extras.skipLocationChange){const o=this.urlHandlingStrategy.merge(s.urlAfterRedirects,s.rawUrl);this.setBrowserUrl(o,s)}this.browserUrlTree=s.urlAfterRedirects}}else if(i instanceof f1)this.currentUrlTree=s.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(s.urlAfterRedirects,s.rawUrl),this.routerState=s.targetRouterState,"deferred"===this.urlUpdateStrategy&&(s.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,s),this.browserUrlTree=s.urlAfterRedirects);else if(i instanceof jf)0!==i.code&&1!==i.code&&(this.navigated=!0),(3===i.code||2===i.code)&&this.restoreHistory(s);else if(i instanceof p1){const o=this.urlHandlingStrategy.merge(i.url,s.currentRawUrl),a={skipLocationChange:s.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||aP(s.source)};this.scheduleNavigation(o,Lf,null,a,{resolve:s.resolve,reject:s.reject,promise:s.promise})}i instanceof kg&&this.restoreHistory(s,!0),i instanceof Ll&&(this.navigated=!0),uP(i)&&this._events.next(i)}catch(s){this.navigationTransitions.transitionAbortSubject.next(s)}});this.eventsSubscription.add(n)}resetRootComponentType(n){this.routerState.root.component=n,this.navigationTransitions.rootComponentType=n}initialNavigation(){if(this.setUpLocationChangeListener(),!this.navigationTransitions.hasRequestedNavigation){const n=this.location.getState();this.navigateToSyncWithBrowser(this.location.path(!0),Lf,n)}}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(n=>{const i="popstate"===n.type?"popstate":"hashchange";"popstate"===i&&setTimeout(()=>{this.navigateToSyncWithBrowser(n.url,i,n.state)},0)}))}navigateToSyncWithBrowser(n,i,s){const o={replaceUrl:!0},a=s?.navigationId?s:null;if(s){const u={...s};delete u.navigationId,delete u.\u0275routerPageId,0!==Object.keys(u).length&&(o.state=u)}const c=this.parseUrl(n);this.scheduleNavigation(c,i,a,o)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(n){this.config=n.map(x1),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(n,i={}){const{relativeTo:s,queryParams:o,fragment:a,queryParamsHandling:c,preserveFragment:u}=i,_=u?this.currentUrlTree.fragment:a;let O,A=null;switch(c){case"merge":A={...this.currentUrlTree.queryParams,...o};break;case"preserve":A=this.currentUrlTree.queryParams;break;default:A=o||null}null!==A&&(A=this.removeEmptyProps(A));try{O=DI(s?s.snapshot:this.routerState.snapshot.root)}catch{("string"!=typeof n[0]||!n[0].startsWith("/"))&&(n=[]),O=this.currentUrlTree.root}return II(O,n,A,_??null)}navigateByUrl(n,i={skipLocationChange:!1}){const s=Ec(n)?n:this.parseUrl(n),o=this.urlHandlingStrategy.merge(s,this.rawUrlTree);return this.scheduleNavigation(o,Lf,null,i)}navigate(n,i={skipLocationChange:!1}){return function p9(r){for(let t=0;t<r.length;t++)if(null==r[t])throw new jt(4008,!1)}(n),this.navigateByUrl(this.createUrlTree(n,i),i)}serializeUrl(n){return this.urlSerializer.serialize(n)}parseUrl(n){let i;try{i=this.urlSerializer.parse(n)}catch(s){i=this.malformedUriErrorHandler(s,this.urlSerializer,n)}return i}isActive(n,i){let s;if(s=!0===i?{...h9}:!1===i?{...f9}:i,Ec(n))return _I(this.currentUrlTree,n,s);const o=this.parseUrl(n);return _I(this.currentUrlTree,o,s)}removeEmptyProps(n){return Object.keys(n).reduce((i,s)=>{const o=n[s];return null!=o&&(i[s]=o),i},{})}scheduleNavigation(n,i,s,o,a){if(this.disposed)return Promise.resolve(!1);let c,u,_;a?(c=a.resolve,u=a.reject,_=a.promise):_=new Promise((O,B)=>{c=O,u=B});const A=this.pendingTasks.add();return cP(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(A))}),this.navigationTransitions.handleNavigationRequest({source:i,restoredState:s,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,currentBrowserUrl:this.browserUrlTree,rawUrl:n,extras:o,resolve:c,reject:u,promise:_,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),_.catch(O=>Promise.reject(O))}setBrowserUrl(n,i){const s=this.urlSerializer.serialize(n);if(this.location.isCurrentPathEqualTo(s)||i.extras.replaceUrl){const a={...i.extras.state,...this.generateNgRouterState(i.id,this.browserPageId)};this.location.replaceState(s,"",a)}else{const o={...i.extras.state,...this.generateNgRouterState(i.id,this.browserPageId+1)};this.location.go(s,"",o)}}restoreHistory(n,i=!1){if("computed"===this.canceledNavigationResolution){const o=this.currentPageId-this.browserPageId;0!==o?this.location.historyGo(o):this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===o&&(this.resetState(n),this.browserUrlTree=n.currentUrlTree,this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(i&&this.resetState(n),this.resetUrlToCurrentUrlTree())}resetState(n){this.routerState=n.currentRouterState,this.currentUrlTree=n.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(n,i){return"computed"===this.canceledNavigationResolution?{navigationId:n,\u0275routerPageId:i}:{navigationId:n}}static{this.\u0275fac=function(i){return new(i||r)}}static{this.\u0275prov=Dn({token:r,factory:r.\u0275fac,providedIn:"root"})}}return r})();function uP(r){return!(r instanceof f1||r instanceof p1)}class dP{}let y9=(()=>{class r{constructor(n,i,s,o,a){this.router=n,this.injector=s,this.preloadingStrategy=o,this.loader=a}setUpPreloading(){this.subscription=this.router.events.pipe($a(n=>n instanceof Ll),fd(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(n,i){const s=[];for(const o of i){o.providers&&!o._injector&&(o._injector=Eb(o.providers,n,`Route: ${o.path}`));const a=o._injector??n,c=o._loadedInjector??a;(o.loadChildren&&!o._loadedRoutes&&void 0===o.canLoad||o.loadComponent&&!o._loadedComponent)&&s.push(this.preloadConfig(a,o)),(o.children||o._loadedRoutes)&&s.push(this.processRoutes(c,o.children??o._loadedRoutes))}return si(s).pipe(tn())}preloadConfig(n,i){return this.preloadingStrategy.preload(i,()=>{let s;s=i.loadChildren&&void 0===i.canLoad?this.loader.loadChildren(n,i):Un(null);const o=s.pipe(xt(a=>null===a?Un(void 0):(i._loadedRoutes=a.routes,i._loadedInjector=a.injector,this.processRoutes(a.injector??n,a.routes))));return i.loadComponent&&!i._loadedComponent?si([o,this.loader.loadComponent(i)]).pipe(tn()):o})}static{this.\u0275fac=function(i){return new(i||r)(me(Uo),me(yT),me(go),me(dP),me(E1))}}static{this.\u0275prov=Dn({token:r,factory:r.\u0275fac,providedIn:"root"})}}return r})();const T1=new hn("");let hP=(()=>{class r{constructor(n,i,s,o,a={}){this.urlSerializer=n,this.transitions=i,this.viewportScroller=s,this.zone=o,this.options=a,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},a.scrollPositionRestoration=a.scrollPositionRestoration||"disabled",a.anchorScrolling=a.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(n=>{n instanceof Ng?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=n.navigationTrigger,this.restoredId=n.restoredState?n.restoredState.navigationId:0):n instanceof Ll?(this.lastId=n.id,this.scheduleScrollEvent(n,this.urlSerializer.parse(n.urlAfterRedirects).fragment)):n instanceof bd&&0===n.code&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(n,this.urlSerializer.parse(n.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(n=>{n instanceof kI&&(n.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(n.position):n.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(n.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(n,i){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new kI(n,"popstate"===this.lastSource?this.store[this.restoredId]:null,i))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static{this.\u0275fac=function(i){!function uE(){throw new Error("invalid")}()}}static{this.\u0275prov=Dn({token:r,factory:r.\u0275fac})}}return r})();function Ya(r,t){return{\u0275kind:r,\u0275providers:t}}function pP(){const r=_e(vo);return t=>{const n=r.get(ld);if(t!==n.components[0])return;const i=r.get(Uo),s=r.get(mP);1===r.get(A1)&&i.initialNavigation(),r.get(gP,null,fr.Optional)?.setUpPreloading(),r.get(T1,null,fr.Optional)?.init(),i.resetRootComponentType(n.componentTypes[0]),s.closed||(s.next(),s.complete(),s.unsubscribe())}}const mP=new hn("",{factory:()=>new le}),A1=new hn("",{providedIn:"root",factory:()=>1}),gP=new hn("");function x9(r){return Ya(0,[{provide:gP,useExisting:y9},{provide:dP,useExisting:r}])}const yP=new hn("ROUTER_FORROOT_GUARD"),S9=[o_,{provide:If,useClass:l1},Uo,Nf,{provide:xd,useFactory:function fP(r){return r.routerState.root},deps:[Uo]},E1,[]];function M9(){return new MT("Router",Uo)}let vP=(()=>{class r{constructor(n){}static forRoot(n,i){return{ngModule:r,providers:[S9,[],{provide:Ed,multi:!0,useValue:n},{provide:yP,useFactory:A9,deps:[[Uo,new qp,new $p]]},{provide:Wg,useValue:i||{}},i?.useHash?{provide:vc,useClass:uV}:{provide:vc,useClass:tA},{provide:T1,useFactory:()=>{const r=_e(C6),t=_e(ci),n=_e(Wg),i=_e(Hg),s=_e(If);return n.scrollOffset&&r.setOffset(n.scrollOffset),new hP(s,i,r,t,n)}},i?.preloadingStrategy?x9(i.preloadingStrategy).\u0275providers:[],{provide:MT,multi:!0,useFactory:M9},i?.initialNavigation?D9(i):[],i?.bindToComponentInputs?Ya(8,[WI,{provide:Ug,useExisting:WI}]).\u0275providers:[],[{provide:bP,useFactory:pP},{provide:Zb,multi:!0,useExisting:bP}]]}}static forChild(n){return{ngModule:r,providers:[{provide:Ed,multi:!0,useValue:n}]}}static{this.\u0275fac=function(i){return new(i||r)(me(yP,8))}}static{this.\u0275mod=Xo({type:r})}static{this.\u0275inj=Cs({})}}return r})();function A9(r){return"guarded"}function D9(r){return["disabled"===r.initialNavigation?Ya(3,[{provide:zb,multi:!0,useFactory:()=>{const t=_e(Uo);return()=>{t.setUpLocationChangeListener()}}},{provide:A1,useValue:2}]).\u0275providers:[],"enabledBlocking"===r.initialNavigation?Ya(2,[{provide:A1,useValue:0},{provide:zb,multi:!0,deps:[vo],useFactory:t=>{const n=t.get(lV,Promise.resolve());return()=>n.then(()=>new Promise(i=>{const s=t.get(Uo),o=t.get(mP);cP(s,()=>{i(!0)}),t.get(Hg).afterPreactivation=()=>(i(!0),o.closed?Un(void 0):o),s.initialNavigation()}))}}]).\u0275providers:[]]}const bP=new hn(""),P9=[];let R9=(()=>{class r{static{this.\u0275fac=function(i){return new(i||r)}}static{this.\u0275mod=Xo({type:r})}static{this.\u0275inj=Cs({imports:[vP.forRoot(P9),vP]})}}return r})();function _P(r,t,n,i,s,o,a){try{var c=r[o](a),u=c.value}catch(_){return void n(_)}c.done?t(u):Promise.resolve(u).then(i,s)}function Cd(r){return function(){var t=this,n=arguments;return new Promise(function(i,s){var o=r.apply(t,n);function a(u){_P(o,i,s,a,c,"next",u)}function c(u){_P(o,i,s,a,c,"throw",u)}a(void 0)})}}const wP=1,j9=2,Za=3,$g=0,s7=1,o7=2,kl=0,a7=1,l7=2,c7=3,u7=4,d7=5,Fl=301,Tc=302,Gf=306,Xs=1001,Xi=1003,Yi=1006,Ac=1008,Ul=1009,Bl=1014,Ja=1015,Hf=1016,Dc=1020,Bo=1023,Ic=1026,Ad=1027,Pc=3001,us="srgb",Qa="srgb-linear",z1="display-p3",ny="display-p3-linear",ry="linear",yi="srgb",iy="rec709",sy="p3",Pd=7680,uR="300 es",el=2e3;class Vl{addEventListener(t,n){void 0===this._listeners&&(this._listeners={});const i=this._listeners;void 0===i[t]&&(i[t]=[]),-1===i[t].indexOf(n)&&i[t].push(n)}hasEventListener(t,n){if(void 0===this._listeners)return!1;const i=this._listeners;return void 0!==i[t]&&-1!==i[t].indexOf(n)}removeEventListener(t,n){if(void 0===this._listeners)return;const s=this._listeners[t];if(void 0!==s){const o=s.indexOf(n);-1!==o&&s.splice(o,1)}}dispatchEvent(t){if(void 0===this._listeners)return;const i=this._listeners[t.type];if(void 0!==i){t.target=this;const s=i.slice(0);for(let o=0,a=s.length;o<a;o++)s[o].call(this,t);t.target=null}}}const Rs=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"],Oc=Math.PI/180,Rd=180/Math.PI;function So(){const r=4294967295*Math.random()|0,t=4294967295*Math.random()|0,n=4294967295*Math.random()|0,i=4294967295*Math.random()|0;return(Rs[255&r]+Rs[r>>8&255]+Rs[r>>16&255]+Rs[r>>24&255]+"-"+Rs[255&t]+Rs[t>>8&255]+"-"+Rs[t>>16&15|64]+Rs[t>>24&255]+"-"+Rs[63&n|128]+Rs[n>>8&255]+"-"+Rs[n>>16&255]+Rs[n>>24&255]+Rs[255&i]+Rs[i>>8&255]+Rs[i>>16&255]+Rs[i>>24&255]).toLowerCase()}function Li(r,t,n){return Math.max(t,Math.min(n,r))}function Wf(r,t,n){return(1-n)*r+n*t}function W1(r){return 0==(r&r-1)&&0!==r}function ly(r){return Math.pow(2,Math.floor(Math.log(r)/Math.LN2))}function lo(r,t){switch(t.constructor){case Float32Array:return r;case Uint32Array:return r/4294967295;case Uint16Array:return r/65535;case Uint8Array:return r/255;case Int32Array:return Math.max(r/2147483647,-1);case Int16Array:return Math.max(r/32767,-1);case Int8Array:return Math.max(r/127,-1);default:throw new Error("Invalid component type.")}}function pr(r,t){switch(t.constructor){case Float32Array:return r;case Uint32Array:return Math.round(4294967295*r);case Uint16Array:return Math.round(65535*r);case Uint8Array:return Math.round(255*r);case Int32Array:return Math.round(2147483647*r);case Int16Array:return Math.round(32767*r);case Int8Array:return Math.round(127*r);default:throw new Error("Invalid component type.")}}class Lt{constructor(t=0,n=0){Lt.prototype.isVector2=!0,this.x=t,this.y=n}get width(){return this.x}set width(t){this.x=t}get height(){return this.y}set height(t){this.y=t}set(t,n){return this.x=t,this.y=n,this}setScalar(t){return this.x=t,this.y=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setComponent(t,n){switch(t){case 0:this.x=n;break;case 1:this.y=n;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y)}copy(t){return this.x=t.x,this.y=t.y,this}add(t){return this.x+=t.x,this.y+=t.y,this}addScalar(t){return this.x+=t,this.y+=t,this}addVectors(t,n){return this.x=t.x+n.x,this.y=t.y+n.y,this}addScaledVector(t,n){return this.x+=t.x*n,this.y+=t.y*n,this}sub(t){return this.x-=t.x,this.y-=t.y,this}subScalar(t){return this.x-=t,this.y-=t,this}subVectors(t,n){return this.x=t.x-n.x,this.y=t.y-n.y,this}multiply(t){return this.x*=t.x,this.y*=t.y,this}multiplyScalar(t){return this.x*=t,this.y*=t,this}divide(t){return this.x/=t.x,this.y/=t.y,this}divideScalar(t){return this.multiplyScalar(1/t)}applyMatrix3(t){const n=this.x,i=this.y,s=t.elements;return this.x=s[0]*n+s[3]*i+s[6],this.y=s[1]*n+s[4]*i+s[7],this}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this}clamp(t,n){return this.x=Math.max(t.x,Math.min(n.x,this.x)),this.y=Math.max(t.y,Math.min(n.y,this.y)),this}clampScalar(t,n){return this.x=Math.max(t,Math.min(n,this.x)),this.y=Math.max(t,Math.min(n,this.y)),this}clampLength(t,n){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(t,Math.min(n,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(t){return this.x*t.x+this.y*t.y}cross(t){return this.x*t.y-this.y*t.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(t){const n=Math.sqrt(this.lengthSq()*t.lengthSq());if(0===n)return Math.PI/2;const i=this.dot(t)/n;return Math.acos(Li(i,-1,1))}distanceTo(t){return Math.sqrt(this.distanceToSquared(t))}distanceToSquared(t){const n=this.x-t.x,i=this.y-t.y;return n*n+i*i}manhattanDistanceTo(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,n){return this.x+=(t.x-this.x)*n,this.y+=(t.y-this.y)*n,this}lerpVectors(t,n,i){return this.x=t.x+(n.x-t.x)*i,this.y=t.y+(n.y-t.y)*i,this}equals(t){return t.x===this.x&&t.y===this.y}fromArray(t,n=0){return this.x=t[n],this.y=t[n+1],this}toArray(t=[],n=0){return t[n]=this.x,t[n+1]=this.y,t}fromBufferAttribute(t,n){return this.x=t.getX(n),this.y=t.getY(n),this}rotateAround(t,n){const i=Math.cos(n),s=Math.sin(n),o=this.x-t.x,a=this.y-t.y;return this.x=o*i-a*s+t.x,this.y=o*s+a*i+t.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class yr{constructor(t,n,i,s,o,a,c,u,_){yr.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],void 0!==t&&this.set(t,n,i,s,o,a,c,u,_)}set(t,n,i,s,o,a,c,u,_){const A=this.elements;return A[0]=t,A[1]=s,A[2]=c,A[3]=n,A[4]=o,A[5]=u,A[6]=i,A[7]=a,A[8]=_,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(t){const n=this.elements,i=t.elements;return n[0]=i[0],n[1]=i[1],n[2]=i[2],n[3]=i[3],n[4]=i[4],n[5]=i[5],n[6]=i[6],n[7]=i[7],n[8]=i[8],this}extractBasis(t,n,i){return t.setFromMatrix3Column(this,0),n.setFromMatrix3Column(this,1),i.setFromMatrix3Column(this,2),this}setFromMatrix4(t){const n=t.elements;return this.set(n[0],n[4],n[8],n[1],n[5],n[9],n[2],n[6],n[10]),this}multiply(t){return this.multiplyMatrices(this,t)}premultiply(t){return this.multiplyMatrices(t,this)}multiplyMatrices(t,n){const i=t.elements,s=n.elements,o=this.elements,a=i[0],c=i[3],u=i[6],_=i[1],A=i[4],O=i[7],B=i[2],G=i[5],Y=i[8],ne=s[0],ee=s[3],Q=s[6],ue=s[1],ce=s[4],ye=s[7],Ee=s[2],Le=s[5],Fe=s[8];return o[0]=a*ne+c*ue+u*Ee,o[3]=a*ee+c*ce+u*Le,o[6]=a*Q+c*ye+u*Fe,o[1]=_*ne+A*ue+O*Ee,o[4]=_*ee+A*ce+O*Le,o[7]=_*Q+A*ye+O*Fe,o[2]=B*ne+G*ue+Y*Ee,o[5]=B*ee+G*ce+Y*Le,o[8]=B*Q+G*ye+Y*Fe,this}multiplyScalar(t){const n=this.elements;return n[0]*=t,n[3]*=t,n[6]*=t,n[1]*=t,n[4]*=t,n[7]*=t,n[2]*=t,n[5]*=t,n[8]*=t,this}determinant(){const t=this.elements,n=t[0],i=t[1],s=t[2],o=t[3],a=t[4],c=t[5],u=t[6],_=t[7],A=t[8];return n*a*A-n*c*_-i*o*A+i*c*u+s*o*_-s*a*u}invert(){const t=this.elements,n=t[0],i=t[1],s=t[2],o=t[3],a=t[4],c=t[5],u=t[6],_=t[7],A=t[8],O=A*a-c*_,B=c*u-A*o,G=_*o-a*u,Y=n*O+i*B+s*G;if(0===Y)return this.set(0,0,0,0,0,0,0,0,0);const ne=1/Y;return t[0]=O*ne,t[1]=(s*_-A*i)*ne,t[2]=(c*i-s*a)*ne,t[3]=B*ne,t[4]=(A*n-s*u)*ne,t[5]=(s*o-c*n)*ne,t[6]=G*ne,t[7]=(i*u-_*n)*ne,t[8]=(a*n-i*o)*ne,this}transpose(){let t;const n=this.elements;return t=n[1],n[1]=n[3],n[3]=t,t=n[2],n[2]=n[6],n[6]=t,t=n[5],n[5]=n[7],n[7]=t,this}getNormalMatrix(t){return this.setFromMatrix4(t).invert().transpose()}transposeIntoArray(t){const n=this.elements;return t[0]=n[0],t[1]=n[3],t[2]=n[6],t[3]=n[1],t[4]=n[4],t[5]=n[7],t[6]=n[2],t[7]=n[5],t[8]=n[8],this}setUvTransform(t,n,i,s,o,a,c){const u=Math.cos(o),_=Math.sin(o);return this.set(i*u,i*_,-i*(u*a+_*c)+a+t,-s*_,s*u,-s*(-_*a+u*c)+c+n,0,0,1),this}scale(t,n){return this.premultiply(q1.makeScale(t,n)),this}rotate(t){return this.premultiply(q1.makeRotation(-t)),this}translate(t,n){return this.premultiply(q1.makeTranslation(t,n)),this}makeTranslation(t,n){return t.isVector2?this.set(1,0,t.x,0,1,t.y,0,0,1):this.set(1,0,t,0,1,n,0,0,1),this}makeRotation(t){const n=Math.cos(t),i=Math.sin(t);return this.set(n,-i,0,i,n,0,0,0,1),this}makeScale(t,n){return this.set(t,0,0,0,n,0,0,0,1),this}equals(t){const n=this.elements,i=t.elements;for(let s=0;s<9;s++)if(n[s]!==i[s])return!1;return!0}fromArray(t,n=0){for(let i=0;i<9;i++)this.elements[i]=t[i+n];return this}toArray(t=[],n=0){const i=this.elements;return t[n]=i[0],t[n+1]=i[1],t[n+2]=i[2],t[n+3]=i[3],t[n+4]=i[4],t[n+5]=i[5],t[n+6]=i[6],t[n+7]=i[7],t[n+8]=i[8],t}clone(){return(new this.constructor).fromArray(this.elements)}}const q1=new yr;function fR(r){for(let t=r.length-1;t>=0;--t)if(r[t]>=65535)return!0;return!1}function qf(r){return document.createElementNS("http://www.w3.org/1999/xhtml",r)}function Z7(){const r=qf("canvas");return r.style.display="block",r}Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array;const pR={};function $f(r){r in pR||(pR[r]=!0,console.warn(r))}const mR=(new yr).set(.8224621,.177538,0,.0331941,.9668058,0,.0170827,.0723974,.9105199),gR=(new yr).set(1.2249401,-.2249404,0,-.0420569,1.0420571,0,-.0196376,-.0786361,1.0982735),cy={[Qa]:{transfer:ry,primaries:iy,toReference:r=>r,fromReference:r=>r},[us]:{transfer:yi,primaries:iy,toReference:r=>r.convertSRGBToLinear(),fromReference:r=>r.convertLinearToSRGB()},[ny]:{transfer:ry,primaries:sy,toReference:r=>r.applyMatrix3(gR),fromReference:r=>r.applyMatrix3(mR)},[z1]:{transfer:yi,primaries:sy,toReference:r=>r.convertSRGBToLinear().applyMatrix3(gR),fromReference:r=>r.applyMatrix3(mR).convertLinearToSRGB()}},K7=new Set([Qa,ny]),ti={enabled:!0,_workingColorSpace:Qa,get legacyMode(){return console.warn("THREE.ColorManagement: .legacyMode=false renamed to .enabled=true in r150."),!this.enabled},set legacyMode(r){console.warn("THREE.ColorManagement: .legacyMode=false renamed to .enabled=true in r150."),this.enabled=!r},get workingColorSpace(){return this._workingColorSpace},set workingColorSpace(r){if(!K7.has(r))throw new Error(`Unsupported working color space, "${r}".`);this._workingColorSpace=r},convert:function(r,t,n){return!1!==this.enabled&&t!==n&&t&&n?(0,cy[n].fromReference)((0,cy[t].toReference)(r)):r},fromWorkingColorSpace:function(r,t){return this.convert(r,this._workingColorSpace,t)},toWorkingColorSpace:function(r,t){return this.convert(r,t,this._workingColorSpace)},getPrimaries:function(r){return cy[r].primaries},getTransfer:function(r){return""===r?ry:cy[r].transfer}};function Ld(r){return r<.04045?.0773993808*r:Math.pow(.9478672986*r+.0521327014,2.4)}function $1(r){return r<.0031308?12.92*r:1.055*Math.pow(r,.41666)-.055}let jd;class yR{static getDataURL(t){if(/^data:/i.test(t.src)||typeof HTMLCanvasElement>"u")return t.src;let n;if(t instanceof HTMLCanvasElement)n=t;else{void 0===jd&&(jd=qf("canvas")),jd.width=t.width,jd.height=t.height;const i=jd.getContext("2d");t instanceof ImageData?i.putImageData(t,0,0):i.drawImage(t,0,0,t.width,t.height),n=jd}return n.width>2048||n.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",t),n.toDataURL("image/jpeg",.6)):n.toDataURL("image/png")}static sRGBToLinear(t){if(typeof HTMLImageElement<"u"&&t instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&t instanceof ImageBitmap){const n=qf("canvas");n.width=t.width,n.height=t.height;const i=n.getContext("2d");i.drawImage(t,0,0,t.width,t.height);const s=i.getImageData(0,0,t.width,t.height),o=s.data;for(let a=0;a<o.length;a++)o[a]=255*Ld(o[a]/255);return i.putImageData(s,0,0),n}if(t.data){const n=t.data.slice(0);for(let i=0;i<n.length;i++)n[i]=n instanceof Uint8Array||n instanceof Uint8ClampedArray?Math.floor(255*Ld(n[i]/255)):Ld(n[i]);return{data:n,width:t.width,height:t.height}}return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),t}}let J7=0;class Nd{constructor(t=null){this.isSource=!0,Object.defineProperty(this,"id",{value:J7++}),this.uuid=So(),this.data=t,this.version=0}set needsUpdate(t){!0===t&&this.version++}toJSON(t){const n=void 0===t||"string"==typeof t;if(!n&&void 0!==t.images[this.uuid])return t.images[this.uuid];const i={uuid:this.uuid,url:""},s=this.data;if(null!==s){let o;if(Array.isArray(s)){o=[];for(let a=0,c=s.length;a<c;a++)o.push(X1(s[a].isDataTexture?s[a].image:s[a]))}else o=X1(s);i.url=o}return n||(t.images[this.uuid]=i),i}}function X1(r){return typeof HTMLImageElement<"u"&&r instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&r instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&r instanceof ImageBitmap?yR.getDataURL(r):r.data?{data:Array.from(r.data),width:r.width,height:r.height,type:r.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let Q7=0,Mo=(()=>{class r extends Vl{constructor(n=r.DEFAULT_IMAGE,i=r.DEFAULT_MAPPING,s=Xs,o=Xs,a=Yi,c=Ac,u=Bo,_=Ul,A=r.DEFAULT_ANISOTROPY,O=""){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:Q7++}),this.uuid=So(),this.name="",this.source=new Nd(n),this.mipmaps=[],this.mapping=i,this.channel=0,this.wrapS=s,this.wrapT=o,this.magFilter=a,this.minFilter=c,this.anisotropy=A,this.format=u,this.internalFormat=null,this.type=_,this.offset=new Lt(0,0),this.repeat=new Lt(1,1),this.center=new Lt(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new yr,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,"string"==typeof O?this.colorSpace=O:($f("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace=O===Pc?us:""),this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(n=null){this.source.data=n}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return(new this.constructor).copy(this)}copy(n){return this.name=n.name,this.source=n.source,this.mipmaps=n.mipmaps.slice(0),this.mapping=n.mapping,this.channel=n.channel,this.wrapS=n.wrapS,this.wrapT=n.wrapT,this.magFilter=n.magFilter,this.minFilter=n.minFilter,this.anisotropy=n.anisotropy,this.format=n.format,this.internalFormat=n.internalFormat,this.type=n.type,this.offset.copy(n.offset),this.repeat.copy(n.repeat),this.center.copy(n.center),this.rotation=n.rotation,this.matrixAutoUpdate=n.matrixAutoUpdate,this.matrix.copy(n.matrix),this.generateMipmaps=n.generateMipmaps,this.premultiplyAlpha=n.premultiplyAlpha,this.flipY=n.flipY,this.unpackAlignment=n.unpackAlignment,this.colorSpace=n.colorSpace,this.userData=JSON.parse(JSON.stringify(n.userData)),this.needsUpdate=!0,this}toJSON(n){const i=void 0===n||"string"==typeof n;if(!i&&void 0!==n.textures[this.uuid])return n.textures[this.uuid];const s={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(n).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(s.userData=this.userData),i||(n.textures[this.uuid]=s),s}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(n){if(300!==this.mapping)return n;if(n.applyMatrix3(this.matrix),n.x<0||n.x>1)switch(this.wrapS){case 1e3:n.x=n.x-Math.floor(n.x);break;case Xs:n.x=n.x<0?0:1;break;case 1002:n.x=1===Math.abs(Math.floor(n.x)%2)?Math.ceil(n.x)-n.x:n.x-Math.floor(n.x)}if(n.y<0||n.y>1)switch(this.wrapT){case 1e3:n.y=n.y-Math.floor(n.y);break;case Xs:n.y=n.y<0?0:1;break;case 1002:n.y=1===Math.abs(Math.floor(n.y)%2)?Math.ceil(n.y)-n.y:n.y-Math.floor(n.y)}return this.flipY&&(n.y=1-n.y),n}set needsUpdate(n){!0===n&&(this.version++,this.source.needsUpdate=!0)}get encoding(){return $f("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace===us?Pc:3e3}set encoding(n){$f("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace=n===Pc?us:""}}return r.DEFAULT_IMAGE=null,r.DEFAULT_MAPPING=300,r.DEFAULT_ANISOTROPY=1,r})();class ni{constructor(t=0,n=0,i=0,s=1){ni.prototype.isVector4=!0,this.x=t,this.y=n,this.z=i,this.w=s}get width(){return this.z}set width(t){this.z=t}get height(){return this.w}set height(t){this.w=t}set(t,n,i,s){return this.x=t,this.y=n,this.z=i,this.w=s,this}setScalar(t){return this.x=t,this.y=t,this.z=t,this.w=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setZ(t){return this.z=t,this}setW(t){return this.w=t,this}setComponent(t,n){switch(t){case 0:this.x=n;break;case 1:this.y=n;break;case 2:this.z=n;break;case 3:this.w=n;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=void 0!==t.w?t.w:1,this}add(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this.w+=t.w,this}addScalar(t){return this.x+=t,this.y+=t,this.z+=t,this.w+=t,this}addVectors(t,n){return this.x=t.x+n.x,this.y=t.y+n.y,this.z=t.z+n.z,this.w=t.w+n.w,this}addScaledVector(t,n){return this.x+=t.x*n,this.y+=t.y*n,this.z+=t.z*n,this.w+=t.w*n,this}sub(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this.w-=t.w,this}subScalar(t){return this.x-=t,this.y-=t,this.z-=t,this.w-=t,this}subVectors(t,n){return this.x=t.x-n.x,this.y=t.y-n.y,this.z=t.z-n.z,this.w=t.w-n.w,this}multiply(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z,this.w*=t.w,this}multiplyScalar(t){return this.x*=t,this.y*=t,this.z*=t,this.w*=t,this}applyMatrix4(t){const n=this.x,i=this.y,s=this.z,o=this.w,a=t.elements;return this.x=a[0]*n+a[4]*i+a[8]*s+a[12]*o,this.y=a[1]*n+a[5]*i+a[9]*s+a[13]*o,this.z=a[2]*n+a[6]*i+a[10]*s+a[14]*o,this.w=a[3]*n+a[7]*i+a[11]*s+a[15]*o,this}divideScalar(t){return this.multiplyScalar(1/t)}setAxisAngleFromQuaternion(t){this.w=2*Math.acos(t.w);const n=Math.sqrt(1-t.w*t.w);return n<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=t.x/n,this.y=t.y/n,this.z=t.z/n),this}setAxisAngleFromRotationMatrix(t){let n,i,s,o;const u=t.elements,_=u[0],A=u[4],O=u[8],B=u[1],G=u[5],Y=u[9],ne=u[2],ee=u[6],Q=u[10];if(Math.abs(A-B)<.01&&Math.abs(O-ne)<.01&&Math.abs(Y-ee)<.01){if(Math.abs(A+B)<.1&&Math.abs(O+ne)<.1&&Math.abs(Y+ee)<.1&&Math.abs(_+G+Q-3)<.1)return this.set(1,0,0,0),this;n=Math.PI;const ce=(_+1)/2,ye=(G+1)/2,Ee=(Q+1)/2,Le=(A+B)/4,Fe=(O+ne)/4,Xe=(Y+ee)/4;return ce>ye&&ce>Ee?ce<.01?(i=0,s=.707106781,o=.707106781):(i=Math.sqrt(ce),s=Le/i,o=Fe/i):ye>Ee?ye<.01?(i=.707106781,s=0,o=.707106781):(s=Math.sqrt(ye),i=Le/s,o=Xe/s):Ee<.01?(i=.707106781,s=.707106781,o=0):(o=Math.sqrt(Ee),i=Fe/o,s=Xe/o),this.set(i,s,o,n),this}let ue=Math.sqrt((ee-Y)*(ee-Y)+(O-ne)*(O-ne)+(B-A)*(B-A));return Math.abs(ue)<.001&&(ue=1),this.x=(ee-Y)/ue,this.y=(O-ne)/ue,this.z=(B-A)/ue,this.w=Math.acos((_+G+Q-1)/2),this}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this.w=Math.min(this.w,t.w),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this.w=Math.max(this.w,t.w),this}clamp(t,n){return this.x=Math.max(t.x,Math.min(n.x,this.x)),this.y=Math.max(t.y,Math.min(n.y,this.y)),this.z=Math.max(t.z,Math.min(n.z,this.z)),this.w=Math.max(t.w,Math.min(n.w,this.w)),this}clampScalar(t,n){return this.x=Math.max(t,Math.min(n,this.x)),this.y=Math.max(t,Math.min(n,this.y)),this.z=Math.max(t,Math.min(n,this.z)),this.w=Math.max(t,Math.min(n,this.w)),this}clampLength(t,n){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(t,Math.min(n,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z+this.w*t.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,n){return this.x+=(t.x-this.x)*n,this.y+=(t.y-this.y)*n,this.z+=(t.z-this.z)*n,this.w+=(t.w-this.w)*n,this}lerpVectors(t,n,i){return this.x=t.x+(n.x-t.x)*i,this.y=t.y+(n.y-t.y)*i,this.z=t.z+(n.z-t.z)*i,this.w=t.w+(n.w-t.w)*i,this}equals(t){return t.x===this.x&&t.y===this.y&&t.z===this.z&&t.w===this.w}fromArray(t,n=0){return this.x=t[n],this.y=t[n+1],this.z=t[n+2],this.w=t[n+3],this}toArray(t=[],n=0){return t[n]=this.x,t[n+1]=this.y,t[n+2]=this.z,t[n+3]=this.w,t}fromBufferAttribute(t,n){return this.x=t.getX(n),this.y=t.getY(n),this.z=t.getZ(n),this.w=t.getW(n),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class eW extends Vl{constructor(t=1,n=1,i={}){super(),this.isRenderTarget=!0,this.width=t,this.height=n,this.depth=1,this.scissor=new ni(0,0,t,n),this.scissorTest=!1,this.viewport=new ni(0,0,t,n);const s={width:t,height:n,depth:1};void 0!==i.encoding&&($f("THREE.WebGLRenderTarget: option.encoding has been replaced by option.colorSpace."),i.colorSpace=i.encoding===Pc?us:""),i=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:Yi,depthBuffer:!0,stencilBuffer:!1,depthTexture:null,samples:0},i),this.texture=new Mo(s,i.mapping,i.wrapS,i.wrapT,i.magFilter,i.minFilter,i.format,i.type,i.anisotropy,i.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.flipY=!1,this.texture.generateMipmaps=i.generateMipmaps,this.texture.internalFormat=i.internalFormat,this.depthBuffer=i.depthBuffer,this.stencilBuffer=i.stencilBuffer,this.depthTexture=i.depthTexture,this.samples=i.samples}setSize(t,n,i=1){(this.width!==t||this.height!==n||this.depth!==i)&&(this.width=t,this.height=n,this.depth=i,this.texture.image.width=t,this.texture.image.height=n,this.texture.image.depth=i,this.dispose()),this.viewport.set(0,0,t,n),this.scissor.set(0,0,t,n)}clone(){return(new this.constructor).copy(this)}copy(t){this.width=t.width,this.height=t.height,this.depth=t.depth,this.scissor.copy(t.scissor),this.scissorTest=t.scissorTest,this.viewport.copy(t.viewport),this.texture=t.texture.clone(),this.texture.isRenderTargetTexture=!0;const n=Object.assign({},t.texture.image);return this.texture.source=new Nd(n),this.depthBuffer=t.depthBuffer,this.stencilBuffer=t.stencilBuffer,null!==t.depthTexture&&(this.depthTexture=t.depthTexture.clone()),this.samples=t.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class Ea extends eW{constructor(t=1,n=1,i={}){super(t,n,i),this.isWebGLRenderTarget=!0}}class Y1 extends Mo{constructor(t=null,n=1,i=1,s=1){super(null),this.isDataArrayTexture=!0,this.image={data:t,width:n,height:i,depth:s},this.magFilter=Xi,this.minFilter=Xi,this.wrapR=Xs,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class vR extends Mo{constructor(t=null,n=1,i=1,s=1){super(null),this.isData3DTexture=!0,this.image={data:t,width:n,height:i,depth:s},this.magFilter=Xi,this.minFilter=Xi,this.wrapR=Xs,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class Eo{constructor(t=0,n=0,i=0,s=1){this.isQuaternion=!0,this._x=t,this._y=n,this._z=i,this._w=s}static slerpFlat(t,n,i,s,o,a,c){let u=i[s+0],_=i[s+1],A=i[s+2],O=i[s+3];const B=o[a+0],G=o[a+1],Y=o[a+2],ne=o[a+3];if(0===c)return t[n+0]=u,t[n+1]=_,t[n+2]=A,void(t[n+3]=O);if(1===c)return t[n+0]=B,t[n+1]=G,t[n+2]=Y,void(t[n+3]=ne);if(O!==ne||u!==B||_!==G||A!==Y){let ee=1-c;const Q=u*B+_*G+A*Y+O*ne,ue=Q>=0?1:-1,ce=1-Q*Q;if(ce>Number.EPSILON){const Ee=Math.sqrt(ce),Le=Math.atan2(Ee,Q*ue);ee=Math.sin(ee*Le)/Ee,c=Math.sin(c*Le)/Ee}const ye=c*ue;if(u=u*ee+B*ye,_=_*ee+G*ye,A=A*ee+Y*ye,O=O*ee+ne*ye,ee===1-c){const Ee=1/Math.sqrt(u*u+_*_+A*A+O*O);u*=Ee,_*=Ee,A*=Ee,O*=Ee}}t[n]=u,t[n+1]=_,t[n+2]=A,t[n+3]=O}static multiplyQuaternionsFlat(t,n,i,s,o,a){const c=i[s],u=i[s+1],_=i[s+2],A=i[s+3],O=o[a],B=o[a+1],G=o[a+2],Y=o[a+3];return t[n]=c*Y+A*O+u*G-_*B,t[n+1]=u*Y+A*B+_*O-c*G,t[n+2]=_*Y+A*G+c*B-u*O,t[n+3]=A*Y-c*O-u*B-_*G,t}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get w(){return this._w}set w(t){this._w=t,this._onChangeCallback()}set(t,n,i,s){return this._x=t,this._y=n,this._z=i,this._w=s,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(t){return this._x=t.x,this._y=t.y,this._z=t.z,this._w=t.w,this._onChangeCallback(),this}setFromEuler(t,n){const i=t._x,s=t._y,o=t._z,a=t._order,c=Math.cos,u=Math.sin,_=c(i/2),A=c(s/2),O=c(o/2),B=u(i/2),G=u(s/2),Y=u(o/2);switch(a){case"XYZ":this._x=B*A*O+_*G*Y,this._y=_*G*O-B*A*Y,this._z=_*A*Y+B*G*O,this._w=_*A*O-B*G*Y;break;case"YXZ":this._x=B*A*O+_*G*Y,this._y=_*G*O-B*A*Y,this._z=_*A*Y-B*G*O,this._w=_*A*O+B*G*Y;break;case"ZXY":this._x=B*A*O-_*G*Y,this._y=_*G*O+B*A*Y,this._z=_*A*Y+B*G*O,this._w=_*A*O-B*G*Y;break;case"ZYX":this._x=B*A*O-_*G*Y,this._y=_*G*O+B*A*Y,this._z=_*A*Y-B*G*O,this._w=_*A*O+B*G*Y;break;case"YZX":this._x=B*A*O+_*G*Y,this._y=_*G*O+B*A*Y,this._z=_*A*Y-B*G*O,this._w=_*A*O-B*G*Y;break;case"XZY":this._x=B*A*O-_*G*Y,this._y=_*G*O-B*A*Y,this._z=_*A*Y+B*G*O,this._w=_*A*O+B*G*Y;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+a)}return!1!==n&&this._onChangeCallback(),this}setFromAxisAngle(t,n){const i=n/2,s=Math.sin(i);return this._x=t.x*s,this._y=t.y*s,this._z=t.z*s,this._w=Math.cos(i),this._onChangeCallback(),this}setFromRotationMatrix(t){const n=t.elements,i=n[0],s=n[4],o=n[8],a=n[1],c=n[5],u=n[9],_=n[2],A=n[6],O=n[10],B=i+c+O;if(B>0){const G=.5/Math.sqrt(B+1);this._w=.25/G,this._x=(A-u)*G,this._y=(o-_)*G,this._z=(a-s)*G}else if(i>c&&i>O){const G=2*Math.sqrt(1+i-c-O);this._w=(A-u)/G,this._x=.25*G,this._y=(s+a)/G,this._z=(o+_)/G}else if(c>O){const G=2*Math.sqrt(1+c-i-O);this._w=(o-_)/G,this._x=(s+a)/G,this._y=.25*G,this._z=(u+A)/G}else{const G=2*Math.sqrt(1+O-i-c);this._w=(a-s)/G,this._x=(o+_)/G,this._y=(u+A)/G,this._z=.25*G}return this._onChangeCallback(),this}setFromUnitVectors(t,n){let i=t.dot(n)+1;return i<Number.EPSILON?(i=0,Math.abs(t.x)>Math.abs(t.z)?(this._x=-t.y,this._y=t.x,this._z=0,this._w=i):(this._x=0,this._y=-t.z,this._z=t.y,this._w=i)):(this._x=t.y*n.z-t.z*n.y,this._y=t.z*n.x-t.x*n.z,this._z=t.x*n.y-t.y*n.x,this._w=i),this.normalize()}angleTo(t){return 2*Math.acos(Math.abs(Li(this.dot(t),-1,1)))}rotateTowards(t,n){const i=this.angleTo(t);if(0===i)return this;const s=Math.min(1,n/i);return this.slerp(t,s),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(t){return this._x*t._x+this._y*t._y+this._z*t._z+this._w*t._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let t=this.length();return 0===t?(this._x=0,this._y=0,this._z=0,this._w=1):(t=1/t,this._x=this._x*t,this._y=this._y*t,this._z=this._z*t,this._w=this._w*t),this._onChangeCallback(),this}multiply(t){return this.multiplyQuaternions(this,t)}premultiply(t){return this.multiplyQuaternions(t,this)}multiplyQuaternions(t,n){const i=t._x,s=t._y,o=t._z,a=t._w,c=n._x,u=n._y,_=n._z,A=n._w;return this._x=i*A+a*c+s*_-o*u,this._y=s*A+a*u+o*c-i*_,this._z=o*A+a*_+i*u-s*c,this._w=a*A-i*c-s*u-o*_,this._onChangeCallback(),this}slerp(t,n){if(0===n)return this;if(1===n)return this.copy(t);const i=this._x,s=this._y,o=this._z,a=this._w;let c=a*t._w+i*t._x+s*t._y+o*t._z;if(c<0?(this._w=-t._w,this._x=-t._x,this._y=-t._y,this._z=-t._z,c=-c):this.copy(t),c>=1)return this._w=a,this._x=i,this._y=s,this._z=o,this;const u=1-c*c;if(u<=Number.EPSILON){const G=1-n;return this._w=G*a+n*this._w,this._x=G*i+n*this._x,this._y=G*s+n*this._y,this._z=G*o+n*this._z,this.normalize(),this._onChangeCallback(),this}const _=Math.sqrt(u),A=Math.atan2(_,c),O=Math.sin((1-n)*A)/_,B=Math.sin(n*A)/_;return this._w=a*O+this._w*B,this._x=i*O+this._x*B,this._y=s*O+this._y*B,this._z=o*O+this._z*B,this._onChangeCallback(),this}slerpQuaternions(t,n,i){return this.copy(t).slerp(n,i)}random(){const t=Math.random(),n=Math.sqrt(1-t),i=Math.sqrt(t),s=2*Math.PI*Math.random(),o=2*Math.PI*Math.random();return this.set(n*Math.cos(s),i*Math.sin(o),i*Math.cos(o),n*Math.sin(s))}equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._w===this._w}fromArray(t,n=0){return this._x=t[n],this._y=t[n+1],this._z=t[n+2],this._w=t[n+3],this._onChangeCallback(),this}toArray(t=[],n=0){return t[n]=this._x,t[n+1]=this._y,t[n+2]=this._z,t[n+3]=this._w,t}fromBufferAttribute(t,n){return this._x=t.getX(n),this._y=t.getY(n),this._z=t.getZ(n),this._w=t.getW(n),this}toJSON(){return this.toArray()}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class ke{constructor(t=0,n=0,i=0){ke.prototype.isVector3=!0,this.x=t,this.y=n,this.z=i}set(t,n,i){return void 0===i&&(i=this.z),this.x=t,this.y=n,this.z=i,this}setScalar(t){return this.x=t,this.y=t,this.z=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setZ(t){return this.z=t,this}setComponent(t,n){switch(t){case 0:this.x=n;break;case 1:this.y=n;break;case 2:this.z=n;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this}add(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this}addScalar(t){return this.x+=t,this.y+=t,this.z+=t,this}addVectors(t,n){return this.x=t.x+n.x,this.y=t.y+n.y,this.z=t.z+n.z,this}addScaledVector(t,n){return this.x+=t.x*n,this.y+=t.y*n,this.z+=t.z*n,this}sub(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this}subScalar(t){return this.x-=t,this.y-=t,this.z-=t,this}subVectors(t,n){return this.x=t.x-n.x,this.y=t.y-n.y,this.z=t.z-n.z,this}multiply(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z,this}multiplyScalar(t){return this.x*=t,this.y*=t,this.z*=t,this}multiplyVectors(t,n){return this.x=t.x*n.x,this.y=t.y*n.y,this.z=t.z*n.z,this}applyEuler(t){return this.applyQuaternion(bR.setFromEuler(t))}applyAxisAngle(t,n){return this.applyQuaternion(bR.setFromAxisAngle(t,n))}applyMatrix3(t){const n=this.x,i=this.y,s=this.z,o=t.elements;return this.x=o[0]*n+o[3]*i+o[6]*s,this.y=o[1]*n+o[4]*i+o[7]*s,this.z=o[2]*n+o[5]*i+o[8]*s,this}applyNormalMatrix(t){return this.applyMatrix3(t).normalize()}applyMatrix4(t){const n=this.x,i=this.y,s=this.z,o=t.elements,a=1/(o[3]*n+o[7]*i+o[11]*s+o[15]);return this.x=(o[0]*n+o[4]*i+o[8]*s+o[12])*a,this.y=(o[1]*n+o[5]*i+o[9]*s+o[13])*a,this.z=(o[2]*n+o[6]*i+o[10]*s+o[14])*a,this}applyQuaternion(t){const n=this.x,i=this.y,s=this.z,o=t.x,a=t.y,c=t.z,u=t.w,_=2*(a*s-c*i),A=2*(c*n-o*s),O=2*(o*i-a*n);return this.x=n+u*_+a*O-c*A,this.y=i+u*A+c*_-o*O,this.z=s+u*O+o*A-a*_,this}project(t){return this.applyMatrix4(t.matrixWorldInverse).applyMatrix4(t.projectionMatrix)}unproject(t){return this.applyMatrix4(t.projectionMatrixInverse).applyMatrix4(t.matrixWorld)}transformDirection(t){const n=this.x,i=this.y,s=this.z,o=t.elements;return this.x=o[0]*n+o[4]*i+o[8]*s,this.y=o[1]*n+o[5]*i+o[9]*s,this.z=o[2]*n+o[6]*i+o[10]*s,this.normalize()}divide(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this}divideScalar(t){return this.multiplyScalar(1/t)}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this}clamp(t,n){return this.x=Math.max(t.x,Math.min(n.x,this.x)),this.y=Math.max(t.y,Math.min(n.y,this.y)),this.z=Math.max(t.z,Math.min(n.z,this.z)),this}clampScalar(t,n){return this.x=Math.max(t,Math.min(n,this.x)),this.y=Math.max(t,Math.min(n,this.y)),this.z=Math.max(t,Math.min(n,this.z)),this}clampLength(t,n){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(t,Math.min(n,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,n){return this.x+=(t.x-this.x)*n,this.y+=(t.y-this.y)*n,this.z+=(t.z-this.z)*n,this}lerpVectors(t,n,i){return this.x=t.x+(n.x-t.x)*i,this.y=t.y+(n.y-t.y)*i,this.z=t.z+(n.z-t.z)*i,this}cross(t){return this.crossVectors(this,t)}crossVectors(t,n){const i=t.x,s=t.y,o=t.z,a=n.x,c=n.y,u=n.z;return this.x=s*u-o*c,this.y=o*a-i*u,this.z=i*c-s*a,this}projectOnVector(t){const n=t.lengthSq();if(0===n)return this.set(0,0,0);const i=t.dot(this)/n;return this.copy(t).multiplyScalar(i)}projectOnPlane(t){return Z1.copy(this).projectOnVector(t),this.sub(Z1)}reflect(t){return this.sub(Z1.copy(t).multiplyScalar(2*this.dot(t)))}angleTo(t){const n=Math.sqrt(this.lengthSq()*t.lengthSq());if(0===n)return Math.PI/2;const i=this.dot(t)/n;return Math.acos(Li(i,-1,1))}distanceTo(t){return Math.sqrt(this.distanceToSquared(t))}distanceToSquared(t){const n=this.x-t.x,i=this.y-t.y,s=this.z-t.z;return n*n+i*i+s*s}manhattanDistanceTo(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)+Math.abs(this.z-t.z)}setFromSpherical(t){return this.setFromSphericalCoords(t.radius,t.phi,t.theta)}setFromSphericalCoords(t,n,i){const s=Math.sin(n)*t;return this.x=s*Math.sin(i),this.y=Math.cos(n)*t,this.z=s*Math.cos(i),this}setFromCylindrical(t){return this.setFromCylindricalCoords(t.radius,t.theta,t.y)}setFromCylindricalCoords(t,n,i){return this.x=t*Math.sin(n),this.y=i,this.z=t*Math.cos(n),this}setFromMatrixPosition(t){const n=t.elements;return this.x=n[12],this.y=n[13],this.z=n[14],this}setFromMatrixScale(t){const n=this.setFromMatrixColumn(t,0).length(),i=this.setFromMatrixColumn(t,1).length(),s=this.setFromMatrixColumn(t,2).length();return this.x=n,this.y=i,this.z=s,this}setFromMatrixColumn(t,n){return this.fromArray(t.elements,4*n)}setFromMatrix3Column(t,n){return this.fromArray(t.elements,3*n)}setFromEuler(t){return this.x=t._x,this.y=t._y,this.z=t._z,this}setFromColor(t){return this.x=t.r,this.y=t.g,this.z=t.b,this}equals(t){return t.x===this.x&&t.y===this.y&&t.z===this.z}fromArray(t,n=0){return this.x=t[n],this.y=t[n+1],this.z=t[n+2],this}toArray(t=[],n=0){return t[n]=this.x,t[n+1]=this.y,t[n+2]=this.z,t}fromBufferAttribute(t,n){return this.x=t.getX(n),this.y=t.getY(n),this.z=t.getZ(n),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const t=2*(Math.random()-.5),n=Math.random()*Math.PI*2,i=Math.sqrt(1-t**2);return this.x=i*Math.cos(n),this.y=i*Math.sin(n),this.z=t,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const Z1=new ke,bR=new Eo;class tl{constructor(t=new ke(1/0,1/0,1/0),n=new ke(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=t,this.max=n}set(t,n){return this.min.copy(t),this.max.copy(n),this}setFromArray(t){this.makeEmpty();for(let n=0,i=t.length;n<i;n+=3)this.expandByPoint(aa.fromArray(t,n));return this}setFromBufferAttribute(t){this.makeEmpty();for(let n=0,i=t.count;n<i;n++)this.expandByPoint(aa.fromBufferAttribute(t,n));return this}setFromPoints(t){this.makeEmpty();for(let n=0,i=t.length;n<i;n++)this.expandByPoint(t[n]);return this}setFromCenterAndSize(t,n){const i=aa.copy(n).multiplyScalar(.5);return this.min.copy(t).sub(i),this.max.copy(t).add(i),this}setFromObject(t,n=!1){return this.makeEmpty(),this.expandByObject(t,n)}clone(){return(new this.constructor).copy(this)}copy(t){return this.min.copy(t.min),this.max.copy(t.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(t){return this.isEmpty()?t.set(0,0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(t){return this.isEmpty()?t.set(0,0,0):t.subVectors(this.max,this.min)}expandByPoint(t){return this.min.min(t),this.max.max(t),this}expandByVector(t){return this.min.sub(t),this.max.add(t),this}expandByScalar(t){return this.min.addScalar(-t),this.max.addScalar(t),this}expandByObject(t,n=!1){t.updateWorldMatrix(!1,!1);const i=t.geometry;if(void 0!==i){const o=i.getAttribute("position");if(!0===n&&void 0!==o&&!0!==t.isInstancedMesh)for(let a=0,c=o.count;a<c;a++)!0===t.isMesh?t.getVertexPosition(a,aa):aa.fromBufferAttribute(o,a),aa.applyMatrix4(t.matrixWorld),this.expandByPoint(aa);else void 0!==t.boundingBox?(null===t.boundingBox&&t.computeBoundingBox(),uy.copy(t.boundingBox)):(null===i.boundingBox&&i.computeBoundingBox(),uy.copy(i.boundingBox)),uy.applyMatrix4(t.matrixWorld),this.union(uy)}const s=t.children;for(let o=0,a=s.length;o<a;o++)this.expandByObject(s[o],n);return this}containsPoint(t){return!(t.x<this.min.x||t.x>this.max.x||t.y<this.min.y||t.y>this.max.y||t.z<this.min.z||t.z>this.max.z)}containsBox(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y&&this.min.z<=t.min.z&&t.max.z<=this.max.z}getParameter(t,n){return n.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y),(t.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(t){return!(t.max.x<this.min.x||t.min.x>this.max.x||t.max.y<this.min.y||t.min.y>this.max.y||t.max.z<this.min.z||t.min.z>this.max.z)}intersectsSphere(t){return this.clampPoint(t.center,aa),aa.distanceToSquared(t.center)<=t.radius*t.radius}intersectsPlane(t){let n,i;return t.normal.x>0?(n=t.normal.x*this.min.x,i=t.normal.x*this.max.x):(n=t.normal.x*this.max.x,i=t.normal.x*this.min.x),t.normal.y>0?(n+=t.normal.y*this.min.y,i+=t.normal.y*this.max.y):(n+=t.normal.y*this.max.y,i+=t.normal.y*this.min.y),t.normal.z>0?(n+=t.normal.z*this.min.z,i+=t.normal.z*this.max.z):(n+=t.normal.z*this.max.z,i+=t.normal.z*this.min.z),n<=-t.constant&&i>=-t.constant}intersectsTriangle(t){if(this.isEmpty())return!1;this.getCenter(Xf),dy.subVectors(this.max,Xf),kd.subVectors(t.a,Xf),Fd.subVectors(t.b,Xf),Ud.subVectors(t.c,Xf),zl.subVectors(Fd,kd),Gl.subVectors(Ud,Fd),Lc.subVectors(kd,Ud);let n=[0,-zl.z,zl.y,0,-Gl.z,Gl.y,0,-Lc.z,Lc.y,zl.z,0,-zl.x,Gl.z,0,-Gl.x,Lc.z,0,-Lc.x,-zl.y,zl.x,0,-Gl.y,Gl.x,0,-Lc.y,Lc.x,0];return!(!K1(n,kd,Fd,Ud,dy)||(n=[1,0,0,0,1,0,0,0,1],!K1(n,kd,Fd,Ud,dy)))&&(hy.crossVectors(zl,Gl),n=[hy.x,hy.y,hy.z],K1(n,kd,Fd,Ud,dy))}clampPoint(t,n){return n.copy(t).clamp(this.min,this.max)}distanceToPoint(t){return this.clampPoint(t,aa).distanceTo(t)}getBoundingSphere(t){return this.isEmpty()?t.makeEmpty():(this.getCenter(t.center),t.radius=.5*this.getSize(aa).length()),t}intersect(t){return this.min.max(t.min),this.max.min(t.max),this.isEmpty()&&this.makeEmpty(),this}union(t){return this.min.min(t.min),this.max.max(t.max),this}applyMatrix4(t){return this.isEmpty()||(nl[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(t),nl[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(t),nl[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(t),nl[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(t),nl[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(t),nl[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(t),nl[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(t),nl[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(t),this.setFromPoints(nl)),this}translate(t){return this.min.add(t),this.max.add(t),this}equals(t){return t.min.equals(this.min)&&t.max.equals(this.max)}}const nl=[new ke,new ke,new ke,new ke,new ke,new ke,new ke,new ke],aa=new ke,uy=new tl,kd=new ke,Fd=new ke,Ud=new ke,zl=new ke,Gl=new ke,Lc=new ke,Xf=new ke,dy=new ke,hy=new ke,jc=new ke;function K1(r,t,n,i,s){for(let o=0,a=r.length-3;o<=a;o+=3){jc.fromArray(r,o);const c=s.x*Math.abs(jc.x)+s.y*Math.abs(jc.y)+s.z*Math.abs(jc.z),u=t.dot(jc),_=n.dot(jc),A=i.dot(jc);if(Math.max(-Math.max(u,_,A),Math.min(u,_,A))>c)return!1}return!0}const tW=new tl,Yf=new ke,J1=new ke;class Ca{constructor(t=new ke,n=-1){this.center=t,this.radius=n}set(t,n){return this.center.copy(t),this.radius=n,this}setFromPoints(t,n){const i=this.center;void 0!==n?i.copy(n):tW.setFromPoints(t).getCenter(i);let s=0;for(let o=0,a=t.length;o<a;o++)s=Math.max(s,i.distanceToSquared(t[o]));return this.radius=Math.sqrt(s),this}copy(t){return this.center.copy(t.center),this.radius=t.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(t){return t.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(t){return t.distanceTo(this.center)-this.radius}intersectsSphere(t){const n=this.radius+t.radius;return t.center.distanceToSquared(this.center)<=n*n}intersectsBox(t){return t.intersectsSphere(this)}intersectsPlane(t){return Math.abs(t.distanceToPoint(this.center))<=this.radius}clampPoint(t,n){const i=this.center.distanceToSquared(t);return n.copy(t),i>this.radius*this.radius&&(n.sub(this.center).normalize(),n.multiplyScalar(this.radius).add(this.center)),n}getBoundingBox(t){return this.isEmpty()?(t.makeEmpty(),t):(t.set(this.center,this.center),t.expandByScalar(this.radius),t)}applyMatrix4(t){return this.center.applyMatrix4(t),this.radius=this.radius*t.getMaxScaleOnAxis(),this}translate(t){return this.center.add(t),this}expandByPoint(t){if(this.isEmpty())return this.center.copy(t),this.radius=0,this;Yf.subVectors(t,this.center);const n=Yf.lengthSq();if(n>this.radius*this.radius){const i=Math.sqrt(n),s=.5*(i-this.radius);this.center.addScaledVector(Yf,s/i),this.radius+=s}return this}union(t){return t.isEmpty()?this:this.isEmpty()?(this.copy(t),this):(!0===this.center.equals(t.center)?this.radius=Math.max(this.radius,t.radius):(J1.subVectors(t.center,this.center).setLength(t.radius),this.expandByPoint(Yf.copy(t.center).add(J1)),this.expandByPoint(Yf.copy(t.center).sub(J1))),this)}equals(t){return t.center.equals(this.center)&&t.radius===this.radius}clone(){return(new this.constructor).copy(this)}}const rl=new ke,Q1=new ke,fy=new ke,Hl=new ke,ex=new ke,py=new ke,tx=new ke;class Zf{constructor(t=new ke,n=new ke(0,0,-1)){this.origin=t,this.direction=n}set(t,n){return this.origin.copy(t),this.direction.copy(n),this}copy(t){return this.origin.copy(t.origin),this.direction.copy(t.direction),this}at(t,n){return n.copy(this.origin).addScaledVector(this.direction,t)}lookAt(t){return this.direction.copy(t).sub(this.origin).normalize(),this}recast(t){return this.origin.copy(this.at(t,rl)),this}closestPointToPoint(t,n){n.subVectors(t,this.origin);const i=n.dot(this.direction);return i<0?n.copy(this.origin):n.copy(this.origin).addScaledVector(this.direction,i)}distanceToPoint(t){return Math.sqrt(this.distanceSqToPoint(t))}distanceSqToPoint(t){const n=rl.subVectors(t,this.origin).dot(this.direction);return n<0?this.origin.distanceToSquared(t):(rl.copy(this.origin).addScaledVector(this.direction,n),rl.distanceToSquared(t))}distanceSqToSegment(t,n,i,s){Q1.copy(t).add(n).multiplyScalar(.5),fy.copy(n).sub(t).normalize(),Hl.copy(this.origin).sub(Q1);const o=.5*t.distanceTo(n),a=-this.direction.dot(fy),c=Hl.dot(this.direction),u=-Hl.dot(fy),_=Hl.lengthSq(),A=Math.abs(1-a*a);let O,B,G,Y;if(A>0)if(O=a*u-c,B=a*c-u,Y=o*A,O>=0)if(B>=-Y)if(B<=Y){const ne=1/A;O*=ne,B*=ne,G=O*(O+a*B+2*c)+B*(a*O+B+2*u)+_}else B=o,O=Math.max(0,-(a*B+c)),G=-O*O+B*(B+2*u)+_;else B=-o,O=Math.max(0,-(a*B+c)),G=-O*O+B*(B+2*u)+_;else B<=-Y?(O=Math.max(0,-(-a*o+c)),B=O>0?-o:Math.min(Math.max(-o,-u),o),G=-O*O+B*(B+2*u)+_):B<=Y?(O=0,B=Math.min(Math.max(-o,-u),o),G=B*(B+2*u)+_):(O=Math.max(0,-(a*o+c)),B=O>0?o:Math.min(Math.max(-o,-u),o),G=-O*O+B*(B+2*u)+_);else B=a>0?-o:o,O=Math.max(0,-(a*B+c)),G=-O*O+B*(B+2*u)+_;return i&&i.copy(this.origin).addScaledVector(this.direction,O),s&&s.copy(Q1).addScaledVector(fy,B),G}intersectSphere(t,n){rl.subVectors(t.center,this.origin);const i=rl.dot(this.direction),s=rl.dot(rl)-i*i,o=t.radius*t.radius;if(s>o)return null;const a=Math.sqrt(o-s),c=i-a,u=i+a;return u<0?null:this.at(c<0?u:c,n)}intersectsSphere(t){return this.distanceSqToPoint(t.center)<=t.radius*t.radius}distanceToPlane(t){const n=t.normal.dot(this.direction);if(0===n)return 0===t.distanceToPoint(this.origin)?0:null;const i=-(this.origin.dot(t.normal)+t.constant)/n;return i>=0?i:null}intersectPlane(t,n){const i=this.distanceToPlane(t);return null===i?null:this.at(i,n)}intersectsPlane(t){const n=t.distanceToPoint(this.origin);return 0===n||t.normal.dot(this.direction)*n<0}intersectBox(t,n){let i,s,o,a,c,u;const _=1/this.direction.x,A=1/this.direction.y,O=1/this.direction.z,B=this.origin;return _>=0?(i=(t.min.x-B.x)*_,s=(t.max.x-B.x)*_):(i=(t.max.x-B.x)*_,s=(t.min.x-B.x)*_),A>=0?(o=(t.min.y-B.y)*A,a=(t.max.y-B.y)*A):(o=(t.max.y-B.y)*A,a=(t.min.y-B.y)*A),i>a||o>s||((o>i||isNaN(i))&&(i=o),(a<s||isNaN(s))&&(s=a),O>=0?(c=(t.min.z-B.z)*O,u=(t.max.z-B.z)*O):(c=(t.max.z-B.z)*O,u=(t.min.z-B.z)*O),i>u||c>s)||((c>i||i!=i)&&(i=c),(u<s||s!=s)&&(s=u),s<0)?null:this.at(i>=0?i:s,n)}intersectsBox(t){return null!==this.intersectBox(t,rl)}intersectTriangle(t,n,i,s,o){ex.subVectors(n,t),py.subVectors(i,t),tx.crossVectors(ex,py);let c,a=this.direction.dot(tx);if(a>0){if(s)return null;c=1}else{if(!(a<0))return null;c=-1,a=-a}Hl.subVectors(this.origin,t);const u=c*this.direction.dot(py.crossVectors(Hl,py));if(u<0)return null;const _=c*this.direction.dot(ex.cross(Hl));if(_<0||u+_>a)return null;const A=-c*Hl.dot(tx);return A<0?null:this.at(A/a,o)}applyMatrix4(t){return this.origin.applyMatrix4(t),this.direction.transformDirection(t),this}equals(t){return t.origin.equals(this.origin)&&t.direction.equals(this.direction)}clone(){return(new this.constructor).copy(this)}}class cr{constructor(t,n,i,s,o,a,c,u,_,A,O,B,G,Y,ne,ee){cr.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],void 0!==t&&this.set(t,n,i,s,o,a,c,u,_,A,O,B,G,Y,ne,ee)}set(t,n,i,s,o,a,c,u,_,A,O,B,G,Y,ne,ee){const Q=this.elements;return Q[0]=t,Q[4]=n,Q[8]=i,Q[12]=s,Q[1]=o,Q[5]=a,Q[9]=c,Q[13]=u,Q[2]=_,Q[6]=A,Q[10]=O,Q[14]=B,Q[3]=G,Q[7]=Y,Q[11]=ne,Q[15]=ee,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return(new cr).fromArray(this.elements)}copy(t){const n=this.elements,i=t.elements;return n[0]=i[0],n[1]=i[1],n[2]=i[2],n[3]=i[3],n[4]=i[4],n[5]=i[5],n[6]=i[6],n[7]=i[7],n[8]=i[8],n[9]=i[9],n[10]=i[10],n[11]=i[11],n[12]=i[12],n[13]=i[13],n[14]=i[14],n[15]=i[15],this}copyPosition(t){const n=this.elements,i=t.elements;return n[12]=i[12],n[13]=i[13],n[14]=i[14],this}setFromMatrix3(t){const n=t.elements;return this.set(n[0],n[3],n[6],0,n[1],n[4],n[7],0,n[2],n[5],n[8],0,0,0,0,1),this}extractBasis(t,n,i){return t.setFromMatrixColumn(this,0),n.setFromMatrixColumn(this,1),i.setFromMatrixColumn(this,2),this}makeBasis(t,n,i){return this.set(t.x,n.x,i.x,0,t.y,n.y,i.y,0,t.z,n.z,i.z,0,0,0,0,1),this}extractRotation(t){const n=this.elements,i=t.elements,s=1/Bd.setFromMatrixColumn(t,0).length(),o=1/Bd.setFromMatrixColumn(t,1).length(),a=1/Bd.setFromMatrixColumn(t,2).length();return n[0]=i[0]*s,n[1]=i[1]*s,n[2]=i[2]*s,n[3]=0,n[4]=i[4]*o,n[5]=i[5]*o,n[6]=i[6]*o,n[7]=0,n[8]=i[8]*a,n[9]=i[9]*a,n[10]=i[10]*a,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,this}makeRotationFromEuler(t){const n=this.elements,i=t.x,s=t.y,o=t.z,a=Math.cos(i),c=Math.sin(i),u=Math.cos(s),_=Math.sin(s),A=Math.cos(o),O=Math.sin(o);if("XYZ"===t.order){const B=a*A,G=a*O,Y=c*A,ne=c*O;n[0]=u*A,n[4]=-u*O,n[8]=_,n[1]=G+Y*_,n[5]=B-ne*_,n[9]=-c*u,n[2]=ne-B*_,n[6]=Y+G*_,n[10]=a*u}else if("YXZ"===t.order){const B=u*A,G=u*O,Y=_*A,ne=_*O;n[0]=B+ne*c,n[4]=Y*c-G,n[8]=a*_,n[1]=a*O,n[5]=a*A,n[9]=-c,n[2]=G*c-Y,n[6]=ne+B*c,n[10]=a*u}else if("ZXY"===t.order){const B=u*A,G=u*O,Y=_*A,ne=_*O;n[0]=B-ne*c,n[4]=-a*O,n[8]=Y+G*c,n[1]=G+Y*c,n[5]=a*A,n[9]=ne-B*c,n[2]=-a*_,n[6]=c,n[10]=a*u}else if("ZYX"===t.order){const B=a*A,G=a*O,Y=c*A,ne=c*O;n[0]=u*A,n[4]=Y*_-G,n[8]=B*_+ne,n[1]=u*O,n[5]=ne*_+B,n[9]=G*_-Y,n[2]=-_,n[6]=c*u,n[10]=a*u}else if("YZX"===t.order){const B=a*u,G=a*_,Y=c*u,ne=c*_;n[0]=u*A,n[4]=ne-B*O,n[8]=Y*O+G,n[1]=O,n[5]=a*A,n[9]=-c*A,n[2]=-_*A,n[6]=G*O+Y,n[10]=B-ne*O}else if("XZY"===t.order){const B=a*u,G=a*_,Y=c*u,ne=c*_;n[0]=u*A,n[4]=-O,n[8]=_*A,n[1]=B*O+ne,n[5]=a*A,n[9]=G*O-Y,n[2]=Y*O-G,n[6]=c*A,n[10]=ne*O+B}return n[3]=0,n[7]=0,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,this}makeRotationFromQuaternion(t){return this.compose(nW,t,rW)}lookAt(t,n,i){const s=this.elements;return Co.subVectors(t,n),0===Co.lengthSq()&&(Co.z=1),Co.normalize(),Wl.crossVectors(i,Co),0===Wl.lengthSq()&&(1===Math.abs(i.z)?Co.x+=1e-4:Co.z+=1e-4,Co.normalize(),Wl.crossVectors(i,Co)),Wl.normalize(),my.crossVectors(Co,Wl),s[0]=Wl.x,s[4]=my.x,s[8]=Co.x,s[1]=Wl.y,s[5]=my.y,s[9]=Co.y,s[2]=Wl.z,s[6]=my.z,s[10]=Co.z,this}multiply(t){return this.multiplyMatrices(this,t)}premultiply(t){return this.multiplyMatrices(t,this)}multiplyMatrices(t,n){const i=t.elements,s=n.elements,o=this.elements,a=i[0],c=i[4],u=i[8],_=i[12],A=i[1],O=i[5],B=i[9],G=i[13],Y=i[2],ne=i[6],ee=i[10],Q=i[14],ue=i[3],ce=i[7],ye=i[11],Ee=i[15],Le=s[0],Fe=s[4],Xe=s[8],Me=s[12],Ne=s[1],dt=s[5],It=s[9],Ut=s[13],Qe=s[2],mt=s[6],At=s[10],Ct=s[14],Jt=s[3],Rt=s[7],Bt=s[11],st=s[15];return o[0]=a*Le+c*Ne+u*Qe+_*Jt,o[4]=a*Fe+c*dt+u*mt+_*Rt,o[8]=a*Xe+c*It+u*At+_*Bt,o[12]=a*Me+c*Ut+u*Ct+_*st,o[1]=A*Le+O*Ne+B*Qe+G*Jt,o[5]=A*Fe+O*dt+B*mt+G*Rt,o[9]=A*Xe+O*It+B*At+G*Bt,o[13]=A*Me+O*Ut+B*Ct+G*st,o[2]=Y*Le+ne*Ne+ee*Qe+Q*Jt,o[6]=Y*Fe+ne*dt+ee*mt+Q*Rt,o[10]=Y*Xe+ne*It+ee*At+Q*Bt,o[14]=Y*Me+ne*Ut+ee*Ct+Q*st,o[3]=ue*Le+ce*Ne+ye*Qe+Ee*Jt,o[7]=ue*Fe+ce*dt+ye*mt+Ee*Rt,o[11]=ue*Xe+ce*It+ye*At+Ee*Bt,o[15]=ue*Me+ce*Ut+ye*Ct+Ee*st,this}multiplyScalar(t){const n=this.elements;return n[0]*=t,n[4]*=t,n[8]*=t,n[12]*=t,n[1]*=t,n[5]*=t,n[9]*=t,n[13]*=t,n[2]*=t,n[6]*=t,n[10]*=t,n[14]*=t,n[3]*=t,n[7]*=t,n[11]*=t,n[15]*=t,this}determinant(){const t=this.elements,n=t[0],i=t[4],s=t[8],o=t[12],a=t[1],c=t[5],u=t[9],_=t[13],A=t[2],O=t[6],B=t[10],G=t[14];return t[3]*(+o*u*O-s*_*O-o*c*B+i*_*B+s*c*G-i*u*G)+t[7]*(+n*u*G-n*_*B+o*a*B-s*a*G+s*_*A-o*u*A)+t[11]*(+n*_*O-n*c*G-o*a*O+i*a*G+o*c*A-i*_*A)+t[15]*(-s*c*A-n*u*O+n*c*B+s*a*O-i*a*B+i*u*A)}transpose(){const t=this.elements;let n;return n=t[1],t[1]=t[4],t[4]=n,n=t[2],t[2]=t[8],t[8]=n,n=t[6],t[6]=t[9],t[9]=n,n=t[3],t[3]=t[12],t[12]=n,n=t[7],t[7]=t[13],t[13]=n,n=t[11],t[11]=t[14],t[14]=n,this}setPosition(t,n,i){const s=this.elements;return t.isVector3?(s[12]=t.x,s[13]=t.y,s[14]=t.z):(s[12]=t,s[13]=n,s[14]=i),this}invert(){const t=this.elements,n=t[0],i=t[1],s=t[2],o=t[3],a=t[4],c=t[5],u=t[6],_=t[7],A=t[8],O=t[9],B=t[10],G=t[11],Y=t[12],ne=t[13],ee=t[14],Q=t[15],ue=O*ee*_-ne*B*_+ne*u*G-c*ee*G-O*u*Q+c*B*Q,ce=Y*B*_-A*ee*_-Y*u*G+a*ee*G+A*u*Q-a*B*Q,ye=A*ne*_-Y*O*_+Y*c*G-a*ne*G-A*c*Q+a*O*Q,Ee=Y*O*u-A*ne*u-Y*c*B+a*ne*B+A*c*ee-a*O*ee,Le=n*ue+i*ce+s*ye+o*Ee;if(0===Le)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const Fe=1/Le;return t[0]=ue*Fe,t[1]=(ne*B*o-O*ee*o-ne*s*G+i*ee*G+O*s*Q-i*B*Q)*Fe,t[2]=(c*ee*o-ne*u*o+ne*s*_-i*ee*_-c*s*Q+i*u*Q)*Fe,t[3]=(O*u*o-c*B*o-O*s*_+i*B*_+c*s*G-i*u*G)*Fe,t[4]=ce*Fe,t[5]=(A*ee*o-Y*B*o+Y*s*G-n*ee*G-A*s*Q+n*B*Q)*Fe,t[6]=(Y*u*o-a*ee*o-Y*s*_+n*ee*_+a*s*Q-n*u*Q)*Fe,t[7]=(a*B*o-A*u*o+A*s*_-n*B*_-a*s*G+n*u*G)*Fe,t[8]=ye*Fe,t[9]=(Y*O*o-A*ne*o-Y*i*G+n*ne*G+A*i*Q-n*O*Q)*Fe,t[10]=(a*ne*o-Y*c*o+Y*i*_-n*ne*_-a*i*Q+n*c*Q)*Fe,t[11]=(A*c*o-a*O*o-A*i*_+n*O*_+a*i*G-n*c*G)*Fe,t[12]=Ee*Fe,t[13]=(A*ne*s-Y*O*s+Y*i*B-n*ne*B-A*i*ee+n*O*ee)*Fe,t[14]=(Y*c*s-a*ne*s-Y*i*u+n*ne*u+a*i*ee-n*c*ee)*Fe,t[15]=(a*O*s-A*c*s+A*i*u-n*O*u-a*i*B+n*c*B)*Fe,this}scale(t){const n=this.elements,i=t.x,s=t.y,o=t.z;return n[0]*=i,n[4]*=s,n[8]*=o,n[1]*=i,n[5]*=s,n[9]*=o,n[2]*=i,n[6]*=s,n[10]*=o,n[3]*=i,n[7]*=s,n[11]*=o,this}getMaxScaleOnAxis(){const t=this.elements;return Math.sqrt(Math.max(t[0]*t[0]+t[1]*t[1]+t[2]*t[2],t[4]*t[4]+t[5]*t[5]+t[6]*t[6],t[8]*t[8]+t[9]*t[9]+t[10]*t[10]))}makeTranslation(t,n,i){return t.isVector3?this.set(1,0,0,t.x,0,1,0,t.y,0,0,1,t.z,0,0,0,1):this.set(1,0,0,t,0,1,0,n,0,0,1,i,0,0,0,1),this}makeRotationX(t){const n=Math.cos(t),i=Math.sin(t);return this.set(1,0,0,0,0,n,-i,0,0,i,n,0,0,0,0,1),this}makeRotationY(t){const n=Math.cos(t),i=Math.sin(t);return this.set(n,0,i,0,0,1,0,0,-i,0,n,0,0,0,0,1),this}makeRotationZ(t){const n=Math.cos(t),i=Math.sin(t);return this.set(n,-i,0,0,i,n,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(t,n){const i=Math.cos(n),s=Math.sin(n),o=1-i,a=t.x,c=t.y,u=t.z,_=o*a,A=o*c;return this.set(_*a+i,_*c-s*u,_*u+s*c,0,_*c+s*u,A*c+i,A*u-s*a,0,_*u-s*c,A*u+s*a,o*u*u+i,0,0,0,0,1),this}makeScale(t,n,i){return this.set(t,0,0,0,0,n,0,0,0,0,i,0,0,0,0,1),this}makeShear(t,n,i,s,o,a){return this.set(1,i,o,0,t,1,a,0,n,s,1,0,0,0,0,1),this}compose(t,n,i){const s=this.elements,o=n._x,a=n._y,c=n._z,u=n._w,_=o+o,A=a+a,O=c+c,B=o*_,G=o*A,Y=o*O,ne=a*A,ee=a*O,Q=c*O,ue=u*_,ce=u*A,ye=u*O,Ee=i.x,Le=i.y,Fe=i.z;return s[0]=(1-(ne+Q))*Ee,s[1]=(G+ye)*Ee,s[2]=(Y-ce)*Ee,s[3]=0,s[4]=(G-ye)*Le,s[5]=(1-(B+Q))*Le,s[6]=(ee+ue)*Le,s[7]=0,s[8]=(Y+ce)*Fe,s[9]=(ee-ue)*Fe,s[10]=(1-(B+ne))*Fe,s[11]=0,s[12]=t.x,s[13]=t.y,s[14]=t.z,s[15]=1,this}decompose(t,n,i){const s=this.elements;let o=Bd.set(s[0],s[1],s[2]).length();const a=Bd.set(s[4],s[5],s[6]).length(),c=Bd.set(s[8],s[9],s[10]).length();this.determinant()<0&&(o=-o),t.x=s[12],t.y=s[13],t.z=s[14],la.copy(this);const _=1/o,A=1/a,O=1/c;return la.elements[0]*=_,la.elements[1]*=_,la.elements[2]*=_,la.elements[4]*=A,la.elements[5]*=A,la.elements[6]*=A,la.elements[8]*=O,la.elements[9]*=O,la.elements[10]*=O,n.setFromRotationMatrix(la),i.x=o,i.y=a,i.z=c,this}makePerspective(t,n,i,s,o,a,c=el){const u=this.elements,_=2*o/(n-t),A=2*o/(i-s),O=(n+t)/(n-t),B=(i+s)/(i-s);let G,Y;if(c===el)G=-(a+o)/(a-o),Y=-2*a*o/(a-o);else{if(2001!==c)throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+c);G=-a/(a-o),Y=-a*o/(a-o)}return u[0]=_,u[4]=0,u[8]=O,u[12]=0,u[1]=0,u[5]=A,u[9]=B,u[13]=0,u[2]=0,u[6]=0,u[10]=G,u[14]=Y,u[3]=0,u[7]=0,u[11]=-1,u[15]=0,this}makeOrthographic(t,n,i,s,o,a,c=el){const u=this.elements,_=1/(n-t),A=1/(i-s),O=1/(a-o),B=(n+t)*_,G=(i+s)*A;let Y,ne;if(c===el)Y=(a+o)*O,ne=-2*O;else{if(2001!==c)throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+c);Y=o*O,ne=-1*O}return u[0]=2*_,u[4]=0,u[8]=0,u[12]=-B,u[1]=0,u[5]=2*A,u[9]=0,u[13]=-G,u[2]=0,u[6]=0,u[10]=ne,u[14]=-Y,u[3]=0,u[7]=0,u[11]=0,u[15]=1,this}equals(t){const n=this.elements,i=t.elements;for(let s=0;s<16;s++)if(n[s]!==i[s])return!1;return!0}fromArray(t,n=0){for(let i=0;i<16;i++)this.elements[i]=t[i+n];return this}toArray(t=[],n=0){const i=this.elements;return t[n]=i[0],t[n+1]=i[1],t[n+2]=i[2],t[n+3]=i[3],t[n+4]=i[4],t[n+5]=i[5],t[n+6]=i[6],t[n+7]=i[7],t[n+8]=i[8],t[n+9]=i[9],t[n+10]=i[10],t[n+11]=i[11],t[n+12]=i[12],t[n+13]=i[13],t[n+14]=i[14],t[n+15]=i[15],t}}const Bd=new ke,la=new cr,nW=new ke(0,0,0),rW=new ke(1,1,1),Wl=new ke,my=new ke,Co=new ke,_R=new cr,xR=new Eo;let iW=(()=>{class r{constructor(n=0,i=0,s=0,o=r.DEFAULT_ORDER){this.isEuler=!0,this._x=n,this._y=i,this._z=s,this._order=o}get x(){return this._x}set x(n){this._x=n,this._onChangeCallback()}get y(){return this._y}set y(n){this._y=n,this._onChangeCallback()}get z(){return this._z}set z(n){this._z=n,this._onChangeCallback()}get order(){return this._order}set order(n){this._order=n,this._onChangeCallback()}set(n,i,s,o=this._order){return this._x=n,this._y=i,this._z=s,this._order=o,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(n){return this._x=n._x,this._y=n._y,this._z=n._z,this._order=n._order,this._onChangeCallback(),this}setFromRotationMatrix(n,i=this._order,s=!0){const o=n.elements,a=o[0],c=o[4],u=o[8],_=o[1],A=o[5],O=o[9],B=o[2],G=o[6],Y=o[10];switch(i){case"XYZ":this._y=Math.asin(Li(u,-1,1)),Math.abs(u)<.9999999?(this._x=Math.atan2(-O,Y),this._z=Math.atan2(-c,a)):(this._x=Math.atan2(G,A),this._z=0);break;case"YXZ":this._x=Math.asin(-Li(O,-1,1)),Math.abs(O)<.9999999?(this._y=Math.atan2(u,Y),this._z=Math.atan2(_,A)):(this._y=Math.atan2(-B,a),this._z=0);break;case"ZXY":this._x=Math.asin(Li(G,-1,1)),Math.abs(G)<.9999999?(this._y=Math.atan2(-B,Y),this._z=Math.atan2(-c,A)):(this._y=0,this._z=Math.atan2(_,a));break;case"ZYX":this._y=Math.asin(-Li(B,-1,1)),Math.abs(B)<.9999999?(this._x=Math.atan2(G,Y),this._z=Math.atan2(_,a)):(this._x=0,this._z=Math.atan2(-c,A));break;case"YZX":this._z=Math.asin(Li(_,-1,1)),Math.abs(_)<.9999999?(this._x=Math.atan2(-O,A),this._y=Math.atan2(-B,a)):(this._x=0,this._y=Math.atan2(u,Y));break;case"XZY":this._z=Math.asin(-Li(c,-1,1)),Math.abs(c)<.9999999?(this._x=Math.atan2(G,A),this._y=Math.atan2(u,a)):(this._x=Math.atan2(-O,Y),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+i)}return this._order=i,!0===s&&this._onChangeCallback(),this}setFromQuaternion(n,i,s){return _R.makeRotationFromQuaternion(n),this.setFromRotationMatrix(_R,i,s)}setFromVector3(n,i=this._order){return this.set(n.x,n.y,n.z,i)}reorder(n){return xR.setFromEuler(this),this.setFromQuaternion(xR,n)}equals(n){return n._x===this._x&&n._y===this._y&&n._z===this._z&&n._order===this._order}fromArray(n){return this._x=n[0],this._y=n[1],this._z=n[2],void 0!==n[3]&&(this._order=n[3]),this._onChangeCallback(),this}toArray(n=[],i=0){return n[i]=this._x,n[i+1]=this._y,n[i+2]=this._z,n[i+3]=this._order,n}_onChange(n){return this._onChangeCallback=n,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}return r.DEFAULT_ORDER="XYZ",r})();class nx{constructor(){this.mask=1}set(t){this.mask=(1<<t|0)>>>0}enable(t){this.mask|=1<<t|0}enableAll(){this.mask=-1}toggle(t){this.mask^=1<<t|0}disable(t){this.mask&=~(1<<t|0)}disableAll(){this.mask=0}test(t){return 0!=(this.mask&t.mask)}isEnabled(t){return 0!=(this.mask&(1<<t|0))}}let sW=0;const wR=new ke,Vd=new Eo,il=new cr,gy=new ke,Kf=new ke,oW=new ke,aW=new Eo,SR=new ke(1,0,0),MR=new ke(0,1,0),ER=new ke(0,0,1),lW={type:"added"},cW={type:"removed"};let xi=(()=>{class r extends Vl{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:sW++}),this.uuid=So(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=r.DEFAULT_UP.clone();const n=new ke,i=new iW,s=new Eo,o=new ke(1,1,1);i._onChange(function a(){s.setFromEuler(i,!1)}),s._onChange(function c(){i.setFromQuaternion(s,void 0,!1)}),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:n},rotation:{configurable:!0,enumerable:!0,value:i},quaternion:{configurable:!0,enumerable:!0,value:s},scale:{configurable:!0,enumerable:!0,value:o},modelViewMatrix:{value:new cr},normalMatrix:{value:new yr}}),this.matrix=new cr,this.matrixWorld=new cr,this.matrixAutoUpdate=r.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.matrixWorldAutoUpdate=r.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.layers=new nx,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeRender(){}onAfterRender(){}applyMatrix4(n){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(n),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(n){return this.quaternion.premultiply(n),this}setRotationFromAxisAngle(n,i){this.quaternion.setFromAxisAngle(n,i)}setRotationFromEuler(n){this.quaternion.setFromEuler(n,!0)}setRotationFromMatrix(n){this.quaternion.setFromRotationMatrix(n)}setRotationFromQuaternion(n){this.quaternion.copy(n)}rotateOnAxis(n,i){return Vd.setFromAxisAngle(n,i),this.quaternion.multiply(Vd),this}rotateOnWorldAxis(n,i){return Vd.setFromAxisAngle(n,i),this.quaternion.premultiply(Vd),this}rotateX(n){return this.rotateOnAxis(SR,n)}rotateY(n){return this.rotateOnAxis(MR,n)}rotateZ(n){return this.rotateOnAxis(ER,n)}translateOnAxis(n,i){return wR.copy(n).applyQuaternion(this.quaternion),this.position.add(wR.multiplyScalar(i)),this}translateX(n){return this.translateOnAxis(SR,n)}translateY(n){return this.translateOnAxis(MR,n)}translateZ(n){return this.translateOnAxis(ER,n)}localToWorld(n){return this.updateWorldMatrix(!0,!1),n.applyMatrix4(this.matrixWorld)}worldToLocal(n){return this.updateWorldMatrix(!0,!1),n.applyMatrix4(il.copy(this.matrixWorld).invert())}lookAt(n,i,s){n.isVector3?gy.copy(n):gy.set(n,i,s);const o=this.parent;this.updateWorldMatrix(!0,!1),Kf.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?il.lookAt(Kf,gy,this.up):il.lookAt(gy,Kf,this.up),this.quaternion.setFromRotationMatrix(il),o&&(il.extractRotation(o.matrixWorld),Vd.setFromRotationMatrix(il),this.quaternion.premultiply(Vd.invert()))}add(n){if(arguments.length>1){for(let i=0;i<arguments.length;i++)this.add(arguments[i]);return this}return n===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",n),this):(n&&n.isObject3D?(null!==n.parent&&n.parent.remove(n),n.parent=this,this.children.push(n),n.dispatchEvent(lW)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",n),this)}remove(n){if(arguments.length>1){for(let s=0;s<arguments.length;s++)this.remove(arguments[s]);return this}const i=this.children.indexOf(n);return-1!==i&&(n.parent=null,this.children.splice(i,1),n.dispatchEvent(cW)),this}removeFromParent(){const n=this.parent;return null!==n&&n.remove(this),this}clear(){return this.remove(...this.children)}attach(n){return this.updateWorldMatrix(!0,!1),il.copy(this.matrixWorld).invert(),null!==n.parent&&(n.parent.updateWorldMatrix(!0,!1),il.multiply(n.parent.matrixWorld)),n.applyMatrix4(il),this.add(n),n.updateWorldMatrix(!1,!0),this}getObjectById(n){return this.getObjectByProperty("id",n)}getObjectByName(n){return this.getObjectByProperty("name",n)}getObjectByProperty(n,i){if(this[n]===i)return this;for(let s=0,o=this.children.length;s<o;s++){const c=this.children[s].getObjectByProperty(n,i);if(void 0!==c)return c}}getObjectsByProperty(n,i){let s=[];this[n]===i&&s.push(this);for(let o=0,a=this.children.length;o<a;o++){const c=this.children[o].getObjectsByProperty(n,i);c.length>0&&(s=s.concat(c))}return s}getWorldPosition(n){return this.updateWorldMatrix(!0,!1),n.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(n){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Kf,n,oW),n}getWorldScale(n){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Kf,aW,n),n}getWorldDirection(n){this.updateWorldMatrix(!0,!1);const i=this.matrixWorld.elements;return n.set(i[8],i[9],i[10]).normalize()}raycast(){}traverse(n){n(this);const i=this.children;for(let s=0,o=i.length;s<o;s++)i[s].traverse(n)}traverseVisible(n){if(!1===this.visible)return;n(this);const i=this.children;for(let s=0,o=i.length;s<o;s++)i[s].traverseVisible(n)}traverseAncestors(n){const i=this.parent;null!==i&&(n(i),i.traverseAncestors(n))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(n){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||n)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,n=!0);const i=this.children;for(let s=0,o=i.length;s<o;s++){const a=i[s];(!0===a.matrixWorldAutoUpdate||!0===n)&&a.updateMatrixWorld(n)}}updateWorldMatrix(n,i){const s=this.parent;if(!0===n&&null!==s&&!0===s.matrixWorldAutoUpdate&&s.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),!0===i){const o=this.children;for(let a=0,c=o.length;a<c;a++){const u=o[a];!0===u.matrixWorldAutoUpdate&&u.updateWorldMatrix(!1,!0)}}}toJSON(n){const i=void 0===n||"string"==typeof n,s={};i&&(n={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},s.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});const o={};function a(u,_){return void 0===u[_.uuid]&&(u[_.uuid]=_.toJSON(n)),_.uuid}if(o.uuid=this.uuid,o.type=this.type,""!==this.name&&(o.name=this.name),!0===this.castShadow&&(o.castShadow=!0),!0===this.receiveShadow&&(o.receiveShadow=!0),!1===this.visible&&(o.visible=!1),!1===this.frustumCulled&&(o.frustumCulled=!1),0!==this.renderOrder&&(o.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(o.userData=this.userData),o.layers=this.layers.mask,o.matrix=this.matrix.toArray(),o.up=this.up.toArray(),!1===this.matrixAutoUpdate&&(o.matrixAutoUpdate=!1),this.isInstancedMesh&&(o.type="InstancedMesh",o.count=this.count,o.instanceMatrix=this.instanceMatrix.toJSON(),null!==this.instanceColor&&(o.instanceColor=this.instanceColor.toJSON())),this.isScene)this.background&&(this.background.isColor?o.background=this.background.toJSON():this.background.isTexture&&(o.background=this.background.toJSON(n).uuid)),this.environment&&this.environment.isTexture&&!0!==this.environment.isRenderTargetTexture&&(o.environment=this.environment.toJSON(n).uuid);else if(this.isMesh||this.isLine||this.isPoints){o.geometry=a(n.geometries,this.geometry);const u=this.geometry.parameters;if(void 0!==u&&void 0!==u.shapes){const _=u.shapes;if(Array.isArray(_))for(let A=0,O=_.length;A<O;A++)a(n.shapes,_[A]);else a(n.shapes,_)}}if(this.isSkinnedMesh&&(o.bindMode=this.bindMode,o.bindMatrix=this.bindMatrix.toArray(),void 0!==this.skeleton&&(a(n.skeletons,this.skeleton),o.skeleton=this.skeleton.uuid)),void 0!==this.material)if(Array.isArray(this.material)){const u=[];for(let _=0,A=this.material.length;_<A;_++)u.push(a(n.materials,this.material[_]));o.material=u}else o.material=a(n.materials,this.material);if(this.children.length>0){o.children=[];for(let u=0;u<this.children.length;u++)o.children.push(this.children[u].toJSON(n).object)}if(this.animations.length>0){o.animations=[];for(let u=0;u<this.animations.length;u++)o.animations.push(a(n.animations,this.animations[u]))}if(i){const u=c(n.geometries),_=c(n.materials),A=c(n.textures),O=c(n.images),B=c(n.shapes),G=c(n.skeletons),Y=c(n.animations),ne=c(n.nodes);u.length>0&&(s.geometries=u),_.length>0&&(s.materials=_),A.length>0&&(s.textures=A),O.length>0&&(s.images=O),B.length>0&&(s.shapes=B),G.length>0&&(s.skeletons=G),Y.length>0&&(s.animations=Y),ne.length>0&&(s.nodes=ne)}return s.object=o,s;function c(u){const _=[];for(const A in u){const O=u[A];delete O.metadata,_.push(O)}return _}}clone(n){return(new this.constructor).copy(this,n)}copy(n,i=!0){if(this.name=n.name,this.up.copy(n.up),this.position.copy(n.position),this.rotation.order=n.rotation.order,this.quaternion.copy(n.quaternion),this.scale.copy(n.scale),this.matrix.copy(n.matrix),this.matrixWorld.copy(n.matrixWorld),this.matrixAutoUpdate=n.matrixAutoUpdate,this.matrixWorldNeedsUpdate=n.matrixWorldNeedsUpdate,this.matrixWorldAutoUpdate=n.matrixWorldAutoUpdate,this.layers.mask=n.layers.mask,this.visible=n.visible,this.castShadow=n.castShadow,this.receiveShadow=n.receiveShadow,this.frustumCulled=n.frustumCulled,this.renderOrder=n.renderOrder,this.animations=n.animations.slice(),this.userData=JSON.parse(JSON.stringify(n.userData)),!0===i)for(let s=0;s<n.children.length;s++)this.add(n.children[s].clone());return this}}return r.DEFAULT_UP=new ke(0,1,0),r.DEFAULT_MATRIX_AUTO_UPDATE=!0,r.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0,r})();const ca=new ke,sl=new ke,rx=new ke,ol=new ke,zd=new ke,Gd=new ke,CR=new ke,ix=new ke,sx=new ke,ox=new ke;let yy=!1;class To{constructor(t=new ke,n=new ke,i=new ke){this.a=t,this.b=n,this.c=i}static getNormal(t,n,i,s){s.subVectors(i,n),ca.subVectors(t,n),s.cross(ca);const o=s.lengthSq();return o>0?s.multiplyScalar(1/Math.sqrt(o)):s.set(0,0,0)}static getBarycoord(t,n,i,s,o){ca.subVectors(s,n),sl.subVectors(i,n),rx.subVectors(t,n);const a=ca.dot(ca),c=ca.dot(sl),u=ca.dot(rx),_=sl.dot(sl),A=sl.dot(rx),O=a*_-c*c;if(0===O)return o.set(-2,-1,-1);const B=1/O,G=(_*u-c*A)*B,Y=(a*A-c*u)*B;return o.set(1-G-Y,Y,G)}static containsPoint(t,n,i,s){return this.getBarycoord(t,n,i,s,ol),ol.x>=0&&ol.y>=0&&ol.x+ol.y<=1}static getUV(t,n,i,s,o,a,c,u){return!1===yy&&(console.warn("THREE.Triangle.getUV() has been renamed to THREE.Triangle.getInterpolation()."),yy=!0),this.getInterpolation(t,n,i,s,o,a,c,u)}static getInterpolation(t,n,i,s,o,a,c,u){return this.getBarycoord(t,n,i,s,ol),u.setScalar(0),u.addScaledVector(o,ol.x),u.addScaledVector(a,ol.y),u.addScaledVector(c,ol.z),u}static isFrontFacing(t,n,i,s){return ca.subVectors(i,n),sl.subVectors(t,n),ca.cross(sl).dot(s)<0}set(t,n,i){return this.a.copy(t),this.b.copy(n),this.c.copy(i),this}setFromPointsAndIndices(t,n,i,s){return this.a.copy(t[n]),this.b.copy(t[i]),this.c.copy(t[s]),this}setFromAttributeAndIndices(t,n,i,s){return this.a.fromBufferAttribute(t,n),this.b.fromBufferAttribute(t,i),this.c.fromBufferAttribute(t,s),this}clone(){return(new this.constructor).copy(this)}copy(t){return this.a.copy(t.a),this.b.copy(t.b),this.c.copy(t.c),this}getArea(){return ca.subVectors(this.c,this.b),sl.subVectors(this.a,this.b),.5*ca.cross(sl).length()}getMidpoint(t){return t.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(t){return To.getNormal(this.a,this.b,this.c,t)}getPlane(t){return t.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(t,n){return To.getBarycoord(t,this.a,this.b,this.c,n)}getUV(t,n,i,s,o){return!1===yy&&(console.warn("THREE.Triangle.getUV() has been renamed to THREE.Triangle.getInterpolation()."),yy=!0),To.getInterpolation(t,this.a,this.b,this.c,n,i,s,o)}getInterpolation(t,n,i,s,o){return To.getInterpolation(t,this.a,this.b,this.c,n,i,s,o)}containsPoint(t){return To.containsPoint(t,this.a,this.b,this.c)}isFrontFacing(t){return To.isFrontFacing(this.a,this.b,this.c,t)}intersectsBox(t){return t.intersectsTriangle(this)}closestPointToPoint(t,n){const i=this.a,s=this.b,o=this.c;let a,c;zd.subVectors(s,i),Gd.subVectors(o,i),ix.subVectors(t,i);const u=zd.dot(ix),_=Gd.dot(ix);if(u<=0&&_<=0)return n.copy(i);sx.subVectors(t,s);const A=zd.dot(sx),O=Gd.dot(sx);if(A>=0&&O<=A)return n.copy(s);const B=u*O-A*_;if(B<=0&&u>=0&&A<=0)return a=u/(u-A),n.copy(i).addScaledVector(zd,a);ox.subVectors(t,o);const G=zd.dot(ox),Y=Gd.dot(ox);if(Y>=0&&G<=Y)return n.copy(o);const ne=G*_-u*Y;if(ne<=0&&_>=0&&Y<=0)return c=_/(_-Y),n.copy(i).addScaledVector(Gd,c);const ee=A*Y-G*O;if(ee<=0&&O-A>=0&&G-Y>=0)return CR.subVectors(o,s),c=(O-A)/(O-A+(G-Y)),n.copy(s).addScaledVector(CR,c);const Q=1/(ee+ne+B);return a=ne*Q,c=B*Q,n.copy(i).addScaledVector(zd,a).addScaledVector(Gd,c)}equals(t){return t.a.equals(this.a)&&t.b.equals(this.b)&&t.c.equals(this.c)}}const TR={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},ql={h:0,s:0,l:0},vy={h:0,s:0,l:0};function ax(r,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?r+6*(t-r)*n:n<.5?t:n<2/3?r+6*(t-r)*(2/3-n):r}class xn{constructor(t,n,i){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(t,n,i)}set(t,n,i){if(void 0===n&&void 0===i){const s=t;s&&s.isColor?this.copy(s):"number"==typeof s?this.setHex(s):"string"==typeof s&&this.setStyle(s)}else this.setRGB(t,n,i);return this}setScalar(t){return this.r=t,this.g=t,this.b=t,this}setHex(t,n=us){return t=Math.floor(t),this.r=(t>>16&255)/255,this.g=(t>>8&255)/255,this.b=(255&t)/255,ti.toWorkingColorSpace(this,n),this}setRGB(t,n,i,s=ti.workingColorSpace){return this.r=t,this.g=n,this.b=i,ti.toWorkingColorSpace(this,s),this}setHSL(t,n,i,s=ti.workingColorSpace){if(t=function H1(r,t){return(r%t+t)%t}(t,1),n=Li(n,0,1),i=Li(i,0,1),0===n)this.r=this.g=this.b=i;else{const o=i<=.5?i*(1+n):i+n-i*n,a=2*i-o;this.r=ax(a,o,t+1/3),this.g=ax(a,o,t),this.b=ax(a,o,t-1/3)}return ti.toWorkingColorSpace(this,s),this}setStyle(t,n=us){function i(o){void 0!==o&&parseFloat(o)<1&&console.warn("THREE.Color: Alpha component of "+t+" will be ignored.")}let s;if(s=/^(\w+)\(([^\)]*)\)/.exec(t)){let o;const c=s[2];switch(s[1]){case"rgb":case"rgba":if(o=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(c))return i(o[4]),this.setRGB(Math.min(255,parseInt(o[1],10))/255,Math.min(255,parseInt(o[2],10))/255,Math.min(255,parseInt(o[3],10))/255,n);if(o=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(c))return i(o[4]),this.setRGB(Math.min(100,parseInt(o[1],10))/100,Math.min(100,parseInt(o[2],10))/100,Math.min(100,parseInt(o[3],10))/100,n);break;case"hsl":case"hsla":if(o=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(c))return i(o[4]),this.setHSL(parseFloat(o[1])/360,parseFloat(o[2])/100,parseFloat(o[3])/100,n);break;default:console.warn("THREE.Color: Unknown color model "+t)}}else if(s=/^\#([A-Fa-f\d]+)$/.exec(t)){const o=s[1],a=o.length;if(3===a)return this.setRGB(parseInt(o.charAt(0),16)/15,parseInt(o.charAt(1),16)/15,parseInt(o.charAt(2),16)/15,n);if(6===a)return this.setHex(parseInt(o,16),n);console.warn("THREE.Color: Invalid hex color "+t)}else if(t&&t.length>0)return this.setColorName(t,n);return this}setColorName(t,n=us){const i=TR[t.toLowerCase()];return void 0!==i?this.setHex(i,n):console.warn("THREE.Color: Unknown color "+t),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(t){return this.r=t.r,this.g=t.g,this.b=t.b,this}copySRGBToLinear(t){return this.r=Ld(t.r),this.g=Ld(t.g),this.b=Ld(t.b),this}copyLinearToSRGB(t){return this.r=$1(t.r),this.g=$1(t.g),this.b=$1(t.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(t=us){return ti.fromWorkingColorSpace(Os.copy(this),t),65536*Math.round(Li(255*Os.r,0,255))+256*Math.round(Li(255*Os.g,0,255))+Math.round(Li(255*Os.b,0,255))}getHexString(t=us){return("000000"+this.getHex(t).toString(16)).slice(-6)}getHSL(t,n=ti.workingColorSpace){ti.fromWorkingColorSpace(Os.copy(this),n);const i=Os.r,s=Os.g,o=Os.b,a=Math.max(i,s,o),c=Math.min(i,s,o);let u,_;const A=(c+a)/2;if(c===a)u=0,_=0;else{const O=a-c;switch(_=A<=.5?O/(a+c):O/(2-a-c),a){case i:u=(s-o)/O+(s<o?6:0);break;case s:u=(o-i)/O+2;break;case o:u=(i-s)/O+4}u/=6}return t.h=u,t.s=_,t.l=A,t}getRGB(t,n=ti.workingColorSpace){return ti.fromWorkingColorSpace(Os.copy(this),n),t.r=Os.r,t.g=Os.g,t.b=Os.b,t}getStyle(t=us){ti.fromWorkingColorSpace(Os.copy(this),t);const n=Os.r,i=Os.g,s=Os.b;return t!==us?`color(${t} ${n.toFixed(3)} ${i.toFixed(3)} ${s.toFixed(3)})`:`rgb(${Math.round(255*n)},${Math.round(255*i)},${Math.round(255*s)})`}offsetHSL(t,n,i){return this.getHSL(ql),this.setHSL(ql.h+t,ql.s+n,ql.l+i)}add(t){return this.r+=t.r,this.g+=t.g,this.b+=t.b,this}addColors(t,n){return this.r=t.r+n.r,this.g=t.g+n.g,this.b=t.b+n.b,this}addScalar(t){return this.r+=t,this.g+=t,this.b+=t,this}sub(t){return this.r=Math.max(0,this.r-t.r),this.g=Math.max(0,this.g-t.g),this.b=Math.max(0,this.b-t.b),this}multiply(t){return this.r*=t.r,this.g*=t.g,this.b*=t.b,this}multiplyScalar(t){return this.r*=t,this.g*=t,this.b*=t,this}lerp(t,n){return this.r+=(t.r-this.r)*n,this.g+=(t.g-this.g)*n,this.b+=(t.b-this.b)*n,this}lerpColors(t,n,i){return this.r=t.r+(n.r-t.r)*i,this.g=t.g+(n.g-t.g)*i,this.b=t.b+(n.b-t.b)*i,this}lerpHSL(t,n){this.getHSL(ql),t.getHSL(vy);const i=Wf(ql.h,vy.h,n),s=Wf(ql.s,vy.s,n),o=Wf(ql.l,vy.l,n);return this.setHSL(i,s,o),this}setFromVector3(t){return this.r=t.x,this.g=t.y,this.b=t.z,this}applyMatrix3(t){const n=this.r,i=this.g,s=this.b,o=t.elements;return this.r=o[0]*n+o[3]*i+o[6]*s,this.g=o[1]*n+o[4]*i+o[7]*s,this.b=o[2]*n+o[5]*i+o[8]*s,this}equals(t){return t.r===this.r&&t.g===this.g&&t.b===this.b}fromArray(t,n=0){return this.r=t[n],this.g=t[n+1],this.b=t[n+2],this}toArray(t=[],n=0){return t[n]=this.r,t[n+1]=this.g,t[n+2]=this.b,t}fromBufferAttribute(t,n){return this.r=t.getX(n),this.g=t.getY(n),this.b=t.getZ(n),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const Os=new xn;xn.NAMES=TR;let uW=0;class Ys extends Vl{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:uW++}),this.uuid=So(),this.name="",this.type="Material",this.blending=1,this.side=0,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=204,this.blendDst=205,this.blendEquation=100,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new xn(0,0,0),this.blendAlpha=0,this.depthFunc=3,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=519,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=Pd,this.stencilZFail=Pd,this.stencilZPass=Pd,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(t){this._alphaTest>0!=t>0&&this.version++,this._alphaTest=t}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(t){if(void 0!==t)for(const n in t){const i=t[n];if(void 0===i){console.warn(`THREE.Material: parameter '${n}' has value of undefined.`);continue}const s=this[n];void 0!==s?s&&s.isColor?s.set(i):s&&s.isVector3&&i&&i.isVector3?s.copy(i):this[n]=i:console.warn(`THREE.Material: '${n}' is not a property of THREE.${this.type}.`)}}toJSON(t){const n=void 0===t||"string"==typeof t;n&&(t={textures:{},images:{}});const i={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};function s(o){const a=[];for(const c in o){const u=o[c];delete u.metadata,a.push(u)}return a}if(i.uuid=this.uuid,i.type=this.type,""!==this.name&&(i.name=this.name),this.color&&this.color.isColor&&(i.color=this.color.getHex()),void 0!==this.roughness&&(i.roughness=this.roughness),void 0!==this.metalness&&(i.metalness=this.metalness),void 0!==this.sheen&&(i.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(i.sheenColor=this.sheenColor.getHex()),void 0!==this.sheenRoughness&&(i.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(i.emissive=this.emissive.getHex()),this.emissiveIntensity&&1!==this.emissiveIntensity&&(i.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(i.specular=this.specular.getHex()),void 0!==this.specularIntensity&&(i.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(i.specularColor=this.specularColor.getHex()),void 0!==this.shininess&&(i.shininess=this.shininess),void 0!==this.clearcoat&&(i.clearcoat=this.clearcoat),void 0!==this.clearcoatRoughness&&(i.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(i.clearcoatMap=this.clearcoatMap.toJSON(t).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(i.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(t).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(i.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(t).uuid,i.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),void 0!==this.iridescence&&(i.iridescence=this.iridescence),void 0!==this.iridescenceIOR&&(i.iridescenceIOR=this.iridescenceIOR),void 0!==this.iridescenceThicknessRange&&(i.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(i.iridescenceMap=this.iridescenceMap.toJSON(t).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(i.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(t).uuid),void 0!==this.anisotropy&&(i.anisotropy=this.anisotropy),void 0!==this.anisotropyRotation&&(i.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(i.anisotropyMap=this.anisotropyMap.toJSON(t).uuid),this.map&&this.map.isTexture&&(i.map=this.map.toJSON(t).uuid),this.matcap&&this.matcap.isTexture&&(i.matcap=this.matcap.toJSON(t).uuid),this.alphaMap&&this.alphaMap.isTexture&&(i.alphaMap=this.alphaMap.toJSON(t).uuid),this.lightMap&&this.lightMap.isTexture&&(i.lightMap=this.lightMap.toJSON(t).uuid,i.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(i.aoMap=this.aoMap.toJSON(t).uuid,i.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(i.bumpMap=this.bumpMap.toJSON(t).uuid,i.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(i.normalMap=this.normalMap.toJSON(t).uuid,i.normalMapType=this.normalMapType,i.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(i.displacementMap=this.displacementMap.toJSON(t).uuid,i.displacementScale=this.displacementScale,i.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(i.roughnessMap=this.roughnessMap.toJSON(t).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(i.metalnessMap=this.metalnessMap.toJSON(t).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(i.emissiveMap=this.emissiveMap.toJSON(t).uuid),this.specularMap&&this.specularMap.isTexture&&(i.specularMap=this.specularMap.toJSON(t).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(i.specularIntensityMap=this.specularIntensityMap.toJSON(t).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(i.specularColorMap=this.specularColorMap.toJSON(t).uuid),this.envMap&&this.envMap.isTexture&&(i.envMap=this.envMap.toJSON(t).uuid,void 0!==this.combine&&(i.combine=this.combine)),void 0!==this.envMapIntensity&&(i.envMapIntensity=this.envMapIntensity),void 0!==this.reflectivity&&(i.reflectivity=this.reflectivity),void 0!==this.refractionRatio&&(i.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(i.gradientMap=this.gradientMap.toJSON(t).uuid),void 0!==this.transmission&&(i.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(i.transmissionMap=this.transmissionMap.toJSON(t).uuid),void 0!==this.thickness&&(i.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(i.thicknessMap=this.thicknessMap.toJSON(t).uuid),void 0!==this.attenuationDistance&&this.attenuationDistance!==1/0&&(i.attenuationDistance=this.attenuationDistance),void 0!==this.attenuationColor&&(i.attenuationColor=this.attenuationColor.getHex()),void 0!==this.size&&(i.size=this.size),null!==this.shadowSide&&(i.shadowSide=this.shadowSide),void 0!==this.sizeAttenuation&&(i.sizeAttenuation=this.sizeAttenuation),1!==this.blending&&(i.blending=this.blending),0!==this.side&&(i.side=this.side),!0===this.vertexColors&&(i.vertexColors=!0),this.opacity<1&&(i.opacity=this.opacity),!0===this.transparent&&(i.transparent=!0),204!==this.blendSrc&&(i.blendSrc=this.blendSrc),205!==this.blendDst&&(i.blendDst=this.blendDst),100!==this.blendEquation&&(i.blendEquation=this.blendEquation),null!==this.blendSrcAlpha&&(i.blendSrcAlpha=this.blendSrcAlpha),null!==this.blendDstAlpha&&(i.blendDstAlpha=this.blendDstAlpha),null!==this.blendEquationAlpha&&(i.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(i.blendColor=this.blendColor.getHex()),0!==this.blendAlpha&&(i.blendAlpha=this.blendAlpha),3!==this.depthFunc&&(i.depthFunc=this.depthFunc),!1===this.depthTest&&(i.depthTest=this.depthTest),!1===this.depthWrite&&(i.depthWrite=this.depthWrite),!1===this.colorWrite&&(i.colorWrite=this.colorWrite),255!==this.stencilWriteMask&&(i.stencilWriteMask=this.stencilWriteMask),519!==this.stencilFunc&&(i.stencilFunc=this.stencilFunc),0!==this.stencilRef&&(i.stencilRef=this.stencilRef),255!==this.stencilFuncMask&&(i.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==Pd&&(i.stencilFail=this.stencilFail),this.stencilZFail!==Pd&&(i.stencilZFail=this.stencilZFail),this.stencilZPass!==Pd&&(i.stencilZPass=this.stencilZPass),!0===this.stencilWrite&&(i.stencilWrite=this.stencilWrite),void 0!==this.rotation&&0!==this.rotation&&(i.rotation=this.rotation),!0===this.polygonOffset&&(i.polygonOffset=!0),0!==this.polygonOffsetFactor&&(i.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(i.polygonOffsetUnits=this.polygonOffsetUnits),void 0!==this.linewidth&&1!==this.linewidth&&(i.linewidth=this.linewidth),void 0!==this.dashSize&&(i.dashSize=this.dashSize),void 0!==this.gapSize&&(i.gapSize=this.gapSize),void 0!==this.scale&&(i.scale=this.scale),!0===this.dithering&&(i.dithering=!0),this.alphaTest>0&&(i.alphaTest=this.alphaTest),!0===this.alphaHash&&(i.alphaHash=!0),!0===this.alphaToCoverage&&(i.alphaToCoverage=!0),!0===this.premultipliedAlpha&&(i.premultipliedAlpha=!0),!0===this.forceSinglePass&&(i.forceSinglePass=!0),!0===this.wireframe&&(i.wireframe=!0),this.wireframeLinewidth>1&&(i.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(i.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(i.wireframeLinejoin=this.wireframeLinejoin),!0===this.flatShading&&(i.flatShading=!0),!1===this.visible&&(i.visible=!1),!1===this.toneMapped&&(i.toneMapped=!1),!1===this.fog&&(i.fog=!1),Object.keys(this.userData).length>0&&(i.userData=this.userData),n){const o=s(t.textures),a=s(t.images);o.length>0&&(i.textures=o),a.length>0&&(i.images=a)}return i}clone(){return(new this.constructor).copy(this)}copy(t){this.name=t.name,this.blending=t.blending,this.side=t.side,this.vertexColors=t.vertexColors,this.opacity=t.opacity,this.transparent=t.transparent,this.blendSrc=t.blendSrc,this.blendDst=t.blendDst,this.blendEquation=t.blendEquation,this.blendSrcAlpha=t.blendSrcAlpha,this.blendDstAlpha=t.blendDstAlpha,this.blendEquationAlpha=t.blendEquationAlpha,this.blendColor.copy(t.blendColor),this.blendAlpha=t.blendAlpha,this.depthFunc=t.depthFunc,this.depthTest=t.depthTest,this.depthWrite=t.depthWrite,this.stencilWriteMask=t.stencilWriteMask,this.stencilFunc=t.stencilFunc,this.stencilRef=t.stencilRef,this.stencilFuncMask=t.stencilFuncMask,this.stencilFail=t.stencilFail,this.stencilZFail=t.stencilZFail,this.stencilZPass=t.stencilZPass,this.stencilWrite=t.stencilWrite;const n=t.clippingPlanes;let i=null;if(null!==n){const s=n.length;i=new Array(s);for(let o=0;o!==s;++o)i[o]=n[o].clone()}return this.clippingPlanes=i,this.clipIntersection=t.clipIntersection,this.clipShadows=t.clipShadows,this.shadowSide=t.shadowSide,this.colorWrite=t.colorWrite,this.precision=t.precision,this.polygonOffset=t.polygonOffset,this.polygonOffsetFactor=t.polygonOffsetFactor,this.polygonOffsetUnits=t.polygonOffsetUnits,this.dithering=t.dithering,this.alphaTest=t.alphaTest,this.alphaHash=t.alphaHash,this.alphaToCoverage=t.alphaToCoverage,this.premultipliedAlpha=t.premultipliedAlpha,this.forceSinglePass=t.forceSinglePass,this.visible=t.visible,this.toneMapped=t.toneMapped,this.userData=JSON.parse(JSON.stringify(t.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(t){!0===t&&this.version++}}class Nc extends Ys{constructor(t){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new xn(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=$g,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.fog=t.fog,this}}const Zi=new ke,by=new Lt;class hi{constructor(t,n,i=!1){if(Array.isArray(t))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=t,this.itemSize=n,this.count=void 0!==t?t.length/n:0,this.normalized=i,this.usage=35044,this.updateRange={offset:0,count:-1},this.gpuType=Ja,this.version=0}onUploadCallback(){}set needsUpdate(t){!0===t&&this.version++}setUsage(t){return this.usage=t,this}copy(t){return this.name=t.name,this.array=new t.array.constructor(t.array),this.itemSize=t.itemSize,this.count=t.count,this.normalized=t.normalized,this.usage=t.usage,this.gpuType=t.gpuType,this}copyAt(t,n,i){t*=this.itemSize,i*=n.itemSize;for(let s=0,o=this.itemSize;s<o;s++)this.array[t+s]=n.array[i+s];return this}copyArray(t){return this.array.set(t),this}applyMatrix3(t){if(2===this.itemSize)for(let n=0,i=this.count;n<i;n++)by.fromBufferAttribute(this,n),by.applyMatrix3(t),this.setXY(n,by.x,by.y);else if(3===this.itemSize)for(let n=0,i=this.count;n<i;n++)Zi.fromBufferAttribute(this,n),Zi.applyMatrix3(t),this.setXYZ(n,Zi.x,Zi.y,Zi.z);return this}applyMatrix4(t){for(let n=0,i=this.count;n<i;n++)Zi.fromBufferAttribute(this,n),Zi.applyMatrix4(t),this.setXYZ(n,Zi.x,Zi.y,Zi.z);return this}applyNormalMatrix(t){for(let n=0,i=this.count;n<i;n++)Zi.fromBufferAttribute(this,n),Zi.applyNormalMatrix(t),this.setXYZ(n,Zi.x,Zi.y,Zi.z);return this}transformDirection(t){for(let n=0,i=this.count;n<i;n++)Zi.fromBufferAttribute(this,n),Zi.transformDirection(t),this.setXYZ(n,Zi.x,Zi.y,Zi.z);return this}set(t,n=0){return this.array.set(t,n),this}getComponent(t,n){let i=this.array[t*this.itemSize+n];return this.normalized&&(i=lo(i,this.array)),i}setComponent(t,n,i){return this.normalized&&(i=pr(i,this.array)),this.array[t*this.itemSize+n]=i,this}getX(t){let n=this.array[t*this.itemSize];return this.normalized&&(n=lo(n,this.array)),n}setX(t,n){return this.normalized&&(n=pr(n,this.array)),this.array[t*this.itemSize]=n,this}getY(t){let n=this.array[t*this.itemSize+1];return this.normalized&&(n=lo(n,this.array)),n}setY(t,n){return this.normalized&&(n=pr(n,this.array)),this.array[t*this.itemSize+1]=n,this}getZ(t){let n=this.array[t*this.itemSize+2];return this.normalized&&(n=lo(n,this.array)),n}setZ(t,n){return this.normalized&&(n=pr(n,this.array)),this.array[t*this.itemSize+2]=n,this}getW(t){let n=this.array[t*this.itemSize+3];return this.normalized&&(n=lo(n,this.array)),n}setW(t,n){return this.normalized&&(n=pr(n,this.array)),this.array[t*this.itemSize+3]=n,this}setXY(t,n,i){return t*=this.itemSize,this.normalized&&(n=pr(n,this.array),i=pr(i,this.array)),this.array[t+0]=n,this.array[t+1]=i,this}setXYZ(t,n,i,s){return t*=this.itemSize,this.normalized&&(n=pr(n,this.array),i=pr(i,this.array),s=pr(s,this.array)),this.array[t+0]=n,this.array[t+1]=i,this.array[t+2]=s,this}setXYZW(t,n,i,s,o){return t*=this.itemSize,this.normalized&&(n=pr(n,this.array),i=pr(i,this.array),s=pr(s,this.array),o=pr(o,this.array)),this.array[t+0]=n,this.array[t+1]=i,this.array[t+2]=s,this.array[t+3]=o,this}onUpload(t){return this.onUploadCallback=t,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const t={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return""!==this.name&&(t.name=this.name),35044!==this.usage&&(t.usage=this.usage),(0!==this.updateRange.offset||-1!==this.updateRange.count)&&(t.updateRange=this.updateRange),t}}class AR extends hi{constructor(t,n,i){super(new Uint16Array(t),n,i)}}class DR extends hi{constructor(t,n,i){super(new Uint32Array(t),n,i)}}class Pn extends hi{constructor(t,n,i){super(new Float32Array(t),n,i)}}let hW=0;const zo=new cr,lx=new xi,Hd=new ke,Ao=new tl,Qf=new tl,ds=new ke;class xr extends Vl{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:hW++}),this.uuid=So(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(t){return this.index=Array.isArray(t)?new(fR(t)?DR:AR)(t,1):t,this}getAttribute(t){return this.attributes[t]}setAttribute(t,n){return this.attributes[t]=n,this}deleteAttribute(t){return delete this.attributes[t],this}hasAttribute(t){return void 0!==this.attributes[t]}addGroup(t,n,i=0){this.groups.push({start:t,count:n,materialIndex:i})}clearGroups(){this.groups=[]}setDrawRange(t,n){this.drawRange.start=t,this.drawRange.count=n}applyMatrix4(t){const n=this.attributes.position;void 0!==n&&(n.applyMatrix4(t),n.needsUpdate=!0);const i=this.attributes.normal;if(void 0!==i){const o=(new yr).getNormalMatrix(t);i.applyNormalMatrix(o),i.needsUpdate=!0}const s=this.attributes.tangent;return void 0!==s&&(s.transformDirection(t),s.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this}applyQuaternion(t){return zo.makeRotationFromQuaternion(t),this.applyMatrix4(zo),this}rotateX(t){return zo.makeRotationX(t),this.applyMatrix4(zo),this}rotateY(t){return zo.makeRotationY(t),this.applyMatrix4(zo),this}rotateZ(t){return zo.makeRotationZ(t),this.applyMatrix4(zo),this}translate(t,n,i){return zo.makeTranslation(t,n,i),this.applyMatrix4(zo),this}scale(t,n,i){return zo.makeScale(t,n,i),this.applyMatrix4(zo),this}lookAt(t){return lx.lookAt(t),lx.updateMatrix(),this.applyMatrix4(lx.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(Hd).negate(),this.translate(Hd.x,Hd.y,Hd.z),this}setFromPoints(t){const n=[];for(let i=0,s=t.length;i<s;i++){const o=t[i];n.push(o.x,o.y,o.z||0)}return this.setAttribute("position",new Pn(n,3)),this}computeBoundingBox(){null===this.boundingBox&&(this.boundingBox=new tl);const t=this.attributes.position,n=this.morphAttributes.position;if(t&&t.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingBox.set(new ke(-1/0,-1/0,-1/0),new ke(1/0,1/0,1/0));if(void 0!==t){if(this.boundingBox.setFromBufferAttribute(t),n)for(let i=0,s=n.length;i<s;i++)Ao.setFromBufferAttribute(n[i]),this.morphTargetsRelative?(ds.addVectors(this.boundingBox.min,Ao.min),this.boundingBox.expandByPoint(ds),ds.addVectors(this.boundingBox.max,Ao.max),this.boundingBox.expandByPoint(ds)):(this.boundingBox.expandByPoint(Ao.min),this.boundingBox.expandByPoint(Ao.max))}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){null===this.boundingSphere&&(this.boundingSphere=new Ca);const t=this.attributes.position,n=this.morphAttributes.position;if(t&&t.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingSphere.set(new ke,1/0);if(t){const i=this.boundingSphere.center;if(Ao.setFromBufferAttribute(t),n)for(let o=0,a=n.length;o<a;o++)Qf.setFromBufferAttribute(n[o]),this.morphTargetsRelative?(ds.addVectors(Ao.min,Qf.min),Ao.expandByPoint(ds),ds.addVectors(Ao.max,Qf.max),Ao.expandByPoint(ds)):(Ao.expandByPoint(Qf.min),Ao.expandByPoint(Qf.max));Ao.getCenter(i);let s=0;for(let o=0,a=t.count;o<a;o++)ds.fromBufferAttribute(t,o),s=Math.max(s,i.distanceToSquared(ds));if(n)for(let o=0,a=n.length;o<a;o++){const c=n[o],u=this.morphTargetsRelative;for(let _=0,A=c.count;_<A;_++)ds.fromBufferAttribute(c,_),u&&(Hd.fromBufferAttribute(t,_),ds.add(Hd)),s=Math.max(s,i.distanceToSquared(ds))}this.boundingSphere.radius=Math.sqrt(s),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const t=this.index,n=this.attributes;if(null===t||void 0===n.position||void 0===n.normal||void 0===n.uv)return void console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");const i=t.array,s=n.position.array,o=n.normal.array,a=n.uv.array,c=s.length/3;!1===this.hasAttribute("tangent")&&this.setAttribute("tangent",new hi(new Float32Array(4*c),4));const u=this.getAttribute("tangent").array,_=[],A=[];for(let Ne=0;Ne<c;Ne++)_[Ne]=new ke,A[Ne]=new ke;const O=new ke,B=new ke,G=new ke,Y=new Lt,ne=new Lt,ee=new Lt,Q=new ke,ue=new ke;function ce(Ne,dt,It){O.fromArray(s,3*Ne),B.fromArray(s,3*dt),G.fromArray(s,3*It),Y.fromArray(a,2*Ne),ne.fromArray(a,2*dt),ee.fromArray(a,2*It),B.sub(O),G.sub(O),ne.sub(Y),ee.sub(Y);const Ut=1/(ne.x*ee.y-ee.x*ne.y);isFinite(Ut)&&(Q.copy(B).multiplyScalar(ee.y).addScaledVector(G,-ne.y).multiplyScalar(Ut),ue.copy(G).multiplyScalar(ne.x).addScaledVector(B,-ee.x).multiplyScalar(Ut),_[Ne].add(Q),_[dt].add(Q),_[It].add(Q),A[Ne].add(ue),A[dt].add(ue),A[It].add(ue))}let ye=this.groups;0===ye.length&&(ye=[{start:0,count:i.length}]);for(let Ne=0,dt=ye.length;Ne<dt;++Ne){const It=ye[Ne],Ut=It.start;for(let mt=Ut,At=Ut+It.count;mt<At;mt+=3)ce(i[mt+0],i[mt+1],i[mt+2])}const Ee=new ke,Le=new ke,Fe=new ke,Xe=new ke;function Me(Ne){Fe.fromArray(o,3*Ne),Xe.copy(Fe);const dt=_[Ne];Ee.copy(dt),Ee.sub(Fe.multiplyScalar(Fe.dot(dt))).normalize(),Le.crossVectors(Xe,dt);const Ut=Le.dot(A[Ne])<0?-1:1;u[4*Ne]=Ee.x,u[4*Ne+1]=Ee.y,u[4*Ne+2]=Ee.z,u[4*Ne+3]=Ut}for(let Ne=0,dt=ye.length;Ne<dt;++Ne){const It=ye[Ne],Ut=It.start;for(let mt=Ut,At=Ut+It.count;mt<At;mt+=3)Me(i[mt+0]),Me(i[mt+1]),Me(i[mt+2])}}computeVertexNormals(){const t=this.index,n=this.getAttribute("position");if(void 0!==n){let i=this.getAttribute("normal");if(void 0===i)i=new hi(new Float32Array(3*n.count),3),this.setAttribute("normal",i);else for(let B=0,G=i.count;B<G;B++)i.setXYZ(B,0,0,0);const s=new ke,o=new ke,a=new ke,c=new ke,u=new ke,_=new ke,A=new ke,O=new ke;if(t)for(let B=0,G=t.count;B<G;B+=3){const Y=t.getX(B+0),ne=t.getX(B+1),ee=t.getX(B+2);s.fromBufferAttribute(n,Y),o.fromBufferAttribute(n,ne),a.fromBufferAttribute(n,ee),A.subVectors(a,o),O.subVectors(s,o),A.cross(O),c.fromBufferAttribute(i,Y),u.fromBufferAttribute(i,ne),_.fromBufferAttribute(i,ee),c.add(A),u.add(A),_.add(A),i.setXYZ(Y,c.x,c.y,c.z),i.setXYZ(ne,u.x,u.y,u.z),i.setXYZ(ee,_.x,_.y,_.z)}else for(let B=0,G=n.count;B<G;B+=3)s.fromBufferAttribute(n,B+0),o.fromBufferAttribute(n,B+1),a.fromBufferAttribute(n,B+2),A.subVectors(a,o),O.subVectors(s,o),A.cross(O),i.setXYZ(B+0,A.x,A.y,A.z),i.setXYZ(B+1,A.x,A.y,A.z),i.setXYZ(B+2,A.x,A.y,A.z);this.normalizeNormals(),i.needsUpdate=!0}}normalizeNormals(){const t=this.attributes.normal;for(let n=0,i=t.count;n<i;n++)ds.fromBufferAttribute(t,n),ds.normalize(),t.setXYZ(n,ds.x,ds.y,ds.z)}toNonIndexed(){function t(c,u){const _=c.array,A=c.itemSize,O=c.normalized,B=new _.constructor(u.length*A);let G=0,Y=0;for(let ne=0,ee=u.length;ne<ee;ne++){G=c.isInterleavedBufferAttribute?u[ne]*c.data.stride+c.offset:u[ne]*A;for(let Q=0;Q<A;Q++)B[Y++]=_[G++]}return new hi(B,A,O)}if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const n=new xr,i=this.index.array,s=this.attributes;for(const c in s){const _=t(s[c],i);n.setAttribute(c,_)}const o=this.morphAttributes;for(const c in o){const u=[],_=o[c];for(let A=0,O=_.length;A<O;A++){const G=t(_[A],i);u.push(G)}n.morphAttributes[c]=u}n.morphTargetsRelative=this.morphTargetsRelative;const a=this.groups;for(let c=0,u=a.length;c<u;c++){const _=a[c];n.addGroup(_.start,_.count,_.materialIndex)}return n}toJSON(){const t={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(t.uuid=this.uuid,t.type=this.type,""!==this.name&&(t.name=this.name),Object.keys(this.userData).length>0&&(t.userData=this.userData),void 0!==this.parameters){const u=this.parameters;for(const _ in u)void 0!==u[_]&&(t[_]=u[_]);return t}t.data={attributes:{}};const n=this.index;null!==n&&(t.data.index={type:n.array.constructor.name,array:Array.prototype.slice.call(n.array)});const i=this.attributes;for(const u in i)t.data.attributes[u]=i[u].toJSON(t.data);const s={};let o=!1;for(const u in this.morphAttributes){const _=this.morphAttributes[u],A=[];for(let O=0,B=_.length;O<B;O++)A.push(_[O].toJSON(t.data));A.length>0&&(s[u]=A,o=!0)}o&&(t.data.morphAttributes=s,t.data.morphTargetsRelative=this.morphTargetsRelative);const a=this.groups;a.length>0&&(t.data.groups=JSON.parse(JSON.stringify(a)));const c=this.boundingSphere;return null!==c&&(t.data.boundingSphere={center:c.center.toArray(),radius:c.radius}),t}clone(){return(new this.constructor).copy(this)}copy(t){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const n={};this.name=t.name;const i=t.index;null!==i&&this.setIndex(i.clone(n));const s=t.attributes;for(const _ in s)this.setAttribute(_,s[_].clone(n));const o=t.morphAttributes;for(const _ in o){const A=[],O=o[_];for(let B=0,G=O.length;B<G;B++)A.push(O[B].clone(n));this.morphAttributes[_]=A}this.morphTargetsRelative=t.morphTargetsRelative;const a=t.groups;for(let _=0,A=a.length;_<A;_++){const O=a[_];this.addGroup(O.start,O.count,O.materialIndex)}const c=t.boundingBox;null!==c&&(this.boundingBox=c.clone());const u=t.boundingSphere;return null!==u&&(this.boundingSphere=u.clone()),this.drawRange.start=t.drawRange.start,this.drawRange.count=t.drawRange.count,this.userData=t.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const IR=new cr,kc=new Zf,_y=new Ca,PR=new ke,Wd=new ke,qd=new ke,$d=new ke,cx=new ke,xy=new ke,wy=new Lt,Sy=new Lt,My=new Lt,RR=new ke,OR=new ke,LR=new ke,Ey=new ke,Cy=new ke;class ws extends xi{constructor(t=new xr,n=new Nc){super(),this.isMesh=!0,this.type="Mesh",this.geometry=t,this.material=n,this.updateMorphTargets()}copy(t,n){return super.copy(t,n),void 0!==t.morphTargetInfluences&&(this.morphTargetInfluences=t.morphTargetInfluences.slice()),void 0!==t.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},t.morphTargetDictionary)),this.material=Array.isArray(t.material)?t.material.slice():t.material,this.geometry=t.geometry,this}updateMorphTargets(){const n=this.geometry.morphAttributes,i=Object.keys(n);if(i.length>0){const s=n[i[0]];if(void 0!==s){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let o=0,a=s.length;o<a;o++){const c=s[o].name||String(o);this.morphTargetInfluences.push(0),this.morphTargetDictionary[c]=o}}}}getVertexPosition(t,n){const i=this.geometry,o=i.morphAttributes.position,a=i.morphTargetsRelative;n.fromBufferAttribute(i.attributes.position,t);const c=this.morphTargetInfluences;if(o&&c){xy.set(0,0,0);for(let u=0,_=o.length;u<_;u++){const A=c[u];0!==A&&(cx.fromBufferAttribute(o[u],t),xy.addScaledVector(a?cx:cx.sub(n),A))}n.add(xy)}return n}raycast(t,n){const i=this.geometry,o=this.matrixWorld;void 0!==this.material&&(null===i.boundingSphere&&i.computeBoundingSphere(),_y.copy(i.boundingSphere),_y.applyMatrix4(o),kc.copy(t.ray).recast(t.near),(!1!==_y.containsPoint(kc.origin)||!(null===kc.intersectSphere(_y,PR)||kc.origin.distanceToSquared(PR)>(t.far-t.near)**2))&&(IR.copy(o).invert(),kc.copy(t.ray).applyMatrix4(IR),(null===i.boundingBox||!1!==kc.intersectsBox(i.boundingBox))&&this._computeIntersections(t,n,kc)))}_computeIntersections(t,n,i){let s;const o=this.geometry,a=this.material,c=o.index,u=o.attributes.position,_=o.attributes.uv,A=o.attributes.uv1,O=o.attributes.normal,B=o.groups,G=o.drawRange;if(null!==c)if(Array.isArray(a))for(let Y=0,ne=B.length;Y<ne;Y++){const ee=B[Y],Q=a[ee.materialIndex];for(let ye=Math.max(ee.start,G.start),Ee=Math.min(c.count,Math.min(ee.start+ee.count,G.start+G.count));ye<Ee;ye+=3)s=Ty(this,Q,t,i,_,A,O,c.getX(ye),c.getX(ye+1),c.getX(ye+2)),s&&(s.faceIndex=Math.floor(ye/3),s.face.materialIndex=ee.materialIndex,n.push(s))}else for(let ee=Math.max(0,G.start),Q=Math.min(c.count,G.start+G.count);ee<Q;ee+=3)s=Ty(this,a,t,i,_,A,O,c.getX(ee),c.getX(ee+1),c.getX(ee+2)),s&&(s.faceIndex=Math.floor(ee/3),n.push(s));else if(void 0!==u)if(Array.isArray(a))for(let Y=0,ne=B.length;Y<ne;Y++){const ee=B[Y],Q=a[ee.materialIndex];for(let ye=Math.max(ee.start,G.start),Ee=Math.min(u.count,Math.min(ee.start+ee.count,G.start+G.count));ye<Ee;ye+=3)s=Ty(this,Q,t,i,_,A,O,ye,ye+1,ye+2),s&&(s.faceIndex=Math.floor(ye/3),s.face.materialIndex=ee.materialIndex,n.push(s))}else for(let ee=Math.max(0,G.start),Q=Math.min(u.count,G.start+G.count);ee<Q;ee+=3)s=Ty(this,a,t,i,_,A,O,ee,ee+1,ee+2),s&&(s.faceIndex=Math.floor(ee/3),n.push(s))}}function Ty(r,t,n,i,s,o,a,c,u,_){r.getVertexPosition(c,Wd),r.getVertexPosition(u,qd),r.getVertexPosition(_,$d);const A=function fW(r,t,n,i,s,o,a,c){let u;if(u=1===t.side?i.intersectTriangle(a,o,s,!0,c):i.intersectTriangle(s,o,a,0===t.side,c),null===u)return null;Cy.copy(c),Cy.applyMatrix4(r.matrixWorld);const _=n.ray.origin.distanceTo(Cy);return _<n.near||_>n.far?null:{distance:_,point:Cy.clone(),object:r}}(r,t,n,i,Wd,qd,$d,Ey);if(A){s&&(wy.fromBufferAttribute(s,c),Sy.fromBufferAttribute(s,u),My.fromBufferAttribute(s,_),A.uv=To.getInterpolation(Ey,Wd,qd,$d,wy,Sy,My,new Lt)),o&&(wy.fromBufferAttribute(o,c),Sy.fromBufferAttribute(o,u),My.fromBufferAttribute(o,_),A.uv1=To.getInterpolation(Ey,Wd,qd,$d,wy,Sy,My,new Lt),A.uv2=A.uv1),a&&(RR.fromBufferAttribute(a,c),OR.fromBufferAttribute(a,u),LR.fromBufferAttribute(a,_),A.normal=To.getInterpolation(Ey,Wd,qd,$d,RR,OR,LR,new ke),A.normal.dot(i.direction)>0&&A.normal.multiplyScalar(-1));const O={a:c,b:u,c:_,normal:new ke,materialIndex:0};To.getNormal(Wd,qd,$d,O.normal),A.face=O}return A}class Xd extends xr{constructor(t=1,n=1,i=1,s=1,o=1,a=1){super(),this.type="BoxGeometry",this.parameters={width:t,height:n,depth:i,widthSegments:s,heightSegments:o,depthSegments:a};const c=this;s=Math.floor(s),o=Math.floor(o),a=Math.floor(a);const u=[],_=[],A=[],O=[];let B=0,G=0;function Y(ne,ee,Q,ue,ce,ye,Ee,Le,Fe,Xe,Me){const Ne=ye/Fe,dt=Ee/Xe,It=ye/2,Ut=Ee/2,Qe=Le/2,mt=Fe+1,At=Xe+1;let Ct=0,Jt=0;const Rt=new ke;for(let Bt=0;Bt<At;Bt++){const st=Bt*dt-Ut;for(let Et=0;Et<mt;Et++)Rt[ne]=(Et*Ne-It)*ue,Rt[ee]=st*ce,Rt[Q]=Qe,_.push(Rt.x,Rt.y,Rt.z),Rt[ne]=0,Rt[ee]=0,Rt[Q]=Le>0?1:-1,A.push(Rt.x,Rt.y,Rt.z),O.push(Et/Fe),O.push(1-Bt/Xe),Ct+=1}for(let Bt=0;Bt<Xe;Bt++)for(let st=0;st<Fe;st++){const mn=B+st+mt*(Bt+1),wn=B+(st+1)+mt*(Bt+1),Cn=B+(st+1)+mt*Bt;u.push(B+st+mt*Bt,mn,Cn),u.push(mn,wn,Cn),Jt+=6}c.addGroup(G,Jt,Me),G+=Jt,B+=Ct}Y("z","y","x",-1,-1,i,n,t,a,o,0),Y("z","y","x",1,-1,i,n,-t,a,o,1),Y("x","z","y",1,1,t,i,n,s,a,2),Y("x","z","y",1,-1,t,i,-n,s,a,3),Y("x","y","z",1,-1,t,n,i,s,o,4),Y("x","y","z",-1,-1,t,n,-i,s,o,5),this.setIndex(u),this.setAttribute("position",new Pn(_,3)),this.setAttribute("normal",new Pn(A,3)),this.setAttribute("uv",new Pn(O,2))}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new Xd(t.width,t.height,t.depth,t.widthSegments,t.heightSegments,t.depthSegments)}}function Yd(r){const t={};for(const n in r){t[n]={};for(const i in r[n]){const s=r[n][i];s&&(s.isColor||s.isMatrix3||s.isMatrix4||s.isVector2||s.isVector3||s.isVector4||s.isTexture||s.isQuaternion)?s.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),t[n][i]=null):t[n][i]=s.clone():t[n][i]=Array.isArray(s)?s.slice():s}}return t}function Zs(r){const t={};for(let n=0;n<r.length;n++){const i=Yd(r[n]);for(const s in i)t[s]=i[s]}return t}function jR(r){return null===r.getRenderTarget()?r.outputColorSpace:ti.workingColorSpace}const mW={clone:Yd,merge:Zs};class ll extends Ys{constructor(t){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",this.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,void 0!==t&&this.setValues(t)}copy(t){return super.copy(t),this.fragmentShader=t.fragmentShader,this.vertexShader=t.vertexShader,this.uniforms=Yd(t.uniforms),this.uniformsGroups=function pW(r){const t=[];for(let n=0;n<r.length;n++)t.push(r[n].clone());return t}(t.uniformsGroups),this.defines=Object.assign({},t.defines),this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.fog=t.fog,this.lights=t.lights,this.clipping=t.clipping,this.extensions=Object.assign({},t.extensions),this.glslVersion=t.glslVersion,this}toJSON(t){const n=super.toJSON(t);n.glslVersion=this.glslVersion,n.uniforms={};for(const s in this.uniforms){const a=this.uniforms[s].value;n.uniforms[s]=a&&a.isTexture?{type:"t",value:a.toJSON(t).uuid}:a&&a.isColor?{type:"c",value:a.getHex()}:a&&a.isVector2?{type:"v2",value:a.toArray()}:a&&a.isVector3?{type:"v3",value:a.toArray()}:a&&a.isVector4?{type:"v4",value:a.toArray()}:a&&a.isMatrix3?{type:"m3",value:a.toArray()}:a&&a.isMatrix4?{type:"m4",value:a.toArray()}:{value:a}}Object.keys(this.defines).length>0&&(n.defines=this.defines),n.vertexShader=this.vertexShader,n.fragmentShader=this.fragmentShader,n.lights=this.lights,n.clipping=this.clipping;const i={};for(const s in this.extensions)!0===this.extensions[s]&&(i[s]=!0);return Object.keys(i).length>0&&(n.extensions=i),n}}class ux extends xi{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new cr,this.projectionMatrix=new cr,this.projectionMatrixInverse=new cr,this.coordinateSystem=el}copy(t,n){return super.copy(t,n),this.matrixWorldInverse.copy(t.matrixWorldInverse),this.projectionMatrix.copy(t.projectionMatrix),this.projectionMatrixInverse.copy(t.projectionMatrixInverse),this.coordinateSystem=t.coordinateSystem,this}getWorldDirection(t){return super.getWorldDirection(t).negate()}updateMatrixWorld(t){super.updateMatrixWorld(t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(t,n){super.updateWorldMatrix(t,n),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return(new this.constructor).copy(this)}}class Ss extends ux{constructor(t=50,n=1,i=.1,s=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=t,this.zoom=1,this.near=i,this.far=s,this.focus=10,this.aspect=n,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(t,n){return super.copy(t,n),this.fov=t.fov,this.zoom=t.zoom,this.near=t.near,this.far=t.far,this.focus=t.focus,this.aspect=t.aspect,this.view=null===t.view?null:Object.assign({},t.view),this.filmGauge=t.filmGauge,this.filmOffset=t.filmOffset,this}setFocalLength(t){const n=.5*this.getFilmHeight()/t;this.fov=2*Rd*Math.atan(n),this.updateProjectionMatrix()}getFocalLength(){const t=Math.tan(.5*Oc*this.fov);return.5*this.getFilmHeight()/t}getEffectiveFOV(){return 2*Rd*Math.atan(Math.tan(.5*Oc*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(t,n,i,s,o,a){this.aspect=t/n,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=n,this.view.offsetX=i,this.view.offsetY=s,this.view.width=o,this.view.height=a,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const t=this.near;let n=t*Math.tan(.5*Oc*this.fov)/this.zoom,i=2*n,s=this.aspect*i,o=-.5*s;const a=this.view;if(null!==this.view&&this.view.enabled){const u=a.fullWidth,_=a.fullHeight;o+=a.offsetX*s/u,n-=a.offsetY*i/_,s*=a.width/u,i*=a.height/_}const c=this.filmOffset;0!==c&&(o+=t*c/this.getFilmWidth()),this.projectionMatrix.makePerspective(o,o+s,n,n-i,t,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(t){const n=super.toJSON(t);return n.object.fov=this.fov,n.object.zoom=this.zoom,n.object.near=this.near,n.object.far=this.far,n.object.focus=this.focus,n.object.aspect=this.aspect,null!==this.view&&(n.object.view=Object.assign({},this.view)),n.object.filmGauge=this.filmGauge,n.object.filmOffset=this.filmOffset,n}}class vW extends xi{constructor(t,n,i){super(),this.type="CubeCamera",this.renderTarget=i,this.coordinateSystem=null,this.activeMipmapLevel=0;const s=new Ss(-90,1,t,n);s.layers=this.layers,this.add(s);const o=new Ss(-90,1,t,n);o.layers=this.layers,this.add(o);const a=new Ss(-90,1,t,n);a.layers=this.layers,this.add(a);const c=new Ss(-90,1,t,n);c.layers=this.layers,this.add(c);const u=new Ss(-90,1,t,n);u.layers=this.layers,this.add(u);const _=new Ss(-90,1,t,n);_.layers=this.layers,this.add(_)}updateCoordinateSystem(){const t=this.coordinateSystem,n=this.children.concat(),[i,s,o,a,c,u]=n;for(const _ of n)this.remove(_);if(t===el)i.up.set(0,1,0),i.lookAt(1,0,0),s.up.set(0,1,0),s.lookAt(-1,0,0),o.up.set(0,0,-1),o.lookAt(0,1,0),a.up.set(0,0,1),a.lookAt(0,-1,0),c.up.set(0,1,0),c.lookAt(0,0,1),u.up.set(0,1,0),u.lookAt(0,0,-1);else{if(2001!==t)throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+t);i.up.set(0,-1,0),i.lookAt(-1,0,0),s.up.set(0,-1,0),s.lookAt(1,0,0),o.up.set(0,0,1),o.lookAt(0,1,0),a.up.set(0,0,-1),a.lookAt(0,-1,0),c.up.set(0,-1,0),c.lookAt(0,0,1),u.up.set(0,-1,0),u.lookAt(0,0,-1)}for(const _ of n)this.add(_),_.updateMatrixWorld()}update(t,n){null===this.parent&&this.updateMatrixWorld();const{renderTarget:i,activeMipmapLevel:s}=this;this.coordinateSystem!==t.coordinateSystem&&(this.coordinateSystem=t.coordinateSystem,this.updateCoordinateSystem());const[o,a,c,u,_,A]=this.children,O=t.getRenderTarget(),B=t.getActiveCubeFace(),G=t.getActiveMipmapLevel(),Y=t.xr.enabled;t.xr.enabled=!1;const ne=i.texture.generateMipmaps;i.texture.generateMipmaps=!1,t.setRenderTarget(i,0,s),t.render(n,o),t.setRenderTarget(i,1,s),t.render(n,a),t.setRenderTarget(i,2,s),t.render(n,c),t.setRenderTarget(i,3,s),t.render(n,u),t.setRenderTarget(i,4,s),t.render(n,_),i.texture.generateMipmaps=ne,t.setRenderTarget(i,5,s),t.render(n,A),t.setRenderTarget(O,B,G),t.xr.enabled=Y,i.texture.needsPMREMUpdate=!0}}class Ay extends Mo{constructor(t,n,i,s,o,a,c,u,_,A){super(t=void 0!==t?t:[],n=void 0!==n?n:Fl,i,s,o,a,c,u,_,A),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(t){this.image=t}}class bW extends Ea{constructor(t=1,n={}){super(t,t,n),this.isWebGLCubeRenderTarget=!0;const i={width:t,height:t,depth:1},s=[i,i,i,i,i,i];void 0!==n.encoding&&($f("THREE.WebGLCubeRenderTarget: option.encoding has been replaced by option.colorSpace."),n.colorSpace=n.encoding===Pc?us:""),this.texture=new Ay(s,n.mapping,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=void 0!==n.generateMipmaps&&n.generateMipmaps,this.texture.minFilter=void 0!==n.minFilter?n.minFilter:Yi}fromEquirectangularTexture(t,n){this.texture.type=n.type,this.texture.colorSpace=n.colorSpace,this.texture.generateMipmaps=n.generateMipmaps,this.texture.minFilter=n.minFilter,this.texture.magFilter=n.magFilter;const i_uniforms={tEquirect:{value:null}},i_vertexShader="\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\tvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\n\t\t\t\t\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n\n\t\t\t\t}\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvWorldDirection = transformDirection( position, modelMatrix );\n\n\t\t\t\t\t#include <begin_vertex>\n\t\t\t\t\t#include <project_vertex>\n\n\t\t\t\t}\n\t\t\t",i_fragmentShader="\n\n\t\t\t\tuniform sampler2D tEquirect;\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\t#include <common>\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvec3 direction = normalize( vWorldDirection );\n\n\t\t\t\t\tvec2 sampleUV = equirectUv( direction );\n\n\t\t\t\t\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\n\t\t\t\t}\n\t\t\t",s=new Xd(5,5,5),o=new ll({name:"CubemapFromEquirect",uniforms:Yd(i_uniforms),vertexShader:i_vertexShader,fragmentShader:i_fragmentShader,side:1,blending:0});o.uniforms.tEquirect.value=n;const a=new ws(s,o),c=n.minFilter;return n.minFilter===Ac&&(n.minFilter=Yi),new vW(1,10,this).update(t,a),n.minFilter=c,a.geometry.dispose(),a.material.dispose(),this}clear(t,n,i,s){const o=t.getRenderTarget();for(let a=0;a<6;a++)t.setRenderTarget(this,a),t.clear(n,i,s);t.setRenderTarget(o)}}const dx=new ke,_W=new ke,xW=new yr;class Fc{constructor(t=new ke(1,0,0),n=0){this.isPlane=!0,this.normal=t,this.constant=n}set(t,n){return this.normal.copy(t),this.constant=n,this}setComponents(t,n,i,s){return this.normal.set(t,n,i),this.constant=s,this}setFromNormalAndCoplanarPoint(t,n){return this.normal.copy(t),this.constant=-n.dot(this.normal),this}setFromCoplanarPoints(t,n,i){const s=dx.subVectors(i,n).cross(_W.subVectors(t,n)).normalize();return this.setFromNormalAndCoplanarPoint(s,t),this}copy(t){return this.normal.copy(t.normal),this.constant=t.constant,this}normalize(){const t=1/this.normal.length();return this.normal.multiplyScalar(t),this.constant*=t,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(t){return this.normal.dot(t)+this.constant}distanceToSphere(t){return this.distanceToPoint(t.center)-t.radius}projectPoint(t,n){return n.copy(t).addScaledVector(this.normal,-this.distanceToPoint(t))}intersectLine(t,n){const i=t.delta(dx),s=this.normal.dot(i);if(0===s)return 0===this.distanceToPoint(t.start)?n.copy(t.start):null;const o=-(t.start.dot(this.normal)+this.constant)/s;return o<0||o>1?null:n.copy(t.start).addScaledVector(i,o)}intersectsLine(t){const n=this.distanceToPoint(t.start),i=this.distanceToPoint(t.end);return n<0&&i>0||i<0&&n>0}intersectsBox(t){return t.intersectsPlane(this)}intersectsSphere(t){return t.intersectsPlane(this)}coplanarPoint(t){return t.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(t,n){const i=n||xW.getNormalMatrix(t),s=this.coplanarPoint(dx).applyMatrix4(t),o=this.normal.applyMatrix3(i).normalize();return this.constant=-s.dot(o),this}translate(t){return this.constant-=t.dot(this.normal),this}equals(t){return t.normal.equals(this.normal)&&t.constant===this.constant}clone(){return(new this.constructor).copy(this)}}const Uc=new Ca,Dy=new ke;class hx{constructor(t=new Fc,n=new Fc,i=new Fc,s=new Fc,o=new Fc,a=new Fc){this.planes=[t,n,i,s,o,a]}set(t,n,i,s,o,a){const c=this.planes;return c[0].copy(t),c[1].copy(n),c[2].copy(i),c[3].copy(s),c[4].copy(o),c[5].copy(a),this}copy(t){const n=this.planes;for(let i=0;i<6;i++)n[i].copy(t.planes[i]);return this}setFromProjectionMatrix(t,n=el){const i=this.planes,s=t.elements,o=s[0],a=s[1],c=s[2],u=s[3],_=s[4],A=s[5],O=s[6],B=s[7],G=s[8],Y=s[9],ne=s[10],ee=s[11],Q=s[12],ue=s[13],ce=s[14],ye=s[15];if(i[0].setComponents(u-o,B-_,ee-G,ye-Q).normalize(),i[1].setComponents(u+o,B+_,ee+G,ye+Q).normalize(),i[2].setComponents(u+a,B+A,ee+Y,ye+ue).normalize(),i[3].setComponents(u-a,B-A,ee-Y,ye-ue).normalize(),i[4].setComponents(u-c,B-O,ee-ne,ye-ce).normalize(),n===el)i[5].setComponents(u+c,B+O,ee+ne,ye+ce).normalize();else{if(2001!==n)throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+n);i[5].setComponents(c,O,ne,ce).normalize()}return this}intersectsObject(t){if(void 0!==t.boundingSphere)null===t.boundingSphere&&t.computeBoundingSphere(),Uc.copy(t.boundingSphere).applyMatrix4(t.matrixWorld);else{const n=t.geometry;null===n.boundingSphere&&n.computeBoundingSphere(),Uc.copy(n.boundingSphere).applyMatrix4(t.matrixWorld)}return this.intersectsSphere(Uc)}intersectsSprite(t){return Uc.center.set(0,0,0),Uc.radius=.7071067811865476,Uc.applyMatrix4(t.matrixWorld),this.intersectsSphere(Uc)}intersectsSphere(t){const n=this.planes,i=t.center,s=-t.radius;for(let o=0;o<6;o++)if(n[o].distanceToPoint(i)<s)return!1;return!0}intersectsBox(t){const n=this.planes;for(let i=0;i<6;i++){const s=n[i];if(Dy.x=s.normal.x>0?t.max.x:t.min.x,Dy.y=s.normal.y>0?t.max.y:t.min.y,Dy.z=s.normal.z>0?t.max.z:t.min.z,s.distanceToPoint(Dy)<0)return!1}return!0}containsPoint(t){const n=this.planes;for(let i=0;i<6;i++)if(n[i].distanceToPoint(t)<0)return!1;return!0}clone(){return(new this.constructor).copy(this)}}function NR(){let r=null,t=!1,n=null,i=null;function s(o,a){n(o,a),i=r.requestAnimationFrame(s)}return{start:function(){!0!==t&&null!==n&&(i=r.requestAnimationFrame(s),t=!0)},stop:function(){r.cancelAnimationFrame(i),t=!1},setAnimationLoop:function(o){n=o},setContext:function(o){r=o}}}function wW(r,t){const n=t.isWebGL2,i=new WeakMap;return{get:function a(_){return _.isInterleavedBufferAttribute&&(_=_.data),i.get(_)},remove:function c(_){_.isInterleavedBufferAttribute&&(_=_.data);const A=i.get(_);A&&(r.deleteBuffer(A.buffer),i.delete(_))},update:function u(_,A){if(_.isGLBufferAttribute){const B=i.get(_);return void((!B||B.version<_.version)&&i.set(_,{buffer:_.buffer,type:_.type,bytesPerElement:_.elementSize,version:_.version}))}_.isInterleavedBufferAttribute&&(_=_.data);const O=i.get(_);void 0===O?i.set(_,function s(_,A){const O=_.array,B=_.usage,G=r.createBuffer();let Y;if(r.bindBuffer(A,G),r.bufferData(A,O,B),_.onUploadCallback(),O instanceof Float32Array)Y=r.FLOAT;else if(O instanceof Uint16Array)if(_.isFloat16BufferAttribute){if(!n)throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");Y=r.HALF_FLOAT}else Y=r.UNSIGNED_SHORT;else if(O instanceof Int16Array)Y=r.SHORT;else if(O instanceof Uint32Array)Y=r.UNSIGNED_INT;else if(O instanceof Int32Array)Y=r.INT;else if(O instanceof Int8Array)Y=r.BYTE;else if(O instanceof Uint8Array)Y=r.UNSIGNED_BYTE;else{if(!(O instanceof Uint8ClampedArray))throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+O);Y=r.UNSIGNED_BYTE}return{buffer:G,type:Y,bytesPerElement:O.BYTES_PER_ELEMENT,version:_.version}}(_,A)):O.version<_.version&&(function o(_,A,O){const B=A.array,G=A.updateRange;r.bindBuffer(O,_),-1===G.count?r.bufferSubData(O,0,B):(n?r.bufferSubData(O,G.offset*B.BYTES_PER_ELEMENT,B,G.offset,G.count):r.bufferSubData(O,G.offset*B.BYTES_PER_ELEMENT,B.subarray(G.offset,G.offset+G.count)),G.count=-1),A.onUploadCallback()}(O.buffer,_,A),O.version=_.version)}}}class Iy extends xr{constructor(t=1,n=1,i=1,s=1){super(),this.type="PlaneGeometry",this.parameters={width:t,height:n,widthSegments:i,heightSegments:s};const o=t/2,a=n/2,c=Math.floor(i),u=Math.floor(s),_=c+1,A=u+1,O=t/c,B=n/u,G=[],Y=[],ne=[],ee=[];for(let Q=0;Q<A;Q++){const ue=Q*B-a;for(let ce=0;ce<_;ce++)Y.push(ce*O-o,-ue,0),ne.push(0,0,1),ee.push(ce/c),ee.push(1-Q/u)}for(let Q=0;Q<u;Q++)for(let ue=0;ue<c;ue++){const ye=ue+_*(Q+1),Ee=ue+1+_*(Q+1),Le=ue+1+_*Q;G.push(ue+_*Q,ye,Le),G.push(ye,Ee,Le)}this.setIndex(G),this.setAttribute("position",new Pn(Y,3)),this.setAttribute("normal",new Pn(ne,3)),this.setAttribute("uv",new Pn(ee,2))}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new Iy(t.width,t.height,t.widthSegments,t.heightSegments)}}const gr={alphahash_fragment:"#ifdef USE_ALPHAHASH\n\tif ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;\n#endif",alphahash_pars_fragment:"#ifdef USE_ALPHAHASH\n\tconst float ALPHA_HASH_SCALE = 0.05;\n\tfloat hash2D( vec2 value ) {\n\t\treturn fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );\n\t}\n\tfloat hash3D( vec3 value ) {\n\t\treturn hash2D( vec2( hash2D( value.xy ), value.z ) );\n\t}\n\tfloat getAlphaHashThreshold( vec3 position ) {\n\t\tfloat maxDeriv = max(\n\t\t\tlength( dFdx( position.xyz ) ),\n\t\t\tlength( dFdy( position.xyz ) )\n\t\t);\n\t\tfloat pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );\n\t\tvec2 pixScales = vec2(\n\t\t\texp2( floor( log2( pixScale ) ) ),\n\t\t\texp2( ceil( log2( pixScale ) ) )\n\t\t);\n\t\tvec2 alpha = vec2(\n\t\t\thash3D( floor( pixScales.x * position.xyz ) ),\n\t\t\thash3D( floor( pixScales.y * position.xyz ) )\n\t\t);\n\t\tfloat lerpFactor = fract( log2( pixScale ) );\n\t\tfloat x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;\n\t\tfloat a = min( lerpFactor, 1.0 - lerpFactor );\n\t\tvec3 cases = vec3(\n\t\t\tx * x / ( 2.0 * a * ( 1.0 - a ) ),\n\t\t\t( x - 0.5 * a ) / ( 1.0 - a ),\n\t\t\t1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )\n\t\t);\n\t\tfloat threshold = ( x < ( 1.0 - a ) )\n\t\t\t? ( ( x < a ) ? cases.x : cases.y )\n\t\t\t: cases.z;\n\t\treturn clamp( threshold , 1.0e-6, 1.0 );\n\t}\n#endif",alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;\n#endif",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",alphatest_fragment:"#ifdef USE_ALPHATEST\n\tif ( diffuseColor.a < alphaTest ) discard;\n#endif",alphatest_pars_fragment:"#ifdef USE_ALPHATEST\n\tuniform float alphaTest;\n#endif",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_CLEARCOAT ) \n\t\tclearcoatSpecularIndirect *= ambientOcclusion;\n\t#endif\n\t#if defined( USE_SHEEN ) \n\t\tsheenSpecularIndirect *= ambientOcclusion;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD )\n\t\tfloat dotNV = saturate( dot( geometryNormal, geometryViewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );\n\t#endif\n#endif",aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",begin_vertex:"vec3 transformed = vec3( position );\n#ifdef USE_ALPHAHASH\n\tvPosition = vec3( position );\n#endif",beginnormal_vertex:"vec3 objectNormal = vec3( normal );\n#ifdef USE_TANGENT\n\tvec3 objectTangent = vec3( tangent.xyz );\n#endif",bsdfs:"float G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, 1.0, dotVH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n} // validated",iridescence_fragment:"#ifdef USE_IRIDESCENCE\n\tconst mat3 XYZ_TO_REC709 = mat3(\n\t\t 3.2404542, -0.9692660,  0.0556434,\n\t\t-1.5371385,  1.8760108, -0.2040259,\n\t\t-0.4985314,  0.0415560,  1.0572252\n\t);\n\tvec3 Fresnel0ToIor( vec3 fresnel0 ) {\n\t\tvec3 sqrtF0 = sqrt( fresnel0 );\n\t\treturn ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );\n\t}\n\tvec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {\n\t\treturn pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );\n\t}\n\tfloat IorToFresnel0( float transmittedIor, float incidentIor ) {\n\t\treturn pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));\n\t}\n\tvec3 evalSensitivity( float OPD, vec3 shift ) {\n\t\tfloat phase = 2.0 * PI * OPD * 1.0e-9;\n\t\tvec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );\n\t\tvec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );\n\t\tvec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );\n\t\tvec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );\n\t\txyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );\n\t\txyz /= 1.0685e-7;\n\t\tvec3 rgb = XYZ_TO_REC709 * xyz;\n\t\treturn rgb;\n\t}\n\tvec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {\n\t\tvec3 I;\n\t\tfloat iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );\n\t\tfloat sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );\n\t\tfloat cosTheta2Sq = 1.0 - sinTheta2Sq;\n\t\tif ( cosTheta2Sq < 0.0 ) {\n\t\t\treturn vec3( 1.0 );\n\t\t}\n\t\tfloat cosTheta2 = sqrt( cosTheta2Sq );\n\t\tfloat R0 = IorToFresnel0( iridescenceIOR, outsideIOR );\n\t\tfloat R12 = F_Schlick( R0, 1.0, cosTheta1 );\n\t\tfloat T121 = 1.0 - R12;\n\t\tfloat phi12 = 0.0;\n\t\tif ( iridescenceIOR < outsideIOR ) phi12 = PI;\n\t\tfloat phi21 = PI - phi12;\n\t\tvec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );\t\tvec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );\n\t\tvec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );\n\t\tvec3 phi23 = vec3( 0.0 );\n\t\tif ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;\n\t\tif ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;\n\t\tif ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;\n\t\tfloat OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;\n\t\tvec3 phi = vec3( phi21 ) + phi23;\n\t\tvec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );\n\t\tvec3 r123 = sqrt( R123 );\n\t\tvec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );\n\t\tvec3 C0 = R12 + Rs;\n\t\tI = C0;\n\t\tvec3 Cm = Rs - T121;\n\t\tfor ( int m = 1; m <= 2; ++ m ) {\n\t\t\tCm *= r123;\n\t\t\tvec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );\n\t\t\tI += Cm * Sm;\n\t\t}\n\t\treturn max( I, vec3( 0.0 ) );\n\t}\n#endif",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vBumpMapUv );\n\t\tvec2 dSTdy = dFdy( vBumpMapUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {\n\t\tvec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );\n\t\tvec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 ) * faceDirection;\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\tplane = clippingPlanes[ i ];\n\t\tif ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t#pragma unroll_loop_end\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\tif ( clipped ) discard;\n\t#endif\n#endif",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n#endif",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvClipPosition = - mvPosition.xyz;\n#endif",color_fragment:"#if defined( USE_COLOR_ALPHA )\n\tdiffuseColor *= vColor;\n#elif defined( USE_COLOR )\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR )\n\tvarying vec3 vColor;\n#endif",color_pars_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvarying vec3 vColor;\n#endif",color_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvColor = vec4( 1.0 );\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvColor = vec3( 1.0 );\n#endif\n#ifdef USE_COLOR\n\tvColor *= color;\n#endif\n#ifdef USE_INSTANCING_COLOR\n\tvColor.xyz *= instanceColor.xyz;\n#endif",common:"#define PI 3.141592653589793\n#define PI2 6.283185307179586\n#define PI_HALF 1.5707963267948966\n#define RECIPROCAL_PI 0.3183098861837907\n#define RECIPROCAL_PI2 0.15915494309189535\n#define EPSILON 1e-6\n#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\n#define whiteComplement( a ) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nvec3 pow2( const in vec3 x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }\nfloat average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract( sin( sn ) * c );\n}\n#ifdef HIGH_PRECISION\n\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\n#else\n\tfloat precisionSafeLength( vec3 v ) {\n\t\tfloat maxComponent = max3( abs( v ) );\n\t\treturn length( v / maxComponent ) * maxComponent;\n\t}\n#endif\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\n#ifdef USE_ALPHAHASH\n\tvarying vec3 vPosition;\n#endif\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nfloat luminance( const in vec3 rgb ) {\n\tconst vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );\n\treturn dot( weights, rgb );\n}\nbool isPerspectiveMatrix( mat4 m ) {\n\treturn m[ 2 ][ 3 ] == - 1.0;\n}\nvec2 equirectUv( in vec3 dir ) {\n\tfloat u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;\n\tfloat v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\treturn vec2( u, v );\n}\nvec3 BRDF_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n}\nfloat F_Schlick( const in float f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n} // validated",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n\t#define cubeUV_minMipLevel 4.0\n\t#define cubeUV_minTileSize 16.0\n\tfloat getFace( vec3 direction ) {\n\t\tvec3 absDirection = abs( direction );\n\t\tfloat face = - 1.0;\n\t\tif ( absDirection.x > absDirection.z ) {\n\t\t\tif ( absDirection.x > absDirection.y )\n\t\t\t\tface = direction.x > 0.0 ? 0.0 : 3.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t} else {\n\t\t\tif ( absDirection.z > absDirection.y )\n\t\t\t\tface = direction.z > 0.0 ? 2.0 : 5.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t}\n\t\treturn face;\n\t}\n\tvec2 getUV( vec3 direction, float face ) {\n\t\tvec2 uv;\n\t\tif ( face == 0.0 ) {\n\t\t\tuv = vec2( direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 1.0 ) {\n\t\t\tuv = vec2( - direction.x, - direction.z ) / abs( direction.y );\n\t\t} else if ( face == 2.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.y ) / abs( direction.z );\n\t\t} else if ( face == 3.0 ) {\n\t\t\tuv = vec2( - direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 4.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.z ) / abs( direction.y );\n\t\t} else {\n\t\t\tuv = vec2( direction.x, direction.y ) / abs( direction.z );\n\t\t}\n\t\treturn 0.5 * ( uv + 1.0 );\n\t}\n\tvec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {\n\t\tfloat face = getFace( direction );\n\t\tfloat filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );\n\t\tmipInt = max( mipInt, cubeUV_minMipLevel );\n\t\tfloat faceSize = exp2( mipInt );\n\t\thighp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;\n\t\tif ( face > 2.0 ) {\n\t\t\tuv.y += faceSize;\n\t\t\tface -= 3.0;\n\t\t}\n\t\tuv.x += face * faceSize;\n\t\tuv.x += filterInt * 3.0 * cubeUV_minTileSize;\n\t\tuv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );\n\t\tuv.x *= CUBEUV_TEXEL_WIDTH;\n\t\tuv.y *= CUBEUV_TEXEL_HEIGHT;\n\t\t#ifdef texture2DGradEXT\n\t\t\treturn texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;\n\t\t#else\n\t\t\treturn texture2D( envMap, uv ).rgb;\n\t\t#endif\n\t}\n\t#define cubeUV_r0 1.0\n\t#define cubeUV_v0 0.339\n\t#define cubeUV_m0 - 2.0\n\t#define cubeUV_r1 0.8\n\t#define cubeUV_v1 0.276\n\t#define cubeUV_m1 - 1.0\n\t#define cubeUV_r4 0.4\n\t#define cubeUV_v4 0.046\n\t#define cubeUV_m4 2.0\n\t#define cubeUV_r5 0.305\n\t#define cubeUV_v5 0.016\n\t#define cubeUV_m5 3.0\n\t#define cubeUV_r6 0.21\n\t#define cubeUV_v6 0.0038\n\t#define cubeUV_m6 4.0\n\tfloat roughnessToMip( float roughness ) {\n\t\tfloat mip = 0.0;\n\t\tif ( roughness >= cubeUV_r1 ) {\n\t\t\tmip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;\n\t\t} else if ( roughness >= cubeUV_r4 ) {\n\t\t\tmip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;\n\t\t} else if ( roughness >= cubeUV_r5 ) {\n\t\t\tmip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;\n\t\t} else if ( roughness >= cubeUV_r6 ) {\n\t\t\tmip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;\n\t\t} else {\n\t\t\tmip = - 2.0 * log2( 1.16 * roughness );\t\t}\n\t\treturn mip;\n\t}\n\tvec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {\n\t\tfloat mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );\n\t\tfloat mipF = fract( mip );\n\t\tfloat mipInt = floor( mip );\n\t\tvec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );\n\t\tif ( mipF == 0.0 ) {\n\t\t\treturn vec4( color0, 1.0 );\n\t\t} else {\n\t\t\tvec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );\n\t\t\treturn vec4( mix( color0, color1, mipF ), 1.0 );\n\t\t}\n\t}\n#endif",defaultnormal_vertex:"vec3 transformedNormal = objectNormal;\n#ifdef USE_INSTANCING\n\tmat3 m = mat3( instanceMatrix );\n\ttransformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );\n\ttransformedNormal = m * transformedNormal;\n#endif\ntransformedNormal = normalMatrix * transformedNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n\tvec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#ifdef FLIP_SIDED\n\t\ttransformedTangent = - transformedTangent;\n\t#endif\n#endif",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );\n#endif",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif",colorspace_fragment:"gl_FragColor = linearToOutputTexel( gl_FragColor );",colorspace_pars_fragment:"\nconst mat3 LINEAR_SRGB_TO_LINEAR_DISPLAY_P3 = mat3(\n\tvec3( 0.8224621, 0.177538, 0.0 ),\n\tvec3( 0.0331941, 0.9668058, 0.0 ),\n\tvec3( 0.0170827, 0.0723974, 0.9105199 )\n);\nconst mat3 LINEAR_DISPLAY_P3_TO_LINEAR_SRGB = mat3(\n\tvec3( 1.2249401, - 0.2249404, 0.0 ),\n\tvec3( - 0.0420569, 1.0420571, 0.0 ),\n\tvec3( - 0.0196376, - 0.0786361, 1.0982735 )\n);\nvec4 LinearSRGBToLinearDisplayP3( in vec4 value ) {\n\treturn vec4( value.rgb * LINEAR_SRGB_TO_LINEAR_DISPLAY_P3, value.a );\n}\nvec4 LinearDisplayP3ToLinearSRGB( in vec4 value ) {\n\treturn vec4( value.rgb * LINEAR_DISPLAY_P3_TO_LINEAR_SRGB, value.a );\n}\nvec4 LinearTransferOETF( in vec4 value ) {\n\treturn value;\n}\nvec4 sRGBTransferOETF( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}\nvec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn sRGBTransferOETF( value );\n}",envmap_fragment:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvec3 cameraToFrag;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToFrag = normalize( vWorldPosition - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToFrag, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif",envmap_common_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float envMapIntensity;\n\tuniform float flipEnvMap;\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\t\n#endif",envmap_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float reflectivity;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\tvarying vec3 vWorldPosition;\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif",envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\t\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif",envmap_physical_pars_fragment:"#ifdef USE_ENVMAP\n\tvec3 getIBLIrradiance( const in vec3 normal ) {\n\t\t#ifdef ENVMAP_TYPE_CUBE_UV\n\t\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );\n\t\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n\tvec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {\n\t\t#ifdef ENVMAP_TYPE_CUBE_UV\n\t\t\tvec3 reflectVec = reflect( - viewDir, normal );\n\t\t\treflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\n\t\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );\n\t\t\treturn envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n\t#ifdef USE_ANISOTROPY\n\t\tvec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {\n\t\t\t#ifdef ENVMAP_TYPE_CUBE_UV\n\t\t\t\tvec3 bentNormal = cross( bitangent, viewDir );\n\t\t\t\tbentNormal = normalize( cross( bentNormal, bitangent ) );\n\t\t\t\tbentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );\n\t\t\t\treturn getIBLRadiance( viewDir, bentNormal, roughness );\n\t\t\t#else\n\t\t\t\treturn vec3( 0.0 );\n\t\t\t#endif\n\t\t}\n\t#endif\n#endif",envmap_vertex:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif",fog_vertex:"#ifdef USE_FOG\n\tvFogDepth = - mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n\tvarying float vFogDepth;\n#endif",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, vFogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float vFogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",gradientmap_pars_fragment:"#ifdef USE_GRADIENTMAP\n\tuniform sampler2D gradientMap;\n#endif\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\tfloat dotNL = dot( normal, lightDirection );\n\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t#ifdef USE_GRADIENTMAP\n\t\treturn vec3( texture2D( gradientMap, coord ).r );\n\t#else\n\t\tvec2 fw = fwidth( coord ) * 0.5;\n\t\treturn mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );\n\t#endif\n}",lightmap_fragment:"#ifdef USE_LIGHTMAP\n\tvec4 lightMapTexel = texture2D( lightMap, vLightMapUv );\n\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\treflectedLight.indirectDiffuse += lightMapIrradiance;\n#endif",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_fragment:"LambertMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularStrength = specularStrength;",lights_lambert_pars_fragment:"varying vec3 vViewPosition;\nstruct LambertMaterial {\n\tvec3 diffuseColor;\n\tfloat specularStrength;\n};\nvoid RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometryNormal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Lambert\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Lambert",lights_pars_begin:"uniform bool receiveShadow;\nuniform vec3 ambientLightColor;\n#if defined( USE_LIGHT_PROBES )\n\tuniform vec3 lightProbe[ 9 ];\n#endif\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n\tfloat x = normal.x, y = normal.y, z = normal.z;\n\tvec3 result = shCoefficients[ 0 ] * 0.886227;\n\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n\treturn result;\n}\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {\n\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n\treturn irradiance;\n}\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\treturn irradiance;\n}\nfloat getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n\t#if defined ( LEGACY_LIGHTS )\n\t\tif ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {\n\t\t\treturn pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );\n\t\t}\n\t\treturn 1.0;\n\t#else\n\t\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\t\tif ( cutoffDistance > 0.0 ) {\n\t\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t\t}\n\t\treturn distanceFalloff;\n\t#endif\n}\nfloat getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {\n\treturn smoothstep( coneCosine, penumbraCosine, angleCosine );\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {\n\t\tlight.color = directionalLight.color;\n\t\tlight.direction = directionalLight.direction;\n\t\tlight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {\n\t\tvec3 lVector = pointLight.position - geometryPosition;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tlight.color = pointLight.color;\n\t\tlight.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );\n\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {\n\t\tvec3 lVector = spotLight.position - geometryPosition;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat angleCos = dot( light.direction, spotLight.direction );\n\t\tfloat spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\tif ( spotAttenuation > 0.0 ) {\n\t\t\tfloat lightDistance = length( lVector );\n\t\t\tlight.color = spotLight.color * spotAttenuation;\n\t\t\tlight.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t\t} else {\n\t\t\tlight.color = vec3( 0.0 );\n\t\t\tlight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {\n\t\tfloat dotNL = dot( normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\treturn irradiance;\n\t}\n#endif",lights_toon_fragment:"ToonMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;",lights_toon_pars_fragment:"varying vec3 vViewPosition;\nstruct ToonMaterial {\n\tvec3 diffuseColor;\n};\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\tvec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Toon\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Toon",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",lights_phong_pars_fragment:"varying vec3 vViewPosition;\nstruct BlinnPhongMaterial {\n\tvec3 diffuseColor;\n\tvec3 specularColor;\n\tfloat specularShininess;\n\tfloat specularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometryNormal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nvec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\nmaterial.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;\nmaterial.roughness = min( material.roughness, 1.0 );\n#ifdef IOR\n\tmaterial.ior = ior;\n\t#ifdef USE_SPECULAR\n\t\tfloat specularIntensityFactor = specularIntensity;\n\t\tvec3 specularColorFactor = specularColor;\n\t\t#ifdef USE_SPECULAR_COLORMAP\n\t\t\tspecularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;\n\t\t#endif\n\t\t#ifdef USE_SPECULAR_INTENSITYMAP\n\t\t\tspecularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;\n\t\t#endif\n\t\tmaterial.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );\n\t#else\n\t\tfloat specularIntensityFactor = 1.0;\n\t\tvec3 specularColorFactor = vec3( 1.0 );\n\t\tmaterial.specularF90 = 1.0;\n\t#endif\n\tmaterial.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.specularF90 = 1.0;\n#endif\n#ifdef USE_CLEARCOAT\n\tmaterial.clearcoat = clearcoat;\n\tmaterial.clearcoatRoughness = clearcoatRoughness;\n\tmaterial.clearcoatF0 = vec3( 0.04 );\n\tmaterial.clearcoatF90 = 1.0;\n\t#ifdef USE_CLEARCOATMAP\n\t\tmaterial.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;\n\t#endif\n\t#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\t\tmaterial.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;\n\t#endif\n\tmaterial.clearcoat = saturate( material.clearcoat );\tmaterial.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );\n\tmaterial.clearcoatRoughness += geometryRoughness;\n\tmaterial.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\n#endif\n#ifdef USE_IRIDESCENCE\n\tmaterial.iridescence = iridescence;\n\tmaterial.iridescenceIOR = iridescenceIOR;\n\t#ifdef USE_IRIDESCENCEMAP\n\t\tmaterial.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;\n\t#endif\n\t#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\t\tmaterial.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;\n\t#else\n\t\tmaterial.iridescenceThickness = iridescenceThicknessMaximum;\n\t#endif\n#endif\n#ifdef USE_SHEEN\n\tmaterial.sheenColor = sheenColor;\n\t#ifdef USE_SHEEN_COLORMAP\n\t\tmaterial.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;\n\t#endif\n\tmaterial.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );\n\t#ifdef USE_SHEEN_ROUGHNESSMAP\n\t\tmaterial.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;\n\t#endif\n#endif\n#ifdef USE_ANISOTROPY\n\t#ifdef USE_ANISOTROPYMAP\n\t\tmat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );\n\t\tvec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;\n\t\tvec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;\n\t#else\n\t\tvec2 anisotropyV = anisotropyVector;\n\t#endif\n\tmaterial.anisotropy = length( anisotropyV );\n\tanisotropyV /= material.anisotropy;\n\tmaterial.anisotropy = saturate( material.anisotropy );\n\tmaterial.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );\n\tmaterial.anisotropyT = tbn[ 0 ] * anisotropyV.x - tbn[ 1 ] * anisotropyV.y;\n\tmaterial.anisotropyB = tbn[ 1 ] * anisotropyV.x + tbn[ 0 ] * anisotropyV.y;\n#endif",lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3 diffuseColor;\n\tfloat roughness;\n\tvec3 specularColor;\n\tfloat specularF90;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat clearcoat;\n\t\tfloat clearcoatRoughness;\n\t\tvec3 clearcoatF0;\n\t\tfloat clearcoatF90;\n\t#endif\n\t#ifdef USE_IRIDESCENCE\n\t\tfloat iridescence;\n\t\tfloat iridescenceIOR;\n\t\tfloat iridescenceThickness;\n\t\tvec3 iridescenceFresnel;\n\t\tvec3 iridescenceF0;\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tvec3 sheenColor;\n\t\tfloat sheenRoughness;\n\t#endif\n\t#ifdef IOR\n\t\tfloat ior;\n\t#endif\n\t#ifdef USE_TRANSMISSION\n\t\tfloat transmission;\n\t\tfloat transmissionAlpha;\n\t\tfloat thickness;\n\t\tfloat attenuationDistance;\n\t\tvec3 attenuationColor;\n\t#endif\n\t#ifdef USE_ANISOTROPY\n\t\tfloat anisotropy;\n\t\tfloat alphaT;\n\t\tvec3 anisotropyT;\n\t\tvec3 anisotropyB;\n\t#endif\n};\nvec3 clearcoatSpecularDirect = vec3( 0.0 );\nvec3 clearcoatSpecularIndirect = vec3( 0.0 );\nvec3 sheenSpecularDirect = vec3( 0.0 );\nvec3 sheenSpecularIndirect = vec3(0.0 );\nvec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {\n    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );\n    float x2 = x * x;\n    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );\n    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );\n}\nfloat V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\n#ifdef USE_ANISOTROPY\n\tfloat V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {\n\t\tfloat gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );\n\t\tfloat gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );\n\t\tfloat v = 0.5 / ( gv + gl );\n\t\treturn saturate(v);\n\t}\n\tfloat D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {\n\t\tfloat a2 = alphaT * alphaB;\n\t\thighp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );\n\t\thighp float v2 = dot( v, v );\n\t\tfloat w2 = a2 / v2;\n\t\treturn RECIPROCAL_PI * a2 * pow2 ( w2 );\n\t}\n#endif\n#ifdef USE_CLEARCOAT\n\tvec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {\n\t\tvec3 f0 = material.clearcoatF0;\n\t\tfloat f90 = material.clearcoatF90;\n\t\tfloat roughness = material.clearcoatRoughness;\n\t\tfloat alpha = pow2( roughness );\n\t\tvec3 halfDir = normalize( lightDir + viewDir );\n\t\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\t\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\t\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\t\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\t\tvec3 F = F_Schlick( f0, f90, dotVH );\n\t\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\t\tfloat D = D_GGX( alpha, dotNH );\n\t\treturn F * ( V * D );\n\t}\n#endif\nvec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {\n\tvec3 f0 = material.specularColor;\n\tfloat f90 = material.specularF90;\n\tfloat roughness = material.roughness;\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( f0, f90, dotVH );\n\t#ifdef USE_IRIDESCENCE\n\t\tF = mix( F, material.iridescenceFresnel, material.iridescence );\n\t#endif\n\t#ifdef USE_ANISOTROPY\n\t\tfloat dotTL = dot( material.anisotropyT, lightDir );\n\t\tfloat dotTV = dot( material.anisotropyT, viewDir );\n\t\tfloat dotTH = dot( material.anisotropyT, halfDir );\n\t\tfloat dotBL = dot( material.anisotropyB, lightDir );\n\t\tfloat dotBV = dot( material.anisotropyB, viewDir );\n\t\tfloat dotBH = dot( material.anisotropyB, halfDir );\n\t\tfloat V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );\n\t\tfloat D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );\n\t#else\n\t\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\t\tfloat D = D_GGX( alpha, dotNH );\n\t#endif\n\treturn F * ( V * D );\n}\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\n#if defined( USE_SHEEN )\nfloat D_Charlie( float roughness, float dotNH ) {\n\tfloat alpha = pow2( roughness );\n\tfloat invAlpha = 1.0 / alpha;\n\tfloat cos2h = dotNH * dotNH;\n\tfloat sin2h = max( 1.0 - cos2h, 0.0078125 );\n\treturn ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );\n}\nfloat V_Neubelt( float dotNV, float dotNL ) {\n\treturn saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );\n}\nvec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat D = D_Charlie( sheenRoughness, dotNH );\n\tfloat V = V_Neubelt( dotNV, dotNL );\n\treturn sheenColor * ( D * V );\n}\n#endif\nfloat IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat r2 = roughness * roughness;\n\tfloat a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;\n\tfloat b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;\n\tfloat DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );\n\treturn saturate( DG * RECIPROCAL_PI );\n}\nvec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\tvec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;\n\treturn fab;\n}\nvec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\treturn specularColor * fab.x + specularF90 * fab.y;\n}\n#ifdef USE_IRIDESCENCE\nvoid computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#else\nvoid computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#endif\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\t#ifdef USE_IRIDESCENCE\n\t\tvec3 Fr = mix( specularColor, iridescenceF0, iridescence );\n\t#else\n\t\tvec3 Fr = specularColor;\n\t#endif\n\tvec3 FssEss = Fr * fab.x + specularF90 * fab.y;\n\tfloat Ess = fab.x + fab.y;\n\tfloat Ems = 1.0 - Ess;\n\tvec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometryNormal;\n\t\tvec3 viewDir = geometryViewDir;\n\t\tvec3 position = geometryPosition;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.roughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometryNormal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );\n\t\tvec3 ccIrradiance = dotNLcc * directLight.color;\n\t\tclearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );\n\t#endif\n\treflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );\n\t#endif\n\tvec3 singleScattering = vec3( 0.0 );\n\tvec3 multiScattering = vec3( 0.0 );\n\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\t#ifdef USE_IRIDESCENCE\n\t\tcomputeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );\n\t#else\n\t\tcomputeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );\n\t#endif\n\tvec3 totalScattering = singleScattering + multiScattering;\n\tvec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );\n\treflectedLight.indirectSpecular += radiance * singleScattering;\n\treflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\n\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",lights_fragment_begin:"\nvec3 geometryPosition = - vViewPosition;\nvec3 geometryNormal = normal;\nvec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\nvec3 geometryClearcoatNormal = vec3( 0.0 );\n#ifdef USE_CLEARCOAT\n\tgeometryClearcoatNormal = clearcoatNormal;\n#endif\n#ifdef USE_IRIDESCENCE\n\tfloat dotNVi = saturate( dot( normal, geometryViewDir ) );\n\tif ( material.iridescenceThickness == 0.0 ) {\n\t\tmaterial.iridescence = 0.0;\n\t} else {\n\t\tmaterial.iridescence = saturate( material.iridescence );\n\t}\n\tif ( material.iridescence > 0.0 ) {\n\t\tmaterial.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );\n\t\tmaterial.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );\n\t}\n#endif\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointLightInfo( pointLight, geometryPosition, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\n\t\tpointLightShadow = pointLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\tvec4 spotColor;\n\tvec3 spotLightCoord;\n\tbool inSpotLightMap;\n\t#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotLightInfo( spotLight, geometryPosition, directLight );\n\t\t#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n\t\t#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX\n\t\t#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\t#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS\n\t\t#else\n\t\t#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n\t\t#endif\n\t\t#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )\n\t\t\tspotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;\n\t\t\tinSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );\n\t\t\tspotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );\n\t\t\tdirectLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;\n\t\t#endif\n\t\t#undef SPOT_LIGHT_MAP_INDEX\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\tspotLightShadow = spotLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalLightInfo( directionalLight, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n\t\tdirectionalLightShadow = directionalLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 iblIrradiance = vec3( 0.0 );\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\t#if defined( USE_LIGHT_PROBES )\n\t\tirradiance += getLightProbeIrradiance( lightProbe, geometryNormal );\n\t#endif\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearcoatRadiance = vec3( 0.0 );\n#endif",lights_fragment_maps:"#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vLightMapUv );\n\t\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tiblIrradiance += getIBLIrradiance( geometryNormal );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\t#ifdef USE_ANISOTROPY\n\t\tradiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );\n\t#else\n\t\tradiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );\n\t#endif\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );\n\t#endif\n#endif",lights_fragment_end:"#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n#endif",logdepthbuf_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tgl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t\tvarying float vIsPerspective;\n\t#else\n\t\tuniform float logDepthBufFC;\n\t#endif\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t\tvIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\n\t#else\n\t\tif ( isPerspectiveMatrix( projectionMatrix ) ) {\n\t\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\t\t\tgl_Position.z *= gl_Position.w;\n\t\t}\n\t#endif\n#endif",map_fragment:"#ifdef USE_MAP\n\tvec4 sampledDiffuseColor = texture2D( map, vMapUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\tsampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );\n\t\n\t#endif\n\tdiffuseColor *= sampledDiffuseColor;\n#endif",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif",map_particle_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\t#if defined( USE_POINTS_UV )\n\t\tvec2 uv = vUv;\n\t#else\n\t\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n\t#endif\n#endif\n#ifdef USE_MAP\n\tdiffuseColor *= texture2D( map, uv );\n#endif\n#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, uv ).g;\n#endif",map_particle_pars_fragment:"#if defined( USE_POINTS_UV )\n\tvarying vec2 vUv;\n#else\n\t#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\t\tuniform mat3 uvTransform;\n\t#endif\n#endif\n#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphcolor_vertex:"#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )\n\tvColor *= morphTargetBaseInfluence;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t#if defined( USE_COLOR_ALPHA )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];\n\t\t#elif defined( USE_COLOR )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];\n\t\t#endif\n\t}\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];\n\t\t}\n\t#else\n\t\tobjectNormal += morphNormal0 * morphTargetInfluences[ 0 ];\n\t\tobjectNormal += morphNormal1 * morphTargetInfluences[ 1 ];\n\t\tobjectNormal += morphNormal2 * morphTargetInfluences[ 2 ];\n\t\tobjectNormal += morphNormal3 * morphTargetInfluences[ 3 ];\n\t#endif\n#endif",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\tuniform float morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tuniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];\n\t\tuniform sampler2DArray morphTargetsTexture;\n\t\tuniform ivec2 morphTargetsTextureSize;\n\t\tvec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {\n\t\t\tint texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;\n\t\t\tint y = texelIndex / morphTargetsTextureSize.x;\n\t\t\tint x = texelIndex - y * morphTargetsTextureSize.x;\n\t\t\tivec3 morphUV = ivec3( x, y, morphTargetIndex );\n\t\t\treturn texelFetch( morphTargetsTexture, morphUV, 0 );\n\t\t}\n\t#else\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\tuniform float morphTargetInfluences[ 8 ];\n\t\t#else\n\t\t\tuniform float morphTargetInfluences[ 4 ];\n\t\t#endif\n\t#endif\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];\n\t\t}\n\t#else\n\t\ttransformed += morphTarget0 * morphTargetInfluences[ 0 ];\n\t\ttransformed += morphTarget1 * morphTargetInfluences[ 1 ];\n\t\ttransformed += morphTarget2 * morphTargetInfluences[ 2 ];\n\t\ttransformed += morphTarget3 * morphTargetInfluences[ 3 ];\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\ttransformed += morphTarget4 * morphTargetInfluences[ 4 ];\n\t\t\ttransformed += morphTarget5 * morphTargetInfluences[ 5 ];\n\t\t\ttransformed += morphTarget6 * morphTargetInfluences[ 6 ];\n\t\t\ttransformed += morphTarget7 * morphTargetInfluences[ 7 ];\n\t\t#endif\n\t#endif\n#endif",normal_fragment_begin:"float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;\n#ifdef FLAT_SHADED\n\tvec3 fdx = dFdx( vViewPosition );\n\tvec3 fdy = dFdy( vViewPosition );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal *= faceDirection;\n\t#endif\n#endif\n#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )\n\t#ifdef USE_TANGENT\n\t\tmat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );\n\t#else\n\t\tmat3 tbn = getTangentFrame( - vViewPosition, normal,\n\t\t#if defined( USE_NORMALMAP )\n\t\t\tvNormalMapUv\n\t\t#elif defined( USE_CLEARCOAT_NORMALMAP )\n\t\t\tvClearcoatNormalMapUv\n\t\t#else\n\t\t\tvUv\n\t\t#endif\n\t\t);\n\t#endif\n\t#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )\n\t\ttbn[0] *= faceDirection;\n\t\ttbn[1] *= faceDirection;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\t#ifdef USE_TANGENT\n\t\tmat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );\n\t#else\n\t\tmat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );\n\t#endif\n\t#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )\n\t\ttbn2[0] *= faceDirection;\n\t\ttbn2[1] *= faceDirection;\n\t#endif\n#endif\nvec3 nonPerturbedNormal = normal;",normal_fragment_maps:"#ifdef USE_NORMALMAP_OBJECTSPACE\n\tnormal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;\n\t#ifdef FLIP_SIDED\n\t\tnormal = - normal;\n\t#endif\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\tnormal = normalize( normalMatrix * normal );\n#elif defined( USE_NORMALMAP_TANGENTSPACE )\n\tvec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;\n\tmapN.xy *= normalScale;\n\tnormal = normalize( tbn * mapN );\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );\n#endif",normal_pars_fragment:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_pars_vertex:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_vertex:"#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n#endif\n#ifdef USE_NORMALMAP_OBJECTSPACE\n\tuniform mat3 normalMatrix;\n#endif\n#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )\n\tmat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {\n\t\tvec3 q0 = dFdx( eye_pos.xyz );\n\t\tvec3 q1 = dFdy( eye_pos.xyz );\n\t\tvec2 st0 = dFdx( uv.st );\n\t\tvec2 st1 = dFdy( uv.st );\n\t\tvec3 N = surf_norm;\n\t\tvec3 q1perp = cross( q1, N );\n\t\tvec3 q0perp = cross( N, q0 );\n\t\tvec3 T = q1perp * st0.x + q0perp * st1.x;\n\t\tvec3 B = q1perp * st0.y + q0perp * st1.y;\n\t\tfloat det = max( dot( T, T ), dot( B, B ) );\n\t\tfloat scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );\n\t\treturn mat3( T * scale, B * scale, N );\n\t}\n#endif",clearcoat_normal_fragment_begin:"#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal = nonPerturbedNormal;\n#endif",clearcoat_normal_fragment_maps:"#ifdef USE_CLEARCOAT_NORMALMAP\n\tvec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;\n\tclearcoatMapN.xy *= clearcoatNormalScale;\n\tclearcoatNormal = normalize( tbn2 * clearcoatMapN );\n#endif",clearcoat_pars_fragment:"#ifdef USE_CLEARCOATMAP\n\tuniform sampler2D clearcoatMap;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform sampler2D clearcoatNormalMap;\n\tuniform vec2 clearcoatNormalScale;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform sampler2D clearcoatRoughnessMap;\n#endif",iridescence_pars_fragment:"#ifdef USE_IRIDESCENCEMAP\n\tuniform sampler2D iridescenceMap;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tuniform sampler2D iridescenceThicknessMap;\n#endif",opaque_fragment:"#ifdef OPAQUE\ndiffuseColor.a = 1.0;\n#endif\n#ifdef USE_TRANSMISSION\ndiffuseColor.a *= material.transmissionAlpha;\n#endif\ngl_FragColor = vec4( outgoingLight, diffuseColor.a );",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nvec2 packDepthToRG( in highp float v ) {\n\treturn packDepthToRGBA( v ).yx;\n}\nfloat unpackRGToDepth( const in highp vec2 v ) {\n\treturn unpackRGBAToDepth( vec4( v.xy, 0.0, 0.0 ) );\n}\nvec4 pack2HalfToRGBA( vec2 v ) {\n\tvec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );\n\treturn vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );\n}\nvec2 unpackRGBATo2Half( vec4 v ) {\n\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {\n\treturn depth * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * depth - far );\n}",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif",project_vertex:"vec4 mvPosition = vec4( transformed, 1.0 );\n#ifdef USE_INSTANCING\n\tmvPosition = instanceMatrix * mvPosition;\n#endif\nmvPosition = modelViewMatrix * mvPosition;\ngl_Position = projectionMatrix * mvPosition;",dithering_fragment:"#ifdef DITHERING\n\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif",dithering_pars_fragment:"#ifdef DITHERING\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );\n\troughnessFactor *= texelRoughness.g;\n#endif",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#if NUM_SPOT_LIGHT_COORDS > 0\n\tvarying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#if NUM_SPOT_LIGHT_MAPS > 0\n\tuniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];\n#endif\n#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n\t\treturn unpackRGBATo2Half( texture2D( shadow, uv ) );\n\t}\n\tfloat VSMShadow (sampler2D shadow, vec2 uv, float compare ){\n\t\tfloat occlusion = 1.0;\n\t\tvec2 distribution = texture2DDistribution( shadow, uv );\n\t\tfloat hard_shadow = step( compare , distribution.x );\n\t\tif (hard_shadow != 1.0 ) {\n\t\t\tfloat distance = compare - distribution.x ;\n\t\t\tfloat variance = max( 0.00000, distribution.y * distribution.y );\n\t\t\tfloat softness_probability = variance / (variance + distance * distance );\t\t\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );\t\t\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n\t\t}\n\t\treturn occlusion;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;\n\t\tbool frustumTest = inFrustum && shadowCoord.z <= 1.0;\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tfloat dx2 = dx0 / 2.0;\n\t\t\tfloat dy2 = dy0 / 2.0;\n\t\t\tfloat dx3 = dx1 / 2.0;\n\t\t\tfloat dy3 = dy1 / 2.0;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 17.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx = texelSize.x;\n\t\t\tfloat dy = texelSize.y;\n\t\t\tvec2 uv = shadowCoord.xy;\n\t\t\tvec2 f = fract( uv * shadowMapSize + 0.5 );\n\t\t\tuv -= f * texelSize;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, uv, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t f.y )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_VSM )\n\t\t\tshadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\tdp += shadowBias;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif",shadowmap_pars_vertex:"#if NUM_SPOT_LIGHT_COORDS > 0\n\tuniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];\n\tvarying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n#endif",shadowmap_vertex:"#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )\n\tvec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\tvec4 shadowWorldPosition;\n#endif\n#if defined( USE_SHADOWMAP )\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );\n\t\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );\n\t\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if NUM_SPOT_LIGHT_COORDS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition;\n\t\t#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\t\tshadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;\n\t\t#endif\n\t\tvSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n#endif",shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tdirectionalLight = directionalLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tspotLight = spotLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tpointLight = pointLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#endif\n\treturn shadow;\n}",skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\tuniform highp sampler2D boneTexture;\n\tuniform int boneTextureSize;\n\tmat4 getBoneMatrix( const in float i ) {\n\t\tfloat j = i * 4.0;\n\t\tfloat x = mod( j, float( boneTextureSize ) );\n\t\tfloat y = floor( j / float( boneTextureSize ) );\n\t\tfloat dx = 1.0 / float( boneTextureSize );\n\t\tfloat dy = 1.0 / float( boneTextureSize );\n\t\ty = dy * ( y + 0.5 );\n\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\treturn bone;\n\t}\n#endif",skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\t#ifdef USE_TANGENT\n\t\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#endif\n#endif",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif",tonemapping_pars_fragment:"#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn saturate( toneMappingExposure * color );\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 RRTAndODTFit( vec3 v ) {\n\tvec3 a = v * ( v + 0.0245786 ) - 0.000090537;\n\tvec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;\n\treturn a / b;\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\tconst mat3 ACESInputMat = mat3(\n\t\tvec3( 0.59719, 0.07600, 0.02840 ),\t\tvec3( 0.35458, 0.90834, 0.13383 ),\n\t\tvec3( 0.04823, 0.01566, 0.83777 )\n\t);\n\tconst mat3 ACESOutputMat = mat3(\n\t\tvec3(  1.60475, -0.10208, -0.00327 ),\t\tvec3( -0.53108,  1.10813, -0.07276 ),\n\t\tvec3( -0.07367, -0.00605,  1.07602 )\n\t);\n\tcolor *= toneMappingExposure / 0.6;\n\tcolor = ACESInputMat * color;\n\tcolor = RRTAndODTFit( color );\n\tcolor = ACESOutputMat * color;\n\treturn saturate( color );\n}\nvec3 CustomToneMapping( vec3 color ) { return color; }",transmission_fragment:"#ifdef USE_TRANSMISSION\n\tmaterial.transmission = transmission;\n\tmaterial.transmissionAlpha = 1.0;\n\tmaterial.thickness = thickness;\n\tmaterial.attenuationDistance = attenuationDistance;\n\tmaterial.attenuationColor = attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tmaterial.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tmaterial.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;\n\t#endif\n\tvec3 pos = vWorldPosition;\n\tvec3 v = normalize( cameraPosition - pos );\n\tvec3 n = inverseTransformDirection( normal, viewMatrix );\n\tvec4 transmitted = getIBLVolumeRefraction(\n\t\tn, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,\n\t\tpos, modelMatrix, viewMatrix, projectionMatrix, material.ior, material.thickness,\n\t\tmaterial.attenuationColor, material.attenuationDistance );\n\tmaterial.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );\n\ttotalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );\n#endif",transmission_pars_fragment:"#ifdef USE_TRANSMISSION\n\tuniform float transmission;\n\tuniform float thickness;\n\tuniform float attenuationDistance;\n\tuniform vec3 attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tuniform sampler2D transmissionMap;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tuniform sampler2D thicknessMap;\n\t#endif\n\tuniform vec2 transmissionSamplerSize;\n\tuniform sampler2D transmissionSamplerMap;\n\tuniform mat4 modelMatrix;\n\tuniform mat4 projectionMatrix;\n\tvarying vec3 vWorldPosition;\n\tfloat w0( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );\n\t}\n\tfloat w1( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );\n\t}\n\tfloat w2( float a ){\n\t\treturn ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );\n\t}\n\tfloat w3( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a * a * a );\n\t}\n\tfloat g0( float a ) {\n\t\treturn w0( a ) + w1( a );\n\t}\n\tfloat g1( float a ) {\n\t\treturn w2( a ) + w3( a );\n\t}\n\tfloat h0( float a ) {\n\t\treturn - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );\n\t}\n\tfloat h1( float a ) {\n\t\treturn 1.0 + w3( a ) / ( w2( a ) + w3( a ) );\n\t}\n\tvec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {\n\t\tuv = uv * texelSize.zw + 0.5;\n\t\tvec2 iuv = floor( uv );\n\t\tvec2 fuv = fract( uv );\n\t\tfloat g0x = g0( fuv.x );\n\t\tfloat g1x = g1( fuv.x );\n\t\tfloat h0x = h0( fuv.x );\n\t\tfloat h1x = h1( fuv.x );\n\t\tfloat h0y = h0( fuv.y );\n\t\tfloat h1y = h1( fuv.y );\n\t\tvec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;\n\t\treturn g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +\n\t\t\tg1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );\n\t}\n\tvec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {\n\t\tvec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );\n\t\tvec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );\n\t\tvec2 fLodSizeInv = 1.0 / fLodSize;\n\t\tvec2 cLodSizeInv = 1.0 / cLodSize;\n\t\tvec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );\n\t\tvec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );\n\t\treturn mix( fSample, cSample, fract( lod ) );\n\t}\n\tvec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {\n\t\tvec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );\n\t\tvec3 modelScale;\n\t\tmodelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );\n\t\tmodelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );\n\t\tmodelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );\n\t\treturn normalize( refractionVector ) * thickness * modelScale;\n\t}\n\tfloat applyIorToRoughness( const in float roughness, const in float ior ) {\n\t\treturn roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );\n\t}\n\tvec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {\n\t\tfloat lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );\n\t\treturn textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );\n\t}\n\tvec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tif ( isinf( attenuationDistance ) ) {\n\t\t\treturn vec3( 1.0 );\n\t\t} else {\n\t\t\tvec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;\n\t\t\tvec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );\t\t\treturn transmittance;\n\t\t}\n\t}\n\tvec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,\n\t\tconst in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,\n\t\tconst in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,\n\t\tconst in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tvec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );\n\t\tvec3 refractedRayExit = position + transmissionRay;\n\t\tvec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );\n\t\tvec2 refractionCoords = ndcPos.xy / ndcPos.w;\n\t\trefractionCoords += 1.0;\n\t\trefractionCoords /= 2.0;\n\t\tvec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );\n\t\tvec3 transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );\n\t\tvec3 attenuatedColor = transmittance * transmittedLight.rgb;\n\t\tvec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );\n\t\tfloat transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;\n\t\treturn vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );\n\t}\n#endif",uv_pars_fragment:"#if defined( USE_UV ) || defined( USE_ANISOTROPY )\n\tvarying vec2 vUv;\n#endif\n#ifdef USE_MAP\n\tvarying vec2 vMapUv;\n#endif\n#ifdef USE_ALPHAMAP\n\tvarying vec2 vAlphaMapUv;\n#endif\n#ifdef USE_LIGHTMAP\n\tvarying vec2 vLightMapUv;\n#endif\n#ifdef USE_AOMAP\n\tvarying vec2 vAoMapUv;\n#endif\n#ifdef USE_BUMPMAP\n\tvarying vec2 vBumpMapUv;\n#endif\n#ifdef USE_NORMALMAP\n\tvarying vec2 vNormalMapUv;\n#endif\n#ifdef USE_EMISSIVEMAP\n\tvarying vec2 vEmissiveMapUv;\n#endif\n#ifdef USE_METALNESSMAP\n\tvarying vec2 vMetalnessMapUv;\n#endif\n#ifdef USE_ROUGHNESSMAP\n\tvarying vec2 vRoughnessMapUv;\n#endif\n#ifdef USE_ANISOTROPYMAP\n\tvarying vec2 vAnisotropyMapUv;\n#endif\n#ifdef USE_CLEARCOATMAP\n\tvarying vec2 vClearcoatMapUv;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tvarying vec2 vClearcoatNormalMapUv;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tvarying vec2 vClearcoatRoughnessMapUv;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n\tvarying vec2 vIridescenceMapUv;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tvarying vec2 vIridescenceThicknessMapUv;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n\tvarying vec2 vSheenColorMapUv;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n\tvarying vec2 vSheenRoughnessMapUv;\n#endif\n#ifdef USE_SPECULARMAP\n\tvarying vec2 vSpecularMapUv;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n\tvarying vec2 vSpecularColorMapUv;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n\tvarying vec2 vSpecularIntensityMapUv;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n\tuniform mat3 transmissionMapTransform;\n\tvarying vec2 vTransmissionMapUv;\n#endif\n#ifdef USE_THICKNESSMAP\n\tuniform mat3 thicknessMapTransform;\n\tvarying vec2 vThicknessMapUv;\n#endif",uv_pars_vertex:"#if defined( USE_UV ) || defined( USE_ANISOTROPY )\n\tvarying vec2 vUv;\n#endif\n#ifdef USE_MAP\n\tuniform mat3 mapTransform;\n\tvarying vec2 vMapUv;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform mat3 alphaMapTransform;\n\tvarying vec2 vAlphaMapUv;\n#endif\n#ifdef USE_LIGHTMAP\n\tuniform mat3 lightMapTransform;\n\tvarying vec2 vLightMapUv;\n#endif\n#ifdef USE_AOMAP\n\tuniform mat3 aoMapTransform;\n\tvarying vec2 vAoMapUv;\n#endif\n#ifdef USE_BUMPMAP\n\tuniform mat3 bumpMapTransform;\n\tvarying vec2 vBumpMapUv;\n#endif\n#ifdef USE_NORMALMAP\n\tuniform mat3 normalMapTransform;\n\tvarying vec2 vNormalMapUv;\n#endif\n#ifdef USE_DISPLACEMENTMAP\n\tuniform mat3 displacementMapTransform;\n\tvarying vec2 vDisplacementMapUv;\n#endif\n#ifdef USE_EMISSIVEMAP\n\tuniform mat3 emissiveMapTransform;\n\tvarying vec2 vEmissiveMapUv;\n#endif\n#ifdef USE_METALNESSMAP\n\tuniform mat3 metalnessMapTransform;\n\tvarying vec2 vMetalnessMapUv;\n#endif\n#ifdef USE_ROUGHNESSMAP\n\tuniform mat3 roughnessMapTransform;\n\tvarying vec2 vRoughnessMapUv;\n#endif\n#ifdef USE_ANISOTROPYMAP\n\tuniform mat3 anisotropyMapTransform;\n\tvarying vec2 vAnisotropyMapUv;\n#endif\n#ifdef USE_CLEARCOATMAP\n\tuniform mat3 clearcoatMapTransform;\n\tvarying vec2 vClearcoatMapUv;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform mat3 clearcoatNormalMapTransform;\n\tvarying vec2 vClearcoatNormalMapUv;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform mat3 clearcoatRoughnessMapTransform;\n\tvarying vec2 vClearcoatRoughnessMapUv;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n\tuniform mat3 sheenColorMapTransform;\n\tvarying vec2 vSheenColorMapUv;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n\tuniform mat3 sheenRoughnessMapTransform;\n\tvarying vec2 vSheenRoughnessMapUv;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n\tuniform mat3 iridescenceMapTransform;\n\tvarying vec2 vIridescenceMapUv;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tuniform mat3 iridescenceThicknessMapTransform;\n\tvarying vec2 vIridescenceThicknessMapUv;\n#endif\n#ifdef USE_SPECULARMAP\n\tuniform mat3 specularMapTransform;\n\tvarying vec2 vSpecularMapUv;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n\tuniform mat3 specularColorMapTransform;\n\tvarying vec2 vSpecularColorMapUv;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n\tuniform mat3 specularIntensityMapTransform;\n\tvarying vec2 vSpecularIntensityMapUv;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n\tuniform mat3 transmissionMapTransform;\n\tvarying vec2 vTransmissionMapUv;\n#endif\n#ifdef USE_THICKNESSMAP\n\tuniform mat3 thicknessMapTransform;\n\tvarying vec2 vThicknessMapUv;\n#endif",uv_vertex:"#if defined( USE_UV ) || defined( USE_ANISOTROPY )\n\tvUv = vec3( uv, 1 ).xy;\n#endif\n#ifdef USE_MAP\n\tvMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ALPHAMAP\n\tvAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_LIGHTMAP\n\tvLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_AOMAP\n\tvAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_BUMPMAP\n\tvBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_NORMALMAP\n\tvNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_DISPLACEMENTMAP\n\tvDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_EMISSIVEMAP\n\tvEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_METALNESSMAP\n\tvMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ROUGHNESSMAP\n\tvRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ANISOTROPYMAP\n\tvAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOATMAP\n\tvClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tvClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tvClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n\tvIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tvIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n\tvSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n\tvSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULARMAP\n\tvSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n\tvSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n\tvSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n\tvTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_THICKNESSMAP\n\tvThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0\n\tvec4 worldPosition = vec4( transformed, 1.0 );\n\t#ifdef USE_INSTANCING\n\t\tworldPosition = instanceMatrix * worldPosition;\n\t#endif\n\tworldPosition = modelMatrix * worldPosition;\n#endif",background_vert:"varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n}",background_frag:"uniform sampler2D t2D;\nuniform float backgroundIntensity;\nvarying vec2 vUv;\nvoid main() {\n\tvec4 texColor = texture2D( t2D, vUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\ttexColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );\n\t#endif\n\ttexColor.rgb *= backgroundIntensity;\n\tgl_FragColor = texColor;\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",backgroundCube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",backgroundCube_frag:"#ifdef ENVMAP_TYPE_CUBE\n\tuniform samplerCube envMap;\n#elif defined( ENVMAP_TYPE_CUBE_UV )\n\tuniform sampler2D envMap;\n#endif\nuniform float flipEnvMap;\nuniform float backgroundBlurriness;\nuniform float backgroundIntensity;\nvarying vec3 vWorldDirection;\n#include <cube_uv_reflection_fragment>\nvoid main() {\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 texColor = textureCube( envMap, vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );\n\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\tvec4 texColor = textureCubeUV( envMap, vWorldDirection, backgroundBlurriness );\n\t#else\n\t\tvec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t#endif\n\ttexColor.rgb *= backgroundIntensity;\n\tgl_FragColor = texColor;\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",cube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",cube_frag:"uniform samplerCube tCube;\nuniform float tFlip;\nuniform float opacity;\nvarying vec3 vWorldDirection;\nvoid main() {\n\tvec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );\n\tgl_FragColor = texColor;\n\tgl_FragColor.a *= opacity;\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",depth_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvHighPrecisionZW = gl_Position.zw;\n}",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <logdepthbuf_fragment>\n\tfloat fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( fragCoordZ );\n\t#endif\n}",distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}",distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}",equirect_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}",equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldDirection );\n\tvec2 sampleUV = equirectUv( direction );\n\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\tvLineDistance = scale * lineDistance;\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",meshbasic_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinbase_vertex>\n\t\t#include <skinnormal_vertex>\n\t\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vLightMapUv );\n\t\treflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshlambert_vert:"#define LAMBERT\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshlambert_frag:"#define LAMBERT\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_lambert_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_lambert_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshmatcap_vert:"#define MATCAP\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\tvViewPosition = - mvPosition.xyz;\n}",meshmatcap_frag:"#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <fog_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\t#ifdef USE_MATCAP\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t#else\n\t\tvec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );\n\t#endif\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshnormal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n\tvarying vec3 vViewPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}",meshnormal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n\tvarying vec3 vViewPosition;\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n\t#ifdef OPAQUE\n\t\tgl_FragColor.a = 1.0;\n\t#endif\n}",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphysical_vert:"#define STANDARD\nvarying vec3 vViewPosition;\n#ifdef USE_TRANSMISSION\n\tvarying vec3 vWorldPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n#ifdef USE_TRANSMISSION\n\tvWorldPosition = worldPosition.xyz;\n#endif\n}",meshphysical_frag:"#define STANDARD\n#ifdef PHYSICAL\n\t#define IOR\n\t#define USE_SPECULAR\n#endif\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifdef IOR\n\tuniform float ior;\n#endif\n#ifdef USE_SPECULAR\n\tuniform float specularIntensity;\n\tuniform vec3 specularColor;\n\t#ifdef USE_SPECULAR_COLORMAP\n\t\tuniform sampler2D specularColorMap;\n\t#endif\n\t#ifdef USE_SPECULAR_INTENSITYMAP\n\t\tuniform sampler2D specularIntensityMap;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT\n\tuniform float clearcoat;\n\tuniform float clearcoatRoughness;\n#endif\n#ifdef USE_IRIDESCENCE\n\tuniform float iridescence;\n\tuniform float iridescenceIOR;\n\tuniform float iridescenceThicknessMinimum;\n\tuniform float iridescenceThicknessMaximum;\n#endif\n#ifdef USE_SHEEN\n\tuniform vec3 sheenColor;\n\tuniform float sheenRoughness;\n\t#ifdef USE_SHEEN_COLORMAP\n\t\tuniform sampler2D sheenColorMap;\n\t#endif\n\t#ifdef USE_SHEEN_ROUGHNESSMAP\n\t\tuniform sampler2D sheenRoughnessMap;\n\t#endif\n#endif\n#ifdef USE_ANISOTROPY\n\tuniform vec2 anisotropyVector;\n\t#ifdef USE_ANISOTROPYMAP\n\t\tuniform sampler2D anisotropyMap;\n\t#endif\n#endif\nvarying vec3 vViewPosition;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <iridescence_fragment>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_physical_pars_fragment>\n#include <transmission_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_pars_fragment>\n#include <iridescence_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <clearcoat_normal_fragment_begin>\n\t#include <clearcoat_normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;\n\tvec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;\n\t#include <transmission_fragment>\n\tvec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;\n\t#ifdef USE_SHEEN\n\t\tfloat sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );\n\t\toutgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;\n\t#endif\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );\n\t\tvec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );\n\t\toutgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;\n\t#endif\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshtoon_vert:"#define TOON\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshtoon_frag:"#define TOON\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_toon_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_toon_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n#ifdef USE_POINTS_UV\n\tvarying vec2 vUv;\n\tuniform mat3 uvTransform;\n#endif\nvoid main() {\n\t#ifdef USE_POINTS_UV\n\t\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\t#endif\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\tgl_PointSize = size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",shadow_vert:"#include <common>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <logdepthbuf_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\t#include <logdepthbuf_fragment>\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n}",sprite_vert:"uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n\tvec2 scale;\n\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",sprite_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n}"},fn={common:{diffuse:{value:new xn(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new yr},alphaMap:{value:null},alphaMapTransform:{value:new yr},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new yr}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new yr}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new yr}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new yr},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new yr},normalScale:{value:new Lt(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new yr},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new yr}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new yr}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new yr}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new xn(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new xn(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new yr},alphaTest:{value:0},uvTransform:{value:new yr}},sprite:{diffuse:{value:new xn(16777215)},opacity:{value:1},center:{value:new Lt(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new yr},alphaMap:{value:null},alphaMapTransform:{value:new yr},alphaTest:{value:0}}},Ta={basic:{uniforms:Zs([fn.common,fn.specularmap,fn.envmap,fn.aomap,fn.lightmap,fn.fog]),vertexShader:gr.meshbasic_vert,fragmentShader:gr.meshbasic_frag},lambert:{uniforms:Zs([fn.common,fn.specularmap,fn.envmap,fn.aomap,fn.lightmap,fn.emissivemap,fn.bumpmap,fn.normalmap,fn.displacementmap,fn.fog,fn.lights,{emissive:{value:new xn(0)}}]),vertexShader:gr.meshlambert_vert,fragmentShader:gr.meshlambert_frag},phong:{uniforms:Zs([fn.common,fn.specularmap,fn.envmap,fn.aomap,fn.lightmap,fn.emissivemap,fn.bumpmap,fn.normalmap,fn.displacementmap,fn.fog,fn.lights,{emissive:{value:new xn(0)},specular:{value:new xn(1118481)},shininess:{value:30}}]),vertexShader:gr.meshphong_vert,fragmentShader:gr.meshphong_frag},standard:{uniforms:Zs([fn.common,fn.envmap,fn.aomap,fn.lightmap,fn.emissivemap,fn.bumpmap,fn.normalmap,fn.displacementmap,fn.roughnessmap,fn.metalnessmap,fn.fog,fn.lights,{emissive:{value:new xn(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:gr.meshphysical_vert,fragmentShader:gr.meshphysical_frag},toon:{uniforms:Zs([fn.common,fn.aomap,fn.lightmap,fn.emissivemap,fn.bumpmap,fn.normalmap,fn.displacementmap,fn.gradientmap,fn.fog,fn.lights,{emissive:{value:new xn(0)}}]),vertexShader:gr.meshtoon_vert,fragmentShader:gr.meshtoon_frag},matcap:{uniforms:Zs([fn.common,fn.bumpmap,fn.normalmap,fn.displacementmap,fn.fog,{matcap:{value:null}}]),vertexShader:gr.meshmatcap_vert,fragmentShader:gr.meshmatcap_frag},points:{uniforms:Zs([fn.points,fn.fog]),vertexShader:gr.points_vert,fragmentShader:gr.points_frag},dashed:{uniforms:Zs([fn.common,fn.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:gr.linedashed_vert,fragmentShader:gr.linedashed_frag},depth:{uniforms:Zs([fn.common,fn.displacementmap]),vertexShader:gr.depth_vert,fragmentShader:gr.depth_frag},normal:{uniforms:Zs([fn.common,fn.bumpmap,fn.normalmap,fn.displacementmap,{opacity:{value:1}}]),vertexShader:gr.meshnormal_vert,fragmentShader:gr.meshnormal_frag},sprite:{uniforms:Zs([fn.sprite,fn.fog]),vertexShader:gr.sprite_vert,fragmentShader:gr.sprite_frag},background:{uniforms:{uvTransform:{value:new yr},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:gr.background_vert,fragmentShader:gr.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1}},vertexShader:gr.backgroundCube_vert,fragmentShader:gr.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:gr.cube_vert,fragmentShader:gr.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:gr.equirect_vert,fragmentShader:gr.equirect_frag},distanceRGBA:{uniforms:Zs([fn.common,fn.displacementmap,{referencePosition:{value:new ke},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:gr.distanceRGBA_vert,fragmentShader:gr.distanceRGBA_frag},shadow:{uniforms:Zs([fn.lights,fn.fog,{color:{value:new xn(0)},opacity:{value:1}}]),vertexShader:gr.shadow_vert,fragmentShader:gr.shadow_frag}};Ta.physical={uniforms:Zs([Ta.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new yr},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new yr},clearcoatNormalScale:{value:new Lt(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new yr},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new yr},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new yr},sheen:{value:0},sheenColor:{value:new xn(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new yr},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new yr},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new yr},transmissionSamplerSize:{value:new Lt},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new yr},attenuationDistance:{value:0},attenuationColor:{value:new xn(0)},specularColor:{value:new xn(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new yr},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new yr},anisotropyVector:{value:new Lt},anisotropyMap:{value:null},anisotropyMapTransform:{value:new yr}}]),vertexShader:gr.meshphysical_vert,fragmentShader:gr.meshphysical_frag};const Py={r:0,b:0,g:0};function _$(r,t,n,i,s,o,a){const c=new xn(0);let _,A,u=!0===o?0:1,O=null,B=0,G=null;function ne(ee,Q){ee.getRGB(Py,jR(r)),i.buffers.color.setClear(Py.r,Py.g,Py.b,Q,a)}return{getClearColor:function(){return c},setClearColor:function(ee,Q=1){c.set(ee),u=Q,ne(c,u)},getClearAlpha:function(){return u},setClearAlpha:function(ee){u=ee,ne(c,u)},render:function Y(ee,Q){let ue=!1,ce=!0===Q.isScene?Q.background:null;ce&&ce.isTexture&&(ce=(Q.backgroundBlurriness>0?n:t).get(ce)),null===ce?ne(c,u):ce&&ce.isColor&&(ne(ce,1),ue=!0);const ye=r.xr.getEnvironmentBlendMode();"additive"===ye?i.buffers.color.setClear(0,0,0,1,a):"alpha-blend"===ye&&i.buffers.color.setClear(0,0,0,0,a),(r.autoClear||ue)&&r.clear(r.autoClearColor,r.autoClearDepth,r.autoClearStencil),ce&&(ce.isCubeTexture||ce.mapping===Gf)?(void 0===A&&(A=new ws(new Xd(1,1,1),new ll({name:"BackgroundCubeMaterial",uniforms:Yd(Ta.backgroundCube.uniforms),vertexShader:Ta.backgroundCube.vertexShader,fragmentShader:Ta.backgroundCube.fragmentShader,side:1,depthTest:!1,depthWrite:!1,fog:!1})),A.geometry.deleteAttribute("normal"),A.geometry.deleteAttribute("uv"),A.onBeforeRender=function(Ee,Le,Fe){this.matrixWorld.copyPosition(Fe.matrixWorld)},Object.defineProperty(A.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),s.update(A)),A.material.uniforms.envMap.value=ce,A.material.uniforms.flipEnvMap.value=ce.isCubeTexture&&!1===ce.isRenderTargetTexture?-1:1,A.material.uniforms.backgroundBlurriness.value=Q.backgroundBlurriness,A.material.uniforms.backgroundIntensity.value=Q.backgroundIntensity,A.material.toneMapped=ti.getTransfer(ce.colorSpace)!==yi,(O!==ce||B!==ce.version||G!==r.toneMapping)&&(A.material.needsUpdate=!0,O=ce,B=ce.version,G=r.toneMapping),A.layers.enableAll(),ee.unshift(A,A.geometry,A.material,0,0,null)):ce&&ce.isTexture&&(void 0===_&&(_=new ws(new Iy(2,2),new ll({name:"BackgroundMaterial",uniforms:Yd(Ta.background.uniforms),vertexShader:Ta.background.vertexShader,fragmentShader:Ta.background.fragmentShader,side:0,depthTest:!1,depthWrite:!1,fog:!1})),_.geometry.deleteAttribute("normal"),Object.defineProperty(_.material,"map",{get:function(){return this.uniforms.t2D.value}}),s.update(_)),_.material.uniforms.t2D.value=ce,_.material.uniforms.backgroundIntensity.value=Q.backgroundIntensity,_.material.toneMapped=ti.getTransfer(ce.colorSpace)!==yi,!0===ce.matrixAutoUpdate&&ce.updateMatrix(),_.material.uniforms.uvTransform.value.copy(ce.matrix),(O!==ce||B!==ce.version||G!==r.toneMapping)&&(_.material.needsUpdate=!0,O=ce,B=ce.version,G=r.toneMapping),_.layers.enableAll(),ee.unshift(_,_.geometry,_.material,0,0,null))}}}function x$(r,t,n,i){const s=r.getParameter(r.MAX_VERTEX_ATTRIBS),o=i.isWebGL2?null:t.get("OES_vertex_array_object"),a=i.isWebGL2||null!==o,c={},u=ee(null);let _=u,A=!1;function G(Qe){return i.isWebGL2?r.bindVertexArray(Qe):o.bindVertexArrayOES(Qe)}function Y(Qe){return i.isWebGL2?r.deleteVertexArray(Qe):o.deleteVertexArrayOES(Qe)}function ee(Qe){const mt=[],At=[],Ct=[];for(let Jt=0;Jt<s;Jt++)mt[Jt]=0,At[Jt]=0,Ct[Jt]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:mt,enabledAttributes:At,attributeDivisors:Ct,object:Qe,attributes:{},index:null}}function ce(){const Qe=_.newAttributes;for(let mt=0,At=Qe.length;mt<At;mt++)Qe[mt]=0}function ye(Qe){Ee(Qe,0)}function Ee(Qe,mt){const Ct=_.enabledAttributes,Jt=_.attributeDivisors;_.newAttributes[Qe]=1,0===Ct[Qe]&&(r.enableVertexAttribArray(Qe),Ct[Qe]=1),Jt[Qe]!==mt&&((i.isWebGL2?r:t.get("ANGLE_instanced_arrays"))[i.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](Qe,mt),Jt[Qe]=mt)}function Le(){const Qe=_.newAttributes,mt=_.enabledAttributes;for(let At=0,Ct=mt.length;At<Ct;At++)mt[At]!==Qe[At]&&(r.disableVertexAttribArray(At),mt[At]=0)}function Fe(Qe,mt,At,Ct,Jt,Rt,Bt){!0===Bt?r.vertexAttribIPointer(Qe,mt,At,Jt,Rt):r.vertexAttribPointer(Qe,mt,At,Ct,Jt,Rt)}function It(){Ut(),A=!0,_!==u&&(_=u,G(_.object))}function Ut(){u.geometry=null,u.program=null,u.wireframe=!1}return{setup:function O(Qe,mt,At,Ct,Jt){let Rt=!1;if(a){const Bt=function ne(Qe,mt,At){const Ct=!0===At.wireframe;let Jt=c[Qe.id];void 0===Jt&&(Jt={},c[Qe.id]=Jt);let Rt=Jt[mt.id];void 0===Rt&&(Rt={},Jt[mt.id]=Rt);let Bt=Rt[Ct];return void 0===Bt&&(Bt=ee(function B(){return i.isWebGL2?r.createVertexArray():o.createVertexArrayOES()}()),Rt[Ct]=Bt),Bt}(Ct,At,mt);_!==Bt&&(_=Bt,G(_.object)),Rt=function Q(Qe,mt,At,Ct){const Jt=_.attributes,Rt=mt.attributes;let Bt=0;const st=At.getAttributes();for(const Et in st)if(st[Et].location>=0){const wn=Jt[Et];let Cn=Rt[Et];if(void 0===Cn&&("instanceMatrix"===Et&&Qe.instanceMatrix&&(Cn=Qe.instanceMatrix),"instanceColor"===Et&&Qe.instanceColor&&(Cn=Qe.instanceColor)),void 0===wn||wn.attribute!==Cn||Cn&&wn.data!==Cn.data)return!0;Bt++}return _.attributesNum!==Bt||_.index!==Ct}(Qe,Ct,At,Jt),Rt&&function ue(Qe,mt,At,Ct){const Jt={},Rt=mt.attributes;let Bt=0;const st=At.getAttributes();for(const Et in st)if(st[Et].location>=0){let wn=Rt[Et];void 0===wn&&("instanceMatrix"===Et&&Qe.instanceMatrix&&(wn=Qe.instanceMatrix),"instanceColor"===Et&&Qe.instanceColor&&(wn=Qe.instanceColor));const Cn={};Cn.attribute=wn,wn&&wn.data&&(Cn.data=wn.data),Jt[Et]=Cn,Bt++}_.attributes=Jt,_.attributesNum=Bt,_.index=Ct}(Qe,Ct,At,Jt)}else{const Bt=!0===mt.wireframe;(_.geometry!==Ct.id||_.program!==At.id||_.wireframe!==Bt)&&(_.geometry=Ct.id,_.program=At.id,_.wireframe=Bt,Rt=!0)}null!==Jt&&n.update(Jt,r.ELEMENT_ARRAY_BUFFER),(Rt||A)&&(A=!1,function Xe(Qe,mt,At,Ct){if(!1===i.isWebGL2&&(Qe.isInstancedMesh||Ct.isInstancedBufferGeometry)&&null===t.get("ANGLE_instanced_arrays"))return;ce();const Jt=Ct.attributes,Rt=At.getAttributes(),Bt=mt.defaultAttributeValues;for(const st in Rt){const Et=Rt[st];if(Et.location>=0){let mn=Jt[st];if(void 0===mn&&("instanceMatrix"===st&&Qe.instanceMatrix&&(mn=Qe.instanceMatrix),"instanceColor"===st&&Qe.instanceColor&&(mn=Qe.instanceColor)),void 0!==mn){const wn=mn.normalized,Cn=mn.itemSize,qn=n.get(mn);if(void 0===qn)continue;const Jn=qn.buffer,$n=qn.type,ur=qn.bytesPerElement,kr=!0===i.isWebGL2&&($n===r.INT||$n===r.UNSIGNED_INT||1013===mn.gpuType);if(mn.isInterleavedBufferAttribute){const Xn=mn.data,$e=Xn.stride,dn=mn.offset;if(Xn.isInstancedInterleavedBuffer){for(let Tt=0;Tt<Et.locationSize;Tt++)Ee(Et.location+Tt,Xn.meshPerAttribute);!0!==Qe.isInstancedMesh&&void 0===Ct._maxInstanceCount&&(Ct._maxInstanceCount=Xn.meshPerAttribute*Xn.count)}else for(let Tt=0;Tt<Et.locationSize;Tt++)ye(Et.location+Tt);r.bindBuffer(r.ARRAY_BUFFER,Jn);for(let Tt=0;Tt<Et.locationSize;Tt++)Fe(Et.location+Tt,Cn/Et.locationSize,$n,wn,$e*ur,(dn+Cn/Et.locationSize*Tt)*ur,kr)}else{if(mn.isInstancedBufferAttribute){for(let Xn=0;Xn<Et.locationSize;Xn++)Ee(Et.location+Xn,mn.meshPerAttribute);!0!==Qe.isInstancedMesh&&void 0===Ct._maxInstanceCount&&(Ct._maxInstanceCount=mn.meshPerAttribute*mn.count)}else for(let Xn=0;Xn<Et.locationSize;Xn++)ye(Et.location+Xn);r.bindBuffer(r.ARRAY_BUFFER,Jn);for(let Xn=0;Xn<Et.locationSize;Xn++)Fe(Et.location+Xn,Cn/Et.locationSize,$n,wn,Cn*ur,Cn/Et.locationSize*Xn*ur,kr)}}else if(void 0!==Bt){const wn=Bt[st];if(void 0!==wn)switch(wn.length){case 2:r.vertexAttrib2fv(Et.location,wn);break;case 3:r.vertexAttrib3fv(Et.location,wn);break;case 4:r.vertexAttrib4fv(Et.location,wn);break;default:r.vertexAttrib1fv(Et.location,wn)}}}}Le()}(Qe,mt,At,Ct),null!==Jt&&r.bindBuffer(r.ELEMENT_ARRAY_BUFFER,n.get(Jt).buffer))},reset:It,resetDefaultState:Ut,dispose:function Me(){It();for(const Qe in c){const mt=c[Qe];for(const At in mt){const Ct=mt[At];for(const Jt in Ct)Y(Ct[Jt].object),delete Ct[Jt];delete mt[At]}delete c[Qe]}},releaseStatesOfGeometry:function Ne(Qe){if(void 0===c[Qe.id])return;const mt=c[Qe.id];for(const At in mt){const Ct=mt[At];for(const Jt in Ct)Y(Ct[Jt].object),delete Ct[Jt];delete mt[At]}delete c[Qe.id]},releaseStatesOfProgram:function dt(Qe){for(const mt in c){const At=c[mt];if(void 0===At[Qe.id])continue;const Ct=At[Qe.id];for(const Jt in Ct)Y(Ct[Jt].object),delete Ct[Jt];delete At[Qe.id]}},initAttributes:ce,enableAttribute:ye,disableUnusedAttributes:Le}}function w$(r,t,n,i){const s=i.isWebGL2;let o;this.setMode=function a(_){o=_},this.render=function c(_,A){r.drawArrays(o,_,A),n.update(A,o,1)},this.renderInstances=function u(_,A,O){if(0===O)return;let B,G;if(s)B=r,G="drawArraysInstanced";else if(B=t.get("ANGLE_instanced_arrays"),G="drawArraysInstancedANGLE",null===B)return void console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");B[G](o,_,A,O),n.update(A,o,O)}}function S$(r,t,n){let i;function o(Fe){if("highp"===Fe){if(r.getShaderPrecisionFormat(r.VERTEX_SHADER,r.HIGH_FLOAT).precision>0&&r.getShaderPrecisionFormat(r.FRAGMENT_SHADER,r.HIGH_FLOAT).precision>0)return"highp";Fe="mediump"}return"mediump"===Fe&&r.getShaderPrecisionFormat(r.VERTEX_SHADER,r.MEDIUM_FLOAT).precision>0&&r.getShaderPrecisionFormat(r.FRAGMENT_SHADER,r.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}const a=typeof WebGL2RenderingContext<"u"&&"WebGL2RenderingContext"===r.constructor.name;let c=void 0!==n.precision?n.precision:"highp";const u=o(c);u!==c&&(console.warn("THREE.WebGLRenderer:",c,"not supported, using",u,"instead."),c=u);const _=a||t.has("WEBGL_draw_buffers"),A=!0===n.logarithmicDepthBuffer,O=r.getParameter(r.MAX_TEXTURE_IMAGE_UNITS),B=r.getParameter(r.MAX_VERTEX_TEXTURE_IMAGE_UNITS),G=r.getParameter(r.MAX_TEXTURE_SIZE),Y=r.getParameter(r.MAX_CUBE_MAP_TEXTURE_SIZE),ne=r.getParameter(r.MAX_VERTEX_ATTRIBS),ee=r.getParameter(r.MAX_VERTEX_UNIFORM_VECTORS),Q=r.getParameter(r.MAX_VARYING_VECTORS),ue=r.getParameter(r.MAX_FRAGMENT_UNIFORM_VECTORS),ce=B>0,ye=a||t.has("OES_texture_float");return{isWebGL2:a,drawBuffers:_,getMaxAnisotropy:function s(){if(void 0!==i)return i;if(!0===t.has("EXT_texture_filter_anisotropic")){const Fe=t.get("EXT_texture_filter_anisotropic");i=r.getParameter(Fe.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else i=0;return i},getMaxPrecision:o,precision:c,logarithmicDepthBuffer:A,maxTextures:O,maxVertexTextures:B,maxTextureSize:G,maxCubemapSize:Y,maxAttributes:ne,maxVertexUniforms:ee,maxVaryings:Q,maxFragmentUniforms:ue,vertexTextures:ce,floatFragmentTextures:ye,floatVertexTextures:ce&&ye,maxSamples:a?r.getParameter(r.MAX_SAMPLES):0}}function M$(r){const t=this;let n=null,i=0,s=!1,o=!1;const a=new Fc,c=new yr,u={value:null,needsUpdate:!1};function A(O,B,G,Y){const ne=null!==O?O.length:0;let ee=null;if(0!==ne){if(ee=u.value,!0!==Y||null===ee){const Q=G+4*ne,ue=B.matrixWorldInverse;c.getNormalMatrix(ue),(null===ee||ee.length<Q)&&(ee=new Float32Array(Q));for(let ce=0,ye=G;ce!==ne;++ce,ye+=4)a.copy(O[ce]).applyMatrix4(ue,c),a.normal.toArray(ee,ye),ee[ye+3]=a.constant}u.value=ee,u.needsUpdate=!0}return t.numPlanes=ne,t.numIntersection=0,ee}this.uniform=u,this.numPlanes=0,this.numIntersection=0,this.init=function(O,B){const G=0!==O.length||B||0!==i||s;return s=B,i=O.length,G},this.beginShadows=function(){o=!0,A(null)},this.endShadows=function(){o=!1},this.setGlobalState=function(O,B){n=A(O,B,0)},this.setState=function(O,B,G){const Y=O.clippingPlanes,ne=O.clipIntersection,ee=O.clipShadows,Q=r.get(O);if(!s||null===Y||0===Y.length||o&&!ee)o?A(null):function _(){u.value!==n&&(u.value=n,u.needsUpdate=i>0),t.numPlanes=i,t.numIntersection=0}();else{const ue=o?0:i,ce=4*ue;let ye=Q.clippingState||null;u.value=ye,ye=A(Y,B,ce,G);for(let Ee=0;Ee!==ce;++Ee)ye[Ee]=n[Ee];Q.clippingState=ye,this.numIntersection=ne?this.numPlanes:0,this.numPlanes+=ue}}}function E$(r){let t=new WeakMap;function n(a,c){return 303===c?a.mapping=Fl:304===c&&(a.mapping=Tc),a}function s(a){const c=a.target;c.removeEventListener("dispose",s);const u=t.get(c);void 0!==u&&(t.delete(c),u.dispose())}return{get:function i(a){if(a&&a.isTexture&&!1===a.isRenderTargetTexture){const c=a.mapping;if(303===c||304===c){if(t.has(a))return n(t.get(a).texture,a.mapping);{const u=a.image;if(u&&u.height>0){const _=new bW(u.height/2);return _.fromEquirectangularTexture(r,a),t.set(a,_),a.addEventListener("dispose",s),n(_.texture,a.mapping)}return null}}}return a},dispose:function o(){t=new WeakMap}}}class fx extends ux{constructor(t=-1,n=1,i=1,s=-1,o=.1,a=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=t,this.right=n,this.top=i,this.bottom=s,this.near=o,this.far=a,this.updateProjectionMatrix()}copy(t,n){return super.copy(t,n),this.left=t.left,this.right=t.right,this.top=t.top,this.bottom=t.bottom,this.near=t.near,this.far=t.far,this.zoom=t.zoom,this.view=null===t.view?null:Object.assign({},t.view),this}setViewOffset(t,n,i,s,o,a){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=n,this.view.offsetX=i,this.view.offsetY=s,this.view.width=o,this.view.height=a,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const t=(this.right-this.left)/(2*this.zoom),n=(this.top-this.bottom)/(2*this.zoom),i=(this.right+this.left)/2,s=(this.top+this.bottom)/2;let o=i-t,a=i+t,c=s+n,u=s-n;if(null!==this.view&&this.view.enabled){const _=(this.right-this.left)/this.view.fullWidth/this.zoom,A=(this.top-this.bottom)/this.view.fullHeight/this.zoom;o+=_*this.view.offsetX,a=o+_*this.view.width,c-=A*this.view.offsetY,u=c-A*this.view.height}this.projectionMatrix.makeOrthographic(o,a,c,u,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(t){const n=super.toJSON(t);return n.object.zoom=this.zoom,n.object.left=this.left,n.object.right=this.right,n.object.top=this.top,n.object.bottom=this.bottom,n.object.near=this.near,n.object.far=this.far,null!==this.view&&(n.object.view=Object.assign({},this.view)),n}}const kR=[.125,.215,.35,.446,.526,.582],px=new fx,FR=new xn;let mx=null,gx=0,yx=0;const Vc=(1+Math.sqrt(5))/2,Qd=1/Vc,UR=[new ke(1,1,1),new ke(-1,1,1),new ke(1,1,-1),new ke(-1,1,-1),new ke(0,Vc,Qd),new ke(0,Vc,-Qd),new ke(Qd,0,Vc),new ke(-Qd,0,Vc),new ke(Vc,Qd,0),new ke(-Vc,Qd,0)];class BR{constructor(t){this._renderer=t,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(t,n=0,i=.1,s=100){mx=this._renderer.getRenderTarget(),gx=this._renderer.getActiveCubeFace(),yx=this._renderer.getActiveMipmapLevel(),this._setSize(256);const o=this._allocateTargets();return o.depthBuffer=!0,this._sceneToCubeUV(t,i,s,o),n>0&&this._blur(o,0,0,n),this._applyPMREM(o),this._cleanup(o),o}fromEquirectangular(t,n=null){return this._fromTexture(t,n)}fromCubemap(t,n=null){return this._fromTexture(t,n)}compileCubemapShader(){null===this._cubemapMaterial&&(this._cubemapMaterial=GR(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){null===this._equirectMaterial&&(this._equirectMaterial=zR(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),null!==this._cubemapMaterial&&this._cubemapMaterial.dispose(),null!==this._equirectMaterial&&this._equirectMaterial.dispose()}_setSize(t){this._lodMax=Math.floor(Math.log2(t)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){null!==this._blurMaterial&&this._blurMaterial.dispose(),null!==this._pingPongRenderTarget&&this._pingPongRenderTarget.dispose();for(let t=0;t<this._lodPlanes.length;t++)this._lodPlanes[t].dispose()}_cleanup(t){this._renderer.setRenderTarget(mx,gx,yx),t.scissorTest=!1,Ry(t,0,0,t.width,t.height)}_fromTexture(t,n){this._setSize(t.mapping===Fl||t.mapping===Tc?0===t.image.length?16:t.image[0].width||t.image[0].image.width:t.image.width/4),mx=this._renderer.getRenderTarget(),gx=this._renderer.getActiveCubeFace(),yx=this._renderer.getActiveMipmapLevel();const i=n||this._allocateTargets();return this._textureToCubeUV(t,i),this._applyPMREM(i),this._cleanup(i),i}_allocateTargets(){const t=3*Math.max(this._cubeSize,112),n=4*this._cubeSize,i={magFilter:Yi,minFilter:Yi,generateMipmaps:!1,type:Hf,format:Bo,colorSpace:Qa,depthBuffer:!1},s=VR(t,n,i);if(null===this._pingPongRenderTarget||this._pingPongRenderTarget.width!==t||this._pingPongRenderTarget.height!==n){null!==this._pingPongRenderTarget&&this._dispose(),this._pingPongRenderTarget=VR(t,n,i);const{_lodMax:o}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=function C$(r){const t=[],n=[],i=[];let s=r;const o=r-4+1+kR.length;for(let a=0;a<o;a++){const c=Math.pow(2,s);n.push(c);let u=1/c;a>r-4?u=kR[a-r+4-1]:0===a&&(u=0),i.push(u);const _=1/(c-2),A=-_,O=1+_,B=[A,A,O,A,O,O,A,A,O,O,A,O],G=6,Y=6,ne=3,ee=2,Q=1,ue=new Float32Array(ne*Y*G),ce=new Float32Array(ee*Y*G),ye=new Float32Array(Q*Y*G);for(let Le=0;Le<G;Le++){const Fe=Le%3*2/3-1,Xe=Le>2?0:-1;ue.set([Fe,Xe,0,Fe+2/3,Xe,0,Fe+2/3,Xe+1,0,Fe,Xe,0,Fe+2/3,Xe+1,0,Fe,Xe+1,0],ne*Y*Le),ce.set(B,ee*Y*Le),ye.set([Le,Le,Le,Le,Le,Le],Q*Y*Le)}const Ee=new xr;Ee.setAttribute("position",new hi(ue,ne)),Ee.setAttribute("uv",new hi(ce,ee)),Ee.setAttribute("faceIndex",new hi(ye,Q)),t.push(Ee),s>4&&s--}return{lodPlanes:t,sizeLods:n,sigmas:i}}(o)),this._blurMaterial=function T$(r,t,n){const i=new Float32Array(20),s=new ke(0,1,0);return new ll({name:"SphericalGaussianBlur",defines:{n:20,CUBEUV_TEXEL_WIDTH:1/t,CUBEUV_TEXEL_HEIGHT:1/n,CUBEUV_MAX_MIP:`${r}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:i},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:s}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform int samples;\n\t\t\tuniform float weights[ n ];\n\t\t\tuniform bool latitudinal;\n\t\t\tuniform float dTheta;\n\t\t\tuniform float mipInt;\n\t\t\tuniform vec3 poleAxis;\n\n\t\t\t#define ENVMAP_TYPE_CUBE_UV\n\t\t\t#include <cube_uv_reflection_fragment>\n\n\t\t\tvec3 getSample( float theta, vec3 axis ) {\n\n\t\t\t\tfloat cosTheta = cos( theta );\n\t\t\t\t// Rodrigues' axis-angle rotation\n\t\t\t\tvec3 sampleDirection = vOutputDirection * cosTheta\n\t\t\t\t\t+ cross( axis, vOutputDirection ) * sin( theta )\n\t\t\t\t\t+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );\n\n\t\t\t\treturn bilinearCubeUV( envMap, sampleDirection, mipInt );\n\n\t\t\t}\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );\n\n\t\t\t\tif ( all( equal( axis, vec3( 0.0 ) ) ) ) {\n\n\t\t\t\t\taxis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );\n\n\t\t\t\t}\n\n\t\t\t\taxis = normalize( axis );\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );\n\n\t\t\t\tfor ( int i = 1; i < n; i++ ) {\n\n\t\t\t\t\tif ( i >= samples ) {\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfloat theta = dTheta * float( i );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( theta, axis );\n\n\t\t\t\t}\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}(o,t,n)}return s}_compileMaterial(t){const n=new ws(this._lodPlanes[0],t);this._renderer.compile(n,px)}_sceneToCubeUV(t,n,i,s){const c=new Ss(90,1,n,i),u=[1,-1,1,1,1,1],_=[1,1,1,-1,-1,-1],A=this._renderer,O=A.autoClear,B=A.toneMapping;A.getClearColor(FR),A.toneMapping=kl,A.autoClear=!1;const G=new Nc({name:"PMREM.Background",side:1,depthWrite:!1,depthTest:!1}),Y=new ws(new Xd,G);let ne=!1;const ee=t.background;ee?ee.isColor&&(G.color.copy(ee),t.background=null,ne=!0):(G.color.copy(FR),ne=!0);for(let Q=0;Q<6;Q++){const ue=Q%3;0===ue?(c.up.set(0,u[Q],0),c.lookAt(_[Q],0,0)):1===ue?(c.up.set(0,0,u[Q]),c.lookAt(0,_[Q],0)):(c.up.set(0,u[Q],0),c.lookAt(0,0,_[Q]));const ce=this._cubeSize;Ry(s,ue*ce,Q>2?ce:0,ce,ce),A.setRenderTarget(s),ne&&A.render(Y,c),A.render(t,c)}Y.geometry.dispose(),Y.material.dispose(),A.toneMapping=B,A.autoClear=O,t.background=ee}_textureToCubeUV(t,n){const i=this._renderer,s=t.mapping===Fl||t.mapping===Tc;s?(null===this._cubemapMaterial&&(this._cubemapMaterial=GR()),this._cubemapMaterial.uniforms.flipEnvMap.value=!1===t.isRenderTargetTexture?-1:1):null===this._equirectMaterial&&(this._equirectMaterial=zR());const o=s?this._cubemapMaterial:this._equirectMaterial,a=new ws(this._lodPlanes[0],o);o.uniforms.envMap.value=t;const u=this._cubeSize;Ry(n,0,0,3*u,2*u),i.setRenderTarget(n),i.render(a,px)}_applyPMREM(t){const n=this._renderer,i=n.autoClear;n.autoClear=!1;for(let s=1;s<this._lodPlanes.length;s++){const o=Math.sqrt(this._sigmas[s]*this._sigmas[s]-this._sigmas[s-1]*this._sigmas[s-1]);this._blur(t,s-1,s,o,UR[(s-1)%UR.length])}n.autoClear=i}_blur(t,n,i,s,o){const a=this._pingPongRenderTarget;this._halfBlur(t,a,n,i,s,"latitudinal",o),this._halfBlur(a,t,i,i,s,"longitudinal",o)}_halfBlur(t,n,i,s,o,a,c){const u=this._renderer,_=this._blurMaterial;"latitudinal"!==a&&"longitudinal"!==a&&console.error("blur direction must be either latitudinal or longitudinal!");const O=new ws(this._lodPlanes[s],_),B=_.uniforms,G=this._sizeLods[i]-1,Y=isFinite(o)?Math.PI/(2*G):2*Math.PI/39,ne=o/Y,ee=isFinite(o)?1+Math.floor(3*ne):20;ee>20&&console.warn(`sigmaRadians, ${o}, is too large and will clip, as it requested ${ee} samples when the maximum is set to 20`);const Q=[];let ue=0;for(let Fe=0;Fe<20;++Fe){const Xe=Fe/ne,Me=Math.exp(-Xe*Xe/2);Q.push(Me),0===Fe?ue+=Me:Fe<ee&&(ue+=2*Me)}for(let Fe=0;Fe<Q.length;Fe++)Q[Fe]=Q[Fe]/ue;B.envMap.value=t.texture,B.samples.value=ee,B.weights.value=Q,B.latitudinal.value="latitudinal"===a,c&&(B.poleAxis.value=c);const{_lodMax:ce}=this;B.dTheta.value=Y,B.mipInt.value=ce-i;const ye=this._sizeLods[s];Ry(n,3*ye*(s>ce-4?s-ce+4:0),4*(this._cubeSize-ye),3*ye,2*ye),u.setRenderTarget(n),u.render(O,px)}}function VR(r,t,n){const i=new Ea(r,t,n);return i.texture.mapping=Gf,i.texture.name="PMREM.cubeUv",i.scissorTest=!0,i}function Ry(r,t,n,i,s){r.viewport.set(t,n,i,s),r.scissor.set(t,n,i,s)}function zR(){return new ll({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\n\t\t\t#include <common>\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 outputDirection = normalize( vOutputDirection );\n\t\t\t\tvec2 uv = equirectUv( outputDirection );\n\n\t\t\t\tgl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}function GR(){return new ll({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tuniform float flipEnvMap;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform samplerCube envMap;\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}function A$(r){let t=new WeakMap,n=null;function o(c){const u=c.target;u.removeEventListener("dispose",o);const _=t.get(u);void 0!==_&&(t.delete(u),_.dispose())}return{get:function i(c){if(c&&c.isTexture){const u=c.mapping,_=303===u||304===u,A=u===Fl||u===Tc;if(_||A){if(c.isRenderTargetTexture&&!0===c.needsPMREMUpdate){c.needsPMREMUpdate=!1;let O=t.get(c);return null===n&&(n=new BR(r)),O=_?n.fromEquirectangular(c,O):n.fromCubemap(c,O),t.set(c,O),O.texture}if(t.has(c))return t.get(c).texture;{const O=c.image;if(_&&O&&O.height>0||A&&O&&function s(c){let u=0;for(let A=0;A<6;A++)void 0!==c[A]&&u++;return 6===u}(O)){null===n&&(n=new BR(r));const B=_?n.fromEquirectangular(c):n.fromCubemap(c);return t.set(c,B),c.addEventListener("dispose",o),B.texture}return null}}}return c},dispose:function a(){t=new WeakMap,null!==n&&(n.dispose(),n=null)}}}function D$(r){const t={};function n(i){if(void 0!==t[i])return t[i];let s;switch(i){case"WEBGL_depth_texture":s=r.getExtension("WEBGL_depth_texture")||r.getExtension("MOZ_WEBGL_depth_texture")||r.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":s=r.getExtension("EXT_texture_filter_anisotropic")||r.getExtension("MOZ_EXT_texture_filter_anisotropic")||r.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":s=r.getExtension("WEBGL_compressed_texture_s3tc")||r.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||r.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":s=r.getExtension("WEBGL_compressed_texture_pvrtc")||r.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:s=r.getExtension(i)}return t[i]=s,s}return{has:function(i){return null!==n(i)},init:function(i){i.isWebGL2?n("EXT_color_buffer_float"):(n("WEBGL_depth_texture"),n("OES_texture_float"),n("OES_texture_half_float"),n("OES_texture_half_float_linear"),n("OES_standard_derivatives"),n("OES_element_index_uint"),n("OES_vertex_array_object"),n("ANGLE_instanced_arrays")),n("OES_texture_float_linear"),n("EXT_color_buffer_half_float"),n("WEBGL_multisampled_render_to_texture")},get:function(i){const s=n(i);return null===s&&console.warn("THREE.WebGLRenderer: "+i+" extension not supported."),s}}}function I$(r,t,n,i){const s={},o=new WeakMap;function a(O){const B=O.target;null!==B.index&&t.remove(B.index);for(const Y in B.attributes)t.remove(B.attributes[Y]);for(const Y in B.morphAttributes){const ne=B.morphAttributes[Y];for(let ee=0,Q=ne.length;ee<Q;ee++)t.remove(ne[ee])}B.removeEventListener("dispose",a),delete s[B.id];const G=o.get(B);G&&(t.remove(G),o.delete(B)),i.releaseStatesOfGeometry(B),!0===B.isInstancedBufferGeometry&&delete B._maxInstanceCount,n.memory.geometries--}function _(O){const B=[],G=O.index,Y=O.attributes.position;let ne=0;if(null!==G){const ue=G.array;ne=G.version;for(let ce=0,ye=ue.length;ce<ye;ce+=3){const Ee=ue[ce+0],Le=ue[ce+1],Fe=ue[ce+2];B.push(Ee,Le,Le,Fe,Fe,Ee)}}else{if(void 0===Y)return;ne=Y.version;for(let ce=0,ye=Y.array.length/3-1;ce<ye;ce+=3){const Ee=ce+0,Le=ce+1,Fe=ce+2;B.push(Ee,Le,Le,Fe,Fe,Ee)}}const ee=new(fR(B)?DR:AR)(B,1);ee.version=ne;const Q=o.get(O);Q&&t.remove(Q),o.set(O,ee)}return{get:function c(O,B){return!0===s[B.id]||(B.addEventListener("dispose",a),s[B.id]=!0,n.memory.geometries++),B},update:function u(O){const B=O.attributes;for(const Y in B)t.update(B[Y],r.ARRAY_BUFFER);const G=O.morphAttributes;for(const Y in G){const ne=G[Y];for(let ee=0,Q=ne.length;ee<Q;ee++)t.update(ne[ee],r.ARRAY_BUFFER)}},getWireframeAttribute:function A(O){const B=o.get(O);if(B){const G=O.index;null!==G&&B.version<G.version&&_(O)}else _(O);return o.get(O)}}}function P$(r,t,n,i){const s=i.isWebGL2;let o,c,u;this.setMode=function a(B){o=B},this.setIndex=function _(B){c=B.type,u=B.bytesPerElement},this.render=function A(B,G){r.drawElements(o,G,c,B*u),n.update(G,o,1)},this.renderInstances=function O(B,G,Y){if(0===Y)return;let ne,ee;if(s)ne=r,ee="drawElementsInstanced";else if(ne=t.get("ANGLE_instanced_arrays"),ee="drawElementsInstancedANGLE",null===ne)return void console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");ne[ee](o,G,c,B*u,Y),n.update(G,o,Y)}}function R$(r){const n={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:n,programs:null,autoReset:!0,reset:function s(){n.calls=0,n.triangles=0,n.points=0,n.lines=0},update:function i(o,a,c){switch(n.calls++,a){case r.TRIANGLES:n.triangles+=c*(o/3);break;case r.LINES:n.lines+=c*(o/2);break;case r.LINE_STRIP:n.lines+=c*(o-1);break;case r.LINE_LOOP:n.lines+=c*o;break;case r.POINTS:n.points+=c*o;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",a)}}}}function O$(r,t){return r[0]-t[0]}function L$(r,t){return Math.abs(t[1])-Math.abs(r[1])}function j$(r,t,n){const i={},s=new Float32Array(8),o=new WeakMap,a=new ni,c=[];for(let _=0;_<8;_++)c[_]=[_,0];return{update:function u(_,A,O){const B=_.morphTargetInfluences;if(!0===t.isWebGL2){const G=A.morphAttributes.position||A.morphAttributes.normal||A.morphAttributes.color,Y=void 0!==G?G.length:0;let ne=o.get(A);if(void 0===ne||ne.count!==Y){let Qe=function(){It.dispose(),o.delete(A),A.removeEventListener("dispose",Qe)};void 0!==ne&&ne.texture.dispose();const ue=void 0!==A.morphAttributes.position,ce=void 0!==A.morphAttributes.normal,ye=void 0!==A.morphAttributes.color,Ee=A.morphAttributes.position||[],Le=A.morphAttributes.normal||[],Fe=A.morphAttributes.color||[];let Xe=0;!0===ue&&(Xe=1),!0===ce&&(Xe=2),!0===ye&&(Xe=3);let Me=A.attributes.position.count*Xe,Ne=1;Me>t.maxTextureSize&&(Ne=Math.ceil(Me/t.maxTextureSize),Me=t.maxTextureSize);const dt=new Float32Array(Me*Ne*4*Y),It=new Y1(dt,Me,Ne,Y);It.type=Ja,It.needsUpdate=!0;const Ut=4*Xe;for(let mt=0;mt<Y;mt++){const At=Ee[mt],Ct=Le[mt],Jt=Fe[mt],Rt=Me*Ne*4*mt;for(let Bt=0;Bt<At.count;Bt++){const st=Bt*Ut;!0===ue&&(a.fromBufferAttribute(At,Bt),dt[Rt+st+0]=a.x,dt[Rt+st+1]=a.y,dt[Rt+st+2]=a.z,dt[Rt+st+3]=0),!0===ce&&(a.fromBufferAttribute(Ct,Bt),dt[Rt+st+4]=a.x,dt[Rt+st+5]=a.y,dt[Rt+st+6]=a.z,dt[Rt+st+7]=0),!0===ye&&(a.fromBufferAttribute(Jt,Bt),dt[Rt+st+8]=a.x,dt[Rt+st+9]=a.y,dt[Rt+st+10]=a.z,dt[Rt+st+11]=4===Jt.itemSize?a.w:1)}}ne={count:Y,texture:It,size:new Lt(Me,Ne)},o.set(A,ne),A.addEventListener("dispose",Qe)}let ee=0;for(let ue=0;ue<B.length;ue++)ee+=B[ue];const Q=A.morphTargetsRelative?1:1-ee;O.getUniforms().setValue(r,"morphTargetBaseInfluence",Q),O.getUniforms().setValue(r,"morphTargetInfluences",B),O.getUniforms().setValue(r,"morphTargetsTexture",ne.texture,n),O.getUniforms().setValue(r,"morphTargetsTextureSize",ne.size)}else{const G=void 0===B?0:B.length;let Y=i[A.id];if(void 0===Y||Y.length!==G){Y=[];for(let ce=0;ce<G;ce++)Y[ce]=[ce,0];i[A.id]=Y}for(let ce=0;ce<G;ce++){const ye=Y[ce];ye[0]=ce,ye[1]=B[ce]}Y.sort(L$);for(let ce=0;ce<8;ce++)ce<G&&Y[ce][1]?(c[ce][0]=Y[ce][0],c[ce][1]=Y[ce][1]):(c[ce][0]=Number.MAX_SAFE_INTEGER,c[ce][1]=0);c.sort(O$);const ne=A.morphAttributes.position,ee=A.morphAttributes.normal;let Q=0;for(let ce=0;ce<8;ce++){const ye=c[ce],Ee=ye[0],Le=ye[1];Ee!==Number.MAX_SAFE_INTEGER&&Le?(ne&&A.getAttribute("morphTarget"+ce)!==ne[Ee]&&A.setAttribute("morphTarget"+ce,ne[Ee]),ee&&A.getAttribute("morphNormal"+ce)!==ee[Ee]&&A.setAttribute("morphNormal"+ce,ee[Ee]),s[ce]=Le,Q+=Le):(ne&&!0===A.hasAttribute("morphTarget"+ce)&&A.deleteAttribute("morphTarget"+ce),ee&&!0===A.hasAttribute("morphNormal"+ce)&&A.deleteAttribute("morphNormal"+ce),s[ce]=0)}const ue=A.morphTargetsRelative?1:1-Q;O.getUniforms().setValue(r,"morphTargetBaseInfluence",ue),O.getUniforms().setValue(r,"morphTargetInfluences",s)}}}}function N$(r,t,n,i){let s=new WeakMap;function c(u){const _=u.target;_.removeEventListener("dispose",c),n.remove(_.instanceMatrix),null!==_.instanceColor&&n.remove(_.instanceColor)}return{update:function o(u){const _=i.render.frame,O=t.get(u,u.geometry);if(s.get(O)!==_&&(t.update(O),s.set(O,_)),u.isInstancedMesh&&(!1===u.hasEventListener("dispose",c)&&u.addEventListener("dispose",c),s.get(u)!==_&&(n.update(u.instanceMatrix,r.ARRAY_BUFFER),null!==u.instanceColor&&n.update(u.instanceColor,r.ARRAY_BUFFER),s.set(u,_))),u.isSkinnedMesh){const B=u.skeleton;s.get(B)!==_&&(B.update(),s.set(B,_))}return O},dispose:function a(){s=new WeakMap}}}const HR=new Mo,WR=new Y1,qR=new vR,$R=new Ay,XR=[],YR=[],ZR=new Float32Array(16),KR=new Float32Array(9),JR=new Float32Array(4);function eh(r,t,n){const i=r[0];if(i<=0||i>0)return r;const s=t*n;let o=XR[s];if(void 0===o&&(o=new Float32Array(s),XR[s]=o),0!==t){i.toArray(o,0);for(let a=1,c=0;a!==t;++a)c+=n,r[a].toArray(o,c)}return o}function as(r,t){if(r.length!==t.length)return!1;for(let n=0,i=r.length;n<i;n++)if(r[n]!==t[n])return!1;return!0}function ls(r,t){for(let n=0,i=t.length;n<i;n++)r[n]=t[n]}function Oy(r,t){let n=YR[t];void 0===n&&(n=new Int32Array(t),YR[t]=n);for(let i=0;i!==t;++i)n[i]=r.allocateTextureUnit();return n}function k$(r,t){const n=this.cache;n[0]!==t&&(r.uniform1f(this.addr,t),n[0]=t)}function F$(r,t){const n=this.cache;if(void 0!==t.x)(n[0]!==t.x||n[1]!==t.y)&&(r.uniform2f(this.addr,t.x,t.y),n[0]=t.x,n[1]=t.y);else{if(as(n,t))return;r.uniform2fv(this.addr,t),ls(n,t)}}function U$(r,t){const n=this.cache;if(void 0!==t.x)(n[0]!==t.x||n[1]!==t.y||n[2]!==t.z)&&(r.uniform3f(this.addr,t.x,t.y,t.z),n[0]=t.x,n[1]=t.y,n[2]=t.z);else if(void 0!==t.r)(n[0]!==t.r||n[1]!==t.g||n[2]!==t.b)&&(r.uniform3f(this.addr,t.r,t.g,t.b),n[0]=t.r,n[1]=t.g,n[2]=t.b);else{if(as(n,t))return;r.uniform3fv(this.addr,t),ls(n,t)}}function B$(r,t){const n=this.cache;if(void 0!==t.x)(n[0]!==t.x||n[1]!==t.y||n[2]!==t.z||n[3]!==t.w)&&(r.uniform4f(this.addr,t.x,t.y,t.z,t.w),n[0]=t.x,n[1]=t.y,n[2]=t.z,n[3]=t.w);else{if(as(n,t))return;r.uniform4fv(this.addr,t),ls(n,t)}}function V$(r,t){const n=this.cache,i=t.elements;if(void 0===i){if(as(n,t))return;r.uniformMatrix2fv(this.addr,!1,t),ls(n,t)}else{if(as(n,i))return;JR.set(i),r.uniformMatrix2fv(this.addr,!1,JR),ls(n,i)}}function z$(r,t){const n=this.cache,i=t.elements;if(void 0===i){if(as(n,t))return;r.uniformMatrix3fv(this.addr,!1,t),ls(n,t)}else{if(as(n,i))return;KR.set(i),r.uniformMatrix3fv(this.addr,!1,KR),ls(n,i)}}function G$(r,t){const n=this.cache,i=t.elements;if(void 0===i){if(as(n,t))return;r.uniformMatrix4fv(this.addr,!1,t),ls(n,t)}else{if(as(n,i))return;ZR.set(i),r.uniformMatrix4fv(this.addr,!1,ZR),ls(n,i)}}function H$(r,t){const n=this.cache;n[0]!==t&&(r.uniform1i(this.addr,t),n[0]=t)}function W$(r,t){const n=this.cache;if(void 0!==t.x)(n[0]!==t.x||n[1]!==t.y)&&(r.uniform2i(this.addr,t.x,t.y),n[0]=t.x,n[1]=t.y);else{if(as(n,t))return;r.uniform2iv(this.addr,t),ls(n,t)}}function q$(r,t){const n=this.cache;if(void 0!==t.x)(n[0]!==t.x||n[1]!==t.y||n[2]!==t.z)&&(r.uniform3i(this.addr,t.x,t.y,t.z),n[0]=t.x,n[1]=t.y,n[2]=t.z);else{if(as(n,t))return;r.uniform3iv(this.addr,t),ls(n,t)}}function $$(r,t){const n=this.cache;if(void 0!==t.x)(n[0]!==t.x||n[1]!==t.y||n[2]!==t.z||n[3]!==t.w)&&(r.uniform4i(this.addr,t.x,t.y,t.z,t.w),n[0]=t.x,n[1]=t.y,n[2]=t.z,n[3]=t.w);else{if(as(n,t))return;r.uniform4iv(this.addr,t),ls(n,t)}}function X$(r,t){const n=this.cache;n[0]!==t&&(r.uniform1ui(this.addr,t),n[0]=t)}function Y$(r,t){const n=this.cache;if(void 0!==t.x)(n[0]!==t.x||n[1]!==t.y)&&(r.uniform2ui(this.addr,t.x,t.y),n[0]=t.x,n[1]=t.y);else{if(as(n,t))return;r.uniform2uiv(this.addr,t),ls(n,t)}}function Z$(r,t){const n=this.cache;if(void 0!==t.x)(n[0]!==t.x||n[1]!==t.y||n[2]!==t.z)&&(r.uniform3ui(this.addr,t.x,t.y,t.z),n[0]=t.x,n[1]=t.y,n[2]=t.z);else{if(as(n,t))return;r.uniform3uiv(this.addr,t),ls(n,t)}}function K$(r,t){const n=this.cache;if(void 0!==t.x)(n[0]!==t.x||n[1]!==t.y||n[2]!==t.z||n[3]!==t.w)&&(r.uniform4ui(this.addr,t.x,t.y,t.z,t.w),n[0]=t.x,n[1]=t.y,n[2]=t.z,n[3]=t.w);else{if(as(n,t))return;r.uniform4uiv(this.addr,t),ls(n,t)}}function J$(r,t,n){const i=this.cache,s=n.allocateTextureUnit();i[0]!==s&&(r.uniform1i(this.addr,s),i[0]=s),n.setTexture2D(t||HR,s)}function Q$(r,t,n){const i=this.cache,s=n.allocateTextureUnit();i[0]!==s&&(r.uniform1i(this.addr,s),i[0]=s),n.setTexture3D(t||qR,s)}function eX(r,t,n){const i=this.cache,s=n.allocateTextureUnit();i[0]!==s&&(r.uniform1i(this.addr,s),i[0]=s),n.setTextureCube(t||$R,s)}function tX(r,t,n){const i=this.cache,s=n.allocateTextureUnit();i[0]!==s&&(r.uniform1i(this.addr,s),i[0]=s),n.setTexture2DArray(t||WR,s)}function rX(r,t){r.uniform1fv(this.addr,t)}function iX(r,t){const n=eh(t,this.size,2);r.uniform2fv(this.addr,n)}function sX(r,t){const n=eh(t,this.size,3);r.uniform3fv(this.addr,n)}function oX(r,t){const n=eh(t,this.size,4);r.uniform4fv(this.addr,n)}function aX(r,t){const n=eh(t,this.size,4);r.uniformMatrix2fv(this.addr,!1,n)}function lX(r,t){const n=eh(t,this.size,9);r.uniformMatrix3fv(this.addr,!1,n)}function cX(r,t){const n=eh(t,this.size,16);r.uniformMatrix4fv(this.addr,!1,n)}function uX(r,t){r.uniform1iv(this.addr,t)}function dX(r,t){r.uniform2iv(this.addr,t)}function hX(r,t){r.uniform3iv(this.addr,t)}function fX(r,t){r.uniform4iv(this.addr,t)}function pX(r,t){r.uniform1uiv(this.addr,t)}function mX(r,t){r.uniform2uiv(this.addr,t)}function gX(r,t){r.uniform3uiv(this.addr,t)}function yX(r,t){r.uniform4uiv(this.addr,t)}function vX(r,t,n){const i=this.cache,s=t.length,o=Oy(n,s);as(i,o)||(r.uniform1iv(this.addr,o),ls(i,o));for(let a=0;a!==s;++a)n.setTexture2D(t[a]||HR,o[a])}function bX(r,t,n){const i=this.cache,s=t.length,o=Oy(n,s);as(i,o)||(r.uniform1iv(this.addr,o),ls(i,o));for(let a=0;a!==s;++a)n.setTexture3D(t[a]||qR,o[a])}function _X(r,t,n){const i=this.cache,s=t.length,o=Oy(n,s);as(i,o)||(r.uniform1iv(this.addr,o),ls(i,o));for(let a=0;a!==s;++a)n.setTextureCube(t[a]||$R,o[a])}function xX(r,t,n){const i=this.cache,s=t.length,o=Oy(n,s);as(i,o)||(r.uniform1iv(this.addr,o),ls(i,o));for(let a=0;a!==s;++a)n.setTexture2DArray(t[a]||WR,o[a])}class SX{constructor(t,n,i){this.id=t,this.addr=i,this.cache=[],this.setValue=function nX(r){switch(r){case 5126:return k$;case 35664:return F$;case 35665:return U$;case 35666:return B$;case 35674:return V$;case 35675:return z$;case 35676:return G$;case 5124:case 35670:return H$;case 35667:case 35671:return W$;case 35668:case 35672:return q$;case 35669:case 35673:return $$;case 5125:return X$;case 36294:return Y$;case 36295:return Z$;case 36296:return K$;case 35678:case 36198:case 36298:case 36306:case 35682:return J$;case 35679:case 36299:case 36307:return Q$;case 35680:case 36300:case 36308:case 36293:return eX;case 36289:case 36303:case 36311:case 36292:return tX}}(n.type)}}class MX{constructor(t,n,i){this.id=t,this.addr=i,this.cache=[],this.size=n.size,this.setValue=function wX(r){switch(r){case 5126:return rX;case 35664:return iX;case 35665:return sX;case 35666:return oX;case 35674:return aX;case 35675:return lX;case 35676:return cX;case 5124:case 35670:return uX;case 35667:case 35671:return dX;case 35668:case 35672:return hX;case 35669:case 35673:return fX;case 5125:return pX;case 36294:return mX;case 36295:return gX;case 36296:return yX;case 35678:case 36198:case 36298:case 36306:case 35682:return vX;case 35679:case 36299:case 36307:return bX;case 35680:case 36300:case 36308:case 36293:return _X;case 36289:case 36303:case 36311:case 36292:return xX}}(n.type)}}class EX{constructor(t){this.id=t,this.seq=[],this.map={}}setValue(t,n,i){const s=this.seq;for(let o=0,a=s.length;o!==a;++o){const c=s[o];c.setValue(t,n[c.id],i)}}}const bx=/(\w+)(\])?(\[|\.)?/g;function QR(r,t){r.seq.push(t),r.map[t.id]=t}function CX(r,t,n){const i=r.name,s=i.length;for(bx.lastIndex=0;;){const o=bx.exec(i);let c=o[1];const _=o[3];if("]"===o[2]&&(c|=0),void 0===_||"["===_&&bx.lastIndex+2===s){QR(n,void 0===_?new SX(c,r,t):new MX(c,r,t));break}{let O=n.map[c];void 0===O&&(O=new EX(c),QR(n,O)),n=O}}}class Ly{constructor(t,n){this.seq=[],this.map={};const i=t.getProgramParameter(n,t.ACTIVE_UNIFORMS);for(let s=0;s<i;++s){const o=t.getActiveUniform(n,s);CX(o,t.getUniformLocation(n,o.name),this)}}setValue(t,n,i,s){const o=this.map[n];void 0!==o&&o.setValue(t,i,s)}setOptional(t,n,i){const s=n[i];void 0!==s&&this.setValue(t,i,s)}static upload(t,n,i,s){for(let o=0,a=n.length;o!==a;++o){const c=n[o],u=i[c.id];!1!==u.needsUpdate&&c.setValue(t,u.value,s)}}static seqWithValue(t,n){const i=[];for(let s=0,o=t.length;s!==o;++s){const a=t[s];a.id in n&&i.push(a)}return i}}function eO(r,t,n){const i=r.createShader(t);return r.shaderSource(i,n),r.compileShader(i),i}const TX=37297;let AX=0;function tO(r,t,n){const i=r.getShaderParameter(t,r.COMPILE_STATUS),s=r.getShaderInfoLog(t).trim();if(i&&""===s)return"";const o=/ERROR: 0:(\d+)/.exec(s);if(o){const a=parseInt(o[1]);return n.toUpperCase()+"\n\n"+s+"\n\n"+function DX(r,t){const n=r.split("\n"),i=[],s=Math.max(t-6,0),o=Math.min(t+6,n.length);for(let a=s;a<o;a++){const c=a+1;i.push(`${c===t?">":" "} ${c}: ${n[a]}`)}return i.join("\n")}(r.getShaderSource(t),a)}return s}function PX(r,t){const n=function IX(r){const t=ti.getPrimaries(ti.workingColorSpace),n=ti.getPrimaries(r);let i;switch(t===n?i="":t===sy&&n===iy?i="LinearDisplayP3ToLinearSRGB":t===iy&&n===sy&&(i="LinearSRGBToLinearDisplayP3"),r){case Qa:case ny:return[i,"LinearTransferOETF"];case us:case z1:return[i,"sRGBTransferOETF"];default:return console.warn("THREE.WebGLProgram: Unsupported color space:",r),[i,"LinearTransferOETF"]}}(t);return`vec4 ${r}( vec4 value ) { return ${n[0]}( ${n[1]}( value ) ); }`}function RX(r,t){let n;switch(t){case a7:n="Linear";break;case l7:n="Reinhard";break;case c7:n="OptimizedCineon";break;case u7:n="ACESFilmic";break;case d7:n="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",t),n="Linear"}return"vec3 "+r+"( vec3 color ) { return "+n+"ToneMapping( color ); }"}function ep(r){return""!==r}function nO(r,t){const n=t.numSpotLightShadows+t.numSpotLightMaps-t.numSpotLightShadowsWithMaps;return r.replace(/NUM_DIR_LIGHTS/g,t.numDirLights).replace(/NUM_SPOT_LIGHTS/g,t.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,t.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,n).replace(/NUM_RECT_AREA_LIGHTS/g,t.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,t.numPointLights).replace(/NUM_HEMI_LIGHTS/g,t.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,t.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,t.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,t.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,t.numPointLightShadows)}function rO(r,t){return r.replace(/NUM_CLIPPING_PLANES/g,t.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,t.numClippingPlanes-t.numClipIntersection)}const NX=/^[ \t]*#include +<([\w\d./]+)>/gm;function _x(r){return r.replace(NX,FX)}const kX=new Map([["encodings_fragment","colorspace_fragment"],["encodings_pars_fragment","colorspace_pars_fragment"],["output_fragment","opaque_fragment"]]);function FX(r,t){let n=gr[t];if(void 0===n){const i=kX.get(t);if(void 0===i)throw new Error("Can not resolve #include <"+t+">");n=gr[i],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',t,i)}return _x(n)}const UX=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function iO(r){return r.replace(UX,BX)}function BX(r,t,n,i){let s="";for(let o=parseInt(t);o<parseInt(n);o++)s+=i.replace(/\[\s*i\s*\]/g,"[ "+o+" ]").replace(/UNROLLED_LOOP_INDEX/g,o);return s}function sO(r){let t="precision "+r.precision+" float;\nprecision "+r.precision+" int;";return"highp"===r.precision?t+="\n#define HIGH_PRECISION":"mediump"===r.precision?t+="\n#define MEDIUM_PRECISION":"lowp"===r.precision&&(t+="\n#define LOW_PRECISION"),t}function qX(r,t,n,i){const s=r.getContext(),o=n.defines;let a=n.vertexShader,c=n.fragmentShader;const u=function VX(r){let t="SHADOWMAP_TYPE_BASIC";return r.shadowMapType===wP?t="SHADOWMAP_TYPE_PCF":r.shadowMapType===j9?t="SHADOWMAP_TYPE_PCF_SOFT":r.shadowMapType===Za&&(t="SHADOWMAP_TYPE_VSM"),t}(n),_=function zX(r){let t="ENVMAP_TYPE_CUBE";if(r.envMap)switch(r.envMapMode){case Fl:case Tc:t="ENVMAP_TYPE_CUBE";break;case Gf:t="ENVMAP_TYPE_CUBE_UV"}return t}(n),A=function GX(r){let t="ENVMAP_MODE_REFLECTION";return r.envMap&&r.envMapMode===Tc&&(t="ENVMAP_MODE_REFRACTION"),t}(n),O=function HX(r){let t="ENVMAP_BLENDING_NONE";if(r.envMap)switch(r.combine){case $g:t="ENVMAP_BLENDING_MULTIPLY";break;case s7:t="ENVMAP_BLENDING_MIX";break;case o7:t="ENVMAP_BLENDING_ADD"}return t}(n),B=function WX(r){const t=r.envMapCubeUVHeight;if(null===t)return null;const n=Math.log2(t)-2,i=1/t;return{texelWidth:1/(3*Math.max(Math.pow(2,n),112)),texelHeight:i,maxMip:n}}(n),G=n.isWebGL2?"":function OX(r){return[r.extensionDerivatives||r.envMapCubeUVHeight||r.bumpMap||r.normalMapTangentSpace||r.clearcoatNormalMap||r.flatShading||"physical"===r.shaderID?"#extension GL_OES_standard_derivatives : enable":"",(r.extensionFragDepth||r.logarithmicDepthBuffer)&&r.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",r.extensionDrawBuffers&&r.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(r.extensionShaderTextureLOD||r.envMap||r.transmission)&&r.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(ep).join("\n")}(n),Y=function LX(r){const t=[];for(const n in r){const i=r[n];!1!==i&&t.push("#define "+n+" "+i)}return t.join("\n")}(o),ne=s.createProgram();let ee,Q,ue=n.glslVersion?"#version "+n.glslVersion+"\n":"";n.isRawShaderMaterial?(ee=["#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,Y].filter(ep).join("\n"),ee.length>0&&(ee+="\n"),Q=[G,"#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,Y].filter(ep).join("\n"),Q.length>0&&(Q+="\n")):(ee=[sO(n),"#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,Y,n.instancing?"#define USE_INSTANCING":"",n.instancingColor?"#define USE_INSTANCING_COLOR":"",n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+A:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",n.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",n.displacementMap?"#define USE_DISPLACEMENTMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.anisotropy?"#define USE_ANISOTROPY":"",n.anisotropyMap?"#define USE_ANISOTROPYMAP":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",n.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.alphaHash?"#define USE_ALPHAHASH":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",n.mapUv?"#define MAP_UV "+n.mapUv:"",n.alphaMapUv?"#define ALPHAMAP_UV "+n.alphaMapUv:"",n.lightMapUv?"#define LIGHTMAP_UV "+n.lightMapUv:"",n.aoMapUv?"#define AOMAP_UV "+n.aoMapUv:"",n.emissiveMapUv?"#define EMISSIVEMAP_UV "+n.emissiveMapUv:"",n.bumpMapUv?"#define BUMPMAP_UV "+n.bumpMapUv:"",n.normalMapUv?"#define NORMALMAP_UV "+n.normalMapUv:"",n.displacementMapUv?"#define DISPLACEMENTMAP_UV "+n.displacementMapUv:"",n.metalnessMapUv?"#define METALNESSMAP_UV "+n.metalnessMapUv:"",n.roughnessMapUv?"#define ROUGHNESSMAP_UV "+n.roughnessMapUv:"",n.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+n.anisotropyMapUv:"",n.clearcoatMapUv?"#define CLEARCOATMAP_UV "+n.clearcoatMapUv:"",n.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+n.clearcoatNormalMapUv:"",n.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+n.clearcoatRoughnessMapUv:"",n.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+n.iridescenceMapUv:"",n.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+n.iridescenceThicknessMapUv:"",n.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+n.sheenColorMapUv:"",n.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+n.sheenRoughnessMapUv:"",n.specularMapUv?"#define SPECULARMAP_UV "+n.specularMapUv:"",n.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+n.specularColorMapUv:"",n.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+n.specularIntensityMapUv:"",n.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+n.transmissionMapUv:"",n.thicknessMapUv?"#define THICKNESSMAP_UV "+n.thicknessMapUv:"",n.vertexTangents&&!1===n.flatShading?"#define USE_TANGENT":"",n.vertexColors?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUv1s?"#define USE_UV1":"",n.vertexUv2s?"#define USE_UV2":"",n.vertexUv3s?"#define USE_UV3":"",n.pointsUvs?"#define USE_POINTS_UV":"",n.flatShading?"#define FLAT_SHADED":"",n.skinning?"#define USE_SKINNING":"",n.morphTargets?"#define USE_MORPHTARGETS":"",n.morphNormals&&!1===n.flatShading?"#define USE_MORPHNORMALS":"",n.morphColors&&n.isWebGL2?"#define USE_MORPHCOLORS":"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+n.morphTextureStride:"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_COUNT "+n.morphTargetsCount:"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+u:"",n.sizeAttenuation?"#define USE_SIZEATTENUATION":"",n.numLightProbes>0?"#define USE_LIGHT_PROBES":"",n.useLegacyLights?"#define LEGACY_LIGHTS":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","\tattribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","\tattribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","\tattribute vec2 uv1;","#endif","#ifdef USE_UV2","\tattribute vec2 uv2;","#endif","#ifdef USE_UV3","\tattribute vec2 uv3;","#endif","#ifdef USE_TANGENT","\tattribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","\tattribute vec4 color;","#elif defined( USE_COLOR )","\tattribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(ep).join("\n"),Q=[G,sO(n),"#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,Y,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.matcap?"#define USE_MATCAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+_:"",n.envMap?"#define "+A:"",n.envMap?"#define "+O:"",B?"#define CUBEUV_TEXEL_WIDTH "+B.texelWidth:"",B?"#define CUBEUV_TEXEL_HEIGHT "+B.texelHeight:"",B?"#define CUBEUV_MAX_MIP "+B.maxMip+".0":"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",n.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.anisotropy?"#define USE_ANISOTROPY":"",n.anisotropyMap?"#define USE_ANISOTROPYMAP":"",n.clearcoat?"#define USE_CLEARCOAT":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.iridescence?"#define USE_IRIDESCENCE":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",n.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.alphaTest?"#define USE_ALPHATEST":"",n.alphaHash?"#define USE_ALPHAHASH":"",n.sheen?"#define USE_SHEEN":"",n.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.vertexTangents&&!1===n.flatShading?"#define USE_TANGENT":"",n.vertexColors||n.instancingColor?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUv1s?"#define USE_UV1":"",n.vertexUv2s?"#define USE_UV2":"",n.vertexUv3s?"#define USE_UV3":"",n.pointsUvs?"#define USE_POINTS_UV":"",n.gradientMap?"#define USE_GRADIENTMAP":"",n.flatShading?"#define FLAT_SHADED":"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+u:"",n.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",n.numLightProbes>0?"#define USE_LIGHT_PROBES":"",n.useLegacyLights?"#define LEGACY_LIGHTS":"",n.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",n.toneMapping!==kl?"#define TONE_MAPPING":"",n.toneMapping!==kl?gr.tonemapping_pars_fragment:"",n.toneMapping!==kl?RX("toneMapping",n.toneMapping):"",n.dithering?"#define DITHERING":"",n.opaque?"#define OPAQUE":"",gr.colorspace_pars_fragment,PX("linearToOutputTexel",n.outputColorSpace),n.useDepthPacking?"#define DEPTH_PACKING "+n.depthPacking:"","\n"].filter(ep).join("\n")),a=_x(a),a=nO(a,n),a=rO(a,n),c=_x(c),c=nO(c,n),c=rO(c,n),a=iO(a),c=iO(c),n.isWebGL2&&!0!==n.isRawShaderMaterial&&(ue="#version 300 es\n",ee=["precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join("\n")+"\n"+ee,Q=["precision mediump sampler2DArray;","#define varying in",n.glslVersion===uR?"":"layout(location = 0) out highp vec4 pc_fragColor;",n.glslVersion===uR?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+Q);const ye=ue+Q+c,Ee=eO(s,s.VERTEX_SHADER,ue+ee+a),Le=eO(s,s.FRAGMENT_SHADER,ye);function Fe(dt){if(r.debug.checkShaderErrors){const It=s.getProgramInfoLog(ne).trim(),Ut=s.getShaderInfoLog(Ee).trim(),Qe=s.getShaderInfoLog(Le).trim();let mt=!0,At=!0;if(!1===s.getProgramParameter(ne,s.LINK_STATUS))if(mt=!1,"function"==typeof r.debug.onShaderError)r.debug.onShaderError(s,ne,Ee,Le);else{const Ct=tO(s,Ee,"vertex"),Jt=tO(s,Le,"fragment");console.error("THREE.WebGLProgram: Shader Error "+s.getError()+" - VALIDATE_STATUS "+s.getProgramParameter(ne,s.VALIDATE_STATUS)+"\n\nProgram Info Log: "+It+"\n"+Ct+"\n"+Jt)}else""!==It?console.warn("THREE.WebGLProgram: Program Info Log:",It):(""===Ut||""===Qe)&&(At=!1);At&&(dt.diagnostics={runnable:mt,programLog:It,vertexShader:{log:Ut,prefix:ee},fragmentShader:{log:Qe,prefix:Q}})}s.deleteShader(Ee),s.deleteShader(Le),Xe=new Ly(s,ne),Me=function jX(r,t){const n={},i=r.getProgramParameter(t,r.ACTIVE_ATTRIBUTES);for(let s=0;s<i;s++){const o=r.getActiveAttrib(t,s),a=o.name;let c=1;o.type===r.FLOAT_MAT2&&(c=2),o.type===r.FLOAT_MAT3&&(c=3),o.type===r.FLOAT_MAT4&&(c=4),n[a]={type:o.type,location:r.getAttribLocation(t,a),locationSize:c}}return n}(s,ne)}let Xe,Me;s.attachShader(ne,Ee),s.attachShader(ne,Le),void 0!==n.index0AttributeName?s.bindAttribLocation(ne,0,n.index0AttributeName):!0===n.morphTargets&&s.bindAttribLocation(ne,0,"position"),s.linkProgram(ne),this.getUniforms=function(){return void 0===Xe&&Fe(this),Xe},this.getAttributes=function(){return void 0===Me&&Fe(this),Me};let Ne=!1===n.rendererExtensionParallelShaderCompile;return this.isReady=function(){return!1===Ne&&(Ne=s.getProgramParameter(ne,TX)),Ne},this.destroy=function(){i.releaseStatesOfProgram(this),s.deleteProgram(ne),this.program=void 0},this.type=n.shaderType,this.name=n.shaderName,this.id=AX++,this.cacheKey=t,this.usedTimes=1,this.program=ne,this.vertexShader=Ee,this.fragmentShader=Le,this}let $X=0;class XX{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(t){const i=t.fragmentShader,s=this._getShaderStage(t.vertexShader),o=this._getShaderStage(i),a=this._getShaderCacheForMaterial(t);return!1===a.has(s)&&(a.add(s),s.usedTimes++),!1===a.has(o)&&(a.add(o),o.usedTimes++),this}remove(t){const n=this.materialCache.get(t);for(const i of n)i.usedTimes--,0===i.usedTimes&&this.shaderCache.delete(i.code);return this.materialCache.delete(t),this}getVertexShaderID(t){return this._getShaderStage(t.vertexShader).id}getFragmentShaderID(t){return this._getShaderStage(t.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(t){const n=this.materialCache;let i=n.get(t);return void 0===i&&(i=new Set,n.set(t,i)),i}_getShaderStage(t){const n=this.shaderCache;let i=n.get(t);return void 0===i&&(i=new YX(t),n.set(t,i)),i}}class YX{constructor(t){this.id=$X++,this.code=t,this.usedTimes=0}}function ZX(r,t,n,i,s,o,a){const c=new nx,u=new XX,_=[],A=s.isWebGL2,O=s.logarithmicDepthBuffer,B=s.vertexTextures;let G=s.precision;const Y={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function ne(Me){return 0===Me?"uv":`uv${Me}`}return{getParameters:function ee(Me,Ne,dt,It,Ut){const Qe=It.fog,mt=Ut.geometry,Ct=(Me.isMeshStandardMaterial?n:t).get(Me.envMap||(Me.isMeshStandardMaterial?It.environment:null)),Jt=Ct&&Ct.mapping===Gf?Ct.image.height:null,Rt=Y[Me.type];null!==Me.precision&&(G=s.getMaxPrecision(Me.precision),G!==Me.precision&&console.warn("THREE.WebGLProgram.getParameters:",Me.precision,"not supported, using",G,"instead."));const Bt=mt.morphAttributes.position||mt.morphAttributes.normal||mt.morphAttributes.color,st=void 0!==Bt?Bt.length:0;let mn,wn,Cn,qn,Et=0;if(void 0!==mt.morphAttributes.position&&(Et=1),void 0!==mt.morphAttributes.normal&&(Et=2),void 0!==mt.morphAttributes.color&&(Et=3),Rt){const Ki=Ta[Rt];mn=Ki.vertexShader,wn=Ki.fragmentShader}else mn=Me.vertexShader,wn=Me.fragmentShader,u.update(Me),Cn=u.getVertexShaderID(Me),qn=u.getFragmentShaderID(Me);const Jn=r.getRenderTarget(),$n=!0===Ut.isInstancedMesh,ur=!!Me.map,Xn=!!Ct,$e=!!Me.aoMap,dn=!!Me.lightMap,Tt=!!Me.bumpMap,Yt=!!Me.normalMap,Ft=!!Me.displacementMap,kn=!!Me.emissiveMap,bn=!!Me.metalnessMap,In=!!Me.roughnessMap,ar=Me.anisotropy>0,Mr=Me.clearcoat>0,Ni=Me.iridescence>0,Ve=Me.sheen>0,Ce=Me.transmission>0,ft=ar&&!!Me.anisotropyMap,Zt=Mr&&!!Me.clearcoatMap,Vt=Mr&&!!Me.clearcoatNormalMap,Qt=Mr&&!!Me.clearcoatRoughnessMap,Ln=Ni&&!!Me.iridescenceMap,on=Ni&&!!Me.iridescenceThicknessMap,yn=Ve&&!!Me.sheenColorMap,er=Ve&&!!Me.sheenRoughnessMap,zr=!!Me.specularMap,en=!!Me.specularColorMap,ri=!!Me.specularIntensityMap,dr=Ce&&!!Me.transmissionMap,tr=Ce&&!!Me.thicknessMap,En=!!Me.alphaMap,vn=!!Me.extensions,sn=!!mt.attributes.uv1,Mt=!!mt.attributes.uv2,an=!!mt.attributes.uv3;let Yn=kl;return Me.toneMapped&&(null===Jn||!0===Jn.isXRRenderTarget)&&(Yn=r.toneMapping),{isWebGL2:A,shaderID:Rt,shaderType:Me.type,shaderName:Me.name,vertexShader:mn,fragmentShader:wn,defines:Me.defines,customVertexShaderID:Cn,customFragmentShaderID:qn,isRawShaderMaterial:!0===Me.isRawShaderMaterial,glslVersion:Me.glslVersion,precision:G,instancing:$n,instancingColor:$n&&null!==Ut.instanceColor,supportsVertexTextures:B,outputColorSpace:null===Jn?r.outputColorSpace:!0===Jn.isXRRenderTarget?Jn.texture.colorSpace:Qa,map:ur,matcap:!!Me.matcap,envMap:Xn,envMapMode:Xn&&Ct.mapping,envMapCubeUVHeight:Jt,aoMap:$e,lightMap:dn,bumpMap:Tt,normalMap:Yt,displacementMap:B&&Ft,emissiveMap:kn,normalMapObjectSpace:Yt&&1===Me.normalMapType,normalMapTangentSpace:Yt&&0===Me.normalMapType,metalnessMap:bn,roughnessMap:In,anisotropy:ar,anisotropyMap:ft,clearcoat:Mr,clearcoatMap:Zt,clearcoatNormalMap:Vt,clearcoatRoughnessMap:Qt,iridescence:Ni,iridescenceMap:Ln,iridescenceThicknessMap:on,sheen:Ve,sheenColorMap:yn,sheenRoughnessMap:er,specularMap:zr,specularColorMap:en,specularIntensityMap:ri,transmission:Ce,transmissionMap:dr,thicknessMap:tr,gradientMap:!!Me.gradientMap,opaque:!1===Me.transparent&&1===Me.blending,alphaMap:En,alphaTest:Me.alphaTest>0,alphaHash:!!Me.alphaHash,combine:Me.combine,mapUv:ur&&ne(Me.map.channel),aoMapUv:$e&&ne(Me.aoMap.channel),lightMapUv:dn&&ne(Me.lightMap.channel),bumpMapUv:Tt&&ne(Me.bumpMap.channel),normalMapUv:Yt&&ne(Me.normalMap.channel),displacementMapUv:Ft&&ne(Me.displacementMap.channel),emissiveMapUv:kn&&ne(Me.emissiveMap.channel),metalnessMapUv:bn&&ne(Me.metalnessMap.channel),roughnessMapUv:In&&ne(Me.roughnessMap.channel),anisotropyMapUv:ft&&ne(Me.anisotropyMap.channel),clearcoatMapUv:Zt&&ne(Me.clearcoatMap.channel),clearcoatNormalMapUv:Vt&&ne(Me.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:Qt&&ne(Me.clearcoatRoughnessMap.channel),iridescenceMapUv:Ln&&ne(Me.iridescenceMap.channel),iridescenceThicknessMapUv:on&&ne(Me.iridescenceThicknessMap.channel),sheenColorMapUv:yn&&ne(Me.sheenColorMap.channel),sheenRoughnessMapUv:er&&ne(Me.sheenRoughnessMap.channel),specularMapUv:zr&&ne(Me.specularMap.channel),specularColorMapUv:en&&ne(Me.specularColorMap.channel),specularIntensityMapUv:ri&&ne(Me.specularIntensityMap.channel),transmissionMapUv:dr&&ne(Me.transmissionMap.channel),thicknessMapUv:tr&&ne(Me.thicknessMap.channel),alphaMapUv:En&&ne(Me.alphaMap.channel),vertexTangents:!!mt.attributes.tangent&&(Yt||ar),vertexColors:Me.vertexColors,vertexAlphas:!0===Me.vertexColors&&!!mt.attributes.color&&4===mt.attributes.color.itemSize,vertexUv1s:sn,vertexUv2s:Mt,vertexUv3s:an,pointsUvs:!0===Ut.isPoints&&!!mt.attributes.uv&&(ur||En),fog:!!Qe,useFog:!0===Me.fog,fogExp2:Qe&&Qe.isFogExp2,flatShading:!0===Me.flatShading,sizeAttenuation:!0===Me.sizeAttenuation,logarithmicDepthBuffer:O,skinning:!0===Ut.isSkinnedMesh,morphTargets:void 0!==mt.morphAttributes.position,morphNormals:void 0!==mt.morphAttributes.normal,morphColors:void 0!==mt.morphAttributes.color,morphTargetsCount:st,morphTextureStride:Et,numDirLights:Ne.directional.length,numPointLights:Ne.point.length,numSpotLights:Ne.spot.length,numSpotLightMaps:Ne.spotLightMap.length,numRectAreaLights:Ne.rectArea.length,numHemiLights:Ne.hemi.length,numDirLightShadows:Ne.directionalShadowMap.length,numPointLightShadows:Ne.pointShadowMap.length,numSpotLightShadows:Ne.spotShadowMap.length,numSpotLightShadowsWithMaps:Ne.numSpotLightShadowsWithMaps,numLightProbes:Ne.numLightProbes,numClippingPlanes:a.numPlanes,numClipIntersection:a.numIntersection,dithering:Me.dithering,shadowMapEnabled:r.shadowMap.enabled&&dt.length>0,shadowMapType:r.shadowMap.type,toneMapping:Yn,useLegacyLights:r._useLegacyLights,decodeVideoTexture:ur&&!0===Me.map.isVideoTexture&&ti.getTransfer(Me.map.colorSpace)===yi,premultipliedAlpha:Me.premultipliedAlpha,doubleSided:2===Me.side,flipSided:1===Me.side,useDepthPacking:Me.depthPacking>=0,depthPacking:Me.depthPacking||0,index0AttributeName:Me.index0AttributeName,extensionDerivatives:vn&&!0===Me.extensions.derivatives,extensionFragDepth:vn&&!0===Me.extensions.fragDepth,extensionDrawBuffers:vn&&!0===Me.extensions.drawBuffers,extensionShaderTextureLOD:vn&&!0===Me.extensions.shaderTextureLOD,rendererExtensionFragDepth:A||i.has("EXT_frag_depth"),rendererExtensionDrawBuffers:A||i.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:A||i.has("EXT_shader_texture_lod"),rendererExtensionParallelShaderCompile:i.has("KHR_parallel_shader_compile"),customProgramCacheKey:Me.customProgramCacheKey()}},getProgramCacheKey:function Q(Me){const Ne=[];if(Me.shaderID?Ne.push(Me.shaderID):(Ne.push(Me.customVertexShaderID),Ne.push(Me.customFragmentShaderID)),void 0!==Me.defines)for(const dt in Me.defines)Ne.push(dt),Ne.push(Me.defines[dt]);return!1===Me.isRawShaderMaterial&&(function ue(Me,Ne){Me.push(Ne.precision),Me.push(Ne.outputColorSpace),Me.push(Ne.envMapMode),Me.push(Ne.envMapCubeUVHeight),Me.push(Ne.mapUv),Me.push(Ne.alphaMapUv),Me.push(Ne.lightMapUv),Me.push(Ne.aoMapUv),Me.push(Ne.bumpMapUv),Me.push(Ne.normalMapUv),Me.push(Ne.displacementMapUv),Me.push(Ne.emissiveMapUv),Me.push(Ne.metalnessMapUv),Me.push(Ne.roughnessMapUv),Me.push(Ne.anisotropyMapUv),Me.push(Ne.clearcoatMapUv),Me.push(Ne.clearcoatNormalMapUv),Me.push(Ne.clearcoatRoughnessMapUv),Me.push(Ne.iridescenceMapUv),Me.push(Ne.iridescenceThicknessMapUv),Me.push(Ne.sheenColorMapUv),Me.push(Ne.sheenRoughnessMapUv),Me.push(Ne.specularMapUv),Me.push(Ne.specularColorMapUv),Me.push(Ne.specularIntensityMapUv),Me.push(Ne.transmissionMapUv),Me.push(Ne.thicknessMapUv),Me.push(Ne.combine),Me.push(Ne.fogExp2),Me.push(Ne.sizeAttenuation),Me.push(Ne.morphTargetsCount),Me.push(Ne.morphAttributeCount),Me.push(Ne.numDirLights),Me.push(Ne.numPointLights),Me.push(Ne.numSpotLights),Me.push(Ne.numSpotLightMaps),Me.push(Ne.numHemiLights),Me.push(Ne.numRectAreaLights),Me.push(Ne.numDirLightShadows),Me.push(Ne.numPointLightShadows),Me.push(Ne.numSpotLightShadows),Me.push(Ne.numSpotLightShadowsWithMaps),Me.push(Ne.numLightProbes),Me.push(Ne.shadowMapType),Me.push(Ne.toneMapping),Me.push(Ne.numClippingPlanes),Me.push(Ne.numClipIntersection),Me.push(Ne.depthPacking)}(Ne,Me),function ce(Me,Ne){c.disableAll(),Ne.isWebGL2&&c.enable(0),Ne.supportsVertexTextures&&c.enable(1),Ne.instancing&&c.enable(2),Ne.instancingColor&&c.enable(3),Ne.matcap&&c.enable(4),Ne.envMap&&c.enable(5),Ne.normalMapObjectSpace&&c.enable(6),Ne.normalMapTangentSpace&&c.enable(7),Ne.clearcoat&&c.enable(8),Ne.iridescence&&c.enable(9),Ne.alphaTest&&c.enable(10),Ne.vertexColors&&c.enable(11),Ne.vertexAlphas&&c.enable(12),Ne.vertexUv1s&&c.enable(13),Ne.vertexUv2s&&c.enable(14),Ne.vertexUv3s&&c.enable(15),Ne.vertexTangents&&c.enable(16),Ne.anisotropy&&c.enable(17),Ne.alphaHash&&c.enable(18),Me.push(c.mask),c.disableAll(),Ne.fog&&c.enable(0),Ne.useFog&&c.enable(1),Ne.flatShading&&c.enable(2),Ne.logarithmicDepthBuffer&&c.enable(3),Ne.skinning&&c.enable(4),Ne.morphTargets&&c.enable(5),Ne.morphNormals&&c.enable(6),Ne.morphColors&&c.enable(7),Ne.premultipliedAlpha&&c.enable(8),Ne.shadowMapEnabled&&c.enable(9),Ne.useLegacyLights&&c.enable(10),Ne.doubleSided&&c.enable(11),Ne.flipSided&&c.enable(12),Ne.useDepthPacking&&c.enable(13),Ne.dithering&&c.enable(14),Ne.transmission&&c.enable(15),Ne.sheen&&c.enable(16),Ne.opaque&&c.enable(17),Ne.pointsUvs&&c.enable(18),Ne.decodeVideoTexture&&c.enable(19),Me.push(c.mask)}(Ne,Me),Ne.push(r.outputColorSpace)),Ne.push(Me.customProgramCacheKey),Ne.join()},getUniforms:function ye(Me){const Ne=Y[Me.type];let dt;return dt=Ne?mW.clone(Ta[Ne].uniforms):Me.uniforms,dt},acquireProgram:function Ee(Me,Ne){let dt;for(let It=0,Ut=_.length;It<Ut;It++){const Qe=_[It];if(Qe.cacheKey===Ne){dt=Qe,++dt.usedTimes;break}}return void 0===dt&&(dt=new qX(r,Ne,Me,o),_.push(dt)),dt},releaseProgram:function Le(Me){if(0==--Me.usedTimes){const Ne=_.indexOf(Me);_[Ne]=_[_.length-1],_.pop(),Me.destroy()}},releaseShaderCache:function Fe(Me){u.remove(Me)},programs:_,dispose:function Xe(){u.dispose()}}}function KX(){let r=new WeakMap;return{get:function t(o){let a=r.get(o);return void 0===a&&(a={},r.set(o,a)),a},remove:function n(o){r.delete(o)},update:function i(o,a,c){r.get(o)[a]=c},dispose:function s(){r=new WeakMap}}}function JX(r,t){return r.groupOrder!==t.groupOrder?r.groupOrder-t.groupOrder:r.renderOrder!==t.renderOrder?r.renderOrder-t.renderOrder:r.material.id!==t.material.id?r.material.id-t.material.id:r.z!==t.z?r.z-t.z:r.id-t.id}function oO(r,t){return r.groupOrder!==t.groupOrder?r.groupOrder-t.groupOrder:r.renderOrder!==t.renderOrder?r.renderOrder-t.renderOrder:r.z!==t.z?t.z-r.z:r.id-t.id}function aO(){const r=[];let t=0;const n=[],i=[],s=[];function a(O,B,G,Y,ne,ee){let Q=r[t];return void 0===Q?(Q={id:O.id,object:O,geometry:B,material:G,groupOrder:Y,renderOrder:O.renderOrder,z:ne,group:ee},r[t]=Q):(Q.id=O.id,Q.object=O,Q.geometry=B,Q.material=G,Q.groupOrder=Y,Q.renderOrder=O.renderOrder,Q.z=ne,Q.group=ee),t++,Q}return{opaque:n,transmissive:i,transparent:s,init:function o(){t=0,n.length=0,i.length=0,s.length=0},push:function c(O,B,G,Y,ne,ee){const Q=a(O,B,G,Y,ne,ee);G.transmission>0?i.push(Q):!0===G.transparent?s.push(Q):n.push(Q)},unshift:function u(O,B,G,Y,ne,ee){const Q=a(O,B,G,Y,ne,ee);G.transmission>0?i.unshift(Q):!0===G.transparent?s.unshift(Q):n.unshift(Q)},finish:function A(){for(let O=t,B=r.length;O<B;O++){const G=r[O];if(null===G.id)break;G.id=null,G.object=null,G.geometry=null,G.material=null,G.group=null}},sort:function _(O,B){n.length>1&&n.sort(O||JX),i.length>1&&i.sort(B||oO),s.length>1&&s.sort(B||oO)}}}function QX(){let r=new WeakMap;return{get:function t(i,s){const o=r.get(i);let a;return void 0===o?(a=new aO,r.set(i,[a])):s>=o.length?(a=new aO,o.push(a)):a=o[s],a},dispose:function n(){r=new WeakMap}}}function eY(){const r={};return{get:function(t){if(void 0!==r[t.id])return r[t.id];let n;switch(t.type){case"DirectionalLight":n={direction:new ke,color:new xn};break;case"SpotLight":n={position:new ke,direction:new ke,color:new xn,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":n={position:new ke,color:new xn,distance:0,decay:0};break;case"HemisphereLight":n={direction:new ke,skyColor:new xn,groundColor:new xn};break;case"RectAreaLight":n={color:new xn,position:new ke,halfWidth:new ke,halfHeight:new ke}}return r[t.id]=n,n}}}let nY=0;function rY(r,t){return(t.castShadow?2:0)-(r.castShadow?2:0)+(t.map?1:0)-(r.map?1:0)}function iY(r,t){const n=new eY,i=function tY(){const r={};return{get:function(t){if(void 0!==r[t.id])return r[t.id];let n;switch(t.type){case"DirectionalLight":case"SpotLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Lt};break;case"PointLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Lt,shadowCameraNear:1,shadowCameraFar:1e3}}return r[t.id]=n,n}}}(),s={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let A=0;A<9;A++)s.probe.push(new ke);const o=new ke,a=new cr,c=new cr;return{setup:function u(A,O){let B=0,G=0,Y=0;for(let It=0;It<9;It++)s.probe[It].set(0,0,0);let ne=0,ee=0,Q=0,ue=0,ce=0,ye=0,Ee=0,Le=0,Fe=0,Xe=0,Me=0;A.sort(rY);const Ne=!0===O?Math.PI:1;for(let It=0,Ut=A.length;It<Ut;It++){const Qe=A[It],mt=Qe.color,At=Qe.intensity,Ct=Qe.distance,Jt=Qe.shadow&&Qe.shadow.map?Qe.shadow.map.texture:null;if(Qe.isAmbientLight)B+=mt.r*At*Ne,G+=mt.g*At*Ne,Y+=mt.b*At*Ne;else if(Qe.isLightProbe){for(let Rt=0;Rt<9;Rt++)s.probe[Rt].addScaledVector(Qe.sh.coefficients[Rt],At);Me++}else if(Qe.isDirectionalLight){const Rt=n.get(Qe);if(Rt.color.copy(Qe.color).multiplyScalar(Qe.intensity*Ne),Qe.castShadow){const Bt=Qe.shadow,st=i.get(Qe);st.shadowBias=Bt.bias,st.shadowNormalBias=Bt.normalBias,st.shadowRadius=Bt.radius,st.shadowMapSize=Bt.mapSize,s.directionalShadow[ne]=st,s.directionalShadowMap[ne]=Jt,s.directionalShadowMatrix[ne]=Qe.shadow.matrix,ye++}s.directional[ne]=Rt,ne++}else if(Qe.isSpotLight){const Rt=n.get(Qe);Rt.position.setFromMatrixPosition(Qe.matrixWorld),Rt.color.copy(mt).multiplyScalar(At*Ne),Rt.distance=Ct,Rt.coneCos=Math.cos(Qe.angle),Rt.penumbraCos=Math.cos(Qe.angle*(1-Qe.penumbra)),Rt.decay=Qe.decay,s.spot[Q]=Rt;const Bt=Qe.shadow;if(Qe.map&&(s.spotLightMap[Fe]=Qe.map,Fe++,Bt.updateMatrices(Qe),Qe.castShadow&&Xe++),s.spotLightMatrix[Q]=Bt.matrix,Qe.castShadow){const st=i.get(Qe);st.shadowBias=Bt.bias,st.shadowNormalBias=Bt.normalBias,st.shadowRadius=Bt.radius,st.shadowMapSize=Bt.mapSize,s.spotShadow[Q]=st,s.spotShadowMap[Q]=Jt,Le++}Q++}else if(Qe.isRectAreaLight){const Rt=n.get(Qe);Rt.color.copy(mt).multiplyScalar(At),Rt.halfWidth.set(.5*Qe.width,0,0),Rt.halfHeight.set(0,.5*Qe.height,0),s.rectArea[ue]=Rt,ue++}else if(Qe.isPointLight){const Rt=n.get(Qe);if(Rt.color.copy(Qe.color).multiplyScalar(Qe.intensity*Ne),Rt.distance=Qe.distance,Rt.decay=Qe.decay,Qe.castShadow){const Bt=Qe.shadow,st=i.get(Qe);st.shadowBias=Bt.bias,st.shadowNormalBias=Bt.normalBias,st.shadowRadius=Bt.radius,st.shadowMapSize=Bt.mapSize,st.shadowCameraNear=Bt.camera.near,st.shadowCameraFar=Bt.camera.far,s.pointShadow[ee]=st,s.pointShadowMap[ee]=Jt,s.pointShadowMatrix[ee]=Qe.shadow.matrix,Ee++}s.point[ee]=Rt,ee++}else if(Qe.isHemisphereLight){const Rt=n.get(Qe);Rt.skyColor.copy(Qe.color).multiplyScalar(At*Ne),Rt.groundColor.copy(Qe.groundColor).multiplyScalar(At*Ne),s.hemi[ce]=Rt,ce++}}ue>0&&(t.isWebGL2||!0===r.has("OES_texture_float_linear")?(s.rectAreaLTC1=fn.LTC_FLOAT_1,s.rectAreaLTC2=fn.LTC_FLOAT_2):!0===r.has("OES_texture_half_float_linear")?(s.rectAreaLTC1=fn.LTC_HALF_1,s.rectAreaLTC2=fn.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),s.ambient[0]=B,s.ambient[1]=G,s.ambient[2]=Y;const dt=s.hash;(dt.directionalLength!==ne||dt.pointLength!==ee||dt.spotLength!==Q||dt.rectAreaLength!==ue||dt.hemiLength!==ce||dt.numDirectionalShadows!==ye||dt.numPointShadows!==Ee||dt.numSpotShadows!==Le||dt.numSpotMaps!==Fe||dt.numLightProbes!==Me)&&(s.directional.length=ne,s.spot.length=Q,s.rectArea.length=ue,s.point.length=ee,s.hemi.length=ce,s.directionalShadow.length=ye,s.directionalShadowMap.length=ye,s.pointShadow.length=Ee,s.pointShadowMap.length=Ee,s.spotShadow.length=Le,s.spotShadowMap.length=Le,s.directionalShadowMatrix.length=ye,s.pointShadowMatrix.length=Ee,s.spotLightMatrix.length=Le+Fe-Xe,s.spotLightMap.length=Fe,s.numSpotLightShadowsWithMaps=Xe,s.numLightProbes=Me,dt.directionalLength=ne,dt.pointLength=ee,dt.spotLength=Q,dt.rectAreaLength=ue,dt.hemiLength=ce,dt.numDirectionalShadows=ye,dt.numPointShadows=Ee,dt.numSpotShadows=Le,dt.numSpotMaps=Fe,dt.numLightProbes=Me,s.version=nY++)},setupView:function _(A,O){let B=0,G=0,Y=0,ne=0,ee=0;const Q=O.matrixWorldInverse;for(let ue=0,ce=A.length;ue<ce;ue++){const ye=A[ue];if(ye.isDirectionalLight){const Ee=s.directional[B];Ee.direction.setFromMatrixPosition(ye.matrixWorld),o.setFromMatrixPosition(ye.target.matrixWorld),Ee.direction.sub(o),Ee.direction.transformDirection(Q),B++}else if(ye.isSpotLight){const Ee=s.spot[Y];Ee.position.setFromMatrixPosition(ye.matrixWorld),Ee.position.applyMatrix4(Q),Ee.direction.setFromMatrixPosition(ye.matrixWorld),o.setFromMatrixPosition(ye.target.matrixWorld),Ee.direction.sub(o),Ee.direction.transformDirection(Q),Y++}else if(ye.isRectAreaLight){const Ee=s.rectArea[ne];Ee.position.setFromMatrixPosition(ye.matrixWorld),Ee.position.applyMatrix4(Q),c.identity(),a.copy(ye.matrixWorld),a.premultiply(Q),c.extractRotation(a),Ee.halfWidth.set(.5*ye.width,0,0),Ee.halfHeight.set(0,.5*ye.height,0),Ee.halfWidth.applyMatrix4(c),Ee.halfHeight.applyMatrix4(c),ne++}else if(ye.isPointLight){const Ee=s.point[G];Ee.position.setFromMatrixPosition(ye.matrixWorld),Ee.position.applyMatrix4(Q),G++}else if(ye.isHemisphereLight){const Ee=s.hemi[ee];Ee.direction.setFromMatrixPosition(ye.matrixWorld),Ee.direction.transformDirection(Q),ee++}}},state:s}}function lO(r,t){const n=new iY(r,t),i=[],s=[];return{init:function o(){i.length=0,s.length=0},state:{lightsArray:i,shadowsArray:s,lights:n},setupLights:function u(O){n.setup(i,O)},setupLightsView:function _(O){n.setupView(i,O)},pushLight:function a(O){i.push(O)},pushShadow:function c(O){s.push(O)}}}function sY(r,t){let n=new WeakMap;return{get:function i(o,a=0){const c=n.get(o);let u;return void 0===c?(u=new lO(r,t),n.set(o,[u])):a>=c.length?(u=new lO(r,t),c.push(u)):u=c[a],u},dispose:function s(){n=new WeakMap}}}class cO extends Ys{constructor(t){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=3200,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(t)}copy(t){return super.copy(t),this.depthPacking=t.depthPacking,this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this}}class uO extends Ys{constructor(t){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(t)}copy(t){return super.copy(t),this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this}}function lY(r,t,n){let i=new hx;const s=new Lt,o=new Lt,a=new ni,c=new cO({depthPacking:3201}),u=new uO,_={},A=n.maxTextureSize,O={0:1,1:0,2:2},B=new ll({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new Lt},radius:{value:4}},vertexShader:"void main() {\n\tgl_Position = vec4( position, 1.0 );\n}",fragmentShader:"uniform sampler2D shadow_pass;\nuniform vec2 resolution;\nuniform float radius;\n#include <packing>\nvoid main() {\n\tconst float samples = float( VSM_SAMPLES );\n\tfloat mean = 0.0;\n\tfloat squared_mean = 0.0;\n\tfloat uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );\n\tfloat uvStart = samples <= 1.0 ? 0.0 : - 1.0;\n\tfor ( float i = 0.0; i < samples; i ++ ) {\n\t\tfloat uvOffset = uvStart + i * uvStride;\n\t\t#ifdef HORIZONTAL_PASS\n\t\t\tvec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );\n\t\t\tmean += distribution.x;\n\t\t\tsquared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\n\t\t#else\n\t\t\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );\n\t\t\tmean += depth;\n\t\t\tsquared_mean += depth * depth;\n\t\t#endif\n\t}\n\tmean = mean / samples;\n\tsquared_mean = squared_mean / samples;\n\tfloat std_dev = sqrt( squared_mean - mean * mean );\n\tgl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\n}"}),G=B.clone();G.defines.HORIZONTAL_PASS=1;const Y=new xr;Y.setAttribute("position",new hi(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const ne=new ws(Y,B),ee=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=wP;let Q=this.type;function ue(Ee,Le){const Fe=t.update(ne);B.defines.VSM_SAMPLES!==Ee.blurSamples&&(B.defines.VSM_SAMPLES=Ee.blurSamples,G.defines.VSM_SAMPLES=Ee.blurSamples,B.needsUpdate=!0,G.needsUpdate=!0),null===Ee.mapPass&&(Ee.mapPass=new Ea(s.x,s.y)),B.uniforms.shadow_pass.value=Ee.map.texture,B.uniforms.resolution.value=Ee.mapSize,B.uniforms.radius.value=Ee.radius,r.setRenderTarget(Ee.mapPass),r.clear(),r.renderBufferDirect(Le,null,Fe,B,ne,null),G.uniforms.shadow_pass.value=Ee.mapPass.texture,G.uniforms.resolution.value=Ee.mapSize,G.uniforms.radius.value=Ee.radius,r.setRenderTarget(Ee.map),r.clear(),r.renderBufferDirect(Le,null,Fe,G,ne,null)}function ce(Ee,Le,Fe,Xe){let Me=null;const Ne=!0===Fe.isPointLight?Ee.customDistanceMaterial:Ee.customDepthMaterial;if(void 0!==Ne)Me=Ne;else if(Me=!0===Fe.isPointLight?u:c,r.localClippingEnabled&&!0===Le.clipShadows&&Array.isArray(Le.clippingPlanes)&&0!==Le.clippingPlanes.length||Le.displacementMap&&0!==Le.displacementScale||Le.alphaMap&&Le.alphaTest>0||Le.map&&Le.alphaTest>0){const dt=Me.uuid,It=Le.uuid;let Ut=_[dt];void 0===Ut&&(Ut={},_[dt]=Ut);let Qe=Ut[It];void 0===Qe&&(Qe=Me.clone(),Ut[It]=Qe),Me=Qe}return Me.visible=Le.visible,Me.wireframe=Le.wireframe,Me.side=Xe===Za?null!==Le.shadowSide?Le.shadowSide:Le.side:null!==Le.shadowSide?Le.shadowSide:O[Le.side],Me.alphaMap=Le.alphaMap,Me.alphaTest=Le.alphaTest,Me.map=Le.map,Me.clipShadows=Le.clipShadows,Me.clippingPlanes=Le.clippingPlanes,Me.clipIntersection=Le.clipIntersection,Me.displacementMap=Le.displacementMap,Me.displacementScale=Le.displacementScale,Me.displacementBias=Le.displacementBias,Me.wireframeLinewidth=Le.wireframeLinewidth,Me.linewidth=Le.linewidth,!0===Fe.isPointLight&&!0===Me.isMeshDistanceMaterial&&(r.properties.get(Me).light=Fe),Me}function ye(Ee,Le,Fe,Xe,Me){if(!1===Ee.visible)return;if(Ee.layers.test(Le.layers)&&(Ee.isMesh||Ee.isLine||Ee.isPoints)&&(Ee.castShadow||Ee.receiveShadow&&Me===Za)&&(!Ee.frustumCulled||i.intersectsObject(Ee))){Ee.modelViewMatrix.multiplyMatrices(Fe.matrixWorldInverse,Ee.matrixWorld);const It=t.update(Ee),Ut=Ee.material;if(Array.isArray(Ut)){const Qe=It.groups;for(let mt=0,At=Qe.length;mt<At;mt++){const Ct=Qe[mt],Jt=Ut[Ct.materialIndex];if(Jt&&Jt.visible){const Rt=ce(Ee,Jt,Xe,Me);r.renderBufferDirect(Fe,null,It,Rt,Ee,Ct)}}}else if(Ut.visible){const Qe=ce(Ee,Ut,Xe,Me);r.renderBufferDirect(Fe,null,It,Qe,Ee,null)}}const dt=Ee.children;for(let It=0,Ut=dt.length;It<Ut;It++)ye(dt[It],Le,Fe,Xe,Me)}this.render=function(Ee,Le,Fe){if(!1===ee.enabled||!1===ee.autoUpdate&&!1===ee.needsUpdate||0===Ee.length)return;const Xe=r.getRenderTarget(),Me=r.getActiveCubeFace(),Ne=r.getActiveMipmapLevel(),dt=r.state;dt.setBlending(0),dt.buffers.color.setClear(1,1,1,1),dt.buffers.depth.setTest(!0),dt.setScissorTest(!1);const It=Q!==Za&&this.type===Za,Ut=Q===Za&&this.type!==Za;for(let Qe=0,mt=Ee.length;Qe<mt;Qe++){const At=Ee[Qe],Ct=At.shadow;if(void 0===Ct){console.warn("THREE.WebGLShadowMap:",At,"has no shadow.");continue}if(!1===Ct.autoUpdate&&!1===Ct.needsUpdate)continue;s.copy(Ct.mapSize);const Jt=Ct.getFrameExtents();if(s.multiply(Jt),o.copy(Ct.mapSize),(s.x>A||s.y>A)&&(s.x>A&&(o.x=Math.floor(A/Jt.x),s.x=o.x*Jt.x,Ct.mapSize.x=o.x),s.y>A&&(o.y=Math.floor(A/Jt.y),s.y=o.y*Jt.y,Ct.mapSize.y=o.y)),null===Ct.map||!0===It||!0===Ut){const Bt=this.type!==Za?{minFilter:Xi,magFilter:Xi}:{};null!==Ct.map&&Ct.map.dispose(),Ct.map=new Ea(s.x,s.y,Bt),Ct.map.texture.name=At.name+".shadowMap",Ct.camera.updateProjectionMatrix()}r.setRenderTarget(Ct.map),r.clear();const Rt=Ct.getViewportCount();for(let Bt=0;Bt<Rt;Bt++){const st=Ct.getViewport(Bt);a.set(o.x*st.x,o.y*st.y,o.x*st.z,o.y*st.w),dt.viewport(a),Ct.updateMatrices(At,Bt),i=Ct.getFrustum(),ye(Le,Fe,Ct.camera,At,this.type)}!0!==Ct.isPointLightShadow&&this.type===Za&&ue(Ct,Fe),Ct.needsUpdate=!1}Q=this.type,ee.needsUpdate=!1,r.setRenderTarget(Xe,Me,Ne)}}function cY(r,t,n){const i=n.isWebGL2,c=new function s(){let tt=!1;const vn=new ni;let sn=null;const Mt=new ni(0,0,0,0);return{setMask:function(an){sn!==an&&!tt&&(r.colorMask(an,an,an,an),sn=an)},setLocked:function(an){tt=an},setClear:function(an,Yn,Gr,Ki,Ho){!0===Ho&&(an*=Ki,Yn*=Ki,Gr*=Ki),vn.set(an,Yn,Gr,Ki),!1===Mt.equals(vn)&&(r.clearColor(an,Yn,Gr,Ki),Mt.copy(vn))},reset:function(){tt=!1,sn=null,Mt.set(-1,0,0,0)}}},u=new function o(){let tt=!1,vn=null,sn=null,Mt=null;return{setTest:function(an){an?ur(r.DEPTH_TEST):kr(r.DEPTH_TEST)},setMask:function(an){vn!==an&&!tt&&(r.depthMask(an),vn=an)},setFunc:function(an){if(sn!==an){switch(an){case 0:r.depthFunc(r.NEVER);break;case 1:r.depthFunc(r.ALWAYS);break;case 2:r.depthFunc(r.LESS);break;case 3:default:r.depthFunc(r.LEQUAL);break;case 4:r.depthFunc(r.EQUAL);break;case 5:r.depthFunc(r.GEQUAL);break;case 6:r.depthFunc(r.GREATER);break;case 7:r.depthFunc(r.NOTEQUAL)}sn=an}},setLocked:function(an){tt=an},setClear:function(an){Mt!==an&&(r.clearDepth(an),Mt=an)},reset:function(){tt=!1,vn=null,sn=null,Mt=null}}},_=new function a(){let tt=!1,vn=null,sn=null,Mt=null,an=null,Yn=null,Gr=null,Ki=null,Ho=null;return{setTest:function(fi){tt||(fi?ur(r.STENCIL_TEST):kr(r.STENCIL_TEST))},setMask:function(fi){vn!==fi&&!tt&&(r.stencilMask(fi),vn=fi)},setFunc:function(fi,Js,Ia){(sn!==fi||Mt!==Js||an!==Ia)&&(r.stencilFunc(fi,Js,Ia),sn=fi,Mt=Js,an=Ia)},setOp:function(fi,Js,Ia){(Yn!==fi||Gr!==Js||Ki!==Ia)&&(r.stencilOp(fi,Js,Ia),Yn=fi,Gr=Js,Ki=Ia)},setLocked:function(fi){tt=fi},setClear:function(fi){Ho!==fi&&(r.clearStencil(fi),Ho=fi)},reset:function(){tt=!1,vn=null,sn=null,Mt=null,an=null,Yn=null,Gr=null,Ki=null,Ho=null}}},A=new WeakMap,O=new WeakMap;let B={},G={},Y=new WeakMap,ne=[],ee=null,Q=!1,ue=null,ce=null,ye=null,Ee=null,Le=null,Fe=null,Xe=null,Me=new xn(0,0,0),Ne=0,dt=!1,It=null,Ut=null,Qe=null,mt=null,At=null;const Ct=r.getParameter(r.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let Jt=!1,Rt=0;const Bt=r.getParameter(r.VERSION);-1!==Bt.indexOf("WebGL")?(Rt=parseFloat(/^WebGL (\d)/.exec(Bt)[1]),Jt=Rt>=1):-1!==Bt.indexOf("OpenGL ES")&&(Rt=parseFloat(/^OpenGL ES (\d)/.exec(Bt)[1]),Jt=Rt>=2);let st=null,Et={};const mn=r.getParameter(r.SCISSOR_BOX),wn=r.getParameter(r.VIEWPORT),Cn=(new ni).fromArray(mn),qn=(new ni).fromArray(wn);function Jn(tt,vn,sn,Mt){const an=new Uint8Array(4),Yn=r.createTexture();r.bindTexture(tt,Yn),r.texParameteri(tt,r.TEXTURE_MIN_FILTER,r.NEAREST),r.texParameteri(tt,r.TEXTURE_MAG_FILTER,r.NEAREST);for(let Gr=0;Gr<sn;Gr++)!i||tt!==r.TEXTURE_3D&&tt!==r.TEXTURE_2D_ARRAY?r.texImage2D(vn+Gr,0,r.RGBA,1,1,0,r.RGBA,r.UNSIGNED_BYTE,an):r.texImage3D(vn,0,r.RGBA,1,1,Mt,0,r.RGBA,r.UNSIGNED_BYTE,an);return Yn}const $n={};function ur(tt){!0!==B[tt]&&(r.enable(tt),B[tt]=!0)}function kr(tt){!1!==B[tt]&&(r.disable(tt),B[tt]=!1)}$n[r.TEXTURE_2D]=Jn(r.TEXTURE_2D,r.TEXTURE_2D,1),$n[r.TEXTURE_CUBE_MAP]=Jn(r.TEXTURE_CUBE_MAP,r.TEXTURE_CUBE_MAP_POSITIVE_X,6),i&&($n[r.TEXTURE_2D_ARRAY]=Jn(r.TEXTURE_2D_ARRAY,r.TEXTURE_2D_ARRAY,1,1),$n[r.TEXTURE_3D]=Jn(r.TEXTURE_3D,r.TEXTURE_3D,1,1)),c.setClear(0,0,0,1),u.setClear(1),_.setClear(0),ur(r.DEPTH_TEST),u.setFunc(3),bn(!1),In(1),ur(r.CULL_FACE),Ft(0);const Tt={100:r.FUNC_ADD,101:r.FUNC_SUBTRACT,102:r.FUNC_REVERSE_SUBTRACT};if(i)Tt[103]=r.MIN,Tt[104]=r.MAX;else{const tt=t.get("EXT_blend_minmax");null!==tt&&(Tt[103]=tt.MIN_EXT,Tt[104]=tt.MAX_EXT)}const Yt={200:r.ZERO,201:r.ONE,202:r.SRC_COLOR,204:r.SRC_ALPHA,210:r.SRC_ALPHA_SATURATE,208:r.DST_COLOR,206:r.DST_ALPHA,203:r.ONE_MINUS_SRC_COLOR,205:r.ONE_MINUS_SRC_ALPHA,209:r.ONE_MINUS_DST_COLOR,207:r.ONE_MINUS_DST_ALPHA,211:r.CONSTANT_COLOR,212:r.ONE_MINUS_CONSTANT_COLOR,213:r.CONSTANT_ALPHA,214:r.ONE_MINUS_CONSTANT_ALPHA};function Ft(tt,vn,sn,Mt,an,Yn,Gr,Ki,Ho,fi){if(0!==tt){if(!1===Q&&(ur(r.BLEND),Q=!0),5===tt)an=an||vn,Yn=Yn||sn,Gr=Gr||Mt,(vn!==ce||an!==Le)&&(r.blendEquationSeparate(Tt[vn],Tt[an]),ce=vn,Le=an),(sn!==ye||Mt!==Ee||Yn!==Fe||Gr!==Xe)&&(r.blendFuncSeparate(Yt[sn],Yt[Mt],Yt[Yn],Yt[Gr]),ye=sn,Ee=Mt,Fe=Yn,Xe=Gr),(!1===Ki.equals(Me)||Ho!==Ne)&&(r.blendColor(Ki.r,Ki.g,Ki.b,Ho),Me.copy(Ki),Ne=Ho),ue=tt,dt=!1;else if(tt!==ue||fi!==dt){if((100!==ce||100!==Le)&&(r.blendEquation(r.FUNC_ADD),ce=100,Le=100),fi)switch(tt){case 1:r.blendFuncSeparate(r.ONE,r.ONE_MINUS_SRC_ALPHA,r.ONE,r.ONE_MINUS_SRC_ALPHA);break;case 2:r.blendFunc(r.ONE,r.ONE);break;case 3:r.blendFuncSeparate(r.ZERO,r.ONE_MINUS_SRC_COLOR,r.ZERO,r.ONE);break;case 4:r.blendFuncSeparate(r.ZERO,r.SRC_COLOR,r.ZERO,r.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",tt)}else switch(tt){case 1:r.blendFuncSeparate(r.SRC_ALPHA,r.ONE_MINUS_SRC_ALPHA,r.ONE,r.ONE_MINUS_SRC_ALPHA);break;case 2:r.blendFunc(r.SRC_ALPHA,r.ONE);break;case 3:r.blendFuncSeparate(r.ZERO,r.ONE_MINUS_SRC_COLOR,r.ZERO,r.ONE);break;case 4:r.blendFunc(r.ZERO,r.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",tt)}ye=null,Ee=null,Fe=null,Xe=null,Me.set(0,0,0),Ne=0,ue=tt,dt=fi}}else!0===Q&&(kr(r.BLEND),Q=!1)}function bn(tt){It!==tt&&(r.frontFace(tt?r.CW:r.CCW),It=tt)}function In(tt){0!==tt?(ur(r.CULL_FACE),tt!==Ut&&r.cullFace(1===tt?r.BACK:2===tt?r.FRONT:r.FRONT_AND_BACK)):kr(r.CULL_FACE),Ut=tt}function Mr(tt,vn,sn){tt?(ur(r.POLYGON_OFFSET_FILL),(mt!==vn||At!==sn)&&(r.polygonOffset(vn,sn),mt=vn,At=sn)):kr(r.POLYGON_OFFSET_FILL)}return{buffers:{color:c,depth:u,stencil:_},enable:ur,disable:kr,bindFramebuffer:function Xn(tt,vn){return G[tt]!==vn&&(r.bindFramebuffer(tt,vn),G[tt]=vn,i&&(tt===r.DRAW_FRAMEBUFFER&&(G[r.FRAMEBUFFER]=vn),tt===r.FRAMEBUFFER&&(G[r.DRAW_FRAMEBUFFER]=vn)),!0)},drawBuffers:function $e(tt,vn){let sn=ne,Mt=!1;if(tt)if(sn=Y.get(vn),void 0===sn&&(sn=[],Y.set(vn,sn)),tt.isWebGLMultipleRenderTargets){const an=tt.texture;if(sn.length!==an.length||sn[0]!==r.COLOR_ATTACHMENT0){for(let Yn=0,Gr=an.length;Yn<Gr;Yn++)sn[Yn]=r.COLOR_ATTACHMENT0+Yn;sn.length=an.length,Mt=!0}}else sn[0]!==r.COLOR_ATTACHMENT0&&(sn[0]=r.COLOR_ATTACHMENT0,Mt=!0);else sn[0]!==r.BACK&&(sn[0]=r.BACK,Mt=!0);Mt&&(n.isWebGL2?r.drawBuffers(sn):t.get("WEBGL_draw_buffers").drawBuffersWEBGL(sn))},useProgram:function dn(tt){return ee!==tt&&(r.useProgram(tt),ee=tt,!0)},setBlending:Ft,setMaterial:function kn(tt,vn){2===tt.side?kr(r.CULL_FACE):ur(r.CULL_FACE);let sn=1===tt.side;vn&&(sn=!sn),bn(sn),1===tt.blending&&!1===tt.transparent?Ft(0):Ft(tt.blending,tt.blendEquation,tt.blendSrc,tt.blendDst,tt.blendEquationAlpha,tt.blendSrcAlpha,tt.blendDstAlpha,tt.blendColor,tt.blendAlpha,tt.premultipliedAlpha),u.setFunc(tt.depthFunc),u.setTest(tt.depthTest),u.setMask(tt.depthWrite),c.setMask(tt.colorWrite);const Mt=tt.stencilWrite;_.setTest(Mt),Mt&&(_.setMask(tt.stencilWriteMask),_.setFunc(tt.stencilFunc,tt.stencilRef,tt.stencilFuncMask),_.setOp(tt.stencilFail,tt.stencilZFail,tt.stencilZPass)),Mr(tt.polygonOffset,tt.polygonOffsetFactor,tt.polygonOffsetUnits),!0===tt.alphaToCoverage?ur(r.SAMPLE_ALPHA_TO_COVERAGE):kr(r.SAMPLE_ALPHA_TO_COVERAGE)},setFlipSided:bn,setCullFace:In,setLineWidth:function ar(tt){tt!==Qe&&(Jt&&r.lineWidth(tt),Qe=tt)},setPolygonOffset:Mr,setScissorTest:function Ni(tt){tt?ur(r.SCISSOR_TEST):kr(r.SCISSOR_TEST)},activeTexture:function Ve(tt){void 0===tt&&(tt=r.TEXTURE0+Ct-1),st!==tt&&(r.activeTexture(tt),st=tt)},bindTexture:function Ce(tt,vn,sn){void 0===sn&&(sn=null===st?r.TEXTURE0+Ct-1:st);let Mt=Et[sn];void 0===Mt&&(Mt={type:void 0,texture:void 0},Et[sn]=Mt),(Mt.type!==tt||Mt.texture!==vn)&&(st!==sn&&(r.activeTexture(sn),st=sn),r.bindTexture(tt,vn||$n[tt]),Mt.type=tt,Mt.texture=vn)},unbindTexture:function ft(){const tt=Et[st];void 0!==tt&&void 0!==tt.type&&(r.bindTexture(tt.type,null),tt.type=void 0,tt.texture=void 0)},compressedTexImage2D:function Zt(){try{r.compressedTexImage2D.apply(r,arguments)}catch(tt){console.error("THREE.WebGLState:",tt)}},compressedTexImage3D:function Vt(){try{r.compressedTexImage3D.apply(r,arguments)}catch(tt){console.error("THREE.WebGLState:",tt)}},texImage2D:function en(){try{r.texImage2D.apply(r,arguments)}catch(tt){console.error("THREE.WebGLState:",tt)}},texImage3D:function ri(){try{r.texImage3D.apply(r,arguments)}catch(tt){console.error("THREE.WebGLState:",tt)}},updateUBOMapping:function Gn(tt,vn){let sn=O.get(vn);void 0===sn&&(sn=new WeakMap,O.set(vn,sn));let Mt=sn.get(tt);void 0===Mt&&(Mt=r.getUniformBlockIndex(vn,tt.name),sn.set(tt,Mt))},uniformBlockBinding:function En(tt,vn){const Mt=O.get(vn).get(tt);A.get(vn)!==Mt&&(r.uniformBlockBinding(vn,Mt,tt.__bindingPointIndex),A.set(vn,Mt))},texStorage2D:function er(){try{r.texStorage2D.apply(r,arguments)}catch(tt){console.error("THREE.WebGLState:",tt)}},texStorage3D:function zr(){try{r.texStorage3D.apply(r,arguments)}catch(tt){console.error("THREE.WebGLState:",tt)}},texSubImage2D:function Qt(){try{r.texSubImage2D.apply(r,arguments)}catch(tt){console.error("THREE.WebGLState:",tt)}},texSubImage3D:function Ln(){try{r.texSubImage3D.apply(r,arguments)}catch(tt){console.error("THREE.WebGLState:",tt)}},compressedTexSubImage2D:function on(){try{r.compressedTexSubImage2D.apply(r,arguments)}catch(tt){console.error("THREE.WebGLState:",tt)}},compressedTexSubImage3D:function yn(){try{r.compressedTexSubImage3D.apply(r,arguments)}catch(tt){console.error("THREE.WebGLState:",tt)}},scissor:function dr(tt){!1===Cn.equals(tt)&&(r.scissor(tt.x,tt.y,tt.z,tt.w),Cn.copy(tt))},viewport:function tr(tt){!1===qn.equals(tt)&&(r.viewport(tt.x,tt.y,tt.z,tt.w),qn.copy(tt))},reset:function Pr(){r.disable(r.BLEND),r.disable(r.CULL_FACE),r.disable(r.DEPTH_TEST),r.disable(r.POLYGON_OFFSET_FILL),r.disable(r.SCISSOR_TEST),r.disable(r.STENCIL_TEST),r.disable(r.SAMPLE_ALPHA_TO_COVERAGE),r.blendEquation(r.FUNC_ADD),r.blendFunc(r.ONE,r.ZERO),r.blendFuncSeparate(r.ONE,r.ZERO,r.ONE,r.ZERO),r.blendColor(0,0,0,0),r.colorMask(!0,!0,!0,!0),r.clearColor(0,0,0,0),r.depthMask(!0),r.depthFunc(r.LESS),r.clearDepth(1),r.stencilMask(4294967295),r.stencilFunc(r.ALWAYS,0,4294967295),r.stencilOp(r.KEEP,r.KEEP,r.KEEP),r.clearStencil(0),r.cullFace(r.BACK),r.frontFace(r.CCW),r.polygonOffset(0,0),r.activeTexture(r.TEXTURE0),r.bindFramebuffer(r.FRAMEBUFFER,null),!0===i&&(r.bindFramebuffer(r.DRAW_FRAMEBUFFER,null),r.bindFramebuffer(r.READ_FRAMEBUFFER,null)),r.useProgram(null),r.lineWidth(1),r.scissor(0,0,r.canvas.width,r.canvas.height),r.viewport(0,0,r.canvas.width,r.canvas.height),B={},st=null,Et={},G={},Y=new WeakMap,ne=[],ee=null,Q=!1,ue=null,ce=null,ye=null,Ee=null,Le=null,Fe=null,Xe=null,Me=new xn(0,0,0),Ne=0,dt=!1,It=null,Ut=null,Qe=null,mt=null,At=null,Cn.set(0,0,r.canvas.width,r.canvas.height),qn.set(0,0,r.canvas.width,r.canvas.height),c.reset(),u.reset(),_.reset()}}}function uY(r,t,n,i,s,o,a){const c=s.isWebGL2,u=s.maxTextures,_=s.maxCubemapSize,A=s.maxTextureSize,O=s.maxSamples,B=t.has("WEBGL_multisampled_render_to_texture")?t.get("WEBGL_multisampled_render_to_texture"):null,G=!(typeof navigator>"u")&&/OculusBrowser/g.test(navigator.userAgent),Y=new WeakMap;let ne;const ee=new WeakMap;let Q=!1;try{Q=typeof OffscreenCanvas<"u"&&null!==new OffscreenCanvas(1,1).getContext("2d")}catch{}function ue(Ve,Ce){return Q?new OffscreenCanvas(Ve,Ce):qf("canvas")}function ce(Ve,Ce,ft,Zt){let Vt=1;if((Ve.width>Zt||Ve.height>Zt)&&(Vt=Zt/Math.max(Ve.width,Ve.height)),Vt<1||!0===Ce){if(typeof HTMLImageElement<"u"&&Ve instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&Ve instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&Ve instanceof ImageBitmap){const Qt=Ce?ly:Math.floor,Ln=Qt(Vt*Ve.width),on=Qt(Vt*Ve.height);void 0===ne&&(ne=ue(Ln,on));const yn=ft?ue(Ln,on):ne;return yn.width=Ln,yn.height=on,yn.getContext("2d").drawImage(Ve,0,0,Ln,on),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+Ve.width+"x"+Ve.height+") to ("+Ln+"x"+on+")."),yn}return"data"in Ve&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+Ve.width+"x"+Ve.height+")."),Ve}return Ve}function ye(Ve){return W1(Ve.width)&&W1(Ve.height)}function Le(Ve,Ce){return Ve.generateMipmaps&&Ce&&Ve.minFilter!==Xi&&Ve.minFilter!==Yi}function Fe(Ve){r.generateMipmap(Ve)}function Xe(Ve,Ce,ft,Zt,Vt=!1){if(!1===c)return Ce;if(null!==Ve){if(void 0!==r[Ve])return r[Ve];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+Ve+"'")}let Qt=Ce;if(Ce===r.RED&&(ft===r.FLOAT&&(Qt=r.R32F),ft===r.HALF_FLOAT&&(Qt=r.R16F),ft===r.UNSIGNED_BYTE&&(Qt=r.R8)),Ce===r.RED_INTEGER&&(ft===r.UNSIGNED_BYTE&&(Qt=r.R8UI),ft===r.UNSIGNED_SHORT&&(Qt=r.R16UI),ft===r.UNSIGNED_INT&&(Qt=r.R32UI),ft===r.BYTE&&(Qt=r.R8I),ft===r.SHORT&&(Qt=r.R16I),ft===r.INT&&(Qt=r.R32I)),Ce===r.RG&&(ft===r.FLOAT&&(Qt=r.RG32F),ft===r.HALF_FLOAT&&(Qt=r.RG16F),ft===r.UNSIGNED_BYTE&&(Qt=r.RG8)),Ce===r.RGBA){const Ln=Vt?ry:ti.getTransfer(Zt);ft===r.FLOAT&&(Qt=r.RGBA32F),ft===r.HALF_FLOAT&&(Qt=r.RGBA16F),ft===r.UNSIGNED_BYTE&&(Qt=Ln===yi?r.SRGB8_ALPHA8:r.RGBA8),ft===r.UNSIGNED_SHORT_4_4_4_4&&(Qt=r.RGBA4),ft===r.UNSIGNED_SHORT_5_5_5_1&&(Qt=r.RGB5_A1)}return(Qt===r.R16F||Qt===r.R32F||Qt===r.RG16F||Qt===r.RG32F||Qt===r.RGBA16F||Qt===r.RGBA32F)&&t.get("EXT_color_buffer_float"),Qt}function Me(Ve,Ce,ft){return!0===Le(Ve,ft)||Ve.isFramebufferTexture&&Ve.minFilter!==Xi&&Ve.minFilter!==Yi?Math.log2(Math.max(Ce.width,Ce.height))+1:void 0!==Ve.mipmaps&&Ve.mipmaps.length>0?Ve.mipmaps.length:Ve.isCompressedTexture&&Array.isArray(Ve.image)?Ce.mipmaps.length:1}function Ne(Ve){return Ve===Xi||1004===Ve||1005===Ve?r.NEAREST:r.LINEAR}function dt(Ve){const Ce=Ve.target;Ce.removeEventListener("dispose",dt),function Ut(Ve){const Ce=i.get(Ve);if(void 0===Ce.__webglInit)return;const ft=Ve.source,Zt=ee.get(ft);if(Zt){const Vt=Zt[Ce.__cacheKey];Vt.usedTimes--,0===Vt.usedTimes&&Qe(Ve),0===Object.keys(Zt).length&&ee.delete(ft)}i.remove(Ve)}(Ce),Ce.isVideoTexture&&Y.delete(Ce)}function It(Ve){const Ce=Ve.target;Ce.removeEventListener("dispose",It),function mt(Ve){const Ce=Ve.texture,ft=i.get(Ve),Zt=i.get(Ce);if(void 0!==Zt.__webglTexture&&(r.deleteTexture(Zt.__webglTexture),a.memory.textures--),Ve.depthTexture&&Ve.depthTexture.dispose(),Ve.isWebGLCubeRenderTarget)for(let Vt=0;Vt<6;Vt++){if(Array.isArray(ft.__webglFramebuffer[Vt]))for(let Qt=0;Qt<ft.__webglFramebuffer[Vt].length;Qt++)r.deleteFramebuffer(ft.__webglFramebuffer[Vt][Qt]);else r.deleteFramebuffer(ft.__webglFramebuffer[Vt]);ft.__webglDepthbuffer&&r.deleteRenderbuffer(ft.__webglDepthbuffer[Vt])}else{if(Array.isArray(ft.__webglFramebuffer))for(let Vt=0;Vt<ft.__webglFramebuffer.length;Vt++)r.deleteFramebuffer(ft.__webglFramebuffer[Vt]);else r.deleteFramebuffer(ft.__webglFramebuffer);if(ft.__webglDepthbuffer&&r.deleteRenderbuffer(ft.__webglDepthbuffer),ft.__webglMultisampledFramebuffer&&r.deleteFramebuffer(ft.__webglMultisampledFramebuffer),ft.__webglColorRenderbuffer)for(let Vt=0;Vt<ft.__webglColorRenderbuffer.length;Vt++)ft.__webglColorRenderbuffer[Vt]&&r.deleteRenderbuffer(ft.__webglColorRenderbuffer[Vt]);ft.__webglDepthRenderbuffer&&r.deleteRenderbuffer(ft.__webglDepthRenderbuffer)}if(Ve.isWebGLMultipleRenderTargets)for(let Vt=0,Qt=Ce.length;Vt<Qt;Vt++){const Ln=i.get(Ce[Vt]);Ln.__webglTexture&&(r.deleteTexture(Ln.__webglTexture),a.memory.textures--),i.remove(Ce[Vt])}i.remove(Ce),i.remove(Ve)}(Ce)}function Qe(Ve){const Ce=i.get(Ve);r.deleteTexture(Ce.__webglTexture),delete ee.get(Ve.source)[Ce.__cacheKey],a.memory.textures--}let At=0;function Bt(Ve,Ce){const ft=i.get(Ve);if(Ve.isVideoTexture&&function Mr(Ve){const Ce=a.render.frame;Y.get(Ve)!==Ce&&(Y.set(Ve,Ce),Ve.update())}(Ve),!1===Ve.isRenderTargetTexture&&Ve.version>0&&ft.__version!==Ve.version){const Zt=Ve.image;if(null===Zt)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else{if(!1!==Zt.complete)return void ur(ft,Ve,Ce);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete")}}n.bindTexture(r.TEXTURE_2D,ft.__webglTexture,r.TEXTURE0+Ce)}const wn={1e3:r.REPEAT,[Xs]:r.CLAMP_TO_EDGE,1002:r.MIRRORED_REPEAT},Cn={[Xi]:r.NEAREST,1004:r.NEAREST_MIPMAP_NEAREST,1005:r.NEAREST_MIPMAP_LINEAR,[Yi]:r.LINEAR,1007:r.LINEAR_MIPMAP_NEAREST,[Ac]:r.LINEAR_MIPMAP_LINEAR},qn={512:r.NEVER,519:r.ALWAYS,513:r.LESS,515:r.LEQUAL,514:r.EQUAL,518:r.GEQUAL,516:r.GREATER,517:r.NOTEQUAL};function Jn(Ve,Ce,ft){if(ft?(r.texParameteri(Ve,r.TEXTURE_WRAP_S,wn[Ce.wrapS]),r.texParameteri(Ve,r.TEXTURE_WRAP_T,wn[Ce.wrapT]),(Ve===r.TEXTURE_3D||Ve===r.TEXTURE_2D_ARRAY)&&r.texParameteri(Ve,r.TEXTURE_WRAP_R,wn[Ce.wrapR]),r.texParameteri(Ve,r.TEXTURE_MAG_FILTER,Cn[Ce.magFilter]),r.texParameteri(Ve,r.TEXTURE_MIN_FILTER,Cn[Ce.minFilter])):(r.texParameteri(Ve,r.TEXTURE_WRAP_S,r.CLAMP_TO_EDGE),r.texParameteri(Ve,r.TEXTURE_WRAP_T,r.CLAMP_TO_EDGE),(Ve===r.TEXTURE_3D||Ve===r.TEXTURE_2D_ARRAY)&&r.texParameteri(Ve,r.TEXTURE_WRAP_R,r.CLAMP_TO_EDGE),(Ce.wrapS!==Xs||Ce.wrapT!==Xs)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),r.texParameteri(Ve,r.TEXTURE_MAG_FILTER,Ne(Ce.magFilter)),r.texParameteri(Ve,r.TEXTURE_MIN_FILTER,Ne(Ce.minFilter)),Ce.minFilter!==Xi&&Ce.minFilter!==Yi&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),Ce.compareFunction&&(r.texParameteri(Ve,r.TEXTURE_COMPARE_MODE,r.COMPARE_REF_TO_TEXTURE),r.texParameteri(Ve,r.TEXTURE_COMPARE_FUNC,qn[Ce.compareFunction])),!0===t.has("EXT_texture_filter_anisotropic")){const Zt=t.get("EXT_texture_filter_anisotropic");if(Ce.magFilter===Xi||1005!==Ce.minFilter&&Ce.minFilter!==Ac||Ce.type===Ja&&!1===t.has("OES_texture_float_linear")||!1===c&&Ce.type===Hf&&!1===t.has("OES_texture_half_float_linear"))return;(Ce.anisotropy>1||i.get(Ce).__currentAnisotropy)&&(r.texParameterf(Ve,Zt.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(Ce.anisotropy,s.getMaxAnisotropy())),i.get(Ce).__currentAnisotropy=Ce.anisotropy)}}function $n(Ve,Ce){let ft=!1;void 0===Ve.__webglInit&&(Ve.__webglInit=!0,Ce.addEventListener("dispose",dt));const Zt=Ce.source;let Vt=ee.get(Zt);void 0===Vt&&(Vt={},ee.set(Zt,Vt));const Qt=function Rt(Ve){const Ce=[];return Ce.push(Ve.wrapS),Ce.push(Ve.wrapT),Ce.push(Ve.wrapR||0),Ce.push(Ve.magFilter),Ce.push(Ve.minFilter),Ce.push(Ve.anisotropy),Ce.push(Ve.internalFormat),Ce.push(Ve.format),Ce.push(Ve.type),Ce.push(Ve.generateMipmaps),Ce.push(Ve.premultiplyAlpha),Ce.push(Ve.flipY),Ce.push(Ve.unpackAlignment),Ce.push(Ve.colorSpace),Ce.join()}(Ce);if(Qt!==Ve.__cacheKey){void 0===Vt[Qt]&&(Vt[Qt]={texture:r.createTexture(),usedTimes:0},a.memory.textures++,ft=!0),Vt[Qt].usedTimes++;const Ln=Vt[Ve.__cacheKey];void 0!==Ln&&(Vt[Ve.__cacheKey].usedTimes--,0===Ln.usedTimes&&Qe(Ce)),Ve.__cacheKey=Qt,Ve.__webglTexture=Vt[Qt].texture}return ft}function ur(Ve,Ce,ft){let Zt=r.TEXTURE_2D;(Ce.isDataArrayTexture||Ce.isCompressedArrayTexture)&&(Zt=r.TEXTURE_2D_ARRAY),Ce.isData3DTexture&&(Zt=r.TEXTURE_3D);const Vt=$n(Ve,Ce),Qt=Ce.source;n.bindTexture(Zt,Ve.__webglTexture,r.TEXTURE0+ft);const Ln=i.get(Qt);if(Qt.version!==Ln.__version||!0===Vt){n.activeTexture(r.TEXTURE0+ft);const on=ti.getPrimaries(ti.workingColorSpace),yn=""===Ce.colorSpace?null:ti.getPrimaries(Ce.colorSpace),er=""===Ce.colorSpace||on===yn?r.NONE:r.BROWSER_DEFAULT_WEBGL;r.pixelStorei(r.UNPACK_FLIP_Y_WEBGL,Ce.flipY),r.pixelStorei(r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,Ce.premultiplyAlpha),r.pixelStorei(r.UNPACK_ALIGNMENT,Ce.unpackAlignment),r.pixelStorei(r.UNPACK_COLORSPACE_CONVERSION_WEBGL,er);const zr=function Ee(Ve){return!c&&(Ve.wrapS!==Xs||Ve.wrapT!==Xs||Ve.minFilter!==Xi&&Ve.minFilter!==Yi)}(Ce)&&!1===ye(Ce.image);let en=ce(Ce.image,zr,!1,A);en=Ni(Ce,en);const ri=ye(en)||c,dr=o.convert(Ce.format,Ce.colorSpace);let En,tr=o.convert(Ce.type),Gn=Xe(Ce.internalFormat,dr,tr,Ce.colorSpace,Ce.isVideoTexture);Jn(Zt,Ce,ri);const Pr=Ce.mipmaps,tt=c&&!0!==Ce.isVideoTexture,vn=void 0===Ln.__version||!0===Vt,sn=Me(Ce,en,ri);if(Ce.isDepthTexture)Gn=r.DEPTH_COMPONENT,c?Gn=Ce.type===Ja?r.DEPTH_COMPONENT32F:Ce.type===Bl?r.DEPTH_COMPONENT24:Ce.type===Dc?r.DEPTH24_STENCIL8:r.DEPTH_COMPONENT16:Ce.type===Ja&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),Ce.format===Ic&&Gn===r.DEPTH_COMPONENT&&1012!==Ce.type&&Ce.type!==Bl&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),Ce.type=Bl,tr=o.convert(Ce.type)),Ce.format===Ad&&Gn===r.DEPTH_COMPONENT&&(Gn=r.DEPTH_STENCIL,Ce.type!==Dc&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),Ce.type=Dc,tr=o.convert(Ce.type))),vn&&(tt?n.texStorage2D(r.TEXTURE_2D,1,Gn,en.width,en.height):n.texImage2D(r.TEXTURE_2D,0,Gn,en.width,en.height,0,dr,tr,null));else if(Ce.isDataTexture)if(Pr.length>0&&ri){tt&&vn&&n.texStorage2D(r.TEXTURE_2D,sn,Gn,Pr[0].width,Pr[0].height);for(let Mt=0,an=Pr.length;Mt<an;Mt++)En=Pr[Mt],tt?n.texSubImage2D(r.TEXTURE_2D,Mt,0,0,En.width,En.height,dr,tr,En.data):n.texImage2D(r.TEXTURE_2D,Mt,Gn,En.width,En.height,0,dr,tr,En.data);Ce.generateMipmaps=!1}else tt?(vn&&n.texStorage2D(r.TEXTURE_2D,sn,Gn,en.width,en.height),n.texSubImage2D(r.TEXTURE_2D,0,0,0,en.width,en.height,dr,tr,en.data)):n.texImage2D(r.TEXTURE_2D,0,Gn,en.width,en.height,0,dr,tr,en.data);else if(Ce.isCompressedTexture)if(Ce.isCompressedArrayTexture){tt&&vn&&n.texStorage3D(r.TEXTURE_2D_ARRAY,sn,Gn,Pr[0].width,Pr[0].height,en.depth);for(let Mt=0,an=Pr.length;Mt<an;Mt++)En=Pr[Mt],Ce.format!==Bo?null!==dr?tt?n.compressedTexSubImage3D(r.TEXTURE_2D_ARRAY,Mt,0,0,0,En.width,En.height,en.depth,dr,En.data,0,0):n.compressedTexImage3D(r.TEXTURE_2D_ARRAY,Mt,Gn,En.width,En.height,en.depth,0,En.data,0,0):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):tt?n.texSubImage3D(r.TEXTURE_2D_ARRAY,Mt,0,0,0,En.width,En.height,en.depth,dr,tr,En.data):n.texImage3D(r.TEXTURE_2D_ARRAY,Mt,Gn,En.width,En.height,en.depth,0,dr,tr,En.data)}else{tt&&vn&&n.texStorage2D(r.TEXTURE_2D,sn,Gn,Pr[0].width,Pr[0].height);for(let Mt=0,an=Pr.length;Mt<an;Mt++)En=Pr[Mt],Ce.format!==Bo?null!==dr?tt?n.compressedTexSubImage2D(r.TEXTURE_2D,Mt,0,0,En.width,En.height,dr,En.data):n.compressedTexImage2D(r.TEXTURE_2D,Mt,Gn,En.width,En.height,0,En.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):tt?n.texSubImage2D(r.TEXTURE_2D,Mt,0,0,En.width,En.height,dr,tr,En.data):n.texImage2D(r.TEXTURE_2D,Mt,Gn,En.width,En.height,0,dr,tr,En.data)}else if(Ce.isDataArrayTexture)tt?(vn&&n.texStorage3D(r.TEXTURE_2D_ARRAY,sn,Gn,en.width,en.height,en.depth),n.texSubImage3D(r.TEXTURE_2D_ARRAY,0,0,0,0,en.width,en.height,en.depth,dr,tr,en.data)):n.texImage3D(r.TEXTURE_2D_ARRAY,0,Gn,en.width,en.height,en.depth,0,dr,tr,en.data);else if(Ce.isData3DTexture)tt?(vn&&n.texStorage3D(r.TEXTURE_3D,sn,Gn,en.width,en.height,en.depth),n.texSubImage3D(r.TEXTURE_3D,0,0,0,0,en.width,en.height,en.depth,dr,tr,en.data)):n.texImage3D(r.TEXTURE_3D,0,Gn,en.width,en.height,en.depth,0,dr,tr,en.data);else if(Ce.isFramebufferTexture){if(vn)if(tt)n.texStorage2D(r.TEXTURE_2D,sn,Gn,en.width,en.height);else{let Mt=en.width,an=en.height;for(let Yn=0;Yn<sn;Yn++)n.texImage2D(r.TEXTURE_2D,Yn,Gn,Mt,an,0,dr,tr,null),Mt>>=1,an>>=1}}else if(Pr.length>0&&ri){tt&&vn&&n.texStorage2D(r.TEXTURE_2D,sn,Gn,Pr[0].width,Pr[0].height);for(let Mt=0,an=Pr.length;Mt<an;Mt++)En=Pr[Mt],tt?n.texSubImage2D(r.TEXTURE_2D,Mt,0,0,dr,tr,En):n.texImage2D(r.TEXTURE_2D,Mt,Gn,dr,tr,En);Ce.generateMipmaps=!1}else tt?(vn&&n.texStorage2D(r.TEXTURE_2D,sn,Gn,en.width,en.height),n.texSubImage2D(r.TEXTURE_2D,0,0,0,dr,tr,en)):n.texImage2D(r.TEXTURE_2D,0,Gn,dr,tr,en);Le(Ce,ri)&&Fe(Zt),Ln.__version=Qt.version,Ce.onUpdate&&Ce.onUpdate(Ce)}Ve.__version=Ce.version}function Xn(Ve,Ce,ft,Zt,Vt,Qt){const Ln=o.convert(ft.format,ft.colorSpace),on=o.convert(ft.type),yn=Xe(ft.internalFormat,Ln,on,ft.colorSpace);if(!i.get(Ce).__hasExternalTextures){const zr=Math.max(1,Ce.width>>Qt),en=Math.max(1,Ce.height>>Qt);Vt===r.TEXTURE_3D||Vt===r.TEXTURE_2D_ARRAY?n.texImage3D(Vt,Qt,yn,zr,en,Ce.depth,0,Ln,on,null):n.texImage2D(Vt,Qt,yn,zr,en,0,Ln,on,null)}n.bindFramebuffer(r.FRAMEBUFFER,Ve),ar(Ce)?B.framebufferTexture2DMultisampleEXT(r.FRAMEBUFFER,Zt,Vt,i.get(ft).__webglTexture,0,In(Ce)):(Vt===r.TEXTURE_2D||Vt>=r.TEXTURE_CUBE_MAP_POSITIVE_X&&Vt<=r.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&r.framebufferTexture2D(r.FRAMEBUFFER,Zt,Vt,i.get(ft).__webglTexture,Qt),n.bindFramebuffer(r.FRAMEBUFFER,null)}function $e(Ve,Ce,ft){if(r.bindRenderbuffer(r.RENDERBUFFER,Ve),Ce.depthBuffer&&!Ce.stencilBuffer){let Zt=!0===c?r.DEPTH_COMPONENT24:r.DEPTH_COMPONENT16;if(ft||ar(Ce)){const Vt=Ce.depthTexture;Vt&&Vt.isDepthTexture&&(Vt.type===Ja?Zt=r.DEPTH_COMPONENT32F:Vt.type===Bl&&(Zt=r.DEPTH_COMPONENT24));const Qt=In(Ce);ar(Ce)?B.renderbufferStorageMultisampleEXT(r.RENDERBUFFER,Qt,Zt,Ce.width,Ce.height):r.renderbufferStorageMultisample(r.RENDERBUFFER,Qt,Zt,Ce.width,Ce.height)}else r.renderbufferStorage(r.RENDERBUFFER,Zt,Ce.width,Ce.height);r.framebufferRenderbuffer(r.FRAMEBUFFER,r.DEPTH_ATTACHMENT,r.RENDERBUFFER,Ve)}else if(Ce.depthBuffer&&Ce.stencilBuffer){const Zt=In(Ce);ft&&!1===ar(Ce)?r.renderbufferStorageMultisample(r.RENDERBUFFER,Zt,r.DEPTH24_STENCIL8,Ce.width,Ce.height):ar(Ce)?B.renderbufferStorageMultisampleEXT(r.RENDERBUFFER,Zt,r.DEPTH24_STENCIL8,Ce.width,Ce.height):r.renderbufferStorage(r.RENDERBUFFER,r.DEPTH_STENCIL,Ce.width,Ce.height),r.framebufferRenderbuffer(r.FRAMEBUFFER,r.DEPTH_STENCIL_ATTACHMENT,r.RENDERBUFFER,Ve)}else{const Zt=!0===Ce.isWebGLMultipleRenderTargets?Ce.texture:[Ce.texture];for(let Vt=0;Vt<Zt.length;Vt++){const Qt=Zt[Vt],Ln=o.convert(Qt.format,Qt.colorSpace),on=o.convert(Qt.type),yn=Xe(Qt.internalFormat,Ln,on,Qt.colorSpace),er=In(Ce);ft&&!1===ar(Ce)?r.renderbufferStorageMultisample(r.RENDERBUFFER,er,yn,Ce.width,Ce.height):ar(Ce)?B.renderbufferStorageMultisampleEXT(r.RENDERBUFFER,er,yn,Ce.width,Ce.height):r.renderbufferStorage(r.RENDERBUFFER,yn,Ce.width,Ce.height)}}r.bindRenderbuffer(r.RENDERBUFFER,null)}function Tt(Ve){const Ce=i.get(Ve),ft=!0===Ve.isWebGLCubeRenderTarget;if(Ve.depthTexture&&!Ce.__autoAllocateDepthBuffer){if(ft)throw new Error("target.depthTexture not supported in Cube render targets");!function dn(Ve,Ce){if(Ce&&Ce.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(n.bindFramebuffer(r.FRAMEBUFFER,Ve),!Ce.depthTexture||!Ce.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!i.get(Ce.depthTexture).__webglTexture||Ce.depthTexture.image.width!==Ce.width||Ce.depthTexture.image.height!==Ce.height)&&(Ce.depthTexture.image.width=Ce.width,Ce.depthTexture.image.height=Ce.height,Ce.depthTexture.needsUpdate=!0),Bt(Ce.depthTexture,0);const Zt=i.get(Ce.depthTexture).__webglTexture,Vt=In(Ce);if(Ce.depthTexture.format===Ic)ar(Ce)?B.framebufferTexture2DMultisampleEXT(r.FRAMEBUFFER,r.DEPTH_ATTACHMENT,r.TEXTURE_2D,Zt,0,Vt):r.framebufferTexture2D(r.FRAMEBUFFER,r.DEPTH_ATTACHMENT,r.TEXTURE_2D,Zt,0);else{if(Ce.depthTexture.format!==Ad)throw new Error("Unknown depthTexture format");ar(Ce)?B.framebufferTexture2DMultisampleEXT(r.FRAMEBUFFER,r.DEPTH_STENCIL_ATTACHMENT,r.TEXTURE_2D,Zt,0,Vt):r.framebufferTexture2D(r.FRAMEBUFFER,r.DEPTH_STENCIL_ATTACHMENT,r.TEXTURE_2D,Zt,0)}}(Ce.__webglFramebuffer,Ve)}else if(ft){Ce.__webglDepthbuffer=[];for(let Zt=0;Zt<6;Zt++)n.bindFramebuffer(r.FRAMEBUFFER,Ce.__webglFramebuffer[Zt]),Ce.__webglDepthbuffer[Zt]=r.createRenderbuffer(),$e(Ce.__webglDepthbuffer[Zt],Ve,!1)}else n.bindFramebuffer(r.FRAMEBUFFER,Ce.__webglFramebuffer),Ce.__webglDepthbuffer=r.createRenderbuffer(),$e(Ce.__webglDepthbuffer,Ve,!1);n.bindFramebuffer(r.FRAMEBUFFER,null)}function In(Ve){return Math.min(O,Ve.samples)}function ar(Ve){const Ce=i.get(Ve);return c&&Ve.samples>0&&!0===t.has("WEBGL_multisampled_render_to_texture")&&!1!==Ce.__useRenderToTexture}function Ni(Ve,Ce){const ft=Ve.colorSpace,Zt=Ve.format,Vt=Ve.type;return!0===Ve.isCompressedTexture||!0===Ve.isVideoTexture||1035===Ve.format||ft!==Qa&&""!==ft&&(ti.getTransfer(ft)===yi?!1===c?!0===t.has("EXT_sRGB")&&Zt===Bo?(Ve.format=1035,Ve.minFilter=Yi,Ve.generateMipmaps=!1):Ce=yR.sRGBToLinear(Ce):(Zt!==Bo||Vt!==Ul)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",ft)),Ce}this.allocateTextureUnit=function Jt(){const Ve=At;return Ve>=u&&console.warn("THREE.WebGLTextures: Trying to use "+Ve+" texture units while this GPU supports only "+u),At+=1,Ve},this.resetTextureUnits=function Ct(){At=0},this.setTexture2D=Bt,this.setTexture2DArray=function st(Ve,Ce){const ft=i.get(Ve);Ve.version>0&&ft.__version!==Ve.version?ur(ft,Ve,Ce):n.bindTexture(r.TEXTURE_2D_ARRAY,ft.__webglTexture,r.TEXTURE0+Ce)},this.setTexture3D=function Et(Ve,Ce){const ft=i.get(Ve);Ve.version>0&&ft.__version!==Ve.version?ur(ft,Ve,Ce):n.bindTexture(r.TEXTURE_3D,ft.__webglTexture,r.TEXTURE0+Ce)},this.setTextureCube=function mn(Ve,Ce){const ft=i.get(Ve);Ve.version>0&&ft.__version!==Ve.version?function kr(Ve,Ce,ft){if(6!==Ce.image.length)return;const Zt=$n(Ve,Ce),Vt=Ce.source;n.bindTexture(r.TEXTURE_CUBE_MAP,Ve.__webglTexture,r.TEXTURE0+ft);const Qt=i.get(Vt);if(Vt.version!==Qt.__version||!0===Zt){n.activeTexture(r.TEXTURE0+ft);const Ln=ti.getPrimaries(ti.workingColorSpace),on=""===Ce.colorSpace?null:ti.getPrimaries(Ce.colorSpace),yn=""===Ce.colorSpace||Ln===on?r.NONE:r.BROWSER_DEFAULT_WEBGL;r.pixelStorei(r.UNPACK_FLIP_Y_WEBGL,Ce.flipY),r.pixelStorei(r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,Ce.premultiplyAlpha),r.pixelStorei(r.UNPACK_ALIGNMENT,Ce.unpackAlignment),r.pixelStorei(r.UNPACK_COLORSPACE_CONVERSION_WEBGL,yn);const er=Ce.isCompressedTexture||Ce.image[0].isCompressedTexture,zr=Ce.image[0]&&Ce.image[0].isDataTexture,en=[];for(let Mt=0;Mt<6;Mt++)en[Mt]=er||zr?zr?Ce.image[Mt].image:Ce.image[Mt]:ce(Ce.image[Mt],!1,!0,_),en[Mt]=Ni(Ce,en[Mt]);const ri=en[0],dr=ye(ri)||c,tr=o.convert(Ce.format,Ce.colorSpace),Gn=o.convert(Ce.type),En=Xe(Ce.internalFormat,tr,Gn,Ce.colorSpace),Pr=c&&!0!==Ce.isVideoTexture,tt=void 0===Qt.__version||!0===Zt;let sn,vn=Me(Ce,ri,dr);if(Jn(r.TEXTURE_CUBE_MAP,Ce,dr),er){Pr&&tt&&n.texStorage2D(r.TEXTURE_CUBE_MAP,vn,En,ri.width,ri.height);for(let Mt=0;Mt<6;Mt++){sn=en[Mt].mipmaps;for(let an=0;an<sn.length;an++){const Yn=sn[an];Ce.format!==Bo?null!==tr?Pr?n.compressedTexSubImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+Mt,an,0,0,Yn.width,Yn.height,tr,Yn.data):n.compressedTexImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+Mt,an,En,Yn.width,Yn.height,0,Yn.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):Pr?n.texSubImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+Mt,an,0,0,Yn.width,Yn.height,tr,Gn,Yn.data):n.texImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+Mt,an,En,Yn.width,Yn.height,0,tr,Gn,Yn.data)}}}else{sn=Ce.mipmaps,Pr&&tt&&(sn.length>0&&vn++,n.texStorage2D(r.TEXTURE_CUBE_MAP,vn,En,en[0].width,en[0].height));for(let Mt=0;Mt<6;Mt++)if(zr){Pr?n.texSubImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+Mt,0,0,0,en[Mt].width,en[Mt].height,tr,Gn,en[Mt].data):n.texImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+Mt,0,En,en[Mt].width,en[Mt].height,0,tr,Gn,en[Mt].data);for(let an=0;an<sn.length;an++){const Gr=sn[an].image[Mt].image;Pr?n.texSubImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+Mt,an+1,0,0,Gr.width,Gr.height,tr,Gn,Gr.data):n.texImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+Mt,an+1,En,Gr.width,Gr.height,0,tr,Gn,Gr.data)}}else{Pr?n.texSubImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+Mt,0,0,0,tr,Gn,en[Mt]):n.texImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+Mt,0,En,tr,Gn,en[Mt]);for(let an=0;an<sn.length;an++){const Yn=sn[an];Pr?n.texSubImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+Mt,an+1,0,0,tr,Gn,Yn.image[Mt]):n.texImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+Mt,an+1,En,tr,Gn,Yn.image[Mt])}}}Le(Ce,dr)&&Fe(r.TEXTURE_CUBE_MAP),Qt.__version=Vt.version,Ce.onUpdate&&Ce.onUpdate(Ce)}Ve.__version=Ce.version}(ft,Ve,Ce):n.bindTexture(r.TEXTURE_CUBE_MAP,ft.__webglTexture,r.TEXTURE0+Ce)},this.rebindTextures=function Yt(Ve,Ce,ft){const Zt=i.get(Ve);void 0!==Ce&&Xn(Zt.__webglFramebuffer,Ve,Ve.texture,r.COLOR_ATTACHMENT0,r.TEXTURE_2D,0),void 0!==ft&&Tt(Ve)},this.setupRenderTarget=function Ft(Ve){const Ce=Ve.texture,ft=i.get(Ve),Zt=i.get(Ce);Ve.addEventListener("dispose",It),!0!==Ve.isWebGLMultipleRenderTargets&&(void 0===Zt.__webglTexture&&(Zt.__webglTexture=r.createTexture()),Zt.__version=Ce.version,a.memory.textures++);const Vt=!0===Ve.isWebGLCubeRenderTarget,Qt=!0===Ve.isWebGLMultipleRenderTargets,Ln=ye(Ve)||c;if(Vt){ft.__webglFramebuffer=[];for(let on=0;on<6;on++)if(c&&Ce.mipmaps&&Ce.mipmaps.length>0){ft.__webglFramebuffer[on]=[];for(let yn=0;yn<Ce.mipmaps.length;yn++)ft.__webglFramebuffer[on][yn]=r.createFramebuffer()}else ft.__webglFramebuffer[on]=r.createFramebuffer()}else{if(c&&Ce.mipmaps&&Ce.mipmaps.length>0){ft.__webglFramebuffer=[];for(let on=0;on<Ce.mipmaps.length;on++)ft.__webglFramebuffer[on]=r.createFramebuffer()}else ft.__webglFramebuffer=r.createFramebuffer();if(Qt)if(s.drawBuffers){const on=Ve.texture;for(let yn=0,er=on.length;yn<er;yn++){const zr=i.get(on[yn]);void 0===zr.__webglTexture&&(zr.__webglTexture=r.createTexture(),a.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");if(c&&Ve.samples>0&&!1===ar(Ve)){const on=Qt?Ce:[Ce];ft.__webglMultisampledFramebuffer=r.createFramebuffer(),ft.__webglColorRenderbuffer=[],n.bindFramebuffer(r.FRAMEBUFFER,ft.__webglMultisampledFramebuffer);for(let yn=0;yn<on.length;yn++){const er=on[yn];ft.__webglColorRenderbuffer[yn]=r.createRenderbuffer(),r.bindRenderbuffer(r.RENDERBUFFER,ft.__webglColorRenderbuffer[yn]);const zr=o.convert(er.format,er.colorSpace),en=o.convert(er.type),ri=Xe(er.internalFormat,zr,en,er.colorSpace,!0===Ve.isXRRenderTarget),dr=In(Ve);r.renderbufferStorageMultisample(r.RENDERBUFFER,dr,ri,Ve.width,Ve.height),r.framebufferRenderbuffer(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0+yn,r.RENDERBUFFER,ft.__webglColorRenderbuffer[yn])}r.bindRenderbuffer(r.RENDERBUFFER,null),Ve.depthBuffer&&(ft.__webglDepthRenderbuffer=r.createRenderbuffer(),$e(ft.__webglDepthRenderbuffer,Ve,!0)),n.bindFramebuffer(r.FRAMEBUFFER,null)}}if(Vt){n.bindTexture(r.TEXTURE_CUBE_MAP,Zt.__webglTexture),Jn(r.TEXTURE_CUBE_MAP,Ce,Ln);for(let on=0;on<6;on++)if(c&&Ce.mipmaps&&Ce.mipmaps.length>0)for(let yn=0;yn<Ce.mipmaps.length;yn++)Xn(ft.__webglFramebuffer[on][yn],Ve,Ce,r.COLOR_ATTACHMENT0,r.TEXTURE_CUBE_MAP_POSITIVE_X+on,yn);else Xn(ft.__webglFramebuffer[on],Ve,Ce,r.COLOR_ATTACHMENT0,r.TEXTURE_CUBE_MAP_POSITIVE_X+on,0);Le(Ce,Ln)&&Fe(r.TEXTURE_CUBE_MAP),n.unbindTexture()}else if(Qt){const on=Ve.texture;for(let yn=0,er=on.length;yn<er;yn++){const zr=on[yn],en=i.get(zr);n.bindTexture(r.TEXTURE_2D,en.__webglTexture),Jn(r.TEXTURE_2D,zr,Ln),Xn(ft.__webglFramebuffer,Ve,zr,r.COLOR_ATTACHMENT0+yn,r.TEXTURE_2D,0),Le(zr,Ln)&&Fe(r.TEXTURE_2D)}n.unbindTexture()}else{let on=r.TEXTURE_2D;if((Ve.isWebGL3DRenderTarget||Ve.isWebGLArrayRenderTarget)&&(c?on=Ve.isWebGL3DRenderTarget?r.TEXTURE_3D:r.TEXTURE_2D_ARRAY:console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")),n.bindTexture(on,Zt.__webglTexture),Jn(on,Ce,Ln),c&&Ce.mipmaps&&Ce.mipmaps.length>0)for(let yn=0;yn<Ce.mipmaps.length;yn++)Xn(ft.__webglFramebuffer[yn],Ve,Ce,r.COLOR_ATTACHMENT0,on,yn);else Xn(ft.__webglFramebuffer,Ve,Ce,r.COLOR_ATTACHMENT0,on,0);Le(Ce,Ln)&&Fe(on),n.unbindTexture()}Ve.depthBuffer&&Tt(Ve)},this.updateRenderTargetMipmap=function kn(Ve){const Ce=ye(Ve)||c,ft=!0===Ve.isWebGLMultipleRenderTargets?Ve.texture:[Ve.texture];for(let Zt=0,Vt=ft.length;Zt<Vt;Zt++){const Qt=ft[Zt];if(Le(Qt,Ce)){const Ln=Ve.isWebGLCubeRenderTarget?r.TEXTURE_CUBE_MAP:r.TEXTURE_2D,on=i.get(Qt).__webglTexture;n.bindTexture(Ln,on),Fe(Ln),n.unbindTexture()}}},this.updateMultisampleRenderTarget=function bn(Ve){if(c&&Ve.samples>0&&!1===ar(Ve)){const Ce=Ve.isWebGLMultipleRenderTargets?Ve.texture:[Ve.texture],ft=Ve.width,Zt=Ve.height;let Vt=r.COLOR_BUFFER_BIT;const Qt=[],Ln=Ve.stencilBuffer?r.DEPTH_STENCIL_ATTACHMENT:r.DEPTH_ATTACHMENT,on=i.get(Ve),yn=!0===Ve.isWebGLMultipleRenderTargets;if(yn)for(let er=0;er<Ce.length;er++)n.bindFramebuffer(r.FRAMEBUFFER,on.__webglMultisampledFramebuffer),r.framebufferRenderbuffer(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0+er,r.RENDERBUFFER,null),n.bindFramebuffer(r.FRAMEBUFFER,on.__webglFramebuffer),r.framebufferTexture2D(r.DRAW_FRAMEBUFFER,r.COLOR_ATTACHMENT0+er,r.TEXTURE_2D,null,0);n.bindFramebuffer(r.READ_FRAMEBUFFER,on.__webglMultisampledFramebuffer),n.bindFramebuffer(r.DRAW_FRAMEBUFFER,on.__webglFramebuffer);for(let er=0;er<Ce.length;er++){Qt.push(r.COLOR_ATTACHMENT0+er),Ve.depthBuffer&&Qt.push(Ln);const zr=void 0!==on.__ignoreDepthValues&&on.__ignoreDepthValues;if(!1===zr&&(Ve.depthBuffer&&(Vt|=r.DEPTH_BUFFER_BIT),Ve.stencilBuffer&&(Vt|=r.STENCIL_BUFFER_BIT)),yn&&r.framebufferRenderbuffer(r.READ_FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.RENDERBUFFER,on.__webglColorRenderbuffer[er]),!0===zr&&(r.invalidateFramebuffer(r.READ_FRAMEBUFFER,[Ln]),r.invalidateFramebuffer(r.DRAW_FRAMEBUFFER,[Ln])),yn){const en=i.get(Ce[er]).__webglTexture;r.framebufferTexture2D(r.DRAW_FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.TEXTURE_2D,en,0)}r.blitFramebuffer(0,0,ft,Zt,0,0,ft,Zt,Vt,r.NEAREST),G&&r.invalidateFramebuffer(r.READ_FRAMEBUFFER,Qt)}if(n.bindFramebuffer(r.READ_FRAMEBUFFER,null),n.bindFramebuffer(r.DRAW_FRAMEBUFFER,null),yn)for(let er=0;er<Ce.length;er++){n.bindFramebuffer(r.FRAMEBUFFER,on.__webglMultisampledFramebuffer),r.framebufferRenderbuffer(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0+er,r.RENDERBUFFER,on.__webglColorRenderbuffer[er]);const zr=i.get(Ce[er]).__webglTexture;n.bindFramebuffer(r.FRAMEBUFFER,on.__webglFramebuffer),r.framebufferTexture2D(r.DRAW_FRAMEBUFFER,r.COLOR_ATTACHMENT0+er,r.TEXTURE_2D,zr,0)}n.bindFramebuffer(r.DRAW_FRAMEBUFFER,on.__webglMultisampledFramebuffer)}},this.setupDepthRenderbuffer=Tt,this.setupFrameBufferTexture=Xn,this.useMultisampledRTT=ar}function dY(r,t,n){const i=n.isWebGL2;return{convert:function s(o,a=""){let c;const u=ti.getTransfer(a);if(o===Ul)return r.UNSIGNED_BYTE;if(1017===o)return r.UNSIGNED_SHORT_4_4_4_4;if(1018===o)return r.UNSIGNED_SHORT_5_5_5_1;if(1010===o)return r.BYTE;if(1011===o)return r.SHORT;if(1012===o)return r.UNSIGNED_SHORT;if(1013===o)return r.INT;if(o===Bl)return r.UNSIGNED_INT;if(o===Ja)return r.FLOAT;if(o===Hf)return i?r.HALF_FLOAT:(c=t.get("OES_texture_half_float"),null!==c?c.HALF_FLOAT_OES:null);if(1021===o)return r.ALPHA;if(o===Bo)return r.RGBA;if(1024===o)return r.LUMINANCE;if(1025===o)return r.LUMINANCE_ALPHA;if(o===Ic)return r.DEPTH_COMPONENT;if(o===Ad)return r.DEPTH_STENCIL;if(1035===o)return c=t.get("EXT_sRGB"),null!==c?c.SRGB_ALPHA_EXT:null;if(1028===o)return r.RED;if(1029===o)return r.RED_INTEGER;if(1030===o)return r.RG;if(1031===o)return r.RG_INTEGER;if(1033===o)return r.RGBA_INTEGER;if(33776===o||33777===o||33778===o||33779===o)if(u===yi){if(c=t.get("WEBGL_compressed_texture_s3tc_srgb"),null===c)return null;if(33776===o)return c.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(33777===o)return c.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(33778===o)return c.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(33779===o)return c.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else{if(c=t.get("WEBGL_compressed_texture_s3tc"),null===c)return null;if(33776===o)return c.COMPRESSED_RGB_S3TC_DXT1_EXT;if(33777===o)return c.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(33778===o)return c.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(33779===o)return c.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(35840===o||35841===o||35842===o||35843===o){if(c=t.get("WEBGL_compressed_texture_pvrtc"),null===c)return null;if(35840===o)return c.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(35841===o)return c.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(35842===o)return c.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(35843===o)return c.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(36196===o)return c=t.get("WEBGL_compressed_texture_etc1"),null!==c?c.COMPRESSED_RGB_ETC1_WEBGL:null;if(37492===o||37496===o){if(c=t.get("WEBGL_compressed_texture_etc"),null===c)return null;if(37492===o)return u===yi?c.COMPRESSED_SRGB8_ETC2:c.COMPRESSED_RGB8_ETC2;if(37496===o)return u===yi?c.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:c.COMPRESSED_RGBA8_ETC2_EAC}if(37808===o||37809===o||37810===o||37811===o||37812===o||37813===o||37814===o||37815===o||37816===o||37817===o||37818===o||37819===o||37820===o||37821===o){if(c=t.get("WEBGL_compressed_texture_astc"),null===c)return null;if(37808===o)return u===yi?c.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:c.COMPRESSED_RGBA_ASTC_4x4_KHR;if(37809===o)return u===yi?c.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:c.COMPRESSED_RGBA_ASTC_5x4_KHR;if(37810===o)return u===yi?c.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:c.COMPRESSED_RGBA_ASTC_5x5_KHR;if(37811===o)return u===yi?c.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:c.COMPRESSED_RGBA_ASTC_6x5_KHR;if(37812===o)return u===yi?c.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:c.COMPRESSED_RGBA_ASTC_6x6_KHR;if(37813===o)return u===yi?c.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:c.COMPRESSED_RGBA_ASTC_8x5_KHR;if(37814===o)return u===yi?c.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:c.COMPRESSED_RGBA_ASTC_8x6_KHR;if(37815===o)return u===yi?c.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:c.COMPRESSED_RGBA_ASTC_8x8_KHR;if(37816===o)return u===yi?c.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:c.COMPRESSED_RGBA_ASTC_10x5_KHR;if(37817===o)return u===yi?c.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:c.COMPRESSED_RGBA_ASTC_10x6_KHR;if(37818===o)return u===yi?c.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:c.COMPRESSED_RGBA_ASTC_10x8_KHR;if(37819===o)return u===yi?c.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:c.COMPRESSED_RGBA_ASTC_10x10_KHR;if(37820===o)return u===yi?c.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:c.COMPRESSED_RGBA_ASTC_12x10_KHR;if(37821===o)return u===yi?c.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:c.COMPRESSED_RGBA_ASTC_12x12_KHR}if(36492===o||36494===o||36495===o){if(c=t.get("EXT_texture_compression_bptc"),null===c)return null;if(36492===o)return u===yi?c.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:c.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(36494===o)return c.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(36495===o)return c.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}if(36283===o||36284===o||36285===o||36286===o){if(c=t.get("EXT_texture_compression_rgtc"),null===c)return null;if(36492===o)return c.COMPRESSED_RED_RGTC1_EXT;if(36284===o)return c.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(36285===o)return c.COMPRESSED_RED_GREEN_RGTC2_EXT;if(36286===o)return c.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}return o===Dc?i?r.UNSIGNED_INT_24_8:(c=t.get("WEBGL_depth_texture"),null!==c?c.UNSIGNED_INT_24_8_WEBGL:null):void 0!==r[o]?r[o]:null}}}class hY extends Ss{constructor(t=[]){super(),this.isArrayCamera=!0,this.cameras=t}}class tp extends xi{constructor(){super(),this.isGroup=!0,this.type="Group"}}const fY={type:"move"};class xx{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return null===this._hand&&(this._hand=new tp,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return null===this._targetRay&&(this._targetRay=new tp,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new ke,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new ke),this._targetRay}getGripSpace(){return null===this._grip&&(this._grip=new tp,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new ke,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new ke),this._grip}dispatchEvent(t){return null!==this._targetRay&&this._targetRay.dispatchEvent(t),null!==this._grip&&this._grip.dispatchEvent(t),null!==this._hand&&this._hand.dispatchEvent(t),this}connect(t){if(t&&t.hand){const n=this._hand;if(n)for(const i of t.hand.values())this._getHandJoint(n,i)}return this.dispatchEvent({type:"connected",data:t}),this}disconnect(t){return this.dispatchEvent({type:"disconnected",data:t}),null!==this._targetRay&&(this._targetRay.visible=!1),null!==this._grip&&(this._grip.visible=!1),null!==this._hand&&(this._hand.visible=!1),this}update(t,n,i){let s=null,o=null,a=null;const c=this._targetRay,u=this._grip,_=this._hand;if(t&&"visible-blurred"!==n.session.visibilityState){if(_&&t.hand){a=!0;for(const ne of t.hand.values()){const ee=n.getJointPose(ne,i),Q=this._getHandJoint(_,ne);null!==ee&&(Q.matrix.fromArray(ee.transform.matrix),Q.matrix.decompose(Q.position,Q.rotation,Q.scale),Q.matrixWorldNeedsUpdate=!0,Q.jointRadius=ee.radius),Q.visible=null!==ee}const B=_.joints["index-finger-tip"].position.distanceTo(_.joints["thumb-tip"].position),G=.02,Y=.005;_.inputState.pinching&&B>G+Y?(_.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:t.handedness,target:this})):!_.inputState.pinching&&B<=G-Y&&(_.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:t.handedness,target:this}))}else null!==u&&t.gripSpace&&(o=n.getPose(t.gripSpace,i),null!==o&&(u.matrix.fromArray(o.transform.matrix),u.matrix.decompose(u.position,u.rotation,u.scale),u.matrixWorldNeedsUpdate=!0,o.linearVelocity?(u.hasLinearVelocity=!0,u.linearVelocity.copy(o.linearVelocity)):u.hasLinearVelocity=!1,o.angularVelocity?(u.hasAngularVelocity=!0,u.angularVelocity.copy(o.angularVelocity)):u.hasAngularVelocity=!1));null!==c&&(s=n.getPose(t.targetRaySpace,i),null===s&&null!==o&&(s=o),null!==s&&(c.matrix.fromArray(s.transform.matrix),c.matrix.decompose(c.position,c.rotation,c.scale),c.matrixWorldNeedsUpdate=!0,s.linearVelocity?(c.hasLinearVelocity=!0,c.linearVelocity.copy(s.linearVelocity)):c.hasLinearVelocity=!1,s.angularVelocity?(c.hasAngularVelocity=!0,c.angularVelocity.copy(s.angularVelocity)):c.hasAngularVelocity=!1,this.dispatchEvent(fY)))}return null!==c&&(c.visible=null!==s),null!==u&&(u.visible=null!==o),null!==_&&(_.visible=null!==a),this}_getHandJoint(t,n){if(void 0===t.joints[n.jointName]){const i=new tp;i.matrixAutoUpdate=!1,i.visible=!1,t.joints[n.jointName]=i,t.add(i)}return t.joints[n.jointName]}}class pY extends Mo{constructor(t,n,i,s,o,a,c,u,_,A){if((A=void 0!==A?A:Ic)!==Ic&&A!==Ad)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===i&&A===Ic&&(i=Bl),void 0===i&&A===Ad&&(i=Dc),super(null,s,o,a,c,u,A,i,_),this.isDepthTexture=!0,this.image={width:t,height:n},this.magFilter=void 0!==c?c:Xi,this.minFilter=void 0!==u?u:Xi,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(t){return super.copy(t),this.compareFunction=t.compareFunction,this}toJSON(t){const n=super.toJSON(t);return null!==this.compareFunction&&(n.compareFunction=this.compareFunction),n}}class mY extends Vl{constructor(t,n){super();const i=this;let s=null,o=1,a=null,c="local-floor",u=1,_=null,A=null,O=null,B=null,G=null,Y=null;const ne=n.getContextAttributes();let ee=null,Q=null;const ue=[],ce=[],ye=new Ss;ye.layers.enable(1),ye.viewport=new ni;const Ee=new Ss;Ee.layers.enable(2),Ee.viewport=new ni;const Le=[ye,Ee],Fe=new hY;Fe.layers.enable(1),Fe.layers.enable(2);let Xe=null,Me=null;function Ne(st){const Et=ce.indexOf(st.inputSource);if(-1===Et)return;const mn=ue[Et];void 0!==mn&&(mn.update(st.inputSource,st.frame,_||a),mn.dispatchEvent({type:st.type,data:st.inputSource}))}function dt(){s.removeEventListener("select",Ne),s.removeEventListener("selectstart",Ne),s.removeEventListener("selectend",Ne),s.removeEventListener("squeeze",Ne),s.removeEventListener("squeezestart",Ne),s.removeEventListener("squeezeend",Ne),s.removeEventListener("end",dt),s.removeEventListener("inputsourceschange",It);for(let st=0;st<ue.length;st++){const Et=ce[st];null!==Et&&(ce[st]=null,ue[st].disconnect(Et))}Xe=null,Me=null,t.setRenderTarget(ee),G=null,B=null,O=null,s=null,Q=null,Bt.stop(),i.isPresenting=!1,i.dispatchEvent({type:"sessionend"})}function It(st){for(let Et=0;Et<st.removed.length;Et++){const mn=st.removed[Et],wn=ce.indexOf(mn);wn>=0&&(ce[wn]=null,ue[wn].disconnect(mn))}for(let Et=0;Et<st.added.length;Et++){const mn=st.added[Et];let wn=ce.indexOf(mn);if(-1===wn){for(let qn=0;qn<ue.length;qn++){if(qn>=ce.length){ce.push(mn),wn=qn;break}if(null===ce[qn]){ce[qn]=mn,wn=qn;break}}if(-1===wn)break}const Cn=ue[wn];Cn&&Cn.connect(mn)}}this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(st){let Et=ue[st];return void 0===Et&&(Et=new xx,ue[st]=Et),Et.getTargetRaySpace()},this.getControllerGrip=function(st){let Et=ue[st];return void 0===Et&&(Et=new xx,ue[st]=Et),Et.getGripSpace()},this.getHand=function(st){let Et=ue[st];return void 0===Et&&(Et=new xx,ue[st]=Et),Et.getHandSpace()},this.setFramebufferScaleFactor=function(st){o=st,!0===i.isPresenting&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(st){c=st,!0===i.isPresenting&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return _||a},this.setReferenceSpace=function(st){_=st},this.getBaseLayer=function(){return null!==B?B:G},this.getBinding=function(){return O},this.getFrame=function(){return Y},this.getSession=function(){return s},this.setSession=function(){var st=Cd(function*(Et){if(s=Et,null!==s){if(ee=t.getRenderTarget(),s.addEventListener("select",Ne),s.addEventListener("selectstart",Ne),s.addEventListener("selectend",Ne),s.addEventListener("squeeze",Ne),s.addEventListener("squeezestart",Ne),s.addEventListener("squeezeend",Ne),s.addEventListener("end",dt),s.addEventListener("inputsourceschange",It),!0!==ne.xrCompatible&&(yield n.makeXRCompatible()),void 0===s.renderState.layers||!1===t.capabilities.isWebGL2)G=new XRWebGLLayer(s,n,{antialias:void 0!==s.renderState.layers||ne.antialias,alpha:!0,depth:ne.depth,stencil:ne.stencil,framebufferScaleFactor:o}),s.updateRenderState({baseLayer:G}),Q=new Ea(G.framebufferWidth,G.framebufferHeight,{format:Bo,type:Ul,colorSpace:t.outputColorSpace,stencilBuffer:ne.stencil});else{let mn=null,wn=null,Cn=null;ne.depth&&(Cn=ne.stencil?n.DEPTH24_STENCIL8:n.DEPTH_COMPONENT24,mn=ne.stencil?Ad:Ic,wn=ne.stencil?Dc:Bl);const qn={colorFormat:n.RGBA8,depthFormat:Cn,scaleFactor:o};O=new XRWebGLBinding(s,n),B=O.createProjectionLayer(qn),s.updateRenderState({layers:[B]}),Q=new Ea(B.textureWidth,B.textureHeight,{format:Bo,type:Ul,depthTexture:new pY(B.textureWidth,B.textureHeight,wn,void 0,void 0,void 0,void 0,void 0,void 0,mn),stencilBuffer:ne.stencil,colorSpace:t.outputColorSpace,samples:ne.antialias?4:0}),t.properties.get(Q).__ignoreDepthValues=B.ignoreDepthValues}Q.isXRRenderTarget=!0,this.setFoveation(u),_=null,a=yield s.requestReferenceSpace(c),Bt.setContext(s),Bt.start(),i.isPresenting=!0,i.dispatchEvent({type:"sessionstart"})}});return function(Et){return st.apply(this,arguments)}}(),this.getEnvironmentBlendMode=function(){if(null!==s)return s.environmentBlendMode};const Ut=new ke,Qe=new ke;function At(st,Et){null===Et?st.matrixWorld.copy(st.matrix):st.matrixWorld.multiplyMatrices(Et.matrixWorld,st.matrix),st.matrixWorldInverse.copy(st.matrixWorld).invert()}this.updateCamera=function(st){if(null===s)return;Fe.near=Ee.near=ye.near=st.near,Fe.far=Ee.far=ye.far=st.far,(Xe!==Fe.near||Me!==Fe.far)&&(s.updateRenderState({depthNear:Fe.near,depthFar:Fe.far}),Xe=Fe.near,Me=Fe.far);const Et=st.parent,mn=Fe.cameras;At(Fe,Et);for(let wn=0;wn<mn.length;wn++)At(mn[wn],Et);2===mn.length?function mt(st,Et,mn){Ut.setFromMatrixPosition(Et.matrixWorld),Qe.setFromMatrixPosition(mn.matrixWorld);const wn=Ut.distanceTo(Qe),Cn=Et.projectionMatrix.elements,qn=mn.projectionMatrix.elements,Jn=Cn[14]/(Cn[10]-1),$n=Cn[14]/(Cn[10]+1),ur=(Cn[9]+1)/Cn[5],kr=(Cn[9]-1)/Cn[5],Xn=(Cn[8]-1)/Cn[0],$e=(qn[8]+1)/qn[0],dn=Jn*Xn,Tt=Jn*$e,Yt=wn/(-Xn+$e),Ft=Yt*-Xn;Et.matrixWorld.decompose(st.position,st.quaternion,st.scale),st.translateX(Ft),st.translateZ(Yt),st.matrixWorld.compose(st.position,st.quaternion,st.scale),st.matrixWorldInverse.copy(st.matrixWorld).invert();const kn=Jn+Yt,bn=$n+Yt;st.projectionMatrix.makePerspective(dn-Ft,Tt+(wn-Ft),ur*$n/bn*kn,kr*$n/bn*kn,kn,bn),st.projectionMatrixInverse.copy(st.projectionMatrix).invert()}(Fe,ye,Ee):Fe.projectionMatrix.copy(ye.projectionMatrix),function Ct(st,Et,mn){null===mn?st.matrix.copy(Et.matrixWorld):(st.matrix.copy(mn.matrixWorld),st.matrix.invert(),st.matrix.multiply(Et.matrixWorld)),st.matrix.decompose(st.position,st.quaternion,st.scale),st.updateMatrixWorld(!0),st.projectionMatrix.copy(Et.projectionMatrix),st.projectionMatrixInverse.copy(Et.projectionMatrixInverse),st.isPerspectiveCamera&&(st.fov=2*Rd*Math.atan(1/st.projectionMatrix.elements[5]),st.zoom=1)}(st,Fe,Et)},this.getCamera=function(){return Fe},this.getFoveation=function(){if(null!==B||null!==G)return u},this.setFoveation=function(st){u=st,null!==B&&(B.fixedFoveation=st),null!==G&&void 0!==G.fixedFoveation&&(G.fixedFoveation=st)};let Jt=null;const Bt=new NR;Bt.setAnimationLoop(function Rt(st,Et){if(A=Et.getViewerPose(_||a),Y=Et,null!==A){const mn=A.views;null!==G&&(t.setRenderTargetFramebuffer(Q,G.framebuffer),t.setRenderTarget(Q));let wn=!1;mn.length!==Fe.cameras.length&&(Fe.cameras.length=0,wn=!0);for(let Cn=0;Cn<mn.length;Cn++){const qn=mn[Cn];let Jn=null;if(null!==G)Jn=G.getViewport(qn);else{const ur=O.getViewSubImage(B,qn);Jn=ur.viewport,0===Cn&&(t.setRenderTargetTextures(Q,ur.colorTexture,B.ignoreDepthValues?void 0:ur.depthStencilTexture),t.setRenderTarget(Q))}let $n=Le[Cn];void 0===$n&&($n=new Ss,$n.layers.enable(Cn),$n.viewport=new ni,Le[Cn]=$n),$n.matrix.fromArray(qn.transform.matrix),$n.matrix.decompose($n.position,$n.quaternion,$n.scale),$n.projectionMatrix.fromArray(qn.projectionMatrix),$n.projectionMatrixInverse.copy($n.projectionMatrix).invert(),$n.viewport.set(Jn.x,Jn.y,Jn.width,Jn.height),0===Cn&&(Fe.matrix.copy($n.matrix),Fe.matrix.decompose(Fe.position,Fe.quaternion,Fe.scale)),!0===wn&&Fe.cameras.push($n)}}for(let mn=0;mn<ue.length;mn++){const wn=ce[mn],Cn=ue[mn];null!==wn&&void 0!==Cn&&Cn.update(wn,Et,_||a)}Jt&&Jt(st,Et),Et.detectedPlanes&&i.dispatchEvent({type:"planesdetected",data:Et}),Y=null}),this.setAnimationLoop=function(st){Jt=st},this.dispose=function(){}}}function gY(r,t){function n(ee,Q){!0===ee.matrixAutoUpdate&&ee.updateMatrix(),Q.value.copy(ee.matrix)}function o(ee,Q){ee.opacity.value=Q.opacity,Q.color&&ee.diffuse.value.copy(Q.color),Q.emissive&&ee.emissive.value.copy(Q.emissive).multiplyScalar(Q.emissiveIntensity),Q.map&&(ee.map.value=Q.map,n(Q.map,ee.mapTransform)),Q.alphaMap&&(ee.alphaMap.value=Q.alphaMap,n(Q.alphaMap,ee.alphaMapTransform)),Q.bumpMap&&(ee.bumpMap.value=Q.bumpMap,n(Q.bumpMap,ee.bumpMapTransform),ee.bumpScale.value=Q.bumpScale,1===Q.side&&(ee.bumpScale.value*=-1)),Q.normalMap&&(ee.normalMap.value=Q.normalMap,n(Q.normalMap,ee.normalMapTransform),ee.normalScale.value.copy(Q.normalScale),1===Q.side&&ee.normalScale.value.negate()),Q.displacementMap&&(ee.displacementMap.value=Q.displacementMap,n(Q.displacementMap,ee.displacementMapTransform),ee.displacementScale.value=Q.displacementScale,ee.displacementBias.value=Q.displacementBias),Q.emissiveMap&&(ee.emissiveMap.value=Q.emissiveMap,n(Q.emissiveMap,ee.emissiveMapTransform)),Q.specularMap&&(ee.specularMap.value=Q.specularMap,n(Q.specularMap,ee.specularMapTransform)),Q.alphaTest>0&&(ee.alphaTest.value=Q.alphaTest);const ue=t.get(Q).envMap;if(ue&&(ee.envMap.value=ue,ee.flipEnvMap.value=ue.isCubeTexture&&!1===ue.isRenderTargetTexture?-1:1,ee.reflectivity.value=Q.reflectivity,ee.ior.value=Q.ior,ee.refractionRatio.value=Q.refractionRatio),Q.lightMap){ee.lightMap.value=Q.lightMap;const ce=!0===r._useLegacyLights?Math.PI:1;ee.lightMapIntensity.value=Q.lightMapIntensity*ce,n(Q.lightMap,ee.lightMapTransform)}Q.aoMap&&(ee.aoMap.value=Q.aoMap,ee.aoMapIntensity.value=Q.aoMapIntensity,n(Q.aoMap,ee.aoMapTransform))}return{refreshFogUniforms:function i(ee,Q){Q.color.getRGB(ee.fogColor.value,jR(r)),Q.isFog?(ee.fogNear.value=Q.near,ee.fogFar.value=Q.far):Q.isFogExp2&&(ee.fogDensity.value=Q.density)},refreshMaterialUniforms:function s(ee,Q,ue,ce,ye){Q.isMeshBasicMaterial||Q.isMeshLambertMaterial?o(ee,Q):Q.isMeshToonMaterial?(o(ee,Q),function O(ee,Q){Q.gradientMap&&(ee.gradientMap.value=Q.gradientMap)}(ee,Q)):Q.isMeshPhongMaterial?(o(ee,Q),function A(ee,Q){ee.specular.value.copy(Q.specular),ee.shininess.value=Math.max(Q.shininess,1e-4)}(ee,Q)):Q.isMeshStandardMaterial?(o(ee,Q),function B(ee,Q){ee.metalness.value=Q.metalness,Q.metalnessMap&&(ee.metalnessMap.value=Q.metalnessMap,n(Q.metalnessMap,ee.metalnessMapTransform)),ee.roughness.value=Q.roughness,Q.roughnessMap&&(ee.roughnessMap.value=Q.roughnessMap,n(Q.roughnessMap,ee.roughnessMapTransform)),t.get(Q).envMap&&(ee.envMapIntensity.value=Q.envMapIntensity)}(ee,Q),Q.isMeshPhysicalMaterial&&function G(ee,Q,ue){ee.ior.value=Q.ior,Q.sheen>0&&(ee.sheenColor.value.copy(Q.sheenColor).multiplyScalar(Q.sheen),ee.sheenRoughness.value=Q.sheenRoughness,Q.sheenColorMap&&(ee.sheenColorMap.value=Q.sheenColorMap,n(Q.sheenColorMap,ee.sheenColorMapTransform)),Q.sheenRoughnessMap&&(ee.sheenRoughnessMap.value=Q.sheenRoughnessMap,n(Q.sheenRoughnessMap,ee.sheenRoughnessMapTransform))),Q.clearcoat>0&&(ee.clearcoat.value=Q.clearcoat,ee.clearcoatRoughness.value=Q.clearcoatRoughness,Q.clearcoatMap&&(ee.clearcoatMap.value=Q.clearcoatMap,n(Q.clearcoatMap,ee.clearcoatMapTransform)),Q.clearcoatRoughnessMap&&(ee.clearcoatRoughnessMap.value=Q.clearcoatRoughnessMap,n(Q.clearcoatRoughnessMap,ee.clearcoatRoughnessMapTransform)),Q.clearcoatNormalMap&&(ee.clearcoatNormalMap.value=Q.clearcoatNormalMap,n(Q.clearcoatNormalMap,ee.clearcoatNormalMapTransform),ee.clearcoatNormalScale.value.copy(Q.clearcoatNormalScale),1===Q.side&&ee.clearcoatNormalScale.value.negate())),Q.iridescence>0&&(ee.iridescence.value=Q.iridescence,ee.iridescenceIOR.value=Q.iridescenceIOR,ee.iridescenceThicknessMinimum.value=Q.iridescenceThicknessRange[0],ee.iridescenceThicknessMaximum.value=Q.iridescenceThicknessRange[1],Q.iridescenceMap&&(ee.iridescenceMap.value=Q.iridescenceMap,n(Q.iridescenceMap,ee.iridescenceMapTransform)),Q.iridescenceThicknessMap&&(ee.iridescenceThicknessMap.value=Q.iridescenceThicknessMap,n(Q.iridescenceThicknessMap,ee.iridescenceThicknessMapTransform))),Q.transmission>0&&(ee.transmission.value=Q.transmission,ee.transmissionSamplerMap.value=ue.texture,ee.transmissionSamplerSize.value.set(ue.width,ue.height),Q.transmissionMap&&(ee.transmissionMap.value=Q.transmissionMap,n(Q.transmissionMap,ee.transmissionMapTransform)),ee.thickness.value=Q.thickness,Q.thicknessMap&&(ee.thicknessMap.value=Q.thicknessMap,n(Q.thicknessMap,ee.thicknessMapTransform)),ee.attenuationDistance.value=Q.attenuationDistance,ee.attenuationColor.value.copy(Q.attenuationColor)),Q.anisotropy>0&&(ee.anisotropyVector.value.set(Q.anisotropy*Math.cos(Q.anisotropyRotation),Q.anisotropy*Math.sin(Q.anisotropyRotation)),Q.anisotropyMap&&(ee.anisotropyMap.value=Q.anisotropyMap,n(Q.anisotropyMap,ee.anisotropyMapTransform))),ee.specularIntensity.value=Q.specularIntensity,ee.specularColor.value.copy(Q.specularColor),Q.specularColorMap&&(ee.specularColorMap.value=Q.specularColorMap,n(Q.specularColorMap,ee.specularColorMapTransform)),Q.specularIntensityMap&&(ee.specularIntensityMap.value=Q.specularIntensityMap,n(Q.specularIntensityMap,ee.specularIntensityMapTransform))}(ee,Q,ye)):Q.isMeshMatcapMaterial?(o(ee,Q),function Y(ee,Q){Q.matcap&&(ee.matcap.value=Q.matcap)}(ee,Q)):Q.isMeshDepthMaterial?o(ee,Q):Q.isMeshDistanceMaterial?(o(ee,Q),function ne(ee,Q){const ue=t.get(Q).light;ee.referencePosition.value.setFromMatrixPosition(ue.matrixWorld),ee.nearDistance.value=ue.shadow.camera.near,ee.farDistance.value=ue.shadow.camera.far}(ee,Q)):Q.isMeshNormalMaterial?o(ee,Q):Q.isLineBasicMaterial?(function a(ee,Q){ee.diffuse.value.copy(Q.color),ee.opacity.value=Q.opacity,Q.map&&(ee.map.value=Q.map,n(Q.map,ee.mapTransform))}(ee,Q),Q.isLineDashedMaterial&&function c(ee,Q){ee.dashSize.value=Q.dashSize,ee.totalSize.value=Q.dashSize+Q.gapSize,ee.scale.value=Q.scale}(ee,Q)):Q.isPointsMaterial?function u(ee,Q,ue,ce){ee.diffuse.value.copy(Q.color),ee.opacity.value=Q.opacity,ee.size.value=Q.size*ue,ee.scale.value=.5*ce,Q.map&&(ee.map.value=Q.map,n(Q.map,ee.uvTransform)),Q.alphaMap&&(ee.alphaMap.value=Q.alphaMap,n(Q.alphaMap,ee.alphaMapTransform)),Q.alphaTest>0&&(ee.alphaTest.value=Q.alphaTest)}(ee,Q,ue,ce):Q.isSpriteMaterial?function _(ee,Q){ee.diffuse.value.copy(Q.color),ee.opacity.value=Q.opacity,ee.rotation.value=Q.rotation,Q.map&&(ee.map.value=Q.map,n(Q.map,ee.mapTransform)),Q.alphaMap&&(ee.alphaMap.value=Q.alphaMap,n(Q.alphaMap,ee.alphaMapTransform)),Q.alphaTest>0&&(ee.alphaTest.value=Q.alphaTest)}(ee,Q):Q.isShadowMaterial?(ee.color.value.copy(Q.color),ee.opacity.value=Q.opacity):Q.isShaderMaterial&&(Q.uniformsNeedUpdate=!1)}}}function yY(r,t,n,i){let s={},o={},a=[];const c=n.isWebGL2?r.getParameter(r.MAX_UNIFORM_BUFFER_BINDINGS):0;function G(ue,ce,ye){const Ee=ue.value;if(void 0===ye[ce]){if("number"==typeof Ee)ye[ce]=Ee;else{const Le=Array.isArray(Ee)?Ee:[Ee],Fe=[];for(let Xe=0;Xe<Le.length;Xe++)Fe.push(Le[Xe].clone());ye[ce]=Fe}return!0}if("number"==typeof Ee){if(ye[ce]!==Ee)return ye[ce]=Ee,!0}else{const Le=Array.isArray(ye[ce])?ye[ce]:[ye[ce]],Fe=Array.isArray(Ee)?Ee:[Ee];for(let Xe=0;Xe<Le.length;Xe++){const Me=Le[Xe];if(!1===Me.equals(Fe[Xe]))return Me.copy(Fe[Xe]),!0}}return!1}function ne(ue){const ce={boundary:0,storage:0};return"number"==typeof ue?(ce.boundary=4,ce.storage=4):ue.isVector2?(ce.boundary=8,ce.storage=8):ue.isVector3||ue.isColor?(ce.boundary=16,ce.storage=12):ue.isVector4?(ce.boundary=16,ce.storage=16):ue.isMatrix3?(ce.boundary=48,ce.storage=48):ue.isMatrix4?(ce.boundary=64,ce.storage=64):ue.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",ue),ce}function ee(ue){const ce=ue.target;ce.removeEventListener("dispose",ee);const ye=a.indexOf(ce.__bindingPointIndex);a.splice(ye,1),r.deleteBuffer(s[ce.id]),delete s[ce.id],delete o[ce.id]}return{bind:function u(ue,ce){i.uniformBlockBinding(ue,ce.program)},update:function _(ue,ce){let ye=s[ue.id];void 0===ye&&(function Y(ue){const ce=ue.uniforms;let ye=0;let Le=0;for(let Fe=0,Xe=ce.length;Fe<Xe;Fe++){const Me=ce[Fe],Ne={boundary:0,storage:0},dt=Array.isArray(Me.value)?Me.value:[Me.value];for(let It=0,Ut=dt.length;It<Ut;It++){const mt=ne(dt[It]);Ne.boundary+=mt.boundary,Ne.storage+=mt.storage}Me.__data=new Float32Array(Ne.storage/Float32Array.BYTES_PER_ELEMENT),Me.__offset=ye,Fe>0&&(Le=ye%16,0!==Le&&16-Le-Ne.boundary<0&&(ye+=16-Le,Me.__offset=ye)),ye+=Ne.storage}Le=ye%16,Le>0&&(ye+=16-Le),ue.__size=ye,ue.__cache={}}(ue),ye=function A(ue){const ce=function O(){for(let ue=0;ue<c;ue++)if(-1===a.indexOf(ue))return a.push(ue),ue;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}();ue.__bindingPointIndex=ce;const ye=r.createBuffer(),Ee=ue.__size,Le=ue.usage;return r.bindBuffer(r.UNIFORM_BUFFER,ye),r.bufferData(r.UNIFORM_BUFFER,Ee,Le),r.bindBuffer(r.UNIFORM_BUFFER,null),r.bindBufferBase(r.UNIFORM_BUFFER,ce,ye),ye}(ue),s[ue.id]=ye,ue.addEventListener("dispose",ee)),i.updateUBOMapping(ue,ce.program);const Le=t.render.frame;o[ue.id]!==Le&&(function B(ue){const ye=ue.uniforms,Ee=ue.__cache;r.bindBuffer(r.UNIFORM_BUFFER,s[ue.id]);for(let Le=0,Fe=ye.length;Le<Fe;Le++){const Xe=ye[Le];if(!0===G(Xe,Le,Ee)){const Me=Xe.__offset,Ne=Array.isArray(Xe.value)?Xe.value:[Xe.value];let dt=0;for(let It=0;It<Ne.length;It++){const Ut=Ne[It],Qe=ne(Ut);"number"==typeof Ut?(Xe.__data[0]=Ut,r.bufferSubData(r.UNIFORM_BUFFER,Me+dt,Xe.__data)):Ut.isMatrix3?(Xe.__data[0]=Ut.elements[0],Xe.__data[1]=Ut.elements[1],Xe.__data[2]=Ut.elements[2],Xe.__data[3]=Ut.elements[0],Xe.__data[4]=Ut.elements[3],Xe.__data[5]=Ut.elements[4],Xe.__data[6]=Ut.elements[5],Xe.__data[7]=Ut.elements[0],Xe.__data[8]=Ut.elements[6],Xe.__data[9]=Ut.elements[7],Xe.__data[10]=Ut.elements[8],Xe.__data[11]=Ut.elements[0]):(Ut.toArray(Xe.__data,dt),dt+=Qe.storage/Float32Array.BYTES_PER_ELEMENT)}r.bufferSubData(r.UNIFORM_BUFFER,Me,Xe.__data)}}r.bindBuffer(r.UNIFORM_BUFFER,null)}(ue),o[ue.id]=Le)},dispose:function Q(){for(const ue in s)r.deleteBuffer(s[ue]);a=[],s={},o={}}}}class dO{constructor(t={}){const{canvas:n=Z7(),context:i=null,depth:s=!0,stencil:o=!0,alpha:a=!1,antialias:c=!1,premultipliedAlpha:u=!0,preserveDrawingBuffer:_=!1,powerPreference:A="default",failIfMajorPerformanceCaveat:O=!1}=t;let B;this.isWebGLRenderer=!0,B=null!==i?i.getContextAttributes().alpha:a;const G=new Uint32Array(4),Y=new Int32Array(4);let ne=null,ee=null;const Q=[],ue=[];this.domElement=n,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this._outputColorSpace=us,this._useLegacyLights=!1,this.toneMapping=kl,this.toneMappingExposure=1;const ce=this;let ye=!1,Ee=0,Le=0,Fe=null,Xe=-1,Me=null;const Ne=new ni,dt=new ni;let It=null;const Ut=new xn(0);let Qe=0,mt=n.width,At=n.height,Ct=1,Jt=null,Rt=null;const Bt=new ni(0,0,mt,At),st=new ni(0,0,mt,At);let Et=!1;const mn=new hx;let wn=!1,Cn=!1,qn=null;const Jn=new cr,$n=new Lt,ur=new ke,kr={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function Xn(){return null===Fe?Ct:1}let Tt,Yt,Ft,kn,bn,In,ar,Mr,Ni,Ve,Ce,ft,Zt,Vt,Qt,Ln,on,yn,er,zr,en,ri,dr,tr,$e=i;function dn(Re,lt){for(let pt=0;pt<Re.length;pt++){const yt=n.getContext(Re[pt],lt);if(null!==yt)return yt}return null}try{const Re={alpha:!0,depth:s,stencil:o,antialias:c,premultipliedAlpha:u,preserveDrawingBuffer:_,powerPreference:A,failIfMajorPerformanceCaveat:O};if("setAttribute"in n&&n.setAttribute("data-engine","three.js r158"),n.addEventListener("webglcontextlost",Pr,!1),n.addEventListener("webglcontextrestored",tt,!1),n.addEventListener("webglcontextcreationerror",vn,!1),null===$e){const lt=["webgl2","webgl","experimental-webgl"];if(!0===ce.isWebGL1Renderer&&lt.shift(),$e=dn(lt,Re),null===$e)throw dn(lt)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}typeof WebGLRenderingContext<"u"&&$e instanceof WebGLRenderingContext&&console.warn("THREE.WebGLRenderer: WebGL 1 support was deprecated in r153 and will be removed in r163."),void 0===$e.getShaderPrecisionFormat&&($e.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(Re){throw console.error("THREE.WebGLRenderer: "+Re.message),Re}function Gn(){Tt=new D$($e),Yt=new S$($e,Tt,t),Tt.init(Yt),ri=new dY($e,Tt,Yt),Ft=new cY($e,Tt,Yt),kn=new R$($e),bn=new KX,In=new uY($e,Tt,Ft,bn,Yt,ri,kn),ar=new E$(ce),Mr=new A$(ce),Ni=new wW($e,Yt),dr=new x$($e,Tt,Ni,Yt),Ve=new I$($e,Ni,kn,dr),Ce=new N$($e,Ve,Ni,kn),er=new j$($e,Yt,In),Ln=new M$(bn),ft=new ZX(ce,ar,Mr,Tt,Yt,dr,Ln),Zt=new gY(ce,bn),Vt=new QX,Qt=new sY(Tt,Yt),yn=new _$(ce,ar,Mr,Ft,Ce,B,u),on=new lY(ce,Ce,Yt),tr=new yY($e,kn,Yt,Ft),zr=new w$($e,Tt,kn,Yt),en=new P$($e,Tt,kn,Yt),kn.programs=ft.programs,ce.capabilities=Yt,ce.extensions=Tt,ce.properties=bn,ce.renderLists=Vt,ce.shadowMap=on,ce.state=Ft,ce.info=kn}Gn();const En=new mY(ce,$e);function Pr(Re){Re.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),ye=!0}function tt(){console.log("THREE.WebGLRenderer: Context Restored."),ye=!1;const Re=kn.autoReset,lt=on.enabled,pt=on.autoUpdate,gt=on.needsUpdate,yt=on.type;Gn(),kn.autoReset=Re,on.enabled=lt,on.autoUpdate=pt,on.needsUpdate=gt,on.type=yt}function vn(Re){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",Re.statusMessage)}function sn(Re){const lt=Re.target;lt.removeEventListener("dispose",sn),function Mt(Re){(function an(Re){const lt=bn.get(Re).programs;void 0!==lt&&(lt.forEach(function(pt){ft.releaseProgram(pt)}),Re.isShaderMaterial&&ft.releaseShaderCache(Re))})(Re),bn.remove(Re)}(lt)}function Yn(Re,lt,pt){!0===Re.transparent&&2===Re.side&&!1===Re.forceSinglePass?(Re.side=1,Re.needsUpdate=!0,gv(Re,lt,pt),Re.side=0,Re.needsUpdate=!0,gv(Re,lt,pt),Re.side=2):gv(Re,lt,pt)}this.xr=En,this.getContext=function(){return $e},this.getContextAttributes=function(){return $e.getContextAttributes()},this.forceContextLoss=function(){const Re=Tt.get("WEBGL_lose_context");Re&&Re.loseContext()},this.forceContextRestore=function(){const Re=Tt.get("WEBGL_lose_context");Re&&Re.restoreContext()},this.getPixelRatio=function(){return Ct},this.setPixelRatio=function(Re){void 0!==Re&&(Ct=Re,this.setSize(mt,At,!1))},this.getSize=function(Re){return Re.set(mt,At)},this.setSize=function(Re,lt,pt=!0){En.isPresenting?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(mt=Re,At=lt,n.width=Math.floor(Re*Ct),n.height=Math.floor(lt*Ct),!0===pt&&(n.style.width=Re+"px",n.style.height=lt+"px"),this.setViewport(0,0,Re,lt))},this.getDrawingBufferSize=function(Re){return Re.set(mt*Ct,At*Ct).floor()},this.setDrawingBufferSize=function(Re,lt,pt){mt=Re,At=lt,Ct=pt,n.width=Math.floor(Re*pt),n.height=Math.floor(lt*pt),this.setViewport(0,0,Re,lt)},this.getCurrentViewport=function(Re){return Re.copy(Ne)},this.getViewport=function(Re){return Re.copy(Bt)},this.setViewport=function(Re,lt,pt,gt){Re.isVector4?Bt.set(Re.x,Re.y,Re.z,Re.w):Bt.set(Re,lt,pt,gt),Ft.viewport(Ne.copy(Bt).multiplyScalar(Ct).floor())},this.getScissor=function(Re){return Re.copy(st)},this.setScissor=function(Re,lt,pt,gt){Re.isVector4?st.set(Re.x,Re.y,Re.z,Re.w):st.set(Re,lt,pt,gt),Ft.scissor(dt.copy(st).multiplyScalar(Ct).floor())},this.getScissorTest=function(){return Et},this.setScissorTest=function(Re){Ft.setScissorTest(Et=Re)},this.setOpaqueSort=function(Re){Jt=Re},this.setTransparentSort=function(Re){Rt=Re},this.getClearColor=function(Re){return Re.copy(yn.getClearColor())},this.setClearColor=function(){yn.setClearColor.apply(yn,arguments)},this.getClearAlpha=function(){return yn.getClearAlpha()},this.setClearAlpha=function(){yn.setClearAlpha.apply(yn,arguments)},this.clear=function(Re=!0,lt=!0,pt=!0){let gt=0;if(Re){let yt=!1;if(null!==Fe){const Sn=Fe.texture.format;yt=1033===Sn||1031===Sn||1029===Sn}if(yt){const Sn=Fe.texture.type,jn=Sn===Ul||Sn===Bl||1012===Sn||Sn===Dc||1017===Sn||1018===Sn,Zn=yn.getClearColor(),nr=yn.getClearAlpha(),vr=Zn.r,hr=Zn.g,mr=Zn.b;jn?(G[0]=vr,G[1]=hr,G[2]=mr,G[3]=nr,$e.clearBufferuiv($e.COLOR,0,G)):(Y[0]=vr,Y[1]=hr,Y[2]=mr,Y[3]=nr,$e.clearBufferiv($e.COLOR,0,Y))}else gt|=$e.COLOR_BUFFER_BIT}lt&&(gt|=$e.DEPTH_BUFFER_BIT),pt&&(gt|=$e.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),$e.clear(gt)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){n.removeEventListener("webglcontextlost",Pr,!1),n.removeEventListener("webglcontextrestored",tt,!1),n.removeEventListener("webglcontextcreationerror",vn,!1),Vt.dispose(),Qt.dispose(),bn.dispose(),ar.dispose(),Mr.dispose(),Ce.dispose(),dr.dispose(),tr.dispose(),ft.dispose(),En.dispose(),En.removeEventListener("sessionstart",Ho),En.removeEventListener("sessionend",fi),qn&&(qn.dispose(),qn=null),Js.stop()},this.renderBufferDirect=function(Re,lt,pt,gt,yt,Sn){null===lt&&(lt=kr);const jn=yt.isMesh&&yt.matrixWorld.determinant()<0,Zn=function VK(Re,lt,pt,gt,yt){!0!==lt.isScene&&(lt=kr),In.resetTextureUnits();const Sn=lt.fog,Zn=null===Fe?ce.outputColorSpace:!0===Fe.isXRRenderTarget?Fe.texture.colorSpace:Qa,nr=(gt.isMeshStandardMaterial?Mr:ar).get(gt.envMap||(gt.isMeshStandardMaterial?lt.environment:null)),vr=!0===gt.vertexColors&&!!pt.attributes.color&&4===pt.attributes.color.itemSize,hr=!!pt.attributes.tangent&&(!!gt.normalMap||gt.anisotropy>0),mr=!!pt.morphAttributes.position,Gi=!!pt.morphAttributes.normal,Do=!!pt.morphAttributes.color;let hs=kl;gt.toneMapped&&(null===Fe||!0===Fe.isXRRenderTarget)&&(hs=ce.toneMapping);const hl=pt.morphAttributes.position||pt.morphAttributes.normal||pt.morphAttributes.color,ki=void 0!==hl?hl.length:0,Er=bn.get(gt),cw=ee.state.lights;!0!==wn||!0!==Cn&&Re===Me||Ln.setState(gt,Re,Re===Me&&gt.id===Xe);let Ji=!1;gt.version===Er.__version?(Er.needsLights&&Er.lightsStateVersion!==cw.state.version||Er.outputColorSpace!==Zn||yt.isInstancedMesh&&!1===Er.instancing||!yt.isInstancedMesh&&!0===Er.instancing||yt.isSkinnedMesh&&!1===Er.skinning||!yt.isSkinnedMesh&&!0===Er.skinning||yt.isInstancedMesh&&!0===Er.instancingColor&&null===yt.instanceColor||yt.isInstancedMesh&&!1===Er.instancingColor&&null!==yt.instanceColor||Er.envMap!==nr||!0===gt.fog&&Er.fog!==Sn||void 0!==Er.numClippingPlanes&&(Er.numClippingPlanes!==Ln.numPlanes||Er.numIntersection!==Ln.numIntersection)||Er.vertexAlphas!==vr||Er.vertexTangents!==hr||Er.morphTargets!==mr||Er.morphNormals!==Gi||Er.morphColors!==Do||Er.toneMapping!==hs||!0===Yt.isWebGL2&&Er.morphTargetsCount!==ki)&&(Ji=!0):(Ji=!0,Er.__version=gt.version);let Jc=Er.currentProgram;!0===Ji&&(Jc=gv(gt,lt,yt));let RL=!1,yp=!1,uw=!1;const Qs=Jc.getUniforms(),Qc=Er.uniforms;if(Ft.useProgram(Jc.program)&&(RL=!0,yp=!0,uw=!0),gt.id!==Xe&&(Xe=gt.id,yp=!0),RL||Me!==Re){Qs.setValue($e,"projectionMatrix",Re.projectionMatrix),Qs.setValue($e,"viewMatrix",Re.matrixWorldInverse);const Io=Qs.map.cameraPosition;void 0!==Io&&Io.setValue($e,ur.setFromMatrixPosition(Re.matrixWorld)),Yt.logarithmicDepthBuffer&&Qs.setValue($e,"logDepthBufFC",2/(Math.log(Re.far+1)/Math.LN2)),(gt.isMeshPhongMaterial||gt.isMeshToonMaterial||gt.isMeshLambertMaterial||gt.isMeshBasicMaterial||gt.isMeshStandardMaterial||gt.isShaderMaterial)&&Qs.setValue($e,"isOrthographic",!0===Re.isOrthographicCamera),Me!==Re&&(Me=Re,yp=!0,uw=!0)}if(yt.isSkinnedMesh){Qs.setOptional($e,yt,"bindMatrix"),Qs.setOptional($e,yt,"bindMatrixInverse");const Io=yt.skeleton;Io&&(Yt.floatVertexTextures?(null===Io.boneTexture&&Io.computeBoneTexture(),Qs.setValue($e,"boneTexture",Io.boneTexture,In),Qs.setValue($e,"boneTextureSize",Io.boneTextureSize)):console.warn("THREE.WebGLRenderer: SkinnedMesh can only be used with WebGL 2. With WebGL 1 OES_texture_float and vertex textures support is required."))}const dw=pt.morphAttributes;if((void 0!==dw.position||void 0!==dw.normal||void 0!==dw.color&&!0===Yt.isWebGL2)&&er.update(yt,pt,Jc),(yp||Er.receiveShadow!==yt.receiveShadow)&&(Er.receiveShadow=yt.receiveShadow,Qs.setValue($e,"receiveShadow",yt.receiveShadow)),gt.isMeshGouraudMaterial&&null!==gt.envMap&&(Qc.envMap.value=nr,Qc.flipEnvMap.value=nr.isCubeTexture&&!1===nr.isRenderTargetTexture?-1:1),yp&&(Qs.setValue($e,"toneMappingExposure",ce.toneMappingExposure),Er.needsLights&&function zK(Re,lt){Re.ambientLightColor.needsUpdate=lt,Re.lightProbe.needsUpdate=lt,Re.directionalLights.needsUpdate=lt,Re.directionalLightShadows.needsUpdate=lt,Re.pointLights.needsUpdate=lt,Re.pointLightShadows.needsUpdate=lt,Re.spotLights.needsUpdate=lt,Re.spotLightShadows.needsUpdate=lt,Re.rectAreaLights.needsUpdate=lt,Re.hemisphereLights.needsUpdate=lt}(Qc,uw),Sn&&!0===gt.fog&&Zt.refreshFogUniforms(Qc,Sn),Zt.refreshMaterialUniforms(Qc,gt,Ct,At,qn),Ly.upload($e,IL(Er),Qc,In)),gt.isShaderMaterial&&!0===gt.uniformsNeedUpdate&&(Ly.upload($e,IL(Er),Qc,In),gt.uniformsNeedUpdate=!1),gt.isSpriteMaterial&&Qs.setValue($e,"center",yt.center),Qs.setValue($e,"modelViewMatrix",yt.modelViewMatrix),Qs.setValue($e,"normalMatrix",yt.normalMatrix),Qs.setValue($e,"modelMatrix",yt.matrixWorld),gt.isShaderMaterial||gt.isRawShaderMaterial){const Io=gt.uniformsGroups;for(let hw=0,HK=Io.length;hw<HK;hw++)if(Yt.isWebGL2){const OL=Io[hw];tr.update(OL,Jc),tr.bind(OL,Jc)}else console.warn("THREE.WebGLRenderer: Uniform Buffer Objects can only be used with WebGL 2.")}return Jc}(Re,lt,pt,gt,yt);Ft.setMaterial(gt,jn);let nr=pt.index,vr=1;if(!0===gt.wireframe){if(nr=Ve.getWireframeAttribute(pt),void 0===nr)return;vr=2}const hr=pt.drawRange,mr=pt.attributes.position;let Gi=hr.start*vr,Do=(hr.start+hr.count)*vr;null!==Sn&&(Gi=Math.max(Gi,Sn.start*vr),Do=Math.min(Do,(Sn.start+Sn.count)*vr)),null!==nr?(Gi=Math.max(Gi,0),Do=Math.min(Do,nr.count)):null!=mr&&(Gi=Math.max(Gi,0),Do=Math.min(Do,mr.count));const hs=Do-Gi;if(hs<0||hs===1/0)return;dr.setup(yt,gt,Zn,pt,nr);let hl,ki=zr;if(null!==nr&&(hl=Ni.get(nr),ki=en,ki.setIndex(hl)),yt.isMesh)!0===gt.wireframe?(Ft.setLineWidth(gt.wireframeLinewidth*Xn()),ki.setMode($e.LINES)):ki.setMode($e.TRIANGLES);else if(yt.isLine){let Er=gt.linewidth;void 0===Er&&(Er=1),Ft.setLineWidth(Er*Xn()),ki.setMode(yt.isLineSegments?$e.LINES:yt.isLineLoop?$e.LINE_LOOP:$e.LINE_STRIP)}else yt.isPoints?ki.setMode($e.POINTS):yt.isSprite&&ki.setMode($e.TRIANGLES);if(yt.isInstancedMesh)ki.renderInstances(Gi,hs,yt.count);else if(pt.isInstancedBufferGeometry){const cw=Math.min(pt.instanceCount,void 0!==pt._maxInstanceCount?pt._maxInstanceCount:1/0);ki.renderInstances(Gi,hs,cw)}else ki.render(Gi,hs)},this.compile=function(Re,lt,pt=null){null===pt&&(pt=Re),ee=Qt.get(pt),ee.init(),ue.push(ee),pt.traverseVisible(function(yt){yt.isLight&&yt.layers.test(lt.layers)&&(ee.pushLight(yt),yt.castShadow&&ee.pushShadow(yt))}),Re!==pt&&Re.traverseVisible(function(yt){yt.isLight&&yt.layers.test(lt.layers)&&(ee.pushLight(yt),yt.castShadow&&ee.pushShadow(yt))}),ee.setupLights(ce._useLegacyLights);const gt=new Set;return Re.traverse(function(yt){const Sn=yt.material;if(Sn)if(Array.isArray(Sn))for(let jn=0;jn<Sn.length;jn++){const Zn=Sn[jn];Yn(Zn,pt,yt),gt.add(Zn)}else Yn(Sn,pt,yt),gt.add(Sn)}),ue.pop(),ee=null,gt},this.compileAsync=function(Re,lt,pt=null){const gt=this.compile(Re,lt,pt);return new Promise(yt=>{function Sn(){gt.forEach(function(jn){bn.get(jn).currentProgram.isReady()&&gt.delete(jn)}),0!==gt.size?setTimeout(Sn,10):yt(Re)}null!==Tt.get("KHR_parallel_shader_compile")?Sn():setTimeout(Sn,10)})};let Gr=null;function Ho(){Js.stop()}function fi(){Js.start()}const Js=new NR;function Ia(Re,lt,pt,gt){if(!1===Re.visible)return;if(Re.layers.test(lt.layers))if(Re.isGroup)pt=Re.renderOrder;else if(Re.isLOD)!0===Re.autoUpdate&&Re.update(lt);else if(Re.isLight)ee.pushLight(Re),Re.castShadow&&ee.pushShadow(Re);else if(Re.isSprite){if(!Re.frustumCulled||mn.intersectsSprite(Re)){gt&&ur.setFromMatrixPosition(Re.matrixWorld).applyMatrix4(Jn);const jn=Ce.update(Re),Zn=Re.material;Zn.visible&&ne.push(Re,jn,Zn,pt,ur.z,null)}}else if((Re.isMesh||Re.isLine||Re.isPoints)&&(!Re.frustumCulled||mn.intersectsObject(Re))){const jn=Ce.update(Re),Zn=Re.material;if(gt&&(void 0!==Re.boundingSphere?(null===Re.boundingSphere&&Re.computeBoundingSphere(),ur.copy(Re.boundingSphere.center)):(null===jn.boundingSphere&&jn.computeBoundingSphere(),ur.copy(jn.boundingSphere.center)),ur.applyMatrix4(Re.matrixWorld).applyMatrix4(Jn)),Array.isArray(Zn)){const nr=jn.groups;for(let vr=0,hr=nr.length;vr<hr;vr++){const mr=nr[vr],Gi=Zn[mr.materialIndex];Gi&&Gi.visible&&ne.push(Re,jn,Gi,pt,ur.z,mr)}}else Zn.visible&&ne.push(Re,jn,Zn,pt,ur.z,null)}const Sn=Re.children;for(let jn=0,Zn=Sn.length;jn<Zn;jn++)Ia(Sn[jn],lt,pt,gt)}function AL(Re,lt,pt,gt){const yt=Re.opaque,Sn=Re.transmissive,jn=Re.transparent;ee.setupLightsView(pt),!0===wn&&Ln.setGlobalState(ce.clippingPlanes,pt),Sn.length>0&&function BK(Re,lt,pt,gt){if(null!==(!0===pt.isScene?pt.overrideMaterial:null))return;const Sn=Yt.isWebGL2;null===qn&&(qn=new Ea(1,1,{generateMipmaps:!0,type:Tt.has("EXT_color_buffer_half_float")?Hf:Ul,minFilter:Ac,samples:Sn?4:0})),ce.getDrawingBufferSize($n),Sn?qn.setSize($n.x,$n.y):qn.setSize(ly($n.x),ly($n.y));const jn=ce.getRenderTarget();ce.setRenderTarget(qn),ce.getClearColor(Ut),Qe=ce.getClearAlpha(),Qe<1&&ce.setClearColor(16777215,.5),ce.clear();const Zn=ce.toneMapping;ce.toneMapping=kl,mv(Re,pt,gt),In.updateMultisampleRenderTarget(qn),In.updateRenderTargetMipmap(qn);let nr=!1;for(let vr=0,hr=lt.length;vr<hr;vr++){const mr=lt[vr],Gi=mr.object,Do=mr.geometry,hs=mr.material,hl=mr.group;if(2===hs.side&&Gi.layers.test(gt.layers)){const ki=hs.side;hs.side=1,hs.needsUpdate=!0,DL(Gi,pt,gt,Do,hs,hl),hs.side=ki,hs.needsUpdate=!0,nr=!0}}!0===nr&&(In.updateMultisampleRenderTarget(qn),In.updateRenderTargetMipmap(qn)),ce.setRenderTarget(jn),ce.setClearColor(Ut,Qe),ce.toneMapping=Zn}(yt,Sn,lt,pt),gt&&Ft.viewport(Ne.copy(gt)),yt.length>0&&mv(yt,lt,pt),Sn.length>0&&mv(Sn,lt,pt),jn.length>0&&mv(jn,lt,pt),Ft.buffers.depth.setTest(!0),Ft.buffers.depth.setMask(!0),Ft.buffers.color.setMask(!0),Ft.setPolygonOffset(!1)}function mv(Re,lt,pt){const gt=!0===lt.isScene?lt.overrideMaterial:null;for(let yt=0,Sn=Re.length;yt<Sn;yt++){const jn=Re[yt],Zn=jn.object,nr=jn.geometry,vr=null===gt?jn.material:gt,hr=jn.group;Zn.layers.test(pt.layers)&&DL(Zn,lt,pt,nr,vr,hr)}}function DL(Re,lt,pt,gt,yt,Sn){Re.onBeforeRender(ce,lt,pt,gt,yt,Sn),Re.modelViewMatrix.multiplyMatrices(pt.matrixWorldInverse,Re.matrixWorld),Re.normalMatrix.getNormalMatrix(Re.modelViewMatrix),yt.onBeforeRender(ce,lt,pt,gt,Re,Sn),!0===yt.transparent&&2===yt.side&&!1===yt.forceSinglePass?(yt.side=1,yt.needsUpdate=!0,ce.renderBufferDirect(pt,lt,gt,yt,Re,Sn),yt.side=0,yt.needsUpdate=!0,ce.renderBufferDirect(pt,lt,gt,yt,Re,Sn),yt.side=2):ce.renderBufferDirect(pt,lt,gt,yt,Re,Sn),Re.onAfterRender(ce,lt,pt,gt,yt,Sn)}function gv(Re,lt,pt){!0!==lt.isScene&&(lt=kr);const gt=bn.get(Re),yt=ee.state.lights,jn=yt.state.version,Zn=ft.getParameters(Re,yt.state,ee.state.shadowsArray,lt,pt),nr=ft.getProgramCacheKey(Zn);let vr=gt.programs;gt.environment=Re.isMeshStandardMaterial?lt.environment:null,gt.fog=lt.fog,gt.envMap=(Re.isMeshStandardMaterial?Mr:ar).get(Re.envMap||gt.environment),void 0===vr&&(Re.addEventListener("dispose",sn),vr=new Map,gt.programs=vr);let hr=vr.get(nr);if(void 0!==hr){if(gt.currentProgram===hr&&gt.lightsStateVersion===jn)return PL(Re,Zn),hr}else Zn.uniforms=ft.getUniforms(Re),Re.onBuild(pt,Zn,ce),Re.onBeforeCompile(Zn,ce),hr=ft.acquireProgram(Zn,nr),vr.set(nr,hr),gt.uniforms=Zn.uniforms;const mr=gt.uniforms;return(!Re.isShaderMaterial&&!Re.isRawShaderMaterial||!0===Re.clipping)&&(mr.clippingPlanes=Ln.uniform),PL(Re,Zn),gt.needsLights=function GK(Re){return Re.isMeshLambertMaterial||Re.isMeshToonMaterial||Re.isMeshPhongMaterial||Re.isMeshStandardMaterial||Re.isShadowMaterial||Re.isShaderMaterial&&!0===Re.lights}(Re),gt.lightsStateVersion=jn,gt.needsLights&&(mr.ambientLightColor.value=yt.state.ambient,mr.lightProbe.value=yt.state.probe,mr.directionalLights.value=yt.state.directional,mr.directionalLightShadows.value=yt.state.directionalShadow,mr.spotLights.value=yt.state.spot,mr.spotLightShadows.value=yt.state.spotShadow,mr.rectAreaLights.value=yt.state.rectArea,mr.ltc_1.value=yt.state.rectAreaLTC1,mr.ltc_2.value=yt.state.rectAreaLTC2,mr.pointLights.value=yt.state.point,mr.pointLightShadows.value=yt.state.pointShadow,mr.hemisphereLights.value=yt.state.hemi,mr.directionalShadowMap.value=yt.state.directionalShadowMap,mr.directionalShadowMatrix.value=yt.state.directionalShadowMatrix,mr.spotShadowMap.value=yt.state.spotShadowMap,mr.spotLightMatrix.value=yt.state.spotLightMatrix,mr.spotLightMap.value=yt.state.spotLightMap,mr.pointShadowMap.value=yt.state.pointShadowMap,mr.pointShadowMatrix.value=yt.state.pointShadowMatrix),gt.currentProgram=hr,gt.uniformsList=null,hr}function IL(Re){if(null===Re.uniformsList){const lt=Re.currentProgram.getUniforms();Re.uniformsList=Ly.seqWithValue(lt.seq,Re.uniforms)}return Re.uniformsList}function PL(Re,lt){const pt=bn.get(Re);pt.outputColorSpace=lt.outputColorSpace,pt.instancing=lt.instancing,pt.instancingColor=lt.instancingColor,pt.skinning=lt.skinning,pt.morphTargets=lt.morphTargets,pt.morphNormals=lt.morphNormals,pt.morphColors=lt.morphColors,pt.morphTargetsCount=lt.morphTargetsCount,pt.numClippingPlanes=lt.numClippingPlanes,pt.numIntersection=lt.numClipIntersection,pt.vertexAlphas=lt.vertexAlphas,pt.vertexTangents=lt.vertexTangents,pt.toneMapping=lt.toneMapping}Js.setAnimationLoop(function Ki(Re){Gr&&Gr(Re)}),typeof self<"u"&&Js.setContext(self),this.setAnimationLoop=function(Re){Gr=Re,En.setAnimationLoop(Re),null===Re?Js.stop():Js.start()},En.addEventListener("sessionstart",Ho),En.addEventListener("sessionend",fi),this.render=function(Re,lt){if(void 0===lt||!0===lt.isCamera){if(!0!==ye){if(!0===Re.matrixWorldAutoUpdate&&Re.updateMatrixWorld(),null===lt.parent&&!0===lt.matrixWorldAutoUpdate&&lt.updateMatrixWorld(),!0===En.enabled&&!0===En.isPresenting&&(!0===En.cameraAutoUpdate&&En.updateCamera(lt),lt=En.getCamera()),!0===Re.isScene&&Re.onBeforeRender(ce,Re,lt,Fe),ee=Qt.get(Re,ue.length),ee.init(),ue.push(ee),Jn.multiplyMatrices(lt.projectionMatrix,lt.matrixWorldInverse),mn.setFromProjectionMatrix(Jn),Cn=this.localClippingEnabled,wn=Ln.init(this.clippingPlanes,Cn),ne=Vt.get(Re,Q.length),ne.init(),Q.push(ne),Ia(Re,lt,0,ce.sortObjects),ne.finish(),!0===ce.sortObjects&&ne.sort(Jt,Rt),this.info.render.frame++,!0===wn&&Ln.beginShadows(),on.render(ee.state.shadowsArray,Re,lt),!0===wn&&Ln.endShadows(),!0===this.info.autoReset&&this.info.reset(),yn.render(ne,Re),ee.setupLights(ce._useLegacyLights),lt.isArrayCamera){const gt=lt.cameras;for(let yt=0,Sn=gt.length;yt<Sn;yt++){const jn=gt[yt];AL(ne,Re,jn,jn.viewport)}}else AL(ne,Re,lt);null!==Fe&&(In.updateMultisampleRenderTarget(Fe),In.updateRenderTargetMipmap(Fe)),!0===Re.isScene&&Re.onAfterRender(ce,Re,lt),dr.resetDefaultState(),Xe=-1,Me=null,ue.pop(),ee=ue.length>0?ue[ue.length-1]:null,Q.pop(),ne=Q.length>0?Q[Q.length-1]:null}}else console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.")},this.getActiveCubeFace=function(){return Ee},this.getActiveMipmapLevel=function(){return Le},this.getRenderTarget=function(){return Fe},this.setRenderTargetTextures=function(Re,lt,pt){bn.get(Re.texture).__webglTexture=lt,bn.get(Re.depthTexture).__webglTexture=pt;const gt=bn.get(Re);gt.__hasExternalTextures=!0,gt.__hasExternalTextures&&(gt.__autoAllocateDepthBuffer=void 0===pt,gt.__autoAllocateDepthBuffer||!0===Tt.has("WEBGL_multisampled_render_to_texture")&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),gt.__useRenderToTexture=!1))},this.setRenderTargetFramebuffer=function(Re,lt){const pt=bn.get(Re);pt.__webglFramebuffer=lt,pt.__useDefaultFramebuffer=void 0===lt},this.setRenderTarget=function(Re,lt=0,pt=0){Fe=Re,Ee=lt,Le=pt;let gt=!0,yt=null,Sn=!1,jn=!1;if(Re){const nr=bn.get(Re);void 0!==nr.__useDefaultFramebuffer?(Ft.bindFramebuffer($e.FRAMEBUFFER,null),gt=!1):void 0===nr.__webglFramebuffer?In.setupRenderTarget(Re):nr.__hasExternalTextures&&In.rebindTextures(Re,bn.get(Re.texture).__webglTexture,bn.get(Re.depthTexture).__webglTexture);const vr=Re.texture;(vr.isData3DTexture||vr.isDataArrayTexture||vr.isCompressedArrayTexture)&&(jn=!0);const hr=bn.get(Re).__webglFramebuffer;Re.isWebGLCubeRenderTarget?(yt=Array.isArray(hr[lt])?hr[lt][pt]:hr[lt],Sn=!0):yt=Yt.isWebGL2&&Re.samples>0&&!1===In.useMultisampledRTT(Re)?bn.get(Re).__webglMultisampledFramebuffer:Array.isArray(hr)?hr[pt]:hr,Ne.copy(Re.viewport),dt.copy(Re.scissor),It=Re.scissorTest}else Ne.copy(Bt).multiplyScalar(Ct).floor(),dt.copy(st).multiplyScalar(Ct).floor(),It=Et;if(Ft.bindFramebuffer($e.FRAMEBUFFER,yt)&&Yt.drawBuffers&&gt&&Ft.drawBuffers(Re,yt),Ft.viewport(Ne),Ft.scissor(dt),Ft.setScissorTest(It),Sn){const nr=bn.get(Re.texture);$e.framebufferTexture2D($e.FRAMEBUFFER,$e.COLOR_ATTACHMENT0,$e.TEXTURE_CUBE_MAP_POSITIVE_X+lt,nr.__webglTexture,pt)}else if(jn){const nr=bn.get(Re.texture);$e.framebufferTextureLayer($e.FRAMEBUFFER,$e.COLOR_ATTACHMENT0,nr.__webglTexture,pt||0,lt||0)}Xe=-1},this.readRenderTargetPixels=function(Re,lt,pt,gt,yt,Sn,jn){if(!Re||!Re.isWebGLRenderTarget)return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let Zn=bn.get(Re).__webglFramebuffer;if(Re.isWebGLCubeRenderTarget&&void 0!==jn&&(Zn=Zn[jn]),Zn){Ft.bindFramebuffer($e.FRAMEBUFFER,Zn);try{const nr=Re.texture,vr=nr.format,hr=nr.type;if(vr!==Bo&&ri.convert(vr)!==$e.getParameter($e.IMPLEMENTATION_COLOR_READ_FORMAT))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");const mr=hr===Hf&&(Tt.has("EXT_color_buffer_half_float")||Yt.isWebGL2&&Tt.has("EXT_color_buffer_float"));if(!(hr===Ul||ri.convert(hr)===$e.getParameter($e.IMPLEMENTATION_COLOR_READ_TYPE)||hr===Ja&&(Yt.isWebGL2||Tt.has("OES_texture_float")||Tt.has("WEBGL_color_buffer_float"))||mr))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");lt>=0&&lt<=Re.width-gt&&pt>=0&&pt<=Re.height-yt&&$e.readPixels(lt,pt,gt,yt,ri.convert(vr),ri.convert(hr),Sn)}finally{const nr=null!==Fe?bn.get(Fe).__webglFramebuffer:null;Ft.bindFramebuffer($e.FRAMEBUFFER,nr)}}},this.copyFramebufferToTexture=function(Re,lt,pt=0){const gt=Math.pow(2,-pt),yt=Math.floor(lt.image.width*gt),Sn=Math.floor(lt.image.height*gt);In.setTexture2D(lt,0),$e.copyTexSubImage2D($e.TEXTURE_2D,pt,0,0,Re.x,Re.y,yt,Sn),Ft.unbindTexture()},this.copyTextureToTexture=function(Re,lt,pt,gt=0){const yt=lt.image.width,Sn=lt.image.height,jn=ri.convert(pt.format),Zn=ri.convert(pt.type);In.setTexture2D(pt,0),$e.pixelStorei($e.UNPACK_FLIP_Y_WEBGL,pt.flipY),$e.pixelStorei($e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,pt.premultiplyAlpha),$e.pixelStorei($e.UNPACK_ALIGNMENT,pt.unpackAlignment),lt.isDataTexture?$e.texSubImage2D($e.TEXTURE_2D,gt,Re.x,Re.y,yt,Sn,jn,Zn,lt.image.data):lt.isCompressedTexture?$e.compressedTexSubImage2D($e.TEXTURE_2D,gt,Re.x,Re.y,lt.mipmaps[0].width,lt.mipmaps[0].height,jn,lt.mipmaps[0].data):$e.texSubImage2D($e.TEXTURE_2D,gt,Re.x,Re.y,jn,Zn,lt.image),0===gt&&pt.generateMipmaps&&$e.generateMipmap($e.TEXTURE_2D),Ft.unbindTexture()},this.copyTextureToTexture3D=function(Re,lt,pt,gt,yt=0){if(ce.isWebGL1Renderer)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");const Sn=Re.max.x-Re.min.x+1,jn=Re.max.y-Re.min.y+1,Zn=Re.max.z-Re.min.z+1,nr=ri.convert(gt.format),vr=ri.convert(gt.type);let hr;if(gt.isData3DTexture)In.setTexture3D(gt,0),hr=$e.TEXTURE_3D;else{if(!gt.isDataArrayTexture)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");In.setTexture2DArray(gt,0),hr=$e.TEXTURE_2D_ARRAY}$e.pixelStorei($e.UNPACK_FLIP_Y_WEBGL,gt.flipY),$e.pixelStorei($e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,gt.premultiplyAlpha),$e.pixelStorei($e.UNPACK_ALIGNMENT,gt.unpackAlignment);const mr=$e.getParameter($e.UNPACK_ROW_LENGTH),Gi=$e.getParameter($e.UNPACK_IMAGE_HEIGHT),Do=$e.getParameter($e.UNPACK_SKIP_PIXELS),hs=$e.getParameter($e.UNPACK_SKIP_ROWS),hl=$e.getParameter($e.UNPACK_SKIP_IMAGES),ki=pt.isCompressedTexture?pt.mipmaps[0]:pt.image;$e.pixelStorei($e.UNPACK_ROW_LENGTH,ki.width),$e.pixelStorei($e.UNPACK_IMAGE_HEIGHT,ki.height),$e.pixelStorei($e.UNPACK_SKIP_PIXELS,Re.min.x),$e.pixelStorei($e.UNPACK_SKIP_ROWS,Re.min.y),$e.pixelStorei($e.UNPACK_SKIP_IMAGES,Re.min.z),pt.isDataTexture||pt.isData3DTexture?$e.texSubImage3D(hr,yt,lt.x,lt.y,lt.z,Sn,jn,Zn,nr,vr,ki.data):pt.isCompressedArrayTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),$e.compressedTexSubImage3D(hr,yt,lt.x,lt.y,lt.z,Sn,jn,Zn,nr,ki.data)):$e.texSubImage3D(hr,yt,lt.x,lt.y,lt.z,Sn,jn,Zn,nr,vr,ki),$e.pixelStorei($e.UNPACK_ROW_LENGTH,mr),$e.pixelStorei($e.UNPACK_IMAGE_HEIGHT,Gi),$e.pixelStorei($e.UNPACK_SKIP_PIXELS,Do),$e.pixelStorei($e.UNPACK_SKIP_ROWS,hs),$e.pixelStorei($e.UNPACK_SKIP_IMAGES,hl),0===yt&&gt.generateMipmaps&&$e.generateMipmap(hr),Ft.unbindTexture()},this.initTexture=function(Re){Re.isCubeTexture?In.setTextureCube(Re,0):Re.isData3DTexture?In.setTexture3D(Re,0):Re.isDataArrayTexture||Re.isCompressedArrayTexture?In.setTexture2DArray(Re,0):In.setTexture2D(Re,0),Ft.unbindTexture()},this.resetState=function(){Ee=0,Le=0,Fe=null,Ft.reset(),dr.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return el}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(t){this._outputColorSpace=t;const n=this.getContext();n.drawingBufferColorSpace=t===z1?"display-p3":"srgb",n.unpackColorSpace=ti.workingColorSpace===ny?"display-p3":"srgb"}get physicallyCorrectLights(){return console.warn("THREE.WebGLRenderer: The property .physicallyCorrectLights has been removed. Set renderer.useLegacyLights instead."),!this.useLegacyLights}set physicallyCorrectLights(t){console.warn("THREE.WebGLRenderer: The property .physicallyCorrectLights has been removed. Set renderer.useLegacyLights instead."),this.useLegacyLights=!t}get outputEncoding(){return console.warn("THREE.WebGLRenderer: Property .outputEncoding has been removed. Use .outputColorSpace instead."),this.outputColorSpace===us?Pc:3e3}set outputEncoding(t){console.warn("THREE.WebGLRenderer: Property .outputEncoding has been removed. Use .outputColorSpace instead."),this.outputColorSpace=t===Pc?us:Qa}get useLegacyLights(){return console.warn("THREE.WebGLRenderer: The property .useLegacyLights has been deprecated. Migrate your lighting according to the following guide: https://discourse.threejs.org/t/updates-to-lighting-in-three-js-r155/53733."),this._useLegacyLights}set useLegacyLights(t){console.warn("THREE.WebGLRenderer: The property .useLegacyLights has been deprecated. Migrate your lighting according to the following guide: https://discourse.threejs.org/t/updates-to-lighting-in-three-js-r155/53733."),this._useLegacyLights=t}}(class vY extends dO{}).prototype.isWebGL1Renderer=!0;class hO extends xi{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(t,n){return super.copy(t,n),null!==t.background&&(this.background=t.background.clone()),null!==t.environment&&(this.environment=t.environment.clone()),null!==t.fog&&(this.fog=t.fog.clone()),this.backgroundBlurriness=t.backgroundBlurriness,this.backgroundIntensity=t.backgroundIntensity,null!==t.overrideMaterial&&(this.overrideMaterial=t.overrideMaterial.clone()),this.matrixAutoUpdate=t.matrixAutoUpdate,this}toJSON(t){const n=super.toJSON(t);return null!==this.fog&&(n.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(n.object.backgroundBlurriness=this.backgroundBlurriness),1!==this.backgroundIntensity&&(n.object.backgroundIntensity=this.backgroundIntensity),n}}class dp extends xr{constructor(t=1,n=1,i=1,s=32,o=1,a=!1,c=0,u=2*Math.PI){super(),this.type="CylinderGeometry",this.parameters={radiusTop:t,radiusBottom:n,height:i,radialSegments:s,heightSegments:o,openEnded:a,thetaStart:c,thetaLength:u};const _=this;s=Math.floor(s),o=Math.floor(o);const A=[],O=[],B=[],G=[];let Y=0;const ne=[],ee=i/2;let Q=0;function ce(ye){const Ee=Y,Le=new Lt,Fe=new ke;let Xe=0;const Me=!0===ye?t:n,Ne=!0===ye?1:-1;for(let It=1;It<=s;It++)O.push(0,ee*Ne,0),B.push(0,Ne,0),G.push(.5,.5),Y++;const dt=Y;for(let It=0;It<=s;It++){const Qe=It/s*u+c,mt=Math.cos(Qe),At=Math.sin(Qe);Fe.x=Me*At,Fe.y=ee*Ne,Fe.z=Me*mt,O.push(Fe.x,Fe.y,Fe.z),B.push(0,Ne,0),Le.x=.5*mt+.5,Le.y=.5*At*Ne+.5,G.push(Le.x,Le.y),Y++}for(let It=0;It<s;It++){const Ut=Ee+It,Qe=dt+It;!0===ye?A.push(Qe,Qe+1,Ut):A.push(Qe+1,Qe,Ut),Xe+=3}_.addGroup(Q,Xe,!0===ye?1:2),Q+=Xe}(function ue(){const ye=new ke,Ee=new ke;let Le=0;const Fe=(n-t)/i;for(let Xe=0;Xe<=o;Xe++){const Me=[],Ne=Xe/o,dt=Ne*(n-t)+t;for(let It=0;It<=s;It++){const Ut=It/s,Qe=Ut*u+c,mt=Math.sin(Qe),At=Math.cos(Qe);Ee.x=dt*mt,Ee.y=-Ne*i+ee,Ee.z=dt*At,O.push(Ee.x,Ee.y,Ee.z),ye.set(mt,Fe,At).normalize(),B.push(ye.x,ye.y,ye.z),G.push(Ut,1-Ne),Me.push(Y++)}ne.push(Me)}for(let Xe=0;Xe<s;Xe++)for(let Me=0;Me<o;Me++){const dt=ne[Me+1][Xe],It=ne[Me+1][Xe+1],Ut=ne[Me][Xe+1];A.push(ne[Me][Xe],dt,Ut),A.push(dt,It,Ut),Le+=6}_.addGroup(Q,Le,0),Q+=Le})(),!1===a&&(t>0&&ce(!0),n>0&&ce(!1)),this.setIndex(A),this.setAttribute("position",new Pn(O,3)),this.setAttribute("normal",new Pn(B,3)),this.setAttribute("uv",new Pn(G,2))}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new dp(t.radiusTop,t.radiusBottom,t.height,t.radialSegments,t.heightSegments,t.openEnded,t.thetaStart,t.thetaLength)}}class Xy extends dp{constructor(t=1,n=1,i=32,s=1,o=!1,a=0,c=2*Math.PI){super(0,t,n,i,s,o,a,c),this.type="ConeGeometry",this.parameters={radius:t,height:n,radialSegments:i,heightSegments:s,openEnded:o,thetaStart:a,thetaLength:c}}static fromJSON(t){return new Xy(t.radius,t.height,t.radialSegments,t.heightSegments,t.openEnded,t.thetaStart,t.thetaLength)}}class ZO extends Ys{constructor(t){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new xn(16777215),this.specular=new xn(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new xn(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new Lt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=$g,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.specular.copy(t.specular),this.shininess=t.shininess,this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.flatShading=t.flatShading,this.fog=t.fog,this}}function Wc(r,t,n){return!r||!n&&r.constructor===t?r:"number"==typeof t.BYTES_PER_ELEMENT?new t(r):Array.prototype.slice.call(r)}class rv{constructor(t,n,i,s){this.parameterPositions=t,this._cachedIndex=0,this.resultBuffer=void 0!==s?s:new n.constructor(i),this.sampleValues=n,this.valueSize=i,this.settings=null,this.DefaultSettings_={}}evaluate(t){const n=this.parameterPositions;let i=this._cachedIndex,s=n[i],o=n[i-1];e:{t:{let a;n:{r:if(!(t<s)){for(let c=i+2;;){if(void 0===s){if(t<o)break r;return i=n.length,this._cachedIndex=i,this.copySampleValue_(i-1)}if(i===c)break;if(o=s,s=n[++i],t<s)break t}a=n.length;break n}if(t>=o)break e;{const c=n[1];t<c&&(i=2,o=c);for(let u=i-2;;){if(void 0===o)return this._cachedIndex=0,this.copySampleValue_(0);if(i===u)break;if(s=o,o=n[--i-1],t>=o)break t}a=i,i=0}}for(;i<a;){const c=i+a>>>1;t<n[c]?a=c:i=c+1}if(s=n[i],o=n[i-1],void 0===o)return this._cachedIndex=0,this.copySampleValue_(0);if(void 0===s)return i=n.length,this._cachedIndex=i,this.copySampleValue_(i-1)}this._cachedIndex=i,this.intervalChanged_(i,o,s)}return this.interpolate_(i,o,t,s)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(t){const n=this.resultBuffer,i=this.sampleValues,s=this.valueSize,o=t*s;for(let a=0;a!==s;++a)n[a]=i[o+a];return n}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class vZ extends rv{constructor(t,n,i,s){super(t,n,i,s),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:2400,endingEnd:2400}}intervalChanged_(t,n,i){const s=this.parameterPositions;let o=t-2,a=t+1,c=s[o],u=s[a];if(void 0===c)switch(this.getSettings_().endingStart){case 2401:o=t,c=2*n-i;break;case 2402:o=s.length-2,c=n+s[o]-s[o+1];break;default:o=t,c=i}if(void 0===u)switch(this.getSettings_().endingEnd){case 2401:a=t,u=2*i-n;break;case 2402:a=1,u=i+s[1]-s[0];break;default:a=t-1,u=n}const _=.5*(i-n),A=this.valueSize;this._weightPrev=_/(n-c),this._weightNext=_/(u-i),this._offsetPrev=o*A,this._offsetNext=a*A}interpolate_(t,n,i,s){const o=this.resultBuffer,a=this.sampleValues,c=this.valueSize,u=t*c,_=u-c,A=this._offsetPrev,O=this._offsetNext,B=this._weightPrev,G=this._weightNext,Y=(i-n)/(s-n),ne=Y*Y,ee=ne*Y,Q=-B*ee+2*B*ne-B*Y,ue=(1+B)*ee+(-1.5-2*B)*ne+(-.5+B)*Y+1,ce=(-1-G)*ee+(1.5+G)*ne+.5*Y,ye=G*ee-G*ne;for(let Ee=0;Ee!==c;++Ee)o[Ee]=Q*a[A+Ee]+ue*a[_+Ee]+ce*a[u+Ee]+ye*a[O+Ee];return o}}class QO extends rv{constructor(t,n,i,s){super(t,n,i,s)}interpolate_(t,n,i,s){const o=this.resultBuffer,a=this.sampleValues,c=this.valueSize,u=t*c,_=u-c,A=(i-n)/(s-n),O=1-A;for(let B=0;B!==c;++B)o[B]=a[_+B]*O+a[u+B]*A;return o}}class bZ extends rv{constructor(t,n,i,s){super(t,n,i,s)}interpolate_(t){return this.copySampleValue_(t-1)}}class Da{constructor(t,n,i,s){if(void 0===t)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===n||0===n.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+t);this.name=t,this.times=Wc(n,this.TimeBufferType),this.values=Wc(i,this.ValueBufferType),this.setInterpolation(s||this.DefaultInterpolation)}static toJSON(t){const n=t.constructor;let i;if(n.toJSON!==this.toJSON)i=n.toJSON(t);else{i={name:t.name,times:Wc(t.times,Array),values:Wc(t.values,Array)};const s=t.getInterpolation();s!==t.DefaultInterpolation&&(i.interpolation=s)}return i.type=t.ValueTypeName,i}InterpolantFactoryMethodDiscrete(t){return new bZ(this.times,this.values,this.getValueSize(),t)}InterpolantFactoryMethodLinear(t){return new QO(this.times,this.values,this.getValueSize(),t)}InterpolantFactoryMethodSmooth(t){return new vZ(this.times,this.values,this.getValueSize(),t)}setInterpolation(t){let n;switch(t){case 2300:n=this.InterpolantFactoryMethodDiscrete;break;case 2301:n=this.InterpolantFactoryMethodLinear;break;case 2302:n=this.InterpolantFactoryMethodSmooth}if(void 0===n){const i="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(t===this.DefaultInterpolation)throw new Error(i);this.setInterpolation(this.DefaultInterpolation)}return console.warn("THREE.KeyframeTrack:",i),this}return this.createInterpolant=n,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return 2300;case this.InterpolantFactoryMethodLinear:return 2301;case this.InterpolantFactoryMethodSmooth:return 2302}}getValueSize(){return this.values.length/this.times.length}shift(t){if(0!==t){const n=this.times;for(let i=0,s=n.length;i!==s;++i)n[i]+=t}return this}scale(t){if(1!==t){const n=this.times;for(let i=0,s=n.length;i!==s;++i)n[i]*=t}return this}trim(t,n){const i=this.times,s=i.length;let o=0,a=s-1;for(;o!==s&&i[o]<t;)++o;for(;-1!==a&&i[a]>n;)--a;if(++a,0!==o||a!==s){o>=a&&(a=Math.max(a,1),o=a-1);const c=this.getValueSize();this.times=i.slice(o,a),this.values=this.values.slice(o*c,a*c)}return this}validate(){let t=!0;const n=this.getValueSize();n-Math.floor(n)!=0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),t=!1);const i=this.times,s=this.values,o=i.length;0===o&&(console.error("THREE.KeyframeTrack: Track is empty.",this),t=!1);let a=null;for(let c=0;c!==o;c++){const u=i[c];if("number"==typeof u&&isNaN(u)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,c,u),t=!1;break}if(null!==a&&a>u){console.error("THREE.KeyframeTrack: Out of order keys.",this,c,u,a),t=!1;break}a=u}if(void 0!==s&&function KO(r){return ArrayBuffer.isView(r)&&!(r instanceof DataView)}(s))for(let c=0,u=s.length;c!==u;++c){const _=s[c];if(isNaN(_)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,c,_),t=!1;break}}return t}optimize(){const t=this.times.slice(),n=this.values.slice(),i=this.getValueSize(),s=2302===this.getInterpolation(),o=t.length-1;let a=1;for(let c=1;c<o;++c){let u=!1;const _=t[c];if(_!==t[c+1]&&(1!==c||_!==t[0]))if(s)u=!0;else{const O=c*i,B=O-i,G=O+i;for(let Y=0;Y!==i;++Y){const ne=n[O+Y];if(ne!==n[B+Y]||ne!==n[G+Y]){u=!0;break}}}if(u){if(c!==a){t[a]=t[c];const O=c*i,B=a*i;for(let G=0;G!==i;++G)n[B+G]=n[O+G]}++a}}if(o>0){t[a]=t[o];for(let c=o*i,u=a*i,_=0;_!==i;++_)n[u+_]=n[c+_];++a}return a!==t.length?(this.times=t.slice(0,a),this.values=n.slice(0,a*i)):(this.times=t,this.values=n),this}clone(){const t=this.times.slice(),n=this.values.slice(),s=new(0,this.constructor)(this.name,t,n);return s.createInterpolant=this.createInterpolant,s}}Da.prototype.TimeBufferType=Float32Array,Da.prototype.ValueBufferType=Float32Array,Da.prototype.DefaultInterpolation=2301;class ch extends Da{}ch.prototype.ValueTypeName="bool",ch.prototype.ValueBufferType=Array,ch.prototype.DefaultInterpolation=2300,ch.prototype.InterpolantFactoryMethodLinear=void 0,ch.prototype.InterpolantFactoryMethodSmooth=void 0;(class eL extends Da{}).prototype.ValueTypeName="color";(class iv extends Da{}).prototype.ValueTypeName="number";class _Z extends rv{constructor(t,n,i,s){super(t,n,i,s)}interpolate_(t,n,i,s){const o=this.resultBuffer,a=this.sampleValues,c=this.valueSize,u=(i-n)/(s-n);let _=t*c;for(let A=_+c;_!==A;_+=4)Eo.slerpFlat(o,0,a,_-c,a,_,u);return o}}class mp extends Da{InterpolantFactoryMethodLinear(t){return new _Z(this.times,this.values,this.getValueSize(),t)}}mp.prototype.ValueTypeName="quaternion",mp.prototype.DefaultInterpolation=2301,mp.prototype.InterpolantFactoryMethodSmooth=void 0;class uh extends Da{}uh.prototype.ValueTypeName="string",uh.prototype.ValueBufferType=Array,uh.prototype.DefaultInterpolation=2300,uh.prototype.InterpolantFactoryMethodLinear=void 0,uh.prototype.InterpolantFactoryMethodSmooth=void 0;(class sv extends Da{}).prototype.ValueTypeName="vector",Error;class qc extends xi{constructor(t,n=1){super(),this.isLight=!0,this.type="Light",this.color=new xn(t),this.intensity=n}dispose(){}copy(t,n){return super.copy(t,n),this.color.copy(t.color),this.intensity=t.intensity,this}toJSON(t){const n=super.toJSON(t);return n.object.color=this.color.getHex(),n.object.intensity=this.intensity,void 0!==this.groundColor&&(n.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(n.object.distance=this.distance),void 0!==this.angle&&(n.object.angle=this.angle),void 0!==this.decay&&(n.object.decay=this.decay),void 0!==this.penumbra&&(n.object.penumbra=this.penumbra),void 0!==this.shadow&&(n.object.shadow=this.shadow.toJSON()),n}}const Qx=new cr,nL=new ke,rL=new ke;class ew{constructor(t){this.camera=t,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new Lt(512,512),this.map=null,this.mapPass=null,this.matrix=new cr,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new hx,this._frameExtents=new Lt(1,1),this._viewportCount=1,this._viewports=[new ni(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(t){const n=this.camera,i=this.matrix;nL.setFromMatrixPosition(t.matrixWorld),n.position.copy(nL),rL.setFromMatrixPosition(t.target.matrixWorld),n.lookAt(rL),n.updateMatrixWorld(),Qx.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),this._frustum.setFromProjectionMatrix(Qx),i.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),i.multiply(Qx)}getViewport(t){return this._viewports[t]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(t){return this.camera=t.camera.clone(),this.bias=t.bias,this.radius=t.radius,this.mapSize.copy(t.mapSize),this}clone(){return(new this.constructor).copy(this)}toJSON(){const t={};return 0!==this.bias&&(t.bias=this.bias),0!==this.normalBias&&(t.normalBias=this.normalBias),1!==this.radius&&(t.radius=this.radius),(512!==this.mapSize.x||512!==this.mapSize.y)&&(t.mapSize=this.mapSize.toArray()),t.camera=this.camera.toJSON(!1).object,delete t.camera.matrix,t}}class IZ extends ew{constructor(){super(new fx(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class sL extends qc{constructor(t,n){super(t,n),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(xi.DEFAULT_UP),this.updateMatrix(),this.target=new xi,this.shadow=new IZ}dispose(){this.shadow.dispose()}copy(t){return super.copy(t),this.target=t.target.clone(),this.shadow=t.shadow.clone(),this}}class oL extends qc{constructor(t,n){super(t,n),this.isAmbientLight=!0,this.type="AmbientLight"}}const rw="\\[\\]\\.:\\/",zZ=new RegExp("["+rw+"]","g"),iw="[^"+rw+"]",GZ="[^"+rw.replace("\\.","")+"]",XZ=new RegExp("^"+/((?:WC+[\/:])*)/.source.replace("WC",iw)+/(WCOD+)?/.source.replace("WCOD",GZ)+/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",iw)+/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",iw)+"$"),YZ=["material","materials","bones","map"];class ZZ{constructor(t,n,i){const s=i||vi.parseTrackName(n);this._targetGroup=t,this._bindings=t.subscribe_(n,s)}getValue(t,n){this.bind();const s=this._bindings[this._targetGroup.nCachedObjects_];void 0!==s&&s.getValue(t,n)}setValue(t,n){const i=this._bindings;for(let s=this._targetGroup.nCachedObjects_,o=i.length;s!==o;++s)i[s].setValue(t,n)}bind(){const t=this._bindings;for(let n=this._targetGroup.nCachedObjects_,i=t.length;n!==i;++n)t[n].bind()}unbind(){const t=this._bindings;for(let n=this._targetGroup.nCachedObjects_,i=t.length;n!==i;++n)t[n].unbind()}}let vi=(()=>{class r{constructor(n,i,s){this.path=i,this.parsedPath=s||r.parseTrackName(i),this.node=r.findNode(n,this.parsedPath.nodeName),this.rootNode=n,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(n,i,s){return n&&n.isAnimationObjectGroup?new r.Composite(n,i,s):new r(n,i,s)}static sanitizeNodeName(n){return n.replace(/\s/g,"_").replace(zZ,"")}static parseTrackName(n){const i=XZ.exec(n);if(null===i)throw new Error("PropertyBinding: Cannot parse trackName: "+n);const s={nodeName:i[2],objectName:i[3],objectIndex:i[4],propertyName:i[5],propertyIndex:i[6]},o=s.nodeName&&s.nodeName.lastIndexOf(".");if(void 0!==o&&-1!==o){const a=s.nodeName.substring(o+1);-1!==YZ.indexOf(a)&&(s.nodeName=s.nodeName.substring(0,o),s.objectName=a)}if(null===s.propertyName||0===s.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+n);return s}static findNode(n,i){if(void 0===i||""===i||"."===i||-1===i||i===n.name||i===n.uuid)return n;if(n.skeleton){const s=n.skeleton.getBoneByName(i);if(void 0!==s)return s}if(n.children){const s=function(a){for(let c=0;c<a.length;c++){const u=a[c];if(u.name===i||u.uuid===i)return u;const _=s(u.children);if(_)return _}return null},o=s(n.children);if(o)return o}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(n,i){n[i]=this.targetObject[this.propertyName]}_getValue_array(n,i){const s=this.resolvedProperty;for(let o=0,a=s.length;o!==a;++o)n[i++]=s[o]}_getValue_arrayElement(n,i){n[i]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(n,i){this.resolvedProperty.toArray(n,i)}_setValue_direct(n,i){this.targetObject[this.propertyName]=n[i]}_setValue_direct_setNeedsUpdate(n,i){this.targetObject[this.propertyName]=n[i],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(n,i){this.targetObject[this.propertyName]=n[i],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(n,i){const s=this.resolvedProperty;for(let o=0,a=s.length;o!==a;++o)s[o]=n[i++]}_setValue_array_setNeedsUpdate(n,i){const s=this.resolvedProperty;for(let o=0,a=s.length;o!==a;++o)s[o]=n[i++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(n,i){const s=this.resolvedProperty;for(let o=0,a=s.length;o!==a;++o)s[o]=n[i++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(n,i){this.resolvedProperty[this.propertyIndex]=n[i]}_setValue_arrayElement_setNeedsUpdate(n,i){this.resolvedProperty[this.propertyIndex]=n[i],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(n,i){this.resolvedProperty[this.propertyIndex]=n[i],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(n,i){this.resolvedProperty.fromArray(n,i)}_setValue_fromArray_setNeedsUpdate(n,i){this.resolvedProperty.fromArray(n,i),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(n,i){this.resolvedProperty.fromArray(n,i),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(n,i){this.bind(),this.getValue(n,i)}_setValue_unbound(n,i){this.bind(),this.setValue(n,i)}bind(){let n=this.node;const i=this.parsedPath,s=i.objectName,o=i.propertyName;let a=i.propertyIndex;if(n||(n=r.findNode(this.rootNode,i.nodeName),this.node=n),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!n)return void console.warn("THREE.PropertyBinding: No target node found for track: "+this.path+".");if(s){let A=i.objectIndex;switch(s){case"materials":if(!n.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!n.material.materials)return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);n=n.material.materials;break;case"bones":if(!n.skeleton)return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);n=n.skeleton.bones;for(let O=0;O<n.length;O++)if(n[O].name===A){A=O;break}break;case"map":if("map"in n){n=n.map;break}if(!n.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!n.material.map)return void console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);n=n.material.map;break;default:if(void 0===n[s])return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);n=n[s]}if(void 0!==A){if(void 0===n[A])return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,n);n=n[A]}}const c=n[o];if(void 0===c)return void console.error("THREE.PropertyBinding: Trying to update property for track: "+i.nodeName+"."+o+" but it wasn't found.",n);let u=this.Versioning.None;this.targetObject=n,void 0!==n.needsUpdate?u=this.Versioning.NeedsUpdate:void 0!==n.matrixWorldNeedsUpdate&&(u=this.Versioning.MatrixWorldNeedsUpdate);let _=this.BindingType.Direct;if(void 0!==a){if("morphTargetInfluences"===o){if(!n.geometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(!n.geometry.morphAttributes)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);void 0!==n.morphTargetDictionary[a]&&(a=n.morphTargetDictionary[a])}_=this.BindingType.ArrayElement,this.resolvedProperty=c,this.propertyIndex=a}else void 0!==c.fromArray&&void 0!==c.toArray?(_=this.BindingType.HasFromToArray,this.resolvedProperty=c):Array.isArray(c)?(_=this.BindingType.EntireArray,this.resolvedProperty=c):this.propertyName=o;this.getValue=this.GetterByBindingType[_],this.setValue=this.SetterByBindingTypeAndVersioning[_][u]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}return r.Composite=ZZ,r})();vi.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},vi.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},vi.prototype.GetterByBindingType=[vi.prototype._getValue_direct,vi.prototype._getValue_array,vi.prototype._getValue_arrayElement,vi.prototype._getValue_toArray],vi.prototype.SetterByBindingTypeAndVersioning=[[vi.prototype._setValue_direct,vi.prototype._setValue_direct_setNeedsUpdate,vi.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[vi.prototype._setValue_array,vi.prototype._setValue_array_setNeedsUpdate,vi.prototype._setValue_array_setMatrixWorldNeedsUpdate],[vi.prototype._setValue_arrayElement,vi.prototype._setValue_arrayElement_setNeedsUpdate,vi.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[vi.prototype._setValue_fromArray,vi.prototype._setValue_fromArray_setNeedsUpdate,vi.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]],new Float32Array(1),typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:"158"}})),typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__="158");var tK=ua(326);let nK=(()=>{class r{constructor(){}getScreenDimensions(){if(typeof window>"u"||!window.screen)return{width:0,height:0,aspectRatio:1,orientation:"landscape"};const n=window.screen.width,i=window.screen.height;return{width:n,height:i,aspectRatio:n/i,orientation:n>i?"landscape":"portrait"}}getViewportInfo(){if(typeof window>"u")return{innerWidth:0,innerHeight:0,devicePixelRatio:1,isMobile:!1,isTablet:!1,isDesktop:!0};const n=window.innerWidth;return{innerWidth:n,innerHeight:window.innerHeight,devicePixelRatio:window.devicePixelRatio||1,isMobile:n<=768,isTablet:n>768&&n<=1024,isDesktop:n>1024}}calculateResponsiveDimensions(n,i,s=16/9){return n/i>s?{width:i*s,height:i}:{width:n,height:n/s}}prefersReducedMotion(){return!(typeof window>"u"||!window.matchMedia)&&window.matchMedia("(prefers-reduced-motion: reduce)").matches}getOrientation(){return this.getScreenDimensions().orientation}supportsTouchInput(){return!(typeof window>"u")&&("ontouchstart"in window||navigator.maxTouchPoints>0)}getSafeAreaInsets(){if(typeof window>"u"||!CSS.supports)return{top:0,right:0,bottom:0,left:0};const n=getComputedStyle(document.documentElement);return{top:parseInt(n.getPropertyValue("env(safe-area-inset-top)"))||0,right:parseInt(n.getPropertyValue("env(safe-area-inset-right)"))||0,bottom:parseInt(n.getPropertyValue("env(safe-area-inset-bottom)"))||0,left:parseInt(n.getPropertyValue("env(safe-area-inset-left)"))||0}}observeScreenChanges(n){if(typeof window>"u")return()=>{};const i=()=>{n(this.getScreenDimensions())};return window.addEventListener("resize",i),window.addEventListener("orientationchange",i),()=>{window.removeEventListener("resize",i),window.removeEventListener("orientationchange",i)}}static{this.\u0275fac=function(i){return new(i||r)}}static{this.\u0275prov=Dn({token:r,factory:r.\u0275fac,providedIn:"root"})}}return r})(),rK=(()=>{class r{constructor(n){this.screenUtility=n}getScreenWidth(){return this.screenUtility.getScreenDimensions().width}getScreenHeight(){return this.screenUtility.getScreenDimensions().height}getScreenInfo(){return this.screenUtility.getScreenDimensions()}static{this.\u0275fac=function(i){return new(i||r)(me(nK))}}static{this.\u0275prov=Dn({token:r,factory:r.\u0275fac,providedIn:"root"})}}return r})(),iK=(()=>{class r{constructor(){this.STORAGE_KEY="icebreaker-user-preferences"}getPCUsername(){try{console.log("UserService: Attempting to detect PC username...");const n=this.getSystemUsername()||this.getWindowsUsername()||this.getBrowserUsername()||this.getStoredUsername()||this.generateDefaultUsername();return console.log("UserService: Detected username:",n),this.storeUsername(n),n}catch(n){console.warn("Could not detect PC username:",n);const i=this.generateDefaultUsername();return console.log("UserService: Using default username:",i),i}}getSystemUsername(){try{if(typeof window?.require<"u")try{const i=window.require("os").userInfo().username;if(i)return i}catch{}if(typeof globalThis?.process<"u"&&globalThis.process.env){const n=globalThis.process.env;return n.USERNAME||n.USER||n.LOGNAME||null}return this.tryFileSystemUsername()}catch{return null}}tryFileSystemUsername(){try{return null}catch{return null}}getWindowsUsername(){try{return navigator,window,localStorage.getItem("pc-username")||null}catch(n){return console.warn("Could not get Windows username:",n),null}}getBrowserUsername(){try{return navigator,null}catch{return null}}getStoredUsername(){try{console.log("UserService: Checking for stored username...");const n=localStorage.getItem(this.STORAGE_KEY);if(n){const s=JSON.parse(n).username||null;return console.log("UserService: Found stored username:",s),s}return console.log("UserService: No stored username found"),null}catch(n){return console.warn("UserService: Error reading stored username:",n),null}}generateDefaultUsername(){const n=["Cool","Swift","Brave","Sharp","Quick","Smart","Bold","Fast"],i=["Fisher","Player","Gamer","Hero","Star","Ace","Pro","Master"],c=`${n[Math.floor(Math.random()*n.length)]}${i[Math.floor(Math.random()*i.length)]}${Math.floor(99*Math.random())+1}`;return console.log("UserService: Generated default username:",c),c}storeUsername(n){try{const i={username:n,lastUsed:(new Date).toISOString()};localStorage.setItem(this.STORAGE_KEY,JSON.stringify(i)),localStorage.setItem("pc-username",n)}catch(i){console.warn("Could not store username:",i)}}setPreferredUsername(n){n&&n.trim().length>0&&this.storeUsername(n.trim())}getDisplayName(){return this.getPCUsername()}promptForUsername(){var n=this;return Cd(function*(){const i=n.getStoredUsername();if(i)return i;try{window}catch{}return n.generateDefaultUsername()})()}clearStoredUsername(){try{localStorage.removeItem(this.STORAGE_KEY),localStorage.removeItem("pc-username")}catch(n){console.warn("Could not clear stored username:",n)}}getUserPreferences(){try{const n=localStorage.getItem(this.STORAGE_KEY);return n?JSON.parse(n):{}}catch{return{}}}static{this.\u0275fac=function(i){return new(i||r)}}static{this.\u0275prov=Dn({token:r,factory:r.\u0275fac,providedIn:"root"})}}return r})();let TL=(()=>{class r{constructor(n){this.http=n,this.apiUrl="https://d2alkxpkuk.execute-api.us-west-2.amazonaws.com/prod",this.highScoresSubject=new Es([]),this.highScores$=this.highScoresSubject.asObservable(),this.httpOptions={headers:new sa({"Content-Type":"application/json"})},console.log("HighScoresService initialized with API URL:",this.apiUrl),this.loadHighScores()}loadHighScores(){this.getHighScores().subscribe({next:n=>{this.highScoresSubject.next(n)},error:n=>{console.error("Failed to load high scores:",n),this.loadLocalHighScores()}})}getHighScores(){return console.log("Fetching high scores from:",`${this.apiUrl}/highscores`),this.http.get(`${this.apiUrl}/highscores`)}submitHighScore(n){const i={...n,gameType:"ice-fishing"};return console.log("Submitting score to:",`${this.apiUrl}/highscores`,i),this.http.post(`${this.apiUrl}/highscores`,i,this.httpOptions)}isHighScore(n){const i=this.highScoresSubject.value;return i.length<10||n>Math.min(...i.map(o=>o.score))}getPlayerBestScore(n){const s=this.highScoresSubject.value.filter(o=>o.playerName.toLowerCase()===n.toLowerCase());return 0===s.length?0:Math.max(...s.map(o=>o.score))}calculateScore(n,i,s){let o=100*n;return o+=Math.max(0,1e3-100*i),o+=Math.max(0,500-Math.floor(s/1e3)),n>=90?o*=2:n>=70&&(o*=1.5),Math.floor(o)}loadLocalHighScores(){try{const n=localStorage.getItem("icebreaker-highscores");if(n){const i=JSON.parse(n);this.highScoresSubject.next(i)}}catch(n){console.error("Failed to load local high scores:",n)}}saveLocalHighScores(n){try{localStorage.setItem("icebreaker-highscores",JSON.stringify(n))}catch(i){console.error("Failed to save local high scores:",i)}}submitScoreWithBackup(n){this.submitHighScore(n).subscribe({next:i=>{console.log("High score submitted successfully:",i),this.loadHighScores()},error:i=>{console.error("Failed to submit high score to API:",i);const a=[...this.highScoresSubject.value,{...n,timestamp:new Date,_id:Date.now().toString()}].sort((c,u)=>u.score-c.score).slice(0,10);this.highScoresSubject.next(a),this.saveLocalHighScores(a)}})}static{this.\u0275fac=function(i){return new(i||r)(me(tI))}}static{this.\u0275prov=Dn({token:r,factory:r.\u0275fac,providedIn:"root"})}}return r})(),sK=(()=>{class r{constructor(){this.capabilities=this.detectCapabilities()}detectCapabilities(){const n=document.createElement("canvas"),i=n.getContext("webgl")||n.getContext("experimental-webgl"),s=n.getContext("webgl2"),o=navigator.userAgent.toLowerCase(),a=o.includes("edge")||o.includes("edg/"),c=/android|webos|iphone|ipad|ipod|blackberry|iemobile|opera mini/i.test(o);let u=512,_=512,A=[512,512];if(i)try{u=i.getParameter(i.MAX_TEXTURE_SIZE),_=i.getParameter(i.MAX_RENDERBUFFER_SIZE),A=i.getParameter(i.MAX_VIEWPORT_DIMS)}catch(O){console.warn("Error detecting WebGL capabilities:",O)}return n.remove(),{supportsWebGL:!!i,supportsWebGL2:!!s,isEdge:a,isMobile:c,maxTextureSize:Math.min(u,a?1024:2048),maxRenderbufferSize:_,maxViewportDims:A}}getPerformanceSettings(){const{isEdge:n,isMobile:i,supportsWebGL:s,maxTextureSize:o}=this.capabilities;return{maxParticles:n?50:i?30:100,targetFPS:n?30:60,antialias:!n&&!i,shadows:!n&&!i,textureSize:Math.min(o,n?512:1024),enableP5:!n||this.isHighEndDevice(),p5FrameRate:n?15:30,useWebGL:s&&(!n||this.isHighEndDevice()),webGLContextAttributes:{alpha:!1,antialias:!1,depth:!0,failIfMajorPerformanceCaveat:n,powerPreference:n?"default":"high-performance",premultipliedAlpha:!1,preserveDrawingBuffer:!1,stencil:!1},enableAnimations:!this.isLowEndDevice(),reduceMotion:n&&this.isLowEndDevice(),lazyLoad:!0,preloadAssets:!n,useRAF:!0,enableGPUAcceleration:!n,browserInfo:{isEdge:n,isMobile:i,supportsWebGL:s,userAgent:navigator.userAgent}}}isHighEndDevice(){const{maxTextureSize:n,maxRenderbufferSize:i}=this.capabilities,c=navigator.hardwareConcurrency&&navigator.hardwareConcurrency>=4;return("number"==typeof n?n:512)>=2048&&("number"==typeof i?i:512)>=2048&&!!c}isLowEndDevice(){const{maxTextureSize:n,isMobile:i}=this.capabilities,a=navigator.hardwareConcurrency&&navigator.hardwareConcurrency<2;return i||("number"==typeof n?n:512)<1024||!!a}getBrowserRecommendations(){const n=[];return this.capabilities.isEdge&&(n.push("For better performance in Edge, consider using Chrome or Firefox"),n.push("Enable hardware acceleration in Edge settings"),n.push("Close other browser tabs to free up memory"),n.push("Update to the latest version of Edge")),this.isLowEndDevice()&&(n.push("Consider reducing game quality settings for better performance"),n.push("Close unnecessary applications to free up system resources")),this.capabilities.supportsWebGL||n.push("Your browser does not support WebGL - some features may be limited"),n}startPerformanceMonitoring(){if(typeof performance<"u"&&performance.mark){performance.mark("game-start");let n=0,i=performance.now();const s=()=>{n++;const o=performance.now();if(o-i>=1e3){const a=Math.round(1e3*n/(o-i));console.log(`Current FPS: ${a} (Edge: ${this.capabilities.isEdge})`),a<20&&this.capabilities.isEdge&&console.warn("Low FPS detected in Edge - consider reducing graphics quality"),n=0,i=o}requestAnimationFrame(s)};requestAnimationFrame(s)}}getCapabilities(){return{...this.capabilities}}static{this.\u0275fac=function(i){return new(i||r)}}static{this.\u0275prov=Dn({token:r,factory:r.\u0275fac,providedIn:"root"})}}return r})();const oK=["p5FullscreenContainer"];function aK(r,t){if(1&r&&(Dt(0,"div",85)(1,"span",86),qt(2,"Time:"),Nt(),Dt(3,"span",87),qt(4),Nt()()),2&r){const n=or();An(3),Qo("text-danger",n.timeRemaining<=10)("text-warning",n.timeRemaining<=30&&n.timeRemaining>10),An(1),_o(" ",n.timeRemaining,"s ")}}function lK(r,t){1&r&&(Dt(0,"span",92),qt(1,"\u2713"),Nt())}function cK(r,t){if(1&r&&(Dt(0,"div",88)(1,"span",89),qt(2,"Selected:"),Nt(),Dt(3,"span",90),qt(4),$r(5,lK,2,0,"span",91),Nt()()),2&r){const n=or();An(3),Qo("text-success",n.totalSelectedValue===n.targetNumber)("text-warning",n.totalSelectedValue>n.targetNumber),An(1),_o(" ",n.totalSelectedValue||0," "),An(1),Ir("ngIf",n.totalSelectedValue===n.targetNumber)}}function uK(r,t){if(1&r&&(Dt(0,"div",93)(1,"span",94),qt(2,"Score:"),Nt(),Dt(3,"span",95),qt(4),Nt()()),2&r){const n=or();An(4),xs(n.currentScore)}}function dK(r,t){if(1&r){const n=Jo();Dt(0,"button",96),Or("click",function(){return Pi(n),Ri(or().startGame())}),_s(1,"i",97),qt(2," Start Game "),Nt()}}function hK(r,t){if(1&r){const n=Jo();Dt(0,"button",98),Or("click",function(){return Pi(n),Ri(or().restartGame())}),_s(1,"i",99),qt(2," Restart "),Nt()}}function fK(r,t){if(1&r){const n=Jo();Dt(0,"button",100),Or("click",function(){return Pi(n),Ri(or().restartGame())}),qt(1," Play Again "),Nt()}}function pK(r,t){if(1&r){const n=Jo();Dt(0,"button",96),Or("click",function(){return Pi(n),Ri(or().restartGame())}),qt(1," Play Again "),Nt()}}function mK(r,t){1&r&&(Dt(0,"span",104),qt(1,"\u2744"),Nt())}function gK(r,t){if(1&r){const n=Jo();Dt(0,"div",102),Or("click",function(){Pi(n);const s=or().index;return Ri(or().toggleTileSelection(s))}),$r(1,mK,2,0,"span",103),Nt()}if(2&r){const n=or(),i=n.$implicit,s=n.index,o=or();Om("left",i[0],"px")("top",i[1],"px")("animation-delay",o.TILE_ANIMATION_DELAYS[s],"ms"),Qo("selected",o.TILE_SELECTED[s]),Ko("data-index",s),An(1),Ir("ngForOf",o.getSnowflakeArray(o.TILE_VALUES[s]))}}function yK(r,t){if(1&r&&(td(0),$r(1,gK,2,10,"div",101),nd()),2&r){const n=t.index,i=or();An(1),Ir("ngIf",!i.TILE_HIDDEN[n])}}function vK(r,t){1&r&&(Dt(0,"h1",124),qt(1,"Game Over"),Nt())}function bK(r,t){if(1&r){const n=Jo();Dt(0,"div",125)(1,"input",126),Or("ngModelChange",function(s){return Pi(n),Ri(or(2).customPlayerName=s)})("keyup.enter",function(){return Pi(n),Ri(or(2).updatePlayerName())}),Nt(),Dt(2,"div",127)(3,"button",128),Or("click",function(){return Pi(n),Ri(or(2).updatePlayerName())}),qt(4,"Save"),Nt(),Dt(5,"button",129),Or("click",function(){return Pi(n),Ri(or(2).showPlayerNameInput=!1)}),qt(6,"Cancel"),Nt(),Dt(7,"button",130),Or("click",function(){return Pi(n),Ri(or(2).resetPlayerName())}),qt(8,"\u{1f504}"),Nt()()()}if(2&r){const n=or(2);An(1),Ir("ngModel",n.customPlayerName)}}function _K(r,t){1&r&&(Dt(0,"p",134),qt(1," \u{1f389} New High Score! \u{1f389} "),Nt())}function xK(r,t){if(1&r&&(Dt(0,"div",131)(1,"h3"),qt(2," Your Score: "),Dt(3,"span",132),qt(4),Nt()(),$r(5,_K,2,0,"p",133),Nt()),2&r){const n=or(2);An(4),xs(n.currentScore),An(1),Ir("ngIf",n.isHighScore(n.currentScore))}}function wK(r,t){if(1&r&&(td(0),Dt(1,"div",137)(2,"span",138),qt(3),Nt(),Dt(4,"div",139)(5,"span",140),qt(6),Nt(),Dt(7,"span",95),qt(8),Nt()()(),nd()),2&r){const n=t.ngIf,i=or().$implicit,s=or(2);An(3),xs(i),An(3),xs(n.name),An(1),Qo("current-score-highlight",n.score===s.currentScore&&s.isHighScore(s.currentScore)),An(1),_o(" ",n.score," ")}}function SK(r,t){if(1&r&&(Dt(0,"div",141)(1,"span",138),qt(2),Nt(),Dt(3,"div",139),_s(4,"span",142)(5,"span",143),Nt()()),2&r){const n=or().$implicit;An(2),xs(n)}}function MK(r,t){if(1&r&&(td(0),$r(1,wK,9,5,"ng-container",135),$r(2,SK,6,1,"ng-template",null,136,Q2),nd()),2&r){const n=t.$implicit,i=function JE(r){return xu(function Ej(){return Wn.lFrame.contextLView}(),wr+r)}(3),s=or(2);An(1),Ir("ngIf",s.getScoreEntryAtRank(n))("ngIfElse",i)}}function EK(r,t){1&r&&(Dt(0,"div",144)(1,"p"),qt(2,"No high scores yet!"),Nt(),Dt(3,"p"),qt(4,"Start playing to set your first record!"),Nt()())}const CK=function(){return[1,2,3,4,5,6,7,8,9,10]};function TK(r,t){if(1&r){const n=Jo();Dt(0,"div",105)(1,"div",106)(2,"div",107)(3,"span",108),qt(4,"\u{1f3c6}"),Nt(),Dt(5,"div",109),$r(6,vK,2,0,"h1",110),Dt(7,"h2"),qt(8,"High Scores"),Nt()(),Dt(9,"span",111),qt(10,"\u{1f3c6}"),Nt()(),Dt(11,"div",112)(12,"div",113)(13,"span",114),qt(14,"Playing as:"),Nt(),Dt(15,"span",115),qt(16),Nt(),Dt(17,"button",116),Or("click",function(){Pi(n);const s=or();return Ri(s.showPlayerNameInput=!s.showPlayerNameInput)}),qt(18," \u270f\ufe0f "),Nt()(),$r(19,bK,9,1,"div",117),Nt(),$r(20,xK,6,2,"div",118),Dt(21,"div",119),$r(22,MK,4,2,"ng-container",73),$r(23,EK,5,0,"div",120),Nt(),Dt(24,"div",121)(25,"button",122),Or("click",function(){return Pi(n),Ri(or().playAgain())}),qt(26),Nt(),Dt(27,"button",123),Or("click",function(){return Pi(n),Ri(or().closeHighScores())}),qt(28," Close "),Nt()()()()}if(2&r){const n=or();An(6),Ir("ngIf","lost"===n.gameState||n.wasGameRestarted),An(10),xs(n.currentPlayerName),An(3),Ir("ngIf",n.showPlayerNameInput),An(1),Ir("ngIf",n.currentScore>0),An(2),Ir("ngForOf",function P2(r,t,n){const i=Vs()+r,s=Pt();return s[i]===ir?ba(s,i,n?t.call(n):t()):function Kh(r,t){return r[t]}(s,i)}(7,CK)),An(1),Ir("ngIf",0===n.getValidHighScores().length),An(3),_o(" ",n.currentScore>0||"lost"===n.gameState||n.wasGameRestarted?"Play Again":"Play Game"," ")}}function AK(r,t){if(1&r){const n=Jo();Dt(0,"div",145)(1,"div",146)(2,"div",147)(3,"span",108),qt(4,"\u{1f3c6}"),Nt(),Dt(5,"h2"),qt(6,"Level Complete!"),Nt(),Dt(7,"span",111),qt(8,"\u{1f3c6}"),Nt()(),Dt(9,"div",148)(10,"h3"),qt(11,"\u{1f389} Congratulations! \u{1f389}"),Nt(),Dt(12,"p"),qt(13,"You've cleared all the ice blocks!"),Nt(),Dt(14,"div",149)(15,"div",150)(16,"h4"),qt(17,"Current Level: "),Dt(18,"span",151),qt(19),Nt()()(),Dt(20,"div",152)(21,"h4"),qt(22,"Next Level: "),Dt(23,"span",151),qt(24),Nt()(),Dt(25,"p"),qt(26,"Ice rows will drop faster!"),Nt(),Dt(27,"p",153),qt(28),Nt()(),Dt(29,"div",154)(30,"h4"),qt(31,"Current Score: "),Dt(32,"span",132),qt(33),Nt()()()()(),Dt(34,"div",155)(35,"button",156),Or("click",function(){return Pi(n),Ri(or().continueToNextLevel())}),_s(36,"i",97),qt(37),Nt(),Dt(38,"button",123),Or("click",function(){return Pi(n),Ri(or().restartGame())}),_s(39,"i",157),qt(40," Main Menu "),Nt()()()()}if(2&r){const n=or();An(19),xs(n.currentLevel-1),An(5),xs(n.currentLevel),An(4),_o("Drop Speed: ",n.levelUpDropSpeed,"ms"),An(5),xs(n.currentScore),An(4),_o(" Continue to Level ",n.currentLevel," ")}}let DK=(()=>{class r{constructor(n,i,s,o){this.configService=n,this.userService=i,this.highScoresService=s,this.performanceService=o,this.title="IceBreaker",this.screenWidth=0,this.screenHeight=0,this.tileRenderers=[],this.tileScenes=[],this.tileCameras=[],this.tileSnowflakeMeshes=[],this.LEVEL_MINIMUM_ROWS=[1,2,2,2,3,3,3,3,4,4,4,4,4,5,5,5,5,5,6,6,6,6,6,7,7,7,7,7,8,8,8,8,8,9],this.ROW_COUNT=8,this.COLUMN_COUNT=10,this.TILE_SIZE=[64,64],this.TILE_PLACEMENT=[],this.TILE_VALUES=[],this.TILE_SELECTED=[],this.TILE_ANIMATION_DELAYS=[],this.selectedTileIndices=[],this.selectedTileValues=[],this.totalSelectedValue=0,this.targetNumber=0,this.showCorrectFlash=!1,this.TILE_HIDDEN=[],this.timeRemaining=120,this.gameState="waiting",this.gameStarted=!1,this.gameTimer=null,this.wasGameRestarted=!1,this.isLevelUpMode=!1,this.currentLevel=1,this.levelUpDropSpeed=1e3,this.levelUpTimer=null,this.showLevelUpBanner=!1,this.currentRowDropInterval=55e3,this.currentScore=0,this.gameAttempts=0,this.highScores=[],this.showHighScores=!0,this.currentPlayerName="",this.customPlayerName="",this.showPlayerNameInput=!1,this.currentRowCount=0,this.maxRowCount=8,this.rowDropTimer=null,this.clunkAudio=null,this.iceBreakAudio=null,this.dingAudio=null,this.whooshAudio=null}ngOnInit(){this.performanceSettings=this.performanceService.getPerformanceSettings(),console.log("Browser Performance Settings:",this.performanceSettings),this.performanceSettings.browserInfo.isEdge&&(this.performanceService.startPerformanceMonitoring(),console.log("Edge browser detected - performance optimizations enabled")),this.initializePlayerName(),this.screenWidth=this.configService.getScreenWidth(),this.screenHeight=this.configService.getScreenHeight(),this.loadHighScores(),this.performanceSettings.enableAnimations&&(this.initializeClunkSound(),this.initializeIceBreakSound(),this.initializeDingSound(),this.initializeWhooshSound()),this.COLUMN_COUNT=Math.floor((this.screenWidth-80)/(this.TILE_SIZE[0]+10))-1,this.COLUMN_COUNT=Math.max(this.COLUMN_COUNT,6),this.COLUMN_COUNT=Math.min(this.COLUMN_COUNT,18),this.initializeLevel(0)}ngAfterViewInit(){this.performanceSettings.enableP5?(console.log("Initializing p5.js with frame rate:",this.performanceSettings.p5FrameRate),this.initP5Fullscreen()):console.log("Skipping p5.js initialization for better performance")}loadHighScores(){this.highScoresService.highScores$.subscribe(n=>{this.highScores=n})}initializeClunkSound(){try{this.clunkAudio=new Audio,this.clunkAudio.src="assets/sounds/IceDropSfx.mp3",this.clunkAudio.preload="auto",this.clunkAudio.volume=.4}catch(n){console.warn("Could not initialize clunk sound:",n),this.clunkAudio=null}}initializeIceBreakSound(){try{this.iceBreakAudio=new Audio,this.iceBreakAudio.src="assets/sounds/IceBreak.mp3",this.iceBreakAudio.preload="auto",this.iceBreakAudio.volume=.5}catch(n){console.warn("Could not initialize ice break sound:",n),this.iceBreakAudio=null}}initializeDingSound(){try{this.dingAudio=new Audio,this.dingAudio.src="assets/sounds/Ding.mp3",this.dingAudio.preload="auto",this.dingAudio.volume=.6}catch(n){console.warn("Could not initialize ding sound:",n),this.dingAudio=null}}initializeWhooshSound(){try{this.whooshAudio=new Audio,this.whooshAudio.src="assets/sounds/whoosh-hit02.mp3",this.whooshAudio.preload="auto",this.whooshAudio.volume=.7}catch(n){console.warn("Could not initialize whoosh sound:",n),this.whooshAudio=null}}playClunkSound(){if(this.clunkAudio)try{this.clunkAudio.currentTime=0,this.clunkAudio.play().catch(n=>{console.warn("Could not play IceDropSfx sound:",n)})}catch(n){console.warn("Error playing IceDropSfx sound:",n)}}playIceBreakSound(){if(this.iceBreakAudio)try{this.iceBreakAudio.currentTime=0,this.iceBreakAudio.play().catch(n=>{console.warn("Could not play IceBreak sound:",n)})}catch(n){console.warn("Error playing IceBreak sound:",n)}}playDingSound(){if(this.dingAudio)try{this.dingAudio.currentTime=0,this.dingAudio.play().catch(n=>{console.warn("Could not play ding sound:",n)})}catch(n){console.warn("Error playing ding sound:",n)}}playWhooshSound(){if(this.whooshAudio)try{this.whooshAudio.currentTime=0,this.whooshAudio.play().catch(n=>{console.warn("Could not play whoosh sound:",n)})}catch(n){console.warn("Error playing whoosh sound:",n)}}addHighScore(n){if(n<=0)return;const i=this.getPlayerNameForScore();this.highScores=this.highScores.filter(o=>o.playerName!==i),this.highScoresService.submitScoreWithBackup({playerName:i,score:n,targetNumber:this.targetNumber,attempts:this.gameAttempts,gameType:"ice-fishing"})}isHighScore(n){return this.highScoresService.isHighScore(n)}getValidHighScores(){return this.highScores.filter(n=>n.score>0).map(n=>({name:n.playerName,score:n.score}))}getValidHighScoresWithRanking(){return this.getValidHighScores().map((n,i)=>({...n,rank:i+1}))}getScoreEntryAtRank(n){const i=this.getValidHighScores();return n<=i.length?{...i[n-1],rank:n}:null}initP5Fullscreen(){try{this.p5FullscreenContainer?new tK(i=>{let s=[];i.setup=()=>{i.createCanvas(i.windowWidth,i.windowHeight),i.frameRate(this.performanceSettings.p5FrameRate);const o=this.performanceSettings.maxParticles;for(let a=0;a<o;a++)s.push({x:i.random(i.width),y:i.random(i.height),size:i.random(3,8),speed:i.random(1,3),angle:i.random(i.TWO_PI),amplitude:i.random(10,30),frequency:i.random(.02,.05),opacity:i.random(150,255)});console.log(`Initialized ${o} snowflakes at ${this.performanceSettings.p5FrameRate}fps`)},i.draw=()=>{i.clear(),i.fill(255),i.noStroke();for(let o of s){o.angle+=o.frequency;let a=Math.sin(o.angle)*o.amplitude;o.y+=o.speed,o.x+=.02*a,o.y>i.height+o.size&&(o.y=-o.size,o.x=i.random(i.width),o.angle=i.random(i.TWO_PI)),o.x>i.width+o.size?o.x=-o.size:o.x<-o.size&&(o.x=i.width+o.size),i.fill(255,o.opacity),i.circle(o.x,o.y,o.size),i.stroke(255,o.opacity),i.strokeWeight(1);let c=.8*o.size;i.line(o.x-c,o.y,o.x+c,o.y),i.line(o.x,o.y-c,o.x,o.y+c),i.noStroke()}},i.windowResized=()=>{i.resizeCanvas(i.windowWidth,i.windowHeight)}},this.p5FullscreenContainer.nativeElement):console.error("p5FullscreenContainer is not available")}catch(n){console.error("Full-screen p5.js initialization failed:",n)}}initializeLevel(n){n=n<this.LEVEL_MINIMUM_ROWS.length?n:this.LEVEL_MINIMUM_ROWS.length-1,this.TILE_PLACEMENT=[],this.TILE_VALUES=[],this.TILE_SELECTED=[],this.TILE_ANIMATION_DELAYS=[],this.TILE_HIDDEN=[],this.selectedTileIndices=[],this.selectedTileValues=[],this.totalSelectedValue=0;for(let i=0;i<this.COLUMN_COUNT;i++)for(let s=0;s<this.ROW_COUNT;s++){this.TILE_PLACEMENT.push([i*this.TILE_SIZE[0],s*this.TILE_SIZE[1]]),this.TILE_VALUES.push(this.getRandomTileValue()),this.TILE_SELECTED.push(!1),this.TILE_HIDDEN.push(!(s>=this.ROW_COUNT-this.currentRowCount));const c=150*(this.ROW_COUNT-1-s),u=100*Math.random();this.TILE_ANIMATION_DELAYS.push(c+u)}this.generateTargetNumber()}getRandomTileValue(){return Math.floor(4*Math.random())+1}getSnowflakeArray(n){return new Array(n).fill(0)}getTileValue(n){return this.TILE_VALUES[n]||1}getGameGridWidth(){return this.COLUMN_COUNT*this.TILE_SIZE[0]}getGameGridHeight(){return this.ROW_COUNT*this.TILE_SIZE[1]}toggleTileSelection(n){if("playing"===this.gameState&&this.gameStarted&&n>=0&&n<this.TILE_SELECTED.length&&!this.TILE_HIDDEN[n]){if(this.TILE_SELECTED[n]=!this.TILE_SELECTED[n],this.TILE_SELECTED[n])this.selectedTileIndices.push(n),this.selectedTileValues.push(this.TILE_VALUES[n]);else{const i=this.selectedTileIndices.indexOf(n);i>-1&&(this.selectedTileIndices.splice(i,1),this.selectedTileValues.splice(i,1))}this.updateSelectedTotal()}}updateSelectedTotal(){this.totalSelectedValue=this.selectedTileValues.reduce((n,i)=>n+i,0),this.totalSelectedValue===this.targetNumber&&this.selectedTileIndices.length>0&&this.handleTargetMatch()}generateTargetNumber(){const n=this.TILE_HIDDEN.filter(i=>!i).length;if(n<=10&&n>0){let i=0;for(let s=0;s<this.TILE_VALUES.length;s++)this.TILE_HIDDEN[s]||(i+=this.TILE_VALUES[s]);this.targetNumber=i,console.log(`Endgame mode: ${n} tiles remaining, target set to sum: ${this.targetNumber}`)}else this.targetNumber=Math.floor(16*Math.random())+1}handleTargetMatch(){this.gameAttempts++,this.showCorrectFlash=!0,setTimeout(()=>{this.showCorrectFlash=!1},800),this.playIceBreakSound(),this.playDingSound(),this.currentScore+=this.targetNumber,this.selectedTileIndices.forEach(n=>{const i=document.querySelector(`[data-index="${n}"]`);i&&i.classList.add("disappearing")}),setTimeout(()=>{this.selectedTileIndices.forEach(i=>{this.TILE_HIDDEN[i]=!0}),this.clearSelection(),this.dropTilesToFillGaps(),this.generateTargetNumber(),this.TILE_HIDDEN.every(i=>i)&&this.startLevelUpMode()},800)}dropTilesToFillGaps(){for(let n=0;n<this.COLUMN_COUNT;n++)this.dropTilesInColumn(n)}dropTilesInColumn(n){const i=[];for(let a=0;a<this.TILE_PLACEMENT.length;a++)Math.round(this.TILE_PLACEMENT[a][0]/this.TILE_SIZE[0])===n&&i.push({index:a,row:Math.round(this.TILE_PLACEMENT[a][1]/this.TILE_SIZE[1])});i.sort((a,c)=>a.row-c.row);const s=i.filter(a=>!this.TILE_HIDDEN[a.index]),o=this.ROW_COUNT-s.length;for(let a=0;a<s.length;a++){const c=s[a].index,_=(o+a)*this.TILE_SIZE[1];this.TILE_PLACEMENT[c][1]!==_&&(this.TILE_PLACEMENT[c][1]=_)}}animateTileDrop(n){const i=document.querySelector(`[data-index="${n}"]`);i&&(i.classList.add("dropping"),setTimeout(()=>{i.classList.remove("dropping")},800))}initializeTileSnowflakes(){console.log("Initializing tile snowflakes..."),this.tileRenderers.forEach(n=>{n&&n.dispose()}),this.tileRenderers=[],this.tileScenes=[],this.tileCameras=[],this.tileSnowflakeMeshes=[];for(let n=0;n<this.TILE_PLACEMENT.length;n++)this.TILE_HIDDEN[n]?(this.tileRenderers.push(null),this.tileScenes.push(null),this.tileCameras.push(null),this.tileSnowflakeMeshes.push([])):this.createTileSnowflake(n);console.log(`Initialized snowflakes for ${this.tileRenderers.filter(n=>null!==n).length} tiles`)}createTileSnowflake(n){try{if(!this.performanceSettings.useWebGL)return console.log("Skipping Three.js tile snowflake for performance"),this.tileRenderers.push(null),this.tileScenes.push(null),this.tileCameras.push(null),void this.tileSnowflakeMeshes.push([]);const i=document.querySelector(`[data-index="${n}"]`);if(!i)return console.warn(`Tile element not found for index ${n}`),this.tileRenderers.push(null),this.tileScenes.push(null),this.tileCameras.push(null),void this.tileSnowflakeMeshes.push([]);console.log(`Creating snowflake for tile ${n}`);const s=new hO,o=new Ss(75,1,.1,1e3);o.position.z=3;const a=new dO({alpha:!0,antialias:this.performanceSettings.antialias,...this.performanceSettings.webGLContextAttributes});a.setSize(60,60),a.setClearColor(0,0),a.setPixelRatio(this.performanceSettings.enableGPUAcceleration?Math.min(window.devicePixelRatio,2):1);const c=a.domElement;c.style.position="absolute",c.style.top="2px",c.style.left="2px",c.style.pointerEvents="none",c.style.zIndex="1",c.style.borderRadius="4px",i.querySelectorAll("canvas").forEach(G=>G.remove()),i.appendChild(c);const _=[],A=this.TILE_VALUES[n];console.log(`Creating ${A} snowflakes for tile ${n}`);for(let G=0;G<A;G++){const Y=this.createSnowflakeMesh();if(1===A)Y.position.set(0,0,0);else if(2===A)Y.position.set(0===G?-.3:.3,0,0);else if(3===A){const ne=[[-.3,.2],[.3,.2],[0,-.2]];Y.position.set(ne[G][0],ne[G][1],0)}else{const ne=[[-.25,.25],[.25,.25],[-.25,-.25],[.25,-.25]];Y.position.set(ne[G][0],ne[G][1],0)}_.push(Y),s.add(Y)}const O=new oL(16777215,.6);s.add(O);const B=new sL(16777215,.8);B.position.set(1,1,2),s.add(B),this.tileRenderers.push(a),this.tileScenes.push(s),this.tileCameras.push(o),this.tileSnowflakeMeshes.push(_),a.render(s,o),this.animateTileSnowflake(n),console.log(`Successfully created snowflake for tile ${n}`)}catch(i){console.error(`Error creating snowflake for tile ${n}:`,i),this.createTextSnowflakeFallback(n),this.tileRenderers.push(null),this.tileScenes.push(null),this.tileCameras.push(null),this.tileSnowflakeMeshes.push([])}}createTextSnowflakeFallback(n){const i=document.querySelector(`[data-index="${n}"]`);if(!i)return;console.log(`Creating text snowflake fallback for tile ${n}`);const s=this.TILE_VALUES[n];for(let o=0;o<s;o++){const a=document.createElement("span");a.textContent="\u2744",a.className="snowflake fallback-snowflake",a.style.color="white",a.style.fontSize="16px",a.style.textShadow="1px 1px 2px rgba(0,0,0,0.5)",a.style.margin="1px",a.style.animation="sparkle 2s infinite alternate",i.appendChild(a)}}createSnowflakeMesh(){const n=new Xy(.1,.02,6),i=new ZO({color:16777215,shininess:100,transparent:!0,opacity:.9}),s=new ws(n,i);return s.rotation.x=Math.random()*Math.PI,s.rotation.y=Math.random()*Math.PI,s.rotation.z=Math.random()*Math.PI,s}animateTileSnowflake(n){const i=()=>{this.TILE_HIDDEN[n]||!this.tileRenderers[n]||(this.tileSnowflakeMeshes[n]?.forEach((s,o)=>{s&&(s.rotation.z+=.02+.005*o,s.rotation.x+=.01)}),this.tileRenderers[n]&&this.tileScenes[n]&&this.tileCameras[n]&&this.tileRenderers[n].render(this.tileScenes[n],this.tileCameras[n]),requestAnimationFrame(i))};i()}cleanupTileSnowflake(n){if(this.tileRenderers[n]){const i=this.tileRenderers[n].domElement;i&&i.parentNode&&i.parentNode.removeChild(i),this.tileRenderers[n].dispose(),this.tileSnowflakeMeshes[n]?.forEach(s=>{s.geometry&&s.geometry.dispose(),s.material&&(Array.isArray(s.material)?s.material.forEach(o=>o.dispose()):s.material.dispose())}),this.tileRenderers[n]=null,this.tileScenes[n]=null,this.tileCameras[n]=null,this.tileSnowflakeMeshes[n]=[]}}updateTileSnowflakesAfterDrop(){for(let n=0;n<this.tileRenderers.length;n++)this.tileRenderers[n]&&!this.TILE_HIDDEN[n]&&this.cleanupTileSnowflake(n);setTimeout(()=>{this.initializeTileSnowflakes()},100)}getSelectedValuesString(){return 0===this.selectedTileValues.length?"No tiles selected":this.selectedTileValues.join(" + ")}clearSelection(){this.selectedTileIndices=[],this.selectedTileValues=[],this.totalSelectedValue=0,this.TILE_SELECTED.fill(!1)}startGame(){this.currentScore=0,this.gameAttempts=0,this.showHighScores=!1,this.wasGameRestarted=!1,this.startGameTimer()}closeHighScores(){this.showHighScores=!1}addNewRow(){if(this.currentRowCount>=this.maxRowCount)return;this.playWhooshSound();const n=this.ROW_COUNT-1-this.currentRowCount;for(let i=0;i<this.COLUMN_COUNT;i++){const s=i*this.ROW_COUNT+n;s<this.TILE_HIDDEN.length&&this.TILE_HIDDEN[s]&&(this.TILE_HIDDEN[s]=!1)}this.dropTilesToFillGaps(),setTimeout(()=>{for(let i=0;i<this.COLUMN_COUNT;i++){const s=i*this.ROW_COUNT+n;if(s<this.TILE_HIDDEN.length&&!this.TILE_HIDDEN[s]){const o=document.querySelector(`[data-index="${s}"]`);o&&(o.style.removeProperty("opacity"),o.style.removeProperty("transform"),o.style.removeProperty("animation"),setTimeout(()=>{o.classList.add("newly-dropped"),setTimeout(()=>{o.classList.remove("newly-dropped")},600)},100*i))}}},50),this.currentRowCount++}startGameTimer(){this.timeRemaining=120,this.gameState="playing",this.gameStarted=!0,this.addNewRow(),setTimeout(()=>{this.addNewRow()},500),this.gameTimer=setInterval(()=>{this.timeRemaining--,this.timeRemaining<=0&&this.endGame("lost")},1e3),this.rowDropTimer=setInterval(()=>{this.addNewRow()},this.currentRowDropInterval)}endGame(n){this.gameState=n,this.currentScore>0&&this.addHighScore(this.currentScore),this.showHighScores=!0,this.gameTimer&&(clearInterval(this.gameTimer),this.gameTimer=null),this.rowDropTimer&&(clearInterval(this.rowDropTimer),this.rowDropTimer=null)}startLevelUpMode(){this.isLevelUpMode=!0,this.gameState="levelup",this.currentLevel++,this.timeRemaining+=20,console.log(`Level ${this.currentLevel} bonus: +20 seconds! Time remaining: ${this.timeRemaining}s`),this.currentRowDropInterval=Math.max(5e3,this.currentRowDropInterval-1e4),console.log(`Level ${this.currentLevel} challenge: Row drops now every ${this.currentRowDropInterval/1e3}s`),this.gameTimer&&(clearInterval(this.gameTimer),this.gameTimer=null),this.showLevelUpBanner=!0,this.levelUpDropSpeed=Math.max(200,1e3-100*this.currentLevel),console.log(`Level ${this.currentLevel} ready! Drop speed will be: ${this.levelUpDropSpeed}ms`)}continueToNextLevel(){this.showLevelUpBanner=!1,this.resetBoardForLevelUp(),this.startGameTimer(),this.currentRowCount=2;for(let n=0;n<this.COLUMN_COUNT;n++){const i=n*this.ROW_COUNT+(this.ROW_COUNT-1);i<this.TILE_HIDDEN.length&&(this.TILE_HIDDEN[i]=!1);const s=n*this.ROW_COUNT+(this.ROW_COUNT-2);s<this.TILE_HIDDEN.length&&(this.TILE_HIDDEN[s]=!1)}console.log(`Level ${this.currentLevel} started! Revealed exactly 2 rows.`)}resetBoardForLevelUp(){this.rowDropTimer&&(clearInterval(this.rowDropTimer),this.rowDropTimer=null),this.TILE_PLACEMENT=[],this.TILE_VALUES=[],this.TILE_SELECTED=[],this.TILE_ANIMATION_DELAYS=[],this.TILE_HIDDEN=[],this.selectedTileIndices=[],this.selectedTileValues=[],this.totalSelectedValue=0,this.currentRowCount=0;for(let n=0;n<this.COLUMN_COUNT;n++)for(let i=0;i<this.ROW_COUNT;i++){this.TILE_PLACEMENT.push([n*this.TILE_SIZE[0],i*this.TILE_SIZE[1]]),this.TILE_VALUES.push(this.getRandomTileValue()),this.TILE_SELECTED.push(!1),this.TILE_HIDDEN.push(!0);const o=150*(this.ROW_COUNT-1-i),a=100*Math.random();this.TILE_ANIMATION_DELAYS.push(o+a)}this.generateTargetNumber(),this.gameState="playing"}startLevelUpRowDropping(){this.levelUpTimer&&clearInterval(this.levelUpTimer),this.levelUpTimer=setInterval(()=>{"playing"===this.gameState&&this.isLevelUpMode&&this.addNewRow()},this.levelUpDropSpeed)}restartGame(){"playing"===this.gameState&&this.currentScore>0&&this.addHighScore(this.currentScore),this.wasGameRestarted="playing"===this.gameState,this.showHighScores=!0,this.gameTimer&&clearInterval(this.gameTimer),this.rowDropTimer&&(clearInterval(this.rowDropTimer),this.rowDropTimer=null),this.levelUpTimer&&(clearInterval(this.levelUpTimer),this.levelUpTimer=null),this.gameState="waiting",this.gameStarted=!1,this.timeRemaining=120,this.isLevelUpMode=!1,this.currentLevel=1,this.levelUpDropSpeed=1e3,this.showLevelUpBanner=!1,this.currentScore=0,this.gameAttempts=0,this.currentRowDropInterval=55e3,this.currentRowCount=0,this.initializeLevel(0)}playAgain(){this.closeHighScores(),this.gameTimer&&clearInterval(this.gameTimer),this.rowDropTimer&&(clearInterval(this.rowDropTimer),this.rowDropTimer=null),this.gameState="waiting",this.gameStarted=!1,this.timeRemaining=120,this.currentScore=0,this.currentRowCount=0,this.initializeLevel(0),this.startGame()}initializePlayerName(){this.currentPlayerName=this.userService.getPCUsername(),console.log("Player name initialized:",this.currentPlayerName)}getPlayerNameForScore(){return this.customPlayerName&&this.customPlayerName.trim().length>0?(this.userService.setPreferredUsername(this.customPlayerName.trim()),this.customPlayerName.trim()):this.currentPlayerName||"Anonymous"}togglePlayerNameInput(){this.showPlayerNameInput=!this.showPlayerNameInput,this.showPlayerNameInput&&(this.customPlayerName=this.currentPlayerName)}updatePlayerName(){this.customPlayerName&&this.customPlayerName.trim().length>0&&(this.currentPlayerName=this.customPlayerName.trim(),this.userService.setPreferredUsername(this.currentPlayerName),this.showPlayerNameInput=!1,console.log("Player name updated to:",this.currentPlayerName))}resetPlayerName(){this.userService.clearStoredUsername(),this.currentPlayerName=this.userService.getPCUsername(),this.customPlayerName="",this.showPlayerNameInput=!1,console.log("Player name reset to:",this.currentPlayerName)}static{this.\u0275fac=function(i){return new(i||r)(kt(rK),kt(iK),kt(TL),kt(sK))}}static{this.\u0275cmp=Cp({type:r,selectors:[["app-root"]],viewQuery:function(i,s){if(1&i&&X2(oK,5),2&i){let o;jb(o=function Nb(){return function I4(r,t){return r[fa].queries[t].queryList}(Pt(),aS())}())&&(s.p5FullscreenContainer=o.first)}},decls:104,vars:17,consts:[["role","banner",1,"toolbar"],[1,"d-flex"],["width","60","alt","Angular Logo","src","data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyNTAgMjUwIj4KICAgIDxwYXRoIGZpbGw9IiNERDAwMzEiIGQ9Ik0xMjUgMzBMMzEuOSA2My4ybDE0LjIgMTIzLjFMMTI1IDIzMGw3OC45LTQzLjcgMTQuMi0xMjMuMXoiIC8+CiAgICA8cGF0aCBmaWxsPSIjQzMwMDJGIiBkPSJNMTI1IDMwdjIyLjItLjFWMjMwbDc4LjktNDMuNyAxNC4yLTEyMy4xTDEyNSAzMHoiIC8+CiAgICA8cGF0aCAgZmlsbD0iI0ZGRkZGRiIgZD0iTTEyNSA1Mi4xTDY2LjggMTgyLjZoMjEuN2wxMS43LTI5LjJoNDkuNGwxMS43IDI5LjJIMTgzTDEyNSA1Mi4xem0xNyA4My4zaC0zNGwxNy00MC45IDE3IDQwLjl6IiAvPgogIDwvc3ZnPg=="],[1,"title-text"],[1,"toolbar-game-info"],[1,"toolbar-target-info"],[1,"target-label"],[1,"target-number"],["class","toolbar-timer-info",4,"ngIf"],["class","toolbar-selection-info",4,"ngIf"],["class","toolbar-score-info",4,"ngIf"],[1,"toolbar-game-status"],["class","btn btn-success btn-sm",3,"click",4,"ngIf"],["class","btn btn-warning btn-sm",3,"click",4,"ngIf"],["class","btn btn-primary btn-sm",3,"click",4,"ngIf"],["aria-label","Angular on X","target","_blank","rel","noopener","href","https://twitter.com/angular","title","X"],["id","twitter-logo","xmlns","http://www.w3.org/2000/svg","height","24","width","24","data-name","Logo","viewBox","0 0 512 512","fill","#fff"],["d","M389.2 48h70.6L305.6 224.2 487 464H345L233.7 318.6 106.5 464H35.8L200.7 275.5 26.8 48H172.4L272.9 180.9 389.2 48zM364.4 421.8h39.1L151.1 88h-42L364.4 421.8z"],["aria-label","Angular on YouTube","target","_blank","rel","noopener","href","https://youtube.com/angular","title","YouTube"],["id","youtube-logo","height","24","width","24","data-name","Logo","xmlns","http://www.w3.org/2000/svg","viewBox","0 0 24 24","fill","#fff"],["d","M0 0h24v24H0V0z","fill","none"],["d","M21.58 7.19c-.23-.86-.91-1.54-1.77-1.77C18.25 5 12 5 12 5s-6.25 0-7.81.42c-.86.23-1.54.91-1.77 1.77C2 8.75 2 12 2 12s0 3.25.42 4.81c.23.86.91 1.54 1.77 1.77C5.75 19 12 19 12 19s6.25 0 7.81-.42c.86-.23 1.54-.91 1.77-1.77C22 15.25 22 12 22 12s0-3.25-.42-4.81zM10 15V9l5.2 3-5.2 3z"],["aria-label","Angular on Facebook","target","_blank","rel","noopener","href","https://facebook.com/angular","title","Facebook"],["id","facebook-logo","height","24","width","24","data-name","Logo","xmlns","http://www.w3.org/2000/svg","viewBox","0 0 24 24","fill","#fff"],["d","M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"],[1,"p5-fullscreen-background"],["p5FullscreenContainer",""],["role","main",1,"content"],[1,"game-container"],[1,"underwater-decorations"],[1,"sea-floor-rubble"],[1,"sea-floor-rubble-large","rubble-1"],[1,"sea-floor-rubble-large","rubble-2"],[1,"sea-floor-rubble-large","rubble-3"],[1,"kelp","kelp-1"],[1,"kelp","kelp-1b"],[1,"kelp","kelp-1c"],[1,"kelp","kelp-2"],[1,"kelp","kelp-2b"],[1,"kelp","kelp-2c"],[1,"kelp","kelp-3"],[1,"kelp","kelp-3b"],[1,"kelp","kelp-3c"],[1,"kelp","kelp-3d"],[1,"kelp","kelp-4"],[1,"kelp","kelp-4b"],[1,"kelp","kelp-5"],[1,"kelp","kelp-5b"],[1,"kelp","kelp-5c"],[1,"kelp","kelp-6"],[1,"kelp","kelp-6b"],[1,"kelp","kelp-6c"],[1,"kelp","kelp-7"],[1,"kelp","kelp-7b"],[1,"kelp","kelp-7c"],[1,"kelp","kelp-7d"],[1,"kelp","kelp-7e"],[1,"kelp","kelp-7f"],[1,"kelp","kelp-7g"],[1,"kelp","kelp-7h"],[1,"kelp","kelp-8"],[1,"kelp","kelp-8b"],[1,"kelp","kelp-8c"],[1,"rock","rock-4"],[1,"rock","rock-5"],[1,"coral","coral-1"],[1,"coral","coral-2"],[1,"coral","coral-3"],[1,"coral","coral-4"],[1,"coral","coral-5"],[1,"coral","coral-6"],[1,"game-grid-wrapper"],[1,"game-grid"],[4,"ngFor","ngForOf"],[1,"water-element"],[1,"fish","fish-1"],[1,"fish","fish-2"],[1,"fish","fish-3"],[1,"fish","fish-4"],[1,"fish","fish-5"],[1,"fish","fish-6"],[1,"fish","fish-7"],[1,"fish","fish-8"],["class","high-scores-modal",4,"ngIf"],["class","level-up-modal",4,"ngIf"],[1,"toolbar-timer-info"],[1,"timer-label"],[1,"timer-value"],[1,"toolbar-selection-info"],[1,"selection-label"],[1,"selection-total"],["class","match-badge",4,"ngIf"],[1,"match-badge"],[1,"toolbar-score-info"],[1,"score-label"],[1,"score-value"],[1,"btn","btn-success","btn-sm",3,"click"],[1,"fas","fa-play"],[1,"btn","btn-warning","btn-sm",3,"click"],[1,"fas","fa-redo"],[1,"btn","btn-primary","btn-sm",3,"click"],["class","game-tile",3,"selected","left","top","animation-delay","click",4,"ngIf"],[1,"game-tile",3,"click"],["class","snowflake",4,"ngFor","ngForOf"],[1,"snowflake"],[1,"high-scores-modal"],[1,"high-scores-content"],[1,"high-scores-header"],[1,"trophy-left"],[1,"header-text"],["class","game-over-text",4,"ngIf"],[1,"trophy-right"],[1,"player-name-section"],[1,"current-player"],[1,"player-label"],[1,"player-name-display"],["title","Change player name",1,"edit-name-btn",3,"click"],["class","player-name-input",4,"ngIf"],["class","current-score",4,"ngIf"],[1,"high-scores-list"],["class","no-scores","style","display: none;",4,"ngIf"],[1,"high-scores-actions"],[1,"btn","btn-primary",3,"click"],[1,"btn","btn-secondary",3,"click"],[1,"game-over-text"],[1,"player-name-input"],["type","text","placeholder","Enter your name","maxlength","20",1,"name-input",3,"ngModel","ngModelChange","keyup.enter"],[1,"name-input-actions"],[1,"save-name-btn",3,"click"],[1,"cancel-name-btn",3,"click"],["title","Reset to detected name",1,"reset-name-btn",3,"click"],[1,"current-score"],[1,"score-highlight"],["class","new-high-score",4,"ngIf"],[1,"new-high-score"],[4,"ngIf","ngIfElse"],["emptyRow",""],[1,"score-entry"],[1,"rank-number"],[1,"player-info"],[1,"player-name"],[1,"score-entry","empty-score-entry"],[1,"player-name","empty-name"],[1,"score-value","empty-score"],[1,"no-scores",2,"display","none"],[1,"level-up-modal"],[1,"level-up-content"],[1,"level-up-header"],[1,"level-up-info"],[1,"level-details"],[1,"current-level"],[1,"level-number"],[1,"next-level"],[1,"drop-speed"],[1,"current-score-display"],[1,"level-up-actions"],[1,"btn","btn-primary","btn-lg",3,"click"],[1,"fas","fa-home"]],template:function(i,s){1&i&&(Dt(0,"div",0)(1,"div",1),_s(2,"img",2),Dt(3,"span",3),qt(4,"Ice Fishing Expedition"),Nt()(),Dt(5,"div",4)(6,"div",5)(7,"span",6),qt(8,"Target:"),Nt(),Dt(9,"div",7),qt(10),Nt()(),$r(11,aK,5,5,"div",8),$r(12,cK,6,6,"div",9),$r(13,uK,5,1,"div",10),Dt(14,"div",11),$r(15,dK,3,0,"button",12),$r(16,hK,3,0,"button",13),$r(17,fK,2,0,"button",14),$r(18,pK,2,0,"button",12),Nt()(),Dt(19,"div")(20,"a",15),Op(),Dt(21,"svg",16),_s(22,"path",17),Nt()(),Lp(),Dt(23,"a",18),Op(),Dt(24,"svg",19),_s(25,"path",20)(26,"path",21),Nt()(),Lp(),Dt(27,"a",22),Op(),Dt(28,"svg",23),_s(29,"path",24),Nt()()()(),Lp(),_s(30,"div",25,26),Dt(32,"div",27)(33,"div",28)(34,"div",29),_s(35,"div",30)(36,"div",31)(37,"div",32)(38,"div",33)(39,"div",34)(40,"div",35)(41,"div",36)(42,"div",37)(43,"div",38)(44,"div",39)(45,"div",40)(46,"div",41)(47,"div",42)(48,"div",43)(49,"div",44)(50,"div",45)(51,"div",46)(52,"div",47)(53,"div",48)(54,"div",49)(55,"div",50)(56,"div",51)(57,"div",52)(58,"div",53)(59,"div",54)(60,"div",55)(61,"div",56)(62,"div",57)(63,"div",58)(64,"div",59)(65,"div",60)(66,"div",61)(67,"div",62)(68,"div",63)(69,"div",64),Dt(70,"div",65),qt(71,"\u{1fab8}"),Nt(),Dt(72,"div",66),qt(73,"\u{1fab8}"),Nt(),Dt(74,"div",67),qt(75,"\u{1fab8}"),Nt(),Dt(76,"div",68),qt(77,"\u{1fab8}"),Nt(),Dt(78,"div",69),qt(79,"\u{1fab8}"),Nt(),Dt(80,"div",70),qt(81,"\u{1fab8}"),Nt()(),Dt(82,"div",71)(83,"div",72),$r(84,yK,2,1,"ng-container",73),Nt()()()(),Dt(85,"div",74)(86,"div",75),qt(87,"\u{1f41f}"),Nt(),Dt(88,"div",76),qt(89,"\u{1f420}"),Nt(),Dt(90,"div",77),qt(91,"\u{1f421}"),Nt(),Dt(92,"div",78),qt(93,"\u{1f41f}"),Nt(),Dt(94,"div",79),qt(95,"\u{1f419}"),Nt(),Dt(96,"div",80),qt(97,"\u{1f422}"),Nt(),Dt(98,"div",81),qt(99,"\u{1f420}"),Nt(),Dt(100,"div",82),qt(101,"\u{1f41f}"),Nt()(),$r(102,TK,29,8,"div",83),$r(103,AK,41,5,"div",84)),2&i&&(An(9),Qo("flash-correct",s.showCorrectFlash),An(1),xs(s.targetNumber),An(1),Ir("ngIf",s.gameStarted),An(1),Ir("ngIf","playing"===s.gameState),An(1),Ir("ngIf",s.gameStarted||s.currentScore>0),An(2),Ir("ngIf","waiting"===s.gameState),An(1),Ir("ngIf","playing"===s.gameState),An(1),Ir("ngIf","lost"===s.gameState),An(1),Ir("ngIf","won"===s.gameState),An(65),Om("width",s.getGameGridWidth(),"px")("height",s.getGameGridHeight(),"px"),An(1),Ir("ngForOf",s.TILE_PLACEMENT),An(18),Ir("ngIf",s.showHighScores),An(1),Ir("ngIf",s.showLevelUpBanner))},dependencies:[y_,v_,bf,N_,Sg,wg],styles:['.game-container[_ngcontent-%COMP%]{display:flex;gap:20px;align-items:flex-end;justify-content:center;margin:0;position:fixed;bottom:40vh;left:0;right:0;z-index:220;width:100vw;max-width:none;padding:0 20px;box-sizing:border-box}.p5-fullscreen-background[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100vw;height:100vh;z-index:1;pointer-events:none;background:radial-gradient(circle at 75% 25%,rgb(253,255,120) 0%,rgba(255,223,186,.8) 3%,rgba(226,230,5,.15) 6%,transparent 8%),linear-gradient(180deg,#87CEEB 0%,#B0E0E6 20%,#E0F6FF 40%,#F0F8FF 60%,#F5F5DC 80%,#DEB887 100%)}.p5-fullscreen-background[_ngcontent-%COMP%]:before{content:"";position:absolute;bottom:30vh;left:0;width:100%;height:50vh;background:linear-gradient(180deg,rgba(255,255,255,.95) 0%,rgba(245,250,255,.96) 25%,rgba(225,235,245,.96) 50%,rgba(200,210,220,.97) 70%,rgba(139,105,70,.98) 85%,rgba(90,65,40,.99) 100%);clip-path:polygon(0% 100%,0% 65%,8% 50%,12% 45%,16% 55%,25% 30%,30% 25%,35% 40%,45% 20%,50% 15%,55% 30%,65% 25%,70% 22%,75% 35%,85% 45%,92% 50%,100% 60%,100% 100%);z-index:10;box-shadow:inset 0 30px 60px #00000040,inset 0 15px 30px #00000026,inset 0 5px 15px #0000001a}.p5-fullscreen-background[_ngcontent-%COMP%]:after{content:"";position:absolute;bottom:30vh;left:0;width:100%;height:45vh;background:linear-gradient(180deg,rgba(255,255,255,.92) 0%,rgba(248,252,255,.93) 30%,rgba(235,245,255,.94) 60%,rgba(215,225,235,.95) 80%,rgba(180,150,110,.96) 90%,rgba(120,90,70,.97) 100%);clip-path:polygon(0% 100%,0% 85%,15% 65%,20% 60%,25% 70%,35% 45%,40% 40%,45% 55%,55% 35%,60% 32%,65% 45%,75% 60%,80% 65%,85% 70%,95% 75%,100% 80%,100% 100%);z-index:11;box-shadow:inset 0 40px 80px #0000004d,inset 0 20px 40px #0003,inset 0 8px 20px #00000026,inset 0 2px 8px #0000001a}@keyframes _ngcontent-%COMP%_sunGlow{0%{box-shadow:0 0 20px #ffdfba99;transform:scale(1)}to{box-shadow:0 0 40px #ffb74dcc;transform:scale(1.05)}}.game-grid-wrapper[_ngcontent-%COMP%]{flex:0 0 auto;transform:none;transition:none}.game-grid[_ngcontent-%COMP%]{position:relative;margin:0 auto;transform:none;transition:none;min-width:-moz-fit-content;min-width:fit-content;width:100%;overflow-x:auto;overflow:hidden;-webkit-backdrop-filter:blur(1px);backdrop-filter:blur(1px)}.underwater-decorations[_ngcontent-%COMP%]{position:fixed;width:100vw;height:40vh;bottom:0;left:0;z-index:100;pointer-events:none;overflow:visible}.kelp[_ngcontent-%COMP%]{position:absolute;width:8px;height:200px;background:linear-gradient(180deg,rgba(34,139,34,.9) 0%,rgba(46,125,50,.85) 20%,rgba(56,142,60,.8) 40%,rgba(67,160,71,.75) 60%,rgba(76,175,80,.7) 80%,rgba(102,187,106,.65) 100%);border-radius:4px 4px 50% 50%;z-index:100;animation:_ngcontent-%COMP%_kelp-sway 3s ease-in-out infinite;transform-origin:bottom center;box-shadow:inset 1px 0 2px #fff3,inset -1px 0 2px #0003,0 0 8px #228b224d}.kelp[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:50%;width:2px;height:100%;background:linear-gradient(180deg,rgba(27,94,32,.8) 0%,rgba(46,125,50,.6) 50%,transparent 100%);transform:translate(-50%);border-radius:1px}.kelp[_ngcontent-%COMP%]:after{content:"";position:absolute;top:10%;left:-2px;width:12px;height:80%;background:linear-gradient(180deg,transparent 0%,rgba(34,139,34,.3) 20%,rgba(46,125,50,.4) 40%,rgba(56,142,60,.3) 60%,transparent 100%);border-radius:0 50% 50% 0;transform:rotate(-15deg);transform-origin:bottom left}.kelp-1[_ngcontent-%COMP%]{left:8%;bottom:0;height:250px;width:10px;animation-delay:0s}.kelp-1b[_ngcontent-%COMP%]{left:9.2%;bottom:5px;height:200px;width:8px;animation-delay:.3s}.kelp-1c[_ngcontent-%COMP%]{left:7.5%;bottom:-8px;height:180px;width:7px;animation-delay:.8s;opacity:.8}.kelp-2[_ngcontent-%COMP%]{left:22%;bottom:10px;height:220px;width:9px;animation-delay:.5s}.kelp-2b[_ngcontent-%COMP%]{left:23.5%;bottom:15px;height:190px;width:8px;animation-delay:1.2s}.kelp-2c[_ngcontent-%COMP%]{left:21.2%;bottom:3px;height:160px;width:6px;animation-delay:.9s;opacity:.7}.kelp-3[_ngcontent-%COMP%]{right:12%;bottom:-25px;height:280px;width:11px;animation-delay:1s}.kelp-3b[_ngcontent-%COMP%]{right:13.8%;bottom:-15px;height:240px;width:9px;animation-delay:1.7s}.kelp-3c[_ngcontent-%COMP%]{right:11.2%;bottom:-30px;height:200px;width:7px;animation-delay:1.4s;opacity:.8}.kelp-3d[_ngcontent-%COMP%]{right:12.8%;bottom:-18px;height:170px;width:6px;animation-delay:2.1s;opacity:.6}.kelp-4[_ngcontent-%COMP%]{left:2%;bottom:-5px;height:230px;width:8px;animation-delay:1.5s}.kelp-4b[_ngcontent-%COMP%]{left:3.2%;bottom:2px;height:190px;width:7px;animation-delay:2.3s}.kelp-5[_ngcontent-%COMP%]{right:28%;bottom:8px;height:260px;width:12px;animation-delay:2s}.kelp-5b[_ngcontent-%COMP%]{right:29.5%;bottom:12px;height:210px;width:9px;animation-delay:2.6s}.kelp-5c[_ngcontent-%COMP%]{right:27.2%;bottom:0;height:180px;width:8px;animation-delay:2.9s;opacity:.8}.kelp-6[_ngcontent-%COMP%]{right:2%;bottom:0;height:240px;width:9px;animation-delay:2.5s}.kelp-6b[_ngcontent-%COMP%]{right:3.5%;bottom:8px;height:200px;width:8px;animation-delay:3.2s}.kelp-6c[_ngcontent-%COMP%]{right:1.2%;bottom:-12px;height:160px;width:6px;animation-delay:2.8s;opacity:.7}.kelp-7[_ngcontent-%COMP%]{left:35%;bottom:-8px;height:240px;width:12px;animation-delay:3.5s}.kelp-7b[_ngcontent-%COMP%]{left:36.8%;bottom:2px;height:150px;width:5px;animation-delay:4.1s}.kelp-7c[_ngcontent-%COMP%]{left:34.2%;bottom:-15px;height:190px;width:14px;animation-delay:3.8s;opacity:.8}.kelp-7d[_ngcontent-%COMP%]{left:37.5%;bottom:-5px;height:110px;width:8px;animation-delay:4.3s;opacity:.9}.kelp-7e[_ngcontent-%COMP%]{left:33.5%;bottom:8px;height:275px;width:6px;animation-delay:3.2s}.kelp-7f[_ngcontent-%COMP%]{left:38.2%;bottom:-12px;height:95px;width:10px;animation-delay:4.7s;opacity:.7}.kelp-7g[_ngcontent-%COMP%]{left:32.8%;bottom:15px;height:220px;width:4px;animation-delay:2.9s;opacity:.85}.kelp-7h[_ngcontent-%COMP%]{left:36.1%;bottom:-20px;height:165px;width:15px;animation-delay:3.6s}.kelp-8[_ngcontent-%COMP%]{right:45%;bottom:5px;height:245px;width:10px;animation-delay:4.5s}.kelp-8b[_ngcontent-%COMP%]{right:46.5%;bottom:10px;height:205px;width:8px;animation-delay:5.2s}.kelp-8c[_ngcontent-%COMP%]{right:44.2%;bottom:-2px;height:175px;width:7px;animation-delay:4.8s;opacity:.9}@keyframes _ngcontent-%COMP%_kelp-sway{0%,to{transform:rotate(-3deg)}50%{transform:rotate(3deg)}}.rock[_ngcontent-%COMP%]{position:absolute;color:#4f4f4fe6;z-index:100;animation:_ngcontent-%COMP%_rock-bob 4s ease-in-out infinite}.rock-1[_ngcontent-%COMP%]{left:18%;bottom:15px;font-size:3rem;animation-delay:0s}.rock-2[_ngcontent-%COMP%]{right:22%;bottom:20px;font-size:2.8rem;animation-delay:1s}.rock-3[_ngcontent-%COMP%]{left:42%;bottom:-22px;font-size:5.2rem;animation-delay:2s}.rock-4[_ngcontent-%COMP%]{right:8%;bottom:-10px;width:60px;height:35px;background:linear-gradient(135deg,rgba(105,105,105,.9) 0%,rgba(119,136,153,.85) 25%,rgba(128,128,128,.8) 50%,rgba(169,169,169,.75) 75%,rgba(192,192,192,.7) 100%);border-radius:50% 60% 40% 70%;animation-delay:3s;box-shadow:inset 3px 3px 8px #ffffff4d,inset -3px -3px 8px #0006,0 2px 6px #0003}.rock-4[_ngcontent-%COMP%]:before{content:"";position:absolute;top:20%;left:15%;width:30%;height:40%;background:rgba(139,69,19,.6);border-radius:50%;box-shadow:inset 1px 1px 3px #0000004d}.rock-4[_ngcontent-%COMP%]:after{content:"";position:absolute;top:60%;right:20%;width:25%;height:30%;background:rgba(85,107,47,.5);border-radius:50%}.rock-5[_ngcontent-%COMP%]{left:58%;bottom:-5px;width:80px;height:45px;background:linear-gradient(145deg,rgba(112,128,144,.9) 0%,rgba(105,105,105,.85) 30%,rgba(128,128,128,.8) 60%,rgba(169,169,169,.75) 100%);border-radius:60% 40% 50% 80%;animation-delay:1.5s;box-shadow:inset 4px 4px 12px #ffffff4d,inset -4px -4px 12px #0006,0 3px 8px #0000004d}.rock-5[_ngcontent-%COMP%]:before{content:"";position:absolute;top:10%;left:20%;width:35%;height:50%;background:rgba(160,82,45,.5);border-radius:70% 30% 60% 40%;box-shadow:inset 2px 2px 4px #0000004d}.rock-5[_ngcontent-%COMP%]:after{content:"";position:absolute;bottom:15%;right:15%;width:30%;height:35%;background:rgba(107,142,35,.4);border-radius:40% 60% 50% 50%}@keyframes _ngcontent-%COMP%_rock-bob{0%,to{transform:translateY(0)}50%{transform:translateY(-2px)}}.coral[_ngcontent-%COMP%]{position:absolute;color:#532416e6;z-index:101;transform-origin:bottom center}.coral-1[_ngcontent-%COMP%]{left:16%;bottom:-15px;font-size:6.5rem;transform:rotate(-3deg)}.coral-2[_ngcontent-%COMP%]{right:18%;bottom:-10px;font-size:5.8rem;transform:rotate(2deg)}.coral-3[_ngcontent-%COMP%]{left:62%;bottom:-10px;font-size:4.9rem;transform:rotate(-1deg)}.coral-4[_ngcontent-%COMP%]{left:14%;bottom:-10px;font-size:4.2rem;transform:rotate(4deg) scale(1.2)}.coral-5[_ngcontent-%COMP%]{right:52%;bottom:-25px;font-size:9rem;transform:rotate(-2deg) scale(.9)}.coral-6[_ngcontent-%COMP%]{right:22%;bottom:-10px;font-size:7.8rem;transform:rotate(-5deg) scale(.9)}.sea-floor-rubble[_ngcontent-%COMP%]{position:absolute;bottom:0;left:0;width:100%;height:180px;z-index:99;pointer-events:none}.sea-floor-rubble[_ngcontent-%COMP%]:before{content:"";position:absolute;bottom:0;left:0;width:100%;height:120px;background-image:url(/assets/images/sea-floor-ruble-sm.png);background-repeat:repeat-x;background-position:bottom;background-size:120px auto;opacity:.6}.sea-floor-rubble[_ngcontent-%COMP%]:after{content:"";position:absolute;bottom:0;left:130px;width:100%;height:120px;background-image:url(/assets/images/sea-floor-ruble-sm.png),url(/assets/images/sea-floor-ruble-sm.png),url(/assets/images/sea-floor-ruble-sht.png);background-repeat:repeat-x,repeat-x,repeat-x;background-position:bottom,bottom,bottom;background-size:200px auto,150px auto,250px auto;opacity:.5;transform:scaleX(-1);filter:hue-rotate(35deg) brightness(.9) contrast(1.1) sepia(.2)}.sea-floor-rubble-large[_ngcontent-%COMP%]{position:absolute;bottom:-20px;width:150px;height:150px;background-image:url(/assets/images/sea-floor-ruble-sm.png);background-repeat:repeat-x;background-position:center bottom;background-size:contain;z-index:98;pointer-events:none;opacity:.74}.sea-floor-rubble-large.rubble-1[_ngcontent-%COMP%]{left:115%;transform:rotate(-5deg)}.sea-floor-rubble-large.rubble-2[_ngcontent-%COMP%]{right:55%;transform:rotate(3deg) scaleX(-1)}.sea-floor-rubble-large.rubble-3[_ngcontent-%COMP%]{left:60%;transform:rotate(-2deg);opacity:.3}.game-tile[_ngcontent-%COMP%]{position:absolute;width:64px;height:64px;background:linear-gradient(135deg,rgba(173,216,230,.9) 0%,rgba(135,206,235,.8) 25%,rgba(176,224,230,.9) 50%,rgba(240,248,255,.7) 75%,rgba(173,216,230,.9) 100%);border:2px solid rgba(135,206,235,.6);border-radius:8px;display:flex;align-items:center;justify-content:center;flex-wrap:wrap;font-weight:700;color:#fff;font-size:12px;transition:background-color .2s ease,border .2s ease,box-shadow .2s ease,transform .1s ease-out;cursor:pointer;box-shadow:inset 2px 2px 8px #fff6,inset -2px -2px 8px #00649633,0 4px 8px #0000001a;-webkit-backdrop-filter:blur(2px);backdrop-filter:blur(2px);opacity:0;transform:translateY(-100px);animation:_ngcontent-%COMP%_dropIn .6s ease-out forwards}.game-tile[_ngcontent-%COMP%]:before{content:"";position:absolute;top:4px;left:4px;right:4px;height:20px;background:linear-gradient(135deg,rgba(255,255,255,.4) 0%,rgba(255,255,255,.1) 50%,transparent 100%);border-radius:4px 4px 20px 20px;pointer-events:none}.game-tile[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,rgb(173,216,230) 0%,rgba(135,206,235,.9) 25%,rgb(176,224,230) 50%,rgba(240,248,255,.8) 75%,rgb(173,216,230) 100%);box-shadow:inset 2px 2px 8px #ffffff80,inset -2px -2px 8px #0064964d,0 6px 12px #00000026;border-color:#87ceebcc}.game-tile.selected[_ngcontent-%COMP%]{background:linear-gradient(135deg,rgba(255,140,105,.9) 0%,rgba(255,107,53,.8) 25%,rgba(255,165,130,.9) 50%,rgba(255,200,180,.7) 75%,rgba(255,140,105,.9) 100%);border:3px solid rgba(255,69,0,.8);box-shadow:inset 2px 2px 8px #ffffff4d,inset -2px -2px 8px #c832004d,0 0 15px #ff6b3599,0 6px 12px #0003}.game-tile.selected[_ngcontent-%COMP%]:hover{background-color:#e55a2b}.game-tile.disappearing[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_dropOut .8s ease-in forwards;z-index:20}.game-tile.dropping[_ngcontent-%COMP%]{z-index:10;box-shadow:0 8px 25px #87ceeb66,0 4px 15px #0003,inset 0 -2px 5px #fffc;transform:scale(1.02);filter:brightness(1.1);background:linear-gradient(135deg,rgba(255,255,255,.95) 0%,rgba(240,248,255,.9) 25%,rgba(173,216,230,.85) 50%,rgba(135,206,235,.8) 75%,rgba(70,130,180,.75) 100%);animation:_ngcontent-%COMP%_dropWithSound .8s ease-in forwards}@keyframes _ngcontent-%COMP%_dropWithSound{0%{transform:translateY(0) scale(1.02) rotate(0)}30%{transform:translateY(20px) scale(1.1) rotate(2deg)}70%{transform:translateY(100px) scale(.95) rotate(-3deg)}to{transform:translateY(200px) scale(.9) rotate(5deg)}}.game-tile.newly-dropped[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_dropIn .6s ease-out forwards}.snowflake[_ngcontent-%COMP%]{color:#ffffffe6;font-size:18px;text-shadow:1px 1px 3px rgba(0,100,150,.6),0 0 5px rgba(173,216,230,.8);margin:1px;animation:_ngcontent-%COMP%_iceSparkle 3s infinite alternate;filter:drop-shadow(0 0 2px rgba(255,255,255,.5));user-select:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none}@keyframes _ngcontent-%COMP%_iceSparkle{0%{opacity:.7;text-shadow:1px 1px 3px rgba(0,100,150,.6),0 0 5px rgba(173,216,230,.8)}50%{opacity:1;text-shadow:1px 1px 3px rgba(0,100,150,.8),0 0 8px rgb(173,216,230),0 0 12px rgba(255,255,255,.6)}to{opacity:.8;text-shadow:1px 1px 3px rgba(0,100,150,.7),0 0 6px rgba(173,216,230,.9)}}.selection-panel[_ngcontent-%COMP%]{flex:0 0 300px;max-width:300px}.selection-panel[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{border:2px solid #dee2e6;border-radius:10px;box-shadow:0 2px 8px #0000001a}.selection-panel[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]{background-color:#f8f9fa;border-bottom:1px solid #dee2e6;padding:12px 16px}.selection-panel[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0;color:#333;font-size:1.1rem}.selection-panel[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]{padding:16px}.target-info[_ngcontent-%COMP%]{background:linear-gradient(135deg,#e3f2fd,#bbdefb);padding:16px;border-radius:8px;margin-bottom:16px;text-align:center;border:1px solid #2196f3}.target-info[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{margin:0 0 8px;font-size:1.5rem;font-weight:700;color:#1976d2}.target-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:.9rem;color:#424242}.selection-info[_ngcontent-%COMP%]   h6[_ngcontent-%COMP%]{color:#333;margin:16px 0 12px;font-size:1rem;font-weight:600}.selection-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:8px 0;font-size:.95rem}.total-value[_ngcontent-%COMP%]{font-size:1.1rem!important;border-top:1px solid #dee2e6;padding-top:12px;margin-top:12px!important;font-weight:700}.total-value.text-success[_ngcontent-%COMP%]{color:#28a745!important}.total-value.text-warning[_ngcontent-%COMP%]{color:#ffc107!important}.total-value[_ngcontent-%COMP%]   .badge[_ngcontent-%COMP%]{font-size:.75rem;animation:_ngcontent-%COMP%_pulse 1s infinite}@keyframes _ngcontent-%COMP%_pulse{0%{transform:scale(1)}50%{transform:scale(1.1)}to{transform:scale(1)}}.action-buttons[_ngcontent-%COMP%]{margin-top:16px;padding-top:12px;border-top:1px solid #dee2e6}.empty-state[_ngcontent-%COMP%]{text-align:center;padding:20px 0}.empty-state[_ngcontent-%COMP%]   .text-muted[_ngcontent-%COMP%]{font-style:italic;color:#6c757d}@keyframes _ngcontent-%COMP%_dropIn{0%{opacity:1;transform:translateY(-200px)}50%{opacity:1;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}@keyframes _ngcontent-%COMP%_fadeOut{0%{opacity:1}to{opacity:0}}@keyframes _ngcontent-%COMP%_dropOut{0%{opacity:1;transform:translateY(0) scale(1) rotate(0)}30%{opacity:.8;transform:translateY(20px) scale(1.1) rotate(5deg)}70%{opacity:.4;transform:translateY(100px) scale(.9) rotate(-10deg)}to{opacity:0;transform:translateY(200px) scale(.7) rotate(15deg)}}.start-button-container[_ngcontent-%COMP%]{padding:20px 0;display:flex;justify-content:center;align-items:center}.start-game-button[_ngcontent-%COMP%]{padding:10px 25px!important;font-size:1.1rem;font-weight:700;border-radius:8px;box-shadow:0 4px 8px #0003;transition:all .3s ease}.start-game-button[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 6px 12px #0000004d}.water-element[_ngcontent-%COMP%]{position:fixed;bottom:0;left:0;width:100vw;height:40vh;background:linear-gradient(180deg,rgba(64,164,223,.8) 0%,rgba(32,107,203,.9) 50%,rgb(13,71,161) 100%);z-index:5;overflow:visible}.water-element[_ngcontent-%COMP%]:before{content:"";position:absolute;top:-15px;left:0;width:200%;height:80px;background:url(\'data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 10"><path d="M0,5 Q25,0 50,5 T100,5 V10 H0 Z" fill="rgba(64, 164, 223, 0.8)"/></svg>\');background-size:100px 60px;animation:_ngcontent-%COMP%_wave 1.5s ease-in-out infinite}.water-element[_ngcontent-%COMP%]:after{content:"";position:absolute;top:-5px;left:0;width:200%;height:45px;background:url(\'data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 10"><path d="M0,3 Q25,8 50,3 T100,3 V10 H0 Z" fill="rgba(64, 164, 223, 0.8)"/></svg>\');background-size:150px 15px;animation:_ngcontent-%COMP%_wave 4s ease-in-out infinite reverse}@keyframes _ngcontent-%COMP%_wave{0%,to{transform:translate(0)}50%{transform:translate(-120px)}}.fish[_ngcontent-%COMP%]{position:absolute;font-size:32px;z-index:6;animation-timing-function:linear;animation-iteration-count:infinite;filter:drop-shadow(0 2px 4px rgba(0,0,0,.3))}.fish-1[_ngcontent-%COMP%]{top:20%;animation:_ngcontent-%COMP%_swimRight 46s infinite;animation-delay:0s;font-size:128px}.fish-2[_ngcontent-%COMP%]{top:30%;animation:_ngcontent-%COMP%_swimLeft 34s infinite;animation-delay:-4s;font-size:108px}.fish-3[_ngcontent-%COMP%]{top:40%;animation:_ngcontent-%COMP%_swimRight 70s infinite;animation-delay:-8s;font-size:128px}.fish-4[_ngcontent-%COMP%]{top:35%;animation:_ngcontent-%COMP%_swimLeft 58s infinite;animation-delay:-12s;font-size:130px}.fish-5[_ngcontent-%COMP%]{left:60%;animation:_ngcontent-%COMP%_swimVertical 15s infinite ease-in-out;animation-delay:-3s;font-size:56px;opacity:.5}.fish-6[_ngcontent-%COMP%]{top:74%;z-index:1220;animation:_ngcontent-%COMP%_swimRight 68s infinite;animation-delay:-11s;font-size:106px}.fish-7[_ngcontent-%COMP%]{top:25%;animation:_ngcontent-%COMP%_swimLeft 62s infinite;animation-delay:-15s;font-size:96px}.fish-8[_ngcontent-%COMP%]{top:30%;animation:_ngcontent-%COMP%_swimRight 55s infinite;animation-delay:-8s;font-size:118px}@keyframes _ngcontent-%COMP%_swimRight{0%{left:-50px;transform:translateY(0) scaleX(-1)}25%{transform:translateY(-5px) scaleX(-1)}50%{transform:translateY(0) scaleX(-1)}75%{transform:translateY(5px) scaleX(-1)}to{left:calc(100vw + 50px);transform:translateY(0) scaleX(-1)}}@keyframes _ngcontent-%COMP%_swimLeft{0%{right:-50px;transform:translateY(0) scaleX(1)}25%{transform:translateY(5px) scaleX(1)}50%{transform:translateY(0) scaleX(1)}75%{transform:translateY(-5px) scaleX(1)}to{right:calc(100vw + 50px);transform:translateY(0) scaleX(1)}}@keyframes _ngcontent-%COMP%_swimVertical{0%{top:40%;transform:translate(0)}25%{transform:translate(-10px)}50%{top:70%;transform:translate(0)}75%{transform:translate(10px)}to{top:40%;transform:translate(0)}}.toolbar-game-info[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;gap:30px;margin:0 20px;color:#fff}.title-text[_ngcontent-%COMP%]{font-size:50px;font-weight:700;text-transform:uppercase;letter-spacing:3px;text-shadow:1px 1px 3px rgba(124,229,255,.8),0 0 15px rgba(173,216,230,.8),0 0 25px rgba(135,206,235,.6),0 0 35px rgba(255,255,255,.4);background:linear-gradient(45deg,#E3F2FD 0%,#BBDEFB 25%,#6eade1 50%,#64B5F6 75%,#0176ca 100%);-webkit-background-clip:text;background-clip:text;-webkit-text-fill-color:transparent;filter:drop-shadow(2px 2px 4px rgba(0,179,255,.7));-webkit-user-select:none;user-select:none}@keyframes _ngcontent-%COMP%_iceGlow{0%{text-shadow:2px 2px 4px rgba(0,79,249,.8),0 0 15px rgba(26,109,28,.8),0 0 25px rgba(135,206,235,.6),0 0 35px rgba(0,79,249,.8)}to{text-shadow:2px 2px 4px rgba(95,174,253,.8),0 0 20px rgb(10,141,241),0 0 35px rgba(65,127,236,.8),0 0 50px rgba(97,16,239,.6)}}.toolbar-target-info[_ngcontent-%COMP%], .toolbar-timer-info[_ngcontent-%COMP%], .toolbar-selection-info[_ngcontent-%COMP%], .toolbar-score-info[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px;font-size:18px;font-weight:600;pointer-events:auto}.toolbar-target-info[_ngcontent-%COMP%]{position:fixed;top:90px;left:50%;transform:translate(-50%);display:flex;flex-direction:row;align-items:center;gap:15px;z-index:300;pointer-events:none}.target-number[_ngcontent-%COMP%]{background:rgba(255,255,255,.35);padding:8px 12px;border-radius:12px;font-weight:700;font-size:56px;min-width:110px;text-align:center;position:relative;z-index:250;border:2px solid rgba(255,255,255,.5);box-shadow:0 8px 24px #0003,inset 0 2px 8px #ffffff4d;text-shadow:1px 1px 3px rgba(255,255,255,.5);color:#000000d9;pointer-events:auto;transition:all .3s ease}.target-number.flash-correct[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_flashRed .8s ease-in-out}@keyframes _ngcontent-%COMP%_flashRed{0%{background:rgba(255,255,255,.35);border-color:#ffffff80;color:#000000d9}25%{background:rgba(255,0,0,.8);border-color:#ff0000e6;color:#fff;box-shadow:0 0 20px #f009,0 8px 24px #0003,inset 0 2px 8px #ffffff4d;text-shadow:1px 1px 3px rgba(0,0,0,.8)}50%{background:rgba(255,255,255,.35);border-color:#ffffff80;color:#000000d9}75%{background:rgba(255,0,0,.8);border-color:#ff0000e6;color:#fff;box-shadow:0 0 20px #f009,0 8px 24px #0003,inset 0 2px 8px #ffffff4d;text-shadow:1px 1px 3px rgba(0,0,0,.8)}to{background:rgba(255,255,255,.35);border-color:#ffffff80;color:#000000d9}}.target-label[_ngcontent-%COMP%], .score-label[_ngcontent-%COMP%]{opacity:.9;font-size:26px;font-weight:600}.timer-label[_ngcontent-%COMP%], .selection-label[_ngcontent-%COMP%]{opacity:.9;font-size:24px}.target-label[_ngcontent-%COMP%]{color:#000c;font-weight:700;text-shadow:1px 1px 2px rgba(255,255,255,.8);pointer-events:auto}.timer-value[_ngcontent-%COMP%]{background:rgba(255,255,255,.25);padding:8px 16px;border-radius:6px;font-weight:700;font-size:22px;min-width:60px;text-align:center}.selection-total[_ngcontent-%COMP%]{background:rgba(255,255,255,.25);padding:8px 16px;border-radius:6px;font-weight:700;font-size:22px;min-width:70px;text-align:center}.toolbar-score-info[_ngcontent-%COMP%]   .score-value[_ngcontent-%COMP%]{background:rgba(255,215,0,.4);padding:18px 24px;border-radius:8px;font-weight:700;font-size:30px;min-width:100px;text-align:center;display:flex;align-items:center;justify-content:center;color:gold;border:2px solid rgba(255,215,0,.6);text-shadow:0 0 8px rgba(23,21,10,.5);box-shadow:0 2px 8px #ffd7004d;line-height:1.2}.score-value[_ngcontent-%COMP%]{background:rgba(255,215,0,.3);padding:8px 16px;border-radius:6px;font-weight:700;font-size:22px;min-width:60px;text-align:center;color:gold;border:1px solid rgba(255,215,0,.5)}.match-badge[_ngcontent-%COMP%]{background:#28a745;color:#fff;border-radius:50%;padding:4px 8px;font-size:14px;margin-left:6px;display:none}.toolbar-game-status[_ngcontent-%COMP%]{display:flex;align-items:center}.toolbar-game-status[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{font-size:16px;padding:10px 20px;font-weight:600}@media (max-width: 768px){.toolbar-game-info[_ngcontent-%COMP%]{gap:15px;margin:0 10px}.title-text[_ngcontent-%COMP%]{font-size:24px;letter-spacing:2px}.toolbar-target-info[_ngcontent-%COMP%], .toolbar-timer-info[_ngcontent-%COMP%], .toolbar-selection-info[_ngcontent-%COMP%], .toolbar-score-info[_ngcontent-%COMP%], .score-label[_ngcontent-%COMP%]{font-size:16px}.target-label[_ngcontent-%COMP%], .timer-label[_ngcontent-%COMP%], .selection-label[_ngcontent-%COMP%]{font-size:14px}.toolbar-score-info[_ngcontent-%COMP%]   .score-value[_ngcontent-%COMP%]{font-size:28px;padding:12px 20px;min-width:90px;line-height:1.2;display:flex;align-items:center;justify-content:center}.score-value[_ngcontent-%COMP%], .target-number[_ngcontent-%COMP%], .timer-value[_ngcontent-%COMP%], .selection-total[_ngcontent-%COMP%]{font-size:18px;padding:6px 12px}.toolbar-game-status[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{font-size:14px;padding:8px 16px}}@media (max-width: 480px){.title-text[_ngcontent-%COMP%]{font-size:20px;letter-spacing:1px}.toolbar-game-info[_ngcontent-%COMP%]{gap:10px;margin:0 5px}}.high-scores-modal[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100vw;height:100vh;background:transparent;display:flex;align-items:center;justify-content:center;z-index:1000;animation:_ngcontent-%COMP%_fadeIn .3s ease-out}.high-scores-content[_ngcontent-%COMP%]{background:linear-gradient(135deg,rgba(25,118,210,.95) 0%,rgba(13,71,161,.98) 100%);border:3px solid #FFD700;border-radius:20px;padding:30px;max-width:650px;width:95%;max-height:80vh;overflow-y:auto;color:#fff;box-shadow:0 20px 60px #00000080,inset 0 1px #fff3;animation:_ngcontent-%COMP%_slideIn .4s ease-out}.high-scores-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:20px;border-bottom:2px solid rgba(255,215,0,.5);padding-bottom:15px}.high-scores-header[_ngcontent-%COMP%]   .header-text[_ngcontent-%COMP%]{flex:1;text-align:center}.high-scores-header[_ngcontent-%COMP%]   .game-over-text[_ngcontent-%COMP%]{margin:0 0 10px;color:#f44;font-size:32px;font-weight:700;text-shadow:2px 2px 4px rgba(0,0,0,.7);animation:_ngcontent-%COMP%_pulseRed 1.5s ease-in-out infinite}.high-scores-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;color:gold;font-size:28px;text-shadow:2px 2px 4px rgba(0,0,0,.5)}@keyframes _ngcontent-%COMP%_pulseRed{0%,to{opacity:1;transform:scale(1)}50%{opacity:.8;transform:scale(1.05)}}.trophy-left[_ngcontent-%COMP%], .trophy-right[_ngcontent-%COMP%]{font-size:38px;color:gold;text-shadow:2px 2px 4px rgba(0,0,0,.5);animation:_ngcontent-%COMP%_trophyGlow 2s ease-in-out infinite alternate}@keyframes _ngcontent-%COMP%_trophyGlow{0%{filter:drop-shadow(0 0 5px rgba(255,215,0,.5))}to{filter:drop-shadow(0 0 15px rgba(255,215,0,.8))}}.player-name-section[_ngcontent-%COMP%]{background:rgba(255,255,255,.15);-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);border-radius:12px;padding:15px;margin:15px 0;border:1px solid rgba(255,255,255,.2)}.current-player[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:10px;margin-bottom:10px}.player-label[_ngcontent-%COMP%]{color:gold;font-weight:600;font-size:16px;text-shadow:1px 1px 2px rgba(0,0,0,.5)}.player-name-display[_ngcontent-%COMP%]{color:#fff;font-weight:700;font-size:18px;background:rgba(0,0,0,.3);padding:8px 16px;border-radius:20px;border:2px solid #FFD700;text-shadow:1px 1px 2px rgba(0,0,0,.7);min-width:120px;text-align:center}.edit-name-btn[_ngcontent-%COMP%]{background:rgba(255,215,0,.2);border:2px solid #FFD700;color:gold;padding:8px 12px;border-radius:50%;cursor:pointer;font-size:16px;transition:all .3s ease;-webkit-backdrop-filter:blur(5px);backdrop-filter:blur(5px)}.edit-name-btn[_ngcontent-%COMP%]:hover{background:rgba(255,215,0,.4);transform:scale(1.1);box-shadow:0 0 10px #ffd70080}.player-name-input[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:10px;align-items:center;animation:_ngcontent-%COMP%_slideDown .3s ease}@keyframes _ngcontent-%COMP%_slideDown{0%{opacity:0;transform:translateY(-10px)}to{opacity:1;transform:translateY(0)}}.name-input[_ngcontent-%COMP%]{padding:12px 16px;border:2px solid #FFD700;border-radius:25px;background:rgba(255,255,255,.9);color:#333;font-size:16px;font-weight:600;text-align:center;width:200px;outline:none;transition:all .3s ease}.name-input[_ngcontent-%COMP%]:focus{border-color:orange;box-shadow:0 0 15px #ffd70080;background:rgb(255,255,255)}.name-input-actions[_ngcontent-%COMP%]{display:flex;gap:8px;align-items:center}.save-name-btn[_ngcontent-%COMP%], .cancel-name-btn[_ngcontent-%COMP%], .reset-name-btn[_ngcontent-%COMP%]{padding:8px 16px;border:2px solid;border-radius:20px;cursor:pointer;font-size:14px;font-weight:600;transition:all .3s ease;-webkit-backdrop-filter:blur(5px);backdrop-filter:blur(5px)}.save-name-btn[_ngcontent-%COMP%]{background:rgba(76,175,80,.2);border-color:#4caf50;color:#4caf50}.save-name-btn[_ngcontent-%COMP%]:hover{background:rgba(76,175,80,.4);transform:translateY(-2px);box-shadow:0 4px 8px #4caf504d}.cancel-name-btn[_ngcontent-%COMP%]{background:rgba(244,67,54,.2);border-color:#f44336;color:#f44336}.cancel-name-btn[_ngcontent-%COMP%]:hover{background:rgba(244,67,54,.4);transform:translateY(-2px);box-shadow:0 4px 8px #f443364d}.reset-name-btn[_ngcontent-%COMP%]{background:rgba(255,152,0,.2);border-color:#ff9800;color:#ff9800;padding:8px 12px;border-radius:50%;font-size:16px}.reset-name-btn[_ngcontent-%COMP%]:hover{background:rgba(255,152,0,.4);transform:scale(1.1) rotate(180deg);box-shadow:0 0 10px #ff980080}.current-score[_ngcontent-%COMP%]{text-align:center;margin-bottom:25px;padding:15px;background:rgba(255,255,255,.1);border-radius:10px;border:1px solid rgba(255,215,0,.3)}.current-score[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 10px;font-size:22px}.score-highlight[_ngcontent-%COMP%]{color:gold;font-weight:700;font-size:28px;text-shadow:2px 2px 4px rgba(0,0,0,.5)}.new-high-score[_ngcontent-%COMP%]{margin:10px 0 0;font-size:18px;color:#4caf50;font-weight:700;animation:_ngcontent-%COMP%_pulse 1.5s infinite}.high-scores-list[_ngcontent-%COMP%]{margin-bottom:25px}.score-entry[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;padding:4px 10px;margin-bottom:3px;background:rgba(255,255,255,.05);border-radius:8px;border-left:4px solid rgba(255,215,0,.3);transition:all .2s ease}.score-entry[_ngcontent-%COMP%]:hover{background:rgba(255,255,255,.08);transform:translate(5px)}.score-entry.current-score-highlight[_ngcontent-%COMP%]{background:rgba(255,255,255,.08);border-left-color:#ffd7004d;box-shadow:none}.rank[_ngcontent-%COMP%]{font-weight:700;font-size:14px;min-width:30px;color:gold}.player-info[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;justify-content:space-between;flex:1;gap:8px}.player-name[_ngcontent-%COMP%]{font-size:16px;font-weight:500;color:#e3f2fd;text-shadow:1px 1px 2px rgba(0,0,0,.6)}.score-value[_ngcontent-%COMP%]{font-size:14px;font-weight:700;color:gold;width:48px;height:20px;display:flex;align-items:center;justify-content:flex-end;text-align:right;text-shadow:1px 1px 2px rgba(0,0,0,.5)}.trophy[_ngcontent-%COMP%]{font-size:20px;min-width:36px;text-align:center;text-shadow:2px 2px 4px rgba(0,0,0,.5);filter:drop-shadow(0 0 8px rgba(255,215,0,.6));color:gold;font-weight:700}.rank-number[_ngcontent-%COMP%]{font-size:16px;min-width:24px;text-align:center;color:gold;font-weight:700}.empty-name[_ngcontent-%COMP%], .empty-score[_ngcontent-%COMP%]{font-size:14px;color:#ffffff4d;font-style:italic}.empty-score[_ngcontent-%COMP%]{width:48px;height:20px;display:flex;align-items:center;justify-content:flex-end;text-align:right}.no-scores[_ngcontent-%COMP%]{text-align:center;padding:40px 20px;color:#ffffffb3}.no-scores[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:10px 0;font-size:16px}.high-scores-actions[_ngcontent-%COMP%]{display:flex;gap:15px;justify-content:center;padding-top:20px;border-top:2px solid rgba(255,215,0,.3)}.high-scores-actions[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{padding:12px 25px;font-size:16px;font-weight:700;border-radius:8px;border:none;cursor:pointer;transition:all .2s ease;min-width:120px}.high-scores-actions[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]{background:#FFD700;color:#1976d2}.high-scores-actions[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]:hover{background:#FFC107;transform:translateY(-2px);box-shadow:0 4px 12px #ffd7004d}.high-scores-actions[_ngcontent-%COMP%]   .btn-secondary[_ngcontent-%COMP%]{background:rgba(255,255,255,.2);color:#fff;border:1px solid rgba(255,255,255,.3)}.high-scores-actions[_ngcontent-%COMP%]   .btn-secondary[_ngcontent-%COMP%]:hover{background:rgba(255,255,255,.3);transform:translateY(-2px)}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0}to{opacity:1}}@keyframes _ngcontent-%COMP%_slideIn{0%{opacity:0;transform:scale(.8) translateY(-50px)}to{opacity:1;transform:scale(1) translateY(0)}}@media (max-width: 768px){.high-scores-content[_ngcontent-%COMP%]{padding:20px;margin:20px}.high-scores-header[_ngcontent-%COMP%]   .game-over-text[_ngcontent-%COMP%]{font-size:26px}.high-scores-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%], .score-highlight[_ngcontent-%COMP%]{font-size:24px}.high-scores-actions[_ngcontent-%COMP%]{flex-direction:column}.high-scores-actions[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{width:100%}}.level-up-modal[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100vw;height:100vh;background:rgba(0,0,0,.8);display:flex;align-items:center;justify-content:center;z-index:1100;animation:_ngcontent-%COMP%_fadeIn .3s ease-out}.level-up-content[_ngcontent-%COMP%]{background:linear-gradient(135deg,rgba(76,175,80,.95) 0%,rgba(56,142,60,.98) 100%);border:3px solid #FFD700;border-radius:20px;padding:30px;max-width:650px;width:95%;max-height:80vh;overflow-y:auto;color:#fff;text-align:center;box-shadow:0 20px 60px #00000080,inset 0 1px #fff3;animation:_ngcontent-%COMP%_slideIn .4s ease-out}.level-up-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:20px;border-bottom:2px solid rgba(255,215,0,.5);padding-bottom:15px}.level-up-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;color:gold;font-size:32px;text-shadow:2px 2px 4px rgba(0,0,0,.5);flex:1;text-align:center}.level-up-info[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 15px;font-size:24px;color:gold;text-shadow:2px 2px 4px rgba(0,0,0,.5)}.level-up-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:10px 0;font-size:18px;color:#ffffffe6}.level-details[_ngcontent-%COMP%]{margin:25px 0;padding:20px;background:rgba(255,255,255,.1);border-radius:10px;border:1px solid rgba(255,215,0,.3)}.current-level[_ngcontent-%COMP%], .next-level[_ngcontent-%COMP%], .current-score-display[_ngcontent-%COMP%]{margin:15px 0}.level-number[_ngcontent-%COMP%]{color:gold;font-weight:700;font-size:24px;text-shadow:2px 2px 4px rgba(0,0,0,.5)}.drop-speed[_ngcontent-%COMP%]{font-style:italic;color:#fffc;font-size:16px}.current-score-display[_ngcontent-%COMP%]   .score-highlight[_ngcontent-%COMP%]{color:gold;font-weight:700;font-size:24px;text-shadow:2px 2px 4px rgba(0,0,0,.5)}.level-up-actions[_ngcontent-%COMP%]{display:flex;gap:15px;justify-content:center;padding-top:20px;border-top:2px solid rgba(255,215,0,.3);flex-wrap:wrap}.level-up-actions[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{padding:15px 30px;font-size:18px;font-weight:700;border-radius:8px;border:none;cursor:pointer;transition:all .2s ease;min-width:200px}.level-up-actions[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]{background:#FFD700;color:#2e7d32}.level-up-actions[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]:hover{background:#FFC107;transform:translateY(-2px);box-shadow:0 4px 12px #ffd7004d}.level-up-actions[_ngcontent-%COMP%]   .btn-secondary[_ngcontent-%COMP%]{background:rgba(255,255,255,.2);color:#fff;border:1px solid rgba(255,255,255,.3)}.level-up-actions[_ngcontent-%COMP%]   .btn-secondary[_ngcontent-%COMP%]:hover{background:rgba(255,255,255,.3);transform:translateY(-2px)}@media (max-width: 768px){.level-up-content[_ngcontent-%COMP%]{padding:20px;margin:20px}.level-up-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:24px}.level-up-actions[_ngcontent-%COMP%]{flex-direction:column}.level-up-actions[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{width:100%;min-width:auto}}']})}}return r})();function IK(r,t){1&r&&(Dt(0,"div",11),_s(1,"div",12),Dt(2,"p"),qt(3,"Loading high scores..."),Nt()())}function PK(r,t){1&r&&(Dt(0,"div",16)(1,"p"),qt(2,"\u{1f3af} No high scores yet!"),Nt(),Dt(3,"p"),qt(4,"Be the first to make the leaderboard!"),Nt()())}function RK(r,t){if(1&r&&(Dt(0,"span",27),qt(1),Nt()),2&r){const n=or().index,i=or(4);An(1),_o(" ",i.getMedal(n)," ")}}function OK(r,t){if(1&r&&(Dt(0,"div",24)(1,"span",19)(2,"span",25),qt(3),Nt(),$r(4,RK,2,1,"span",26),Nt(),Dt(5,"span",20),qt(6),Nt(),Dt(7,"span",21),qt(8),Um(9,"number"),Nt(),Dt(10,"span",22)(11,"small"),qt(12),Nt(),_s(13,"br"),Dt(14,"small"),qt(15),Nt(),_s(16,"br"),Dt(17,"small"),qt(18),Nt()()()),2&r){const n=t.$implicit,i=t.index,s=or(4);Qo("player-score",s.isPlayerScore(n)),An(3),xs(i+1),An(1),Ir("ngIf",i<3),An(2),xs(n.playerName),An(2),xs(Bm(9,9,n.score)),An(4),_o("Target: ",n.targetNumber,""),An(3),_o("",n.attempts," attempts"),An(3),xs(s.formatDate(n.timestamp))}}function LK(r,t){if(1&r&&(Dt(0,"div",17)(1,"div",18)(2,"span",19),qt(3,"Rank"),Nt(),Dt(4,"span",20),qt(5,"Player"),Nt(),Dt(6,"span",21),qt(7,"Score"),Nt(),Dt(8,"span",22),qt(9,"Details"),Nt()(),$r(10,OK,19,11,"div",23),Nt()),2&r){const n=or().ngIf;An(10),Ir("ngForOf",n)}}function jK(r,t){if(1&r&&(Dt(0,"div",13),$r(1,PK,5,0,"div",14),$r(2,LK,11,1,"div",15),Nt()),2&r){const n=t.ngIf;An(1),Ir("ngIf",0===n.length),An(1),Ir("ngIf",n.length>0)}}function NK(r,t){if(1&r){const n=Jo();Dt(0,"div",28)(1,"h3"),qt(2,"\u{1f389} New High Score!"),Nt(),Dt(3,"p"),qt(4,"Score: "),Dt(5,"strong"),qt(6),Um(7,"number"),Nt()(),Dt(8,"div",29)(9,"label",30),qt(10,"Enter your name:"),Nt(),Dt(11,"input",31),Or("ngModelChange",function(s){return Pi(n),Ri(or(2).playerName=s)})("keyup.enter",function(){return Pi(n),Ri(or(2).submitScore())}),Nt()(),Dt(12,"div",32)(13,"button",33),Or("click",function(){return Pi(n),Ri(or(2).submitScore())}),qt(14),Nt(),Dt(15,"button",34),Or("click",function(){return Pi(n),Ri(or(2).cancelSubmit())}),qt(16," Skip "),Nt()()()}if(2&r){const n=or(2);An(6),xs(Bm(7,4,null==n.newScore?null:n.newScore.score)),An(5),Ir("ngModel",n.playerName),An(2),Ir("disabled",!n.playerName||0===n.playerName.trim().length||n.submitting),An(1),_o(" ",n.submitting?"Submitting...":"Submit Score"," ")}}function kK(r,t){if(1&r){const n=Jo();Dt(0,"div",3),Or("click",function(){return Pi(n),Ri(or().toggleModal())}),Dt(1,"div",4),Or("click",function(s){return s.stopPropagation()}),Dt(2,"div",5)(3,"h2"),qt(4,"\u{1f3a3} Ice Fishing Champions"),Nt(),Dt(5,"button",6),Or("click",function(){return Pi(n),Ri(or().toggleModal())}),qt(6,"\xd7"),Nt()(),Dt(7,"div",7),$r(8,IK,4,0,"div",8),$r(9,jK,3,2,"div",9),Um(10,"async"),$r(11,NK,17,6,"div",10),Nt()()()}if(2&r){const n=or();An(8),Ir("ngIf",n.loading),An(1),Ir("ngIf",!n.loading&&Bm(10,3,n.highScores$)),An(2),Ir("ngIf",n.showSubmitForm)}}let FK=(()=>{class r{constructor(n){this.highScoresService=n,this.currentPlayerName="",this.scoreSubmitted=new Mi,this.isModalOpen=!1,this.loading=!1,this.showSubmitForm=!1,this.newScore=null,this.playerName="",this.submitting=!1,this.highScores$=this.highScoresService.highScores$}ngOnInit(){this.playerName=this.currentPlayerName}toggleModal(){this.isModalOpen=!this.isModalOpen,this.isModalOpen&&(this.loading=!0,this.highScoresService.loadHighScores(),setTimeout(()=>this.loading=!1,1e3))}showSubmitScoreForm(n){this.newScore=n,this.showSubmitForm=!0,this.isModalOpen=!0,this.playerName=this.currentPlayerName||""}submitScore(){if(!this.playerName||!this.newScore)return;this.submitting=!0;const n={...this.newScore,playerName:this.playerName.trim()};this.highScoresService.submitScoreWithBackup(n),setTimeout(()=>{this.submitting=!1,this.showSubmitForm=!1,this.newScore=null,this.scoreSubmitted.emit()},1500)}cancelSubmit(){this.showSubmitForm=!1,this.newScore=null}isPlayerScore(n){return n.playerName.toLowerCase()===this.currentPlayerName.toLowerCase()}getMedal(n){switch(n){case 0:return"\u{1f947}";case 1:return"\u{1f948}";case 2:return"\u{1f949}";default:return""}}formatDate(n){return new Date(n).toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}static{this.\u0275fac=function(i){return new(i||r)(kt(TL))}}static{this.\u0275cmp=Cp({type:r,selectors:[["app-high-scores"]],inputs:{currentPlayerName:"currentPlayerName"},outputs:{scoreSubmitted:"scoreSubmitted"},standalone:!0,features:[Cb],decls:4,vars:4,consts:[[1,"high-scores-container"],[1,"high-scores-btn",3,"disabled","click"],["class","modal-overlay",3,"click",4,"ngIf"],[1,"modal-overlay",3,"click"],[1,"modal-content",3,"click"],[1,"modal-header"],[1,"close-btn",3,"click"],[1,"modal-body"],["class","loading",4,"ngIf"],["class","scores-list",4,"ngIf"],["class","submit-form",4,"ngIf"],[1,"loading"],[1,"spinner"],[1,"scores-list"],["class","no-scores",4,"ngIf"],["class","scores-table",4,"ngIf"],[1,"no-scores"],[1,"scores-table"],[1,"table-header"],[1,"rank"],[1,"player"],[1,"score"],[1,"details"],["class","score-row",3,"player-score",4,"ngFor","ngForOf"],[1,"score-row"],[1,"rank-number"],["class","rank-medal",4,"ngIf"],[1,"rank-medal"],[1,"submit-form"],[1,"form-group"],["for","playerName"],["id","playerName","type","text","placeholder","Your name","maxlength","20",1,"player-input",3,"ngModel","ngModelChange","keyup.enter"],[1,"form-actions"],[1,"submit-btn",3,"disabled","click"],[1,"cancel-btn",3,"click"]],template:function(i,s){1&i&&(Dt(0,"div",0)(1,"button",1),Or("click",function(){return s.toggleModal()}),qt(2," \u{1f3c6} High Scores "),Nt(),$r(3,kK,12,5,"div",2),Nt()),2&i&&(Qo("modal-open",s.isModalOpen),An(1),Ir("disabled",s.loading),An(2),Ir("ngIf",s.isModalOpen))},dependencies:[_A,y_,v_,yA,bA,YD,bf,N_,Sg,wg],styles:[".high-scores-container[_ngcontent-%COMP%]{position:relative}.high-scores-btn[_ngcontent-%COMP%]{background:linear-gradient(45deg,#4a9eff,#0066cc);color:#fff;border:none;padding:12px 24px;border-radius:8px;font-size:16px;font-weight:600;cursor:pointer;transition:all .3s ease;box-shadow:0 4px 8px #0066cc4d}.high-scores-btn[_ngcontent-%COMP%]:hover:not(:disabled){background:linear-gradient(45deg,#5ba3ff,#0052a3);transform:translateY(-2px);box-shadow:0 6px 12px #06c6}.high-scores-btn[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed}.modal-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background:rgba(0,0,0,.8);display:flex;align-items:center;justify-content:center;z-index:1000;animation:_ngcontent-%COMP%_fadeIn .3s ease}.modal-content[_ngcontent-%COMP%]{background:linear-gradient(135deg,#e3f2fd 0%,#bbdefb 100%);border-radius:16px;width:90%;max-width:600px;max-height:80vh;overflow-y:auto;box-shadow:0 20px 40px #0000004d;animation:_ngcontent-%COMP%_slideIn .3s ease}.modal-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:20px;border-bottom:2px solid #2196f3;background:linear-gradient(45deg,#2196f3,#1976d2);color:#fff;border-radius:16px 16px 0 0}.modal-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;font-size:24px;font-weight:700}.close-btn[_ngcontent-%COMP%]{background:none;border:none;color:#fff;font-size:32px;cursor:pointer;padding:0;width:40px;height:40px;border-radius:50%;display:flex;align-items:center;justify-content:center;transition:background .3s ease}.close-btn[_ngcontent-%COMP%]:hover{background:rgba(255,255,255,.2)}.modal-body[_ngcontent-%COMP%]{padding:20px}.loading[_ngcontent-%COMP%]{text-align:center;padding:40px}.spinner[_ngcontent-%COMP%]{width:40px;height:40px;border:4px solid #e3f2fd;border-top:4px solid #2196f3;border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite;margin:0 auto 20px}.no-scores[_ngcontent-%COMP%]{text-align:center;padding:40px;color:#666}.scores-table[_ngcontent-%COMP%]{background:white;border-radius:8px;overflow:hidden;box-shadow:0 4px 8px #0000001a}.table-header[_ngcontent-%COMP%]{display:grid;grid-template-columns:80px 1fr 100px 120px;gap:10px;padding:16px;background:#f5f5f5;font-weight:600;font-size:14px;color:#666;text-transform:uppercase;letter-spacing:.5px}.score-row[_ngcontent-%COMP%]{display:grid;grid-template-columns:80px 1fr 100px 120px;gap:10px;padding:16px;border-bottom:1px solid #eee;transition:background .3s ease}.score-row[_ngcontent-%COMP%]:hover{background:#f8f9fa}.score-row.player-score[_ngcontent-%COMP%]{background:#e8f5e8;font-weight:600}.rank[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;font-weight:600}.rank-number[_ngcontent-%COMP%]{color:#666}.rank-medal[_ngcontent-%COMP%]{font-size:20px}.player[_ngcontent-%COMP%]{font-weight:600;color:#333}.score[_ngcontent-%COMP%]{font-weight:700;color:#2196f3;font-size:18px}.details[_ngcontent-%COMP%]{font-size:12px;color:#666;line-height:1.4}.submit-form[_ngcontent-%COMP%]{background:white;padding:24px;border-radius:8px;margin-top:20px;text-align:center;box-shadow:0 4px 8px #0000001a}.submit-form[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#4caf50;margin-bottom:16px}.form-group[_ngcontent-%COMP%]{margin:20px 0}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:8px;font-weight:600;color:#333}.player-input[_ngcontent-%COMP%]{width:100%;max-width:300px;padding:12px;border:2px solid #ddd;border-radius:8px;font-size:16px;text-align:center}.player-input[_ngcontent-%COMP%]:focus{outline:none;border-color:#2196f3;box-shadow:0 0 8px #2196f34d}.form-actions[_ngcontent-%COMP%]{display:flex;gap:12px;justify-content:center;margin-top:20px}.submit-btn[_ngcontent-%COMP%], .cancel-btn[_ngcontent-%COMP%]{padding:12px 24px;border:none;border-radius:8px;font-size:16px;font-weight:600;cursor:pointer;transition:all .3s ease}.submit-btn[_ngcontent-%COMP%]{background:#4caf50;color:#fff}.submit-btn[_ngcontent-%COMP%]:hover:not(:disabled){background:#45a049;transform:translateY(-2px)}.submit-btn[_ngcontent-%COMP%]:disabled{background:#ccc;cursor:not-allowed}.cancel-btn[_ngcontent-%COMP%]{background:#f44336;color:#fff}.cancel-btn[_ngcontent-%COMP%]:hover{background:#d32f2f;transform:translateY(-2px)}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0}to{opacity:1}}@keyframes _ngcontent-%COMP%_slideIn{0%{opacity:0;transform:translateY(-50px) scale(.9)}to{opacity:1;transform:translateY(0) scale(1)}}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}@media (max-width: 600px){.modal-content[_ngcontent-%COMP%]{width:95%;margin:10px}.table-header[_ngcontent-%COMP%], .score-row[_ngcontent-%COMP%]{grid-template-columns:60px 1fr 80px 100px;gap:8px;padding:12px;font-size:14px}.score[_ngcontent-%COMP%]{font-size:16px}}"]})}}return r})(),UK=(()=>{class r{static{this.\u0275fac=function(i){return new(i||r)}}static{this.\u0275mod=Xo({type:r,bootstrap:[DK]})}static{this.\u0275inj=Cs({imports:[b8,R9,YD,eG,FK]})}}return r})();y8().bootstrapModule(UK).catch(r=>console.error(r))},326:(pi,Pa,ua)=>{var Vn=ua(756);pi.exports=function l(de,H,M){function E(T,C){if(!H[T]){if(!de[T]){var f=void 0;if(!C&&f)return require(T,!0);if(v)return v(T,!0);throw(C=new Error("Cannot find module '"+T+"'")).code="MODULE_NOT_FOUND",C}f=H[T]={exports:{}},de[T][0].call(f.exports,function(g){return E(de[T][1][g]||g)},f,f.exports,l,de,H,M)}return H[T].exports}for(var v=void 0,S=0;S<M.length;S++)E(M[S]);return E}({1:[function(l,de,H){"use strict";H.byteLength=function(m){return 3*((m=f(m))[0]+(m=m[1]))/4-m},H.toByteArray=function(g){var d,m,h,N,p=(h=f(g))[0],y=new v(3*(p+(N=h=h[1]))/4-N),b=0,x=0<h?p-4:p;for(m=0;m<x;m+=4)d=E[g.charCodeAt(m)]<<18|E[g.charCodeAt(m+1)]<<12|E[g.charCodeAt(m+2)]<<6|E[g.charCodeAt(m+3)],y[b++]=d>>16&255,y[b++]=d>>8&255,y[b++]=255&d;return 2===h&&(d=E[g.charCodeAt(m)]<<2|E[g.charCodeAt(m+1)]>>4,y[b++]=255&d),1===h&&(d=E[g.charCodeAt(m)]<<10|E[g.charCodeAt(m+1)]<<4|E[g.charCodeAt(m+2)]>>2,y[b++]=d>>8&255,y[b++]=255&d),y},H.fromByteArray=function(g){for(var d,m=g.length,p=m%3,h=[],y=0,b=m-p;y<b;y+=16383)h.push(function(x,D,N){for(var R=[],L=D;L<N;L+=3)R.push(M[(z=(x[L]<<16&16711680)+(x[L+1]<<8&65280)+(255&x[L+2]))>>18&63]+M[z>>12&63]+M[z>>6&63]+M[63&z]);var z;return R.join("")}(g,y,b<y+16383?b:y+16383));return 1==p?h.push(M[(d=g[m-1])>>2]+M[d<<4&63]+"=="):2==p&&h.push(M[(d=(g[m-2]<<8)+g[m-1])>>10]+M[d>>4&63]+M[d<<2&63]+"="),h.join("")};for(var M=[],E=[],v=typeof Uint8Array<"u"?Uint8Array:Array,S="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",T=0;T<64;++T)M[T]=S[T],E[S.charCodeAt(T)]=T;function f(g){var d=g.length;if(0<d%4)throw new Error("Invalid string. Length must be a multiple of 4");return d=(g=-1===(g=g.indexOf("="))?d:g)===d?0:4-g%4,[g,d]}E["-".charCodeAt(0)]=62,E["_".charCodeAt(0)]=63},{}],2:[function(l,de,H){},{}],3:[function(l,de,H){},{}],4:[function(l,de,H){(function(f){"use strict";var E=l("base64-js"),v=l("ieee754"),S="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null,T=(H.Buffer=f,H.SlowBuffer=function($){return+$!=$&&($=0),f.alloc(+$)},H.INSPECT_MAX_BYTES=50,2147483647);function C($){if(T<$)throw new RangeError('The value "'+$+'" is invalid for option "size"');return $=new Uint8Array($),Object.setPrototypeOf($,f.prototype),$}function f($,P,K){if("number"!=typeof $)return g($,P,K);if("string"==typeof P)throw new TypeError('The "string" argument must be of type string. Received type number');return m($)}function g($,P,K){if("string"==typeof $){var te=$,fe=P;if(f.isEncoding(fe="string"==typeof fe&&""!==fe?fe:"utf8"))return(te=(Te=C(ve=0|y(te,fe))).write(te,fe))!==ve?Te.slice(0,te):Te;throw new TypeError("Unknown encoding: "+fe)}if(ArrayBuffer.isView($))return p($);if(null!=$){if(le($,ArrayBuffer)||$&&le($.buffer,ArrayBuffer)){var ve=$,Te=K;if((te=P)<0||ve.byteLength<te)throw new RangeError('"offset" is outside of buffer bounds');if(ve.byteLength<te+(Te||0))throw new RangeError('"length" is outside of buffer bounds');return ve=void 0===te&&void 0===Te?new Uint8Array(ve):void 0===Te?new Uint8Array(ve,te):new Uint8Array(ve,te,Te),Object.setPrototypeOf(ve,f.prototype),ve}if("number"==typeof $)throw new TypeError('The "value" argument must not be of type number. Received type number');if(null!=(fe=$.valueOf&&$.valueOf())&&fe!==$)return f.from(fe,P,K);var Ie=f.isBuffer(we=$)?(0!==(je=C(Pe=0|h(we.length))).length&&we.copy(je,0,0,Pe),je):void 0!==we.length?"number"!=typeof we.length||pe(we.length)?C(0):p(we):"Buffer"===we.type&&Array.isArray(we.data)?p(we.data):void 0;if(Ie)return Ie;if(typeof Symbol<"u"&&null!=Symbol.toPrimitive&&"function"==typeof $[Symbol.toPrimitive])return f.from($[Symbol.toPrimitive]("string"),P,K)}var we,Pe,je;throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof $)}function d($){if("number"!=typeof $)throw new TypeError('"size" argument must be of type number');if($<0)throw new RangeError('The value "'+$+'" is invalid for option "size"')}function m($){return d($),C($<0?0:0|h($))}function p($){for(var P=$.length<0?0:0|h($.length),K=C(P),te=0;te<P;te+=1)K[te]=255&$[te];return K}function h($){if(T<=$)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+T.toString(16)+" bytes");return 0|$}function y($,P){if(f.isBuffer($))return $.length;if(ArrayBuffer.isView($)||le($,ArrayBuffer))return $.byteLength;if("string"!=typeof $)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof $);var K=$.length,te=2<arguments.length&&!0===arguments[2];if(!te&&0===K)return 0;for(var fe=!1;;)switch(P){case"ascii":case"latin1":case"binary":return K;case"utf8":case"utf-8":return oe($).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*K;case"hex":return K>>>1;case"base64":return ie($).length;default:if(fe)return te?-1:oe($).length;P=(""+P).toLowerCase(),fe=!0}}function b($,P,K){var te,fe=!1;if((P=void 0===P||P<0?0:P)>this.length||(K=void 0===K||K>this.length?this.length:K)<=0||(K>>>=0)<=(P>>>=0))return"";for($=$||"utf8";;)switch($){case"hex":var Te=K,je=this.length;(!Te||Te<0||je<Te)&&(Te=je);for(var Ie="",we=ze=!(ze=P)||ze<0?0:ze;we<Te;++we)Ie+=Ae[this[we]];return Ie;case"utf8":case"utf-8":return L(this,P,K);case"ascii":var be=(je=P,K),Oe="";be=Math.min(this.length,be);for(var Ge=je;Ge<be;++Ge)Oe+=String.fromCharCode(127&this[Ge]);return Oe;case"latin1":case"binary":var ze=P,qe=K,et="";qe=Math.min(this.length,qe);for(var _t=ze;_t<qe;++_t)et+=String.fromCharCode(this[_t]);return et;case"base64":return ot=this,te=K,0===(Kt=P)&&te===ot.length?E.fromByteArray(ot):E.fromByteArray(ot.slice(Kt,te));case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":for(var ot=P,Kt=K,$t=this.slice(ot,Kt),Xt="",ln=0;ln<$t.length;ln+=2)Xt+=String.fromCharCode($t[ln]+256*$t[ln+1]);return Xt;default:if(fe)throw new TypeError("Unknown encoding: "+$);$=($+"").toLowerCase(),fe=!0}}function x($,P,K){var te=$[P];$[P]=$[K],$[K]=te}function D($,P,K,te,fe){if(0===$.length)return-1;if("string"==typeof K?(te=K,K=0):2147483647<K?K=2147483647:K<-2147483648&&(K=-2147483648),(K=(K=pe(K=+K)?fe?0:$.length-1:K)<0?$.length+K:K)>=$.length){if(fe)return-1;K=$.length-1}else if(K<0){if(!fe)return-1;K=0}if("string"==typeof P&&(P=f.from(P,te)),f.isBuffer(P))return 0===P.length?-1:N($,P,K,te,fe);if("number"==typeof P)return P&=255,"function"==typeof Uint8Array.prototype.indexOf?(fe?Uint8Array.prototype.indexOf:Uint8Array.prototype.lastIndexOf).call($,P,K):N($,[P],K,te,fe);throw new TypeError("val must be string, number or Buffer")}function N($,P,K,te,fe){var ve=1,Te=$.length,Ie=P.length;if(void 0!==te&&("ucs2"===(te=String(te).toLowerCase())||"ucs-2"===te||"utf16le"===te||"utf-16le"===te)){if($.length<2||P.length<2)return-1;Te/=ve=2,Ie/=2,K/=2}function we(Ge,Ke){return 1===ve?Ge[Ke]:Ge.readUInt16BE(Ke*ve)}if(fe)for(var Pe=-1,je=K;je<Te;je++)if(we($,je)===we(P,-1===Pe?0:je-Pe)){if(je-(Pe=-1===Pe?je:Pe)+1===Ie)return Pe*ve}else-1!==Pe&&(je-=je-Pe),Pe=-1;else for(je=K=Te<K+Ie?Te-Ie:K;0<=je;je--){for(var be=!0,Oe=0;Oe<Ie;Oe++)if(we($,je+Oe)!==we(P,Oe)){be=!1;break}if(be)return je}return-1}function U($,P,K,te){return re(function(fe){for(var ve=[],Te=0;Te<fe.length;++Te)ve.push(255&fe.charCodeAt(Te));return ve}(P),$,K,te)}function R($,P,K,te){return re(function(fe,ve){for(var Te,Ie,we=[],Pe=0;Pe<fe.length&&!((ve-=2)<0);++Pe)Te=(Ie=fe.charCodeAt(Pe))>>8,we.push(Ie%=256),we.push(Te);return we}(P,$.length-K),$,K,te)}function L($,P,K){K=Math.min($.length,K);for(var te=[],fe=P;fe<K;){var ve,Te,Ie,we,Pe=$[fe],je=null,be=239<Pe?4:223<Pe?3:191<Pe?2:1;if(fe+be<=K)switch(be){case 1:Pe<128&&(je=Pe);break;case 2:128==(192&(ve=$[fe+1]))&&127<(we=(31&Pe)<<6|63&ve)&&(je=we);break;case 3:Te=$[fe+2],128==(192&(ve=$[fe+1]))&&128==(192&Te)&&2047<(we=(15&Pe)<<12|(63&ve)<<6|63&Te)&&(we<55296||57343<we)&&(je=we);break;case 4:Te=$[fe+2],Ie=$[fe+3],128==(192&(ve=$[fe+1]))&&128==(192&Te)&&128==(192&Ie)&&65535<(we=(15&Pe)<<18|(63&ve)<<12|(63&Te)<<6|63&Ie)&&we<1114112&&(je=we)}null===je?(je=65533,be=1):65535<je&&(te.push((je-=65536)>>>10&1023|55296),je=56320|1023&je),te.push(je),fe+=be}var Oe=te,Ge=Oe.length;if(Ge<=z)return String.fromCharCode.apply(String,Oe);for(var Ke="",ze=0;ze<Ge;)Ke+=String.fromCharCode.apply(String,Oe.slice(ze,ze+=z));return Ke}H.kMaxLength=T,(f.TYPED_ARRAY_SUPPORT=function(){try{var $=new Uint8Array(1),P={foo:function(){return 42}};return Object.setPrototypeOf(P,Uint8Array.prototype),Object.setPrototypeOf($,P),42===$.foo()}catch{return!1}}())||typeof console>"u"||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(f.prototype,"parent",{enumerable:!0,get:function(){if(f.isBuffer(this))return this.buffer}}),Object.defineProperty(f.prototype,"offset",{enumerable:!0,get:function(){if(f.isBuffer(this))return this.byteOffset}}),typeof Symbol<"u"&&null!=Symbol.species&&f[Symbol.species]===f&&Object.defineProperty(f,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),f.poolSize=8192,f.from=g,Object.setPrototypeOf(f.prototype,Uint8Array.prototype),Object.setPrototypeOf(f,Uint8Array),f.alloc=function($,P,K){return d($),$<=0||void 0===P?C($):"string"==typeof K?C($).fill(P,K):C($).fill(P)},f.allocUnsafe=m,f.allocUnsafeSlow=m,f.isBuffer=function($){return null!=$&&!0===$._isBuffer&&$!==f.prototype},f.compare=function($,P){if(le($,Uint8Array)&&($=f.from($,$.offset,$.byteLength)),le(P,Uint8Array)&&(P=f.from(P,P.offset,P.byteLength)),!f.isBuffer($)||!f.isBuffer(P))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if($===P)return 0;for(var K=$.length,te=P.length,fe=0,ve=Math.min(K,te);fe<ve;++fe)if($[fe]!==P[fe]){K=$[fe],te=P[fe];break}return K<te?-1:te<K?1:0},f.isEncoding=function($){switch(String($).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},f.concat=function($,P){if(!Array.isArray($))throw new TypeError('"list" argument must be an Array of Buffers');if(0===$.length)return f.alloc(0);if(void 0===P)for(fe=P=0;fe<$.length;++fe)P+=$[fe].length;for(var K=f.allocUnsafe(P),te=0,fe=0;fe<$.length;++fe){var ve=$[fe];if(le(ve,Uint8Array)&&(ve=f.from(ve)),!f.isBuffer(ve))throw new TypeError('"list" argument must be an Array of Buffers');ve.copy(K,te),te+=ve.length}return K},f.byteLength=y,f.prototype._isBuffer=!0,f.prototype.swap16=function(){var $=this.length;if($%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var P=0;P<$;P+=2)x(this,P,P+1);return this},f.prototype.swap32=function(){var $=this.length;if($%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var P=0;P<$;P+=4)x(this,P,P+3),x(this,P+1,P+2);return this},f.prototype.swap64=function(){var $=this.length;if($%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var P=0;P<$;P+=8)x(this,P,P+7),x(this,P+1,P+6),x(this,P+2,P+5),x(this,P+3,P+4);return this},f.prototype.toLocaleString=f.prototype.toString=function(){var $=this.length;return 0===$?"":0===arguments.length?L(this,0,$):b.apply(this,arguments)},f.prototype.equals=function($){if(f.isBuffer($))return this===$||0===f.compare(this,$);throw new TypeError("Argument must be a Buffer")},f.prototype.inspect=function(){var P="",$=H.INSPECT_MAX_BYTES;return P=this.toString("hex",0,$).replace(/(.{2})/g,"$1 ").trim(),this.length>$&&(P+=" ... "),"<Buffer "+P+">"},S&&(f.prototype[S]=f.prototype.inspect),f.prototype.compare=function($,P,K,te,fe){if(le($,Uint8Array)&&($=f.from($,$.offset,$.byteLength)),!f.isBuffer($))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof $);if(void 0===K&&(K=$?$.length:0),void 0===te&&(te=0),void 0===fe&&(fe=this.length),(P=void 0===P?0:P)<0||K>$.length||te<0||fe>this.length)throw new RangeError("out of range index");if(fe<=te&&K<=P)return 0;if(fe<=te)return-1;if(K<=P)return 1;if(this===$)return 0;for(var ve=(fe>>>=0)-(te>>>=0),Te=(K>>>=0)-(P>>>=0),Ie=Math.min(ve,Te),we=this.slice(te,fe),Pe=$.slice(P,K),je=0;je<Ie;++je)if(we[je]!==Pe[je]){ve=we[je],Te=Pe[je];break}return ve<Te?-1:Te<ve?1:0},f.prototype.includes=function($,P,K){return-1!==this.indexOf($,P,K)},f.prototype.indexOf=function($,P,K){return D(this,$,P,K,!0)},f.prototype.lastIndexOf=function($,P,K){return D(this,$,P,K,!1)},f.prototype.write=function($,P,K,te){if(void 0===P)te="utf8",K=this.length,P=0;else if(void 0===K&&"string"==typeof P)te=P,K=this.length,P=0;else{if(!isFinite(P))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");P>>>=0,isFinite(K)?(K>>>=0,void 0===te&&(te="utf8")):(te=K,K=void 0)}var fe=this.length-P;if((void 0===K||fe<K)&&(K=fe),0<$.length&&(K<0||P<0)||P>this.length)throw new RangeError("Attempt to write outside buffer bounds");te=te||"utf8";for(var ve,Te,Ie,we=!1;;)switch(te){case"hex":var je=$,be=P,Oe=K,Ge=(be=Number(be)||0,this.length-be);(!Oe||Ge<(Oe=Number(Oe)))&&(Oe=Ge),(Ge=je.length)/2<Oe&&(Oe=Ge/2);for(var Ke=0;Ke<Oe;++Ke){var ze=parseInt(je.substr(2*Ke,2),16);if(pe(ze))return Ke;this[be+Ke]=ze}return Ke;case"utf8":case"utf-8":return Ie=K,re(oe($,(Te=this).length-(Ge=P)),Te,Ge,Ie);case"ascii":case"latin1":case"binary":return U(this,$,P,K);case"base64":return Te=this,Ie=P,ve=K,re(ie($),Te,Ie,ve);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return R(this,$,P,K);default:if(we)throw new TypeError("Unknown encoding: "+te);te=(""+te).toLowerCase(),we=!0}},f.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var z=4096;function F($,P,K){if($%1!=0||$<0)throw new RangeError("offset is not uint");if(K<$+P)throw new RangeError("Trying to access beyond buffer length")}function q($,P,K,te,fe,ve){if(!f.isBuffer($))throw new TypeError('"buffer" argument must be a Buffer instance');if(fe<P||P<ve)throw new RangeError('"value" argument is out of bounds');if(K+te>$.length)throw new RangeError("Index out of range")}function k($,P,K,te){if(K+te>$.length)throw new RangeError("Index out of range");if(K<0)throw new RangeError("Index out of range")}function Z($,P,K,te,fe){return P=+P,K>>>=0,fe||k($,0,K,4),v.write($,P,K,te,23,4),K+4}function X($,P,K,te,fe){return P=+P,K>>>=0,fe||k($,0,K,8),v.write($,P,K,te,52,8),K+8}f.prototype.slice=function($,P){var K=this.length;return($=~~$)<0?($+=K)<0&&($=0):K<$&&($=K),(P=void 0===P?K:~~P)<0?(P+=K)<0&&(P=0):K<P&&(P=K),P<$&&(P=$),K=this.subarray($,P),Object.setPrototypeOf(K,f.prototype),K},f.prototype.readUIntLE=function($,P,K){$>>>=0,P>>>=0,K||F($,P,this.length);for(var te=this[$],fe=1,ve=0;++ve<P&&(fe*=256);)te+=this[$+ve]*fe;return te},f.prototype.readUIntBE=function($,P,K){$>>>=0,P>>>=0,K||F($,P,this.length);for(var te=this[$+--P],fe=1;0<P&&(fe*=256);)te+=this[$+--P]*fe;return te},f.prototype.readUInt8=function($,P){return $>>>=0,P||F($,1,this.length),this[$]},f.prototype.readUInt16LE=function($,P){return $>>>=0,P||F($,2,this.length),this[$]|this[$+1]<<8},f.prototype.readUInt16BE=function($,P){return $>>>=0,P||F($,2,this.length),this[$]<<8|this[$+1]},f.prototype.readUInt32LE=function($,P){return $>>>=0,P||F($,4,this.length),(this[$]|this[$+1]<<8|this[$+2]<<16)+16777216*this[$+3]},f.prototype.readUInt32BE=function($,P){return $>>>=0,P||F($,4,this.length),16777216*this[$]+(this[$+1]<<16|this[$+2]<<8|this[$+3])},f.prototype.readIntLE=function($,P,K){$>>>=0,P>>>=0,K||F($,P,this.length);for(var te=this[$],fe=1,ve=0;++ve<P&&(fe*=256);)te+=this[$+ve]*fe;return(fe*=128)<=te&&(te-=Math.pow(2,8*P)),te},f.prototype.readIntBE=function($,P,K){$>>>=0,P>>>=0,K||F($,P,this.length);for(var te=P,fe=1,ve=this[$+--te];0<te&&(fe*=256);)ve+=this[$+--te]*fe;return(fe*=128)<=ve&&(ve-=Math.pow(2,8*P)),ve},f.prototype.readInt8=function($,P){return $>>>=0,P||F($,1,this.length),128&this[$]?-1*(255-this[$]+1):this[$]},f.prototype.readInt16LE=function($,P){return $>>>=0,P||F($,2,this.length),32768&(P=this[$]|this[$+1]<<8)?4294901760|P:P},f.prototype.readInt16BE=function($,P){return $>>>=0,P||F($,2,this.length),32768&(P=this[$+1]|this[$]<<8)?4294901760|P:P},f.prototype.readInt32LE=function($,P){return $>>>=0,P||F($,4,this.length),this[$]|this[$+1]<<8|this[$+2]<<16|this[$+3]<<24},f.prototype.readInt32BE=function($,P){return $>>>=0,P||F($,4,this.length),this[$]<<24|this[$+1]<<16|this[$+2]<<8|this[$+3]},f.prototype.readFloatLE=function($,P){return $>>>=0,P||F($,4,this.length),v.read(this,$,!0,23,4)},f.prototype.readFloatBE=function($,P){return $>>>=0,P||F($,4,this.length),v.read(this,$,!1,23,4)},f.prototype.readDoubleLE=function($,P){return $>>>=0,P||F($,8,this.length),v.read(this,$,!0,52,8)},f.prototype.readDoubleBE=function($,P){return $>>>=0,P||F($,8,this.length),v.read(this,$,!1,52,8)},f.prototype.writeUIntLE=function($,P,K,te){$=+$,P>>>=0,K>>>=0,te||q(this,$,P,K,Math.pow(2,8*K)-1,0);var fe=1,ve=0;for(this[P]=255&$;++ve<K&&(fe*=256);)this[P+ve]=$/fe&255;return P+K},f.prototype.writeUIntBE=function($,P,K,te){$=+$,P>>>=0,K>>>=0,te||q(this,$,P,K,Math.pow(2,8*K)-1,0);var fe=K-1,ve=1;for(this[P+fe]=255&$;0<=--fe&&(ve*=256);)this[P+fe]=$/ve&255;return P+K},f.prototype.writeUInt8=function($,P,K){return $=+$,P>>>=0,K||q(this,$,P,1,255,0),this[P]=255&$,P+1},f.prototype.writeUInt16LE=function($,P,K){return $=+$,P>>>=0,K||q(this,$,P,2,65535,0),this[P]=255&$,this[P+1]=$>>>8,P+2},f.prototype.writeUInt16BE=function($,P,K){return $=+$,P>>>=0,K||q(this,$,P,2,65535,0),this[P]=$>>>8,this[P+1]=255&$,P+2},f.prototype.writeUInt32LE=function($,P,K){return $=+$,P>>>=0,K||q(this,$,P,4,4294967295,0),this[P+3]=$>>>24,this[P+2]=$>>>16,this[P+1]=$>>>8,this[P]=255&$,P+4},f.prototype.writeUInt32BE=function($,P,K){return $=+$,P>>>=0,K||q(this,$,P,4,4294967295,0),this[P]=$>>>24,this[P+1]=$>>>16,this[P+2]=$>>>8,this[P+3]=255&$,P+4},f.prototype.writeIntLE=function($,P,K,te){$=+$,P>>>=0,te||q(this,$,P,K,(te=Math.pow(2,8*K-1))-1,-te);var fe=0,ve=1,Te=0;for(this[P]=255&$;++fe<K&&(ve*=256);)$<0&&0===Te&&0!==this[P+fe-1]&&(Te=1),this[P+fe]=($/ve>>0)-Te&255;return P+K},f.prototype.writeIntBE=function($,P,K,te){$=+$,P>>>=0,te||q(this,$,P,K,(te=Math.pow(2,8*K-1))-1,-te);var fe=K-1,ve=1,Te=0;for(this[P+fe]=255&$;0<=--fe&&(ve*=256);)$<0&&0===Te&&0!==this[P+fe+1]&&(Te=1),this[P+fe]=($/ve>>0)-Te&255;return P+K},f.prototype.writeInt8=function($,P,K){return $=+$,P>>>=0,K||q(this,$,P,1,127,-128),this[P]=255&($=$<0?255+$+1:$),P+1},f.prototype.writeInt16LE=function($,P,K){return $=+$,P>>>=0,K||q(this,$,P,2,32767,-32768),this[P]=255&$,this[P+1]=$>>>8,P+2},f.prototype.writeInt16BE=function($,P,K){return $=+$,P>>>=0,K||q(this,$,P,2,32767,-32768),this[P]=$>>>8,this[P+1]=255&$,P+2},f.prototype.writeInt32LE=function($,P,K){return $=+$,P>>>=0,K||q(this,$,P,4,2147483647,-2147483648),this[P]=255&$,this[P+1]=$>>>8,this[P+2]=$>>>16,this[P+3]=$>>>24,P+4},f.prototype.writeInt32BE=function($,P,K){return $=+$,P>>>=0,K||q(this,$,P,4,2147483647,-2147483648),this[P]=($=$<0?4294967295+$+1:$)>>>24,this[P+1]=$>>>16,this[P+2]=$>>>8,this[P+3]=255&$,P+4},f.prototype.writeFloatLE=function($,P,K){return Z(this,$,P,!0,K)},f.prototype.writeFloatBE=function($,P,K){return Z(this,$,P,!1,K)},f.prototype.writeDoubleLE=function($,P,K){return X(this,$,P,!0,K)},f.prototype.writeDoubleBE=function($,P,K){return X(this,$,P,!1,K)},f.prototype.copy=function($,P,K,te){if(!f.isBuffer($))throw new TypeError("argument should be a Buffer");if(K=K||0,te||0===te||(te=this.length),P>=$.length&&(P=$.length),(te=0<te&&te<K?K:te)===K||0===$.length||0===this.length)return 0;if((P=P||0)<0)throw new RangeError("targetStart out of bounds");if(K<0||K>=this.length)throw new RangeError("Index out of range");if(te<0)throw new RangeError("sourceEnd out of bounds");te>this.length&&(te=this.length);var fe=(te=$.length-P<te-K?$.length-P+K:te)-K;if(this===$&&"function"==typeof Uint8Array.prototype.copyWithin)this.copyWithin(P,K,te);else if(this===$&&K<P&&P<te)for(var ve=fe-1;0<=ve;--ve)$[ve+P]=this[ve+K];else Uint8Array.prototype.set.call($,this.subarray(K,te),P);return fe},f.prototype.fill=function($,P,K,te){if("string"==typeof $){if("string"==typeof P?(te=P,P=0,K=this.length):"string"==typeof K&&(te=K,K=this.length),void 0!==te&&"string"!=typeof te)throw new TypeError("encoding must be a string");if("string"==typeof te&&!f.isEncoding(te))throw new TypeError("Unknown encoding: "+te);var fe;1===$.length&&(fe=$.charCodeAt(0),("utf8"===te&&fe<128||"latin1"===te)&&($=fe))}else"number"==typeof $?$&=255:"boolean"==typeof $&&($=Number($));if(P<0||this.length<P||this.length<K)throw new RangeError("Out of range index");var ve;if(!(K<=P))if(P>>>=0,K=void 0===K?this.length:K>>>0,"number"==typeof($=$||0))for(ve=P;ve<K;++ve)this[ve]=$;else{var Te=f.isBuffer($)?$:f.from($,te),Ie=Te.length;if(0===Ie)throw new TypeError('The value "'+$+'" is invalid for argument "value"');for(ve=0;ve<K-P;++ve)this[ve+P]=Te[ve%Ie]}return this};var W=/[^+/0-9A-Za-z-_]/g;function oe($,P){P=P||1/0;for(var K,te=$.length,fe=null,ve=[],Te=0;Te<te;++Te){if(55295<(K=$.charCodeAt(Te))&&K<57344){if(!fe){if(56319<K){-1<(P-=3)&&ve.push(239,191,189);continue}if(Te+1===te){-1<(P-=3)&&ve.push(239,191,189);continue}fe=K;continue}if(K<56320){-1<(P-=3)&&ve.push(239,191,189),fe=K;continue}K=65536+(fe-55296<<10|K-56320)}else fe&&-1<(P-=3)&&ve.push(239,191,189);if(fe=null,K<128){if(--P<0)break;ve.push(K)}else if(K<2048){if((P-=2)<0)break;ve.push(K>>6|192,63&K|128)}else if(K<65536){if((P-=3)<0)break;ve.push(K>>12|224,K>>6&63|128,63&K|128)}else{if(!(K<1114112))throw new Error("Invalid code point");if((P-=4)<0)break;ve.push(K>>18|240,K>>12&63|128,K>>6&63|128,63&K|128)}}return ve}function ie($){return E.toByteArray(function(P){if((P=(P=P.split("=")[0]).trim().replace(W,"")).length<2)return"";for(;P.length%4!=0;)P+="=";return P}($))}function re($,P,K,te){for(var fe=0;fe<te&&!(fe+K>=P.length||fe>=$.length);++fe)P[fe+K]=$[fe];return fe}function le($,P){return $ instanceof P||null!=$&&null!=$.constructor&&null!=$.constructor.name&&$.constructor.name===P.name}function pe($){return $!=$}var Ae=function(){for(var $="0123456789abcdef",P=new Array(256),K=0;K<16;++K)for(var te=16*K,fe=0;fe<16;++fe)P[te+fe]=$[K]+$[fe];return P}()}).call(this,l("buffer").Buffer)},{"base64-js":1,buffer:4,ieee754:254}],5:[function(l,de,H){de.exports=function(M){if("function"!=typeof M)throw TypeError(String(M)+" is not a function");return M}},{}],6:[function(l,de,H){var M=l("../internals/is-object");de.exports=function(E){if(M(E)||null===E)return E;throw TypeError("Can't set "+String(E)+" as a prototype")}},{"../internals/is-object":75}],7:[function(v,de,H){var M=v("../internals/well-known-symbol"),E=v("../internals/object-create"),S=(v=v("../internals/object-define-property"),M("unscopables")),T=Array.prototype;null==T[S]&&v.f(T,S,{configurable:!0,value:E(null)}),de.exports=function(C){T[S][C]=!0}},{"../internals/object-create":91,"../internals/object-define-property":93,"../internals/well-known-symbol":150}],8:[function(l,de,H){"use strict";var M=l("../internals/string-multibyte").charAt;de.exports=function(E,v,S){return v+(S?M(E,v).length:1)}},{"../internals/string-multibyte":125}],9:[function(l,de,H){de.exports=function(M,E,v){if(M instanceof E)return M;throw TypeError("Incorrect "+(v?v+" ":"")+"invocation")}},{}],10:[function(l,de,H){var M=l("../internals/is-object");de.exports=function(E){if(M(E))return E;throw TypeError(String(E)+" is not an object")}},{"../internals/is-object":75}],11:[function(l,de,H){de.exports=typeof ArrayBuffer<"u"&&typeof DataView<"u"},{}],12:[function(k,de,H){"use strict";function M(X){return C(X)&&f(Z,g(X))}var E,v=k("../internals/array-buffer-native"),S=k("../internals/descriptors"),T=k("../internals/global"),C=k("../internals/is-object"),f=k("../internals/has"),g=k("../internals/classof"),d=k("../internals/create-non-enumerable-property"),m=k("../internals/redefine"),p=k("../internals/object-define-property").f,h=k("../internals/object-get-prototype-of"),y=k("../internals/object-set-prototype-of"),z=k("../internals/well-known-symbol"),b=(k=k("../internals/uid"),T.Int8Array),x=b&&b.prototype,D=(D=T.Uint8ClampedArray)&&D.prototype,N=b&&h(b),U=x&&h(x),R=Object.prototype,L=R.isPrototypeOf,F=(z=z("toStringTag"),k("TYPED_ARRAY_TAG")),q=v&&!!y&&"Opera"!==g(T.opera),Z=(k=!1,{Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8});for(E in Z)T[E]||(q=!1);if((!q||"function"!=typeof N||N===Function.prototype)&&(N=function(){throw TypeError("Incorrect invocation")},q))for(E in Z)T[E]&&y(T[E],N);if((!q||!U||U===R)&&(U=N.prototype,q))for(E in Z)T[E]&&y(T[E].prototype,U);if(q&&h(D)!==U&&y(D,U),S&&!f(U,z))for(E in k=!0,p(U,z,{get:function(){return C(this)?this[F]:void 0}}),Z)T[E]&&d(T[E],F,E);de.exports={NATIVE_ARRAY_BUFFER_VIEWS:q,TYPED_ARRAY_TAG:k&&F,aTypedArray:function(X){if(M(X))return X;throw TypeError("Target is not a typed array")},aTypedArrayConstructor:function(X){if(y){if(L.call(N,X))return X}else for(var W in Z)if(f(Z,E)&&(W=T[W])&&(X===W||L.call(W,X)))return X;throw TypeError("Target is not a typed array constructor")},exportTypedArrayMethod:function(X,W,oe){if(S){if(oe)for(var ie in Z)(ie=T[ie])&&f(ie.prototype,X)&&delete ie.prototype[X];U[X]&&!oe||m(U,X,!oe&&q&&x[X]||W)}},exportTypedArrayStaticMethod:function(X,W,oe){var ie,re;if(S){if(y){if(oe)for(ie in Z)(re=T[ie])&&f(re,X)&&delete re[X];if(N[X]&&!oe)return;try{return m(N,X,!oe&&q&&b[X]||W)}catch{}}for(ie in Z)!(re=T[ie])||re[X]&&!oe||m(re,X,W)}},isView:function(X){return"DataView"===(X=g(X))||f(Z,X)},isTypedArray:M,TypedArray:N,TypedArrayPrototype:U}},{"../internals/array-buffer-native":11,"../internals/classof":29,"../internals/create-non-enumerable-property":38,"../internals/descriptors":43,"../internals/global":60,"../internals/has":61,"../internals/is-object":75,"../internals/object-define-property":93,"../internals/object-get-prototype-of":98,"../internals/object-set-prototype-of":102,"../internals/redefine":110,"../internals/uid":147,"../internals/well-known-symbol":150}],13:[function(K,de,H){"use strict";function M(be){return[255&be]}function E(be){return[255&be,be>>8&255]}function v(be){return[255&be,be>>8&255,be>>16&255,be>>24&255]}function S(be){return be[3]<<24|be[2]<<16|be[1]<<8|be[0]}function T(be){return ve(be,23,4)}function C(be){return ve(be,52,8)}function f(be,Oe){k(be[le],Oe,{get:function(){return W(this)[Oe]}})}function g(et,Oe,qe,Ke){if((qe=R(qe))+Oe>(et=W(et)).byteLength)throw fe(pe);return et=W(et.buffer).bytes.slice(qe+=et.byteOffset,qe+Oe),Ke?et:et.reverse()}function d(be,Oe,Ge,Ke,ze,qe){if((Ge=R(Ge))+Oe>(be=W(be)).byteLength)throw fe(pe);for(var et=W(be.buffer).bytes,_t=Ge+be.byteOffset,ot=Ke(+ze),Kt=0;Kt<Oe;Kt++)et[_t+Kt]=ot[qe?Kt:Oe-Kt-1]}var m=K("../internals/global"),p=K("../internals/descriptors"),h=K("../internals/array-buffer-native"),y=K("../internals/create-non-enumerable-property"),b=K("../internals/redefine-all"),x=K("../internals/fails"),D=K("../internals/an-instance"),N=K("../internals/to-integer"),U=K("../internals/to-length"),R=K("../internals/to-index"),L=K("../internals/ieee754"),z=K("../internals/object-get-prototype-of"),F=K("../internals/object-set-prototype-of"),q=K("../internals/object-get-own-property-names").f,k=K("../internals/object-define-property").f,Z=K("../internals/array-fill"),X=K("../internals/set-to-string-tag"),W=(K=K("../internals/internal-state")).get,oe=K.set,ie="ArrayBuffer",re="DataView",le="prototype",pe="Wrong index",Ae=m[ie],$=Ae,P=m[re],te=(K=P&&P[le],Object.prototype),fe=m.RangeError,ve=L.pack,Te=L.unpack;if(h){if(!x(function(){Ae(1)})||!x(function(){new Ae(-1)})||x(function(){return new Ae,new Ae(1.5),new Ae(NaN),Ae.name!=ie})){m=($=function(Ge){return D(this,$),new Ae(R(Ge))})[le]=Ae[le];for(var Ie,we=q(Ae),Pe=0;we.length>Pe;)(Ie=we[Pe++])in $||y($,Ie,Ae[Ie]);m.constructor=$}F&&z(K)!==te&&F(K,te),L=new P(new $(2));var je=K.setInt8;L.setInt8(0,2147483648),L.setInt8(1,2147483649),!L.getInt8(0)&&L.getInt8(1)||b(K,{setInt8:function(Oe,Ge){je.call(this,Oe,Ge<<24>>24)},setUint8:function(Oe,Ge){je.call(this,Oe,Ge<<24>>24)}},{unsafe:!0})}else $=function(be){D(this,$,ie),be=R(be),oe(this,{bytes:Z.call(new Array(be),0),byteLength:be}),p||(this.byteLength=be)},P=function(be,ze,Ge){D(this,P,re),D(be,$,re);var Ke=W(be).byteLength;if((ze=N(ze))<0||Ke<ze)throw fe("Wrong offset");if(Ke<ze+(Ge=void 0===Ge?Ke-ze:U(Ge)))throw fe("Wrong length");oe(this,{buffer:be,byteLength:Ge,byteOffset:ze}),p||(this.buffer=be,this.byteLength=Ge,this.byteOffset=ze)},p&&(f($,"byteLength"),f(P,"buffer"),f(P,"byteLength"),f(P,"byteOffset")),b(P[le],{getInt8:function(be){return g(this,1,be)[0]<<24>>24},getUint8:function(be){return g(this,1,be)[0]},getInt16:function(be){return((be=g(this,2,be,1<arguments.length?arguments[1]:void 0))[1]<<8|be[0])<<16>>16},getUint16:function(be){return(be=g(this,2,be,1<arguments.length?arguments[1]:void 0))[1]<<8|be[0]},getInt32:function(be){return S(g(this,4,be,1<arguments.length?arguments[1]:void 0))},getUint32:function(be){return S(g(this,4,be,1<arguments.length?arguments[1]:void 0))>>>0},getFloat32:function(be){return Te(g(this,4,be,1<arguments.length?arguments[1]:void 0),23)},getFloat64:function(be){return Te(g(this,8,be,1<arguments.length?arguments[1]:void 0),52)},setInt8:function(be,Oe){d(this,1,be,M,Oe)},setUint8:function(be,Oe){d(this,1,be,M,Oe)},setInt16:function(be,Oe){d(this,2,be,E,Oe,2<arguments.length?arguments[2]:void 0)},setUint16:function(be,Oe){d(this,2,be,E,Oe,2<arguments.length?arguments[2]:void 0)},setInt32:function(be,Oe){d(this,4,be,v,Oe,2<arguments.length?arguments[2]:void 0)},setUint32:function(be,Oe){d(this,4,be,v,Oe,2<arguments.length?arguments[2]:void 0)},setFloat32:function(be,Oe){d(this,4,be,T,Oe,2<arguments.length?arguments[2]:void 0)},setFloat64:function(be,Oe){d(this,8,be,C,Oe,2<arguments.length?arguments[2]:void 0)}});X($,ie),X(P,re),de.exports={ArrayBuffer:$,DataView:P}},{"../internals/an-instance":9,"../internals/array-buffer-native":11,"../internals/array-fill":15,"../internals/create-non-enumerable-property":38,"../internals/descriptors":43,"../internals/fails":51,"../internals/global":60,"../internals/ieee754":66,"../internals/internal-state":71,"../internals/object-define-property":93,"../internals/object-get-own-property-names":96,"../internals/object-get-prototype-of":98,"../internals/object-set-prototype-of":102,"../internals/redefine-all":109,"../internals/set-to-string-tag":119,"../internals/to-index":135,"../internals/to-integer":137,"../internals/to-length":138}],14:[function(l,de,H){"use strict";var M=l("../internals/to-object"),E=l("../internals/to-absolute-index"),v=l("../internals/to-length"),S=Math.min;de.exports=[].copyWithin||function(p,C){var f=M(this),g=v(f.length),d=E(p,g),m=E(C,g),h=S((void 0===(p=2<arguments.length?arguments[2]:void 0)?g:E(p,g))-m,g-d),y=1;for(m<d&&d<m+h&&(y=-1,m+=h-1,d+=h-1);0<h--;)m in f?f[d]=f[m]:delete f[d],d+=y,m+=y;return f}},{"../internals/to-absolute-index":134,"../internals/to-length":138,"../internals/to-object":139}],15:[function(l,de,H){"use strict";var M=l("../internals/to-object"),E=l("../internals/to-absolute-index"),v=l("../internals/to-length");de.exports=function(S){for(var g,T=M(this),C=v(T.length),f=E(1<(g=arguments.length)?arguments[1]:void 0,C),d=void 0===(g=2<g?arguments[2]:void 0)?C:E(g,C);f<d;)T[f++]=S;return T}},{"../internals/to-absolute-index":134,"../internals/to-length":138,"../internals/to-object":139}],16:[function(v,de,H){"use strict";var M=v("../internals/array-iteration").forEach,E=v("../internals/array-method-is-strict");v=v("../internals/array-method-uses-to-length"),E=E("forEach"),v=v("forEach"),de.exports=E&&v?[].forEach:function(S){return M(this,S,1<arguments.length?arguments[1]:void 0)}},{"../internals/array-iteration":19,"../internals/array-method-is-strict":22,"../internals/array-method-uses-to-length":23}],17:[function(l,de,H){"use strict";var M=l("../internals/function-bind-context"),E=l("../internals/to-object"),v=l("../internals/call-with-safe-iteration-closing"),S=l("../internals/is-array-iterator-method"),T=l("../internals/to-length"),C=l("../internals/create-property"),f=l("../internals/get-iterator-method");de.exports=function(D){var d,m,p,h,y,b,x=E(D),N=(D="function"==typeof this?this:Array,arguments.length),U=1<N?arguments[1]:void 0,R=void 0!==U,L=f(x),z=0;if(R&&(U=M(U,2<N?arguments[2]:void 0,2)),null==L||D==Array&&S(L))for(m=new D(d=T(x.length));z<d;z++)b=R?U(x[z],z):x[z],C(m,z,b);else for(y=(h=L.call(x)).next,m=new D;!(p=y.call(h)).done;z++)b=R?v(h,U,[p.value,z],!0):p.value,C(m,z,b);return m.length=z,m}},{"../internals/call-with-safe-iteration-closing":26,"../internals/create-property":40,"../internals/function-bind-context":55,"../internals/get-iterator-method":58,"../internals/is-array-iterator-method":72,"../internals/to-length":138,"../internals/to-object":139}],18:[function(l,de,H){function M(T){return function(C,f,g){var d,m=E(C),p=v(m.length),h=S(g,p);if(T&&f!=f){for(;h<p;)if((d=m[h++])!=d)return!0}else for(;h<p;h++)if((T||h in m)&&m[h]===f)return T||h||0;return!T&&-1}}var E=l("../internals/to-indexed-object"),v=l("../internals/to-length"),S=l("../internals/to-absolute-index");de.exports={includes:M(!0),indexOf:M(!1)}},{"../internals/to-absolute-index":134,"../internals/to-indexed-object":136,"../internals/to-length":138}],19:[function(l,de,H){function M(g){var d=1==g,m=2==g,p=3==g,h=4==g,y=6==g,b=5==g||y;return function(x,D,N,U){for(var R,L,z=S(x),F=v(z),q=E(D,N,3),k=T(F.length),Z=0,X=(D=U||C,d?D(x,k):m?D(x,0):void 0);Z<k;Z++)if((b||Z in F)&&(L=q(R=F[Z],Z,z),g))if(d)X[Z]=L;else if(L)switch(g){case 3:return!0;case 5:return R;case 6:return Z;case 2:f.call(X,R)}else if(h)return!1;return y?-1:p||h?h:X}}var E=l("../internals/function-bind-context"),v=l("../internals/indexed-object"),S=l("../internals/to-object"),T=l("../internals/to-length"),C=l("../internals/array-species-create"),f=[].push;de.exports={forEach:M(0),map:M(1),filter:M(2),some:M(3),every:M(4),find:M(5),findIndex:M(6)}},{"../internals/array-species-create":25,"../internals/function-bind-context":55,"../internals/indexed-object":67,"../internals/to-length":138,"../internals/to-object":139}],20:[function(g,de,H){"use strict";var M=g("../internals/to-indexed-object"),E=g("../internals/to-integer"),v=g("../internals/to-length"),f=g("../internals/array-method-is-strict"),S=(g=g("../internals/array-method-uses-to-length"),Math.min),T=[].lastIndexOf,C=!!T&&1/[1].lastIndexOf(1,-0)<0;f=f("lastIndexOf"),g=g("indexOf",{ACCESSORS:!0,1:0}),de.exports=!C&&f&&g?T:function(d){if(C)return T.apply(this,arguments)||0;var m=M(this),p=v(m.length),h=p-1;for((h=1<arguments.length?S(h,E(arguments[1])):h)<0&&(h=p+h);0<=h;h--)if(h in m&&m[h]===d)return h||0;return-1}},{"../internals/array-method-is-strict":22,"../internals/array-method-uses-to-length":23,"../internals/to-indexed-object":136,"../internals/to-integer":137,"../internals/to-length":138}],21:[function(l,de,H){var M=l("../internals/fails"),E=l("../internals/well-known-symbol"),v=l("../internals/engine-v8-version"),S=E("species");de.exports=function(T){return 51<=v||!M(function(){var C=[];return(C.constructor={})[S]=function(){return{foo:1}},1!==C[T](Boolean).foo})}},{"../internals/engine-v8-version":48,"../internals/fails":51,"../internals/well-known-symbol":150}],22:[function(l,de,H){"use strict";var M=l("../internals/fails");de.exports=function(E,v){var S=[][E];return!!S&&M(function(){S.call(null,v||function(){throw 1},1)})}},{"../internals/fails":51}],23:[function(l,de,H){function M(f){throw f}var E=l("../internals/descriptors"),v=l("../internals/fails"),S=l("../internals/has"),T=Object.defineProperty,C={};de.exports=function(f,g){var d,m,p,h;return S(C,f)?C[f]:(d=[][f],m=!!S(g=g||{},"ACCESSORS")&&g.ACCESSORS,p=S(g,0)?g[0]:M,h=S(g,1)?g[1]:void 0,C[f]=!!d&&!v(function(){if(m&&!E)return!0;var y={length:-1};m?T(y,1,{enumerable:!0,get:M}):y[1]=1,d.call(y,p,h)}))}},{"../internals/descriptors":43,"../internals/fails":51,"../internals/has":61}],24:[function(l,de,H){function M(C){return function(f,g,d,m){E(g);var p=v(f),h=S(p),y=T(p.length),b=C?y-1:0,x=C?-1:1;if(d<2)for(;;){if(b in h){m=h[b],b+=x;break}if(b+=x,C?b<0:y<=b)throw TypeError("Reduce of empty array with no initial value")}for(;C?0<=b:b<y;b+=x)b in h&&(m=g(m,h[b],b,p));return m}}var E=l("../internals/a-function"),v=l("../internals/to-object"),S=l("../internals/indexed-object"),T=l("../internals/to-length");de.exports={left:M(!1),right:M(!0)}},{"../internals/a-function":5,"../internals/indexed-object":67,"../internals/to-length":138,"../internals/to-object":139}],25:[function(l,de,H){var M=l("../internals/is-object"),E=l("../internals/is-array"),v=l("../internals/well-known-symbol")("species");de.exports=function(S,T){var C;return new(void 0===(C=E(S)&&("function"==typeof(C=S.constructor)&&(C===Array||E(C.prototype))||M(C)&&null===(C=C[v]))?void 0:C)?Array:C)(0===T?0:T)}},{"../internals/is-array":73,"../internals/is-object":75,"../internals/well-known-symbol":150}],26:[function(l,de,H){var M=l("../internals/an-object");de.exports=function(E,v,S,T){try{return T?v(M(S)[0],S[1]):v(S)}catch(C){throw void 0!==(T=E.return)&&M(T.call(E)),C}}},{"../internals/an-object":10}],27:[function(l,de,H){var M=l("../internals/well-known-symbol")("iterator"),E=!1;try{var v=0,S={next:function(){return{done:!!v++}},return:function(){E=!0}};S[M]=function(){return this},Array.from(S,function(){throw 2})}catch{}de.exports=function(T,C){if(!C&&!E)return!1;var f=!1;try{var g={};g[M]=function(){return{next:function(){return{done:f=!0}}}},T(g)}catch{}return f}},{"../internals/well-known-symbol":150}],28:[function(l,de,H){var M={}.toString;de.exports=function(E){return M.call(E).slice(8,-1)}},{}],29:[function(l,de,H){var M=l("../internals/to-string-tag-support"),E=l("../internals/classof-raw"),v=l("../internals/well-known-symbol")("toStringTag"),S="Arguments"==E(function(){return arguments}());de.exports=M?E:function(T){var C;return void 0===T?"Undefined":null===T?"Null":"string"==typeof(C=function(f,g){try{return f[g]}catch{}}(T=Object(T),v))?C:S?E(T):"Object"==(C=E(T))&&"function"==typeof T.callee?"Arguments":C}},{"../internals/classof-raw":28,"../internals/to-string-tag-support":143,"../internals/well-known-symbol":150}],30:[function(p,de,H){"use strict";var M=p("../internals/object-define-property").f,E=p("../internals/object-create"),v=p("../internals/redefine-all"),S=p("../internals/function-bind-context"),T=p("../internals/an-instance"),C=p("../internals/iterate"),f=p("../internals/define-iterator"),g=p("../internals/set-species"),d=p("../internals/descriptors"),m=p("../internals/internal-metadata").fastKey,h=(p=p("../internals/internal-state")).set,y=p.getterFor;de.exports={getConstructor:function(b,x,D,N){function U(F,q,k){var Z,X=z(F),W=R(F,q);return W?W.value=k:(X.last=W={index:Z=m(q,!0),key:q,value:k,previous:q=X.last,next:void 0,removed:!1},X.first||(X.first=W),q&&(q.next=W),d?X.size++:F.size++,"F"!==Z&&(X.index[Z]=W)),F}function R(Z,q){Z=z(Z);var k,X=m(q);if("F"!==X)return Z.index[X];for(k=Z.first;k;k=k.next)if(k.key==q)return k}var L=b(function(F,q){T(F,L,x),h(F,{type:x,index:E(null),first:void 0,last:void 0,size:0}),d||(F.size=0),null!=q&&C(q,F[N],F,D)}),z=y(x);return v(L.prototype,{clear:function(){for(var F=z(this),q=F.index,k=F.first;k;)k.removed=!0,k.previous&&(k.previous=k.previous.next=void 0),delete q[k.index],k=k.next;F.first=F.last=void 0,d?F.size=0:this.size=0},delete:function(X){var q,k,Z=z(this);return(X=R(this,X))&&(q=X.next,k=X.previous,delete Z.index[X.index],X.removed=!0,k&&(k.next=q),q&&(q.previous=k),Z.first==X&&(Z.first=q),Z.last==X&&(Z.last=k),d?Z.size--:this.size--),!!X},forEach:function(F){for(var q,k=z(this),Z=S(F,1<arguments.length?arguments[1]:void 0,3);q=q?q.next:k.first;)for(Z(q.value,q.key,this);q&&q.removed;)q=q.previous},has:function(F){return!!R(this,F)}}),v(L.prototype,D?{get:function(F){return(F=R(this,F))&&F.value},set:function(F,q){return U(this,0===F?0:F,q)}}:{add:function(F){return U(this,F=0===F?0:F,F)}}),d&&M(L.prototype,"size",{get:function(){return z(this).size}}),L},setStrong:function(b,x,D){var N=x+" Iterator",U=y(x),R=y(N);f(b,x,function(L,z){h(this,{type:N,target:L,state:U(L),kind:z,last:void 0})},function(){for(var L=R(this),z=L.kind,F=L.last;F&&F.removed;)F=F.previous;return L.target&&(L.last=F=F?F.next:L.state.first)?"keys"==z?{value:F.key,done:!1}:"values"==z?{value:F.value,done:!1}:{value:[F.key,F.value],done:!1}:{value:L.target=void 0,done:!0}},D?"entries":"values",!D,!0),g(x)}}},{"../internals/an-instance":9,"../internals/define-iterator":41,"../internals/descriptors":43,"../internals/function-bind-context":55,"../internals/internal-metadata":70,"../internals/internal-state":71,"../internals/iterate":78,"../internals/object-create":91,"../internals/object-define-property":93,"../internals/redefine-all":109,"../internals/set-species":118}],31:[function(h,de,H){"use strict";function M(U){return U.frozen||(U.frozen=new E)}function E(){this.entries=[]}function v(U,R){return x(U.entries,function(L){return L[0]===R})}var S=h("../internals/redefine-all"),T=h("../internals/internal-metadata").getWeakData,C=h("../internals/an-object"),f=h("../internals/is-object"),g=h("../internals/an-instance"),d=h("../internals/iterate"),m=h("../internals/array-iteration"),p=h("../internals/has"),y=(h=h("../internals/internal-state")).set,b=h.getterFor,x=m.find,D=m.findIndex,N=0;E.prototype={get:function(U){if(U=v(this,U))return U[1]},has:function(U){return!!v(this,U)},set:function(U,R){var L=v(this,U);L?L[1]=R:this.entries.push([U,R])},delete:function(U){var R=D(this.entries,function(L){return L[0]===U});return~R&&this.entries.splice(R,1),!!~R}},de.exports={getConstructor:function(U,R,L,z){function F(Z,X,W){var oe=k(Z),ie=T(C(X),!0);return!0===ie?M(oe).set(X,W):ie[oe.id]=W,Z}var q=U(function(Z,X){g(Z,q,R),y(Z,{type:R,id:N++,frozen:void 0}),null!=X&&d(X,Z[z],Z,L)}),k=b(R);return S(q.prototype,{delete:function(Z){var X,W=k(this);return!!f(Z)&&(!0===(X=T(Z))?M(W).delete(Z):X&&p(X,W.id)&&delete X[W.id])},has:function(Z){var X,W=k(this);return!!f(Z)&&(!0===(X=T(Z))?M(W).has(Z):X&&p(X,W.id))}}),S(q.prototype,L?{get:function(Z){var X,W=k(this);if(f(Z))return!0===(X=T(Z))?M(W).get(Z):X?X[W.id]:void 0},set:function(Z,X){return F(this,Z,X)}}:{add:function(Z){return F(this,Z,!0)}}),q}}},{"../internals/an-instance":9,"../internals/an-object":10,"../internals/array-iteration":19,"../internals/has":61,"../internals/internal-metadata":70,"../internals/internal-state":71,"../internals/is-object":75,"../internals/iterate":78,"../internals/redefine-all":109}],32:[function(l,de,H){"use strict";var M=l("../internals/export"),E=l("../internals/global"),v=l("../internals/is-forced"),S=l("../internals/redefine"),T=l("../internals/internal-metadata"),C=l("../internals/iterate"),f=l("../internals/an-instance"),g=l("../internals/is-object"),d=l("../internals/fails"),m=l("../internals/check-correctness-of-iteration"),p=l("../internals/set-to-string-tag"),h=l("../internals/inherit-if-required");de.exports=function(y,b,x){function D(ie){var re=X[ie];S(X,ie,"add"==ie?function(le){return re.call(this,0===le?0:le),this}:"delete"==ie?function(le){return!(q&&!g(le))&&re.call(this,0===le?0:le)}:"get"==ie?function(le){return q&&!g(le)?void 0:re.call(this,0===le?0:le)}:"has"==ie?function(le){return!(q&&!g(le))&&re.call(this,0===le?0:le)}:function(le,pe){return re.call(this,0===le?0:le,pe),this})}var N,U,R,L,z,F=-1!==y.indexOf("Map"),q=-1!==y.indexOf("Weak"),k=F?"set":"add",Z=E[y],X=Z&&Z.prototype,W=Z,oe={};return v(y,"function"!=typeof Z||!(q||X.forEach&&!d(function(){(new Z).entries().next()})))?(W=x.getConstructor(b,y,F,k),T.REQUIRED=!0):v(y,!0)&&(U=(N=new W)[k](q?{}:-0,1)!=N,R=d(function(){N.has(1)}),L=m(function(ie){new Z(ie)}),z=!q&&d(function(){for(var ie=new Z,re=5;re--;)ie[k](re,re);return!ie.has(-0)}),L||(((W=b(function(ie,re){return f(ie,W,y),ie=h(new Z,ie,W),null!=re&&C(re,ie[k],ie,F),ie})).prototype=X).constructor=W),(R||z)&&(D("delete"),D("has"),F&&D("get")),(z||U)&&D(k),q&&X.clear&&delete X.clear),oe[y]=W,M({global:!0,forced:W!=Z},oe),p(W,y),q||x.setStrong(W,y,F),W}},{"../internals/an-instance":9,"../internals/check-correctness-of-iteration":27,"../internals/export":50,"../internals/fails":51,"../internals/global":60,"../internals/inherit-if-required":68,"../internals/internal-metadata":70,"../internals/is-forced":74,"../internals/is-object":75,"../internals/iterate":78,"../internals/redefine":110,"../internals/set-to-string-tag":119}],33:[function(l,de,H){var M=l("../internals/has"),E=l("../internals/own-keys"),v=l("../internals/object-get-own-property-descriptor"),S=l("../internals/object-define-property");de.exports=function(T,C){for(var f=E(C),g=S.f,d=v.f,m=0;m<f.length;m++){var p=f[m];M(T,p)||g(T,p,d(C,p))}}},{"../internals/has":61,"../internals/object-define-property":93,"../internals/object-get-own-property-descriptor":94,"../internals/own-keys":105}],34:[function(l,de,H){var M=l("../internals/well-known-symbol")("match");de.exports=function(E){var v=/./;try{"/./"[E](v)}catch{try{return v[M]=!1,"/./"[E](v)}catch{}}return!1}},{"../internals/well-known-symbol":150}],35:[function(l,de,H){l=l("../internals/fails"),de.exports=!l(function(){function M(){}return M.prototype.constructor=null,Object.getPrototypeOf(new M)!==M.prototype})},{"../internals/fails":51}],36:[function(l,de,H){var M=l("../internals/require-object-coercible"),E=/"/g;de.exports=function(f,S,T,C){f=String(M(f));var g="<"+S;return""!==T&&(g+=" "+T+'="'+String(C).replace(E,"&quot;")+'"'),g+">"+f+"</"+S+">"}},{"../internals/require-object-coercible":115}],37:[function(l,de,H){"use strict";function M(){return this}var E=l("../internals/iterators-core").IteratorPrototype,v=l("../internals/object-create"),S=l("../internals/create-property-descriptor"),T=l("../internals/set-to-string-tag"),C=l("../internals/iterators");de.exports=function(f,g,d){return g+=" Iterator",f.prototype=v(E,{next:S(1,d)}),T(f,g,!1,!0),C[g]=M,f}},{"../internals/create-property-descriptor":39,"../internals/iterators":80,"../internals/iterators-core":79,"../internals/object-create":91,"../internals/set-to-string-tag":119}],38:[function(l,de,H){var M=l("../internals/descriptors"),E=l("../internals/object-define-property"),v=l("../internals/create-property-descriptor");de.exports=M?function(S,T,C){return E.f(S,T,v(1,C))}:function(S,T,C){return S[T]=C,S}},{"../internals/create-property-descriptor":39,"../internals/descriptors":43,"../internals/object-define-property":93}],39:[function(l,de,H){de.exports=function(M,E){return{enumerable:!(1&M),configurable:!(2&M),writable:!(4&M),value:E}}},{}],40:[function(l,de,H){"use strict";var M=l("../internals/to-primitive"),E=l("../internals/object-define-property"),v=l("../internals/create-property-descriptor");de.exports=function(S,T,C){(T=M(T))in S?E.f(S,T,v(0,C)):S[T]=C}},{"../internals/create-property-descriptor":39,"../internals/object-define-property":93,"../internals/to-primitive":142}],41:[function(h,de,H){"use strict";function M(){return this}var E=h("../internals/export"),v=h("../internals/create-iterator-constructor"),S=h("../internals/object-get-prototype-of"),T=h("../internals/object-set-prototype-of"),C=h("../internals/set-to-string-tag"),f=h("../internals/create-non-enumerable-property"),g=h("../internals/redefine"),d=h("../internals/well-known-symbol"),m=h("../internals/is-pure"),p=h("../internals/iterators"),y=(h=h("../internals/iterators-core")).IteratorPrototype,b=h.BUGGY_SAFARI_ITERATORS,x=d("iterator"),D="values",N="entries";de.exports=function(U,R,L,oe,F,q,k){function Z($){if($===F&&pe)return pe;if(!b&&$ in re)return re[$];switch($){case"keys":case D:case N:return function(){return new L(this,$)}}return function(){return new L(this)}}v(L,R,oe),oe=R+" Iterator";var X,W,ie=!1,re=U.prototype,le=re[x]||re["@@iterator"]||F&&re[F],pe=!b&&le||Z(F),Ae="Array"==R&&re.entries||le;if(Ae&&(Ae=S(Ae.call(new U)),y!==Object.prototype&&Ae.next&&(m||S(Ae)===y||(T?T(Ae,y):"function"!=typeof Ae[x]&&f(Ae,x,M)),C(Ae,oe,!0,!0),m&&(p[oe]=M))),F==D&&le&&le.name!==D&&(ie=!0,pe=function(){return le.call(this)}),m&&!k||re[x]===pe||f(re,x,pe),p[R]=pe,F)if(X={values:Z(D),keys:q?pe:Z("keys"),entries:Z(N)},k)for(W in X)!b&&!ie&&W in re||g(re,W,X[W]);else E({target:R,proto:!0,forced:b||ie},X);return X}},{"../internals/create-iterator-constructor":37,"../internals/create-non-enumerable-property":38,"../internals/export":50,"../internals/is-pure":76,"../internals/iterators":80,"../internals/iterators-core":79,"../internals/object-get-prototype-of":98,"../internals/object-set-prototype-of":102,"../internals/redefine":110,"../internals/set-to-string-tag":119,"../internals/well-known-symbol":150}],42:[function(l,de,H){var M=l("../internals/path"),E=l("../internals/has"),v=l("../internals/well-known-symbol-wrapped"),S=l("../internals/object-define-property").f;de.exports=function(T){var C=M.Symbol||(M.Symbol={});E(C,T)||S(C,T,{value:v.f(T)})}},{"../internals/has":61,"../internals/object-define-property":93,"../internals/path":106,"../internals/well-known-symbol-wrapped":149}],43:[function(l,de,H){l=l("../internals/fails"),de.exports=!l(function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]})},{"../internals/fails":51}],44:[function(E,de,H){var M=E("../internals/global"),v=(E=E("../internals/is-object"),M.document),S=E(v)&&E(v.createElement);de.exports=function(T){return S?v.createElement(T):{}}},{"../internals/global":60,"../internals/is-object":75}],45:[function(l,de,H){de.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},{}],46:[function(l,de,H){l=l("../internals/engine-user-agent"),de.exports=/(iphone|ipod|ipad).*applewebkit/i.test(l)},{"../internals/engine-user-agent":47}],47:[function(l,de,H){l=l("../internals/get-built-in"),de.exports=l("navigator","userAgent")||""},{"../internals/get-built-in":57}],48:[function(v,de,H){var M,E,S=v("../internals/global");v=v("../internals/engine-user-agent"),(S=(S=(S=S.process)&&S.versions)&&S.v8)?E=(M=S.split("."))[0]+M[1]:v&&(!(M=v.match(/Edge\/(\d+)/))||74<=M[1])&&(M=v.match(/Chrome\/(\d+)/))&&(E=M[1]),de.exports=E&&+E},{"../internals/engine-user-agent":47,"../internals/global":60}],49:[function(l,de,H){de.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},{}],50:[function(l,de,H){var M=l("../internals/global"),E=l("../internals/object-get-own-property-descriptor").f,v=l("../internals/create-non-enumerable-property"),S=l("../internals/redefine"),T=l("../internals/set-global"),C=l("../internals/copy-constructor-properties"),f=l("../internals/is-forced");de.exports=function(g,d){var m,p,h,y=g.target,b=g.global,x=g.stat,D=b?M:x?M[y]||T(y,{}):(M[y]||{}).prototype;if(D)for(m in d){if(p=d[m],h=g.noTargetGet?(h=E(D,m))&&h.value:D[m],!f(b?m:y+(x?".":"#")+m,g.forced)&&void 0!==h){if(typeof p==typeof h)continue;C(p,h)}(g.sham||h&&h.sham)&&v(p,"sham",!0),S(D,m,p,g)}}},{"../internals/copy-constructor-properties":33,"../internals/create-non-enumerable-property":38,"../internals/global":60,"../internals/is-forced":74,"../internals/object-get-own-property-descriptor":94,"../internals/redefine":110,"../internals/set-global":117}],51:[function(l,de,H){de.exports=function(M){try{return!!M()}catch{return!0}}},{}],52:[function(d,de,H){"use strict";d("../modules/es.regexp.exec");var M=d("../internals/redefine"),E=d("../internals/fails"),v=d("../internals/well-known-symbol"),S=d("../internals/regexp-exec"),T=d("../internals/create-non-enumerable-property"),C=v("species"),f=!E(function(){var h=/./;return h.exec=function(){var y=[];return y.groups={a:"7"},y},"7"!=="".replace(h,"$<a>")}),g="$0"==="a".replace(/./,"$0"),m=!!/./[d=v("replace")]&&""===/./[d]("a","$0"),p=!E(function(){var h=(y=/(?:)/).exec,y=(y.exec=function(){return h.apply(this,arguments)},"ab".split(y));return 2!==y.length||"a"!==y[0]||"b"!==y[1]});de.exports=function(h,y,b,x){var D,N,U=v(h),R=!E(function(){var z={};return z[U]=function(){return 7},7!=""[h](z)}),L=R&&!E(function(){var z=!1,F=/a/;return"split"===h&&((F={constructor:{}}).constructor[C]=function(){return F},F.flags="",F[U]=/./[U]),F.exec=function(){return z=!0,null},F[U](""),!z});R&&L&&("replace"!==h||f&&g&&!m)&&("split"!==h||p)||(D=/./[U],b=(L=b(U,""[h],function(z,F,q,k,Z){return F.exec===S?R&&!Z?{done:!0,value:D.call(F,q,k)}:{done:!0,value:z.call(q,F,k)}:{done:!1}},{REPLACE_KEEPS_$0:g,REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE:m}))[0],N=L[1],M(String.prototype,h,b),M(RegExp.prototype,U,2==y?function(z,F){return N.call(z,this,F)}:function(z){return N.call(z,this)})),x&&T(RegExp.prototype[U],"sham",!0)}},{"../internals/create-non-enumerable-property":38,"../internals/fails":51,"../internals/redefine":110,"../internals/regexp-exec":112,"../internals/well-known-symbol":150,"../modules/es.regexp.exec":195}],53:[function(l,de,H){"use strict";var E=l("../internals/is-array"),v=l("../internals/to-length"),S=l("../internals/function-bind-context");de.exports=function M(T,C,f,g,d,m,p,h){for(var y,b=d,x=0,D=!!p&&S(p,h,3);x<g;){if(x in f){if(y=D?D(f[x],x,C):f[x],0<m&&E(y))b=M(T,C,y,v(y.length),b,m-1)-1;else{if(9007199254740991<=b)throw TypeError("Exceed the acceptable array length");T[b]=y}b++}x++}return b}},{"../internals/function-bind-context":55,"../internals/is-array":73,"../internals/to-length":138}],54:[function(l,de,H){l=l("../internals/fails"),de.exports=!l(function(){return Object.isExtensible(Object.preventExtensions({}))})},{"../internals/fails":51}],55:[function(l,de,H){var M=l("../internals/a-function");de.exports=function(E,v,S){if(M(E),void 0===v)return E;switch(S){case 0:return function(){return E.call(v)};case 1:return function(T){return E.call(v,T)};case 2:return function(T,C){return E.call(v,T,C)};case 3:return function(T,C,f){return E.call(v,T,C,f)}}return function(){return E.apply(v,arguments)}}},{"../internals/a-function":5}],56:[function(l,de,H){"use strict";var M=l("../internals/a-function"),E=l("../internals/is-object"),v=[].slice,S={};de.exports=Function.bind||function(T){var C=M(this),f=v.call(arguments,1),g=function(){var d=f.concat(v.call(arguments));if(this instanceof g){var m=C,p=d.length,h=d;if(!(p in S)){for(var y=[],b=0;b<p;b++)y[b]="a["+b+"]";S[p]=Function("C,a","return new C("+y.join(",")+")")}return S[p](m,h)}return C.apply(T,d)};return E(C.prototype)&&(g.prototype=C.prototype),g}},{"../internals/a-function":5,"../internals/is-object":75}],57:[function(l,de,H){function M(S){return"function"==typeof S?S:void 0}var E=l("../internals/path"),v=l("../internals/global");de.exports=function(S,T){return arguments.length<2?M(E[S])||M(v[S]):E[S]&&E[S][T]||v[S]&&v[S][T]}},{"../internals/global":60,"../internals/path":106}],58:[function(l,de,H){var M=l("../internals/classof"),E=l("../internals/iterators"),v=l("../internals/well-known-symbol")("iterator");de.exports=function(S){if(null!=S)return S[v]||S["@@iterator"]||E[M(S)]}},{"../internals/classof":29,"../internals/iterators":80,"../internals/well-known-symbol":150}],59:[function(l,de,H){var M=l("../internals/an-object"),E=l("../internals/get-iterator-method");de.exports=function(v){var S=E(v);if("function"!=typeof S)throw TypeError(String(v)+" is not iterable");return M(S.call(v))}},{"../internals/an-object":10,"../internals/get-iterator-method":58}],60:[function(l,de,H){(function(M){function E(v){return v&&v.Math==Math&&v}de.exports=E("object"==typeof globalThis&&globalThis)||E("object"==typeof window&&window)||E("object"==typeof self&&self)||E("object"==typeof M&&M)||Function("return this")()}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{}],61:[function(l,de,H){var M={}.hasOwnProperty;de.exports=function(E,v){return M.call(E,v)}},{}],62:[function(l,de,H){de.exports={}},{}],63:[function(l,de,H){var M=l("../internals/global");de.exports=function(E,v){var S=M.console;S&&S.error&&(1===arguments.length?S.error(E):S.error(E,v))}},{"../internals/global":60}],64:[function(l,de,H){l=l("../internals/get-built-in"),de.exports=l("document","documentElement")},{"../internals/get-built-in":57}],65:[function(l,de,H){var M=l("../internals/descriptors"),E=l("../internals/fails"),v=l("../internals/document-create-element");de.exports=!M&&!E(function(){return 7!=Object.defineProperty(v("div"),"a",{get:function(){return 7}}).a})},{"../internals/descriptors":43,"../internals/document-create-element":44,"../internals/fails":51}],66:[function(l,de,H){var M=Math.abs,E=Math.pow,v=Math.floor,S=Math.log,T=Math.LN2;de.exports={pack:function(C,f,b){var d,m,p,h=new Array(b),y=8*b-f-1,x=(b=(1<<y)-1)>>1,D=23===f?E(2,-24)-E(2,-77):0,N=C<0||0===C&&1/C<0?1:0,U=0;for((C=M(C))!=C||C===1/0?(m=C!=C?1:0,d=b):(d=v(S(C)/T),C*(p=E(2,-d))<1&&(d--,p*=2),2<=(C+=1<=d+x?D/p:D*E(2,1-x))*p&&(d++,p/=2),b<=d+x?(m=0,d=b):1<=d+x?(m=(C*p-1)*E(2,f),d+=x):(m=C*E(2,x-1)*E(2,f),d=0));8<=f;h[U++]=255&m,m/=256,f-=8);for(d=d<<f|m,y+=f;0<y;h[U++]=255&d,d/=256,y-=8);return h[--U]|=128*N,h},unpack:function(C,f){var g,b,d=C.length,m=(1<<(b=8*d-f-1))-1,p=m>>1,h=b-7,y=d-1,x=127&(b=C[y--]);for(b>>=7;0<h;x=256*x+C[y],y--,h-=8);for(g=x&(1<<-h)-1,x>>=-h,h+=f;0<h;g=256*g+C[y],y--,h-=8);if(0===x)x=1-p;else{if(x===m)return g?NaN:b?-1/0:1/0;g+=E(2,f),x-=p}return(b?-1:1)*g*E(2,x-f)}}},{}],67:[function(l,de,H){var M=l("../internals/fails"),E=l("../internals/classof-raw"),v="".split;de.exports=M(function(){return!Object("z").propertyIsEnumerable(0)})?function(S){return"String"==E(S)?v.call(S,""):Object(S)}:Object},{"../internals/classof-raw":28,"../internals/fails":51}],68:[function(l,de,H){var M=l("../internals/is-object"),E=l("../internals/object-set-prototype-of");de.exports=function(v,S,T){return E&&"function"==typeof(S=S.constructor)&&S!==T&&M(S=S.prototype)&&S!==T.prototype&&E(v,S),v}},{"../internals/is-object":75,"../internals/object-set-prototype-of":102}],69:[function(M,de,H){M=M("../internals/shared-store");var E=Function.toString;"function"!=typeof M.inspectSource&&(M.inspectSource=function(v){return E.call(v)}),de.exports=M.inspectSource},{"../internals/shared-store":121}],70:[function(l,de,H){function M(h){T(h,g,{value:{objectID:"O"+ ++d,weakData:{}}})}var E=l("../internals/hidden-keys"),v=l("../internals/is-object"),S=l("../internals/has"),T=l("../internals/object-define-property").f,C=l("../internals/uid"),f=l("../internals/freezing"),g=C("meta"),d=0,m=Object.isExtensible||function(){return!0},p=de.exports={REQUIRED:!1,fastKey:function(h,y){if(!v(h))return"symbol"==typeof h?h:("string"==typeof h?"S":"P")+h;if(!S(h,g)){if(!m(h))return"F";if(!y)return"E";M(h)}return h[g].objectID},getWeakData:function(h,y){if(!S(h,g)){if(!m(h))return!0;if(!y)return!1;M(h)}return h[g].weakData},onFreeze:function(h){return f&&p.REQUIRED&&m(h)&&!S(h,g)&&M(h),h}};E[g]=!0},{"../internals/freezing":54,"../internals/has":61,"../internals/hidden-keys":62,"../internals/is-object":75,"../internals/object-define-property":93,"../internals/uid":147}],71:[function(b,de,H){var M,E,v,S,T,C,f,g,d=b("../internals/native-weak-map"),x=b("../internals/global"),m=b("../internals/is-object"),p=b("../internals/create-non-enumerable-property"),h=b("../internals/has"),y=b("../internals/shared-key");b=b("../internals/hidden-keys"),x=x.WeakMap,f=d?(M=new x,E=M.get,v=M.has,S=M.set,T=function(D,N){return S.call(M,D,N),N},C=function(D){return E.call(M,D)||{}},function(D){return v.call(M,D)}):(b[g=y("state")]=!0,T=function(D,N){return p(D,g,N),N},C=function(D){return h(D,g)?D[g]:{}},function(D){return h(D,g)}),de.exports={set:T,get:C,has:f,enforce:function(D){return f(D)?C(D):T(D,{})},getterFor:function(D){return function(N){if(m(N)&&(N=C(N)).type===D)return N;throw TypeError("Incompatible receiver, "+D+" required")}}}},{"../internals/create-non-enumerable-property":38,"../internals/global":60,"../internals/has":61,"../internals/hidden-keys":62,"../internals/is-object":75,"../internals/native-weak-map":86,"../internals/shared-key":120}],72:[function(l,de,H){var M=l("../internals/well-known-symbol"),E=l("../internals/iterators"),v=M("iterator"),S=Array.prototype;de.exports=function(T){return void 0!==T&&(E.Array===T||S[v]===T)}},{"../internals/iterators":80,"../internals/well-known-symbol":150}],73:[function(l,de,H){var M=l("../internals/classof-raw");de.exports=Array.isArray||function(E){return"Array"==M(E)}},{"../internals/classof-raw":28}],74:[function(l,de,H){function M(g,d){return(g=T[S(g)])==f||g!=C&&("function"==typeof d?E(d):!!d)}var E=l("../internals/fails"),v=/#|\.prototype\./,S=M.normalize=function(g){return String(g).replace(v,".").toLowerCase()},T=M.data={},C=M.NATIVE="N",f=M.POLYFILL="P";de.exports=M},{"../internals/fails":51}],75:[function(l,de,H){de.exports=function(M){return"object"==typeof M?null!==M:"function"==typeof M}},{}],76:[function(l,de,H){de.exports=!1},{}],77:[function(l,de,H){var M=l("../internals/is-object"),E=l("../internals/classof-raw"),v=l("../internals/well-known-symbol")("match");de.exports=function(S){var T;return M(S)&&(void 0!==(T=S[v])?!!T:"RegExp"==E(S))}},{"../internals/classof-raw":28,"../internals/is-object":75,"../internals/well-known-symbol":150}],78:[function(l,de,H){function M(g,d){this.stopped=g,this.result=d}var E=l("../internals/an-object"),v=l("../internals/is-array-iterator-method"),S=l("../internals/to-length"),T=l("../internals/function-bind-context"),C=l("../internals/get-iterator-method"),f=l("../internals/call-with-safe-iteration-closing");(de.exports=function(g,d,m,p,h){var y,b,x,D,N,U,R=T(d,m,p?2:1);if(h)y=g;else{if("function"!=typeof(d=C(g)))throw TypeError("Target is not iterable");if(v(d)){for(b=0,x=S(g.length);b<x;b++)if((D=p?R(E(U=g[b])[0],U[1]):R(g[b]))&&D instanceof M)return D;return new M(!1)}y=d.call(g)}for(N=y.next;!(U=N.call(y)).done;)if("object"==typeof(D=f(y,R,U.value,p))&&D&&D instanceof M)return D;return new M(!1)}).stop=function(g){return new M(!0,g)}},{"../internals/an-object":10,"../internals/call-with-safe-iteration-closing":26,"../internals/function-bind-context":55,"../internals/get-iterator-method":58,"../internals/is-array-iterator-method":72,"../internals/to-length":138}],79:[function(C,de,H){"use strict";var M,E,v=C("../internals/object-get-prototype-of"),S=C("../internals/create-non-enumerable-property"),T=C("../internals/has"),f=C("../internals/well-known-symbol"),g=(C=C("../internals/is-pure"),f=f("iterator"),!1);[].keys&&("next"in(E=[].keys())?(v=v(v(E)))!==Object.prototype&&(M=v):g=!0),null==M&&(M={}),C||T(M,f)||S(M,f,function(){return this}),de.exports={IteratorPrototype:M,BUGGY_SAFARI_ITERATORS:g}},{"../internals/create-non-enumerable-property":38,"../internals/has":61,"../internals/is-pure":76,"../internals/object-get-prototype-of":98,"../internals/well-known-symbol":150}],80:[function(l,de,H){de.exports={}},{}],81:[function(l,de,H){de.exports=Math.sign||function(M){return 0==(M=+M)||M!=M?M:M<0?-1:1}},{}],82:[function(p,de,H){var M,E,v,S,T,C,f,g,d=p("../internals/global"),N=p("../internals/object-get-own-property-descriptor").f,D=p("../internals/classof-raw"),m=p("../internals/task").set,h=(p=p("../internals/engine-is-ios"),d.MutationObserver||d.WebKitMutationObserver),y=d.process,b=d.Promise,x="process"==D(y);D=N(d,"queueMicrotask"),(N=D&&D.value)||(M=function(){var U,R;for(x&&(U=y.domain)&&U.exit();E;){R=E.fn,E=E.next;try{R()}catch(L){throw E?S():v=void 0,L}}v=void 0,U&&U.enter()},S=x?function(){y.nextTick(M)}:h&&!p?(T=!0,C=document.createTextNode(""),new h(M).observe(C,{characterData:!0}),function(){C.data=T=!T}):b&&b.resolve?(f=b.resolve(void 0),g=f.then,function(){g.call(f,M)}):function(){m.call(d,M)}),de.exports=N||function(U){U={fn:U,next:void 0},v&&(v.next=U),E||(E=U,S()),v=U}},{"../internals/classof-raw":28,"../internals/engine-is-ios":46,"../internals/global":60,"../internals/object-get-own-property-descriptor":94,"../internals/task":132}],83:[function(l,de,H){l=l("../internals/global"),de.exports=l.Promise},{"../internals/global":60}],84:[function(l,de,H){l=l("../internals/fails"),de.exports=!!Object.getOwnPropertySymbols&&!l(function(){return!String(Symbol())})},{"../internals/fails":51}],85:[function(l,de,H){var M=l("../internals/fails"),E=l("../internals/well-known-symbol"),v=l("../internals/is-pure"),S=E("iterator");de.exports=!M(function(){var T=new URL("b?a=1&b=2&c=3","http://a"),C=T.searchParams,f="";return T.pathname="c%20d",C.forEach(function(g,d){C.delete("b"),f+=d+g}),v&&!T.toJSON||!C.sort||"http://a/c%20d?a=1&c=3"!==T.href||"3"!==C.get("c")||"a=1"!==String(new URLSearchParams("?a=1"))||!C[S]||"a"!==new URL("https://a@b").username||"b"!==new URLSearchParams(new URLSearchParams("a=b")).get("a")||"xn--e1aybc"!==new URL("http://\u0442\u0435\u0441\u0442").host||"#%D0%B1"!==new URL("http://a#\u0431").hash||"a1c3"!==f||"x"!==new URL("http://x",void 0).host})},{"../internals/fails":51,"../internals/is-pure":76,"../internals/well-known-symbol":150}],86:[function(M,de,H){var E=M("../internals/global");M=M("../internals/inspect-source"),de.exports="function"==typeof(E=E.WeakMap)&&/native code/.test(M(E))},{"../internals/global":60,"../internals/inspect-source":69}],87:[function(l,de,H){"use strict";function M(v){var S,T;this.promise=new v(function(C,f){if(void 0!==S||void 0!==T)throw TypeError("Bad Promise constructor");S=C,T=f}),this.resolve=E(S),this.reject=E(T)}var E=l("../internals/a-function");de.exports.f=function(v){return new M(v)}},{"../internals/a-function":5}],88:[function(l,de,H){var M=l("../internals/is-regexp");de.exports=function(E){if(M(E))throw TypeError("The method doesn't accept regular expressions");return E}},{"../internals/is-regexp":77}],89:[function(l,de,H){var M=l("../internals/global").isFinite;de.exports=Number.isFinite||function(E){return"number"==typeof E&&M(E)}},{"../internals/global":60}],90:[function(l,de,H){"use strict";var M=l("../internals/descriptors"),E=l("../internals/fails"),v=l("../internals/object-keys"),S=l("../internals/object-get-own-property-symbols"),T=l("../internals/object-property-is-enumerable"),C=l("../internals/to-object"),f=l("../internals/indexed-object"),g=Object.assign,d=Object.defineProperty;de.exports=!g||E(function(){var m,p,h,y;return!(!M||1===g({b:1},g(d({},"a",{enumerable:!0,get:function(){d(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)||(p={},y="abcdefghijklmnopqrst",(m={})[h=Symbol()]=7,y.split("").forEach(function(b){p[b]=b}),7!=g({},m)[h]||v(g({},p)).join("")!=y)})?function(m,p){for(var h=C(m),y=arguments.length,b=1,x=S.f,D=T.f;b<y;)for(var N,U=f(arguments[b++]),R=x?v(U).concat(x(U)):v(U),L=R.length,z=0;z<L;)N=R[z++],M&&!D.call(U,N)||(h[N]=U[N]);return h}:g},{"../internals/descriptors":43,"../internals/fails":51,"../internals/indexed-object":67,"../internals/object-get-own-property-symbols":97,"../internals/object-keys":100,"../internals/object-property-is-enumerable":101,"../internals/to-object":139}],91:[function(d,de,H){function M(){}var E,v=d("../internals/an-object"),S=d("../internals/object-define-properties"),T=d("../internals/enum-bug-keys"),C=d("../internals/hidden-keys"),f=d("../internals/html"),g=d("../internals/document-create-element"),m=(d=d("../internals/shared-key"),"prototype"),p="script",h=d("IE_PROTO"),y=function(x){return"<"+p+">"+x+"</"+p+">"},b=function(){try{E=document.domain&&new ActiveXObject("htmlfile")}catch{}b=E?((x=E).write(y("")),x.close(),D=x.parentWindow.Object,x=null,D):(x=g("iframe"),D="java"+p+":",x.style.display="none",f.appendChild(x),x.src=String(D),(D=x.contentWindow.document).open(),D.write(y("document.F=Object")),D.close(),D.F);for(var x,D,N=T.length;N--;)delete b[m][T[N]];return b()};C[h]=!0,de.exports=Object.create||function(x,D){var N;return null!==x?(M[m]=v(x),N=new M,M[m]=null,N[h]=x):N=b(),void 0===D?N:S(N,D)}},{"../internals/an-object":10,"../internals/document-create-element":44,"../internals/enum-bug-keys":49,"../internals/hidden-keys":62,"../internals/html":64,"../internals/object-define-properties":92,"../internals/shared-key":120}],92:[function(l,de,H){var M=l("../internals/descriptors"),E=l("../internals/object-define-property"),v=l("../internals/an-object"),S=l("../internals/object-keys");de.exports=M?Object.defineProperties:function(T,C){v(T);for(var f,g=S(C),d=g.length,m=0;m<d;)E.f(T,f=g[m++],C[f]);return T}},{"../internals/an-object":10,"../internals/descriptors":43,"../internals/object-define-property":93,"../internals/object-keys":100}],93:[function(l,de,H){var M=l("../internals/descriptors"),E=l("../internals/ie8-dom-define"),v=l("../internals/an-object"),S=l("../internals/to-primitive"),T=Object.defineProperty;H.f=M?T:function(C,f,g){if(v(C),f=S(f,!0),v(g),E)try{return T(C,f,g)}catch{}if("get"in g||"set"in g)throw TypeError("Accessors not supported");return"value"in g&&(C[f]=g.value),C}},{"../internals/an-object":10,"../internals/descriptors":43,"../internals/ie8-dom-define":65,"../internals/to-primitive":142}],94:[function(l,de,H){var M=l("../internals/descriptors"),E=l("../internals/object-property-is-enumerable"),v=l("../internals/create-property-descriptor"),S=l("../internals/to-indexed-object"),T=l("../internals/to-primitive"),C=l("../internals/has"),f=l("../internals/ie8-dom-define"),g=Object.getOwnPropertyDescriptor;H.f=M?g:function(d,m){if(d=S(d),m=T(m,!0),f)try{return g(d,m)}catch{}if(C(d,m))return v(!E.f.call(d,m),d[m])}},{"../internals/create-property-descriptor":39,"../internals/descriptors":43,"../internals/has":61,"../internals/ie8-dom-define":65,"../internals/object-property-is-enumerable":101,"../internals/to-indexed-object":136,"../internals/to-primitive":142}],95:[function(l,de,H){var M=l("../internals/to-indexed-object"),E=l("../internals/object-get-own-property-names").f,v={}.toString,S="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];de.exports.f=function(T){if(!S||"[object Window]"!=v.call(T))return E(M(T));try{return E(T)}catch{return S.slice()}}},{"../internals/object-get-own-property-names":96,"../internals/to-indexed-object":136}],96:[function(l,de,H){var M=l("../internals/object-keys-internal"),E=l("../internals/enum-bug-keys").concat("length","prototype");H.f=Object.getOwnPropertyNames||function(v){return M(v,E)}},{"../internals/enum-bug-keys":49,"../internals/object-keys-internal":99}],97:[function(l,de,H){H.f=Object.getOwnPropertySymbols},{}],98:[function(S,de,H){var M=S("../internals/has"),E=S("../internals/to-object"),v=S("../internals/shared-key"),T=(S=S("../internals/correct-prototype-getter"),v("IE_PROTO")),C=Object.prototype;de.exports=S?Object.getPrototypeOf:function(f){return f=E(f),M(f,T)?f[T]:"function"==typeof f.constructor&&f instanceof f.constructor?f.constructor.prototype:f instanceof Object?C:null}},{"../internals/correct-prototype-getter":35,"../internals/has":61,"../internals/shared-key":120,"../internals/to-object":139}],99:[function(l,de,H){var M=l("../internals/has"),E=l("../internals/to-indexed-object"),v=l("../internals/array-includes").indexOf,S=l("../internals/hidden-keys");de.exports=function(T,C){var f,g=E(T),d=0,m=[];for(f in g)!M(S,f)&&M(g,f)&&m.push(f);for(;C.length>d;)!M(g,f=C[d++])||~v(m,f)||m.push(f);return m}},{"../internals/array-includes":18,"../internals/has":61,"../internals/hidden-keys":62,"../internals/to-indexed-object":136}],100:[function(l,de,H){var M=l("../internals/object-keys-internal"),E=l("../internals/enum-bug-keys");de.exports=Object.keys||function(v){return M(v,E)}},{"../internals/enum-bug-keys":49,"../internals/object-keys-internal":99}],101:[function(l,de,H){"use strict";var M={}.propertyIsEnumerable,E=Object.getOwnPropertyDescriptor,v=E&&!M.call({1:2},1);H.f=v?function(S){return!!(S=E(this,S))&&S.enumerable}:M},{}],102:[function(l,de,H){var M=l("../internals/an-object"),E=l("../internals/a-possible-prototype");de.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var v,S=!1,T={};try{(v=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(T,[]),S=T instanceof Array}catch{}return function(C,f){return M(C),E(f),S?v.call(C,f):C.__proto__=f,C}}():void 0)},{"../internals/a-possible-prototype":6,"../internals/an-object":10}],103:[function(l,de,H){function M(C){return function(f){for(var g,d=S(f),m=v(d),p=m.length,h=0,y=[];h<p;)g=m[h++],E&&!T.call(d,g)||y.push(C?[g,d[g]]:d[g]);return y}}var E=l("../internals/descriptors"),v=l("../internals/object-keys"),S=l("../internals/to-indexed-object"),T=l("../internals/object-property-is-enumerable").f;de.exports={entries:M(!0),values:M(!1)}},{"../internals/descriptors":43,"../internals/object-keys":100,"../internals/object-property-is-enumerable":101,"../internals/to-indexed-object":136}],104:[function(l,de,H){"use strict";var M=l("../internals/to-string-tag-support"),E=l("../internals/classof");de.exports=M?{}.toString:function(){return"[object "+E(this)+"]"}},{"../internals/classof":29,"../internals/to-string-tag-support":143}],105:[function(l,de,H){var M=l("../internals/get-built-in"),E=l("../internals/object-get-own-property-names"),v=l("../internals/object-get-own-property-symbols"),S=l("../internals/an-object");de.exports=M("Reflect","ownKeys")||function(T){var C=E.f(S(T)),f=v.f;return f?C.concat(f(T)):C}},{"../internals/an-object":10,"../internals/get-built-in":57,"../internals/object-get-own-property-names":96,"../internals/object-get-own-property-symbols":97}],106:[function(l,de,H){l=l("../internals/global"),de.exports=l},{"../internals/global":60}],107:[function(l,de,H){de.exports=function(M){try{return{error:!1,value:M()}}catch(E){return{error:!0,value:E}}}},{}],108:[function(l,de,H){var M=l("../internals/an-object"),E=l("../internals/is-object"),v=l("../internals/new-promise-capability");de.exports=function(S,T){return M(S),E(T)&&T.constructor===S?T:((0,(S=v.f(S)).resolve)(T),S.promise)}},{"../internals/an-object":10,"../internals/is-object":75,"../internals/new-promise-capability":87}],109:[function(l,de,H){var M=l("../internals/redefine");de.exports=function(E,v,S){for(var T in v)M(E,T,v[T],S);return E}},{"../internals/redefine":110}],110:[function(C,de,H){var M=C("../internals/global"),E=C("../internals/create-non-enumerable-property"),v=C("../internals/has"),S=C("../internals/set-global"),T=C("../internals/inspect-source"),f=(C=C("../internals/internal-state")).get,g=C.enforce,d=String(String).split("String");(de.exports=function(m,p,h,D){var b=!!D&&!!D.unsafe,x=!!D&&!!D.enumerable;D=!!D&&!!D.noTargetGet,"function"==typeof h&&("string"!=typeof p||v(h,"name")||E(h,"name",p),g(h).source=d.join("string"==typeof p?p:"")),m===M?x?m[p]=h:S(p,h):(b?!D&&m[p]&&(x=!0):delete m[p],x?m[p]=h:E(m,p,h))})(Function.prototype,"toString",function(){return"function"==typeof this&&f(this).source||T(this)})},{"../internals/create-non-enumerable-property":38,"../internals/global":60,"../internals/has":61,"../internals/inspect-source":69,"../internals/internal-state":71,"../internals/set-global":117}],111:[function(l,de,H){var M=l("./classof-raw"),E=l("./regexp-exec");de.exports=function(v,S){var T=v.exec;if("function"==typeof T){if("object"!=typeof(T=T.call(v,S)))throw TypeError("RegExp exec method returned something other than an Object or null");return T}if("RegExp"!==M(v))throw TypeError("RegExp#exec called on incompatible receiver");return E.call(v,S)}},{"./classof-raw":28,"./regexp-exec":112}],112:[function(S,de,H){"use strict";var M,E,v=S("./regexp-flags"),T=(S=S("./regexp-sticky-helpers"),RegExp.prototype.exec),C=String.prototype.replace,f=T,g=(E=/b*/g,T.call(M=/a/,"a"),T.call(E,"a"),0!==M.lastIndex||0!==E.lastIndex),d=S.UNSUPPORTED_Y||S.BROKEN_CARET,m=void 0!==/()??/.exec("")[1];de.exports=f=g||m||d?function(p){var h,y,b,x,D=this,N=d&&D.sticky,U=v.call(D),R=D.source,L=0,z=p;return N&&(-1===(U=U.replace("y","")).indexOf("g")&&(U+="g"),z=String(p).slice(D.lastIndex),0<D.lastIndex&&(!D.multiline||D.multiline&&"\n"!==p[D.lastIndex-1])&&(R="(?: "+R+")",z=" "+z,L++),y=new RegExp("^(?:"+R+")",U)),m&&(y=new RegExp("^"+R+"$(?!\\s)",U)),g&&(h=D.lastIndex),b=T.call(N?y:D,z),N?b?(b.input=b.input.slice(L),b[0]=b[0].slice(L),b.index=D.lastIndex,D.lastIndex+=b[0].length):D.lastIndex=0:g&&b&&(D.lastIndex=D.global?b.index+b[0].length:h),m&&b&&1<b.length&&C.call(b[0],y,function(){for(x=1;x<arguments.length-2;x++)void 0===arguments[x]&&(b[x]=void 0)}),b}:f},{"./regexp-flags":113,"./regexp-sticky-helpers":114}],113:[function(l,de,H){"use strict";var M=l("../internals/an-object");de.exports=function(){var E=M(this),v="";return E.global&&(v+="g"),E.ignoreCase&&(v+="i"),E.multiline&&(v+="m"),E.dotAll&&(v+="s"),E.unicode&&(v+="u"),E.sticky&&(v+="y"),v}},{"../internals/an-object":10}],114:[function(l,de,H){"use strict";function M(E,v){return RegExp(E,v)}l=l("./fails"),H.UNSUPPORTED_Y=l(function(){var E=M("a","y");return E.lastIndex=2,null!=E.exec("abcd")}),H.BROKEN_CARET=l(function(){var E=M("^r","gy");return E.lastIndex=2,null!=E.exec("str")})},{"./fails":51}],115:[function(l,de,H){de.exports=function(M){if(null==M)throw TypeError("Can't call method on "+M);return M}},{}],116:[function(l,de,H){de.exports=Object.is||function(M,E){return M===E?0!==M||1/M==1/E:M!=M&&E!=E}},{}],117:[function(l,de,H){var M=l("../internals/global"),E=l("../internals/create-non-enumerable-property");de.exports=function(v,S){try{E(M,v,S)}catch{M[v]=S}return S}},{"../internals/create-non-enumerable-property":38,"../internals/global":60}],118:[function(l,de,H){"use strict";var M=l("../internals/get-built-in"),E=l("../internals/object-define-property"),v=l("../internals/well-known-symbol"),S=l("../internals/descriptors"),T=v("species");de.exports=function(f){f=M(f),S&&f&&!f[T]&&(0,E.f)(f,T,{configurable:!0,get:function(){return this}})}},{"../internals/descriptors":43,"../internals/get-built-in":57,"../internals/object-define-property":93,"../internals/well-known-symbol":150}],119:[function(l,de,H){var M=l("../internals/object-define-property").f,E=l("../internals/has"),v=l("../internals/well-known-symbol")("toStringTag");de.exports=function(S,T,C){S&&!E(S=C?S:S.prototype,v)&&M(S,v,{configurable:!0,value:T})}},{"../internals/has":61,"../internals/object-define-property":93,"../internals/well-known-symbol":150}],120:[function(l,de,H){var M=l("../internals/shared"),E=l("../internals/uid"),v=M("keys");de.exports=function(S){return v[S]||(v[S]=E(S))}},{"../internals/shared":122,"../internals/uid":147}],121:[function(M,de,H){var v=M("../internals/global"),E=(M=M("../internals/set-global"),"__core-js_shared__");v=v[E]||M(E,{}),de.exports=v},{"../internals/global":60,"../internals/set-global":117}],122:[function(l,de,H){var M=l("../internals/is-pure"),E=l("../internals/shared-store");(de.exports=function(v,S){return E[v]||(E[v]=void 0!==S?S:{})})("versions",[]).push({version:"3.6.5",mode:M?"pure":"global",copyright:"\xa9 2020 Denis Pushkarev (zloirock.ru)"})},{"../internals/is-pure":76,"../internals/shared-store":121}],123:[function(l,de,H){var M=l("../internals/an-object"),E=l("../internals/a-function"),v=l("../internals/well-known-symbol")("species");de.exports=function(C,T){return void 0===(C=M(C).constructor)||null==(C=M(C)[v])?T:E(C)}},{"../internals/a-function":5,"../internals/an-object":10,"../internals/well-known-symbol":150}],124:[function(l,de,H){var M=l("../internals/fails");de.exports=function(E){return M(function(){var v=""[E]('"');return v!==v.toLowerCase()||3<v.split('"').length})}},{"../internals/fails":51}],125:[function(l,de,H){function M(S){return function(g,d){g=String(v(g)),d=E(d);var f,m=g.length;return d<0||m<=d?S?"":void 0:(f=g.charCodeAt(d))<55296||56319<f||d+1===m||(m=g.charCodeAt(d+1))<56320||57343<m?S?g.charAt(d):f:S?g.slice(d,d+2):m-56320+(f-55296<<10)+65536}}var E=l("../internals/to-integer"),v=l("../internals/require-object-coercible");de.exports={codeAt:M(!1),charAt:M(!0)}},{"../internals/require-object-coercible":115,"../internals/to-integer":137}],126:[function(l,de,H){l=l("../internals/engine-user-agent"),de.exports=/Version\/10\.\d+(\.\d+)?( Mobile\/\w+)? Safari\//.test(l)},{"../internals/engine-user-agent":47}],127:[function(l,de,H){function M(C){return function(m,y,h){var p=(m=String(S(m))).length;return h=void 0===h?" ":String(h),(y=E(y))<=p||""==h?m:((p=v.call(h,T((y-=p)/h.length))).length>y&&(p=p.slice(0,y)),C?m+p:p+m)}}var E=l("../internals/to-length"),v=l("../internals/string-repeat"),S=l("../internals/require-object-coercible"),T=Math.ceil;de.exports={start:M(!1),end:M(!0)}},{"../internals/require-object-coercible":115,"../internals/string-repeat":129,"../internals/to-length":138}],128:[function(l,de,H){"use strict";function M(b){return b+22+75*(b<26)}function E(b){var x,D=[],N=(b=function(le){for(var pe=[],Ae=0,$=le.length;Ae<$;){var P,K=le.charCodeAt(Ae++);55296<=K&&K<=56319&&Ae<$?56320==(64512&(P=le.charCodeAt(Ae++)))?pe.push(((1023&K)<<10)+(1023&P)+65536):(pe.push(K),Ae--):pe.push(K)}return pe}(b)).length,U=128,R=0,L=72;for(k=0;k<b.length;k++)(x=b[k])<128&&D.push(y(x));var z=D.length,F=z;for(z&&D.push("-");F<N;){for(var q=v,k=0;k<b.length;k++)U<=(x=b[k])&&x<q&&(q=x);var Z=F+1;if(q-U>h((v-R)/Z))throw RangeError(m);for(R+=(q-U)*Z,U=q,k=0;k<b.length;k++){if((x=b[k])<U&&++R>v)throw RangeError(m);if(x==U){for(var X=R,W=S;;W+=S){var oe=W<=L?1:L+T<=W?T:W-L;if(X<oe)break;var ie=X-oe,re=S-oe;D.push(y(M(oe+ie%re))),X=h(ie/re)}D.push(y(M(X))),L=function(le,pe,Ae){var $=0;for(le=Ae?h(le/f):le>>1,le+=h(le/pe);p*T>>1<le;$+=S)le=h(le/p);return h($+(p+1)*le/(le+C))}(R,Z,F==z),R=0,++F}}++R,++U}return D.join("")}var v=2147483647,S=36,T=26,C=38,f=700,g=/[^\0-\u007E]/,d=/[.\u3002\uFF0E\uFF61]/g,m="Overflow: input needs wider integers to process",p=S-1,h=Math.floor,y=String.fromCharCode;de.exports=function(b){for(var x,D=[],N=b.toLowerCase().replace(d,".").split("."),U=0;U<N.length;U++)D.push(g.test(x=N[U])?"xn--"+E(x):x);return D.join(".")}},{}],129:[function(l,de,H){"use strict";var M=l("../internals/to-integer"),E=l("../internals/require-object-coercible");de.exports="".repeat||function(v){var S=String(E(this)),T="",C=M(v);if(C<0||C==1/0)throw RangeError("Wrong number of repetitions");for(;0<C;(C>>>=1)&&(S+=S))1&C&&(T+=S);return T}},{"../internals/require-object-coercible":115,"../internals/to-integer":137}],130:[function(l,de,H){var M=l("../internals/fails"),E=l("../internals/whitespaces");de.exports=function(v){return M(function(){return!!E[v]()||"\u200b\x85\u180e"!="\u200b\x85\u180e"[v]()||E[v].name!==v})}},{"../internals/fails":51,"../internals/whitespaces":151}],131:[function(v,de,H){function M(C){return function(f){return f=String(E(f)),1&C&&(f=f.replace(S,"")),2&C?f.replace(T,""):f}}var E=v("../internals/require-object-coercible"),S=(v="["+v("../internals/whitespaces")+"]",RegExp("^"+v+v+"*")),T=RegExp(v+v+"*$");de.exports={start:M(1),end:M(2),trim:M(3)}},{"../internals/require-object-coercible":115,"../internals/whitespaces":151}],132:[function(p,de,H){function M(F){return function(){z(F)}}function E(F){z(F.data)}function v(F){T.postMessage(F+"",h.protocol+"//"+h.host)}var S,T=p("../internals/global"),C=p("../internals/fails"),f=p("../internals/classof-raw"),g=p("../internals/function-bind-context"),d=p("../internals/html"),m=p("../internals/document-create-element"),h=(p=p("../internals/engine-is-ios"),T.location),y=T.setImmediate,b=T.clearImmediate,x=T.process,D=T.MessageChannel,N=T.Dispatch,U=0,R={},L="onreadystatechange",z=function(F){var q;R.hasOwnProperty(F)&&(q=R[F],delete R[F],q())};y&&b||(y=function(F){for(var q=[],k=1;k<arguments.length;)q.push(arguments[k++]);return R[++U]=function(){("function"==typeof F?F:Function(F)).apply(void 0,q)},S(U),U},b=function(F){delete R[F]},"process"==f(x)?S=function(F){x.nextTick(M(F))}:N&&N.now?S=function(F){N.now(M(F))}:D&&!p?(p=(f=new D).port2,f.port1.onmessage=E,S=g(p.postMessage,p,1)):!T.addEventListener||"function"!=typeof postMessage||T.importScripts||C(v)||"file:"===h.protocol?S=L in m("script")?function(F){d.appendChild(m("script"))[L]=function(){d.removeChild(this),z(F)}}:function(F){setTimeout(M(F),0)}:(S=v,T.addEventListener("message",E,!1))),de.exports={set:y,clear:b}},{"../internals/classof-raw":28,"../internals/document-create-element":44,"../internals/engine-is-ios":46,"../internals/fails":51,"../internals/function-bind-context":55,"../internals/global":60,"../internals/html":64}],133:[function(l,de,H){var M=l("../internals/classof-raw");de.exports=function(E){if("number"!=typeof E&&"Number"!=M(E))throw TypeError("Incorrect invocation");return+E}},{"../internals/classof-raw":28}],134:[function(l,de,H){var M=l("../internals/to-integer"),E=Math.max,v=Math.min;de.exports=function(S,T){return(S=M(S))<0?E(S+T,0):v(S,T)}},{"../internals/to-integer":137}],135:[function(l,de,H){var M=l("../internals/to-integer"),E=l("../internals/to-length");de.exports=function(S){if(void 0===S)return 0;S=M(S);var T=E(S);if(S!==T)throw RangeError("Wrong length or index");return T}},{"../internals/to-integer":137,"../internals/to-length":138}],136:[function(l,de,H){var M=l("../internals/indexed-object"),E=l("../internals/require-object-coercible");de.exports=function(v){return M(E(v))}},{"../internals/indexed-object":67,"../internals/require-object-coercible":115}],137:[function(l,de,H){var M=Math.ceil,E=Math.floor;de.exports=function(v){return isNaN(v=+v)?0:(0<v?E:M)(v)}},{}],138:[function(l,de,H){var M=l("../internals/to-integer"),E=Math.min;de.exports=function(v){return 0<v?E(M(v),9007199254740991):0}},{"../internals/to-integer":137}],139:[function(l,de,H){var M=l("../internals/require-object-coercible");de.exports=function(E){return Object(M(E))}},{"../internals/require-object-coercible":115}],140:[function(l,de,H){var M=l("../internals/to-positive-integer");de.exports=function(E,v){if((E=M(E))%v)throw RangeError("Wrong offset");return E}},{"../internals/to-positive-integer":141}],141:[function(l,de,H){var M=l("../internals/to-integer");de.exports=function(E){if((E=M(E))<0)throw RangeError("The argument can't be less than 0");return E}},{"../internals/to-integer":137}],142:[function(l,de,H){var M=l("../internals/is-object");de.exports=function(E,v){if(!M(E))return E;var S,T;if(v&&"function"==typeof(S=E.toString)&&!M(T=S.call(E))||"function"==typeof(S=E.valueOf)&&!M(T=S.call(E))||!v&&"function"==typeof(S=E.toString)&&!M(T=S.call(E)))return T;throw TypeError("Can't convert object to primitive value")}},{"../internals/is-object":75}],143:[function(l,de,H){var M={};M[l("../internals/well-known-symbol")("toStringTag")]="z",de.exports="[object z]"===String(M)},{"../internals/well-known-symbol":150}],144:[function(l,de,H){"use strict";function M(ze,qe){for(var et=0,_t=qe.length,ot=new(be(ze))(_t);et<_t;)ot[et]=qe[et++];return ot}function E(ze,qe){P(ze,qe,{get:function(){return Ae(this)[qe]}})}function v(ze){return ze instanceof ve||"ArrayBuffer"==(ze=z(ze))||"SharedArrayBuffer"==ze}function S(ze,qe){return Oe(ze)&&"symbol"!=typeof qe&&qe in ze&&String(+qe)==String(qe)}function T(ze,qe){return S(ze,qe=R(qe,!0))?b(2,ze[qe]):K(ze,qe)}function C(ze,qe,et){return!(S(ze,qe=R(qe,!0))&&F(et)&&L(et,"value"))||L(et,"get")||L(et,"set")||et.configurable||L(et,"writable")&&!et.writable||L(et,"enumerable")&&!et.enumerable?P(ze,qe,et):(ze[qe]=et.value,ze)}var f=l("../internals/export"),g=l("../internals/global"),d=l("../internals/descriptors"),m=l("../internals/typed-array-constructors-require-wrappers"),p=l("../internals/array-buffer-view-core"),h=l("../internals/array-buffer"),y=l("../internals/an-instance"),b=l("../internals/create-property-descriptor"),x=l("../internals/create-non-enumerable-property"),D=l("../internals/to-length"),N=l("../internals/to-index"),U=l("../internals/to-offset"),R=l("../internals/to-primitive"),L=l("../internals/has"),z=l("../internals/classof"),F=l("../internals/is-object"),q=l("../internals/object-create"),k=l("../internals/object-set-prototype-of"),Z=l("../internals/object-get-own-property-names").f,X=l("../internals/typed-array-from"),W=l("../internals/array-iteration").forEach,oe=l("../internals/set-species"),ie=l("../internals/object-define-property"),re=l("../internals/object-get-own-property-descriptor"),le=l("../internals/internal-state"),pe=l("../internals/inherit-if-required"),Ae=le.get,$=le.set,P=ie.f,K=re.f,te=Math.round,fe=g.RangeError,ve=h.ArrayBuffer,Te=h.DataView,Ie=p.NATIVE_ARRAY_BUFFER_VIEWS,we=p.TYPED_ARRAY_TAG,Pe=p.TypedArray,je=p.TypedArrayPrototype,be=p.aTypedArrayConstructor,Oe=p.isTypedArray,Ge="BYTES_PER_ELEMENT",Ke="Wrong length";d?(Ie||(re.f=T,ie.f=C,E(je,"buffer"),E(je,"byteOffset"),E(je,"byteLength"),E(je,"length")),f({target:"Object",stat:!0,forced:!Ie},{getOwnPropertyDescriptor:T,defineProperty:C}),de.exports=function(Ye,qe,et){function _t(rt,ge){P(rt,ge,{get:function(){var xe=this,he=ge;return(xe=Ae(xe)).view[$t](he*ot+xe.byteOffset,!0)},set:function(xe){var he=this,Se=ge;he=Ae(he),et&&(xe=(xe=te(xe))<0?0:255<xe?255:255&xe),he.view[Xt](Se*ot+he.byteOffset,xe,!0)},enumerable:!0})}var ot=Ye.match(/\d+$/)[0]/8,Kt=Ye+(et?"Clamped":"")+"Array",$t="get"+Ye,Xt="set"+Ye,ln=g[Kt],Wt=ln,vt=(Ye=Wt&&Wt.prototype,{});Ie?m&&(Wt=qe(function(rt,ge,xe,he){return y(rt,Wt,Kt),pe(F(ge)?v(ge)?void 0!==he?new ln(ge,U(xe,ot),he):void 0!==xe?new ln(ge,U(xe,ot)):new ln(ge):Oe(ge)?M(Wt,ge):X.call(Wt,ge):new ln(N(ge)),rt,Wt)}),k&&k(Wt,Pe),W(Z(ln),function(rt){rt in Wt||x(Wt,rt,ln[rt])}),Wt.prototype=Ye):(Wt=qe(function(rt,ge,xe,he){y(rt,Wt,Kt);var Se,He,Je=0,ut=0;if(F(ge)){if(!v(ge))return Oe(ge)?M(Wt,ge):X.call(Wt,ge);var Ot=ge;if(ut=U(xe,ot),xe=ge.byteLength,void 0===he){if(xe%ot||(Se=xe-ut)<0)throw fe(Ke)}else if(xe<(Se=D(he)*ot)+ut)throw fe(Ke);He=Se/ot}else He=N(ge),Ot=new ve(Se=He*ot);for($(rt,{buffer:Ot,byteOffset:ut,byteLength:Se,length:He,view:new Te(Ot)});Je<He;)_t(rt,Je++)}),k&&k(Wt,Pe),Ye=Wt.prototype=q(je)),Ye.constructor!==Wt&&x(Ye,"constructor",Wt),we&&x(Ye,we,Kt),vt[Kt]=Wt,f({global:!0,forced:Wt!=ln,sham:!Ie},vt),Ge in Wt||x(Wt,Ge,ot),Ge in Ye||x(Ye,Ge,ot),oe(Kt)}):de.exports=function(){}},{"../internals/an-instance":9,"../internals/array-buffer":13,"../internals/array-buffer-view-core":12,"../internals/array-iteration":19,"../internals/classof":29,"../internals/create-non-enumerable-property":38,"../internals/create-property-descriptor":39,"../internals/descriptors":43,"../internals/export":50,"../internals/global":60,"../internals/has":61,"../internals/inherit-if-required":68,"../internals/internal-state":71,"../internals/is-object":75,"../internals/object-create":91,"../internals/object-define-property":93,"../internals/object-get-own-property-descriptor":94,"../internals/object-get-own-property-names":96,"../internals/object-set-prototype-of":102,"../internals/set-species":118,"../internals/to-index":135,"../internals/to-length":138,"../internals/to-offset":140,"../internals/to-primitive":142,"../internals/typed-array-constructors-require-wrappers":145,"../internals/typed-array-from":146}],145:[function(S,de,H){var M=S("../internals/global"),E=S("../internals/fails"),v=S("../internals/check-correctness-of-iteration"),T=(S=S("../internals/array-buffer-view-core").NATIVE_ARRAY_BUFFER_VIEWS,M.ArrayBuffer),C=M.Int8Array;de.exports=!S||!E(function(){C(1)})||!E(function(){new C(-1)})||!v(function(f){new C,new C(null),new C(1.5),new C(f)},!0)||E(function(){return 1!==new C(new T(2),1,void 0).length})},{"../internals/array-buffer-view-core":12,"../internals/check-correctness-of-iteration":27,"../internals/fails":51,"../internals/global":60}],146:[function(l,de,H){var M=l("../internals/to-object"),E=l("../internals/to-length"),v=l("../internals/get-iterator-method"),S=l("../internals/is-array-iterator-method"),T=l("../internals/function-bind-context"),C=l("../internals/array-buffer-view-core").aTypedArrayConstructor;de.exports=function(f){var g,d,m,p,h,y,b=M(f),x=arguments.length,D=1<x?arguments[1]:void 0,N=void 0!==D,U=v(b);if(null!=U&&!S(U))for(y=(h=U.call(b)).next,b=[];!(p=y.call(h)).done;)b.push(p.value);for(N&&2<x&&(D=T(D,arguments[2],2)),d=E(b.length),m=new(C(this))(d),g=0;g<d;g++)m[g]=N?D(b[g],g):b[g];return m}},{"../internals/array-buffer-view-core":12,"../internals/function-bind-context":55,"../internals/get-iterator-method":58,"../internals/is-array-iterator-method":72,"../internals/to-length":138,"../internals/to-object":139}],147:[function(l,de,H){var M=0,E=Math.random();de.exports=function(v){return"Symbol("+String(void 0===v?"":v)+")_"+(++M+E).toString(36)}},{}],148:[function(l,de,H){l=l("../internals/native-symbol"),de.exports=l&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},{"../internals/native-symbol":84}],149:[function(l,de,H){l=l("../internals/well-known-symbol"),H.f=l},{"../internals/well-known-symbol":150}],150:[function(C,de,H){var M=C("../internals/global"),E=C("../internals/shared"),v=C("../internals/has"),S=C("../internals/uid"),T=C("../internals/native-symbol"),f=(C=C("../internals/use-symbol-as-uid"),E("wks")),g=M.Symbol,d=C?g:g&&g.withoutSetter||S;de.exports=function(m){return v(f,m)||(f[m]=T&&v(g,m)?g[m]:d("Symbol."+m)),f[m]}},{"../internals/global":60,"../internals/has":61,"../internals/native-symbol":84,"../internals/shared":122,"../internals/uid":147,"../internals/use-symbol-as-uid":148}],151:[function(l,de,H){de.exports="\t\n\v\f\r \xa0\u1680\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029\ufeff"},{}],152:[function(v,de,H){"use strict";var M=v("../internals/export"),E=v("../internals/global"),T=v("../internals/array-buffer"),S=(v=v("../internals/set-species"),"ArrayBuffer");M({global:!0,forced:E[S]!==(T=T[S])},{ArrayBuffer:T}),v(S)},{"../internals/array-buffer":13,"../internals/export":50,"../internals/global":60,"../internals/set-species":118}],153:[function(b,de,H){"use strict";var M=b("../internals/export"),E=b("../internals/fails"),v=b("../internals/is-array"),S=b("../internals/is-object"),T=b("../internals/to-object"),C=b("../internals/to-length"),f=b("../internals/create-property"),g=b("../internals/array-species-create"),d=b("../internals/array-method-has-species-support"),y=b("../internals/well-known-symbol"),m=(b=b("../internals/engine-v8-version"),y("isConcatSpreadable")),p=9007199254740991,h="Maximum allowed index exceeded";y=51<=b||!E(function(){var x=[];return x[m]=!1,x.concat()[0]!==x}),b=d("concat"),M({target:"Array",proto:!0,forced:!y||!b},{concat:function(x){for(var D,N,U,R,L,z=T(this),F=g(z,0),q=0,k=-1,Z=arguments.length;k<Z;k++)if(L=void 0,S(R=U=-1===k?z:arguments[k])&&(void 0!==(L=R[m])?L:v(R))){if(N=C(U.length),p<q+N)throw TypeError(h);for(D=0;D<N;D++,q++)D in U&&f(F,q,U[D])}else{if(p<=q)throw TypeError(h);f(F,q++,U)}return F.length=q,F}})},{"../internals/array-method-has-species-support":21,"../internals/array-species-create":25,"../internals/create-property":40,"../internals/engine-v8-version":48,"../internals/export":50,"../internals/fails":51,"../internals/is-array":73,"../internals/is-object":75,"../internals/to-length":138,"../internals/to-object":139,"../internals/well-known-symbol":150}],154:[function(v,de,H){var M=v("../internals/export"),E=v("../internals/array-copy-within");v=v("../internals/add-to-unscopables"),M({target:"Array",proto:!0},{copyWithin:E}),v("copyWithin")},{"../internals/add-to-unscopables":7,"../internals/array-copy-within":14,"../internals/export":50}],155:[function(S,de,H){"use strict";var M=S("../internals/export"),E=S("../internals/array-iteration").every,v=S("../internals/array-method-is-strict");S=S("../internals/array-method-uses-to-length"),v=v("every"),S=S("every"),M({target:"Array",proto:!0,forced:!v||!S},{every:function(T){return E(this,T,1<arguments.length?arguments[1]:void 0)}})},{"../internals/array-iteration":19,"../internals/array-method-is-strict":22,"../internals/array-method-uses-to-length":23,"../internals/export":50}],156:[function(v,de,H){var M=v("../internals/export"),E=v("../internals/array-fill");v=v("../internals/add-to-unscopables"),M({target:"Array",proto:!0},{fill:E}),v("fill")},{"../internals/add-to-unscopables":7,"../internals/array-fill":15,"../internals/export":50}],157:[function(S,de,H){"use strict";var M=S("../internals/export"),E=S("../internals/array-iteration").filter,v=S("../internals/array-method-has-species-support");S=S("../internals/array-method-uses-to-length"),v=v("filter"),S=S("filter"),M({target:"Array",proto:!0,forced:!v||!S},{filter:function(T){return E(this,T,1<arguments.length?arguments[1]:void 0)}})},{"../internals/array-iteration":19,"../internals/array-method-has-species-support":21,"../internals/array-method-uses-to-length":23,"../internals/export":50}],158:[function(C,de,H){"use strict";var M=C("../internals/export"),E=C("../internals/array-iteration").findIndex,v=C("../internals/add-to-unscopables"),S=(C=C("../internals/array-method-uses-to-length"),"findIndex"),T=!0;C=C(S),S in[]&&Array(1)[S](function(){T=!1}),M({target:"Array",proto:!0,forced:T||!C},{findIndex:function(f){return E(this,f,1<arguments.length?arguments[1]:void 0)}}),v(S)},{"../internals/add-to-unscopables":7,"../internals/array-iteration":19,"../internals/array-method-uses-to-length":23,"../internals/export":50}],159:[function(l,de,H){"use strict";var M=l("../internals/export"),E=l("../internals/flatten-into-array"),v=l("../internals/to-object"),S=l("../internals/to-length"),T=l("../internals/a-function"),C=l("../internals/array-species-create");M({target:"Array",proto:!0},{flatMap:function(f){var g,d=v(this),m=S(d.length);return T(f),(g=C(d,0)).length=E(g,d,d,m,0,1,f,1<arguments.length?arguments[1]:void 0),g}})},{"../internals/a-function":5,"../internals/array-species-create":25,"../internals/export":50,"../internals/flatten-into-array":53,"../internals/to-length":138,"../internals/to-object":139}],160:[function(l,de,H){"use strict";var M=l("../internals/export"),E=l("../internals/flatten-into-array"),v=l("../internals/to-object"),S=l("../internals/to-length"),T=l("../internals/to-integer"),C=l("../internals/array-species-create");M({target:"Array",proto:!0},{flat:function(){var f=arguments.length?arguments[0]:void 0,g=v(this),d=S(g.length),m=C(g,0);return m.length=E(m,g,g,d,0,void 0===f?1:T(f)),m}})},{"../internals/array-species-create":25,"../internals/export":50,"../internals/flatten-into-array":53,"../internals/to-integer":137,"../internals/to-length":138,"../internals/to-object":139}],161:[function(E,de,H){"use strict";var M=E("../internals/export");E=E("../internals/array-for-each"),M({target:"Array",proto:!0,forced:[].forEach!=E},{forEach:E})},{"../internals/array-for-each":16,"../internals/export":50}],162:[function(l,de,H){var M=l("../internals/export"),E=l("../internals/array-from");M({target:"Array",stat:!0,forced:!l("../internals/check-correctness-of-iteration")(function(v){Array.from(v)})},{from:E})},{"../internals/array-from":17,"../internals/check-correctness-of-iteration":27,"../internals/export":50}],163:[function(l,de,H){"use strict";var M=l("../internals/export"),E=l("../internals/array-includes").includes,v=l("../internals/add-to-unscopables");M({target:"Array",proto:!0,forced:!l("../internals/array-method-uses-to-length")("indexOf",{ACCESSORS:!0,1:0})},{includes:function(S){return E(this,S,1<arguments.length?arguments[1]:void 0)}}),v("includes")},{"../internals/add-to-unscopables":7,"../internals/array-includes":18,"../internals/array-method-uses-to-length":23,"../internals/export":50}],164:[function(C,de,H){"use strict";var M=C("../internals/export"),E=C("../internals/array-includes").indexOf,T=C("../internals/array-method-is-strict"),v=(C=C("../internals/array-method-uses-to-length"),[].indexOf),S=!!v&&1/[1].indexOf(1,-0)<0;T=T("indexOf"),C=C("indexOf",{ACCESSORS:!0,1:0}),M({target:"Array",proto:!0,forced:S||!T||!C},{indexOf:function(f){return S?v.apply(this,arguments)||0:E(this,f,1<arguments.length?arguments[1]:void 0)}})},{"../internals/array-includes":18,"../internals/array-method-is-strict":22,"../internals/array-method-uses-to-length":23,"../internals/export":50}],165:[function(T,de,H){"use strict";var M=T("../internals/to-indexed-object"),E=T("../internals/add-to-unscopables"),v=T("../internals/iterators"),S=T("../internals/internal-state"),C=(T=T("../internals/define-iterator"),"Array Iterator"),f=S.set,g=S.getterFor(C);de.exports=T(Array,"Array",function(d,m){f(this,{type:C,target:M(d),index:0,kind:m})},function(){var d=g(this),m=d.target,p=d.kind,h=d.index++;return!m||h>=m.length?{value:d.target=void 0,done:!0}:"keys"==p?{value:h,done:!1}:"values"==p?{value:m[h],done:!1}:{value:[h,m[h]],done:!1}},"values"),v.Arguments=v.Array,E("keys"),E("values"),E("entries")},{"../internals/add-to-unscopables":7,"../internals/define-iterator":41,"../internals/internal-state":71,"../internals/iterators":80,"../internals/to-indexed-object":136}],166:[function(T,de,H){"use strict";var M=T("../internals/export"),S=T("../internals/indexed-object"),E=T("../internals/to-indexed-object"),v=(T=T("../internals/array-method-is-strict"),[].join);S=S!=Object,T=T("join",","),M({target:"Array",proto:!0,forced:S||!T},{join:function(C){return v.call(E(this),void 0===C?",":C)}})},{"../internals/array-method-is-strict":22,"../internals/export":50,"../internals/indexed-object":67,"../internals/to-indexed-object":136}],167:[function(E,de,H){E("../internals/export")({target:"Array",proto:!0,forced:(E=E("../internals/array-last-index-of"))!==[].lastIndexOf},{lastIndexOf:E})},{"../internals/array-last-index-of":20,"../internals/export":50}],168:[function(S,de,H){"use strict";var M=S("../internals/export"),E=S("../internals/array-iteration").map,v=S("../internals/array-method-has-species-support");S=S("../internals/array-method-uses-to-length"),v=v("map"),S=S("map"),M({target:"Array",proto:!0,forced:!v||!S},{map:function(T){return E(this,T,1<arguments.length?arguments[1]:void 0)}})},{"../internals/array-iteration":19,"../internals/array-method-has-species-support":21,"../internals/array-method-uses-to-length":23,"../internals/export":50}],169:[function(m,de,H){"use strict";var M=m("../internals/export"),E=m("../internals/is-object"),v=m("../internals/is-array"),S=m("../internals/to-absolute-index"),T=m("../internals/to-length"),C=m("../internals/to-indexed-object"),f=m("../internals/create-property"),g=m("../internals/well-known-symbol"),d=m("../internals/array-method-has-species-support"),p=(m=m("../internals/array-method-uses-to-length"),d=d("slice"),m=m("slice",{ACCESSORS:!0,0:0,1:2}),g("species")),h=[].slice,y=Math.max;M({target:"Array",proto:!0,forced:!d||!m},{slice:function(b,x){var D,N,U,R=C(this),L=T(R.length),z=S(b,L),F=S(void 0===x?L:x,L);if(v(R)&&((D="function"==typeof(D=R.constructor)&&(D===Array||v(D.prototype))||E(D)&&null===(D=D[p])?void 0:D)===Array||void 0===D))return h.call(R,z,F);for(N=new(void 0===D?Array:D)(y(F-z,0)),U=0;z<F;z++,U++)z in R&&f(N,U,R[z]);return N.length=U,N}})},{"../internals/array-method-has-species-support":21,"../internals/array-method-uses-to-length":23,"../internals/create-property":40,"../internals/export":50,"../internals/is-array":73,"../internals/is-object":75,"../internals/to-absolute-index":134,"../internals/to-indexed-object":136,"../internals/to-length":138,"../internals/well-known-symbol":150}],170:[function(S,de,H){"use strict";var M=S("../internals/export"),E=S("../internals/array-iteration").some,v=S("../internals/array-method-is-strict");S=S("../internals/array-method-uses-to-length"),v=v("some"),S=S("some"),M({target:"Array",proto:!0,forced:!v||!S},{some:function(T){return E(this,T,1<arguments.length?arguments[1]:void 0)}})},{"../internals/array-iteration":19,"../internals/array-method-is-strict":22,"../internals/array-method-uses-to-length":23,"../internals/export":50}],171:[function(d,de,H){"use strict";var M=d("../internals/export"),E=d("../internals/to-absolute-index"),v=d("../internals/to-integer"),S=d("../internals/to-length"),T=d("../internals/to-object"),C=d("../internals/array-species-create"),f=d("../internals/create-property"),g=d("../internals/array-method-has-species-support"),m=(d=d("../internals/array-method-uses-to-length"),g=g("splice"),d=d("splice",{ACCESSORS:!0,0:0,1:2}),Math.max),p=Math.min;M({target:"Array",proto:!0,forced:!g||!d},{splice:function(q,y){var b,x,D,N,U,R,L=T(this),z=S(L.length),F=E(q,z);if(0===(q=arguments.length)?b=x=0:x=1===q?(b=0,z-F):(b=q-2,p(m(v(y),0),z-F)),9007199254740991<z+b-x)throw TypeError("Maximum allowed length exceeded");for(D=C(L,x),N=0;N<x;N++)(U=F+N)in L&&f(D,N,L[U]);if(b<(D.length=x)){for(N=F;N<z-x;N++)R=N+b,(U=N+x)in L?L[R]=L[U]:delete L[R];for(N=z;z-x+b<N;N--)delete L[N-1]}else if(x<b)for(N=z-x;F<N;N--)R=N+b-1,(U=N+x-1)in L?L[R]=L[U]:delete L[R];for(N=0;N<b;N++)L[N+F]=arguments[N+2];return L.length=z-x+b,D}})},{"../internals/array-method-has-species-support":21,"../internals/array-method-uses-to-length":23,"../internals/array-species-create":25,"../internals/create-property":40,"../internals/export":50,"../internals/to-absolute-index":134,"../internals/to-integer":137,"../internals/to-length":138,"../internals/to-object":139}],172:[function(l,de,H){l("../internals/add-to-unscopables")("flatMap")},{"../internals/add-to-unscopables":7}],173:[function(l,de,H){l("../internals/add-to-unscopables")("flat")},{"../internals/add-to-unscopables":7}],174:[function(E,de,H){var M=E("../internals/descriptors"),v=(E=E("../internals/object-define-property").f,Function.prototype),S=v.toString,T=/^\s*function ([^ (]*)/;!M||"name"in v||E(v,"name",{configurable:!0,get:function(){try{return S.call(this).match(T)[1]}catch{return""}}})},{"../internals/descriptors":43,"../internals/object-define-property":93}],175:[function(E,de,H){"use strict";var M=E("../internals/collection");E=E("../internals/collection-strong"),de.exports=M("Map",function(v){return function(){return v(this,arguments.length?arguments[0]:void 0)}},E)},{"../internals/collection":32,"../internals/collection-strong":30}],176:[function(M,de,H){M=M("../internals/export");var E=Math.hypot,v=Math.abs,S=Math.sqrt;M({target:"Math",stat:!0,forced:!!E&&E(1/0,NaN)!==1/0},{hypot:function(T,C){for(var f,g,d=0,m=0,p=arguments.length,h=0;m<p;)h<(f=v(arguments[m++]))?(d=d*(g=h/f)*g+1,h=f):d+=0<f?(g=f/h)*g:f;return h===1/0?1/0:h*S(d)}})},{"../internals/export":50}],177:[function(M,de,H){M=M("../internals/export");var E=Math.log,v=Math.LN2;M({target:"Math",stat:!0},{log2:function(S){return E(S)/v}})},{"../internals/export":50}],178:[function(l,de,H){l("../internals/export")({target:"Math",stat:!0},{sign:l("../internals/math-sign")})},{"../internals/export":50,"../internals/math-sign":81}],179:[function(l,de,H){"use strict";function M(k){var Z,X,W,oe,ie,re,le,pe=d(k,!1);if("string"==typeof pe&&2<pe.length)if(43===(k=(pe=x(pe)).charCodeAt(0))||45===k){if(88===(Z=pe.charCodeAt(2))||120===Z)return NaN}else if(48===k){switch(pe.charCodeAt(1)){case 66:case 98:X=2,W=49;break;case 79:case 111:X=8,W=55;break;default:return+pe}for(ie=(oe=pe.slice(2)).length,re=0;re<ie;re++)if((le=oe.charCodeAt(re))<48||W<le)return NaN;return parseInt(oe,X)}return+pe}var E=l("../internals/descriptors"),v=l("../internals/global"),S=l("../internals/is-forced"),T=l("../internals/redefine"),C=l("../internals/has"),f=l("../internals/classof-raw"),g=l("../internals/inherit-if-required"),d=l("../internals/to-primitive"),m=l("../internals/fails"),p=l("../internals/object-create"),h=l("../internals/object-get-own-property-names").f,y=l("../internals/object-get-own-property-descriptor").f,b=l("../internals/object-define-property").f,x=l("../internals/string-trim").trim,D="Number",N=v[D],U=N.prototype,R=f(p(U))==D;if(S(D,!N(" 0o1")||!N("0b1")||N("+0x1"))){for(var L,z=function(Z){Z=arguments.length<1?0:Z;var X=this;return X instanceof z&&(R?m(function(){U.valueOf.call(X)}):f(X)!=D)?g(new N(M(Z)),X,z):M(Z)},F=E?h(N):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),q=0;F.length>q;q++)C(N,L=F[q])&&!C(z,L)&&b(z,L,y(N,L));(z.prototype=U).constructor=z,T(v,D,z)}},{"../internals/classof-raw":28,"../internals/descriptors":43,"../internals/fails":51,"../internals/global":60,"../internals/has":61,"../internals/inherit-if-required":68,"../internals/is-forced":74,"../internals/object-create":91,"../internals/object-define-property":93,"../internals/object-get-own-property-descriptor":94,"../internals/object-get-own-property-names":96,"../internals/redefine":110,"../internals/string-trim":131,"../internals/to-primitive":142}],180:[function(l,de,H){l("../internals/export")({target:"Number",stat:!0},{EPSILON:Math.pow(2,-52)})},{"../internals/export":50}],181:[function(l,de,H){l("../internals/export")({target:"Number",stat:!0},{isFinite:l("../internals/number-is-finite")})},{"../internals/export":50,"../internals/number-is-finite":89}],182:[function(C,de,H){"use strict";function M(d,m,p){return 0===m?p:m%2==1?M(d,m-1,p*d):M(d*d,m/2,p)}var E=C("../internals/export"),v=C("../internals/to-integer"),S=C("../internals/this-number-value"),T=C("../internals/string-repeat"),f=(C=C("../internals/fails"),1..toFixed),g=Math.floor;E({target:"Number",proto:!0,forced:f&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==(0xde0b6b3a7640080).toFixed(0))||!C(function(){f.call({})})},{toFixed:function(D){function m(L,z){for(var F=-1,q=z;++F<6;)N[F]=(q+=L*N[F])%1e7,q=g(q/1e7)}function p(L){for(var z=6,F=0;0<=--z;)N[z]=g((F+=N[z])/L),F=F%L*1e7}function h(){for(var L,z=6,F="";0<=--z;)""===F&&0!==z&&0===N[z]||(L=String(N[z]),F=""===F?L:F+T.call("0",7-L.length)+L);return F}var y,b,x=S(this),N=(D=v(D),[0,0,0,0,0,0]),U="",R="0";if(D<0||20<D)throw RangeError("Incorrect fraction digits");if(x!=x)return"NaN";if(x<=-1e21||1e21<=x)return String(x);if(x<0&&(U="-",x=-x),1e-21<x)if(x=(y=function(L){for(var z=0,F=L;4096<=F;)z+=12,F/=4096;for(;2<=F;)z+=1,F/=2;return z}(x*M(2,69,1))-69)<0?x*M(2,-y,1):x/M(2,y,1),x*=4503599627370496,0<(y=52-y)){for(m(0,x),b=D;7<=b;)m(1e7,0),b-=7;for(m(M(10,b,1),0),b=y-1;23<=b;)p(1<<23),b-=23;p(1<<b),m(1,1),p(2),R=h()}else m(0,x),m(1<<-y,0),R=h()+T.call("0",D);return 0<D?U+((x=R.length)<=D?"0."+T.call("0",D-x)+R:R.slice(0,x-D)+"."+R.slice(x-D)):U+R}})},{"../internals/export":50,"../internals/fails":51,"../internals/string-repeat":129,"../internals/this-number-value":133,"../internals/to-integer":137}],183:[function(E,de,H){var M=E("../internals/export");E=E("../internals/object-assign"),M({target:"Object",stat:!0,forced:Object.assign!==E},{assign:E})},{"../internals/export":50,"../internals/object-assign":90}],184:[function(l,de,H){var M=l("../internals/export"),E=l("../internals/object-to-array").entries;M({target:"Object",stat:!0},{entries:function(v){return E(v)}})},{"../internals/export":50,"../internals/object-to-array":103}],185:[function(l,de,H){var M=l("../internals/export"),E=l("../internals/iterate"),v=l("../internals/create-property");M({target:"Object",stat:!0},{fromEntries:function(S){var T={};return E(S,function(C,f){v(T,C,f)},void 0,!0),T}})},{"../internals/create-property":40,"../internals/export":50,"../internals/iterate":78}],186:[function(S,de,H){var M=S("../internals/export"),T=S("../internals/fails"),E=S("../internals/to-indexed-object"),v=S("../internals/object-get-own-property-descriptor").f;S=S("../internals/descriptors"),T=T(function(){v(1)}),M({target:"Object",stat:!0,forced:!S||T,sham:!S},{getOwnPropertyDescriptor:function(C,f){return v(E(C),f)}})},{"../internals/descriptors":43,"../internals/export":50,"../internals/fails":51,"../internals/object-get-own-property-descriptor":94,"../internals/to-indexed-object":136}],187:[function(v,de,H){var M=v("../internals/export"),E=v("../internals/fails");v=v("../internals/object-get-own-property-names-external").f,M({target:"Object",stat:!0,forced:E(function(){return!Object.getOwnPropertyNames(1)})},{getOwnPropertyNames:v})},{"../internals/export":50,"../internals/fails":51,"../internals/object-get-own-property-names-external":95}],188:[function(T,de,H){var M=T("../internals/export"),E=T("../internals/fails"),v=T("../internals/to-object"),S=T("../internals/object-get-prototype-of");T=T("../internals/correct-prototype-getter"),M({target:"Object",stat:!0,forced:E(function(){S(1)}),sham:!T},{getPrototypeOf:function(C){return S(v(C))}})},{"../internals/correct-prototype-getter":35,"../internals/export":50,"../internals/fails":51,"../internals/object-get-prototype-of":98,"../internals/to-object":139}],189:[function(l,de,H){var M=l("../internals/export"),E=l("../internals/to-object"),v=l("../internals/object-keys");M({target:"Object",stat:!0,forced:l("../internals/fails")(function(){v(1)})},{keys:function(S){return v(E(S))}})},{"../internals/export":50,"../internals/fails":51,"../internals/object-keys":100,"../internals/to-object":139}],190:[function(v,de,H){var M=v("../internals/to-string-tag-support"),E=v("../internals/redefine");v=v("../internals/object-to-string"),M||E(Object.prototype,"toString",v,{unsafe:!0})},{"../internals/object-to-string":104,"../internals/redefine":110,"../internals/to-string-tag-support":143}],191:[function(et,de,H){"use strict";var M,E,v,S,T=et("../internals/export"),C=et("../internals/is-pure"),f=et("../internals/global"),g=et("../internals/get-built-in"),d=et("../internals/native-promise-constructor"),m=et("../internals/redefine"),p=et("../internals/redefine-all"),h=et("../internals/set-to-string-tag"),y=et("../internals/set-species"),b=et("../internals/is-object"),x=et("../internals/a-function"),D=et("../internals/an-instance"),N=et("../internals/classof-raw"),U=et("../internals/inspect-source"),R=et("../internals/iterate"),L=et("../internals/check-correctness-of-iteration"),z=et("../internals/species-constructor"),F=et("../internals/task").set,q=et("../internals/microtask"),k=et("../internals/promise-resolve"),Z=et("../internals/host-report-errors"),X=et("../internals/new-promise-capability"),W=et("../internals/perform"),oe=et("../internals/internal-state"),ie=et("../internals/is-forced"),_t=et("../internals/well-known-symbol"),re=et("../internals/engine-v8-version"),le=_t("species"),pe="Promise",Ae=oe.get,$=oe.set,P=oe.getterFor(pe),K=d,te=f.TypeError,fe=f.document,ve=f.process,Te=g("fetch"),Ie=X.f,we=Ie,Pe="process"==N(ve),je=!!(fe&&fe.createEvent&&f.dispatchEvent),be="unhandledrejection",ot=(_t=(et=ie(pe,function(){var vt,rt;return U(K)===String(K)&&(66===re||!Pe&&"function"!=typeof PromiseRejectionEvent)||!((!C||K.prototype.finally)&&(51<=re&&/native code/.test(K)||(rt=function(ge){ge(function(){},function(){})},((vt=K.resolve(1)).constructor={})[le]=rt,vt.then(function(){})instanceof rt)))}))||!L(function(vt){K.all(vt).catch(function(){})}),function(vt){var rt;return!(!b(vt)||"function"!=typeof(rt=vt.then))&&rt}),Kt=function(vt,rt,ge){var xe;rt.notified||(rt.notified=!0,xe=rt.reactions,q(function(){for(var he,Se,He=rt.value,Je=1==rt.state,ut=0;xe.length>ut;){var Ot,zt,Gt,cn=xe[ut++],zn=Je?cn.ok:cn.fail,Nn=cn.resolve,_n=cn.reject,Fn=cn.domain;try{zn?(Je||(2===rt.rejection&&function(On,Xr){F.call(f,function(){Pe?ve.emit("rejectionHandled",On):$t("rejectionhandled",On,Xr.value)})}(vt,rt),rt.rejection=1),!0===zn?Ot=He:(Fn&&Fn.enter(),Ot=zn(He),Fn&&(Fn.exit(),Gt=!0)),Ot===cn.promise?_n(te("Promise-chain cycle")):(zt=ot(Ot))?zt.call(Ot,Nn,_n):Nn(Ot)):_n(He)}catch(On){Fn&&!Gt&&Fn.exit(),_n(On)}}rt.reactions=[],rt.notified=!1,ge&&!rt.rejection&&(he=vt,Se=rt,F.call(f,function(){var On=Se.value,Xr=Xt(Se);if(Xr&&(Xr=W(function(){Pe?ve.emit("unhandledRejection",On,he):$t(be,he,On)}),Se.rejection=Pe||Xt(Se)?2:1,Xr.error))throw Xr.value}))}))},$t=function(vt,rt,ge){var xe;je?((xe=fe.createEvent("Event")).promise=rt,xe.reason=ge,xe.initEvent(vt,!1,!0),f.dispatchEvent(xe)):xe={promise:rt,reason:ge},(rt=f["on"+vt])?rt(xe):vt===be&&Z("Unhandled promise rejection",ge)},Xt=function(vt){return 1!==vt.rejection&&!vt.parent},ln=function(vt,rt,ge,xe){return function(he){vt(rt,ge,he,xe)}},Wt=function(vt,rt,ge,xe){rt.done||(rt.done=!0,(rt=xe||rt).value=ge,rt.state=2,Kt(vt,rt,!0))},Ye=function(vt,rt,ge,xe){if(!rt.done){rt.done=!0,xe&&(rt=xe);try{if(vt===ge)throw te("Promise can't be resolved itself");var he=ot(ge);he?q(function(){var Se={done:!1};try{he.call(ge,ln(Ye,vt,Se,rt),ln(Wt,vt,Se,rt))}catch(He){Wt(vt,Se,He,rt)}}):(rt.value=ge,rt.state=1,Kt(vt,rt,!1))}catch(Se){Wt(vt,{done:!1},Se,rt)}}};et&&(K=function(vt){D(this,K,pe),x(vt),M.call(this);var rt=Ae(this);try{vt(ln(Ye,this,rt),ln(Wt,this,rt))}catch(ge){Wt(this,rt,ge)}},(M=function(vt){$(this,{type:pe,done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:0,value:void 0})}).prototype=p(K.prototype,{then:function(vt,rt){var ge=P(this),xe=Ie(z(this,K));return xe.ok="function"!=typeof vt||vt,xe.fail="function"==typeof rt&&rt,xe.domain=Pe?ve.domain:void 0,ge.parent=!0,ge.reactions.push(xe),0!=ge.state&&Kt(this,ge,!1),xe.promise},catch:function(vt){return this.then(void 0,vt)}}),E=function(){var vt=new M,rt=Ae(vt);this.promise=vt,this.resolve=ln(Ye,vt,rt),this.reject=ln(Wt,vt,rt)},X.f=Ie=function(vt){return vt===K||vt===v?new E:we(vt)},C||"function"!=typeof d||(S=d.prototype.then,m(d.prototype,"then",function(vt,rt){var ge=this;return new K(function(xe,he){S.call(ge,xe,he)}).then(vt,rt)},{unsafe:!0}),"function"==typeof Te&&T({global:!0,enumerable:!0,forced:!0},{fetch:function(vt){return k(K,Te.apply(f,arguments))}}))),T({global:!0,wrap:!0,forced:et},{Promise:K}),h(K,pe,!1,!0),y(pe),v=g(pe),T({target:pe,stat:!0,forced:et},{reject:function(vt){var rt=Ie(this);return rt.reject.call(void 0,vt),rt.promise}}),T({target:pe,stat:!0,forced:C||et},{resolve:function(vt){return k(C&&this===v?K:this,vt)}}),T({target:pe,stat:!0,forced:_t},{all:function(vt){var rt=this,ge=Ie(rt),xe=ge.resolve,he=ge.reject,Se=W(function(){var He=x(rt.resolve),Je=[],ut=0,Ot=1;R(vt,function(zt){var Gt=ut++,cn=!1;Je.push(void 0),Ot++,He.call(rt,zt).then(function(zn){cn||(cn=!0,Je[Gt]=zn,--Ot||xe(Je))},he)}),--Ot||xe(Je)});return Se.error&&he(Se.value),ge.promise},race:function(vt){var rt=this,ge=Ie(rt),xe=ge.reject,he=W(function(){var Se=x(rt.resolve);R(vt,function(He){Se.call(rt,He).then(ge.resolve,xe)})});return he.error&&xe(he.value),ge.promise}})},{"../internals/a-function":5,"../internals/an-instance":9,"../internals/check-correctness-of-iteration":27,"../internals/classof-raw":28,"../internals/engine-v8-version":48,"../internals/export":50,"../internals/get-built-in":57,"../internals/global":60,"../internals/host-report-errors":63,"../internals/inspect-source":69,"../internals/internal-state":71,"../internals/is-forced":74,"../internals/is-object":75,"../internals/is-pure":76,"../internals/iterate":78,"../internals/microtask":82,"../internals/native-promise-constructor":83,"../internals/new-promise-capability":87,"../internals/perform":107,"../internals/promise-resolve":108,"../internals/redefine":110,"../internals/redefine-all":109,"../internals/set-species":118,"../internals/set-to-string-tag":119,"../internals/species-constructor":123,"../internals/task":132,"../internals/well-known-symbol":150}],192:[function(f,de,H){var M=f("../internals/export"),p=f("../internals/get-built-in"),E=f("../internals/a-function"),v=f("../internals/an-object"),S=f("../internals/is-object"),T=f("../internals/object-create"),C=f("../internals/function-bind"),g=(f=f("../internals/fails"),p("Reflect","construct")),d=f(function(){function h(){}return!(g(function(){},[],h)instanceof h)}),m=!f(function(){g(function(){})});M({target:"Reflect",stat:!0,forced:p=d||m,sham:p},{construct:function(h,y){E(h),v(y);var b=arguments.length<3?h:E(arguments[2]);if(m&&!d)return g(h,y,b);if(h==b){switch(y.length){case 0:return new h;case 1:return new h(y[0]);case 2:return new h(y[0],y[1]);case 3:return new h(y[0],y[1],y[2]);case 4:return new h(y[0],y[1],y[2],y[3])}var x=[null];return x.push.apply(x,y),new(C.apply(h,x))}return b=T(S(x=b.prototype)?x:Object.prototype),x=Function.apply.call(h,b,y),S(x)?x:b}})},{"../internals/a-function":5,"../internals/an-object":10,"../internals/export":50,"../internals/fails":51,"../internals/function-bind":56,"../internals/get-built-in":57,"../internals/is-object":75,"../internals/object-create":91}],193:[function(l,de,H){var M=l("../internals/export"),E=l("../internals/is-object"),v=l("../internals/an-object"),S=l("../internals/has"),T=l("../internals/object-get-own-property-descriptor"),C=l("../internals/object-get-prototype-of");M({target:"Reflect",stat:!0},{get:function f(g,d){var m,p=arguments.length<3?g:arguments[2];return v(g)===p?g[d]:(m=T.f(g,d))?S(m,"value")?m.value:void 0===m.get?void 0:m.get.call(p):E(m=C(g))?f(m,d,p):void 0}})},{"../internals/an-object":10,"../internals/export":50,"../internals/has":61,"../internals/is-object":75,"../internals/object-get-own-property-descriptor":94,"../internals/object-get-prototype-of":98}],194:[function(l,de,H){var M=l("../internals/descriptors"),E=l("../internals/global"),v=l("../internals/is-forced"),S=l("../internals/inherit-if-required"),T=l("../internals/object-define-property").f,C=l("../internals/object-get-own-property-names").f,f=l("../internals/is-regexp"),g=l("../internals/regexp-flags"),d=l("../internals/regexp-sticky-helpers"),m=l("../internals/redefine"),p=l("../internals/fails"),h=l("../internals/internal-state").set,y=l("../internals/set-species"),b=l("../internals/well-known-symbol")("match"),x=E.RegExp,D=x.prototype,N=/a/g,U=/a/g,R=new x(N)!==N,L=d.UNSUPPORTED_Y;if(M&&v("RegExp",!R||L||p(function(){return U[b]=!1,x(N)!=N||x(U)==U||"/a/i"!=x(N,"i")}))){for(var z=function(k,Z){var X,W=this instanceof z,oe=f(k),ie=void 0===Z;return!W&&oe&&k.constructor===z&&ie?k:(R?oe&&!ie&&(k=k.source):k instanceof z&&(ie&&(Z=g.call(k)),k=k.source),L&&(X=!!Z&&-1<Z.indexOf("y"))&&(Z=Z.replace(/y/g,"")),oe=S(R?new x(k,Z):x(k,Z),W?this:D,z),L&&X&&h(oe,{sticky:X}),oe)},F=C(x),q=0;F.length>q;)!function(k){k in z||T(z,k,{configurable:!0,get:function(){return x[k]},set:function(Z){x[k]=Z}})}(F[q++]);(D.constructor=z).prototype=D,m(E,"RegExp",z)}y("RegExp")},{"../internals/descriptors":43,"../internals/fails":51,"../internals/global":60,"../internals/inherit-if-required":68,"../internals/internal-state":71,"../internals/is-forced":74,"../internals/is-regexp":77,"../internals/object-define-property":93,"../internals/object-get-own-property-names":96,"../internals/redefine":110,"../internals/regexp-flags":113,"../internals/regexp-sticky-helpers":114,"../internals/set-species":118,"../internals/well-known-symbol":150}],195:[function(E,de,H){"use strict";var M=E("../internals/export");E=E("../internals/regexp-exec"),M({target:"RegExp",proto:!0,forced:/./.exec!==E},{exec:E})},{"../internals/export":50,"../internals/regexp-exec":112}],196:[function(S,de,H){"use strict";var M=S("../internals/redefine"),E=S("../internals/an-object"),f=S("../internals/fails"),v=S("../internals/regexp-flags"),T=(S="toString",RegExp.prototype),C=T[S];((f=f(function(){return"/a/b"!=C.call({source:"a",flags:"b"})}))||C.name!=S)&&M(RegExp.prototype,S,function(){var d=E(this),m=String(d.source),p=d.flags;return"/"+m+"/"+String(void 0===p&&d instanceof RegExp&&!("flags"in T)?v.call(d):p)},{unsafe:!0})},{"../internals/an-object":10,"../internals/fails":51,"../internals/redefine":110,"../internals/regexp-flags":113}],197:[function(E,de,H){"use strict";var M=E("../internals/collection");E=E("../internals/collection-strong"),de.exports=M("Set",function(v){return function(){return v(this,arguments.length?arguments[0]:void 0)}},E)},{"../internals/collection":32,"../internals/collection-strong":30}],198:[function(C,de,H){"use strict";var M=C("../internals/export"),E=C("../internals/object-get-own-property-descriptor").f,v=C("../internals/to-length"),S=C("../internals/not-a-regexp"),T=C("../internals/require-object-coercible"),d=C("../internals/correct-is-regexp-logic"),f=(C=C("../internals/is-pure"),"".endsWith),g=Math.min;d=d("endsWith"),M({target:"String",proto:!0,forced:!(!C&&!d&&(M=E(String.prototype,"endsWith"))&&!M.writable||d)},{endsWith:function(m){var p=String(T(this)),h=(S(m),1<arguments.length?arguments[1]:void 0),y=v(p.length);return h=void 0===h?y:g(v(h),y),y=String(m),f?f.call(p,y,h):p.slice(h-y.length,h)===y}})},{"../internals/correct-is-regexp-logic":34,"../internals/export":50,"../internals/is-pure":76,"../internals/not-a-regexp":88,"../internals/object-get-own-property-descriptor":94,"../internals/require-object-coercible":115,"../internals/to-length":138}],199:[function(l,de,H){"use strict";var M=l("../internals/export"),E=l("../internals/not-a-regexp"),v=l("../internals/require-object-coercible");M({target:"String",proto:!0,forced:!l("../internals/correct-is-regexp-logic")("includes")},{includes:function(S){return!!~String(v(this)).indexOf(E(S),1<arguments.length?arguments[1]:void 0)}})},{"../internals/correct-is-regexp-logic":34,"../internals/export":50,"../internals/not-a-regexp":88,"../internals/require-object-coercible":115}],200:[function(v,de,H){"use strict";var M=v("../internals/string-multibyte").charAt,E=v("../internals/internal-state"),S=(v=v("../internals/define-iterator"),"String Iterator"),T=E.set,C=E.getterFor(S);v(String,"String",function(f){T(this,{type:S,string:String(f),index:0})},function(){var f=C(this),g=f.string,d=f.index;return d>=g.length?{value:void 0,done:!0}:(g=M(g,d),f.index+=g.length,{value:g,done:!1})})},{"../internals/define-iterator":41,"../internals/internal-state":71,"../internals/string-multibyte":125}],201:[function(l,de,H){"use strict";var M=l("../internals/fix-regexp-well-known-symbol-logic"),E=l("../internals/an-object"),v=l("../internals/to-length"),S=l("../internals/require-object-coercible"),T=l("../internals/advance-string-index"),C=l("../internals/regexp-exec-abstract");M("match",1,function(f,g,d){return[function(m){var p=S(this),h=m?.[f];return void 0!==h?h.call(m,p):new RegExp(m)[f](String(p))},function(m){var p=d(g,m,this);if(p.done)return p.value;var h=E(m),y=String(this);if(!h.global)return C(h,y);for(var b=h.unicode,x=[],D=h.lastIndex=0;null!==(N=C(h,y));){var N=String(N[0]);""===(x[D]=N)&&(h.lastIndex=T(y,v(h.lastIndex),b)),D++}return 0===D?null:x}]})},{"../internals/advance-string-index":8,"../internals/an-object":10,"../internals/fix-regexp-well-known-symbol-logic":52,"../internals/regexp-exec-abstract":111,"../internals/require-object-coercible":115,"../internals/to-length":138}],202:[function(l,de,H){"use strict";var M=l("../internals/export"),E=l("../internals/string-pad").start;M({target:"String",proto:!0,forced:l("../internals/string-pad-webkit-bug")},{padStart:function(v){return E(this,v,1<arguments.length?arguments[1]:void 0)}})},{"../internals/export":50,"../internals/string-pad":127,"../internals/string-pad-webkit-bug":126}],203:[function(l,de,H){l("../internals/export")({target:"String",proto:!0},{repeat:l("../internals/string-repeat")})},{"../internals/export":50,"../internals/string-repeat":129}],204:[function(l,de,H){"use strict";var M=l("../internals/fix-regexp-well-known-symbol-logic"),E=l("../internals/an-object"),v=l("../internals/to-object"),S=l("../internals/to-length"),T=l("../internals/to-integer"),C=l("../internals/require-object-coercible"),f=l("../internals/advance-string-index"),g=l("../internals/regexp-exec-abstract"),d=Math.max,m=Math.min,p=Math.floor,h=/\$([$&'`]|\d\d?|<[^>]*>)/g,y=/\$([$&'`]|\d\d?)/g;M("replace",2,function(b,x,D,N){var U=N.REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE,R=N.REPLACE_KEEPS_$0,L=U?"$":"$0";return[function(z,F){var q=C(this),k=z?.[b];return void 0!==k?k.call(z,q,F):x.call(String(q),z,F)},function(z,F){if(!U&&R||"string"==typeof F&&-1===F.indexOf(L)){var q=D(x,z,this,F);if(q.done)return q.value}for(var k,Z=E(z),X=String(this),W="function"==typeof F,oe=(W||(F=String(F)),Z.global),ie=(oe&&(k=Z.unicode,Z.lastIndex=0),[]);null!==($=g(Z,X))&&(ie.push($),oe);)""===String($[0])&&(Z.lastIndex=f(X,S(Z.lastIndex),k));for(var re,le="",pe=0,Ae=0;Ae<ie.length;Ae++){for(var $=ie[Ae],P=String($[0]),K=d(m(T($.index),X.length),0),te=[],fe=1;fe<$.length;fe++)te.push(void 0===(re=$[fe])?re:String(re));var ve=$.groups,Te=W?(Te=[P].concat(te,K,X),void 0!==ve&&Te.push(ve),String(F.apply(void 0,Te))):function(Ie,we,Pe,je,be,Oe){var Ge=Pe+Ie.length,Ke=je.length,ze=y;return void 0!==be&&(be=v(be),ze=h),x.call(Oe,ze,function(qe,et){var _t;switch(et.charAt(0)){case"$":return"$";case"&":return Ie;case"`":return we.slice(0,Pe);case"'":return we.slice(Ge);case"<":_t=be[et.slice(1,-1)];break;default:var ot,Kt=+et;if(0==Kt)return qe;if(Ke<Kt)return 0!==(ot=p(Kt/10))&&ot<=Ke?void 0===je[ot-1]?et.charAt(1):je[ot-1]+et.charAt(1):qe;_t=je[Kt-1]}return void 0===_t?"":_t})}(P,X,K,te,ve,F);pe<=K&&(le+=X.slice(pe,K)+Te,pe=K+P.length)}return le+X.slice(pe)}]})},{"../internals/advance-string-index":8,"../internals/an-object":10,"../internals/fix-regexp-well-known-symbol-logic":52,"../internals/regexp-exec-abstract":111,"../internals/require-object-coercible":115,"../internals/to-integer":137,"../internals/to-length":138,"../internals/to-object":139}],205:[function(l,de,H){"use strict";var M=l("../internals/fix-regexp-well-known-symbol-logic"),E=l("../internals/an-object"),v=l("../internals/require-object-coercible"),S=l("../internals/same-value"),T=l("../internals/regexp-exec-abstract");M("search",1,function(C,f,g){return[function(d){var m=v(this),p=d?.[C];return void 0!==p?p.call(d,m):new RegExp(d)[C](String(m))},function(d){var m,p=g(f,d,this);return p.done?p.value:(p=E(d),d=String(this),S(m=p.lastIndex,0)||(p.lastIndex=0),d=T(p,d),S(p.lastIndex,m)||(p.lastIndex=m),null===d?-1:d.index)}]})},{"../internals/an-object":10,"../internals/fix-regexp-well-known-symbol-logic":52,"../internals/regexp-exec-abstract":111,"../internals/require-object-coercible":115,"../internals/same-value":116}],206:[function(m,de,H){"use strict";var M=m("../internals/fix-regexp-well-known-symbol-logic"),E=m("../internals/is-regexp"),v=m("../internals/an-object"),S=m("../internals/require-object-coercible"),T=m("../internals/species-constructor"),C=m("../internals/advance-string-index"),f=m("../internals/to-length"),g=m("../internals/regexp-exec-abstract"),d=m("../internals/regexp-exec"),p=(m=m("../internals/fails"),[].push),h=Math.min,y=4294967295,b=!m(function(){return!RegExp(y,"y")});M("split",2,function(x,D,N){var U="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||1<".".split(/()()/).length||"".split(/.?/).length?function(R,L){var z=String(S(this)),F=void 0===L?y:L>>>0;if(0==F)return[];if(void 0===R)return[z];if(!E(R))return D.call(z,R,F);for(var q,k,Z,X=[],W=(L=(R.ignoreCase?"i":"")+(R.multiline?"m":"")+(R.unicode?"u":"")+(R.sticky?"y":""),0),oe=new RegExp(R.source,L+"g");(q=d.call(oe,z))&&!(W<(k=oe.lastIndex)&&(X.push(z.slice(W,q.index)),1<q.length&&q.index<z.length&&p.apply(X,q.slice(1)),Z=q[0].length,W=k,X.length>=F));)oe.lastIndex===q.index&&oe.lastIndex++;return W===z.length?!Z&&oe.test("")||X.push(""):X.push(z.slice(W)),X.length>F?X.slice(0,F):X}:"0".split(void 0,0).length?function(R,L){return void 0===R&&0===L?[]:D.call(this,R,L)}:D;return[function(R,L){var z=S(this),F=R?.[x];return void 0!==F?F.call(R,z,L):U.call(String(z),R,L)},function(q,L){if((z=N(U,q,this,L,U!==D)).done)return z.value;var z=v(q),F=String(this),k=(q=T(z,RegExp),z.unicode),X=new q(b?z:"^(?:"+z.source+")",(z.ignoreCase?"i":"")+(z.multiline?"m":"")+(z.unicode?"u":"")+(b?"y":"g")),W=void 0===L?y:L>>>0;if(0==W)return[];if(0===F.length)return null===g(X,F)?[F]:[];for(var oe=0,ie=0,re=[];ie<F.length;){X.lastIndex=b?ie:0;var le,pe=g(X,b?F:F.slice(ie));if(null===pe||(le=h(f(X.lastIndex+(b?0:ie)),F.length))===oe)ie=C(F,ie,k);else{if(re.push(F.slice(oe,ie)),re.length===W)return re;for(var Ae=1;Ae<=pe.length-1;Ae++)if(re.push(pe[Ae]),re.length===W)return re;ie=oe=le}}return re.push(F.slice(oe)),re}]},!b)},{"../internals/advance-string-index":8,"../internals/an-object":10,"../internals/fails":51,"../internals/fix-regexp-well-known-symbol-logic":52,"../internals/is-regexp":77,"../internals/regexp-exec":112,"../internals/regexp-exec-abstract":111,"../internals/require-object-coercible":115,"../internals/species-constructor":123,"../internals/to-length":138}],207:[function(C,de,H){"use strict";var M=C("../internals/export"),E=C("../internals/object-get-own-property-descriptor").f,v=C("../internals/to-length"),S=C("../internals/not-a-regexp"),T=C("../internals/require-object-coercible"),d=C("../internals/correct-is-regexp-logic"),f=(C=C("../internals/is-pure"),"".startsWith),g=Math.min;d=d("startsWith"),M({target:"String",proto:!0,forced:!(!C&&!d&&(M=E(String.prototype,"startsWith"))&&!M.writable||d)},{startsWith:function(y){var p=String(T(this)),h=(S(y),v(g(1<arguments.length?arguments[1]:void 0,p.length)));return y=String(y),f?f.call(p,y,h):p.slice(h,h+y.length)===y}})},{"../internals/correct-is-regexp-logic":34,"../internals/export":50,"../internals/is-pure":76,"../internals/not-a-regexp":88,"../internals/object-get-own-property-descriptor":94,"../internals/require-object-coercible":115,"../internals/to-length":138}],208:[function(l,de,H){"use strict";var M=l("../internals/export"),E=l("../internals/create-html");M({target:"String",proto:!0,forced:l("../internals/string-html-forced")("sub")},{sub:function(){return E(this,"sub","","")}})},{"../internals/create-html":36,"../internals/export":50,"../internals/string-html-forced":124}],209:[function(l,de,H){"use strict";var M=l("../internals/export"),E=l("../internals/string-trim").trim;M({target:"String",proto:!0,forced:l("../internals/string-trim-forced")("trim")},{trim:function(){return E(this)}})},{"../internals/export":50,"../internals/string-trim":131,"../internals/string-trim-forced":130}],210:[function(h,de,H){"use strict";var M,E,v,S,T,C=h("../internals/export"),f=h("../internals/descriptors"),g=h("../internals/global"),d=h("../internals/has"),m=h("../internals/is-object"),p=h("../internals/object-define-property").f,y=(h=h("../internals/copy-constructor-properties"),g.Symbol);!f||"function"!=typeof y||"description"in y.prototype&&void 0===y().description||(M={},h(E=function(){var b=arguments.length<1||void 0===arguments[0]?void 0:String(arguments[0]),x=this instanceof E?new y(b):void 0===b?y():y(b);return""===b&&(M[x]=!0),x},y),(g=E.prototype=y.prototype).constructor=E,v=g.toString,S="Symbol(test)"==String(y("test")),T=/^Symbol\((.*)\)[^)]+$/,p(g,"description",{configurable:!0,get:function(){var b=m(this)?this.valueOf():this,x=v.call(b);return d(M,b)?"":""===(b=S?x.slice(7,-1):x.replace(T,"$1"))?void 0:b}}),C({global:!0,forced:!0},{Symbol:E}))},{"../internals/copy-constructor-properties":33,"../internals/descriptors":43,"../internals/export":50,"../internals/global":60,"../internals/has":61,"../internals/is-object":75,"../internals/object-define-property":93}],211:[function(l,de,H){l("../internals/define-well-known-symbol")("iterator")},{"../internals/define-well-known-symbol":42}],212:[function(we,de,H){"use strict";function M(he,Se){var He=_t[he]=z(Oe[Ie]);return Pe(He,{type:Te,tag:he,description:Se}),d||(He.description=Se),He}function E(he,Je){D(he);var He=U(Je);return Je=F(He).concat(xe(He)),fe(Je,function(ut){d&&!ge.call(He,ut)||rt(he,ut,He[ut])}),he}function v(Je,ut){var He;if(Je=U(Je),ut=R(ut,!0),Je!==be||!y(_t,ut)||y(ot,ut))return!(He=Ke(Je,ut))||!y(_t,ut)||y(Je,ve)&&Je[ve][ut]||(He.enumerable=!0),He}function S(Se){Se=qe(U(Se));var He=[];return fe(Se,function(Je){y(_t,Je)||y(pe,Je)||He.push(Je)}),He}var T=we("../internals/export"),C=we("../internals/global"),f=we("../internals/get-built-in"),g=we("../internals/is-pure"),d=we("../internals/descriptors"),m=we("../internals/native-symbol"),p=we("../internals/use-symbol-as-uid"),h=we("../internals/fails"),y=we("../internals/has"),b=we("../internals/is-array"),x=we("../internals/is-object"),D=we("../internals/an-object"),N=we("../internals/to-object"),U=we("../internals/to-indexed-object"),R=we("../internals/to-primitive"),L=we("../internals/create-property-descriptor"),z=we("../internals/object-create"),F=we("../internals/object-keys"),q=we("../internals/object-get-own-property-names"),k=we("../internals/object-get-own-property-names-external"),Z=we("../internals/object-get-own-property-symbols"),X=we("../internals/object-get-own-property-descriptor"),W=we("../internals/object-define-property"),oe=we("../internals/object-property-is-enumerable"),ie=we("../internals/create-non-enumerable-property"),re=we("../internals/redefine"),le=we("../internals/shared"),Xt=we("../internals/shared-key"),pe=we("../internals/hidden-keys"),Ae=we("../internals/uid"),$=we("../internals/well-known-symbol"),P=we("../internals/well-known-symbol-wrapped"),K=we("../internals/define-well-known-symbol"),te=we("../internals/set-to-string-tag"),ln=we("../internals/internal-state"),fe=we("../internals/array-iteration").forEach,ve=Xt("hidden"),Te="Symbol",Ie="prototype",Pe=(we=$("toPrimitive"),ln.set),je=ln.getterFor(Te),be=Object[Ie],Oe=C.Symbol,Ge=f("JSON","stringify"),Ke=X.f,ze=W.f,qe=k.f,et=oe.f,_t=le("symbols"),ot=le("op-symbols"),Kt=le("string-to-symbol-registry"),$t=le("symbol-to-string-registry"),Wt=(Xt=le("wks"),!(ln=C.QObject)||!ln[Ie]||!ln[Ie].findChild),Ye=d&&h(function(){return 7!=z(ze({},"a",{get:function(){return ze(this,"a",{value:7}).a}})).a})?function(he,Se,He){var Je=Ke(be,Se);Je&&delete be[Se],ze(he,Se,He),Je&&he!==be&&ze(be,Se,Je)}:ze,vt=p?function(he){return"symbol"==typeof he}:function(he){return Object(he)instanceof Oe},rt=function(he,Se,He){return he===be&&rt(ot,Se,He),D(he),Se=R(Se,!0),D(He),(y(_t,Se)?(He.enumerable?(y(he,ve)&&he[ve][Se]&&(he[ve][Se]=!1),He=z(He,{enumerable:L(0,!1)})):(y(he,ve)||ze(he,ve,L(1,{})),he[ve][Se]=!0),Ye):ze)(he,Se,He)},ge=function(Se){Se=R(Se,!0);var He=et.call(this,Se);return!(this===be&&y(_t,Se)&&!y(ot,Se))&&(!(He||!y(this,Se)||!y(_t,Se)||y(this,ve)&&this[ve][Se])||He)},xe=function(He){var Se=He===be,Je=(He=qe(Se?ot:U(He)),[]);return fe(He,function(ut){!y(_t,ut)||Se&&!y(be,ut)||Je.push(_t[ut])}),Je};m||(re((Oe=function(){if(this instanceof Oe)throw TypeError("Symbol is not a constructor");var he=arguments.length&&void 0!==arguments[0]?String(arguments[0]):void 0,Se=Ae(he),He=function(Je){this===be&&He.call(ot,Je),y(this,ve)&&y(this[ve],Se)&&(this[ve][Se]=!1),Ye(this,Se,L(1,Je))};return d&&Wt&&Ye(be,Se,{configurable:!0,set:He}),M(Se,he)})[Ie],"toString",function(){return je(this).tag}),re(Oe,"withoutSetter",function(he){return M(Ae(he),he)}),oe.f=ge,W.f=rt,X.f=v,q.f=k.f=S,Z.f=xe,P.f=function(he){return M($(he),he)},d&&(ze(Oe[Ie],"description",{configurable:!0,get:function(){return je(this).description}}),g||re(be,"propertyIsEnumerable",ge,{unsafe:!0}))),T({global:!0,wrap:!0,forced:!m,sham:!m},{Symbol:Oe}),fe(F(Xt),function(he){K(he)}),T({target:Te,stat:!0,forced:!m},{for:function(He){var Se;return He=String(He),y(Kt,He)?Kt[He]:(Se=Oe(He),Kt[He]=Se,$t[Se]=He,Se)},keyFor:function(he){if(!vt(he))throw TypeError(he+" is not a symbol");if(y($t,he))return $t[he]},useSetter:function(){Wt=!0},useSimple:function(){Wt=!1}}),T({target:"Object",stat:!0,forced:!m,sham:!d},{create:function(he,Se){return void 0===Se?z(he):E(z(he),Se)},defineProperty:rt,defineProperties:E,getOwnPropertyDescriptor:v}),T({target:"Object",stat:!0,forced:!m},{getOwnPropertyNames:S,getOwnPropertySymbols:xe}),T({target:"Object",stat:!0,forced:h(function(){Z.f(1)})},{getOwnPropertySymbols:function(he){return Z.f(N(he))}}),Ge&&T({target:"JSON",stat:!0,forced:!m||h(function(){var he=Oe();return"[null]"!=Ge([he])||"{}"!=Ge({a:he})||"{}"!=Ge(Object(he))})},{stringify:function(he,Se,He){for(var Je,ut=[he],Ot=1;Ot<arguments.length;)ut.push(arguments[Ot++]);if((x(Je=Se)||void 0!==he)&&!vt(he))return b(Se)||(Se=function(zt,Gt){if("function"==typeof Je&&(Gt=Je.call(this,zt,Gt)),!vt(Gt))return Gt}),ut[1]=Se,Ge.apply(null,ut)}}),Oe[Ie][we]||ie(Oe[Ie],we,Oe[Ie].valueOf),te(Oe,Te),pe[ve]=!0},{"../internals/an-object":10,"../internals/array-iteration":19,"../internals/create-non-enumerable-property":38,"../internals/create-property-descriptor":39,"../internals/define-well-known-symbol":42,"../internals/descriptors":43,"../internals/export":50,"../internals/fails":51,"../internals/get-built-in":57,"../internals/global":60,"../internals/has":61,"../internals/hidden-keys":62,"../internals/internal-state":71,"../internals/is-array":73,"../internals/is-object":75,"../internals/is-pure":76,"../internals/native-symbol":84,"../internals/object-create":91,"../internals/object-define-property":93,"../internals/object-get-own-property-descriptor":94,"../internals/object-get-own-property-names":96,"../internals/object-get-own-property-names-external":95,"../internals/object-get-own-property-symbols":97,"../internals/object-keys":100,"../internals/object-property-is-enumerable":101,"../internals/redefine":110,"../internals/set-to-string-tag":119,"../internals/shared":122,"../internals/shared-key":120,"../internals/to-indexed-object":136,"../internals/to-object":139,"../internals/to-primitive":142,"../internals/uid":147,"../internals/use-symbol-as-uid":148,"../internals/well-known-symbol":150,"../internals/well-known-symbol-wrapped":149}],213:[function(l,de,H){"use strict";var M=l("../internals/array-buffer-view-core"),E=l("../internals/array-copy-within"),v=M.aTypedArray;(0,M.exportTypedArrayMethod)("copyWithin",function(S,T){return E.call(v(this),S,T,2<arguments.length?arguments[2]:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-copy-within":14}],214:[function(l,de,H){"use strict";var M=l("../internals/array-buffer-view-core"),E=l("../internals/array-iteration").every,v=M.aTypedArray;(0,M.exportTypedArrayMethod)("every",function(S){return E(v(this),S,1<arguments.length?arguments[1]:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-iteration":19}],215:[function(l,de,H){"use strict";var M=l("../internals/array-buffer-view-core"),E=l("../internals/array-fill"),v=M.aTypedArray;(0,M.exportTypedArrayMethod)("fill",function(S){return E.apply(v(this),arguments)})},{"../internals/array-buffer-view-core":12,"../internals/array-fill":15}],216:[function(l,de,H){"use strict";var M=l("../internals/array-buffer-view-core"),E=l("../internals/array-iteration").filter,v=l("../internals/species-constructor"),S=M.aTypedArray,T=M.aTypedArrayConstructor;(0,M.exportTypedArrayMethod)("filter",function(C){for(var f=E(S(this),C,1<arguments.length?arguments[1]:void 0),g=(C=v(this,this.constructor),0),d=f.length,m=new(T(C))(d);g<d;)m[g]=f[g++];return m})},{"../internals/array-buffer-view-core":12,"../internals/array-iteration":19,"../internals/species-constructor":123}],217:[function(l,de,H){"use strict";var M=l("../internals/array-buffer-view-core"),E=l("../internals/array-iteration").findIndex,v=M.aTypedArray;(0,M.exportTypedArrayMethod)("findIndex",function(S){return E(v(this),S,1<arguments.length?arguments[1]:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-iteration":19}],218:[function(l,de,H){"use strict";var M=l("../internals/array-buffer-view-core"),E=l("../internals/array-iteration").find,v=M.aTypedArray;(0,M.exportTypedArrayMethod)("find",function(S){return E(v(this),S,1<arguments.length?arguments[1]:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-iteration":19}],219:[function(l,de,H){l("../internals/typed-array-constructor")("Float32",function(M){return function(E,v,S){return M(this,E,v,S)}})},{"../internals/typed-array-constructor":144}],220:[function(l,de,H){l("../internals/typed-array-constructor")("Float64",function(M){return function(E,v,S){return M(this,E,v,S)}})},{"../internals/typed-array-constructor":144}],221:[function(l,de,H){"use strict";var M=l("../internals/array-buffer-view-core"),E=l("../internals/array-iteration").forEach,v=M.aTypedArray;(0,M.exportTypedArrayMethod)("forEach",function(S){E(v(this),S,1<arguments.length?arguments[1]:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-iteration":19}],222:[function(l,de,H){"use strict";var M=l("../internals/array-buffer-view-core"),E=l("../internals/array-includes").includes,v=M.aTypedArray;(0,M.exportTypedArrayMethod)("includes",function(S){return E(v(this),S,1<arguments.length?arguments[1]:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-includes":18}],223:[function(l,de,H){"use strict";var M=l("../internals/array-buffer-view-core"),E=l("../internals/array-includes").indexOf,v=M.aTypedArray;(0,M.exportTypedArrayMethod)("indexOf",function(S){return E(v(this),S,1<arguments.length?arguments[1]:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-includes":18}],224:[function(l,de,H){l("../internals/typed-array-constructor")("Int16",function(M){return function(E,v,S){return M(this,E,v,S)}})},{"../internals/typed-array-constructor":144}],225:[function(l,de,H){l("../internals/typed-array-constructor")("Int32",function(M){return function(E,v,S){return M(this,E,v,S)}})},{"../internals/typed-array-constructor":144}],226:[function(E,de,H){"use strict";function M(){return v.call(C(this))}var d=E("../internals/global"),g=E("../internals/array-buffer-view-core"),f=E("../modules/es.array.iterator"),v=(E=E("../internals/well-known-symbol")("iterator"),f.values),S=f.keys,T=f.entries,C=g.aTypedArray;f=g.exportTypedArrayMethod,d=!!(g=(d=d.Uint8Array)&&d.prototype[E])&&("values"==g.name||null==g.name),f("entries",function(){return T.call(C(this))}),f("keys",function(){return S.call(C(this))}),f("values",M,!d),f(E,M,!d)},{"../internals/array-buffer-view-core":12,"../internals/global":60,"../internals/well-known-symbol":150,"../modules/es.array.iterator":165}],227:[function(E,de,H){"use strict";var M=(E=E("../internals/array-buffer-view-core")).aTypedArray,v=[].join;(E=E.exportTypedArrayMethod)("join",function(S){return v.apply(M(this),arguments)})},{"../internals/array-buffer-view-core":12}],228:[function(l,de,H){"use strict";var M=l("../internals/array-buffer-view-core"),E=l("../internals/array-last-index-of"),v=M.aTypedArray;(0,M.exportTypedArrayMethod)("lastIndexOf",function(S){return E.apply(v(this),arguments)})},{"../internals/array-buffer-view-core":12,"../internals/array-last-index-of":20}],229:[function(l,de,H){"use strict";var M=l("../internals/array-buffer-view-core"),E=l("../internals/array-iteration").map,v=l("../internals/species-constructor"),S=M.aTypedArray,T=M.aTypedArrayConstructor;(0,M.exportTypedArrayMethod)("map",function(C){return E(S(this),C,1<arguments.length?arguments[1]:void 0,function(f,g){return new(T(v(f,f.constructor)))(g)})})},{"../internals/array-buffer-view-core":12,"../internals/array-iteration":19,"../internals/species-constructor":123}],230:[function(l,de,H){"use strict";var M=l("../internals/array-buffer-view-core"),E=l("../internals/array-reduce").right,v=M.aTypedArray;(0,M.exportTypedArrayMethod)("reduceRight",function(S){return E(v(this),S,arguments.length,1<arguments.length?arguments[1]:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-reduce":24}],231:[function(l,de,H){"use strict";var M=l("../internals/array-buffer-view-core"),E=l("../internals/array-reduce").left,v=M.aTypedArray;(0,M.exportTypedArrayMethod)("reduce",function(S){return E(v(this),S,arguments.length,1<arguments.length?arguments[1]:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-reduce":24}],232:[function(E,de,H){"use strict";var M=(E=E("../internals/array-buffer-view-core")).aTypedArray,v=(E=E.exportTypedArrayMethod,Math.floor);E("reverse",function(){for(var S,T=M(this).length,C=v(T/2),f=0;f<C;)S=this[f],this[f++]=this[--T],this[T]=S;return this})},{"../internals/array-buffer-view-core":12}],233:[function(T,de,H){"use strict";var M=T("../internals/array-buffer-view-core"),E=T("../internals/to-length"),v=T("../internals/to-offset"),S=T("../internals/to-object"),C=(T=T("../internals/fails"),M.aTypedArray);(0,M.exportTypedArrayMethod)("set",function(f){C(this);var g=v(1<arguments.length?arguments[1]:void 0,1),d=this.length,m=S(f),p=E(m.length),h=0;if(d<p+g)throw RangeError("Wrong length");for(;h<p;)this[g+h]=m[h++]},T(function(){new Int8Array(1).set({})}))},{"../internals/array-buffer-view-core":12,"../internals/fails":51,"../internals/to-length":138,"../internals/to-object":139,"../internals/to-offset":140}],234:[function(E,de,H){"use strict";var T=E("../internals/array-buffer-view-core"),M=E("../internals/species-constructor"),v=(E=E("../internals/fails"),T.aTypedArray),S=T.aTypedArrayConstructor,C=[].slice;(T=T.exportTypedArrayMethod)("slice",function(f,g){for(var d=C.call(v(this),f,g),m=(f=M(this,this.constructor),0),p=d.length,h=new(S(f))(p);m<p;)h[m]=d[m++];return h},E(function(){new Int8Array(1).slice()}))},{"../internals/array-buffer-view-core":12,"../internals/fails":51,"../internals/species-constructor":123}],235:[function(l,de,H){"use strict";var M=l("../internals/array-buffer-view-core"),E=l("../internals/array-iteration").some,v=M.aTypedArray;(0,M.exportTypedArrayMethod)("some",function(S){return E(v(this),S,1<arguments.length?arguments[1]:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-iteration":19}],236:[function(E,de,H){"use strict";var M=(E=E("../internals/array-buffer-view-core")).aTypedArray,v=[].sort;(E=E.exportTypedArrayMethod)("sort",function(S){return v.call(M(this),S)})},{"../internals/array-buffer-view-core":12}],237:[function(l,de,H){"use strict";var M=l("../internals/array-buffer-view-core"),E=l("../internals/to-length"),v=l("../internals/to-absolute-index"),S=l("../internals/species-constructor"),T=M.aTypedArray;(0,M.exportTypedArrayMethod)("subarray",function(m,f){var g=T(this),d=g.length;return m=v(m,d),new(S(g,g.constructor))(g.buffer,g.byteOffset+m*g.BYTES_PER_ELEMENT,E((void 0===f?d:v(f,d))-m))})},{"../internals/array-buffer-view-core":12,"../internals/species-constructor":123,"../internals/to-absolute-index":134,"../internals/to-length":138}],238:[function(E,de,H){"use strict";var T=E("../internals/global"),M=E("../internals/array-buffer-view-core"),v=(E=E("../internals/fails"),T.Int8Array),S=M.aTypedArray,C=(T=M.exportTypedArrayMethod,[].toLocaleString),f=[].slice,g=!!v&&E(function(){C.call(new v(1))});T("toLocaleString",function(){return C.apply(g?f.call(S(this)):S(this),arguments)},E(function(){return[1,2].toLocaleString()!=new v([1,2]).toLocaleString()})||!E(function(){v.prototype.toLocaleString.call([1,2])}))},{"../internals/array-buffer-view-core":12,"../internals/fails":51,"../internals/global":60}],239:[function(E,de,H){"use strict";var M=E("../internals/array-buffer-view-core").exportTypedArrayMethod,T=E("../internals/fails"),v=(E=(E=E("../internals/global").Uint8Array)&&E.prototype||{},[].toString),S=[].join;T(function(){v.call({})})&&(v=function(){return S.call(this)}),M("toString",v,T=E.toString!=v)},{"../internals/array-buffer-view-core":12,"../internals/fails":51,"../internals/global":60}],240:[function(l,de,H){l("../internals/typed-array-constructor")("Uint16",function(M){return function(E,v,S){return M(this,E,v,S)}})},{"../internals/typed-array-constructor":144}],241:[function(l,de,H){l("../internals/typed-array-constructor")("Uint32",function(M){return function(E,v,S){return M(this,E,v,S)}})},{"../internals/typed-array-constructor":144}],242:[function(l,de,H){l("../internals/typed-array-constructor")("Uint8",function(M){return function(E,v,S){return M(this,E,v,S)}})},{"../internals/typed-array-constructor":144}],243:[function(l,de,H){l("../internals/typed-array-constructor")("Uint8",function(M){return function(E,v,S){return M(this,E,v,S)}},!0)},{"../internals/typed-array-constructor":144}],244:[function(y,D,H){"use strict";function M(N){return function(){return N(this,arguments.length?arguments[0]:void 0)}}var E,v,S,T,C,b=y("../internals/global"),f=y("../internals/redefine-all"),g=y("../internals/internal-metadata"),d=y("../internals/collection"),m=y("../internals/collection-weak"),p=y("../internals/is-object"),h=y("../internals/internal-state").enforce,x=(y=y("../internals/native-weak-map"),b=!b.ActiveXObject&&"ActiveXObject"in b,Object.isExtensible);D=D.exports=d("WeakMap",M,m),y&&b&&(E=m.getConstructor(M,"WeakMap",!0),g.REQUIRED=!0,v=(d=D.prototype).delete,S=d.has,T=d.get,C=d.set,f(d,{delete:function(N){var U;return p(N)&&!x(N)?((U=h(this)).frozen||(U.frozen=new E),v.call(this,N)||U.frozen.delete(N)):v.call(this,N)},has:function(N){var U;return p(N)&&!x(N)?((U=h(this)).frozen||(U.frozen=new E),S.call(this,N)||U.frozen.has(N)):S.call(this,N)},get:function(N){var U;return!p(N)||x(N)||((U=h(this)).frozen||(U.frozen=new E),S.call(this,N))?T.call(this,N):U.frozen.get(N)},set:function(N,U){var R;return!p(N)||x(N)||((R=h(this)).frozen||(R.frozen=new E),S.call(this,N))?C.call(this,N,U):R.frozen.set(N,U),this}}))},{"../internals/collection":32,"../internals/collection-weak":31,"../internals/global":60,"../internals/internal-metadata":70,"../internals/internal-state":71,"../internals/is-object":75,"../internals/native-weak-map":86,"../internals/redefine-all":109}],245:[function(l,de,H){var M,E=l("../internals/global"),v=l("../internals/dom-iterables"),S=l("../internals/array-for-each"),T=l("../internals/create-non-enumerable-property");for(M in v){var C;if((C=(C=E[M])&&C.prototype)&&C.forEach!==S)try{T(C,"forEach",S)}catch{C.forEach=S}}},{"../internals/array-for-each":16,"../internals/create-non-enumerable-property":38,"../internals/dom-iterables":45,"../internals/global":60}],246:[function(C,de,H){var M,E=C("../internals/global"),v=C("../internals/dom-iterables"),S=C("../modules/es.array.iterator"),T=C("../internals/create-non-enumerable-property"),f=(C=C("../internals/well-known-symbol"))("iterator"),g=C("toStringTag"),d=S.values;for(M in v){var m=E[M],p=m&&m.prototype;if(p){if(p[f]!==d)try{T(p,f,d)}catch{p[f]=d}if(p[g]||T(p,g,M),v[M])for(var h in S)if(p[h]!==S[h])try{T(p,h,S[h])}catch{p[h]=S[h]}}}},{"../internals/create-non-enumerable-property":38,"../internals/dom-iterables":45,"../internals/global":60,"../internals/well-known-symbol":150,"../modules/es.array.iterator":165}],247:[function(ve,de,H){"use strict";function M(Te){try{return decodeURIComponent(Te)}catch{return Te}}function E(Te){return K[Te]}function v(Te){return encodeURIComponent(Te).replace(P,E)}function S(Te){this.entries.length=0,te(this.entries,Te)}function T(Te,Ie){if(Te<Ie)throw TypeError("Not enough arguments")}function C(){b(this,C,W);var Te,Ie,we,Pe,je,be,Oe,Ge,Ke=0<arguments.length?arguments[0]:void 0,ze=[];if(ie(this,{type:W,entries:ze,updateURL:function(){},updateSearchParams:S}),void 0!==Ke)if(R(Ke))if("function"==typeof(Te=q(Ke)))for(we=(Ie=Te.call(Ke)).next;!(Pe=we.call(Ie)).done;){if((be=(je=(Pe=F(U(Pe.value))).next).call(Pe)).done||(Oe=je.call(Pe)).done||!je.call(Pe).done)throw TypeError("Expected sequence with length 2");ze.push({key:be.value+"",value:Oe.value+""})}else for(Ge in Ke)x(Ke,Ge)&&ze.push({key:Ge,value:Ke[Ge]+""});else te(ze,"string"==typeof Ke?"?"===Ke.charAt(0)?Ke.slice(1):Ke:Ke+"")}ve("../modules/es.array.iterator");var f=ve("../internals/export"),X=ve("../internals/get-built-in"),g=ve("../internals/native-url"),d=ve("../internals/redefine"),m=ve("../internals/redefine-all"),p=ve("../internals/set-to-string-tag"),h=ve("../internals/create-iterator-constructor"),y=ve("../internals/internal-state"),b=ve("../internals/an-instance"),x=ve("../internals/has"),D=ve("../internals/function-bind-context"),N=ve("../internals/classof"),U=ve("../internals/an-object"),R=ve("../internals/is-object"),L=ve("../internals/object-create"),z=ve("../internals/create-property-descriptor"),F=ve("../internals/get-iterator"),q=ve("../internals/get-iterator-method"),k=(ve=ve("../internals/well-known-symbol"),X("fetch")),Z=X("Headers"),W=(X=ve("iterator"),"URLSearchParams"),oe=W+"Iterator",ie=y.set,re=y.getterFor(W),le=y.getterFor(oe),pe=/\+/g,Ae=Array(4),$=function(Te){var Ie,we=Te.replace(pe," "),Pe=4;try{return decodeURIComponent(we)}catch{for(;Pe;)we=we.replace((Ie=Pe--,Ae[Ie-1]||(Ae[Ie-1]=RegExp("((?:%[\\da-f]{2}){"+Ie+"})","gi"))),M);return we}},P=/[!'()~]|%20/g,K={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+"},te=function(Te,Ie){if(Ie)for(var we,Pe=Ie.split("&"),je=0;je<Pe.length;)(we=Pe[je++]).length&&(we=we.split("="),Te.push({key:$(we.shift()),value:$(we.join("="))}))},fe=h(function(Te,Ie){ie(this,{type:oe,iterator:F(re(Te).entries),kind:Ie})},"Iterator",function(){var Ie,Te=(Ie=le(this)).kind,we=(Ie=Ie.iterator.next()).value;return Ie.done||(Ie.value="keys"===Te?we.key:"values"===Te?we.value:[we.key,we.value]),Ie});m(ve=C.prototype,{append:function(Te,Ie){T(arguments.length,2);var we=re(this);we.entries.push({key:Te+"",value:Ie+""}),we.updateURL()},delete:function(Te){T(arguments.length,1);for(var Ie=re(this),we=Ie.entries,Pe=Te+"",je=0;je<we.length;)we[je].key===Pe?we.splice(je,1):je++;Ie.updateURL()},get:function(Te){T(arguments.length,1);for(var Ie=re(this).entries,we=Te+"",Pe=0;Pe<Ie.length;Pe++)if(Ie[Pe].key===we)return Ie[Pe].value;return null},getAll:function(Te){T(arguments.length,1);for(var Ie=re(this).entries,we=Te+"",Pe=[],je=0;je<Ie.length;je++)Ie[je].key===we&&Pe.push(Ie[je].value);return Pe},has:function(Te){T(arguments.length,1);for(var Ie=re(this).entries,we=Te+"",Pe=0;Pe<Ie.length;)if(Ie[Pe++].key===we)return!0;return!1},set:function(Te,Ie){T(arguments.length,1);for(var we,Pe=re(this),je=Pe.entries,be=!1,Oe=Te+"",Ge=Ie+"",Ke=0;Ke<je.length;Ke++)(we=je[Ke]).key===Oe&&(be?je.splice(Ke--,1):(be=!0,we.value=Ge));be||je.push({key:Oe,value:Ge}),Pe.updateURL()},sort:function(){for(var Te,Ie,we=re(this),Pe=we.entries,je=Pe.slice(),be=Pe.length=0;be<je.length;be++){for(Te=je[be],Ie=0;Ie<be;Ie++)if(Pe[Ie].key>Te.key){Pe.splice(Ie,0,Te);break}Ie===be&&Pe.push(Te)}we.updateURL()},forEach:function(Te){for(var Ie,we=re(this).entries,Pe=D(Te,1<arguments.length?arguments[1]:void 0,3),je=0;je<we.length;)Pe((Ie=we[je++]).value,Ie.key,this)},keys:function(){return new fe(this,"keys")},values:function(){return new fe(this,"values")},entries:function(){return new fe(this,"entries")}},{enumerable:!0}),d(ve,X,ve.entries),d(ve,"toString",function(){for(var Te,Ie=re(this).entries,we=[],Pe=0;Pe<Ie.length;)Te=Ie[Pe++],we.push(v(Te.key)+"="+v(Te.value));return we.join("&")},{enumerable:!0}),p(C,W),f({global:!0,forced:!g},{URLSearchParams:C}),g||"function"!=typeof k||"function"!=typeof Z||f({global:!0,enumerable:!0,forced:!0},{fetch:function(je){var Ie,we,Pe;return je=[je],1<arguments.length&&(R(Ie=arguments[1])&&N(we=Ie.body)===W&&((Pe=Ie.headers?new Z(Ie.headers):new Z).has("content-type")||Pe.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"),Ie=L(Ie,{body:z(0,String(we)),headers:z(0,Pe)})),je.push(Ie)),k.apply(this,je)}}),de.exports={URLSearchParams:C,getState:re}},{"../internals/an-instance":9,"../internals/an-object":10,"../internals/classof":29,"../internals/create-iterator-constructor":37,"../internals/create-property-descriptor":39,"../internals/export":50,"../internals/function-bind-context":55,"../internals/get-built-in":57,"../internals/get-iterator":59,"../internals/get-iterator-method":58,"../internals/has":61,"../internals/internal-state":71,"../internals/is-object":75,"../internals/native-url":85,"../internals/object-create":91,"../internals/redefine":110,"../internals/redefine-all":109,"../internals/set-to-string-tag":119,"../internals/well-known-symbol":150,"../modules/es.array.iterator":165}],248:[function(F,de,H){"use strict";function M(Be){var xt,tn,St,br;if("number"==typeof Be){for(xt=[],tn=0;tn<4;tn++)xt.unshift(Be%256),Be=oe(Be/256);return xt.join(".")}if("object"!=typeof Be)return Be;for(xt="",St=Oe(Be),tn=0;tn<8;tn++)br&&0===Be[tn]||(br=br&&!1,St===tn?(xt+=tn?":":"::",br=!0):(xt+=Be[tn].toString(16),tn<7&&(xt+=":")));return"["+xt+"]"}function E(Be){return!Be.host||Be.cannotBeABaseURL||"file"==Be.scheme}function v(Be,xt,tn,St){var br,wt,Cr,nn=tn||vt,_r=0,rn="",wi=!1,Ai=!1,mi=!1;for(tn||(Be.scheme="",Be.username="",Be.password="",Be.host=null,Be.port=null,Be.path=[],Be.query=null,Be.fragment=null,Be.cannotBeABaseURL=!1,xt=xt.replace(Pe,"")),xt=xt.replace(je,""),br=N(xt);_r<=br.length;){switch(wt=br[_r],nn){case vt:if(!wt||!$.test(wt)){if(tn)return le;nn=ge;continue}rn+=wt.toLowerCase(),nn=rt;break;case rt:if(wt&&(P.test(wt)||"+"==wt||"-"==wt||"."==wt))rn+=wt.toLowerCase();else{if(":"!=wt){if(tn)return le;rn="",nn=ge,_r=0;continue}if(tn&&(ot(Be)!=x(_t,rn)||"file"==rn&&(Kt(Be)||null!==Be.port)||"file"==Be.scheme&&!Be.host))return;if(Be.scheme=rn,tn)return void(ot(Be)&&_t[Be.scheme]==Be.port&&(Be.port=null));rn="","file"==Be.scheme?nn=zn:ot(Be)&&St&&St.scheme==Be.scheme?nn=xe:ot(Be)?nn=Je:"/"==br[_r+1]?(nn=he,_r++):(Be.cannotBeABaseURL=!0,Be.path.push(""),nn=Xr)}break;case ge:if(!St||St.cannotBeABaseURL&&"#"!=wt)return le;if(St.cannotBeABaseURL&&"#"==wt){Be.scheme=St.scheme,Be.path=St.path.slice(),Be.query=St.query,Be.fragment="",Be.cannotBeABaseURL=!0,nn=Ti;break}nn="file"==St.scheme?zn:Se;continue;case xe:if("/"!=wt||"/"!=br[_r+1]){nn=Se;continue}nn=ut,_r++;break;case he:if("/"==wt){nn=Ot;break}nn=On;continue;case Se:if(Be.scheme=St.scheme,wt==C)Be.username=St.username,Be.password=St.password,Be.host=St.host,Be.port=St.port,Be.path=St.path.slice(),Be.query=St.query;else if("/"==wt||"\\"==wt&&ot(Be))nn=He;else if("?"==wt)Be.username=St.username,Be.password=St.password,Be.host=St.host,Be.port=St.port,Be.path=St.path.slice(),Be.query="",nn=Qi;else{if("#"!=wt){Be.username=St.username,Be.password=St.password,Be.host=St.host,Be.port=St.port,Be.path=St.path.slice(),Be.path.pop(),nn=On;continue}Be.username=St.username,Be.password=St.password,Be.host=St.host,Be.port=St.port,Be.path=St.path.slice(),Be.query=St.query,Be.fragment="",nn=Ti}break;case He:if(!ot(Be)||"/"!=wt&&"\\"!=wt){if("/"!=wt){Be.username=St.username,Be.password=St.password,Be.host=St.host,Be.port=St.port,nn=On;continue}nn=Ot}else nn=ut;break;case Je:if(nn=ut,"/"!=wt||"/"!=rn.charAt(_r+1))continue;_r++;break;case ut:if("/"==wt||"\\"==wt)break;nn=Ot;continue;case Ot:if("@"==wt){wi&&(rn="%40"+rn),wi=!0;for(var Wi=N(rn),Po=0;Po<Wi.length;Po++){var js=Wi[Po];":"!=js||mi?(js=et(js,qe),mi?Be.password+=js:Be.username+=js):mi=!0}rn=""}else if(wt==C||"/"==wt||"?"==wt||"#"==wt||"\\"==wt&&ot(Be)){if(wi&&""==rn)return re;_r-=N(rn).length+1,rn="",nn=zt}else rn+=wt;break;case zt:case Gt:if(tn&&"file"==Be.scheme){nn=_n;continue}if(":"!=wt||Ai){if(wt==C||"/"==wt||"?"==wt||"#"==wt||"\\"==wt&&ot(Be)){if(ot(Be)&&""==rn)return pe;if(tn&&""==rn&&(Kt(Be)||null!==Be.port))return;if(Cr=be(Be,rn))return Cr;if(rn="",nn=Fn,tn)return;continue}"["==wt?Ai=!0:"]"==wt&&(Ai=!1),rn+=wt}else{if(""==rn)return pe;if(Cr=be(Be,rn))return Cr;if(rn="",nn=cn,tn==Gt)return}break;case cn:if(!K.test(wt)){if(wt==C||"/"==wt||"?"==wt||"#"==wt||"\\"==wt&&ot(Be)||tn){if(""!=rn){var Ro=parseInt(rn,10);if(65535<Ro)return Ae;Be.port=ot(Be)&&Ro===_t[Be.scheme]?null:Ro,rn=""}if(tn)return;nn=Fn;continue}return Ae}rn+=wt;break;case zn:if(Be.scheme="file","/"==wt||"\\"==wt)nn=Nn;else{if(!St||"file"!=St.scheme){nn=On;continue}if(wt==C)Be.host=St.host,Be.path=St.path.slice(),Be.query=St.query;else if("?"==wt)Be.host=St.host,Be.path=St.path.slice(),Be.query="",nn=Qi;else{if("#"!=wt){Xt(br.slice(_r).join(""))||(Be.host=St.host,Be.path=St.path.slice(),ln(Be)),nn=On;continue}Be.host=St.host,Be.path=St.path.slice(),Be.query=St.query,Be.fragment="",nn=Ti}}break;case Nn:if("/"==wt||"\\"==wt){nn=_n;break}St&&"file"==St.scheme&&!Xt(br.slice(_r).join(""))&&($t(St.path[0],!0)?Be.path.push(St.path[0]):Be.host=St.host),nn=On;continue;case _n:if(wt==C||"/"==wt||"\\"==wt||"?"==wt||"#"==wt){if(!tn&&$t(rn))nn=On;else{if(""==rn){if(Be.host="",tn)return}else{if(Cr=be(Be,rn))return Cr;if("localhost"==Be.host&&(Be.host=""),tn)return;rn=""}nn=Fn}continue}rn+=wt;break;case Fn:if(ot(Be)){if(nn=On,"/"!=wt&&"\\"!=wt)continue}else if(tn||"?"!=wt)if(tn||"#"!=wt){if(wt!=C&&(nn=On,"/"!=wt))continue}else Be.fragment="",nn=Ti;else Be.query="",nn=Qi;break;case On:if(wt==C||"/"==wt||"\\"==wt&&ot(Be)||!tn&&("?"==wt||"#"==wt)){if(Ye(rn)?(ln(Be),"/"==wt||"\\"==wt&&ot(Be)||Be.path.push("")):Wt(rn)?"/"==wt||"\\"==wt&&ot(Be)||Be.path.push(""):("file"==Be.scheme&&!Be.path.length&&$t(rn)&&(Be.host&&(Be.host=""),rn=rn.charAt(0)+":"),Be.path.push(rn)),rn="","file"==Be.scheme&&(wt==C||"?"==wt||"#"==wt))for(;1<Be.path.length&&""===Be.path[0];)Be.path.shift();"?"==wt?(Be.query="",nn=Qi):"#"==wt&&(Be.fragment="",nn=Ti)}else rn+=et(wt,ze);break;case Xr:"?"==wt?(Be.query="",nn=Qi):"#"==wt?(Be.fragment="",nn=Ti):wt!=C&&(Be.path[0]+=et(wt,Ge));break;case Qi:tn||"#"!=wt?wt!=C&&("'"==wt&&ot(Be)?Be.query+="%27":Be.query+="#"==wt?"%23":et(wt,Ge)):(Be.fragment="",nn=Ti);break;case Ti:wt!=C&&(Be.fragment+=et(wt,Ke))}_r++}}function S(wt){var xt,tn,St=b(this,S,"URL"),br=1<arguments.length?arguments[1]:void 0,Cr=(wt=String(wt),X(St,{type:"URL"}));if(void 0!==br)if(br instanceof S)xt=W(br);else if(tn=v(xt={},String(br)))throw TypeError(tn);if(tn=v(Cr,wt,null,xt))throw TypeError(tn);var nn=Cr.searchParams=new k;(br=Z(nn)).updateSearchParams(Cr.query),br.updateURL=function(){Cr.query=String(nn)||null},m||(St.href=Jr.call(St),St.origin=Sr.call(St),St.protocol=Hi.call(St),St.username=Lr.call(St),St.password=Hr.call(St),St.host=es.call(St),St.hostname=Zl.call(St),St.port=Kl.call(St),St.pathname=fl.call(St),St.search=eu.call(St),St.searchParams=Jl.call(St),St.hash=Ls.call(St))}function T(Be,xt){return{get:Be,set:xt,configurable:!0,enumerable:!0}}F("../modules/es.string.iterator");var C,f,g,d=F("../internals/export"),m=F("../internals/descriptors"),p=F("../internals/native-url"),Rr=F("../internals/global"),h=F("../internals/object-define-properties"),y=F("../internals/redefine"),b=F("../internals/an-instance"),x=F("../internals/has"),D=F("../internals/object-assign"),N=F("../internals/array-from"),U=F("../internals/string-multibyte").codeAt,R=F("../internals/string-punycode-to-ascii"),L=F("../internals/set-to-string-tag"),z=F("../modules/web.url-search-params"),q=(F=F("../internals/internal-state"),Rr.URL),k=z.URLSearchParams,Z=z.getState,X=F.set,W=F.getterFor("URL"),oe=Math.floor,ie=Math.pow,re="Invalid authority",le="Invalid scheme",pe="Invalid host",Ae="Invalid port",$=/[A-Za-z]/,P=/[\d+-.A-Za-z]/,K=/\d/,te=/^(0x|0X)/,fe=/^[0-7]+$/,ve=/^\d+$/,Te=/^[\dA-Fa-f]+$/,Ie=/[\u0000\u0009\u000A\u000D #%/:?@[\\]]/,we=/[\u0000\u0009\u000A\u000D #/:?@[\\]]/,Pe=/^[\u0000-\u001F ]+|[\u0000-\u001F ]+$/g,je=/[\u0009\u000A\u000D]/g,be=function(Be,xt){var tn,St,br;if("["==xt.charAt(0))return"]"==xt.charAt(xt.length-1)&&(tn=function(wt){var wi,Ai,mi,Wi,Po,js,Ro,Cr=[0,0,0,0,0,0,0,0],nn=0,_r=null,rn=0,Fi=function(){return wt.charAt(rn)};if(":"==Fi()){if(":"!=wt.charAt(1))return;rn+=2,_r=++nn}for(;Fi();){if(8==nn)return;if(":"!=Fi()){for(wi=Ai=0;Ai<4&&Te.test(Fi());)wi=16*wi+parseInt(Fi(),16),rn++,Ai++;if("."==Fi()){if(0==Ai||(rn-=Ai,nn>6))return;for(mi=0;Fi();){if(Wi=null,mi>0){if(!("."==Fi()&&mi<4))return;rn++}if(!K.test(Fi()))return;for(;K.test(Fi());){if(Po=parseInt(Fi(),10),null===Wi)Wi=Po;else{if(0==Wi)return;Wi=10*Wi+Po}if(Wi>255)return;rn++}Cr[nn]=256*Cr[nn]+Wi,(2==++mi||4==mi)&&nn++}if(4!=mi)return;break}if(":"==Fi()){if(rn++,!Fi())return}else if(Fi())return;Cr[nn++]=wi}else{if(null!==_r)return;rn++,_r=++nn}}if(null!==_r)for(js=nn-_r,nn=7;0!=nn&&js>0;)Ro=Cr[nn],Cr[nn--]=Cr[_r+js-1],Cr[_r+--js]=Ro;else if(8!=nn)return;return Cr}(xt.slice(1,-1)))?void(Be.host=tn):pe;if(ot(Be))return xt=R(xt),Ie.test(xt)||null===(tn=function(wt){var nn,_r,rn,wi,Ai,mi,Wi,Cr=wt.split(".");if(Cr.length&&""==Cr[Cr.length-1]&&Cr.pop(),(nn=Cr.length)>4)return wt;for(_r=[],rn=0;rn<nn;rn++){if(""==(wi=Cr[rn]))return wt;if(Ai=10,wi.length>1&&"0"==wi.charAt(0)&&(Ai=te.test(wi)?16:8,wi=wi.slice(8==Ai?1:2)),""===wi)mi=0;else{if(!(10==Ai?ve:8==Ai?fe:Te).test(wi))return wt;mi=parseInt(wi,Ai)}_r.push(mi)}for(rn=0;rn<nn;rn++)if(mi=_r[rn],rn==nn-1){if(mi>=ie(256,5-nn))return null}else if(mi>255)return null;for(Wi=_r.pop(),rn=0;rn<_r.length;rn++)Wi+=_r[rn]*ie(256,3-rn);return Wi}(xt))?pe:void(Be.host=tn);if(we.test(xt))return pe;for(tn="",St=N(xt),br=0;br<St.length;br++)tn+=et(St[br],Ge);Be.host=tn},Oe=function(Be){for(var xt=null,tn=1,St=null,br=0,wt=0;wt<8;wt++)0!==Be[wt]?(tn<br&&(xt=St,tn=br),St=null,br=0):(null===St&&(St=wt),++br);return tn<br&&(xt=St,tn=br),xt},Ge={},Ke=D({},Ge,{" ":1,'"':1,"<":1,">":1,"`":1}),ze=D({},Ke,{"#":1,"?":1,"{":1,"}":1}),qe=D({},ze,{"/":1,":":1,";":1,"=":1,"@":1,"[":1,"\\":1,"]":1,"^":1,"|":1}),et=function(Be,xt){var tn=U(Be,0);return 32<tn&&tn<127&&!x(xt,Be)?Be:encodeURIComponent(Be)},_t={ftp:21,file:null,http:80,https:443,ws:80,wss:443},ot=function(Be){return x(_t,Be.scheme)},Kt=function(Be){return""!=Be.username||""!=Be.password},$t=function(Be,xt){return 2==Be.length&&$.test(Be.charAt(0))&&(":"==(Be=Be.charAt(1))||!xt&&"|"==Be)},Xt=function(Be){return 1<Be.length&&$t(Be.slice(0,2))&&(2==Be.length||"/"===(Be=Be.charAt(2))||"\\"===Be||"?"===Be||"#"===Be)},ln=function(Be){var xt=Be.path,tn=xt.length;!tn||"file"==Be.scheme&&1==tn&&$t(xt[0],!0)||xt.pop()},Wt=function(Be){return"."===Be||"%2e"===Be.toLowerCase()},Ye=function(Be){return".."===(Be=Be.toLowerCase())||"%2e."===Be||".%2e"===Be||"%2e%2e"===Be},vt={},rt={},ge={},xe={},he={},Se={},He={},Je={},ut={},Ot={},zt={},Gt={},cn={},zn={},Nn={},_n={},Fn={},On={},Xr={},Qi={},Ti={},Jr=(Rr=S.prototype,function(){var Be=W(this),xt=Be.scheme,tn=Be.username,St=Be.password,br=Be.host,wt=Be.port,Cr=Be.path,nn=Be.query,_r=Be.fragment,rn=xt+":";return null!==br?(rn+="//",Kt(Be)&&(rn+=tn+(St?":"+St:"")+"@"),rn+=M(br),null!==wt&&(rn+=":"+wt)):"file"==xt&&(rn+="//"),rn+=Be.cannotBeABaseURL?Cr[0]:Cr.length?"/"+Cr.join("/"):"",null!==nn&&(rn+="?"+nn),null!==_r&&(rn+="#"+_r),rn}),Sr=function(){var Be=W(this),xt=Be.scheme,tn=Be.port;if("blob"==xt)try{return new URL(xt.path[0]).origin}catch{return"null"}return"file"!=xt&&ot(Be)?xt+"://"+M(Be.host)+(null!==tn?":"+tn:""):"null"},Hi=function(){return W(this).scheme+":"},Lr=function(){return W(this).username},Hr=function(){return W(this).password},es=function(){var Be=(xt=W(this)).host,xt=xt.port;return null===Be?"":null===xt?M(Be):M(Be)+":"+xt},Zl=function(){var Be=W(this).host;return null===Be?"":M(Be)},Kl=function(){var Be=W(this).port;return null===Be?"":String(Be)},fl=function(){var Be=W(this),xt=Be.path;return Be.cannotBeABaseURL?xt[0]:xt.length?"/"+xt.join("/"):""},eu=function(){var Be=W(this).query;return Be?"?"+Be:""},Jl=function(){return W(this).searchParams},Ls=function(){var Be=W(this).fragment;return Be?"#"+Be:""};m&&h(Rr,{href:T(Jr,function(tn){var xt=W(this);if(tn=v(xt,tn=String(tn)))throw TypeError(tn);Z(xt.searchParams).updateSearchParams(xt.query)}),origin:T(Sr),protocol:T(Hi,function(Be){v(W(this),String(Be)+":",vt)}),username:T(Lr,function(Be){var xt=W(this),tn=N(String(Be));if(!E(xt)){xt.username="";for(var St=0;St<tn.length;St++)xt.username+=et(tn[St],qe)}}),password:T(Hr,function(Be){var xt=W(this),tn=N(String(Be));if(!E(xt)){xt.password="";for(var St=0;St<tn.length;St++)xt.password+=et(tn[St],qe)}}),host:T(es,function(Be){var xt=W(this);xt.cannotBeABaseURL||v(xt,String(Be),zt)}),hostname:T(Zl,function(Be){var xt=W(this);xt.cannotBeABaseURL||v(xt,String(Be),Gt)}),port:T(Kl,function(Be){var xt=W(this);E(xt)||(""==(Be=String(Be))?xt.port=null:v(xt,Be,cn))}),pathname:T(fl,function(Be){var xt=W(this);xt.cannotBeABaseURL||(xt.path=[],v(xt,Be+"",Fn))}),search:T(eu,function(Be){var xt=W(this);""==(Be=String(Be))?xt.query=null:("?"==Be.charAt(0)&&(Be=Be.slice(1)),xt.query="",v(xt,Be,Qi)),Z(xt.searchParams).updateSearchParams(xt.query)}),searchParams:T(Jl),hash:T(Ls,function(Be){var xt=W(this);""==(Be=String(Be))?xt.fragment=null:("#"==Be.charAt(0)&&(Be=Be.slice(1)),xt.fragment="",v(xt,Be,Ti))})}),y(Rr,"toJSON",function(){return Jr.call(this)},{enumerable:!0}),y(Rr,"toString",function(){return Jr.call(this)},{enumerable:!0}),q&&(g=q.revokeObjectURL,(f=q.createObjectURL)&&y(S,"createObjectURL",function(Be){return f.apply(q,arguments)}),g&&y(S,"revokeObjectURL",function(Be){return g.apply(q,arguments)})),L(S,"URL"),d({global:!0,forced:!p,sham:!m},{URL:S})},{"../internals/an-instance":9,"../internals/array-from":17,"../internals/descriptors":43,"../internals/export":50,"../internals/global":60,"../internals/has":61,"../internals/internal-state":71,"../internals/native-url":85,"../internals/object-assign":90,"../internals/object-define-properties":92,"../internals/redefine":110,"../internals/set-to-string-tag":119,"../internals/string-multibyte":125,"../internals/string-punycode-to-ascii":128,"../modules/es.string.iterator":200,"../modules/web.url-search-params":247}],249:[function(l,de,H){"use strict";de.exports=l("./").polyfill()},{"./":250}],250:[function(l,de,H){(function(M,E){var S;S=function(){"use strict";function T(be){return"function"==typeof be}var C=Array.isArray||function(be){return"[object Array]"===Object.prototype.toString.call(be)},f=0,g=void 0,d=void 0,m=function(be,Oe){D[f]=be,D[f+1]=Oe,2===(f+=2)&&(d?d(N):k())},p=typeof window<"u"?window:void 0,h=(h=p||{}).MutationObserver||h.WebKitMutationObserver,y=typeof self>"u"&&void 0!==M&&"[object process]"==={}.toString.call(M),b=typeof Uint8ClampedArray<"u"&&typeof importScripts<"u"&&typeof MessageChannel<"u";function x(){var be=setTimeout;return function(){return be(N,1)}}var D=new Array(1e3);function N(){for(var be=0;be<f;be+=2)(0,D[be])(D[be+1]),D[be]=void 0,D[be+1]=void 0;f=0}var R,L,z,k=void 0;function F(be,Oe){var Ge,Ke=this,ze=new this.constructor(X),qe=(void 0===ze[Z]&&Te(ze),Ke._state);return qe?(Ge=arguments[qe-1],m(function(){return fe(qe,ze,Ge,Ke._result)})):K(Ke,ze,be,Oe),ze}function q(be){var Oe;return be&&"object"==typeof be&&be.constructor===this?be:(pe(Oe=new this(X),be),Oe)}k=y?function(){return M.nextTick(N)}:h?(L=0,y=new h(N),z=document.createTextNode(""),y.observe(z,{characterData:!0}),function(){z.data=L=++L%2}):b?((R=new MessageChannel).port1.onmessage=N,function(){return R.port2.postMessage(0)}):(void 0===p&&"function"==typeof l?function U(){try{var be=Function("return this")().require("vertx");return void 0!==(g=be.runOnLoop||be.runOnContext)?function(){g(N)}:x()}catch{return x()}}:x)();var Z=Math.random().toString(36).substring(2);function X(){}var W=void 0,oe=1,ie=2;function re(be,Oe,Ge){m(function(Ke){var ze=!1,qe=function(et,_t,ot,Kt){try{et.call(_t,function(et){ze||(ze=!0,(Oe!==et?pe:$)(Ke,et))},function(et){ze||(ze=!0,P(Ke,et))})}catch($t){return $t}}(Ge,Oe);!ze&&qe&&(ze=!0,P(Ke,qe))},be)}function le(be,Oe,Ge){var Ke,ze;Oe.constructor===be.constructor&&Ge===F&&Oe.constructor.resolve===q?(Ke=be,(ze=Oe)._state===oe?$(Ke,ze._result):ze._state===ie?P(Ke,ze._result):K(ze,void 0,function(qe){return pe(Ke,qe)},function(qe){return P(Ke,qe)})):void 0!==Ge&&T(Ge)?re(be,Oe,Ge):$(be,Oe)}function pe(be,Oe){if(be===Oe)P(be,new TypeError("You cannot resolve a promise with itself"));else if(Ge=typeof Oe,null===Oe||"object"!=Ge&&"function"!=Ge)$(be,Oe);else{Ge=void 0;try{Ge=Oe.then}catch(Ke){return void P(be,Ke)}le(be,Oe,Ge)}var Ge}function Ae(be){be._onerror&&be._onerror(be._result),te(be)}function $(be,Oe){be._state===W&&(be._result=Oe,be._state=oe,0!==be._subscribers.length&&m(te,be))}function P(be,Oe){be._state===W&&(be._state=ie,be._result=Oe,m(Ae,be))}function K(be,Oe,Ge,Ke){var ze=be._subscribers,qe=ze.length;be._onerror=null,ze[qe]=Oe,ze[qe+oe]=Ge,ze[qe+ie]=Ke,0===qe&&be._state&&m(te,be)}function te(be){var Oe=be._subscribers,Ge=be._state;if(0!==Oe.length){for(var Ke,ze=void 0,qe=be._result,et=0;et<Oe.length;et+=3)ze=Oe[et+Ge],(Ke=Oe[et])?fe(Ge,Ke,ze,qe):ze(qe);be._subscribers.length=0}}function fe(be,Oe,Ge,Ke){var ze=T(Ge),qe=void 0,et=void 0,_t=!0;if(ze){try{qe=Ge(Ke)}catch(ot){_t=!1,et=ot}if(Oe===qe)return void P(Oe,new TypeError("A promises callback cannot return that same promise."))}else qe=Ke;Oe._state===W&&(ze&&_t?pe(Oe,qe):!1===_t?P(Oe,et):be===oe?$(Oe,qe):be===ie&&P(Oe,qe))}var ve=0;function Te(be){be[Z]=ve++,be._state=void 0,be._result=void 0,be._subscribers=[]}we.prototype._enumerate=function(be){for(var Oe=0;this._state===W&&Oe<be.length;Oe++)this._eachEntry(be[Oe],Oe)},we.prototype._eachEntry=function(be,Oe){var Ge=this._instanceConstructor,Ke=Ge.resolve;if(Ke===q){var ze,qe=void 0,et=void 0,_t=!1;try{qe=be.then}catch(ot){_t=!0,et=ot}qe===F&&be._state!==W?this._settledAt(be._state,Oe,be._result):"function"!=typeof qe?(this._remaining--,this._result[Oe]=be):Ge===Pe?(ze=new Ge(X),_t?P(ze,et):le(ze,be,qe),this._willSettleAt(ze,Oe)):this._willSettleAt(new Ge(function(ot){return ot(be)}),Oe)}else this._willSettleAt(Ke(be),Oe)},we.prototype._settledAt=function(be,Oe,Ge){var Ke=this.promise;Ke._state===W&&(this._remaining--,be===ie?P(Ke,Ge):this._result[Oe]=Ge),0===this._remaining&&$(Ke,this._result)},we.prototype._willSettleAt=function(be,Oe){var Ge=this;K(be,void 0,function(Ke){return Ge._settledAt(oe,Oe,Ke)},function(Ke){return Ge._settledAt(ie,Oe,Ke)})};var Ie=we;function we(be,Oe){this._instanceConstructor=be,this.promise=new be(X),this.promise[Z]||Te(this.promise),C(Oe)?(this.length=Oe.length,this._remaining=Oe.length,this._result=new Array(this.length),0!==this.length&&(this.length=this.length||0,this._enumerate(Oe),0!==this._remaining)||$(this.promise,this._result)):P(this.promise,new Error("Array Methods must be provided an Array"))}je.prototype.catch=function(be){return this.then(null,be)},je.prototype.finally=function(be){var Oe=this.constructor;return T(be)?this.then(function(Ge){return Oe.resolve(be()).then(function(){return Ge})},function(Ge){return Oe.resolve(be()).then(function(){throw Ge})}):this.then(be,be)};var Pe=je;function je(be){if(this[Z]=ve++,this._result=this._state=void 0,this._subscribers=[],X!==be){if("function"!=typeof be)throw new TypeError("You must pass a resolver function as the first argument to the promise constructor");if(!(this instanceof je))throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.");var Oe=this;try{be(function(Ge){pe(Oe,Ge)},function(Ge){P(Oe,Ge)})}catch(Ge){P(Oe,Ge)}}}return Pe.prototype.then=F,Pe.all=function(be){return new Ie(this,be).promise},Pe.race=function(be){var Oe=this;return C(be)?new Oe(function(Ge,Ke){for(var ze=be.length,qe=0;qe<ze;qe++)Oe.resolve(be[qe]).then(Ge,Ke)}):new Oe(function(Ge,Ke){return Ke(new TypeError("You must pass an array to race."))})},Pe.resolve=q,Pe.reject=function(be){var Oe=new this(X);return P(Oe,be),Oe},Pe._setScheduler=function(be){d=be},Pe._setAsap=function(be){m=be},Pe._asap=m,Pe.polyfill=function(){var be=void 0;if(void 0!==E)be=E;else if(typeof self<"u")be=self;else try{be=Function("return this")()}catch{throw new Error("polyfill failed because global object is unavailable in this environment")}var Oe=be.Promise;if(Oe){var Ge=null;try{Ge=Object.prototype.toString.call(Oe.resolve())}catch{}if("[object Promise]"===Ge&&!Oe.cast)return}be.Promise=Pe},Pe.Promise=Pe},"object"==typeof H&&void 0!==de?de.exports=S():this.ES6Promise=S()}).call(this,l("_process"),typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{_process:259}],251:[function(l,de,H){var E;E=function(v,S){"use strict";function f(d){try{delete window[d]}catch{window[d]=void 0}}function g(d){(d=document.getElementById(d))&&document.getElementsByTagName("head")[0].removeChild(d)}S.exports=function(d){var m=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],p=d,h=m.timeout||5e3,y=m.jsonpCallback||"callback",b=void 0;return new Promise(function(x,D){var N=m.jsonpCallbackFunction||"jsonp_"+Date.now()+"_"+Math.ceil(1e5*Math.random()),U=y+"_"+N,R=(window[N]=function(L){x({ok:!0,json:function(){return Promise.resolve(L)}}),b&&clearTimeout(b),g(U),f(N)},p+=-1===p.indexOf("?")?"?":"&",document.createElement("script"));R.setAttribute("src",""+p+y+"="+N),m.charset&&R.setAttribute("charset",m.charset),R.id=U,document.getElementsByTagName("head")[0].appendChild(R),b=setTimeout(function(){D(new Error("JSONP request to "+d+" timed out")),f(N),g(U),window[N]=function(){f(N)}},h),R.onerror=function(){D(new Error("JSONP request to "+d+" failed")),f(N),g(U),b&&clearTimeout(b)}})}},void 0!==H&&void 0!==de?E(0,de):(E(E={exports:{}},E),this.fetchJsonp=E.exports)},{}],252:[function(l,de,H){var M=function(E){"use strict";var v,S,T,C,f,g,m,p,h,y;if(!(void 0===E||typeof navigator<"u"&&/MSIE [1-9]\./.test(navigator.userAgent)))return v=function(){return E.URL||E.webkitURL||E},S=(y=E.document).createElementNS("http://www.w3.org/1999/xhtml","a"),T="download"in S,C=/constructor/i.test(E.HTMLElement)||E.safari,f=/CriOS\/[\d]+/.test(navigator.userAgent),g=function(b){(E.setImmediate||E.setTimeout)(function(){throw b},0)},4e4,m=function(b){setTimeout(function(){"string"==typeof b?v().revokeObjectURL(b):b.remove()},4e4)},p=function(b){return/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(b.type)?new Blob([String.fromCharCode(65279),b],{type:b.type}):b},y=(h=function(b,x,L){L||(b=p(b));var N,U,R=this,z=(L="application/octet-stream"===b.type,function(){for(var F=R,q="writestart progress write writeend".split(" "),Z=(q=[].concat(q)).length;Z--;){var X=F["on"+q[Z]];if("function"==typeof X)try{X.call(F,F)}catch(W){g(W)}}});R.readyState=R.INIT,T?(N=v().createObjectURL(b),setTimeout(function(){var F,q;S.href=N,S.download=x,F=S,q=new MouseEvent("click"),F.dispatchEvent(q),z(),m(N),R.readyState=R.DONE})):(f||L&&C)&&E.FileReader?((U=new FileReader).onloadend=function(){var F=f?U.result:U.result.replace(/^data:[^;]*;/,"data:attachment/file;");E.open(F,"_blank")||(E.location.href=F),F=void 0,R.readyState=R.DONE,z()},U.readAsDataURL(b),R.readyState=R.INIT):(N=N||v().createObjectURL(b),!L&&E.open(N,"_blank")||(E.location.href=N),R.readyState=R.DONE,z(),m(N))}).prototype,typeof navigator<"u"&&navigator.msSaveOrOpenBlob?function(b,x,D){return x=x||b.name||"download",D||(b=p(b)),navigator.msSaveOrOpenBlob(b,x)}:(y.abort=function(){},y.readyState=y.INIT=0,y.WRITING=1,y.DONE=2,y.error=y.onwritestart=y.onprogress=y.onwrite=y.onabort=y.onerror=y.onwriteend=null,function(b,x,D){return new h(b,x||b.name||"download",D)})}(typeof self<"u"&&self||typeof window<"u"&&window||this.content);void 0!==de&&de.exports&&(de.exports.saveAs=M)},{}],253:[function(l,de,H){var M,E=Object.defineProperty,v=(E(H,"__esModule",{value:!0}),H),S={GIFEncoder:()=>z,applyPalette:()=>function(W,oe,ie="rgb565"){if(!W||!W.buffer)throw new Error("quantize() expected RGBA Uint8Array data");if(!(W instanceof Uint8Array||W instanceof Uint8ClampedArray))throw new Error("quantize() expected RGBA Uint8Array data");if(256<oe.length)throw new Error("applyPalette() only works with 256 colors or less");const re=new Uint32Array(W.buffer),le=re.length,pe="rgb444"===ie?4096:65536,Ae=new Uint8Array(le),$=new Array(pe);if("rgba4444"===ie)for(let je=0;je<le;je++){var fe,P=(fe=re[je])>>24&255,K=fe>>16&255,te=fe>>8&255,ve=(ve=m(fe&=255,te,K,P))in $?$[ve]:$[ve]=function(be,Oe,Ge,Ke,ze){let qe=0,et=1e100;for(let $t=0;$t<ze.length;$t++){var ot=ze[$t],Kt=U(ot[3]-Ke);Kt>et||(Kt+=U(ot[0]-be))>et||(Kt+=U(ot[1]-Oe))>et||(Kt+=U(ot[2]-Ge))>et||(et=Kt,qe=$t)}return qe}(fe,te,K,P,oe);Ae[je]=ve}else{const je="rgb444"===ie?p:d;for(let be=0;be<le;be++){var we,Te=(we=re[be])>>16&255,Ie=we>>8&255,Pe=(Pe=je(we&=255,Ie,Te))in $?$[Pe]:$[Pe]=function(Oe,Ge,Ke,ze){let qe=0,et=1e100;for(let $t=0;$t<ze.length;$t++){var ot=ze[$t],Kt=U(ot[0]-Oe);Kt>et||(Kt+=U(ot[1]-Ge))>et||(Kt+=U(ot[2]-Ke))>et||(et=Kt,qe=$t)}return qe}(we,Ie,Te,oe);Ae[be]=Pe}}return Ae},default:()=>X,nearestColor:()=>function(W,oe,ie=D){return W[R(W,oe,ie)]},nearestColorIndex:()=>R,nearestColorIndexWithDistance:()=>L,prequantize:()=>function(W,{roundRGB:oe=5,roundAlpha:ie=10,oneBitAlpha:re=null}={}){const le=new Uint32Array(W.buffer);for(let K=0;K<le.length;K++){let te=(P=le[K])>>24&255;var Ae=P>>16&255,$=P>>8&255,P=255&P;te=N(te,ie),re&&(te=te<=("number"==typeof re?re:127)?0:255),P=N(P,oe),$=N($,oe),Ae=N(Ae,oe),le[K]=te<<24|Ae<<16|$<<8|P<<0}},quantize:()=>function(W,oe,ie={}){var{format:re="rgb565",clearAlpha:le=!0,clearAlphaColor:pe=0,clearAlphaThreshold:Ae=0,oneBitAlpha:$=!1}=ie;if(!W||!W.buffer)throw new Error("quantize() expected RGBA Uint8Array data");if(!(W instanceof Uint8Array||W instanceof Uint8ClampedArray))throw new Error("quantize() expected RGBA Uint8Array data");W=new Uint32Array(W.buffer);let P=!1!==ie.useSqrt;const K="rgba4444"===re,te=function(Xt,ln){const Ye=new Array("rgb444"===ln?4096:65536),vt=Xt.length;if("rgba4444"===ln)for(let Nn=0;Nn<vt;++Nn){var he,rt=(he=Xt[Nn])>>24&255,ge=he>>16&255,xe=he>>8&255,Se=m(he&=255,xe,ge,rt);let _n=Se in Ye?Ye[Se]:Ye[Se]={ac:0,rc:0,gc:0,bc:0,cnt:0,nn:0,fw:0,bk:0,tm:0,mtm:0,err:0};_n.rc+=he,_n.gc+=xe,_n.bc+=ge,_n.ac+=rt,_n.cnt++}else if("rgb444"===ln)for(let Nn=0;Nn<vt;++Nn){var ut,He=(ut=Xt[Nn])>>16&255,Je=ut>>8&255,Ot=p(ut&=255,Je,He);let _n=Ot in Ye?Ye[Ot]:Ye[Ot]={ac:0,rc:0,gc:0,bc:0,cnt:0,nn:0,fw:0,bk:0,tm:0,mtm:0,err:0};_n.rc+=ut,_n.gc+=Je,_n.bc+=He,_n.cnt++}else for(let Nn=0;Nn<vt;++Nn){var cn,zt=(cn=Xt[Nn])>>16&255,Gt=cn>>8&255,zn=d(cn&=255,Gt,zt);let _n=zn in Ye?Ye[zn]:Ye[zn]={ac:0,rc:0,gc:0,bc:0,cnt:0,nn:0,fw:0,bk:0,tm:0,mtm:0,err:0};_n.rc+=cn,_n.gc+=Gt,_n.bc+=zt,_n.cnt++}return Ye}(W,re),fe=te.length,ve=fe-1,Te=new Uint32Array(fe+1);for(var Ie=0,we=0;we<fe;++we){const Xt=te[we];null!=Xt&&(ot=1/Xt.cnt,K&&(Xt.ac*=ot),Xt.rc*=ot,Xt.gc*=ot,Xt.bc*=ot,te[Ie++]=Xt)}var Pe,je,be;for(y(oe)/Ie<.022&&(P=!1),we=0;we<Ie-1;++we)te[we].fw=we+1,te[we+1].bk=we,P&&(te[we].cnt=Math.sqrt(te[we].cnt));for(P&&(te[we].cnt=Math.sqrt(te[we].cnt)),we=0;we<Ie;++we){b(te,we,!1);var Oe=te[we].err;for(je=++Te[0];1<je&&!(te[Pe=Te[be=je>>1]].err<=Oe);je=be)Te[je]=Pe;Te[je]=we}var Ge,Ke=Ie-oe;for(we=0;we<Ke;){for(;;){var ze=Te[1];if((Ge=te[ze]).tm>=Ge.mtm&&te[Ge.nn].mtm<=Ge.tm)break;for(Ge.mtm==ve?ze=Te[1]=Te[Te[0]--]:(b(te,ze,!1),Ge.tm=we),Oe=te[ze].err,je=1;(be=je+je)<=Te[0]&&(be<Te[0]&&te[Te[be]].err>te[Te[be+1]].err&&be++,!(Oe<=te[Pe=Te[be]].err));je=be)Te[je]=Pe;Te[je]=ze}var qe=te[Ge.nn],et=Ge.cnt,_t=qe.cnt,ot=1/(et+_t);K&&(Ge.ac=ot*(et*Ge.ac+_t*qe.ac)),Ge.rc=ot*(et*Ge.rc+_t*qe.rc),Ge.gc=ot*(et*Ge.gc+_t*qe.gc),Ge.bc=ot*(et*Ge.bc+_t*qe.bc),Ge.cnt+=qe.cnt,Ge.mtm=++we,te[qe.bk].fw=qe.fw,te[qe.fw].bk=qe.bk,qe.mtm=ve}let Kt=[];for(we=0;;0){let Xt=h(Math.round(te[we].rc),0,255),ln=h(Math.round(te[we].gc),0,255),Wt=h(Math.round(te[we].bc),0,255),Ye=255;K&&(Ye=h(Math.round(te[we].ac),0,255),$&&(Ye=Ye<=($t="number"==typeof $?$:127)?0:255),le&&Ye<=Ae&&(Xt=ln=Wt=pe,Ye=0));var $t=K?[Xt,ln,Wt,Ye]:[Xt,ln,Wt];if(function(vt,rt){for(let he=0;he<vt.length;he++){var ge=(xe=vt[he])[0]===rt[0]&&xe[1]===rt[1]&&xe[2]===rt[2],xe=!(4<=xe.length&&4<=rt.length)||xe[3]===rt[3];if(ge&&xe)return!0}return!1}(Kt,$t)||Kt.push($t),0==(we=te[we].fw))break}return Kt},snapColorsToPalette:()=>function(W,oe,ie=5){if(W.length&&oe.length){var re=W.map(P=>P.slice(0,3)),le=ie*ie,pe=W[0].length;for(let P=0;P<oe.length;P++){let K=oe[P];K=K.length<pe?[K[0],K[1],K[2],255]:K.length>pe?K.slice(0,3):K.slice();var $,Ae=($=L(re,K.slice(0,3),D))[0];0<($=$[1])&&$<=le&&(W[Ae]=K)}}}};for(M in S)E(v,M,{get:S[M],enumerable:!0});var T={signature:"GIF",version:"89a",trailer:59,extensionIntroducer:33,applicationExtensionLabel:255,graphicControlExtensionLabel:249,imageSeparator:44,signatureSize:3,versionSize:3,globalColorTableFlagMask:128,colorResolutionMask:112,sortFlagMask:8,globalColorTableSizeMask:7,applicationIdentifierSize:8,applicationAuthCodeSize:3,disposalMethodMask:28,userInputFlagMask:2,transparentColorFlagMask:1,localColorTableFlagMask:128,interlaceFlagMask:64,idSortFlagMask:32,localColorTableSizeMask:7};function C(W=256){let oe=0,ie=new Uint8Array(W);return{get buffer(){return ie.buffer},reset(){oe=0},bytesView:()=>ie.subarray(0,oe),bytes:()=>ie.slice(0,oe),writeByte(le){re(oe+1),ie[oe]=le,oe++},writeBytes(le,pe=0,Ae=le.length){re(oe+Ae);for(let $=0;$<Ae;$++)ie[oe++]=le[$+pe]},writeBytesView(le,pe=0,Ae=le.byteLength){re(oe+Ae),ie.set(le.subarray(pe,pe+Ae),oe),oe+=Ae}};function re(le){var pe=ie.length;if(!(le<=pe)){le=Math.max(le,pe*(pe<1048576?2:1.125)>>>0),0!=pe&&(le=Math.max(le,256));const Ae=ie;ie=new Uint8Array(le),0<oe&&ie.set(Ae.subarray(0,oe),0)}}}var f=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535],g=function(W,oe,ie,K,le=C(512),pe=new Uint8Array(256),Ae=new Int32Array(5003),$=new Int32Array(5003)){var P=Ae.length;K=Math.max(2,K),pe.fill(0),$.fill(0),Ae.fill(-1);let te=0,fe=0;var ve=K+1;const Te=ve;let Ie=!1,we=Te,Pe=(1<<we)-1;var je=1<<ve-1;const be=1+je;let Oe=2+je,Ge=0,Ke=ie[0],ze=0;for(let $t=P;$t<65536;$t*=2)++ze;ze=8-ze,le.writeByte(K),Kt(je);var qe=ie.length;for(let $t=1;$t<qe;$t++)e:{var et=ie[$t],_t=(et<<12)+Ke;let Xt=et<<ze^Ke;if(Ae[Xt]===_t)Ke=$[Xt];else{for(var ot=0===Xt?1:P-Xt;0<=Ae[Xt];)if((Xt-=ot)<0&&(Xt+=P),Ae[Xt]===_t){Ke=$[Xt];break e}Kt(Ke),Ke=et,Oe<4096?($[Xt]=Oe++,Ae[Xt]=_t):(Ae.fill(-1),Oe=2+je,Ie=!0,Kt(je))}}return Kt(Ke),Kt(be),le.writeByte(0),le.bytesView();function Kt($t){for(te&=f[fe],0<fe?te|=$t<<fe:te=$t,fe+=we;8<=fe;)pe[Ge++]=255&te,254<=Ge&&(le.writeByte(Ge),le.writeBytesView(pe,0,Ge),Ge=0),te>>=8,fe-=8;if((Oe>Pe||Ie)&&(Ie?(we=Te,Pe=(1<<we)-1,Ie=!1):(++we,Pe=12===we?1<<we:(1<<we)-1)),$t==be){for(;0<fe;)pe[Ge++]=255&te,254<=Ge&&(le.writeByte(Ge),le.writeBytesView(pe,0,Ge),Ge=0),te>>=8,fe-=8;0<Ge&&(le.writeByte(Ge),le.writeBytesView(pe,0,Ge),Ge=0)}}};function d(W,oe,ie){return W<<8&63488|oe<<2&992|ie>>3}function m(W,oe,ie,re){return W>>4|240&oe|(240&ie)<<4|(240&re)<<8}function p(W,oe,ie){return W>>4<<8|240&oe|ie>>4}function h(W,oe,ie){return W<oe?oe:ie<W?ie:W}function y(W){return W*W}function b(W,oe,ie){var re=0,le=1e100;const pe=W[oe];for(var Ae=pe.cnt,$=pe.ac,P=pe.rc,K=pe.gc,te=pe.bc,fe=pe.fw;0!=fe;fe=W[fe].fw){var ve,Ie,Te=W[fe];le<=(Ie=Ae*(Ie=Te.cnt)/(Ae+Ie))||(ve=0,ie&&le<=(ve+=Ie*y(Te.ac-$))||le<=(ve+=Ie*y(Te.rc-P))||le<=(ve+=Ie*y(Te.gc-K))||le<=(ve+=Ie*y(Te.bc-te))||(le=ve,re=fe))}pe.err=le,pe.nn=re}function D(W,oe){for(var ie=0,re=0;re<W.length;re++){var le=W[re]-oe[re];ie+=le*le}return ie}function N(W,oe){return 1<oe?Math.round(W/oe)*oe:W}function U(W){return W*W}function R(W,oe,ie=D){let re=1/0,le=-1;for(let Ae=0;Ae<W.length;Ae++){var pe=ie(oe,W[Ae]);pe<re&&(re=pe,le=Ae)}return le}function L(W,oe,ie=D){let re=1/0,le=-1;for(let Ae=0;Ae<W.length;Ae++){var pe=ie(oe,W[Ae]);pe<re&&(re=pe,le=Ae)}return[le,re]}function z(W={}){const{initialCapacity:oe=4096,auto:ie=!0}=W,re=C(oe),le=new Uint8Array(256),pe=new Int32Array(5003),Ae=new Int32Array(5003);let $=!1;return{reset(){re.reset(),$=!1},finish(){re.writeByte(T.trailer)},bytes:()=>re.bytes(),bytesView:()=>re.bytesView(),get buffer(){return re.buffer},get stream(){return re},writeHeader:P,writeFrame(K,te,fe,Ke={}){var{transparent:Te=!1,transparentIndex:Ie=0,delay:ot=0,palette:we=null,repeat:qe=0,colorDepth:Pe=8,dispose:je=-1}=Ke;let be=!1;if(ie?$||(be=!0,P(),$=!0):be=!!Ke.first,te=Math.max(0,Math.floor(te)),fe=Math.max(0,Math.floor(fe)),be){if(!we)throw new Error("First frame must include a { palette } option");var[Ke,et,Ge,_t,ze=8]=[re,te,fe,we,Pe];ze=128|ze-1<<4|(_t=Z(_t.length)-1),q(Ke,et),q(Ke,Ge),Ke.writeBytes([ze,0,0]),F(re,we),0<=qe&&(et=qe,(_t=re).writeByte(33),_t.writeByte(255),_t.writeByte(11),k(_t,"NETSCAPE2.0"),_t.writeByte(3),_t.writeByte(1),q(_t,et),_t.writeByte(0))}var Oe,Ge,ze=je,qe=Ge=Math.round(ot/10),et=Te,_t=Ie,ot=((Ke=re).writeByte(33),Ke.writeByte(249),Ke.writeByte(4),_t<0&&(_t=0,et=!1),et=et?(Oe=1,2):Oe=0,0<=ze&&(et=7&ze),Ke.writeByte(0|(et<<=2)|Oe),q(Ke,qe),Ke.writeByte(_t||0),Ke.writeByte(0),!!we&&!be);Te=te,Ie=fe,Oe=ot?we:null,(je=re).writeByte(44),q(je,0),q(je,0),q(je,Te),q(je,Ie),Oe?(Te=Z(Oe.length)-1,je.writeByte(128|Te)):je.writeByte(0),ot&&F(re,we),[qe,Ke,Ie,Te,je=8,ot,we,K]=[re,K,te,fe,Pe,le,pe,Ae],g(Ie,Te,Ke,je,qe,ot,we,K)}};function P(){k(re,"GIF89a")}}function F(W,oe){var ie=1<<Z(oe.length);for(let re=0;re<ie;re++){let le=[0,0,0];re<oe.length&&(le=oe[re]),W.writeByte(le[0]),W.writeByte(le[1]),W.writeByte(le[2])}}function q(W,oe){W.writeByte(255&oe),W.writeByte(oe>>8&255)}function k(W,oe){for(var ie=0;ie<oe.length;ie++)W.writeByte(oe.charCodeAt(ie))}function Z(W){return Math.max(Math.ceil(Math.log2(W)),1)}var X=z},{}],254:[function(l,de,H){H.read=function(M,E,v,S,b){var C,f,g=8*b-S-1,d=(1<<g)-1,m=d>>1,p=-7,h=v?b-1:0,y=v?-1:1;for(b=M[E+h],h+=y,C=b&(1<<-p)-1,b>>=-p,p+=g;0<p;C=256*C+M[E+h],h+=y,p-=8);for(f=C&(1<<-p)-1,C>>=-p,p+=S;0<p;f=256*f+M[E+h],h+=y,p-=8);if(0===C)C=1-m;else{if(C===d)return f?NaN:1/0*(b?-1:1);f+=Math.pow(2,S),C-=m}return(b?-1:1)*f*Math.pow(2,C-S)},H.write=function(M,E,v,S,T,x){var f,g,d=8*x-T-1,m=(1<<d)-1,p=m>>1,h=23===T?Math.pow(2,-24)-Math.pow(2,-77):0,y=S?0:x-1,b=S?1:-1;for(x=E<0||0===E&&1/E<0?1:0,E=Math.abs(E),isNaN(E)||E===1/0?(g=isNaN(E)?1:0,f=m):(f=Math.floor(Math.log(E)/Math.LN2),E*(S=Math.pow(2,-f))<1&&(f--,S*=2),2<=(E+=1<=f+p?h/S:h*Math.pow(2,1-p))*S&&(f++,S/=2),m<=f+p?(g=0,f=m):1<=f+p?(g=(E*S-1)*Math.pow(2,T),f+=p):(g=E*Math.pow(2,p-1)*Math.pow(2,T),f=0));8<=T;M[v+y]=255&g,y+=b,g/=256,T-=8);for(f=f<<T|g,d+=T;0<d;M[v+y]=255&f,y+=b,f/=256,d-=8);M[v+y-b]|=128*x}},{}],255:[function(l,de,H){"use strict";var M;function E(ge,xe){return ge.b===xe.b&&ge.a===xe.a}function v(ge,xe){return ge.b<xe.b||ge.b===xe.b&&ge.a<=xe.a}function S(ge,xe,he){var Se=xe.b-ge.b,He=he.b-xe.b;return 0<Se+He?Se<He?xe.a-ge.a+Se/(Se+He)*(ge.a-he.a):xe.a-he.a+He/(Se+He)*(he.a-ge.a):0}function T(ge,xe,he){var Se=xe.b-ge.b,He=he.b-xe.b;return 0<Se+He?(xe.a-he.a)*Se+(xe.a-ge.a)*He:0}function C(ge,xe){return ge.a<xe.a||ge.a===xe.a&&ge.b<=xe.b}function f(ge,xe,he){var Se=xe.a-ge.a,He=he.a-xe.a;return 0<Se+He?Se<He?xe.b-ge.b+Se/(Se+He)*(ge.b-he.b):xe.b-he.b+He/(Se+He)*(he.b-ge.b):0}function g(ge,xe,he){var Se=xe.a-ge.a,He=he.a-xe.a;return 0<Se+He?(xe.b-he.b)*Se+(xe.b-ge.b)*He:0}function d(ge,xe,he,Se){return(ge=ge<0?0:ge)<=(he=he<0?0:he)?0===he?(xe+Se)/2:xe+ge/(ge+he)*(Se-xe):Se+he/(ge+he)*(xe-Se)}function m(ge){var xe=x(ge.b);return N(xe,ge.c),N(xe.b,ge.c),U(xe,ge.a),xe}function p(ge,xe){var he=!1,Se=!1;ge!==xe&&(xe.a!==ge.a&&(Se=!0,L(xe.a,ge.a)),xe.d!==ge.d&&(he=!0,z(xe.d,ge.d)),D(xe,ge),Se||(N(xe,ge.a),ge.a.c=ge),he||(U(xe,ge.d),ge.d.a=ge))}function h(ge){var xe=ge.b,he=!1;ge.d!==ge.b.d&&(he=!0,z(ge.d,ge.b.d)),ge.c===ge?L(ge.a,null):(ge.b.d.a=ge.b.e,ge.a.c=ge.c,D(ge,ge.b.e),he||U(ge,ge.d)),xe.c===xe?(L(xe.a,null),z(xe.d,null)):(ge.d.a=xe.b.e,xe.a.c=xe.c,D(xe,xe.b.e)),R(ge)}function y(ge){var xe=x(ge),he=xe.b;return D(xe,ge.e),xe.a=ge.b.a,N(he,xe.a),xe.d=he.d=ge.d,xe=xe.b,D(ge.b,ge.b.b.e),D(ge.b,xe),ge.b.a=xe.a,xe.b.a.c=xe.b,xe.b.d=ge.b.d,xe.f=ge.f,xe.b.f=ge.b.f,xe}function b(ge,xe){var he=!1,Se=x(ge),He=Se.b;return xe.d!==ge.d&&(he=!0,z(xe.d,ge.d)),D(Se,ge.e),D(He,xe),Se.a=ge.b.a,He.a=xe.a,Se.d=He.d=ge.d,ge.d.a=He,he||U(Se,ge.d),Se}function x(ge){var xe=new Ge,he=new Ge;return(((he.h=ge.b.h).b.h=xe).h=ge).b.h=he,xe.b=he,((xe.c=xe).e=he).b=xe,(he.c=he).e=xe}function D(ge,xe){var he=ge.c,Se=xe.c;he.b.e=xe,(Se.b.e=ge).c=Se,xe.c=he}function N(ge,xe){var he=xe.f,Se=new ze(xe,he);for(he.e=Se,he=(xe.f=Se).c=ge;he.a=Se,(he=he.c)!==ge;);}function U(ge,xe){var he=xe.d,Se=new Oe(xe,he);for(he.b=Se,(xe.d=Se).a=ge,Se.c=xe.c,he=ge;he.d=Se,(he=he.e)!==ge;);}function R(ge){var xe=ge.h;(xe.b.h=ge=ge.b.h).b.h=xe}function L(ge,xe){for(var he=ge.c,Se=he;Se.a=xe,(Se=Se.c)!==he;);((Se=ge.e).f=he=ge.f).e=Se}function z(ge,xe){for(var he=ge.a,Se=he;Se.d=xe,(Se=Se.e)!==he;);((Se=ge.b).d=he=ge.d).b=Se}function F(ge){var xe=0;return Math.abs(ge[1])>Math.abs(ge[0])&&(xe=1),Math.abs(ge[2])>Math.abs(ge[xe])?2:xe}function q(ge,xe){ge.f+=xe.f,ge.b.f+=xe.b.f}function k(ge,xe,he){return he=he.a,(xe=xe.a).b.a===(ge=ge.a)?he.b.a===ge?v(xe.a,he.a)?T(he.b.a,xe.a,he.a)<=0:0<=T(xe.b.a,he.a,xe.a):T(he.b.a,ge,he.a)<=0:he.b.a===ge?0<=T(xe.b.a,ge,xe.a):(xe=S(xe.b.a,ge,xe.a),(ge=S(he.b.a,ge,he.a))<=xe)}function Z(ge){ge.a.i=null;var xe=ge.e;xe.a.c=xe.c,xe.c.a=xe.a,ge.e=null}function X(ge,xe){h(ge.a),ge.c=!1,(ge.a=xe).i=ge}function W(ge){for(var xe=ge.a.a;(ge=rt(ge)).a.a===xe;);return ge.c&&(X(ge,xe=b(vt(ge).a.b,ge.a.e)),ge=rt(ge)),ge}function oe(ge,xe,he){var Se=new Ye;return Se.a=he,Se.e=Ie(ge.f,xe.e,Se),he.i=Se}function ie(ge,xe){switch(ge.s){case 100130:return 0!=(1&xe);case 100131:return 0!==xe;case 100132:return 0<xe;case 100133:return xe<0;case 100134:return 2<=xe||xe<=-2}return!1}function re(ge){var xe=ge.a,he=xe.d;he.c=ge.d,he.a=xe,Z(ge)}function le(ge,xe,he){for(xe=(ge=xe).a;ge!==he;){ge.c=!1;var Se=vt(ge),He=Se.a;if(He.a!==xe.a){if(!Se.c){re(ge);break}X(Se,He=b(xe.c.b,He.b))}xe.c!==He&&(p(He.b.e,He),p(xe,He)),re(ge),xe=Se.a,ge=Se}return xe}function pe(ge,xe,he,Se,He,Je){for(var ut=!0;oe(ge,xe,he.b),(he=he.c)!==Se;);for(null===He&&(He=vt(xe).a.b.c);(he=(Se=vt(xe)).a.b).a===He.a;)he.c!==He&&(p(he.b.e,he),p(He.b.e,he)),Se.f=xe.f-he.f,Se.d=ie(ge,Se.f),xe.b=!0,!ut&&K(ge,xe)&&(q(he,He),Z(xe),h(He)),ut=!1,xe=Se,He=he;xe.b=!0,Je&&fe(ge,xe)}function Ae(ge,xe,he,Se,He){var Je=[xe.g[0],xe.g[1],xe.g[2]];xe.d=null,xe.d=ge.o&&ge.o(Je,he,Se,ge.c)||null,null===xe.d&&(He?ge.n||(be(ge,100156),ge.n=!0):xe.d=he[0])}function $(ge,xe,he){var Se=[null,null,null,null];Se[0]=xe.a.d,Se[1]=he.a.d,Ae(ge,xe.a,Se,[.5,.5,0,0],!1),p(xe,he)}function P(ge,xe,he,Se,He){var Je=Math.abs(xe.b-ge.b)+Math.abs(xe.a-ge.a),ut=Math.abs(he.b-ge.b)+Math.abs(he.a-ge.a),Ot=He+1;Se[He]=.5*ut/(Je+ut),Se[Ot]=.5*Je/(Je+ut),ge.g[0]+=Se[He]*xe.g[0]+Se[Ot]*he.g[0],ge.g[1]+=Se[He]*xe.g[1]+Se[Ot]*he.g[1],ge.g[2]+=Se[He]*xe.g[2]+Se[Ot]*he.g[2]}function K(ge,xe){var he=vt(xe),Se=xe.a,He=he.a;if(v(Se.a,He.a)){if(0<T(He.b.a,Se.a,He.a))return;if(E(Se.a,He.a)){if(Se.a!==He.a){he=ge.e;var Je=Se.a.h;if(0<=Je){var ut=(he=he.b).d,Ot=he.e,zt=he.c,Gt=zt[Je];ut[Gt]=ut[he.a],(zt[ut[Gt]]=Gt)<=--he.a&&(Gt<=1||v(Ot[ut[Gt>>1]],Ot[ut[Gt]])?ln:Wt)(he,Gt),Ot[Je]=null,zt[Je]=he.b,he.b=Je}else for(he.c[-(Je+1)]=null;0<he.a&&null===he.c[he.d[he.a-1]];)--he.a;$(ge,He.b.e,Se)}}else y(He.b),p(Se,He.b.e),xe.b=he.b=!0}else{if(T(Se.b.a,He.a,Se.a)<0)return;rt(xe).b=xe.b=!0,y(Se.b),p(He.b.e,Se)}return 1}function te(ge,xe){var he=vt(xe),Se=xe.a,He=he.a,Je=Se.a,ut=He.a,Ot=Se.b.a,zt=He.b.a,Gt=new ze;if(T(Ot,ge.a,Je),T(zt,ge.a,ut),!(Je===ut||Math.min(Je.a,Ot.a)>Math.max(ut.a,zt.a))){if(v(Je,ut)){if(0<T(zt,Je,ut))return}else if(T(Ot,ut,Je)<0)return;var cn,zn,Nn=Ot,_n=Je,Fn=zt,On=ut;if(v(Nn,_n)||(cn=Nn,Nn=_n,_n=cn),v(Fn,On)||(cn=Fn,Fn=On,On=cn),v(Nn,Fn)||(cn=Nn,Nn=Fn,Fn=cn,cn=_n,_n=On,On=cn),v(Fn,_n)?v(_n,On)?((cn=S(Nn,Fn,_n))+(zn=S(Fn,_n,On))<0&&(cn=-cn,zn=-zn),Gt.b=d(cn,Fn.b,zn,_n.b)):((cn=T(Nn,Fn,_n))+(zn=-T(Nn,On,_n))<0&&(cn=-cn,zn=-zn),Gt.b=d(cn,Fn.b,zn,On.b)):Gt.b=(Fn.b+_n.b)/2,C(Nn,_n)||(cn=Nn,Nn=_n,_n=cn),C(Fn,On)||(cn=Fn,Fn=On,On=cn),C(Nn,Fn)||(cn=Nn,Nn=Fn,Fn=cn,cn=_n,_n=On,On=cn),C(Fn,_n)?C(_n,On)?((cn=f(Nn,Fn,_n))+(zn=f(Fn,_n,On))<0&&(cn=-cn,zn=-zn),Gt.a=d(cn,Fn.a,zn,_n.a)):((cn=g(Nn,Fn,_n))+(zn=-g(Nn,On,_n))<0&&(cn=-cn,zn=-zn),Gt.a=d(cn,Fn.a,zn,On.a)):Gt.a=(Fn.a+_n.a)/2,v(Gt,ge.a)&&(Gt.b=ge.a.b,Gt.a=ge.a.a),Nn=v(Je,ut)?Je:ut,v(Nn,Gt)&&(Gt.b=Nn.b,Gt.a=Nn.a),E(Gt,Je)||E(Gt,ut))return K(ge,xe),0;if(!E(Ot,ge.a)&&0<=T(Ot,ge.a,Gt)||!E(zt,ge.a)&&T(zt,ge.a,Gt)<=0){if(zt===ge.a)y(Se.b),p(He.b,Se),Se=vt(xe=W(xe)).a,le(ge,vt(xe),he),pe(ge,xe,Se.b.e,Se,Se,!0);else{if(Ot!==ge.a)return 0<=T(Ot,ge.a,Gt)&&(rt(xe).b=xe.b=!0,y(Se.b),Se.a.b=ge.a.b,Se.a.a=ge.a.a),void(T(zt,ge.a,Gt)<=0&&(xe.b=he.b=!0,y(He.b),He.a.b=ge.a.b,He.a.a=ge.a.a));for(y(He.b),p(Se.e,He.b.e),ut=(Je=he=xe).a.b.a;(Je=rt(Je)).a.b.a===ut;);Je=vt(xe=Je).a.b.c,he.a=He.b.e,pe(ge,xe,(He=le(ge,he,null)).c,Se.b.c,Je,!0)}return 1}y(Se.b),y(He.b),p(He.b.e,Se),Se.a.b=Gt.b,Se.a.a=Gt.a,Se.a.h=et(ge.e,Se.a),He=[0,0,0,0],Gt=[Je.d,Ot.d,ut.d,zt.d],(Se=Se.a).g[0]=Se.g[1]=Se.g[2]=0,P(Se,Je,Ot,He,0),P(Se,ut,zt,He,2),Ae(ge,Se,Gt,He,!0),rt(xe).b=xe.b=he.b=!0}}function fe(ge,xe){for(var he=vt(xe);;){for(;he.b;)he=vt(xe=he);if(!(xe.b||null!==(xe=rt(he=xe))&&xe.b))break;xe.b=!1;var Se=xe.a,He=he.a;if(Je=Se.b.a!==He.b.a)e:{var Je,ut=vt(Je=xe),Ot=Je.a,zt=ut.a,Gt=void 0;if(v(Ot.b.a,zt.b.a)){if(T(Ot.b.a,zt.b.a,Ot.a)<0){Je=!1;break e}rt(Je).b=Je.b=!0,Gt=y(Ot),p(zt.b,Gt),Gt.d.c=Je.d}else{if(0<T(zt.b.a,Ot.b.a,zt.a)){Je=!1;break e}Je.b=ut.b=!0,Gt=y(zt),p(Ot.e,zt.b),Gt.b.d.c=Je.d}Je=!0}if(Je&&(he.c?(Z(he),h(He),He=(he=vt(xe)).a):xe.c&&(Z(xe),h(Se),Se=(xe=rt(he)).a)),Se.a!==He.a)if(Se.b.a===He.b.a||xe.c||he.c||Se.b.a!==ge.a&&He.b.a!==ge.a)K(ge,xe);else if(te(ge,xe))break;Se.a===He.a&&Se.b.a===He.b.a&&(q(He,Se),Z(xe),h(Se),xe=rt(he))}}function ve(ge,xe){var he=new Ye,Se=m(ge.b);Se.a.b=4e150,Se.a.a=xe,Se.b.a.b=-4e150,Se.b.a.a=xe,ge.a=Se.b.a,he.a=Se,he.f=0,he.d=!1,he.c=!1,he.h=!0,he.b=!1,Se=Ie(Se=ge.f,Se.a,he),he.e=Se}function Te(ge){this.a=new we,this.b=ge,this.c=k}function Ie(ge,xe,he){for(;null!==(xe=xe.c).b&&!ge.c(ge.b,xe.b,he););return ge=new we(he,xe.a,xe),xe.a.c=ge,xe.a=ge}function we(ge,xe,he){this.b=ge||null,this.a=xe||this,this.c=he||this}function Pe(){this.d=0,this.p=this.b=this.q=null,this.j=[0,0,0],this.s=100130,this.n=!1,this.o=this.a=this.e=this.f=null,this.m=!1,this.c=this.r=this.i=this.k=this.l=this.h=null}function je(ge,xe){if(ge.d!==xe)for(;ge.d!==xe;)if(ge.d<xe)switch(ge.d){case 0:be(ge,100151),ge.u(null);break;case 1:be(ge,100152),ge.t()}else switch(ge.d){case 2:be(ge,100154),ge.v();break;case 1:be(ge,100153),ge.w()}}function be(ge,xe){ge.p&&ge.p(xe,ge.c)}function Oe(ge,xe){this.b=ge||this,this.d=xe||this,this.a=null,this.c=!1}function Ge(){(this.h=this).i=this.d=this.a=this.e=this.c=this.b=null,this.f=0}function Ke(){this.c=new ze,this.a=new Oe,this.b=new Ge,this.d=new Ge,this.b.b=this.d,this.d.b=this.b}function ze(ge,xe){this.e=ge||this,this.f=xe||this,this.d=this.c=null,this.g=[0,0,0],this.h=this.a=this.b=0}function qe(){this.c=[],this.d=null,this.a=0,this.e=!1,this.b=new ot}function et(ge,xe){var he,Se,He;return ge.e?(2*(Se=++(he=ge.b).a)>he.f&&(he.f*=2,he.c=Kt(he.c,he.f+1)),0===he.b?He=Se:(He=he.b,he.b=he.c[he.b]),he.e[He]=xe,he.c[He]=Se,he.d[Se]=He,he.h&&Wt(he,Se),He):(he=ge.a++,ge.c[he]=xe,-(he+1))}function _t(ge){if(0===ge.a)return Xt(ge.b);var xe=ge.c[ge.d[ge.a-1]];if(0!==ge.b.a&&v($t(ge.b),xe))return Xt(ge.b);for(;--ge.a,0<ge.a&&null===ge.c[ge.d[ge.a-1]];);return xe}function ot(){this.d=Kt([0],33),this.e=[null,null],this.c=[0,0],this.a=0,this.f=32,this.b=0,this.h=!1,this.d[1]=1}function Kt(ge,xe){for(var he=Array(xe),Se=0;Se<ge.length;Se++)he[Se]=ge[Se];for(;Se<xe;Se++)he[Se]=0;return he}function $t(ge){return ge.e[ge.d[1]]}function Xt(ge){var xe=ge.d,he=ge.e,Se=ge.c,He=xe[1],Je=he[He];return 0<ge.a&&(xe[1]=xe[ge.a],Se[xe[1]]=1,he[He]=null,Se[He]=ge.b,ge.b=He,0<--ge.a&&ln(ge,1)),Je}function ln(ge,xe){for(var he=ge.d,Se=ge.e,He=ge.c,Je=xe,ut=he[Je];;){var Ot=Je<<1,zt=(Ot<ge.a&&v(Se[he[Ot+1]],Se[he[Ot]])&&(Ot+=1),he[Ot]);if(Ot>ge.a||v(Se[ut],Se[zt])){He[he[Je]=ut]=Je;break}He[he[Je]=zt]=Je,Je=Ot}}function Wt(ge,xe){for(var he=ge.d,Se=ge.e,He=ge.c,Je=xe,ut=he[Je];;){var Ot=Je>>1,zt=he[Ot];if(0==Ot||v(Se[zt],Se[ut])){He[he[Je]=ut]=Je;break}He[he[Je]=zt]=Je,Je=Ot}}function Ye(){this.e=this.a=null,this.f=0,this.c=this.b=this.h=this.d=!1}function vt(ge){return ge.e.c.b}function rt(ge){return ge.e.a.b}(M=Pe.prototype).x=function(){je(this,0)},M.B=function(ge,xe){switch(ge){case 100142:return;case 100140:switch(xe){case 100130:case 100131:case 100132:case 100133:case 100134:return void(this.s=xe)}break;case 100141:return void(this.m=!!xe);default:return void be(this,100900)}be(this,100901)},M.y=function(ge){switch(ge){case 100142:return 0;case 100140:return this.s;case 100141:return this.m;default:be(this,100900)}return!1},M.A=function(ge,xe,he){this.j[0]=ge,this.j[1]=xe,this.j[2]=he},M.z=function(ge,xe){var he=xe||null;switch(ge){case 100100:case 100106:this.h=he;break;case 100104:case 100110:this.l=he;break;case 100101:case 100107:this.k=he;break;case 100102:case 100108:this.i=he;break;case 100103:case 100109:this.p=he;break;case 100105:case 100111:this.o=he;break;case 100112:this.r=he;break;default:be(this,100900)}},M.C=function(ge,xe){var he=!1,Se=[0,0,0];je(this,2);for(var He=0;He<3;++He){var Je=ge[He];Je<-1e150&&(Je=-1e150,he=!0),1e150<Je&&(Je=1e150,he=!0),Se[He]=Je}he&&be(this,100155),null===(he=this.q)?p(he=m(this.b),he.b):(y(he),he=he.e),he.a.d=xe,he.a.g[0]=Se[0],he.a.g[1]=Se[1],he.a.g[2]=Se[2],he.f=1,he.b.f=-1,this.q=he},M.u=function(ge){je(this,0),this.d=1,this.b=new Ke,this.c=ge},M.t=function(){je(this,1),this.d=2,this.q=null},M.v=function(){je(this,2),this.d=1},M.w=function(){je(this,1),this.d=0;var ge,xe,Je=!1,ut=[he=this.j[0],Se=this.j[1],He=this.j[2]];if(0===he&&0===Se&&0===He){for(var Se=[-2e150,-2e150,-2e150],Ot=[2e150,2e150,2e150],He=[],zt=[],he=(Je=this.b.c).e;he!==Je;he=he.e)for(var Gt=0;Gt<3;++Gt){var cn=he.g[Gt];cn<Ot[Gt]&&(Ot[Gt]=cn,zt[Gt]=he),cn>Se[Gt]&&(Se[Gt]=cn,He[Gt]=he)}if(Se[1]-Ot[1]>Se[he=0]-Ot[0]&&(he=1),Ot[he=Se[2]-Ot[2]>Se[he]-Ot[he]?2:he]>=Se[he])ut[0]=0,ut[1]=0,ut[2]=1;else{for(Ot=zt[he],zt=[Se=0,0,0],Ot=[Ot.g[0]-(He=He[he]).g[0],Ot.g[1]-He.g[1],Ot.g[2]-He.g[2]],Gt=[0,0,0],he=Je.e;he!==Je;he=he.e)Gt[0]=he.g[0]-He.g[0],Gt[1]=he.g[1]-He.g[1],Gt[2]=he.g[2]-He.g[2],zt[0]=Ot[1]*Gt[2]-Ot[2]*Gt[1],zt[1]=Ot[2]*Gt[0]-Ot[0]*Gt[2],zt[2]=Ot[0]*Gt[1]-Ot[1]*Gt[0],Se<(cn=zt[0]*zt[0]+zt[1]*zt[1]+zt[2]*zt[2])&&(Se=cn,ut[0]=zt[0],ut[1]=zt[1],ut[2]=zt[2]);Se<=0&&(ut[0]=ut[1]=ut[2]=0,ut[F(Ot)]=1)}Je=!0}for(Se=((zt=F(ut))+1)%3,He=(zt+2)%3,zt=0<ut[zt]?1:-1,ut=(he=this.b.c).e;ut!==he;ut=ut.e)ut.b=ut.g[Se],ut.a=zt*ut.g[He];if(Je){for(ut=0,he=(Je=this.b.a).b;he!==Je;he=he.b)if(!((Se=he.a).f<=0))for(;ut+=(Se.a.b-Se.b.a.b)*(Se.a.a+Se.b.a.a),(Se=Se.e)!==he.a;);if(ut<0)for(Je=(ut=this.b.c).e;Je!==ut;Je=Je.e)Je.a=-Je.a}for(this.n=!1,he=(ut=this.b.b).h;he!==ut;he=Je)Je=he.h,Se=he.e,E(he.a,he.b.a)&&he.e.e!==he&&($(this,Se,he),h(he),Se=(he=Se).e),Se.e===he&&(Se!==he&&(Se!==Je&&Se!==Je.b||(Je=Je.h),h(Se)),he!==Je&&he!==Je.b||(Je=Je.h),h(he));for(this.e=ut=new qe,he=(Je=this.b.c).e;he!==Je;he=he.e)he.h=et(ut,he);var On,zn=ut;zn.d=[];for(var Nn=0;Nn<zn.a;Nn++)zn.d[Nn]=Nn;zn.d.sort((On=zn.c,function(Xr,Qi){return v(On[Xr],On[Qi])?1:-1})),zn.e=!0;for(var _n=zn.b,Fn=_n.a;1<=Fn;--Fn)ln(_n,Fn);for(_n.h=!0,this.f=new Te(this),ve(this,-4e150),ve(this,4e150);null!==(ut=_t(this.e));){for(;;){e:if(0===(he=this.e).a)Je=$t(he.b);else if(Je=he.c[he.d[he.a-1]],0!==he.b.a&&v(he=$t(he.b),Je)){Je=he;break e}if(null===Je||!E(Je,ut))break;Je=_t(this.e),$(this,ut.c,Je.c)}!function On(Xr,Qi){for(var Ti,Rr=(Xr.a=Qi).c;null===Rr.i;)if((Rr=Rr.c)===Qi.c){Rr=Xr;var Jr=Qi;(Hr=new Ye).a=Jr.c.b;for(var es=(Sr=Rr.f).a;null!==(es=es.a).b&&!Sr.c(Sr.b,Hr,es.b););var Sr,Hi,Lr=vt(Sr=es.b),Hr=Sr.a;return es=Lr.a,void(0===T(Hr.b.a,Jr,Hr.a)?E((Hr=Sr.a).a,Jr)||E(Hr.b.a,Jr)||(y(Hr.b),Sr.c&&(h(Hr.c),Sr.c=!1),p(Jr.c,Hr),On(Rr,Jr)):(Hi=v(es.b.a,Hr.b.a)?Sr:Lr,Lr=void 0,Sr.d||Hi.c?(Lr=Hi===Sr?b(Jr.c.b,Hr.e):b(es.b.c.b,Jr.c).b,Hi.c?X(Hi,Lr):((Sr=oe(Hr=Rr,Sr,Lr)).f=rt(Sr).f+Sr.a.f,Sr.d=ie(Hr,Sr.f)),On(Rr,Jr)):pe(Rr,Sr,Jr.c,Jr.c,null,!0)))}Sr=(Hr=vt(Rr=W(Rr.i))).a,(Hr=le(Xr,Hr,null)).c===Sr?(Hr=(Sr=Hr).c,es=vt(Rr),Ti=!1,(Lr=Rr.a).b.a!==(Hi=es.a).b.a&&te(Xr,Rr),E(Lr.a,Xr.a)&&(p(Hr.b.e,Lr),Hr=vt(Rr=W(Rr)).a,le(Xr,vt(Rr),es),Ti=!0),E(Hi.a,Xr.a)&&(p(Sr,Hi.b.e),Sr=le(Xr,es,null),Ti=!0),Ti?pe(Xr,Rr,Sr.c,Hr,Hr,!0):(Jr=v(Hi.a,Lr.a)?Hi.b.e:Lr,pe(Xr,Rr,Jr=b(Sr.c.b,Jr),Jr.c,Jr.c,!1),Jr.b.i.c=!0,fe(Xr,Rr))):pe(Xr,Rr,Hr.c,Sr,Sr,!0)}(this,ut)}for(this.a=this.f.a.a.b.a.a,ut=0;null!==(Je=this.f.a.a.b);)Je.h||++ut,Z(Je);for(this.f=null,(ut=this.e).b=null,ut.d=null,this.e=ut.c=null,he=(ut=this.b).a.b;he!==ut.a;he=Je)Je=he.b,(he=he.a).e.e===he&&(q(he.c,he),h(he));if(!this.n){if(ut=this.b,this.m)for(he=ut.b.h;he!==ut.b;he=Je)Je=he.h,he.b.d.c!==he.d.c?he.f=he.d.c?1:-1:h(he);else for(he=ut.a.b;he!==ut.a;he=Je)if(Je=he.b,he.c){for(he=he.a;v(he.b.a,he.a);he=he.c.b);for(;v(he.a,he.b.a);he=he.e);for(Se=he.c.b,He=void 0;he.e!==Se;)if(v(he.b.a,Se.a)){for(;Se.e!==he&&(v((xe=Se.e).b.a,xe.a)||T(Se.a,Se.b.a,Se.e.b.a)<=0);)Se=(He=b(Se.e,Se)).b;Se=Se.c.b}else{for(;Se.e!==he&&(v((ge=he.c.b).a,ge.b.a)||0<=T(he.b.a,he.a,he.c.b.a));)he=(He=b(he,he.c.b)).b;he=he.e}for(;Se.e.e!==he;)Se=(He=b(Se.e,Se)).b}if(this.h||this.i||this.k||this.l)if(this.m){for(Je=(ut=this.b).a.b;Je!==ut.a;Je=Je.b)if(Je.c){for(this.h&&this.h(2,this.c),he=Je.a;this.k&&this.k(he.a.d,this.c),(he=he.e)!==Je.a;);this.i&&this.i(this.c)}}else{for(Je=!!this.l,he=!1,Se=-1,He=(ut=this.b).a.d;He!==ut.a;He=He.d)if(He.c)for(he||(this.h&&this.h(4,this.c),he=!0),zt=He.a;Je&&Se!==(Ot=zt.b.d.c?0:1)&&(Se=Ot,this.l&&this.l(!!Se,this.c)),this.k&&this.k(zt.a.d,this.c),(zt=zt.e)!==He.a;);he&&this.i&&this.i(this.c)}if(this.r){for(he=(ut=this.b).a.b;he!==ut.a;he=Je)if(Je=he.b,!he.c){for(He=(Se=he.a).e,zt=void 0;He=(zt=He).e,(zt.d=null)===zt.b.d&&(zt.c===zt?L(zt.a,null):(zt.a.c=zt.c,D(zt,zt.b.e)),(Ot=zt.b).c===Ot?L(Ot.a,null):(Ot.a.c=Ot.c,D(Ot,Ot.b.e)),R(zt)),zt!==Se;);Se=he.d,((he=he.b).d=Se).b=he}return this.r(this.b),void(this.c=this.b=null)}}this.b=this.c=null},this.libtess={GluTesselator:Pe,windingRule:{GLU_TESS_WINDING_ODD:100130,GLU_TESS_WINDING_NONZERO:100131,GLU_TESS_WINDING_POSITIVE:100132,GLU_TESS_WINDING_NEGATIVE:100133,GLU_TESS_WINDING_ABS_GEQ_TWO:100134},primitiveType:{GL_LINE_LOOP:2,GL_TRIANGLES:4,GL_TRIANGLE_STRIP:5,GL_TRIANGLE_FAN:6},errorType:{GLU_TESS_MISSING_BEGIN_POLYGON:100151,GLU_TESS_MISSING_END_POLYGON:100153,GLU_TESS_MISSING_BEGIN_CONTOUR:100152,GLU_TESS_MISSING_END_CONTOUR:100154,GLU_TESS_COORD_TOO_LARGE:100155,GLU_TESS_NEED_COMBINE_CALLBACK:100156},gluEnum:{GLU_TESS_MESH:100112,GLU_TESS_TOLERANCE:100142,GLU_TESS_WINDING_RULE:100140,GLU_TESS_BOUNDARY_ONLY:100141,GLU_INVALID_ENUM:100900,GLU_INVALID_VALUE:100901,GLU_TESS_BEGIN:100100,GLU_TESS_VERTEX:100101,GLU_TESS_END:100102,GLU_TESS_ERROR:100103,GLU_TESS_EDGE_FLAG:100104,GLU_TESS_COMBINE:100105,GLU_TESS_BEGIN_DATA:100106,GLU_TESS_VERTEX_DATA:100107,GLU_TESS_END_DATA:100108,GLU_TESS_ERROR_DATA:100109,GLU_TESS_EDGE_FLAG_DATA:100110,GLU_TESS_COMBINE_DATA:100111}},Pe.prototype.gluDeleteTess=Pe.prototype.x,Pe.prototype.gluTessProperty=Pe.prototype.B,Pe.prototype.gluGetTessProperty=Pe.prototype.y,Pe.prototype.gluTessNormal=Pe.prototype.A,Pe.prototype.gluTessCallback=Pe.prototype.z,Pe.prototype.gluTessVertex=Pe.prototype.C,Pe.prototype.gluTessBeginPolygon=Pe.prototype.u,Pe.prototype.gluTessBeginContour=Pe.prototype.t,Pe.prototype.gluTessEndContour=Pe.prototype.v,Pe.prototype.gluTessEndPolygon=Pe.prototype.w,void 0!==de&&(de.exports=this.libtess)},{}],256:[function(l,de,H){"use strict";function E(v,S,T,C){for(var f=v[S++],g=1<<f,d=1+g,m=1+d,p=f+1,h=(1<<p)-1,y=0,b=0,x=0,D=v[S++],N=new Int32Array(4096),U=null;;){for(;y<16&&0!==D;)b|=v[S++]<<y,y+=8,1===D?D=v[S++]:--D;if(y<p)break;var R=b&h;if(b>>=p,y-=p,R==g)m=1+d,h=(1<<(p=f+1))-1,U=null;else{if(R==d)break;for(var L=R<m?R:U,z=0,F=L;g<F;)F=N[F]>>8,++z;var q=F;if(C<x+z+(L!==R?1:0))return void console.log("Warning, gif stream longer than expected.");T[x++]=q;var k=x+=z;for(L!==R&&(T[x++]=q),F=L;z--;)T[--k]=255&(F=N[F]),F>>=8;null!==U&&m<4096&&(N[m++]=U<<8|q,h+1<=m&&p<12&&(++p,h=h<<1|1)),U=R}}x!==C&&console.log("Warning, gif stream shorter than expected.")}try{H.GifWriter=function M(v,S,T,C){var f=0,g=void 0===(C=void 0===C?{}:C).loop?null:C.loop,d=void 0===C.palette?null:C.palette;if(S<=0||T<=0||65535<S||65535<T)throw new Error("Width/Height invalid.");function m(U){if((U=U.length)<2||256<U||U&U-1)throw new Error("Invalid code/color length, must be power of 2 and 2 .. 256.");return U}v[f++]=71,v[f++]=73,v[f++]=70,v[f++]=56,v[f++]=57,v[f++]=97;var p=0,h=0;if(null!==d){for(var y=m(d);y>>=1;)++p;if(y=1<<p,--p,void 0!==C.background){if(y<=(h=C.background))throw new Error("Background index out of range.");if(0===h)throw new Error("Background index explicitly passed as 0.")}}if(v[f++]=255&S,v[f++]=S>>8&255,v[f++]=255&T,v[f++]=T>>8&255,v[f++]=(null!==d?128:0)|p,v[f++]=h,v[f++]=0,null!==d)for(var b=0,x=d.length;b<x;++b){var D=d[b];v[f++]=D>>16&255,v[f++]=D>>8&255,v[f++]=255&D}if(null!==g){if(g<0||65535<g)throw new Error("Loop count invalid.");v[f++]=33,v[f++]=255,v[f++]=11,v[f++]=78,v[f++]=69,v[f++]=84,v[f++]=83,v[f++]=67,v[f++]=65,v[f++]=80,v[f++]=69,v[f++]=50,v[f++]=46,v[f++]=48,v[f++]=3,v[f++]=1,v[f++]=255&g,v[f++]=g>>8&255,v[f++]=0}var N=!1;this.addFrame=function(U,R,L,z,F,q){if(!0===N&&(--f,N=!1),q=void 0===q?{}:q,U<0||R<0||65535<U||65535<R)throw new Error("x/y invalid.");if(L<=0||z<=0||65535<L||65535<z)throw new Error("Width/Height invalid.");if(F.length<L*z)throw new Error("Not enough pixels for the frame size.");var k=!0,Z=q.palette;if(null==Z&&(k=!1,Z=d),null==Z)throw new Error("Must supply either a local or global palette.");for(var W=m(Z),X=0;W>>=1;)++X;W=1<<X;var oe=void 0===q.delay?0:q.delay,ie=void 0===q.disposal?0:q.disposal;if(ie<0||3<ie)throw new Error("Disposal out of range.");var re=!1,le=0;if(null!=q.transparent&&(re=!0,(le=q.transparent)<0||W<=le))throw new Error("Transparent color index.");if(0===ie&&!re&&0===oe||(v[f++]=33,v[f++]=249,v[f++]=4,v[f++]=ie<<2|(!0===re?1:0),v[f++]=255&oe,v[f++]=oe>>8&255,v[f++]=le,v[f++]=0),v[f++]=44,v[f++]=255&U,v[f++]=U>>8&255,v[f++]=255&R,v[f++]=R>>8&255,v[f++]=255&L,v[f++]=L>>8&255,v[f++]=255&z,v[f++]=z>>8&255,v[f++]=!0===k?128|X-1:0,!0===k)for(var pe=0,Ae=Z.length;pe<Ae;++pe){var $=Z[pe];v[f++]=$>>16&255,v[f++]=$>>8&255,v[f++]=255&$}return f=function(P,K,te,fe){P[K++]=te;var ve=K++,Te=1<<te,Ie=Te-1,we=1+Te,Pe=1+we,je=te+1,be=0,Oe=0;function Ge(Xt){for(;Xt<=be;)P[K++]=255&Oe,Oe>>=8,be-=8,K===ve+256&&(P[ve]=255,ve=K++)}function Ke(Xt){Oe|=Xt<<be,be+=je,Ge(8)}var ze=fe[0]&Ie,qe={};Ke(Te);for(var et=1,_t=fe.length;et<_t;++et){var ot=fe[et]&Ie,Kt=ze<<8|ot,$t=qe[Kt];if(void 0===$t){for(Oe|=ze<<be,be+=je;8<=be;)P[K++]=255&Oe,Oe>>=8,be-=8,K===ve+256&&(P[ve]=255,ve=K++);4096===Pe?(Ke(Te),Pe=1+we,je=te+1,qe={}):(1<<je<=Pe&&++je,qe[Kt]=Pe++),ze=ot}else ze=$t}return Ke(ze),Ke(we),Ge(1),ve+1===K?P[ve]=0:(P[ve]=K-ve-1,P[K++]=0),K}(v,f,X<2?2:X,F)},this.end=function(){return!1===N&&(v[f++]=59,N=!0),f},this.getOutputBuffer=function(){return v},this.setOutputBuffer=function(U){v=U},this.getOutputBufferPosition=function(){return f},this.setOutputBufferPosition=function(U){f=U}},H.GifReader=function(v){var S=0;if(71!==v[S++]||73!==v[S++]||70!==v[S++]||56!==v[S++]||56!=(v[S++]+1&253)||97!==v[S++])throw new Error("Invalid GIF 87a/89a header.");var T=v[S++]|v[S++]<<8,C=v[S++]|v[S++]<<8,f=v[S++],d=(S++,S++,null),m=null,p=(f>>7&&(d=S,S+=3*(m=1<<1+(7&f))),!0),h=[],y=0,b=null,x=0,D=null;for(this.width=T,this.height=C;p&&S<v.length;)switch(v[S++]){case 33:switch(v[S++]){case 255:if(11!==v[S]||78==v[S+1]&&69==v[S+2]&&84==v[S+3]&&83==v[S+4]&&67==v[S+5]&&65==v[S+6]&&80==v[S+7]&&69==v[S+8]&&50==v[S+9]&&46==v[S+10]&&48==v[S+11]&&3==v[S+12]&&1==v[S+13]&&0==v[S+16])S+=14,D=v[S++]|v[S++]<<8,S++;else for(S+=12;;){if(!(0<=(U=v[S++])))throw Error("Invalid block size");if(0===U)break;S+=U}break;case 249:if(4!==v[S++]||0!==v[S+4])throw new Error("Invalid graphics extension block.");var N=v[S++];y=v[S++]|v[S++]<<8,b=v[S++],!(1&N)&&(b=null),x=N>>2&7,S++;break;case 254:for(;;){if(!(0<=(U=v[S++])))throw Error("Invalid block size");if(0===U)break;S+=U}break;default:throw new Error("Unknown graphic control label: 0x"+v[S-1].toString(16))}break;case 44:var U,R=v[S++]|v[S++]<<8,L=v[S++]|v[S++]<<8,z=v[S++]|v[S++]<<8,F=v[S++]|v[S++]<<8,q=(oe=v[S++])>>6&1,Z=d,X=m,W=!1,oe=(oe>>7&&(W=!0,Z=S,S+=3*(X=1<<1+(7&oe))),S);for(S++;;){if(!(0<=(U=v[S++])))throw Error("Invalid block size");if(0===U)break;S+=U}h.push({x:R,y:L,width:z,height:F,has_local_palette:W,palette_offset:Z,palette_size:X,data_offset:oe,data_length:S-oe,transparent_index:b,interlaced:!!q,delay:y,disposal:x});break;case 59:p=!1;break;default:throw new Error("Unknown gif block: 0x"+v[S-1].toString(16))}this.numFrames=function(){return h.length},this.loopCount=function(){return D},this.frameInfo=function(ie){if(ie<0||ie>=h.length)throw new Error("Frame index out of range.");return h[ie]},this.decodeAndBlitFrameBGRA=function(ie,re){for(var le=(ie=this.frameInfo(ie)).width*ie.height,pe=new Uint8Array(le),Ae=(E(v,ie.data_offset,pe,le),ie.palette_offset),$=ie.transparent_index,P=(null===$&&($=256),ie.width),K=T-P,te=P,fe=4*(ie.y*T+ie.x),ve=4*((ie.y+ie.height)*T+ie.x),Te=fe,Ie=4*K,we=(!0===ie.interlaced&&(Ie+=4*T*7),8),Pe=0,je=pe.length;Pe<je;++Pe){var be,Oe,Ge=pe[Pe];0===te&&(te=P,ve<=(Te+=Ie)&&(Ie=4*K+4*T*(we-1),Te=fe+(P+K)*(we<<1),we>>=1)),Ge===$?Te+=4:(be=v[Ae+3*Ge],Oe=v[Ae+3*Ge+1],re[Te++]=Ge=v[Ae+3*Ge+2],re[Te++]=Oe,re[Te++]=be,re[Te++]=255),--te}},this.decodeAndBlitFrameRGBA=function(ie,re){for(var le=(ie=this.frameInfo(ie)).width*ie.height,pe=new Uint8Array(le),Ae=(E(v,ie.data_offset,pe,le),ie.palette_offset),$=ie.transparent_index,P=(null===$&&($=256),ie.width),K=T-P,te=P,fe=4*(ie.y*T+ie.x),ve=4*((ie.y+ie.height)*T+ie.x),Te=fe,Ie=4*K,we=(!0===ie.interlaced&&(Ie+=4*T*7),8),Pe=0,je=pe.length;Pe<je;++Pe){var be,Oe,Ge=pe[Pe];0===te&&(te=P,ve<=(Te+=Ie)&&(Ie=4*K+4*T*(we-1),Te=fe+(P+K)*(we<<1),we>>=1)),Ge===$?Te+=4:(be=v[Ae+3*Ge],Oe=v[Ae+3*Ge+1],Ge=v[Ae+3*Ge+2],re[Te++]=be,re[Te++]=Oe,re[Te++]=Ge,re[Te++]=255),--te}}}}catch{}},{}],257:[function(l,de,H){(function(M){var v;v=function(S){"use strict";function T(J){if(null==this)throw TypeError();var I,j=String(this),V=j.length;if(!((J=(J=J?Number(J):0)!=J?0:J)<0||V<=J))return 55296<=(I=j.charCodeAt(J))&&I<=56319&&J+1<V&&56320<=(V=j.charCodeAt(J+1))&&V<=57343?1024*(I-55296)+V-56320+65536:I}String.prototype.codePointAt||((C=function(){try{var w={},I=Object.defineProperty,j=I(w,w,w)&&I}catch{}return j}())?C(String.prototype,"codePointAt",{value:T,configurable:!0,writable:!0}):String.prototype.codePointAt=T);var C;function d(){this.table=new Uint16Array(16),this.trans=new Uint16Array(288)}function m(w,I){this.source=w,this.sourceIndex=0,this.tag=0,this.bitcount=0,this.dest=I,this.destLen=0,this.ltree=new d,this.dtree=new d}var p=new d,h=new d,y=new Uint8Array(30),b=new Uint16Array(30),x=new Uint8Array(30),D=new Uint16Array(30),N=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),U=new d,R=new Uint8Array(320);function L(w,I,j,V){for(var J,se=0;se<j;++se)w[se]=0;for(se=0;se<30-j;++se)w[se+j]=se/j|0;for(J=V,se=0;se<30;++se)I[se]=J,J+=1<<w[se]}var z=new Uint16Array(16);function F(w,I,j,V){for(var J,se=0;se<16;++se)w.table[se]=0;for(se=0;se<V;++se)w.table[I[j+se]]++;for(se=J=w.table[0]=0;se<16;++se)z[se]=J,J+=w.table[se];for(se=0;se<V;++se)I[j+se]&&(w.trans[z[I[j+se]]++]=se)}function q(w,I,j){if(!I)return j;for(;w.bitcount<24;)w.tag|=w.source[w.sourceIndex++]<<w.bitcount,w.bitcount+=8;var V=w.tag&65535>>>16-I;return w.tag>>>=I,w.bitcount-=I,V+j}function k(w,I){for(;w.bitcount<24;)w.tag|=w.source[w.sourceIndex++]<<w.bitcount,w.bitcount+=8;for(var j=0,V=0,J=0,se=w.tag;V=2*V+(1&se),se>>>=1,j+=I.table[++J],0<=(V-=I.table[J]););return w.tag=se,w.bitcount-=J,I.trans[j+V]}function Z(w,I,j){for(;;){if(256===(V=k(w,I)))return 0;if(V<256)w.dest[w.destLen++]=V;else for(var J,se=q(w,y[V-=257],b[V]),V=k(w,j),ae=J=w.destLen-q(w,x[V],D[V]);ae<J+se;++ae)w.dest[w.destLen++]=w.dest[ae]}}for(var X=p,W=h,oe=0;oe<7;++oe)X.table[oe]=0;for(X.table[7]=24,X.table[8]=152,X.table[9]=112,oe=0;oe<24;++oe)X.trans[oe]=256+oe;for(oe=0;oe<144;++oe)X.trans[24+oe]=oe;for(oe=0;oe<8;++oe)X.trans[168+oe]=280+oe;for(oe=0;oe<112;++oe)X.trans[176+oe]=144+oe;for(oe=0;oe<5;++oe)W.table[oe]=0;for(W.table[5]=32,oe=0;oe<32;++oe)W.trans[oe]=oe;L(y,b,4,3),L(x,D,2,1),y[28]=0,b[28]=258;var ie=function(w,I){var j,V,J,se=new m(w,I);do{switch(void 0,(V=se).bitcount--||(V.tag=V.source[V.sourceIndex++],V.bitcount=7),J=1&V.tag,V.tag>>>=1,V=J,q(se,2,0)){case 0:j=function(nt){for(var gn,un;8<nt.bitcount;)nt.sourceIndex--,nt.bitcount-=8;if((gn=256*nt.source[nt.sourceIndex+1]+nt.source[nt.sourceIndex])!==(65535&~(256*nt.source[nt.sourceIndex+3]+nt.source[nt.sourceIndex+2])))return-3;for(nt.sourceIndex+=4,un=gn;un;--un)nt.dest[nt.destLen++]=nt.source[nt.sourceIndex++];return nt.bitcount=0,0}(se);break;case 1:j=Z(se,p,h);break;case 2:ht=ct=bt=at=ae=Ue=void 0;for(var ae,me=se,De=se.ltree,_e=se.dtree,We=q(me,5,257),it=q(me,5,1),Ze=q(me,4,4),Ue=0;Ue<19;++Ue)R[Ue]=0;for(Ue=0;Ue<Ze;++Ue){var bt=q(me,3,0);R[N[Ue]]=bt}for(F(U,R,0,19),ae=0;ae<We+it;){var ct=k(me,U);switch(ct){case 16:for(var ht=R[ae-1],at=q(me,2,3);at;--at)R[ae++]=ht;break;case 17:for(at=q(me,3,3);at;--at)R[ae++]=0;break;case 18:for(at=q(me,7,11);at;--at)R[ae++]=0;break;default:R[ae++]=ct}}F(De,R,0,We),F(_e,R,We,it),j=Z(se,se.ltree,se.dtree);break;default:j=-3}if(0!==j)throw new Error("Data error")}while(!V);return se.destLen<se.dest.length?"function"==typeof se.dest.slice?se.dest.slice(0,se.destLen):se.dest.subarray(0,se.destLen):se.dest};function re(w,I,j,V,J){return Math.pow(1-J,3)*w+3*Math.pow(1-J,2)*J*I+3*(1-J)*Math.pow(J,2)*j+Math.pow(J,3)*V}function le(){this.x1=Number.NaN,this.y1=Number.NaN,this.x2=Number.NaN,this.y2=Number.NaN}function pe(){this.commands=[],this.fill="black",this.stroke=null,this.strokeWidth=1}function Ae(w){throw new Error(w)}function $(w,I){w||Ae(I)}le.prototype.isEmpty=function(){return isNaN(this.x1)||isNaN(this.y1)||isNaN(this.x2)||isNaN(this.y2)},le.prototype.addPoint=function(w,I){"number"==typeof w&&((isNaN(this.x1)||isNaN(this.x2))&&(this.x1=w,this.x2=w),w<this.x1&&(this.x1=w),w>this.x2&&(this.x2=w)),"number"==typeof I&&((isNaN(this.y1)||isNaN(this.y2))&&(this.y1=I,this.y2=I),I<this.y1&&(this.y1=I),I>this.y2&&(this.y2=I))},le.prototype.addX=function(w){this.addPoint(w,null)},le.prototype.addY=function(w){this.addPoint(null,w)},le.prototype.addBezier=function(w,I,j,V,J,se,ae,me){var De=[w,I],_e=[j,V],We=[J,se],it=[ae,me];this.addPoint(w,I),this.addPoint(ae,me);for(var Ze=0;Ze<=1;Ze++){var Ue,bt=6*De[Ze]-12*_e[Ze]+6*We[Ze],ct=-3*De[Ze]+9*_e[Ze]-9*We[Ze]+3*it[Ze],ht=3*_e[Ze]-3*De[Ze];0==ct?0==bt||0<(Ue=-ht/bt)&&Ue<1&&(0===Ze&&this.addX(re(De[Ze],_e[Ze],We[Ze],it[Ze],Ue)),1===Ze&&this.addY(re(De[Ze],_e[Ze],We[Ze],it[Ze],Ue))):(Ue=Math.pow(bt,2)-4*ht*ct)<0||(0<(ht=(-bt+Math.sqrt(Ue))/(2*ct))&&ht<1&&(0===Ze&&this.addX(re(De[Ze],_e[Ze],We[Ze],it[Ze],ht)),1===Ze&&this.addY(re(De[Ze],_e[Ze],We[Ze],it[Ze],ht))),0<(ht=(-bt-Math.sqrt(Ue))/(2*ct))&&ht<1&&(0===Ze&&this.addX(re(De[Ze],_e[Ze],We[Ze],it[Ze],ht)),1===Ze&&this.addY(re(De[Ze],_e[Ze],We[Ze],it[Ze],ht))))}},le.prototype.addQuad=function(w,I,j,V,J,se){this.addBezier(w,I,j=w+2/3*(j-w),V=I+2/3*(V-I),j+1/3*(J-w),V+1/3*(se-I),J,se)},pe.prototype.moveTo=function(w,I){this.commands.push({type:"M",x:w,y:I})},pe.prototype.lineTo=function(w,I){this.commands.push({type:"L",x:w,y:I})},pe.prototype.curveTo=pe.prototype.bezierCurveTo=function(w,I,j,V,J,se){this.commands.push({type:"C",x1:w,y1:I,x2:j,y2:V,x:J,y:se})},pe.prototype.quadTo=pe.prototype.quadraticCurveTo=function(w,I,j,V){this.commands.push({type:"Q",x1:w,y1:I,x:j,y:V})},pe.prototype.close=pe.prototype.closePath=function(){this.commands.push({type:"Z"})},pe.prototype.extend=function(w){var I;if(w.commands)w=w.commands;else if(w instanceof le)return this.moveTo((I=w).x1,I.y1),this.lineTo(I.x2,I.y1),this.lineTo(I.x2,I.y2),this.lineTo(I.x1,I.y2),void this.close();Array.prototype.push.apply(this.commands,w)},pe.prototype.getBoundingBox=function(){for(var w=new le,I=0,j=0,V=0,J=0,se=0;se<this.commands.length;se++){var ae=this.commands[se];switch(ae.type){case"M":w.addPoint(ae.x,ae.y),I=V=ae.x,j=J=ae.y;break;case"L":w.addPoint(ae.x,ae.y),V=ae.x,J=ae.y;break;case"Q":w.addQuad(V,J,ae.x1,ae.y1,ae.x,ae.y),V=ae.x,J=ae.y;break;case"C":w.addBezier(V,J,ae.x1,ae.y1,ae.x2,ae.y2,ae.x,ae.y),V=ae.x,J=ae.y;break;case"Z":V=I,J=j;break;default:throw new Error("Unexpected path command "+ae.type)}}return w.isEmpty()&&w.addPoint(0,0),w},pe.prototype.draw=function(w){w.beginPath();for(var I=0;I<this.commands.length;I+=1){var j=this.commands[I];"M"===j.type?w.moveTo(j.x,j.y):"L"===j.type?w.lineTo(j.x,j.y):"C"===j.type?w.bezierCurveTo(j.x1,j.y1,j.x2,j.y2,j.x,j.y):"Q"===j.type?w.quadraticCurveTo(j.x1,j.y1,j.x,j.y):"Z"===j.type&&w.closePath()}this.fill&&(w.fillStyle=this.fill,w.fill()),this.stroke&&(w.strokeStyle=this.stroke,w.lineWidth=this.strokeWidth,w.stroke())},pe.prototype.toPathData=function(w){function I(){for(var se=arguments,ae="",me=0;me<arguments.length;me+=1){var De=se[me];0<=De&&0<me&&(ae+=" "),ae+=Math.round(De)===De?""+Math.round(De):De.toFixed(w)}return ae}w=void 0!==w?w:2;for(var j="",V=0;V<this.commands.length;V+=1){var J=this.commands[V];"M"===J.type?j+="M"+I(J.x,J.y):"L"===J.type?j+="L"+I(J.x,J.y):"C"===J.type?j+="C"+I(J.x1,J.y1,J.x2,J.y2,J.x,J.y):"Q"===J.type?j+="Q"+I(J.x1,J.y1,J.x,J.y):"Z"===J.type&&(j+="Z")}return j},pe.prototype.toSVG=function(w){var I=(I='<path d="')+this.toPathData(w)+'"';return this.fill&&"black"!==this.fill&&(I+=null===this.fill?' fill="none"':' fill="'+this.fill+'"'),this.stroke&&(I+=' stroke="'+this.stroke+'" stroke-width="'+this.strokeWidth+'"'),I+"/>"},pe.prototype.toDOMElement=function(I){I=this.toPathData(I);var j=document.createElementNS("http://www.w3.org/2000/svg","path");return j.setAttribute("d",I),j};var P={fail:Ae,argument:$,assert:$},K={},te={},fe={};function ve(w){return function(){return w}}te.BYTE=function(w){return P.argument(0<=w&&w<=255,"Byte value should be between 0 and 255."),[w]},fe.BYTE=ve(1),te.CHAR=function(w){return[w.charCodeAt(0)]},fe.CHAR=ve(1),te.CHARARRAY=function(w){for(var I=[],j=0;j<w.length;j+=1)I[j]=w.charCodeAt(j);return I},fe.CHARARRAY=function(w){return w.length},te.USHORT=function(w){return[w>>8&255,255&w]},fe.USHORT=ve(2),te.SHORT=function(w){return[(w=32768<=w?-(65536-w):w)>>8&255,255&w]},fe.SHORT=ve(2),te.UINT24=function(w){return[w>>16&255,w>>8&255,255&w]},fe.UINT24=ve(3),te.ULONG=function(w){return[w>>24&255,w>>16&255,w>>8&255,255&w]},fe.ULONG=ve(4),te.LONG=function(w){return[(w=2147483648<=w?-(4294967296-w):w)>>24&255,w>>16&255,w>>8&255,255&w]},fe.LONG=ve(4),te.FIXED=te.ULONG,fe.FIXED=fe.ULONG,te.FWORD=te.SHORT,fe.FWORD=fe.SHORT,te.UFWORD=te.USHORT,fe.UFWORD=fe.USHORT,te.LONGDATETIME=function(w){return[0,0,0,0,w>>24&255,w>>16&255,w>>8&255,255&w]},fe.LONGDATETIME=ve(8),te.TAG=function(w){return P.argument(4===w.length,"Tag should be exactly 4 ASCII characters."),[w.charCodeAt(0),w.charCodeAt(1),w.charCodeAt(2),w.charCodeAt(3)]},fe.TAG=ve(4),te.Card8=te.BYTE,fe.Card8=fe.BYTE,te.Card16=te.USHORT,fe.Card16=fe.USHORT,te.OffSize=te.BYTE,fe.OffSize=fe.BYTE,te.SID=te.USHORT,fe.SID=fe.USHORT,te.NUMBER=function(w){return-107<=w&&w<=107?[w+139]:108<=w&&w<=1131?[247+((w-=108)>>8),255&w]:-1131<=w&&w<=-108?[251+((w=-w-108)>>8),255&w]:-32768<=w&&w<=32767?te.NUMBER16(w):te.NUMBER32(w)},fe.NUMBER=function(w){return te.NUMBER(w).length},te.NUMBER16=function(w){return[28,w>>8&255,255&w]},fe.NUMBER16=ve(3),te.NUMBER32=function(w){return[29,w>>24&255,w>>16&255,w>>8&255,255&w]},fe.NUMBER32=ve(5),te.REAL=function(w){for(var I=w.toString(),j=/\.(\d*?)(?:9{5,20}|0{5,20})\d{0,2}(?:e(.+)|$)/.exec(I),V=(j&&(j=parseFloat("1e"+((j[2]?+j[2]:0)+j[1].length)),I=(Math.round(w*j)/j).toString()),""),J=0,se=I.length;J<se;J+=1){var ae=I[J];V+="e"===ae?"-"===I[++J]?"c":"b":"."===ae?"a":"-"===ae?"e":ae}for(var me=[30],De=0,_e=(V+=1&V.length?"f":"ff").length;De<_e;De+=2)me.push(parseInt(V.substr(De,2),16));return me},fe.REAL=function(w){return te.REAL(w).length},te.NAME=te.CHARARRAY,fe.NAME=fe.CHARARRAY,te.STRING=te.CHARARRAY,fe.STRING=fe.CHARARRAY,K.UTF8=function(w,I,j){for(var V=[],J=j,se=0;se<J;se++,I+=1)V[se]=w.getUint8(I);return String.fromCharCode.apply(null,V)},K.UTF16=function(w,I,j){for(var V=[],J=j/2,se=0;se<J;se++,I+=2)V[se]=w.getUint16(I);return String.fromCharCode.apply(null,V)},te.UTF16=function(w){for(var I=[],j=0;j<w.length;j+=1){var V=w.charCodeAt(j);I[I.length]=V>>8&255,I[I.length]=255&V}return I},fe.UTF16=function(w){return 2*w.length};var Te,Ie={"x-mac-croatian":"\xc4\xc5\xc7\xc9\xd1\xd6\xdc\xe1\xe0\xe2\xe4\xe3\xe5\xe7\xe9\xe8\xea\xeb\xed\xec\xee\xef\xf1\xf3\xf2\xf4\xf6\xf5\xfa\xf9\xfb\xfc\u2020\xb0\xa2\xa3\xa7\u2022\xb6\xdf\xae\u0160\u2122\xb4\xa8\u2260\u017d\xd8\u221e\xb1\u2264\u2265\u2206\xb5\u2202\u2211\u220f\u0161\u222b\xaa\xba\u03a9\u017e\xf8\xbf\xa1\xac\u221a\u0192\u2248\u0106\xab\u010c\u2026\xa0\xc0\xc3\xd5\u0152\u0153\u0110\u2014\u201c\u201d\u2018\u2019\xf7\u25ca\uf8ff\xa9\u2044\u20ac\u2039\u203a\xc6\xbb\u2013\xb7\u201a\u201e\u2030\xc2\u0107\xc1\u010d\xc8\xcd\xce\xcf\xcc\xd3\xd4\u0111\xd2\xda\xdb\xd9\u0131\u02c6\u02dc\xaf\u03c0\xcb\u02da\xb8\xca\xe6\u02c7","x-mac-cyrillic":"\u0410\u0411\u0412\u0413\u0414\u0415\u0416\u0417\u0418\u0419\u041a\u041b\u041c\u041d\u041e\u041f\u0420\u0421\u0422\u0423\u0424\u0425\u0426\u0427\u0428\u0429\u042a\u042b\u042c\u042d\u042e\u042f\u2020\xb0\u0490\xa3\xa7\u2022\xb6\u0406\xae\xa9\u2122\u0402\u0452\u2260\u0403\u0453\u221e\xb1\u2264\u2265\u0456\xb5\u0491\u0408\u0404\u0454\u0407\u0457\u0409\u0459\u040a\u045a\u0458\u0405\xac\u221a\u0192\u2248\u2206\xab\xbb\u2026\xa0\u040b\u045b\u040c\u045c\u0455\u2013\u2014\u201c\u201d\u2018\u2019\xf7\u201e\u040e\u045e\u040f\u045f\u2116\u0401\u0451\u044f\u0430\u0431\u0432\u0433\u0434\u0435\u0436\u0437\u0438\u0439\u043a\u043b\u043c\u043d\u043e\u043f\u0440\u0441\u0442\u0443\u0444\u0445\u0446\u0447\u0448\u0449\u044a\u044b\u044c\u044d\u044e","x-mac-gaelic":"\xc4\xc5\xc7\xc9\xd1\xd6\xdc\xe1\xe0\xe2\xe4\xe3\xe5\xe7\xe9\xe8\xea\xeb\xed\xec\xee\xef\xf1\xf3\xf2\xf4\xf6\xf5\xfa\xf9\xfb\xfc\u2020\xb0\xa2\xa3\xa7\u2022\xb6\xdf\xae\xa9\u2122\xb4\xa8\u2260\xc6\xd8\u1e02\xb1\u2264\u2265\u1e03\u010a\u010b\u1e0a\u1e0b\u1e1e\u1e1f\u0120\u0121\u1e40\xe6\xf8\u1e41\u1e56\u1e57\u027c\u0192\u017f\u1e60\xab\xbb\u2026\xa0\xc0\xc3\xd5\u0152\u0153\u2013\u2014\u201c\u201d\u2018\u2019\u1e61\u1e9b\xff\u0178\u1e6a\u20ac\u2039\u203a\u0176\u0177\u1e6b\xb7\u1ef2\u1ef3\u204a\xc2\xca\xc1\xcb\xc8\xcd\xce\xcf\xcc\xd3\xd4\u2663\xd2\xda\xdb\xd9\u0131\xdd\xfd\u0174\u0175\u1e84\u1e85\u1e80\u1e81\u1e82\u1e83","x-mac-greek":"\xc4\xb9\xb2\xc9\xb3\xd6\xdc\u0385\xe0\xe2\xe4\u0384\xa8\xe7\xe9\xe8\xea\xeb\xa3\u2122\xee\xef\u2022\xbd\u2030\xf4\xf6\xa6\u20ac\xf9\xfb\xfc\u2020\u0393\u0394\u0398\u039b\u039e\u03a0\xdf\xae\xa9\u03a3\u03aa\xa7\u2260\xb0\xb7\u0391\xb1\u2264\u2265\xa5\u0392\u0395\u0396\u0397\u0399\u039a\u039c\u03a6\u03ab\u03a8\u03a9\u03ac\u039d\xac\u039f\u03a1\u2248\u03a4\xab\xbb\u2026\xa0\u03a5\u03a7\u0386\u0388\u0153\u2013\u2015\u201c\u201d\u2018\u2019\xf7\u0389\u038a\u038c\u038e\u03ad\u03ae\u03af\u03cc\u038f\u03cd\u03b1\u03b2\u03c8\u03b4\u03b5\u03c6\u03b3\u03b7\u03b9\u03be\u03ba\u03bb\u03bc\u03bd\u03bf\u03c0\u03ce\u03c1\u03c3\u03c4\u03b8\u03c9\u03c2\u03c7\u03c5\u03b6\u03ca\u03cb\u0390\u03b0\xad","x-mac-icelandic":"\xc4\xc5\xc7\xc9\xd1\xd6\xdc\xe1\xe0\xe2\xe4\xe3\xe5\xe7\xe9\xe8\xea\xeb\xed\xec\xee\xef\xf1\xf3\xf2\xf4\xf6\xf5\xfa\xf9\xfb\xfc\xdd\xb0\xa2\xa3\xa7\u2022\xb6\xdf\xae\xa9\u2122\xb4\xa8\u2260\xc6\xd8\u221e\xb1\u2264\u2265\xa5\xb5\u2202\u2211\u220f\u03c0\u222b\xaa\xba\u03a9\xe6\xf8\xbf\xa1\xac\u221a\u0192\u2248\u2206\xab\xbb\u2026\xa0\xc0\xc3\xd5\u0152\u0153\u2013\u2014\u201c\u201d\u2018\u2019\xf7\u25ca\xff\u0178\u2044\u20ac\xd0\xf0\xde\xfe\xfd\xb7\u201a\u201e\u2030\xc2\xca\xc1\xcb\xc8\xcd\xce\xcf\xcc\xd3\xd4\uf8ff\xd2\xda\xdb\xd9\u0131\u02c6\u02dc\xaf\u02d8\u02d9\u02da\xb8\u02dd\u02db\u02c7","x-mac-inuit":"\u1403\u1404\u1405\u1406\u140a\u140b\u1431\u1432\u1433\u1434\u1438\u1439\u1449\u144e\u144f\u1450\u1451\u1455\u1456\u1466\u146d\u146e\u146f\u1470\u1472\u1473\u1483\u148b\u148c\u148d\u148e\u1490\u1491\xb0\u14a1\u14a5\u14a6\u2022\xb6\u14a7\xae\xa9\u2122\u14a8\u14aa\u14ab\u14bb\u14c2\u14c3\u14c4\u14c5\u14c7\u14c8\u14d0\u14ef\u14f0\u14f1\u14f2\u14f4\u14f5\u1505\u14d5\u14d6\u14d7\u14d8\u14da\u14db\u14ea\u1528\u1529\u152a\u152b\u152d\u2026\xa0\u152e\u153e\u1555\u1556\u1557\u2013\u2014\u201c\u201d\u2018\u2019\u1558\u1559\u155a\u155d\u1546\u1547\u1548\u1549\u154b\u154c\u1550\u157f\u1580\u1581\u1582\u1583\u1584\u1585\u158f\u1590\u1591\u1592\u1593\u1594\u1595\u1671\u1672\u1673\u1674\u1675\u1676\u1596\u15a0\u15a1\u15a2\u15a3\u15a4\u15a5\u15a6\u157c\u0141\u0142","x-mac-ce":"\xc4\u0100\u0101\xc9\u0104\xd6\xdc\xe1\u0105\u010c\xe4\u010d\u0106\u0107\xe9\u0179\u017a\u010e\xed\u010f\u0112\u0113\u0116\xf3\u0117\xf4\xf6\xf5\xfa\u011a\u011b\xfc\u2020\xb0\u0118\xa3\xa7\u2022\xb6\xdf\xae\xa9\u2122\u0119\xa8\u2260\u0123\u012e\u012f\u012a\u2264\u2265\u012b\u0136\u2202\u2211\u0142\u013b\u013c\u013d\u013e\u0139\u013a\u0145\u0146\u0143\xac\u221a\u0144\u0147\u2206\xab\xbb\u2026\xa0\u0148\u0150\xd5\u0151\u014c\u2013\u2014\u201c\u201d\u2018\u2019\xf7\u25ca\u014d\u0154\u0155\u0158\u2039\u203a\u0159\u0156\u0157\u0160\u201a\u201e\u0161\u015a\u015b\xc1\u0164\u0165\xcd\u017d\u017e\u016a\xd3\xd4\u016b\u016e\xda\u016f\u0170\u0171\u0172\u0173\xdd\xfd\u0137\u017b\u0141\u017c\u0122\u02c7",macintosh:"\xc4\xc5\xc7\xc9\xd1\xd6\xdc\xe1\xe0\xe2\xe4\xe3\xe5\xe7\xe9\xe8\xea\xeb\xed\xec\xee\xef\xf1\xf3\xf2\xf4\xf6\xf5\xfa\xf9\xfb\xfc\u2020\xb0\xa2\xa3\xa7\u2022\xb6\xdf\xae\xa9\u2122\xb4\xa8\u2260\xc6\xd8\u221e\xb1\u2264\u2265\xa5\xb5\u2202\u2211\u220f\u03c0\u222b\xaa\xba\u03a9\xe6\xf8\xbf\xa1\xac\u221a\u0192\u2248\u2206\xab\xbb\u2026\xa0\xc0\xc3\xd5\u0152\u0153\u2013\u2014\u201c\u201d\u2018\u2019\xf7\u25ca\xff\u0178\u2044\u20ac\u2039\u203a\ufb01\ufb02\u2021\xb7\u201a\u201e\u2030\xc2\xca\xc1\xcb\xc8\xcd\xce\xcf\xcc\xd3\xd4\uf8ff\xd2\xda\xdb\xd9\u0131\u02c6\u02dc\xaf\u02d8\u02d9\u02da\xb8\u02dd\u02db\u02c7","x-mac-romanian":"\xc4\xc5\xc7\xc9\xd1\xd6\xdc\xe1\xe0\xe2\xe4\xe3\xe5\xe7\xe9\xe8\xea\xeb\xed\xec\xee\xef\xf1\xf3\xf2\xf4\xf6\xf5\xfa\xf9\xfb\xfc\u2020\xb0\xa2\xa3\xa7\u2022\xb6\xdf\xae\xa9\u2122\xb4\xa8\u2260\u0102\u0218\u221e\xb1\u2264\u2265\xa5\xb5\u2202\u2211\u220f\u03c0\u222b\xaa\xba\u03a9\u0103\u0219\xbf\xa1\xac\u221a\u0192\u2248\u2206\xab\xbb\u2026\xa0\xc0\xc3\xd5\u0152\u0153\u2013\u2014\u201c\u201d\u2018\u2019\xf7\u25ca\xff\u0178\u2044\u20ac\u2039\u203a\u021a\u021b\u2021\xb7\u201a\u201e\u2030\xc2\xca\xc1\xcb\xc8\xcd\xce\xcf\xcc\xd3\xd4\uf8ff\xd2\xda\xdb\xd9\u0131\u02c6\u02dc\xaf\u02d8\u02d9\u02da\xb8\u02dd\u02db\u02c7","x-mac-turkish":"\xc4\xc5\xc7\xc9\xd1\xd6\xdc\xe1\xe0\xe2\xe4\xe3\xe5\xe7\xe9\xe8\xea\xeb\xed\xec\xee\xef\xf1\xf3\xf2\xf4\xf6\xf5\xfa\xf9\xfb\xfc\u2020\xb0\xa2\xa3\xa7\u2022\xb6\xdf\xae\xa9\u2122\xb4\xa8\u2260\xc6\xd8\u221e\xb1\u2264\u2265\xa5\xb5\u2202\u2211\u220f\u03c0\u222b\xaa\xba\u03a9\xe6\xf8\xbf\xa1\xac\u221a\u0192\u2248\u2206\xab\xbb\u2026\xa0\xc0\xc3\xd5\u0152\u0153\u2013\u2014\u201c\u201d\u2018\u2019\xf7\u25ca\xff\u0178\u011e\u011f\u0130\u0131\u015e\u015f\u2021\xb7\u201a\u201e\u2030\xc2\xca\xc1\xcb\xc8\xcd\xce\xcf\xcc\xd3\xd4\uf8ff\xd2\xda\xdb\xd9\uf8a0\u02c6\u02dc\xaf\u02d8\u02d9\u02da\xb8\u02dd\u02db\u02c7"},we=(K.MACSTRING=function(w,I,j,V){var J=Ie[V];if(void 0!==J){for(var se="",ae=0;ae<j;ae++){var me=w.getUint8(I+ae);se+=me<=127?String.fromCharCode(me):J[127&me]}return se}},"function"==typeof WeakMap&&new WeakMap);function Pe(w){return-128<=w&&w<=127}te.MACSTRING=function(w,I){var j=function(ae){if(!Te)for(var me in Te={},Ie)Te[me]=new String(me);var De=Te[ae];if(void 0!==De){if(we){var _e=we.get(De);if(void 0!==_e)return _e}var We=Ie[ae];if(void 0!==We){for(var it={},Ze=0;Ze<We.length;Ze++)it[We.charCodeAt(Ze)]=Ze+128;return we&&we.set(De,it),it}}}(I);if(void 0!==j){for(var V=[],J=0;J<w.length;J++){var se=w.charCodeAt(J);if(128<=se&&void 0===(se=j[se]))return;V[J]=se}return V}},fe.MACSTRING=function(w,I){return void 0!==(w=te.MACSTRING(w,I))?w.length:0},te.VARDELTAS=function(w){for(var V=0,I=[];V<w.length;){var j=w[V];V=(0===j?function(J,se,ae){for(var me=0,De=J.length;se<De&&me<64&&0===J[se];)++se,++me;return ae.push(128|me-1),se}:-128<=j&&j<=127?function(J,se,ae){for(var me=0,De=J.length,_e=se;_e<De&&me<64;){var We=J[_e];if(!Pe(We)||0===We&&_e+1<De&&0===J[_e+1])break;++_e,++me}ae.push(me-1);for(var it=se;it<_e;++it)ae.push(J[it]+256&255);return _e}:function(J,se,ae){for(var me=0,De=J.length,_e=se;_e<De&&me<64;){var We=J[_e];if(0===We||Pe(We)&&_e+1<De&&Pe(J[_e+1]))break;++_e,++me}ae.push(64|me-1);for(var it=se;it<_e;++it){var Ze=J[it];ae.push(Ze+65536>>8&255,Ze+256&255)}return _e})(w,V,I)}return I},te.INDEX=function(w){for(var I=1,j=[I],V=[],J=0;J<w.length;J+=1){var se=te.OBJECT(w[J]);Array.prototype.push.apply(V,se),j.push(I+=se.length)}if(0===V.length)return[0,0];for(var ae=[],me=1+Math.floor(Math.log(I)/Math.log(2))/8|0,De=[void 0,te.BYTE,te.USHORT,te.UINT24,te.ULONG][me],_e=0;_e<j.length;_e+=1){var We=De(j[_e]);Array.prototype.push.apply(ae,We)}return Array.prototype.concat(te.Card16(w.length),te.OffSize(me),ae,V)},fe.INDEX=function(w){return te.INDEX(w).length},te.DICT=function(w){for(var I=[],j=Object.keys(w),V=j.length,J=0;J<V;J+=1){var se=parseInt(j[J],0),ae=w[se];I=(I=I.concat(te.OPERAND(ae.value,ae.type))).concat(te.OPERATOR(se))}return I},fe.DICT=function(w){return te.DICT(w).length},te.OPERATOR=function(w){return w<1200?[w]:[12,w-1200]},te.OPERAND=function(w,I){var j=[];if(Array.isArray(I))for(var V=0;V<I.length;V+=1)P.argument(w.length===I.length,"Not enough arguments given for type"+I),j=j.concat(te.OPERAND(w[V],I[V]));else if("SID"===I)j=j.concat(te.NUMBER(w));else if("offset"===I)j=j.concat(te.NUMBER32(w));else if("number"===I)j=j.concat(te.NUMBER(w));else{if("real"!==I)throw new Error("Unknown operand type "+I);j=j.concat(te.REAL(w))}return j},te.OP=te.BYTE,fe.OP=fe.BYTE;var je="function"==typeof WeakMap&&new WeakMap;function be(w,I,j){for(var V=0;V<I.length;V+=1){var J=I[V];this[J.name]=J.value}if(this.tableName=w,this.fields=I,j)for(var se=Object.keys(j),ae=0;ae<se.length;ae+=1){var me=se[ae];void 0!==this[me]&&(this[me]=j[me])}}function Oe(w,I,j){void 0===j&&(j=I.length);var V=new Array(I.length+1);V[0]={name:w+"Count",type:"USHORT",value:j};for(var J=0;J<I.length;J++)V[J+1]={name:w+J,type:"USHORT",value:I[J]};return V}function Ge(w,I,j){var V=I.length,J=new Array(V+1);J[0]={name:w+"Count",type:"USHORT",value:V};for(var se=0;se<V;se++)J[se+1]={name:w+se,type:"TABLE",value:j(I[se],se)};return J}function Ke(w,I,j){var V=I.length,J=[];J[0]={name:w+"Count",type:"USHORT",value:V};for(var se=0;se<V;se++)J=J.concat(j(I[se],se));return J}function ze(w){1===w.format?be.call(this,"coverageTable",[{name:"coverageFormat",type:"USHORT",value:1}].concat(Oe("glyph",w.glyphs))):P.assert(!1,"Can't create coverage table format 2 yet.")}function qe(w){be.call(this,"scriptListTable",Ke("scriptRecord",w,function(I,j){var V=I.script,J=V.defaultLangSys;return P.assert(!!J,"Unable to write GSUB: script "+I.tag+" has no default language system."),[{name:"scriptTag"+j,type:"TAG",value:I.tag},{name:"script"+j,type:"TABLE",value:new be("scriptTable",[{name:"defaultLangSys",type:"TABLE",value:new be("defaultLangSys",[{name:"lookupOrder",type:"USHORT",value:0},{name:"reqFeatureIndex",type:"USHORT",value:J.reqFeatureIndex}].concat(Oe("featureIndex",J.featureIndexes)))}].concat(Ke("langSys",V.langSysRecords,function(se,ae){var me=se.langSys;return[{name:"langSysTag"+ae,type:"TAG",value:se.tag},{name:"langSys"+ae,type:"TABLE",value:new be("langSys",[{name:"lookupOrder",type:"USHORT",value:0},{name:"reqFeatureIndex",type:"USHORT",value:me.reqFeatureIndex}].concat(Oe("featureIndex",me.featureIndexes)))}]})))}]}))}function et(w){be.call(this,"featureListTable",Ke("featureRecord",w,function(I,j){var V=I.feature;return[{name:"featureTag"+j,type:"TAG",value:I.tag},{name:"feature"+j,type:"TABLE",value:new be("featureTable",[{name:"featureParams",type:"USHORT",value:V.featureParams}].concat(Oe("lookupListIndex",V.lookupListIndexes)))}]}))}function _t(w,I){be.call(this,"lookupListTable",Ge("lookup",w,function(j){var V=I[j.lookupType];return P.assert(!!V,"Unable to write GSUB lookup type "+j.lookupType+" tables."),new be("lookupTable",[{name:"lookupType",type:"USHORT",value:j.lookupType},{name:"lookupFlag",type:"USHORT",value:j.lookupFlag}].concat(Ge("subtable",j.subtables,V)))}))}te.CHARSTRING=function(w){if(je){var I=je.get(w);if(void 0!==I)return I}for(var se=[],j=w.length,V=0;V<j;V+=1){var J=w[V];se=se.concat(te[J.type](J.value))}return je&&je.set(w,se),se},fe.CHARSTRING=function(w){return te.CHARSTRING(w).length},te.OBJECT=function(w){var I=te[w.type];return P.argument(void 0!==I,"No encoding function for type "+w.type),I(w.value)},fe.OBJECT=function(w){var I=fe[w.type];return P.argument(void 0!==I,"No sizeOf function for type "+w.type),I(w.value)},te.TABLE=function(w){for(var I=[],j=w.fields.length,V=[],J=[],se=0;se<j;se+=1){var ae=w.fields[se],me=(P.argument(void 0!==(De=te[ae.type]),"No encoding function for field type "+ae.type+" ("+ae.name+")"),w[ae.name]),De=De(me=void 0===me?ae.value:me);"TABLE"===ae.type?(J.push(I.length),I=I.concat([0,0]),V.push(De)):I=I.concat(De)}for(var _e=0;_e<V.length;_e+=1){var We=J[_e],it=I.length;P.argument(it<65536,"Table "+w.tableName+" too big."),I[We]=it>>8,I[We+1]=255&it,I=I.concat(V[_e])}return I},fe.TABLE=function(w){for(var I=0,j=w.fields.length,V=0;V<j;V+=1){var J=w.fields[V],se=fe[J.type],ae=(P.argument(void 0!==se,"No sizeOf function for field type "+J.type+" ("+J.name+")"),w[J.name]);I+=se(ae=void 0===ae?J.value:ae),"TABLE"===J.type&&(I+=2)}return I},te.RECORD=te.TABLE,fe.RECORD=fe.TABLE,te.LITERAL=function(w){return w},fe.LITERAL=function(w){return w.length},be.prototype.encode=function(){return te.TABLE(this)},be.prototype.sizeOf=function(){return fe.TABLE(this)};var ot={Table:be,Record:be,Coverage:(ze.prototype=Object.create(be.prototype)).constructor=ze,ScriptList:(qe.prototype=Object.create(be.prototype)).constructor=qe,FeatureList:(et.prototype=Object.create(be.prototype)).constructor=et,LookupList:(_t.prototype=Object.create(be.prototype)).constructor=_t,ushortList:Oe,tableList:Ge,recordList:Ke};function Kt(w,I){return w.getUint8(I)}function $t(w,I){return w.getUint16(I,!1)}function Xt(w,I){return w.getUint32(I,!1)}function ln(w,I){return w.getInt16(I,!1)+w.getUint16(I+2,!1)/65535}var Wt={byte:1,uShort:2,short:2,uLong:4,fixed:4,longDateTime:8,tag:4};function Ye(w,I){this.data=w,this.offset=I,this.relativeOffset=0}Ye.prototype.parseByte=function(){var w=this.data.getUint8(this.offset+this.relativeOffset);return this.relativeOffset+=1,w},Ye.prototype.parseChar=function(){var w=this.data.getInt8(this.offset+this.relativeOffset);return this.relativeOffset+=1,w},Ye.prototype.parseCard8=Ye.prototype.parseByte,Ye.prototype.parseCard16=Ye.prototype.parseUShort=function(){var w=this.data.getUint16(this.offset+this.relativeOffset);return this.relativeOffset+=2,w},Ye.prototype.parseSID=Ye.prototype.parseUShort,Ye.prototype.parseOffset16=Ye.prototype.parseUShort,Ye.prototype.parseShort=function(){var w=this.data.getInt16(this.offset+this.relativeOffset);return this.relativeOffset+=2,w},Ye.prototype.parseF2Dot14=function(){var w=this.data.getInt16(this.offset+this.relativeOffset)/16384;return this.relativeOffset+=2,w},Ye.prototype.parseOffset32=Ye.prototype.parseULong=function(){var w=Xt(this.data,this.offset+this.relativeOffset);return this.relativeOffset+=4,w},Ye.prototype.parseFixed=function(){var w=ln(this.data,this.offset+this.relativeOffset);return this.relativeOffset+=4,w},Ye.prototype.parseString=function(w){var I=this.data,j=this.offset+this.relativeOffset,V="";this.relativeOffset+=w;for(var J=0;J<w;J++)V+=String.fromCharCode(I.getUint8(j+J));return V},Ye.prototype.parseTag=function(){return this.parseString(4)},Ye.prototype.parseLongDateTime=function(){var w=Xt(this.data,this.offset+this.relativeOffset+4);return w-=2082844800,this.relativeOffset+=8,w},Ye.prototype.parseVersion=function(w){var I=$t(this.data,this.offset+this.relativeOffset),j=$t(this.data,this.offset+this.relativeOffset+2);return this.relativeOffset+=4,I+j/(w=void 0===w?4096:w)/10},Ye.prototype.skip=function(w,I){this.relativeOffset+=Wt[w]*(I=void 0===I?1:I)},Ye.prototype.parseULongList=function(w){void 0===w&&(w=this.parseULong());for(var I=new Array(w),j=this.data,V=this.offset+this.relativeOffset,J=0;J<w;J++)I[J]=j.getUint32(V),V+=4;return this.relativeOffset+=4*w,I},Ye.prototype.parseOffset16List=Ye.prototype.parseUShortList=function(w){void 0===w&&(w=this.parseUShort());for(var I=new Array(w),j=this.data,V=this.offset+this.relativeOffset,J=0;J<w;J++)I[J]=j.getUint16(V),V+=2;return this.relativeOffset+=2*w,I},Ye.prototype.parseShortList=function(w){for(var I=new Array(w),j=this.data,V=this.offset+this.relativeOffset,J=0;J<w;J++)I[J]=j.getInt16(V),V+=2;return this.relativeOffset+=2*w,I},Ye.prototype.parseByteList=function(w){for(var I=new Array(w),j=this.data,V=this.offset+this.relativeOffset,J=0;J<w;J++)I[J]=j.getUint8(V++);return this.relativeOffset+=w,I},Ye.prototype.parseList=function(w,I){I||(I=w,w=this.parseUShort());for(var j=new Array(w),V=0;V<w;V++)j[V]=I.call(this);return j},Ye.prototype.parseList32=function(w,I){I||(I=w,w=this.parseULong());for(var j=new Array(w),V=0;V<w;V++)j[V]=I.call(this);return j},Ye.prototype.parseRecordList=function(w,I){I||(I=w,w=this.parseUShort());for(var j=new Array(w),V=Object.keys(I),J=0;J<w;J++){for(var se={},ae=0;ae<V.length;ae++){var me=V[ae];se[me]=I[me].call(this)}j[J]=se}return j},Ye.prototype.parseRecordList32=function(w,I){I||(I=w,w=this.parseULong());for(var j=new Array(w),V=Object.keys(I),J=0;J<w;J++){for(var se={},ae=0;ae<V.length;ae++){var me=V[ae];se[me]=I[me].call(this)}j[J]=se}return j},Ye.prototype.parseStruct=function(w){if("function"==typeof w)return w.call(this);for(var I=Object.keys(w),j={},V=0;V<I.length;V++){var J=I[V];j[J]=w[J].call(this)}return j},Ye.prototype.parseValueRecord=function(w){var I;if(0!==(w=void 0===w?this.parseUShort():w))return I={},1&w&&(I.xPlacement=this.parseShort()),2&w&&(I.yPlacement=this.parseShort()),4&w&&(I.xAdvance=this.parseShort()),8&w&&(I.yAdvance=this.parseShort()),16&w&&(I.xPlaDevice=void 0,this.parseShort()),32&w&&(I.yPlaDevice=void 0,this.parseShort()),64&w&&(I.xAdvDevice=void 0,this.parseShort()),128&w&&(I.yAdvDevice=void 0,this.parseShort()),I},Ye.prototype.parseValueRecordList=function(){for(var w=this.parseUShort(),I=this.parseUShort(),j=new Array(I),V=0;V<I;V++)j[V]=this.parseValueRecord(w);return j},Ye.prototype.parsePointer=function(w){var I=this.parseOffset16();if(0<I)return new Ye(this.data,this.offset+I).parseStruct(w)},Ye.prototype.parsePointer32=function(w){var I=this.parseOffset32();if(0<I)return new Ye(this.data,this.offset+I).parseStruct(w)},Ye.prototype.parseListOfLists=function(w){for(var I=this.parseOffset16List(),j=I.length,V=this.relativeOffset,J=new Array(j),se=0;se<j;se++){var ae=I[se];if(0===ae)J[se]=void 0;else if(this.relativeOffset=ae,w){for(var me=this.parseOffset16List(),De=new Array(me.length),_e=0;_e<me.length;_e++)this.relativeOffset=ae+me[_e],De[_e]=w.call(this);J[se]=De}else J[se]=this.parseUShortList()}return this.relativeOffset=V,J},Ye.prototype.parseCoverage=function(){var w=this.offset+this.relativeOffset,I=this.parseUShort(),j=this.parseUShort();if(1===I)return{format:1,glyphs:this.parseUShortList(j)};if(2!==I)throw new Error("0x"+w.toString(16)+": Coverage format must be 1 or 2.");for(var V=new Array(j),J=0;J<j;J++)V[J]={start:this.parseUShort(),end:this.parseUShort(),index:this.parseUShort()};return{format:2,ranges:V}},Ye.prototype.parseClassDef=function(){var w=this.offset+this.relativeOffset,I=this.parseUShort();if(1===I)return{format:1,startGlyph:this.parseUShort(),classes:this.parseUShortList()};if(2===I)return{format:2,ranges:this.parseRecordList({start:Ye.uShort,end:Ye.uShort,classId:Ye.uShort})};throw new Error("0x"+w.toString(16)+": ClassDef format must be 1 or 2.")},Ye.list=function(w,I){return function(){return this.parseList(w,I)}},Ye.list32=function(w,I){return function(){return this.parseList32(w,I)}},Ye.recordList=function(w,I){return function(){return this.parseRecordList(w,I)}},Ye.recordList32=function(w,I){return function(){return this.parseRecordList32(w,I)}},Ye.pointer=function(w){return function(){return this.parsePointer(w)}},Ye.pointer32=function(w){return function(){return this.parsePointer32(w)}},Ye.tag=Ye.prototype.parseTag,Ye.byte=Ye.prototype.parseByte,Ye.uShort=Ye.offset16=Ye.prototype.parseUShort,Ye.uShortList=Ye.prototype.parseUShortList,Ye.uLong=Ye.offset32=Ye.prototype.parseULong,Ye.uLongList=Ye.prototype.parseULongList,Ye.struct=Ye.prototype.parseStruct,Ye.coverage=Ye.prototype.parseCoverage,Ye.classDef=Ye.prototype.parseClassDef;var vt={reserved:Ye.uShort,reqFeatureIndex:Ye.uShort,featureIndexes:Ye.uShortList},rt=(Ye.prototype.parseScriptList=function(){return this.parsePointer(Ye.recordList({tag:Ye.tag,script:Ye.pointer({defaultLangSys:Ye.pointer(vt),langSysRecords:Ye.recordList({tag:Ye.tag,langSys:Ye.pointer(vt)})})}))||[]},Ye.prototype.parseFeatureList=function(){return this.parsePointer(Ye.recordList({tag:Ye.tag,feature:Ye.pointer({featureParams:Ye.offset16,lookupListIndexes:Ye.uShortList})}))||[]},Ye.prototype.parseLookupList=function(w){return this.parsePointer(Ye.list(Ye.pointer(function(){var I=this.parseUShort(),j=(P.argument(1<=I&&I<=9,"GPOS/GSUB lookup type "+I+" unknown."),this.parseUShort()),V=16&j;return{lookupType:I,lookupFlag:j,subtables:this.parseList(Ye.pointer(w[I])),markFilteringSet:V?this.parseUShort():void 0}})))||[]},Ye.prototype.parseFeatureVariationsList=function(){return this.parsePointer32(function(){var w=this.parseUShort(),I=this.parseUShort();return P.argument(1===w&&I<1,"GPOS/GSUB feature variations table unknown."),this.parseRecordList32({conditionSetOffset:Ye.offset32,featureTableSubstitutionOffset:Ye.offset32})})||[]},{getByte:Kt,getCard8:Kt,getUShort:$t,getCard16:$t,getShort:function(w,I){return w.getInt16(I,!1)},getULong:Xt,getFixed:ln,getTag:function(w,I){for(var j="",V=I;V<I+4;V+=1)j+=String.fromCharCode(w.getInt8(V));return j},getOffset:function(w,I,j){for(var V=0,J=0;J<j;J+=1)V=(V<<=8)+w.getUint8(I+J);return V},getBytes:function(w,I,j){for(var V=[],J=I;J<j;J+=1)V.push(w.getUint8(J));return V},bytesToString:function(w){for(var I="",j=0;j<w.length;j+=1)I+=String.fromCharCode(w[j]);return I},Parser:Ye}),ge_parse=function(w,I){for(var j={},V=(j.version=rt.getUShort(w,I),P.argument(0===j.version,"cmap table version should be 0."),j.numTables=rt.getUShort(w,I+2),-1),J=j.numTables-1;0<=J;--J){var se=rt.getUShort(w,I+4+8*J),ae=rt.getUShort(w,I+4+8*J+2);if(3===se&&(0===ae||1===ae||10===ae)||0===se&&(0===ae||1===ae||2===ae||3===ae||4===ae)){V=rt.getULong(w,I+4+8*J+4);break}}if(-1===V)throw new Error("No valid cmap sub-tables found.");var me=new rt.Parser(w,I+V);if(j.format=me.parseUShort(),12===j.format){var De,_e=j,We=me;We.parseUShort(),_e.length=We.parseULong(),_e.language=We.parseULong(),_e.groupCount=De=We.parseULong(),_e.glyphIndexMap={};for(var it=0;it<De;it+=1)for(var Ze=We.parseULong(),Ue=We.parseULong(),bt=We.parseULong(),ct=Ze;ct<=Ue;ct+=1)_e.glyphIndexMap[ct]=bt,bt++}else{if(4!==j.format)throw new Error("Only format 4 and 12 cmap tables are supported (found format "+j.format+").");var ht=j,at=w,nt=I,gn=V;ht.length=me.parseUShort(),ht.language=me.parseUShort(),ht.segCount=un=me.parseUShort()>>1,me.skip("uShort",3),ht.glyphIndexMap={};for(var un,Mn=new rt.Parser(at,nt+gn+14),Tn=new rt.Parser(at,nt+gn+16+2*un),rr=new rt.Parser(at,nt+gn+16+4*un),Yr=new rt.Parser(at,nt+gn+16+6*un),Nr=nt+gn+16+8*un,oi=0;oi<un-1;oi+=1)for(var ts=void 0,ns=Mn.parseUShort(),Fs=Tn.parseUShort(),qr=rr.parseShort(),Qr=Yr.parseUShort(),Tr=Fs;Tr<=ns;Tr+=1)0!==Qr?(Nr=(Nr=Yr.offset+Yr.relativeOffset-2)+Qr+2*(Tr-Fs),0!==(ts=rt.getUShort(at,Nr))&&(ts=ts+qr&65535)):ts=Tr+qr&65535,ht.glyphIndexMap[Tr]=ts}return j},ge_make=function(w){for(var I=!0,j=w.length-1;0<j;--j)if(65535<w.get(j).unicode){console.log("Adding CMAP format 12 (needed!)"),I=!1;break}var V,J,se=[{name:"version",type:"USHORT",value:0},{name:"numTables",type:"USHORT",value:I?1:2},{name:"platformID",type:"USHORT",value:3},{name:"encodingID",type:"USHORT",value:1},{name:"offset",type:"ULONG",value:I?12:20}],ae=(se=(se=I?se:se.concat([{name:"cmap12PlatformID",type:"USHORT",value:3},{name:"cmap12EncodingID",type:"USHORT",value:10},{name:"cmap12Offset",type:"ULONG",value:0}])).concat([{name:"format",type:"USHORT",value:4},{name:"cmap4Length",type:"USHORT",value:0},{name:"language",type:"USHORT",value:0},{name:"segCountX2",type:"USHORT",value:0},{name:"searchRange",type:"USHORT",value:0},{name:"entrySelector",type:"USHORT",value:0},{name:"rangeShift",type:"USHORT",value:0}]),new ot.Table("cmap",se));for(ae.segments=[],j=0;j<w.length;j+=1){for(var me=w.get(j),De=0;De<me.unicodes.length;De+=1)ae.segments.push({end:V=me.unicodes[De],start:V,delta:-(V-(J=j)),offset:0,glyphIndex:J});ae.segments=ae.segments.sort(function(nt,gn){return nt.start-gn.start})}ae.segments.push({end:65535,start:65535,delta:1,offset:0});var _e=ae.segments.length,We=0,it=[],Ze=[],Ue=[],bt=[],ct=[],ht=[];for(j=0;j<_e;j+=1){var at=ae.segments[j];at.end<=65535&&at.start<=65535?(it=it.concat({name:"end_"+j,type:"USHORT",value:at.end}),Ze=Ze.concat({name:"start_"+j,type:"USHORT",value:at.start}),Ue=Ue.concat({name:"idDelta_"+j,type:"SHORT",value:at.delta}),bt=bt.concat({name:"idRangeOffset_"+j,type:"USHORT",value:at.offset}),void 0!==at.glyphId&&(ct=ct.concat({name:"glyph_"+j,type:"USHORT",value:at.glyphId}))):We+=1,I||void 0===at.glyphIndex||(ht=(ht=(ht=ht.concat({name:"cmap12Start_"+j,type:"ULONG",value:at.start})).concat({name:"cmap12End_"+j,type:"ULONG",value:at.end})).concat({name:"cmap12Glyph_"+j,type:"ULONG",value:at.glyphIndex}))}return ae.segCountX2=2*(_e-We),ae.searchRange=2*Math.pow(2,Math.floor(Math.log(_e-We)/Math.log(2))),ae.entrySelector=Math.log(ae.searchRange/2)/Math.log(2),ae.rangeShift=ae.segCountX2-ae.searchRange,ae.fields=ae.fields.concat(it),ae.fields.push({name:"reservedPad",type:"USHORT",value:0}),ae.fields=ae.fields.concat(Ze),ae.fields=ae.fields.concat(Ue),ae.fields=ae.fields.concat(bt),ae.fields=ae.fields.concat(ct),ae.cmap4Length=14+2*it.length+2+2*Ze.length+2*Ue.length+2*bt.length+2*ct.length,I||(se=16+4*ht.length,ae.cmap12Offset=20+ae.cmap4Length,ae.fields=ae.fields.concat([{name:"cmap12Format",type:"USHORT",value:12},{name:"cmap12Reserved",type:"USHORT",value:0},{name:"cmap12Length",type:"ULONG",value:se},{name:"cmap12Language",type:"ULONG",value:0},{name:"cmap12nGroups",type:"ULONG",value:ht.length/3}]),ae.fields=ae.fields.concat(ht)),ae},xe=[".notdef","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quoteright","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","quoteleft","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","exclamdown","cent","sterling","fraction","yen","florin","section","currency","quotesingle","quotedblleft","guillemotleft","guilsinglleft","guilsinglright","fi","fl","endash","dagger","daggerdbl","periodcentered","paragraph","bullet","quotesinglbase","quotedblbase","quotedblright","guillemotright","ellipsis","perthousand","questiondown","grave","acute","circumflex","tilde","macron","breve","dotaccent","dieresis","ring","cedilla","hungarumlaut","ogonek","caron","emdash","AE","ordfeminine","Lslash","Oslash","OE","ordmasculine","ae","dotlessi","lslash","oslash","oe","germandbls","onesuperior","logicalnot","mu","trademark","Eth","onehalf","plusminus","Thorn","onequarter","divide","brokenbar","degree","thorn","threequarters","twosuperior","registered","minus","eth","multiply","threesuperior","copyright","Aacute","Acircumflex","Adieresis","Agrave","Aring","Atilde","Ccedilla","Eacute","Ecircumflex","Edieresis","Egrave","Iacute","Icircumflex","Idieresis","Igrave","Ntilde","Oacute","Ocircumflex","Odieresis","Ograve","Otilde","Scaron","Uacute","Ucircumflex","Udieresis","Ugrave","Yacute","Ydieresis","Zcaron","aacute","acircumflex","adieresis","agrave","aring","atilde","ccedilla","eacute","ecircumflex","edieresis","egrave","iacute","icircumflex","idieresis","igrave","ntilde","oacute","ocircumflex","odieresis","ograve","otilde","scaron","uacute","ucircumflex","udieresis","ugrave","yacute","ydieresis","zcaron","exclamsmall","Hungarumlautsmall","dollaroldstyle","dollarsuperior","ampersandsmall","Acutesmall","parenleftsuperior","parenrightsuperior","266 ff","onedotenleader","zerooldstyle","oneoldstyle","twooldstyle","threeoldstyle","fouroldstyle","fiveoldstyle","sixoldstyle","sevenoldstyle","eightoldstyle","nineoldstyle","commasuperior","threequartersemdash","periodsuperior","questionsmall","asuperior","bsuperior","centsuperior","dsuperior","esuperior","isuperior","lsuperior","msuperior","nsuperior","osuperior","rsuperior","ssuperior","tsuperior","ff","ffi","ffl","parenleftinferior","parenrightinferior","Circumflexsmall","hyphensuperior","Gravesmall","Asmall","Bsmall","Csmall","Dsmall","Esmall","Fsmall","Gsmall","Hsmall","Ismall","Jsmall","Ksmall","Lsmall","Msmall","Nsmall","Osmall","Psmall","Qsmall","Rsmall","Ssmall","Tsmall","Usmall","Vsmall","Wsmall","Xsmall","Ysmall","Zsmall","colonmonetary","onefitted","rupiah","Tildesmall","exclamdownsmall","centoldstyle","Lslashsmall","Scaronsmall","Zcaronsmall","Dieresissmall","Brevesmall","Caronsmall","Dotaccentsmall","Macronsmall","figuredash","hypheninferior","Ogoneksmall","Ringsmall","Cedillasmall","questiondownsmall","oneeighth","threeeighths","fiveeighths","seveneighths","onethird","twothirds","zerosuperior","foursuperior","fivesuperior","sixsuperior","sevensuperior","eightsuperior","ninesuperior","zeroinferior","oneinferior","twoinferior","threeinferior","fourinferior","fiveinferior","sixinferior","seveninferior","eightinferior","nineinferior","centinferior","dollarinferior","periodinferior","commainferior","Agravesmall","Aacutesmall","Acircumflexsmall","Atildesmall","Adieresissmall","Aringsmall","AEsmall","Ccedillasmall","Egravesmall","Eacutesmall","Ecircumflexsmall","Edieresissmall","Igravesmall","Iacutesmall","Icircumflexsmall","Idieresissmall","Ethsmall","Ntildesmall","Ogravesmall","Oacutesmall","Ocircumflexsmall","Otildesmall","Odieresissmall","OEsmall","Oslashsmall","Ugravesmall","Uacutesmall","Ucircumflexsmall","Udieresissmall","Yacutesmall","Thornsmall","Ydieresissmall","001.000","001.001","001.002","001.003","Black","Bold","Book","Light","Medium","Regular","Roman","Semibold"],he=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quoteright","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","quoteleft","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","exclamdown","cent","sterling","fraction","yen","florin","section","currency","quotesingle","quotedblleft","guillemotleft","guilsinglleft","guilsinglright","fi","fl","","endash","dagger","daggerdbl","periodcentered","","paragraph","bullet","quotesinglbase","quotedblbase","quotedblright","guillemotright","ellipsis","perthousand","","questiondown","","grave","acute","circumflex","tilde","macron","breve","dotaccent","dieresis","","ring","cedilla","","hungarumlaut","ogonek","caron","emdash","","","","","","","","","","","","","","","","","AE","","ordfeminine","","","","","Lslash","Oslash","OE","ordmasculine","","","","","","ae","","","","dotlessi","","","lslash","oslash","oe","germandbls"],Se=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","space","exclamsmall","Hungarumlautsmall","","dollaroldstyle","dollarsuperior","ampersandsmall","Acutesmall","parenleftsuperior","parenrightsuperior","twodotenleader","onedotenleader","comma","hyphen","period","fraction","zerooldstyle","oneoldstyle","twooldstyle","threeoldstyle","fouroldstyle","fiveoldstyle","sixoldstyle","sevenoldstyle","eightoldstyle","nineoldstyle","colon","semicolon","commasuperior","threequartersemdash","periodsuperior","questionsmall","","asuperior","bsuperior","centsuperior","dsuperior","esuperior","","","isuperior","","","lsuperior","msuperior","nsuperior","osuperior","","","rsuperior","ssuperior","tsuperior","","ff","fi","fl","ffi","ffl","parenleftinferior","","parenrightinferior","Circumflexsmall","hyphensuperior","Gravesmall","Asmall","Bsmall","Csmall","Dsmall","Esmall","Fsmall","Gsmall","Hsmall","Ismall","Jsmall","Ksmall","Lsmall","Msmall","Nsmall","Osmall","Psmall","Qsmall","Rsmall","Ssmall","Tsmall","Usmall","Vsmall","Wsmall","Xsmall","Ysmall","Zsmall","colonmonetary","onefitted","rupiah","Tildesmall","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","exclamdownsmall","centoldstyle","Lslashsmall","","","Scaronsmall","Zcaronsmall","Dieresissmall","Brevesmall","Caronsmall","","Dotaccentsmall","","","Macronsmall","","","figuredash","hypheninferior","","","Ogoneksmall","Ringsmall","Cedillasmall","","","","onequarter","onehalf","threequarters","questiondownsmall","oneeighth","threeeighths","fiveeighths","seveneighths","onethird","twothirds","","","zerosuperior","onesuperior","twosuperior","threesuperior","foursuperior","fivesuperior","sixsuperior","sevensuperior","eightsuperior","ninesuperior","zeroinferior","oneinferior","twoinferior","threeinferior","fourinferior","fiveinferior","sixinferior","seveninferior","eightinferior","nineinferior","centinferior","dollarinferior","periodinferior","commainferior","Agravesmall","Aacutesmall","Acircumflexsmall","Atildesmall","Adieresissmall","Aringsmall","AEsmall","Ccedillasmall","Egravesmall","Eacutesmall","Ecircumflexsmall","Edieresissmall","Igravesmall","Iacutesmall","Icircumflexsmall","Idieresissmall","Ethsmall","Ntildesmall","Ogravesmall","Oacutesmall","Ocircumflexsmall","Otildesmall","Odieresissmall","OEsmall","Oslashsmall","Ugravesmall","Uacutesmall","Ucircumflexsmall","Udieresissmall","Yacutesmall","Thornsmall","Ydieresissmall"],He=[".notdef",".null","nonmarkingreturn","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quotesingle","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","grave","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","Adieresis","Aring","Ccedilla","Eacute","Ntilde","Odieresis","Udieresis","aacute","agrave","acircumflex","adieresis","atilde","aring","ccedilla","eacute","egrave","ecircumflex","edieresis","iacute","igrave","icircumflex","idieresis","ntilde","oacute","ograve","ocircumflex","odieresis","otilde","uacute","ugrave","ucircumflex","udieresis","dagger","degree","cent","sterling","section","bullet","paragraph","germandbls","registered","copyright","trademark","acute","dieresis","notequal","AE","Oslash","infinity","plusminus","lessequal","greaterequal","yen","mu","partialdiff","summation","product","pi","integral","ordfeminine","ordmasculine","Omega","ae","oslash","questiondown","exclamdown","logicalnot","radical","florin","approxequal","Delta","guillemotleft","guillemotright","ellipsis","nonbreakingspace","Agrave","Atilde","Otilde","OE","oe","endash","emdash","quotedblleft","quotedblright","quoteleft","quoteright","divide","lozenge","ydieresis","Ydieresis","fraction","currency","guilsinglleft","guilsinglright","fi","fl","daggerdbl","periodcentered","quotesinglbase","quotedblbase","perthousand","Acircumflex","Ecircumflex","Aacute","Edieresis","Egrave","Iacute","Icircumflex","Idieresis","Igrave","Oacute","Ocircumflex","apple","Ograve","Uacute","Ucircumflex","Ugrave","dotlessi","circumflex","tilde","macron","breve","dotaccent","ring","cedilla","hungarumlaut","ogonek","caron","Lslash","lslash","Scaron","scaron","Zcaron","zcaron","brokenbar","Eth","eth","Yacute","yacute","Thorn","thorn","minus","multiply","onesuperior","twosuperior","threesuperior","onehalf","onequarter","threequarters","franc","Gbreve","gbreve","Idotaccent","Scedilla","scedilla","Cacute","cacute","Ccaron","ccaron","dcroat"];function Je(w){this.font=w}function ut(w){this.cmap=w}function Ot(w,I){this.encoding=w,this.charset=I}function zt(w){switch(w.version){case 1:this.names=He.slice();break;case 2:this.names=new Array(w.numberOfGlyphs);for(var I=0;I<w.numberOfGlyphs;I++)this.names[I]=w.glyphNameIndex[I]<He.length?He[w.glyphNameIndex[I]]:w.names[w.glyphNameIndex[I]-He.length];break;case 2.5:this.names=new Array(w.numberOfGlyphs);for(var j=0;j<w.numberOfGlyphs;j++)this.names[j]=He[j+w.glyphNameIndex[j]];break;default:this.names=[]}}Je.prototype.charToGlyphIndex=function(w){var I=w.codePointAt(0),j=this.font.glyphs;if(j)for(var V=0;V<j.length;V+=1)for(var J=j.get(V),se=0;se<J.unicodes.length;se+=1)if(J.unicodes[se]===I)return V;return null},ut.prototype.charToGlyphIndex=function(w){return this.cmap.glyphIndexMap[w.codePointAt(0)]||0},Ot.prototype.charToGlyphIndex=function(w){return w=w.codePointAt(0),this.charset.indexOf(w=this.encoding[w])},zt.prototype.nameToGlyphIndex=function(w){return this.names.indexOf(w)},zt.prototype.glyphIndexToName=function(w){return this.names[w]};var Gt_line=function(w,I,j,V,J){w.beginPath(),w.moveTo(I,j),w.lineTo(V,J),w.stroke()};function cn(w){this.bindConstructorValues(w)}function zn(w,I,j){Object.defineProperty(w,I,{get:function(){return w[j]},set:function(V){w[j]=V},enumerable:!0,configurable:!0})}function Nn(w,I){if(this.font=w,this.glyphs={},Array.isArray(I))for(var j=0;j<I.length;j++)this.glyphs[j]=I[j];this.length=I&&I.length||0}cn.prototype.bindConstructorValues=function(w){var I;this.index=w.index||0,this.name=w.name||null,this.unicode=w.unicode||void 0,this.unicodes=w.unicodes||void 0!==w.unicode?[w.unicode]:[],w.xMin&&(this.xMin=w.xMin),w.yMin&&(this.yMin=w.yMin),w.xMax&&(this.xMax=w.xMax),w.yMax&&(this.yMax=w.yMax),w.advanceWidth&&(this.advanceWidth=w.advanceWidth),Object.defineProperty(this,"path",(I=(w=w.path)||new pe,{configurable:!0,get:function(){return I="function"==typeof I?I():I},set:function(j){I=j}}))},cn.prototype.addUnicode=function(w){0===this.unicodes.length&&(this.unicode=w),this.unicodes.push(w)},cn.prototype.getBoundingBox=function(){return this.path.getBoundingBox()},cn.prototype.getPath=function(w,I,j,V,J){w=void 0!==w?w:0,I=void 0!==I?I:0,j=void 0!==j?j:72;for(var se,ae,me=(V=V||{}).xScale,De=V.yScale,_e=((se=V.hinting&&J&&J.hinting?this.path&&J.hinting.exec(this,j):se)?(ae=J.hinting.getCommands(se),w=Math.round(w),I=Math.round(I),me=De=1):(ae=this.path.commands,V=1/this.path.unitsPerEm*j,void 0===me&&(me=V),void 0===De&&(De=V)),new pe),We=0;We<ae.length;We+=1){var it=ae[We];"M"===it.type?_e.moveTo(w+it.x*me,I+-it.y*De):"L"===it.type?_e.lineTo(w+it.x*me,I+-it.y*De):"Q"===it.type?_e.quadraticCurveTo(w+it.x1*me,I+-it.y1*De,w+it.x*me,I+-it.y*De):"C"===it.type?_e.curveTo(w+it.x1*me,I+-it.y1*De,w+it.x2*me,I+-it.y2*De,w+it.x*me,I+-it.y*De):"Z"===it.type&&_e.closePath()}return _e},cn.prototype.getContours=function(){if(void 0===this.points)return[];for(var w=[],I=[],j=0;j<this.points.length;j+=1){var V=this.points[j];I.push(V),V.lastPointOfContour&&(w.push(I),I=[])}return P.argument(0===I.length,"There are still points left in the current contour."),w},cn.prototype.getMetrics=function(){for(var w=this.path.commands,I=[],j=[],V=0;V<w.length;V+=1){var J=w[V];"Z"!==J.type&&(I.push(J.x),j.push(J.y)),"Q"!==J.type&&"C"!==J.type||(I.push(J.x1),j.push(J.y1)),"C"===J.type&&(I.push(J.x2),j.push(J.y2))}var se={xMin:Math.min.apply(null,I),yMin:Math.min.apply(null,j),xMax:Math.max.apply(null,I),yMax:Math.max.apply(null,j),leftSideBearing:this.leftSideBearing};return isFinite(se.xMin)||(se.xMin=0),isFinite(se.xMax)||(se.xMax=this.advanceWidth),isFinite(se.yMin)||(se.yMin=0),isFinite(se.yMax)||(se.yMax=0),se.rightSideBearing=this.advanceWidth-se.leftSideBearing-(se.xMax-se.xMin),se},cn.prototype.draw=function(w,I,j,V,J){this.getPath(I,j,V,J).draw(w)},cn.prototype.drawPoints=function(w,I,j,V){function J(We,it,Ze,Ue){var bt=2*Math.PI;w.beginPath();for(var ct=0;ct<We.length;ct+=1)w.moveTo(it+We[ct].x*Ue,Ze+We[ct].y*Ue),w.arc(it+We[ct].x*Ue,Ze+We[ct].y*Ue,2,0,bt,!1);w.closePath(),w.fill()}I=void 0!==I?I:0,j=void 0!==j?j:0,V=1/this.path.unitsPerEm*(V=void 0!==V?V:24);for(var se=[],ae=[],me=this.path,De=0;De<me.commands.length;De+=1){var _e=me.commands[De];void 0!==_e.x&&se.push({x:_e.x,y:-_e.y}),void 0!==_e.x1&&ae.push({x:_e.x1,y:-_e.y1}),void 0!==_e.x2&&ae.push({x:_e.x2,y:-_e.y2})}w.fillStyle="blue",J(se,I,j,V),w.fillStyle="red",J(ae,I,j,V)},cn.prototype.drawMetrics=function(w,I,j,V){I=void 0!==I?I:0,j=void 0!==j?j:0,V=1/this.path.unitsPerEm*(V=void 0!==V?V:24),w.lineWidth=1,w.strokeStyle="black",Gt_line(w,I,-1e4,I,1e4),Gt_line(w,-1e4,j,1e4,j);var J=this.xMin||0,se=this.yMin||0,ae=this.xMax||0,me=this.yMax||0,De=this.advanceWidth||0;w.strokeStyle="blue",Gt_line(w,I+J*V,-1e4,I+J*V,1e4),Gt_line(w,I+ae*V,-1e4,I+ae*V,1e4),Gt_line(w,-1e4,j+-se*V,1e4,j+-se*V),Gt_line(w,-1e4,j+-me*V,1e4,j+-me*V),w.strokeStyle="green",Gt_line(w,I+De*V,-1e4,I+De*V,1e4)},Nn.prototype.get=function(w){return"function"==typeof this.glyphs[w]&&(this.glyphs[w]=this.glyphs[w]()),this.glyphs[w]},Nn.prototype.push=function(w,I){this.glyphs[w]=I,this.length++};var _n={GlyphSet:Nn,glyphLoader:function(w,I){return new cn({index:I,font:w})},ttfGlyphLoader:function(w,I,j,V,J,se){return function(){var ae=new cn({index:I,font:w});return ae.path=function(){j(ae,V,J);var me=se(w.glyphs,ae);return me.unitsPerEm=w.unitsPerEm,me},zn(ae,"xMin","_xMin"),zn(ae,"xMax","_xMax"),zn(ae,"yMin","_yMin"),zn(ae,"yMax","_yMax"),ae}},cffGlyphLoader:function(w,I,j,V){return function(){var J=new cn({index:I,font:w});return J.path=function(){var se=j(w,J,V);return se.unitsPerEm=w.unitsPerEm,se},J}}};function Fn(w){return w.length<1240?107:w.length<33900?1131:32768}function On(w,I,j){var V,J=[],se=[],ae=rt.getCard16(w,I);if(0!==ae){for(var me=rt.getByte(w,I+2),De=I+(ae+1)*me+2,_e=I+3,We=0;We<ae+1;We+=1)J.push(rt.getOffset(w,_e,me)),_e+=me;V=De+J[ae]}else V=I+2;for(var it=0;it<J.length-1;it+=1){var Ze=rt.getBytes(w,De+J[it],De+J[it+1]);j&&(Ze=j(Ze)),se.push(Ze)}return{objects:se,startOffset:I,endOffset:V}}function Xr(w,I){if(28===I)return w.parseByte()<<8|w.parseByte();if(29===I)return w.parseByte()<<24|w.parseByte()<<16|w.parseByte()<<8|w.parseByte();if(30===I){for(var j=w,V="",J=["0","1","2","3","4","5","6","7","8","9",".","E","E-",null,"-"];;){var se=(ae=j.parseByte())>>4,ae=15&ae;if(15==se||(V+=J[se],15==ae))break;V+=J[ae]}return parseFloat(V)}if(32<=I&&I<=246)return I-139;if(247<=I&&I<=250)return 256*(I-247)+w.parseByte()+108;if(251<=I&&I<=254)return 256*-(I-251)-w.parseByte()-108;throw new Error("Invalid b0 "+I)}function Qi(w,I,j){var V=new rt.Parser(w,I=void 0!==I?I:0),J=[],se=[];for(j=void 0!==j?j:w.length;V.relativeOffset<j;){var ae=V.parseByte();ae<=21?(12===ae&&(ae=1200+V.parseByte()),J.push([ae,se]),se=[]):se.push(Xr(V,ae))}for(var me=J,De={},_e=0;_e<me.length;_e+=1){var Ze,We=me[_e][0],it=me[_e][1];if(Ze=1===it.length?it[0]:it,De.hasOwnProperty(We)&&!isNaN(De[We]))throw new Error("Object "+De+" already has key "+We);De[We]=Ze}return De}function Ti(w,I){return I<=390?xe[I]:w[I-391]}function Rr(w,I,j){for(var V,J={},se=0;se<I.length;se+=1){var ae=I[se];if(Array.isArray(ae.type)){var me=[];me.length=ae.type.length;for(var De=0;De<ae.type.length;De++)void 0===(V=void 0!==w[ae.op]?w[ae.op][De]:void 0)&&(V=void 0!==ae.value&&void 0!==ae.value[De]?ae.value[De]:null),"SID"===ae.type[De]&&(V=Ti(j,V)),me[De]=V;J[ae.name]=me}else void 0===(V=w[ae.op])&&(V=void 0!==ae.value?ae.value:null),"SID"===ae.type&&(V=Ti(j,V)),J[ae.name]=V}return J}var Jr=[{name:"version",op:0,type:"SID"},{name:"notice",op:1,type:"SID"},{name:"copyright",op:1200,type:"SID"},{name:"fullName",op:2,type:"SID"},{name:"familyName",op:3,type:"SID"},{name:"weight",op:4,type:"SID"},{name:"isFixedPitch",op:1201,type:"number",value:0},{name:"italicAngle",op:1202,type:"number",value:0},{name:"underlinePosition",op:1203,type:"number",value:-100},{name:"underlineThickness",op:1204,type:"number",value:50},{name:"paintType",op:1205,type:"number",value:0},{name:"charstringType",op:1206,type:"number",value:2},{name:"fontMatrix",op:1207,type:["real","real","real","real","real","real"],value:[.001,0,0,.001,0,0]},{name:"uniqueId",op:13,type:"number"},{name:"fontBBox",op:5,type:["number","number","number","number"],value:[0,0,0,0]},{name:"strokeWidth",op:1208,type:"number",value:0},{name:"xuid",op:14,type:[],value:null},{name:"charset",op:15,type:"offset",value:0},{name:"encoding",op:16,type:"offset",value:0},{name:"charStrings",op:17,type:"offset",value:0},{name:"private",op:18,type:["number","offset"],value:[0,0]},{name:"ros",op:1230,type:["SID","SID","number"]},{name:"cidFontVersion",op:1231,type:"number",value:0},{name:"cidFontRevision",op:1232,type:"number",value:0},{name:"cidFontType",op:1233,type:"number",value:0},{name:"cidCount",op:1234,type:"number",value:8720},{name:"uidBase",op:1235,type:"number"},{name:"fdArray",op:1236,type:"offset"},{name:"fdSelect",op:1237,type:"offset"},{name:"fontName",op:1238,type:"SID"}],Sr=[{name:"subrs",op:19,type:"offset",value:0},{name:"defaultWidthX",op:20,type:"number",value:0},{name:"nominalWidthX",op:21,type:"number",value:0}];function Hi(w,I,j,V){return Rr(Qi(w,I,j),Sr,V)}function Lr(w,I,j,V){for(var J=[],se=0;se<j.length;se+=1){var ae,me=((me=V,ae=Rr(Qi(ae=new DataView(new Uint8Array(j[se]).buffer),0,ae.byteLength),Jr,me))._subrs=[],ae._subrsBias=0,ae.private[0]),De=ae.private[1];0!==me&&0!==De&&(me=Hi(w,De+I,me,V),ae._defaultWidthX=me.defaultWidthX,ae._nominalWidthX=me.nominalWidthX,0!==me.subrs&&(De=On(w,De+me.subrs+I),ae._subrs=De.objects,ae._subrsBias=Fn(ae._subrs)),ae._privateDict=me),J.push(ae)}return J}function Hr(w,I,j){var V,J,se,ae,me,De,_e,We,it,Ze=new pe,Ue=[],bt=0,ct=!1,ht=!1,at=0,nt=0,gn=(it=(w.isCIDFont?(me=w.tables.cff.topDict._fdSelect[I.index],me=w.tables.cff.topDict._fdArray[me],De=me._subrs,_e=me._subrsBias,We=me._defaultWidthX,me):(De=w.tables.cff.topDict._subrs,_e=w.tables.cff.topDict._subrsBias,We=w.tables.cff.topDict._defaultWidthX,w.tables.cff.topDict))._nominalWidthX,We);function un(Tn,rr){ht&&Ze.closePath(),Ze.moveTo(Tn,rr),ht=!0}function Mn(){Ue.length%2==0||ct||(gn=Ue.shift()+it),bt+=Ue.length>>1,Ue.length=0,ct=!0}return function Tn(rr){for(var Yr,Nr,oi,ts,ns,Fs,qr,Qr,Tr,rs,ai,is,ei=0;ei<rr.length;){var qi=rr[ei];switch(ei+=1,qi){case 1:case 3:case 18:case 23:Mn();break;case 4:1<Ue.length&&!ct&&(gn=Ue.shift()+it,ct=!0),nt+=Ue.pop(),un(at,nt);break;case 5:for(;0<Ue.length;)at+=Ue.shift(),nt+=Ue.shift(),Ze.lineTo(at,nt);break;case 6:for(;0<Ue.length&&(at+=Ue.shift(),Ze.lineTo(at,nt),0!==Ue.length);)nt+=Ue.shift(),Ze.lineTo(at,nt);break;case 7:for(;0<Ue.length&&(nt+=Ue.shift(),Ze.lineTo(at,nt),0!==Ue.length);)at+=Ue.shift(),Ze.lineTo(at,nt);break;case 8:for(;0<Ue.length;)V=at+Ue.shift(),J=nt+Ue.shift(),se=V+Ue.shift(),ae=J+Ue.shift(),at=se+Ue.shift(),nt=ae+Ue.shift(),Ze.curveTo(V,J,se,ae,at,nt);break;case 10:ns=Ue.pop()+_e,(Fs=De[ns])&&Tn(Fs);break;case 11:return;case 12:switch(qi=rr[ei],ei+=1,qi){case 35:V=at+Ue.shift(),J=nt+Ue.shift(),se=V+Ue.shift(),ae=J+Ue.shift(),qr=se+Ue.shift(),Qr=ae+Ue.shift(),Tr=qr+Ue.shift(),rs=Qr+Ue.shift(),ai=Tr+Ue.shift(),is=rs+Ue.shift(),at=ai+Ue.shift(),nt=is+Ue.shift(),Ue.shift(),Ze.curveTo(V,J,se,ae,qr,Qr),Ze.curveTo(Tr,rs,ai,is,at,nt);break;case 34:V=at+Ue.shift(),J=nt,se=V+Ue.shift(),ae=J+Ue.shift(),qr=se+Ue.shift(),Qr=ae,Tr=qr+Ue.shift(),rs=ae,ai=Tr+Ue.shift(),is=nt,at=ai+Ue.shift(),Ze.curveTo(V,J,se,ae,qr,Qr),Ze.curveTo(Tr,rs,ai,is,at,nt);break;case 36:V=at+Ue.shift(),J=nt+Ue.shift(),se=V+Ue.shift(),ae=J+Ue.shift(),qr=se+Ue.shift(),Qr=ae,Tr=qr+Ue.shift(),rs=ae,ai=Tr+Ue.shift(),is=rs+Ue.shift(),at=ai+Ue.shift(),Ze.curveTo(V,J,se,ae,qr,Qr),Ze.curveTo(Tr,rs,ai,is,at,nt);break;case 37:V=at+Ue.shift(),J=nt+Ue.shift(),se=V+Ue.shift(),ae=J+Ue.shift(),qr=se+Ue.shift(),Qr=ae+Ue.shift(),Tr=qr+Ue.shift(),rs=Qr+Ue.shift(),ai=Tr+Ue.shift(),is=rs+Ue.shift(),Math.abs(ai-at)>Math.abs(is-nt)?at=ai+Ue.shift():nt=is+Ue.shift(),Ze.curveTo(V,J,se,ae,qr,Qr),Ze.curveTo(Tr,rs,ai,is,at,nt);break;default:console.log("Glyph "+I.index+": unknown operator 1200"+qi),Ue.length=0}break;case 14:0<Ue.length&&!ct&&(gn=Ue.shift()+it,ct=!0),ht&&(Ze.closePath(),ht=!1);break;case 19:case 20:Mn(),ei+=bt+7>>3;break;case 21:2<Ue.length&&!ct&&(gn=Ue.shift()+it,ct=!0),nt+=Ue.pop(),un(at+=Ue.pop(),nt);break;case 22:1<Ue.length&&!ct&&(gn=Ue.shift()+it,ct=!0),un(at+=Ue.pop(),nt);break;case 24:for(;2<Ue.length;)V=at+Ue.shift(),J=nt+Ue.shift(),se=V+Ue.shift(),ae=J+Ue.shift(),at=se+Ue.shift(),nt=ae+Ue.shift(),Ze.curveTo(V,J,se,ae,at,nt);at+=Ue.shift(),nt+=Ue.shift(),Ze.lineTo(at,nt);break;case 25:for(;6<Ue.length;)at+=Ue.shift(),nt+=Ue.shift(),Ze.lineTo(at,nt);V=at+Ue.shift(),J=nt+Ue.shift(),se=V+Ue.shift(),ae=J+Ue.shift(),at=se+Ue.shift(),nt=ae+Ue.shift(),Ze.curveTo(V,J,se,ae,at,nt);break;case 26:for(Ue.length%2&&(at+=Ue.shift());0<Ue.length;)V=at,J=nt+Ue.shift(),se=V+Ue.shift(),ae=J+Ue.shift(),at=se,nt=ae+Ue.shift(),Ze.curveTo(V,J,se,ae,at,nt);break;case 27:for(Ue.length%2&&(nt+=Ue.shift());0<Ue.length;)V=at+Ue.shift(),J=nt,se=V+Ue.shift(),ae=J+Ue.shift(),at=se+Ue.shift(),Ze.curveTo(V,J,se,ae,at,nt=ae);break;case 28:Ue.push(((Yr=rr[ei])<<24|(Nr=rr[ei+1])<<16)>>16),ei+=2;break;case 29:ns=Ue.pop()+w.gsubrsBias,(Fs=w.gsubrs[ns])&&Tn(Fs);break;case 30:for(;0<Ue.length&&(V=at,J=nt+Ue.shift(),se=V+Ue.shift(),ae=J+Ue.shift(),at=se+Ue.shift(),nt=ae+(1===Ue.length?Ue.shift():0),Ze.curveTo(V,J,se,ae,at,nt),0!==Ue.length);)V=at+Ue.shift(),J=nt,se=V+Ue.shift(),ae=J+Ue.shift(),nt=ae+Ue.shift(),at=se+(1===Ue.length?Ue.shift():0),Ze.curveTo(V,J,se,ae,at,nt);break;case 31:for(;0<Ue.length&&(V=at+Ue.shift(),J=nt,se=V+Ue.shift(),ae=J+Ue.shift(),nt=ae+Ue.shift(),at=se+(1===Ue.length?Ue.shift():0),Ze.curveTo(V,J,se,ae,at,nt),0!==Ue.length);)V=at,J=nt+Ue.shift(),se=V+Ue.shift(),ae=J+Ue.shift(),at=se+Ue.shift(),nt=ae+(1===Ue.length?Ue.shift():0),Ze.curveTo(V,J,se,ae,at,nt);break;default:qi<32?console.log("Glyph "+I.index+": unknown operator "+qi):qi<247?Ue.push(qi-139):qi<251?(Yr=rr[ei],ei+=1,Ue.push(256*(qi-247)+Yr+108)):qi<255?(Yr=rr[ei],ei+=1,Ue.push(256*-(qi-251)-Yr-108)):(Yr=rr[ei],Nr=rr[ei+1],oi=rr[ei+2],ts=rr[ei+3],ei+=4,Ue.push((Yr<<24|Nr<<16|oi<<8|ts)/65536))}}}(j),I.advanceWidth=gn,Ze}function es(w,I){var j,V=xe.indexOf(w);return 0<=V&&(j=V),0<=(V=I.indexOf(w))?j=V+xe.length:(j=xe.length+I.length,I.push(w)),j}function Zl(w,I,j){for(var V={},J=0;J<w.length;J+=1){var se=w[J],ae=I[se.name];void 0===ae||function me(De,_e){if(De===_e)return 1;if(Array.isArray(De)&&Array.isArray(_e)&&De.length===_e.length){for(var We=0;We<De.length;We+=1)if(!me(De[We],_e[We]))return;return 1}}(ae,se.value)||("SID"===se.type&&(ae=es(ae,j)),V[se.op]={name:se.name,type:se.type,value:ae})}return V}function Kl(w,I){var j=new ot.Record("Top DICT",[{name:"dict",type:"DICT",value:{}}]);return j.dict=Zl(Jr,w,I),j}function fl(w){var I=new ot.Record("Top DICT INDEX",[{name:"topDicts",type:"INDEX",value:[]}]);return I.topDicts=[{name:"topDict_0",type:"TABLE",value:w}],I}var Jl_parse=function(w,I,j){j.tables.cff={},(J={}).formatMajor=rt.getCard8(me=w,V=I),J.formatMinor=rt.getCard8(me,V+1),J.size=rt.getCard8(me,V+2),J.offsetSize=rt.getCard8(me,V+3),J.startOffset=V,J.endOffset=V+4;var me=On(w,J.endOffset,rt.bytesToString),V=On(w,me.endOffset),J=On(w,V.endOffset,rt.bytesToString);if(me=On(w,J.endOffset),j.gsubrs=me.objects,j.gsubrsBias=Fn(j.gsubrs),1!==(me=Lr(w,I,V.objects,J.objects)).length)throw new Error("CFF table has too many fonts in 'FontSet' - count of fonts NameIndex.length = "+me.length);if((j.tables.cff.topDict=V=me[0])._privateDict&&(j.defaultWidthX=V._privateDict.defaultWidthX,j.nominalWidthX=V._privateDict.nominalWidthX),void 0!==V.ros[0]&&void 0!==V.ros[1]&&(j.isCIDFont=!0),j.isCIDFont){var se=V.fdSelect;if(0===(me=V.fdArray)||0===se)throw new Error("Font is marked as a CID font, but FDArray and/or FDSelect information is missing");me=Lr(w,I,On(w,me+=I).objects,J.objects),V._fdArray=me,V._fdSelect=function(Ze,Ue,bt,ct){var ht,at=[],nt=new rt.Parser(Ze,Ue);if(0===(Ze=nt.parseCard8()))for(var gn=0;gn<bt;gn++){if(ct<=(ht=nt.parseCard8()))throw new Error("CFF table CID Font FDSelect has bad FD index value "+ht+" (FD count "+ct+")");at.push(ht)}else{if(3!==Ze)throw new Error("CFF Table CID Font FDSelect table has unsupported format "+Ze);var un,Mn=nt.parseCard16(),Tn=nt.parseCard16();if(0!==Tn)throw new Error("CFF Table CID Font FDSelect format 3 range has bad initial GID "+Tn);for(var rr=0;rr<Mn;rr++){if(ht=nt.parseCard8(),un=nt.parseCard16(),ct<=ht)throw new Error("CFF table CID Font FDSelect has bad FD index value "+ht+" (FD count "+ct+")");if(bt<un)throw new Error("CFF Table CID Font FDSelect format 3 range has bad GID "+un);for(;Tn<un;Tn++)at.push(ht);Tn=un}if(un!==bt)throw new Error("CFF Table CID Font FDSelect format 3 range has bad final GID "+un)}return at}(w,se+=I,j.numGlyphs,me.length)}me=Hi(w,se=I+V.private[1],V.private[0],J.objects);var ae=(j.defaultWidthX=me.defaultWidthX,j.nominalWidthX=me.nominalWidthX,0!==me.subrs?(se=On(w,se+me.subrs),j.subrs=se.objects,j.subrsBias=Fn(j.subrs)):(j.subrs=[],j.subrsBias=0),On(w,I+V.charStrings));j.nGlyphs=ae.objects.length,me=function(We,it,Ze,Ue){var bt=new rt.Parser(We,it),ct=(--Ze,[".notdef"]);if(0===(We=bt.parseCard8()))for(var ht=0;ht<Ze;ht+=1)at=bt.parseSID(),ct.push(Ti(Ue,at));else if(1===We)for(;ct.length<=Ze;)for(var at=bt.parseSID(),nt=bt.parseCard8(),gn=0;gn<=nt;gn+=1)ct.push(Ti(Ue,at)),at+=1;else{if(2!==We)throw new Error("Unknown charset format "+We);for(;ct.length<=Ze;){at=bt.parseSID(),nt=bt.parseCard16();for(var un=0;un<=nt;un+=1)ct.push(Ti(Ue,at)),at+=1}}return ct}(w,I+V.charset,j.nGlyphs,J.objects),j.cffEncoding=0===V.encoding?new Ot(he,me):1===V.encoding?new Ot(Se,me):function(We,it,Ze){var Ue={},bt=new rt.Parser(We,it);if(0===(We=bt.parseCard8()))for(var ct=bt.parseCard8(),ht=0;ht<ct;ht+=1)Ue[nt=bt.parseCard8()]=ht;else{if(1!==We)throw new Error("Unknown encoding format "+We);for(var at=bt.parseCard8(),nt=1,gn=0;gn<at;gn+=1)for(var un=bt.parseCard8(),Mn=bt.parseCard8(),Tn=un;Tn<=un+Mn;Tn+=1)Ue[Tn]=nt,nt+=1}return new Ot(Ue,Ze)}(w,I+V.encoding,me),j.encoding=j.encoding||j.cffEncoding,j.glyphs=new _n.GlyphSet(j);for(var De=0;De<j.nGlyphs;De+=1)j.glyphs.push(De,_n.cffGlyphLoader(j,De,Hr,ae.objects[De]))},Jl_make=function(w,We){for(var j,V=new ot.Table("CFF ",[{name:"header",type:"RECORD"},{name:"nameIndex",type:"RECORD"},{name:"topDictIndex",type:"RECORD"},{name:"stringIndex",type:"RECORD"},{name:"globalSubrIndex",type:"RECORD"},{name:"charsets",type:"RECORD"},{name:"charStringsIndex",type:"RECORD"},{name:"privateDict",type:"RECORD"}]),J={version:We.version,fullName:We.fullName,familyName:We.familyName,weight:We.weightName,fontBBox:We.fontBBox||[0,0,0,0],fontMatrix:[J=1/We.unitsPerEm,0,0,J,0,0],charset:999,encoding:0,charStrings:999,private:[0,999]},se=[],ae=1;ae<w.length;ae+=1)j=w.get(ae),se.push(j.name);var me,De,_e=[],it=(V.header=new ot.Record("Header",[{name:"major",type:"Card8",value:1},{name:"minor",type:"Card8",value:0},{name:"hdrSize",type:"Card8",value:4},{name:"major",type:"Card8",value:1}]),V.nameIndex=function(Ze){var Ue=new ot.Record("Name INDEX",[{name:"names",type:"INDEX",value:[]}]);Ue.names=[];for(var bt=0;bt<Ze.length;bt+=1)Ue.names.push({name:"name_"+bt,type:"NAME",value:Ze[bt]});return Ue}([We.postScriptName]),We=Kl(J,_e),V.topDictIndex=fl(We),V.globalSubrIndex=new ot.Record("Global Subr INDEX",[{name:"subrs",type:"INDEX",value:[]}]),V.charsets=function(Ze,Ue){for(var bt=new ot.Record("Charsets",[{name:"format",type:"Card8",value:0}]),ct=0;ct<Ze.length;ct+=1){var ht=es(Ze[ct],Ue);bt.fields.push({name:"glyph_"+ct,type:"SID",value:ht})}return bt}(se,_e),V.charStringsIndex=function eu(w){for(var I=new ot.Record("CharStrings INDEX",[{name:"charStrings",type:"INDEX",value:[]}]),j=0;j<w.length;j+=1){var V=w.get(j),J=function(se){for(var ae=[],me=se.path,De=(ae.push({name:"width",type:"NUMBER",value:se.advanceWidth}),0),_e=0,We=0;We<me.commands.length;We+=1){var it,Ze,Ue,bt,ct=void 0,ht=void 0,at=me.commands[We];"M"===(at="Q"===at.type?{type:"C",x:at.x,y:at.y,x1:1/3*De+2/3*at.x1,y1:1/3*_e+2/3*at.y1,x2:1/3*at.x+2/3*at.x1,y2:1/3*at.y+2/3*at.y1}:at).type?(ct=Math.round(at.x-De),ht=Math.round(at.y-_e),ae.push({name:"dx",type:"NUMBER",value:ct}),ae.push({name:"dy",type:"NUMBER",value:ht}),ae.push({name:"rmoveto",type:"OP",value:21}),De=Math.round(at.x),_e=Math.round(at.y)):"L"===at.type?(ct=Math.round(at.x-De),ht=Math.round(at.y-_e),ae.push({name:"dx",type:"NUMBER",value:ct}),ae.push({name:"dy",type:"NUMBER",value:ht}),ae.push({name:"rlineto",type:"OP",value:5}),De=Math.round(at.x),_e=Math.round(at.y)):"C"===at.type&&(it=Math.round(at.x1-De),Ze=Math.round(at.y1-_e),Ue=Math.round(at.x2-at.x1),bt=Math.round(at.y2-at.y1),ct=Math.round(at.x-at.x2),ht=Math.round(at.y-at.y2),ae.push({name:"dx1",type:"NUMBER",value:it}),ae.push({name:"dy1",type:"NUMBER",value:Ze}),ae.push({name:"dx2",type:"NUMBER",value:Ue}),ae.push({name:"dy2",type:"NUMBER",value:bt}),ae.push({name:"dx",type:"NUMBER",value:ct}),ae.push({name:"dy",type:"NUMBER",value:ht}),ae.push({name:"rrcurveto",type:"OP",value:8}),De=Math.round(at.x),_e=Math.round(at.y))}return ae.push({name:"endchar",type:"OP",value:14}),ae}(V);I.charStrings.push({name:V.name,type:"CHARSTRING",value:J})}return I}(w),V.privateDict=(it={},me=_e,(De=new ot.Record("Private DICT",[{name:"dict",type:"DICT",value:{}}])).dict=Zl(Sr,it,me),De),V.stringIndex=function(Ze){var Ue=new ot.Record("String INDEX",[{name:"strings",type:"INDEX",value:[]}]);Ue.strings=[];for(var bt=0;bt<Ze.length;bt+=1)Ue.strings.push({name:"string_"+bt,type:"STRING",value:Ze[bt]});return Ue}(_e),V.header.sizeOf()+V.nameIndex.sizeOf()+V.topDictIndex.sizeOf()+V.stringIndex.sizeOf()+V.globalSubrIndex.sizeOf());return J.charset=it,J.encoding=0,J.charStrings=J.charset+V.charsets.sizeOf(),J.private[1]=J.charStrings+V.charStringsIndex.sizeOf(),We=Kl(J,_e),V.topDictIndex=fl(We),V},Ls_parse=function(V,I){var j={};return V=new rt.Parser(V,I),j.version=V.parseVersion(),j.fontRevision=Math.round(1e3*V.parseFixed())/1e3,j.checkSumAdjustment=V.parseULong(),j.magicNumber=V.parseULong(),P.argument(1594834165===j.magicNumber,"Font header has wrong magic number."),j.flags=V.parseUShort(),j.unitsPerEm=V.parseUShort(),j.created=V.parseLongDateTime(),j.modified=V.parseLongDateTime(),j.xMin=V.parseShort(),j.yMin=V.parseShort(),j.xMax=V.parseShort(),j.yMax=V.parseShort(),j.macStyle=V.parseUShort(),j.lowestRecPPEM=V.parseUShort(),j.fontDirectionHint=V.parseShort(),j.indexToLocFormat=V.parseShort(),j.glyphDataFormat=V.parseShort(),j},Ls_make=function(w){var I=Math.round((new Date).getTime()/1e3)+2082844800,j=I;return w.createdTimestamp&&(j=w.createdTimestamp+2082844800),new ot.Table("head",[{name:"version",type:"FIXED",value:65536},{name:"fontRevision",type:"FIXED",value:65536},{name:"checkSumAdjustment",type:"ULONG",value:0},{name:"magicNumber",type:"ULONG",value:1594834165},{name:"flags",type:"USHORT",value:0},{name:"unitsPerEm",type:"USHORT",value:1e3},{name:"created",type:"LONGDATETIME",value:j},{name:"modified",type:"LONGDATETIME",value:I},{name:"xMin",type:"SHORT",value:0},{name:"yMin",type:"SHORT",value:0},{name:"xMax",type:"SHORT",value:0},{name:"yMax",type:"SHORT",value:0},{name:"macStyle",type:"USHORT",value:0},{name:"lowestRecPPEM",type:"USHORT",value:0},{name:"fontDirectionHint",type:"SHORT",value:2},{name:"indexToLocFormat",type:"SHORT",value:0},{name:"glyphDataFormat",type:"SHORT",value:0}],w)},Be_parse=function(V,I){var j={};return V=new rt.Parser(V,I),j.version=V.parseVersion(),j.ascender=V.parseShort(),j.descender=V.parseShort(),j.lineGap=V.parseShort(),j.advanceWidthMax=V.parseUShort(),j.minLeftSideBearing=V.parseShort(),j.minRightSideBearing=V.parseShort(),j.xMaxExtent=V.parseShort(),j.caretSlopeRise=V.parseShort(),j.caretSlopeRun=V.parseShort(),j.caretOffset=V.parseShort(),V.relativeOffset+=8,j.metricDataFormat=V.parseShort(),j.numberOfHMetrics=V.parseUShort(),j},Be_make=function(w){return new ot.Table("hhea",[{name:"version",type:"FIXED",value:65536},{name:"ascender",type:"FWORD",value:0},{name:"descender",type:"FWORD",value:0},{name:"lineGap",type:"FWORD",value:0},{name:"advanceWidthMax",type:"UFWORD",value:0},{name:"minLeftSideBearing",type:"FWORD",value:0},{name:"minRightSideBearing",type:"FWORD",value:0},{name:"xMaxExtent",type:"FWORD",value:0},{name:"caretSlopeRise",type:"SHORT",value:1},{name:"caretSlopeRun",type:"SHORT",value:0},{name:"caretOffset",type:"SHORT",value:0},{name:"reserved1",type:"SHORT",value:0},{name:"reserved2",type:"SHORT",value:0},{name:"reserved3",type:"SHORT",value:0},{name:"reserved4",type:"SHORT",value:0},{name:"metricDataFormat",type:"SHORT",value:0},{name:"numberOfHMetrics",type:"USHORT",value:0}],w)},xt_parse=function(w,I,j,V,J){for(var se,ae,me=new rt.Parser(w,I),De=0;De<V;De+=1){De<j&&(se=me.parseUShort(),ae=me.parseShort());var _e=J.get(De);_e.advanceWidth=se,_e.leftSideBearing=ae}},xt_make=function(w){for(var I=new ot.Table("hmtx",[]),j=0;j<w.length;j+=1){var V=(J=w.get(j)).advanceWidth||0,J=J.leftSideBearing||0;I.fields.push({name:"advanceWidth_"+j,type:"USHORT",value:V}),I.fields.push({name:"leftSideBearing_"+j,type:"SHORT",value:J})}return I},tn_make=function(w){for(var I=new ot.Table("ltag",[{name:"version",type:"ULONG",value:1},{name:"flags",type:"ULONG",value:0},{name:"numTags",type:"ULONG",value:w.length}]),j="",V=12+4*w.length,J=0;J<w.length;++J){var se=j.indexOf(w[J]);se<0&&(se=j.length,j+=w[J]),I.fields.push({name:"offset "+J,type:"USHORT",value:V+se}),I.fields.push({name:"length "+J,type:"USHORT",value:w[J].length})}return I.fields.push({name:"stringPool",type:"CHARARRAY",value:j}),I},tn_parse=function(w,I){for(var j=new rt.Parser(w,I),V=j.parseULong(),J=(P.argument(1===V,"Unsupported ltag table version."),j.skip("uLong",1),j.parseULong()),se=[],ae=0;ae<J;ae++){for(var me="",De=I+j.parseUShort(),_e=j.parseUShort(),We=De;We<De+_e;++We)me+=String.fromCharCode(w.getInt8(We));se.push(me)}return se},St_parse=function(V,I){var j={};return V=new rt.Parser(V,I),j.version=V.parseVersion(),j.numGlyphs=V.parseUShort(),1===j.version&&(j.maxPoints=V.parseUShort(),j.maxContours=V.parseUShort(),j.maxCompositePoints=V.parseUShort(),j.maxCompositeContours=V.parseUShort(),j.maxZones=V.parseUShort(),j.maxTwilightPoints=V.parseUShort(),j.maxStorage=V.parseUShort(),j.maxFunctionDefs=V.parseUShort(),j.maxInstructionDefs=V.parseUShort(),j.maxStackElements=V.parseUShort(),j.maxSizeOfInstructions=V.parseUShort(),j.maxComponentElements=V.parseUShort(),j.maxComponentDepth=V.parseUShort()),j},St_make=function(w){return new ot.Table("maxp",[{name:"version",type:"FIXED",value:20480},{name:"numGlyphs",type:"USHORT",value:w}])},br=["copyright","fontFamily","fontSubfamily","uniqueID","fullName","version","postScriptName","trademark","manufacturer","designer","description","manufacturerURL","designerURL","license","licenseURL","reserved","preferredFamily","preferredSubfamily","compatibleFullName","sampleText","postScriptFindFontName","wwsFamily","wwsSubfamily"],wt={0:"en",1:"fr",2:"de",3:"it",4:"nl",5:"sv",6:"es",7:"da",8:"pt",9:"no",10:"he",11:"ja",12:"ar",13:"fi",14:"el",15:"is",16:"mt",17:"tr",18:"hr",19:"zh-Hant",20:"ur",21:"hi",22:"th",23:"ko",24:"lt",25:"pl",26:"hu",27:"es",28:"lv",29:"se",30:"fo",31:"fa",32:"ru",33:"zh",34:"nl-BE",35:"ga",36:"sq",37:"ro",38:"cz",39:"sk",40:"si",41:"yi",42:"sr",43:"mk",44:"bg",45:"uk",46:"be",47:"uz",48:"kk",49:"az-Cyrl",50:"az-Arab",51:"hy",52:"ka",53:"mo",54:"ky",55:"tg",56:"tk",57:"mn-CN",58:"mn",59:"ps",60:"ks",61:"ku",62:"sd",63:"bo",64:"ne",65:"sa",66:"mr",67:"bn",68:"as",69:"gu",70:"pa",71:"or",72:"ml",73:"kn",74:"ta",75:"te",76:"si",77:"my",78:"km",79:"lo",80:"vi",81:"id",82:"tl",83:"ms",84:"ms-Arab",85:"am",86:"ti",87:"om",88:"so",89:"sw",90:"rw",91:"rn",92:"ny",93:"mg",94:"eo",128:"cy",129:"eu",130:"ca",131:"la",132:"qu",133:"gn",134:"ay",135:"tt",136:"ug",137:"dz",138:"jv",139:"su",140:"gl",141:"af",142:"br",143:"iu",144:"gd",145:"gv",146:"ga",147:"to",148:"el-polyton",149:"kl",150:"az",151:"nn"},Cr={0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:5,11:1,12:4,13:0,14:6,15:0,16:0,17:0,18:0,19:2,20:4,21:9,22:21,23:3,24:29,25:29,26:29,27:29,28:29,29:0,30:0,31:4,32:7,33:25,34:0,35:0,36:0,37:0,38:29,39:29,40:0,41:5,42:7,43:7,44:7,45:7,46:7,47:7,48:7,49:7,50:4,51:24,52:23,53:7,54:7,55:7,56:7,57:27,58:7,59:4,60:4,61:4,62:4,63:26,64:9,65:9,66:9,67:13,68:13,69:11,70:10,71:12,72:17,73:16,74:14,75:15,76:18,77:19,78:20,79:22,80:30,81:0,82:0,83:0,84:4,85:28,86:28,87:28,88:0,89:0,90:0,91:0,92:0,93:0,94:0,128:0,129:0,130:0,131:0,132:0,133:0,134:0,135:7,136:4,137:26,138:0,139:0,140:0,141:0,142:0,143:28,144:0,145:0,146:0,147:0,148:6,149:0,150:0,151:0},nn={1078:"af",1052:"sq",1156:"gsw",1118:"am",5121:"ar-DZ",15361:"ar-BH",3073:"ar",2049:"ar-IQ",11265:"ar-JO",13313:"ar-KW",12289:"ar-LB",4097:"ar-LY",6145:"ary",8193:"ar-OM",16385:"ar-QA",1025:"ar-SA",10241:"ar-SY",7169:"aeb",14337:"ar-AE",9217:"ar-YE",1067:"hy",1101:"as",2092:"az-Cyrl",1068:"az",1133:"ba",1069:"eu",1059:"be",2117:"bn",1093:"bn-IN",8218:"bs-Cyrl",5146:"bs",1150:"br",1026:"bg",1027:"ca",3076:"zh-HK",5124:"zh-MO",2052:"zh",4100:"zh-SG",1028:"zh-TW",1155:"co",1050:"hr",4122:"hr-BA",1029:"cs",1030:"da",1164:"prs",1125:"dv",2067:"nl-BE",1043:"nl",3081:"en-AU",10249:"en-BZ",4105:"en-CA",9225:"en-029",16393:"en-IN",6153:"en-IE",8201:"en-JM",17417:"en-MY",5129:"en-NZ",13321:"en-PH",18441:"en-SG",7177:"en-ZA",11273:"en-TT",2057:"en-GB",1033:"en",12297:"en-ZW",1061:"et",1080:"fo",1124:"fil",1035:"fi",2060:"fr-BE",3084:"fr-CA",1036:"fr",5132:"fr-LU",6156:"fr-MC",4108:"fr-CH",1122:"fy",1110:"gl",1079:"ka",3079:"de-AT",1031:"de",5127:"de-LI",4103:"de-LU",2055:"de-CH",1032:"el",1135:"kl",1095:"gu",1128:"ha",1037:"he",1081:"hi",1038:"hu",1039:"is",1136:"ig",1057:"id",1117:"iu",2141:"iu-Latn",2108:"ga",1076:"xh",1077:"zu",1040:"it",2064:"it-CH",1041:"ja",1099:"kn",1087:"kk",1107:"km",1158:"quc",1159:"rw",1089:"sw",1111:"kok",1042:"ko",1088:"ky",1108:"lo",1062:"lv",1063:"lt",2094:"dsb",1134:"lb",1071:"mk",2110:"ms-BN",1086:"ms",1100:"ml",1082:"mt",1153:"mi",1146:"arn",1102:"mr",1148:"moh",1104:"mn",2128:"mn-CN",1121:"ne",1044:"nb",2068:"nn",1154:"oc",1096:"or",1123:"ps",1045:"pl",1046:"pt",2070:"pt-PT",1094:"pa",1131:"qu-BO",2155:"qu-EC",3179:"qu",1048:"ro",1047:"rm",1049:"ru",9275:"smn",4155:"smj-NO",5179:"smj",3131:"se-FI",1083:"se",2107:"se-SE",8251:"sms",6203:"sma-NO",7227:"sms",1103:"sa",7194:"sr-Cyrl-BA",3098:"sr",6170:"sr-Latn-BA",2074:"sr-Latn",1132:"nso",1074:"tn",1115:"si",1051:"sk",1060:"sl",11274:"es-AR",16394:"es-BO",13322:"es-CL",9226:"es-CO",5130:"es-CR",7178:"es-DO",12298:"es-EC",17418:"es-SV",4106:"es-GT",18442:"es-HN",2058:"es-MX",19466:"es-NI",6154:"es-PA",15370:"es-PY",10250:"es-PE",20490:"es-PR",3082:"es",1034:"es",21514:"es-US",14346:"es-UY",8202:"es-VE",2077:"sv-FI",1053:"sv",1114:"syr",1064:"tg",2143:"tzm",1097:"ta",1092:"tt",1098:"te",1054:"th",1105:"bo",1055:"tr",1090:"tk",1152:"ug",1058:"uk",1070:"hsb",1056:"ur",2115:"uz-Cyrl",1091:"uz",1066:"vi",1106:"cy",1160:"wo",1157:"sah",1144:"ii",1130:"yo"},_r="utf-16",rn={0:"macintosh",1:"x-mac-japanese",2:"x-mac-chinesetrad",3:"x-mac-korean",6:"x-mac-greek",7:"x-mac-cyrillic",9:"x-mac-devanagai",10:"x-mac-gurmukhi",11:"x-mac-gujarati",12:"x-mac-oriya",13:"x-mac-bengali",14:"x-mac-tamil",15:"x-mac-telugu",16:"x-mac-kannada",17:"x-mac-malayalam",18:"x-mac-sinhalese",19:"x-mac-burmese",20:"x-mac-khmer",21:"x-mac-thai",22:"x-mac-lao",23:"x-mac-georgian",24:"x-mac-armenian",25:"x-mac-chinesesimp",26:"x-mac-tibetan",27:"x-mac-mongolian",28:"x-mac-ethiopic",29:"x-mac-ce",30:"x-mac-vietnamese",31:"x-mac-extarabic"},wi={15:"x-mac-icelandic",17:"x-mac-turkish",18:"x-mac-croatian",24:"x-mac-ce",25:"x-mac-ce",26:"x-mac-ce",27:"x-mac-ce",28:"x-mac-ce",30:"x-mac-icelandic",37:"x-mac-romanian",38:"x-mac-ce",39:"x-mac-ce",40:"x-mac-ce",143:"x-mac-inuit",146:"x-mac-gaelic"};function Ai(w,I,j){switch(w){case 0:return _r;case 1:return wi[j]||rn[I];case 3:if(1===I||10===I)return _r}}function mi(w){var I,j={};for(I in w)j[w[I]]=parseInt(I);return j}function Wi(w,I,j,V,J,se){return new ot.Record("NameRecord",[{name:"platformID",type:"USHORT",value:w},{name:"encodingID",type:"USHORT",value:I},{name:"languageID",type:"USHORT",value:j},{name:"nameID",type:"USHORT",value:V},{name:"length",type:"USHORT",value:J},{name:"offset",type:"USHORT",value:se}])}function Po(w,I){if((j=function(se,ae){var me=se.length,De=ae.length-me+1;e:for(var _e=0;_e<De;_e++)for(;_e<De;_e++){for(var We=0;We<me;We++)if(ae[_e+We]!==se[We])continue e;return _e}return-1}(w,I))<0)for(var j=I.length,V=0,J=w.length;V<J;++V)I.push(w[V]);return j}var js_parse=function(w,I,j){for(var V={},J=new rt.Parser(w,I),se=(I=J.parseUShort(),J.parseUShort()),ae=J.offset+J.parseUShort(),me=0;me<se;me++){var bt=J.parseUShort(),De=J.parseUShort(),_e=J.parseUShort(),We=J.parseUShort(),it=(We=br[We]||We,J.parseUShort()),Ze=J.parseUShort(),Ue=function(ht,at,nt){switch(ht){case 0:if(65535===at)return"und";if(nt)return nt[at];break;case 1:return wt[at];case 3:return nn[at]}}(bt,_e,j);void 0!==(bt=Ai(bt,De,_e))&&void 0!==Ue&&(De=void 0,(De=bt===_r?K.UTF16(w,ae+Ze,it):K.MACSTRING(w,ae+Ze,it,bt))&&((_e=void 0===(_e=V[We])?V[We]={}:_e)[Ue]=De))}return 1===I&&J.parseUShort(),V},js_make=function(w,I){var j,V=[],J={},se=mi(br);for(j in w){var ae=se[j];if(void 0===ae&&(ae=j),Ze=parseInt(ae),isNaN(Ze))throw new Error('Name table entry "'+j+'" does not exist, see nameTableNames for complete list.');J[Ze]=w[j],V.push(Ze)}for(var me=mi(wt),De=mi(nn),_e=[],We=[],it=0;it<V.length;it++){var Ze,Ue,bt=J[Ze=V[it]];for(Ue in bt){var un,ct=bt[Ue],ht=me[Ue],at=Cr[ht],nt=Ai(un=1,at,ht),gn=(void 0===(nt=te.MACSTRING(ct,nt))&&(un=0,(ht=I.indexOf(Ue))<0&&(ht=I.length,I.push(Ue)),at=4,nt=te.UTF16(ct)),Po(nt,We));void 0!==(_e.push(Wi(un,at,ht,Ze,nt.length,gn)),un=De[Ue])&&(ht=Po(at=te.UTF16(ct),We),_e.push(Wi(3,1,un,Ze,at.length,ht)))}}_e.sort(function(rr,Yr){return rr.platformID-Yr.platformID||rr.encodingID-Yr.encodingID||rr.languageID-Yr.languageID||rr.nameID-Yr.nameID});for(var Mn=new ot.Table("name",[{name:"format",type:"USHORT",value:0},{name:"count",type:"USHORT",value:_e.length},{name:"stringOffset",type:"USHORT",value:6+12*_e.length}]),Tn=0;Tn<_e.length;Tn++)Mn.fields.push({name:"record_"+Tn,type:"RECORD",value:_e[Tn]});return Mn.fields.push({name:"strings",type:"LITERAL",value:We}),Mn},Ro=[{begin:0,end:127},{begin:128,end:255},{begin:256,end:383},{begin:384,end:591},{begin:592,end:687},{begin:688,end:767},{begin:768,end:879},{begin:880,end:1023},{begin:11392,end:11519},{begin:1024,end:1279},{begin:1328,end:1423},{begin:1424,end:1535},{begin:42240,end:42559},{begin:1536,end:1791},{begin:1984,end:2047},{begin:2304,end:2431},{begin:2432,end:2559},{begin:2560,end:2687},{begin:2688,end:2815},{begin:2816,end:2943},{begin:2944,end:3071},{begin:3072,end:3199},{begin:3200,end:3327},{begin:3328,end:3455},{begin:3584,end:3711},{begin:3712,end:3839},{begin:4256,end:4351},{begin:6912,end:7039},{begin:4352,end:4607},{begin:7680,end:7935},{begin:7936,end:8191},{begin:8192,end:8303},{begin:8304,end:8351},{begin:8352,end:8399},{begin:8400,end:8447},{begin:8448,end:8527},{begin:8528,end:8591},{begin:8592,end:8703},{begin:8704,end:8959},{begin:8960,end:9215},{begin:9216,end:9279},{begin:9280,end:9311},{begin:9312,end:9471},{begin:9472,end:9599},{begin:9600,end:9631},{begin:9632,end:9727},{begin:9728,end:9983},{begin:9984,end:10175},{begin:12288,end:12351},{begin:12352,end:12447},{begin:12448,end:12543},{begin:12544,end:12591},{begin:12592,end:12687},{begin:43072,end:43135},{begin:12800,end:13055},{begin:13056,end:13311},{begin:44032,end:55215},{begin:55296,end:57343},{begin:67840,end:67871},{begin:19968,end:40959},{begin:57344,end:63743},{begin:12736,end:12783},{begin:64256,end:64335},{begin:64336,end:65023},{begin:65056,end:65071},{begin:65040,end:65055},{begin:65104,end:65135},{begin:65136,end:65279},{begin:65280,end:65519},{begin:65520,end:65535},{begin:3840,end:4095},{begin:1792,end:1871},{begin:1920,end:1983},{begin:3456,end:3583},{begin:4096,end:4255},{begin:4608,end:4991},{begin:5024,end:5119},{begin:5120,end:5759},{begin:5760,end:5791},{begin:5792,end:5887},{begin:6016,end:6143},{begin:6144,end:6319},{begin:10240,end:10495},{begin:40960,end:42127},{begin:5888,end:5919},{begin:66304,end:66351},{begin:66352,end:66383},{begin:66560,end:66639},{begin:118784,end:119039},{begin:119808,end:120831},{begin:1044480,end:1048573},{begin:65024,end:65039},{begin:917504,end:917631},{begin:6400,end:6479},{begin:6480,end:6527},{begin:6528,end:6623},{begin:6656,end:6687},{begin:11264,end:11359},{begin:11568,end:11647},{begin:19904,end:19967},{begin:43008,end:43055},{begin:65536,end:65663},{begin:65856,end:65935},{begin:66432,end:66463},{begin:66464,end:66527},{begin:66640,end:66687},{begin:66688,end:66735},{begin:67584,end:67647},{begin:68096,end:68191},{begin:119552,end:119647},{begin:73728,end:74751},{begin:119648,end:119679},{begin:7040,end:7103},{begin:7168,end:7247},{begin:7248,end:7295},{begin:43136,end:43231},{begin:43264,end:43311},{begin:43312,end:43359},{begin:43520,end:43615},{begin:65936,end:65999},{begin:66e3,end:66047},{begin:66208,end:66271},{begin:127024,end:127135}],Fi_parse=function(w,I){var j={},V=new rt.Parser(w,I);j.version=V.parseUShort(),j.xAvgCharWidth=V.parseShort(),j.usWeightClass=V.parseUShort(),j.usWidthClass=V.parseUShort(),j.fsType=V.parseUShort(),j.ySubscriptXSize=V.parseShort(),j.ySubscriptYSize=V.parseShort(),j.ySubscriptXOffset=V.parseShort(),j.ySubscriptYOffset=V.parseShort(),j.ySuperscriptXSize=V.parseShort(),j.ySuperscriptYSize=V.parseShort(),j.ySuperscriptXOffset=V.parseShort(),j.ySuperscriptYOffset=V.parseShort(),j.yStrikeoutSize=V.parseShort(),j.yStrikeoutPosition=V.parseShort(),j.sFamilyClass=V.parseShort(),j.panose=[];for(var J=0;J<10;J++)j.panose[J]=V.parseByte();return j.ulUnicodeRange1=V.parseULong(),j.ulUnicodeRange2=V.parseULong(),j.ulUnicodeRange3=V.parseULong(),j.ulUnicodeRange4=V.parseULong(),j.achVendID=String.fromCharCode(V.parseByte(),V.parseByte(),V.parseByte(),V.parseByte()),j.fsSelection=V.parseUShort(),j.usFirstCharIndex=V.parseUShort(),j.usLastCharIndex=V.parseUShort(),j.sTypoAscender=V.parseShort(),j.sTypoDescender=V.parseShort(),j.sTypoLineGap=V.parseShort(),j.usWinAscent=V.parseUShort(),j.usWinDescent=V.parseUShort(),1<=j.version&&(j.ulCodePageRange1=V.parseULong(),j.ulCodePageRange2=V.parseULong()),2<=j.version&&(j.sxHeight=V.parseShort(),j.sCapHeight=V.parseShort(),j.usDefaultChar=V.parseUShort(),j.usBreakChar=V.parseUShort(),j.usMaxContent=V.parseUShort()),j},Fi_make=function(w){return new ot.Table("OS/2",[{name:"version",type:"USHORT",value:3},{name:"xAvgCharWidth",type:"SHORT",value:0},{name:"usWeightClass",type:"USHORT",value:0},{name:"usWidthClass",type:"USHORT",value:0},{name:"fsType",type:"USHORT",value:0},{name:"ySubscriptXSize",type:"SHORT",value:650},{name:"ySubscriptYSize",type:"SHORT",value:699},{name:"ySubscriptXOffset",type:"SHORT",value:0},{name:"ySubscriptYOffset",type:"SHORT",value:140},{name:"ySuperscriptXSize",type:"SHORT",value:650},{name:"ySuperscriptYSize",type:"SHORT",value:699},{name:"ySuperscriptXOffset",type:"SHORT",value:0},{name:"ySuperscriptYOffset",type:"SHORT",value:479},{name:"yStrikeoutSize",type:"SHORT",value:49},{name:"yStrikeoutPosition",type:"SHORT",value:258},{name:"sFamilyClass",type:"SHORT",value:0},{name:"bFamilyType",type:"BYTE",value:0},{name:"bSerifStyle",type:"BYTE",value:0},{name:"bWeight",type:"BYTE",value:0},{name:"bProportion",type:"BYTE",value:0},{name:"bContrast",type:"BYTE",value:0},{name:"bStrokeVariation",type:"BYTE",value:0},{name:"bArmStyle",type:"BYTE",value:0},{name:"bLetterform",type:"BYTE",value:0},{name:"bMidline",type:"BYTE",value:0},{name:"bXHeight",type:"BYTE",value:0},{name:"ulUnicodeRange1",type:"ULONG",value:0},{name:"ulUnicodeRange2",type:"ULONG",value:0},{name:"ulUnicodeRange3",type:"ULONG",value:0},{name:"ulUnicodeRange4",type:"ULONG",value:0},{name:"achVendID",type:"CHARARRAY",value:"XXXX"},{name:"fsSelection",type:"USHORT",value:0},{name:"usFirstCharIndex",type:"USHORT",value:0},{name:"usLastCharIndex",type:"USHORT",value:0},{name:"sTypoAscender",type:"SHORT",value:0},{name:"sTypoDescender",type:"SHORT",value:0},{name:"sTypoLineGap",type:"SHORT",value:0},{name:"usWinAscent",type:"USHORT",value:0},{name:"usWinDescent",type:"USHORT",value:0},{name:"ulCodePageRange1",type:"ULONG",value:0},{name:"ulCodePageRange2",type:"ULONG",value:0},{name:"sxHeight",type:"SHORT",value:0},{name:"sCapHeight",type:"SHORT",value:0},{name:"usDefaultChar",type:"USHORT",value:0},{name:"usBreakChar",type:"USHORT",value:0},{name:"usMaxContext",type:"USHORT",value:0}],w)},Fi_getUnicodeRange=function(w){for(var I=0;I<Ro.length;I+=1){var j=Ro[I];if(w>=j.begin&&w<j.end)return I}return-1},vp_parse=function(w,I){var j={},V=new rt.Parser(w,I);switch(j.version=V.parseVersion(),j.italicAngle=V.parseFixed(),j.underlinePosition=V.parseShort(),j.underlineThickness=V.parseShort(),j.isFixedPitch=V.parseULong(),j.minMemType42=V.parseULong(),j.maxMemType42=V.parseULong(),j.minMemType1=V.parseULong(),j.maxMemType1=V.parseULong(),j.version){case 1:j.names=He.slice();break;case 2:j.numberOfGlyphs=V.parseUShort(),j.glyphNameIndex=new Array(j.numberOfGlyphs);for(var J=0;J<j.numberOfGlyphs;J++)j.glyphNameIndex[J]=V.parseUShort();j.names=[];for(var se,ae=0;ae<j.numberOfGlyphs;ae++)j.glyphNameIndex[ae]>=He.length&&(se=V.parseChar(),j.names.push(V.parseString(se)));break;case 2.5:j.numberOfGlyphs=V.parseUShort(),j.offset=new Array(j.numberOfGlyphs);for(var me=0;me<j.numberOfGlyphs;me++)j.offset[me]=V.parseChar()}return j},vp_make=function(){return new ot.Table("post",[{name:"version",type:"FIXED",value:196608},{name:"italicAngle",type:"FIXED",value:0},{name:"underlinePosition",type:"FWORD",value:0},{name:"underlineThickness",type:"FWORD",value:0},{name:"isFixedPitch",type:"ULONG",value:0},{name:"minMemType42",type:"ULONG",value:0},{name:"maxMemType42",type:"ULONG",value:0},{name:"minMemType1",type:"ULONG",value:0},{name:"maxMemType1",type:"ULONG",value:0}])},ho=new Array(9),si=(ho[1]=function(){var w=this.offset+this.relativeOffset,I=this.parseUShort();return 1===I?{substFormat:1,coverage:this.parsePointer(Ye.coverage),deltaGlyphId:this.parseUShort()}:2===I?{substFormat:2,coverage:this.parsePointer(Ye.coverage),substitute:this.parseOffset16List()}:void P.assert(!1,"0x"+w.toString(16)+": lookup type 1 format must be 1 or 2.")},ho[2]=function(){var w=this.parseUShort();return P.argument(1===w,"GSUB Multiple Substitution Subtable identifier-format must be 1"),{substFormat:w,coverage:this.parsePointer(Ye.coverage),sequences:this.parseListOfLists()}},ho[3]=function(){var w=this.parseUShort();return P.argument(1===w,"GSUB Alternate Substitution Subtable identifier-format must be 1"),{substFormat:w,coverage:this.parsePointer(Ye.coverage),alternateSets:this.parseListOfLists()}},ho[4]=function(){var w=this.parseUShort();return P.argument(1===w,"GSUB ligature table identifier-format must be 1"),{substFormat:w,coverage:this.parsePointer(Ye.coverage),ligatureSets:this.parseListOfLists(function(){return{ligGlyph:this.parseUShort(),components:this.parseUShortList(this.parseUShort()-1)}})}},{sequenceIndex:Ye.uShort,lookupListIndex:Ye.uShort});ho[5]=function(){var w,I,j=this.offset+this.relativeOffset,V=this.parseUShort();return 1===V?{substFormat:V,coverage:this.parsePointer(Ye.coverage),ruleSets:this.parseListOfLists(function(){var J=this.parseUShort(),se=this.parseUShort();return{input:this.parseUShortList(J-1),lookupRecords:this.parseRecordList(se,si)}})}:2===V?{substFormat:V,coverage:this.parsePointer(Ye.coverage),classDef:this.parsePointer(Ye.classDef),classSets:this.parseListOfLists(function(){var J=this.parseUShort(),se=this.parseUShort();return{classes:this.parseUShortList(J-1),lookupRecords:this.parseRecordList(se,si)}})}:3===V?(w=this.parseUShort(),I=this.parseUShort(),{substFormat:V,coverages:this.parseList(w,Ye.pointer(Ye.coverage)),lookupRecords:this.parseRecordList(I,si)}):void P.assert(!1,"0x"+j.toString(16)+": lookup type 5 format must be 1, 2 or 3.")},ho[6]=function(){var w=this.offset+this.relativeOffset,I=this.parseUShort();return 1===I?{substFormat:1,coverage:this.parsePointer(Ye.coverage),chainRuleSets:this.parseListOfLists(function(){return{backtrack:this.parseUShortList(),input:this.parseUShortList(this.parseShort()-1),lookahead:this.parseUShortList(),lookupRecords:this.parseRecordList(si)}})}:2===I?{substFormat:2,coverage:this.parsePointer(Ye.coverage),backtrackClassDef:this.parsePointer(Ye.classDef),inputClassDef:this.parsePointer(Ye.classDef),lookaheadClassDef:this.parsePointer(Ye.classDef),chainClassSet:this.parseListOfLists(function(){return{backtrack:this.parseUShortList(),input:this.parseUShortList(this.parseShort()-1),lookahead:this.parseUShortList(),lookupRecords:this.parseRecordList(si)}})}:3===I?{substFormat:3,backtrackCoverage:this.parseList(Ye.pointer(Ye.coverage)),inputCoverage:this.parseList(Ye.pointer(Ye.coverage)),lookaheadCoverage:this.parseList(Ye.pointer(Ye.coverage)),lookupRecords:this.parseRecordList(si)}:void P.assert(!1,"0x"+w.toString(16)+": lookup type 6 format must be 1, 2 or 3.")},ho[7]=function(){var w=this.parseUShort(),I=(P.argument(1===w,"GSUB Extension Substitution subtable identifier-format must be 1"),w=this.parseUShort(),new Ye(this.data,this.offset+this.parseULong()));return{substFormat:1,lookupType:w,extension:ho[w].call(I)}},ho[8]=function(){var w=this.parseUShort();return P.argument(1===w,"GSUB Reverse Chaining Contextual Single Substitution Subtable identifier-format must be 1"),{substFormat:w,coverage:this.parsePointer(Ye.coverage),backtrackCoverage:this.parseList(Ye.pointer(Ye.coverage)),lookaheadCoverage:this.parseList(Ye.pointer(Ye.coverage)),substitutes:this.parseUShortList()}};var tu=new Array(9);tu[1]=function(w){return new ot.Table("substitutionTable",1===w.substFormat?[{name:"substFormat",type:"USHORT",value:1},{name:"coverage",type:"TABLE",value:new ot.Coverage(w.coverage)},{name:"deltaGlyphID",type:"USHORT",value:w.deltaGlyphId}]:[{name:"substFormat",type:"USHORT",value:2},{name:"coverage",type:"TABLE",value:new ot.Coverage(w.coverage)}].concat(ot.ushortList("substitute",w.substitute)))},tu[3]=function(w){return P.assert(1===w.substFormat,"Lookup type 3 substFormat must be 1."),new ot.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:1},{name:"coverage",type:"TABLE",value:new ot.Coverage(w.coverage)}].concat(ot.tableList("altSet",w.alternateSets,function(I){return new ot.Table("alternateSetTable",ot.ushortList("alternate",I))})))},tu[4]=function(w){return P.assert(1===w.substFormat,"Lookup type 4 substFormat must be 1."),new ot.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:1},{name:"coverage",type:"TABLE",value:new ot.Coverage(w.coverage)}].concat(ot.tableList("ligSet",w.ligatureSets,function(I){return new ot.Table("ligatureSetTable",ot.tableList("ligature",I,function(j){return new ot.Table("ligatureTable",[{name:"ligGlyph",type:"USHORT",value:j.ligGlyph}].concat(ot.ushortList("component",j.components,j.components.length+1)))}))})))};var Es_parse=function(w,I){return I=(w=new Ye(w,I=I||0)).parseVersion(1),P.argument(1===I||1.1===I,"Unsupported GSUB table version."),1===I?{version:I,scripts:w.parseScriptList(),features:w.parseFeatureList(),lookups:w.parseLookupList(ho)}:{version:I,scripts:w.parseScriptList(),features:w.parseFeatureList(),lookups:w.parseLookupList(ho),variations:w.parseFeatureVariationsList()}},Es_make=function(w){return new ot.Table("GSUB",[{name:"version",type:"ULONG",value:65536},{name:"scripts",type:"TABLE",value:new ot.ScriptList(w.scripts)},{name:"features",type:"TABLE",value:new ot.FeatureList(w.features)},{name:"lookups",type:"TABLE",value:new ot.LookupList(w.lookups,tu)}])},Un_parse=function(w,I){for(var j=new rt.Parser(w,I),V=j.parseULong(),J=(P.argument(1===V,"Unsupported META table version."),j.parseULong(),j.parseULong(),j.parseULong()),se={},ae=0;ae<J;ae++){var me=j.parseTag(),_e=j.parseULong(),De=j.parseULong();_e=K.UTF8(w,I+_e,De),se[me]=_e}return se},Un_make=function(w){var I,j=Object.keys(w).length,V="",J=16+12*j,se=new ot.Table("meta",[{name:"version",type:"ULONG",value:1},{name:"flags",type:"ULONG",value:0},{name:"offset",type:"ULONG",value:J},{name:"numTags",type:"ULONG",value:j}]);for(I in w){var ae=V.length;V+=w[I],se.fields.push({name:"tag "+I,type:"TAG",value:I}),se.fields.push({name:"offset "+I,type:"ULONG",value:J+ae}),se.fields.push({name:"length "+I,type:"ULONG",value:w[I].length})}return se.fields.push({name:"stringPool",type:"CHARARRAY",value:V}),se};function hh(w){return Math.log(w)/Math.log(2)|0}function Ql(w){for(;w.length%4!=0;)w.push(0);for(var I=0,j=0;j<w.length;j+=4)I+=(w[j]<<24)+(w[j+1]<<16)+(w[j+2]<<8)+w[j+3];return I%Math.pow(2,32)}function eo(w,I,j,V){return new ot.Record("Table Record",[{name:"tag",type:"TAG",value:void 0!==w?w:""},{name:"checkSum",type:"ULONG",value:void 0!==I?I:0},{name:"offset",type:"ULONG",value:void 0!==j?j:0},{name:"length",type:"ULONG",value:void 0!==V?V:0}])}function bp(w){for(var I=new ot.Table("sfnt",[{name:"version",type:"TAG",value:"OTTO"},{name:"numTables",type:"USHORT",value:0},{name:"searchRange",type:"USHORT",value:0},{name:"entrySelector",type:"USHORT",value:0},{name:"rangeShift",type:"USHORT",value:0}]),j=(I.tables=w,I.numTables=w.length,Math.pow(2,hh(I.numTables))),V=(I.searchRange=16*j,I.entrySelector=hh(j),I.rangeShift=16*I.numTables-I.searchRange,[]),J=[],se=I.sizeOf()+eo().sizeOf()*I.numTables;se%4!=0;)se+=1,J.push({name:"padding",type:"BYTE",value:0});for(var ae=0;ae<w.length;ae+=1){var me=w[ae],De=(P.argument(4===me.tableName.length,"Table name"+me.tableName+" is invalid."),me.sizeOf()),_e=eo(me.tableName,Ql(me.encode()),se,De);for(V.push({name:_e.tag+" Table Record",type:"RECORD",value:_e}),J.push({name:me.tableName+" table",type:"RECORD",value:me}),se+=De,P.argument(!isNaN(se),"Something went wrong calculating the offset.");se%4!=0;)se+=1,J.push({name:"padding",type:"BYTE",value:0})}return V.sort(function(We,it){return We.value.tag>it.value.tag?1:-1}),I.fields=I.fields.concat(V),I.fields=I.fields.concat(J),I}function _p(w,I,j){for(var V=0;V<I.length;V+=1){var J=w.charToGlyphIndex(I[V]);if(0<J)return w.glyphs.get(J).getMetrics()}return j}var Fr_fontToTable=function(w){for(var I,j=[],V=[],J=[],se=[],ae=[],me=[],De=[],_e=0,We=0,it=0,Ze=0,Ue=0,bt=0;bt<w.glyphs.length;bt+=1){var ct=w.glyphs.get(bt),ht=0|ct.unicode;if(isNaN(ct.advanceWidth))throw new Error("Glyph "+ct.name+" ("+bt+"): advanceWidth is not a number.");if((ht<I||void 0===I)&&0<ht&&(I=ht),_e<ht&&(_e=ht),(ht=Fi_getUnicodeRange(ht))<32)We|=1<<ht;else if(ht<64)it|=1<<ht-32;else if(ht<96)Ze|=1<<ht-64;else{if(!(ht<123))throw new Error("Unicode ranges bits > 123 are reserved for internal usage");Ue|=1<<ht-96}".notdef"!==ct.name&&(ht=ct.getMetrics(),j.push(ht.xMin),V.push(ht.yMin),J.push(ht.xMax),se.push(ht.yMax),me.push(ht.leftSideBearing),De.push(ht.rightSideBearing),ae.push(ct.advanceWidth))}var at,nt={xMin:Math.min.apply(null,j),yMin:Math.min.apply(null,V),xMax:Math.max.apply(null,J),yMax:Math.max.apply(null,se),advanceWidthMax:Math.max.apply(null,ae),advanceWidthAvg:function(qi){for(var sc=0,cs=0;cs<qi.length;cs+=1)sc+=qi[cs];return sc/qi.length}(ae),minLeftSideBearing:Math.min.apply(null,me),maxLeftSideBearing:Math.max.apply(null,me),minRightSideBearing:Math.min.apply(null,De)},gn=(nt.ascender=w.ascender,nt.descender=w.descender,Ls_make({flags:3,unitsPerEm:w.unitsPerEm,xMin:nt.xMin,yMin:nt.yMin,xMax:nt.xMax,yMax:nt.yMax,lowestRecPPEM:3,createdTimestamp:w.createdTimestamp})),un=Be_make({ascender:nt.ascender,descender:nt.descender,advanceWidthMax:nt.advanceWidthMax,minLeftSideBearing:nt.minLeftSideBearing,minRightSideBearing:nt.minRightSideBearing,xMaxExtent:nt.maxLeftSideBearing+(nt.xMax-nt.xMin),numberOfHMetrics:w.glyphs.length}),Mn=St_make(w.glyphs.length),Tn=Fi_make({xAvgCharWidth:Math.round(nt.advanceWidthAvg),usWeightClass:w.tables.os2.usWeightClass,usWidthClass:w.tables.os2.usWidthClass,usFirstCharIndex:I,usLastCharIndex:_e,ulUnicodeRange1:We,ulUnicodeRange2:it,ulUnicodeRange3:Ze,ulUnicodeRange4:Ue,fsSelection:w.tables.os2.fsSelection,sTypoAscender:nt.ascender,sTypoDescender:nt.descender,sTypoLineGap:0,usWinAscent:nt.yMax,usWinDescent:Math.abs(nt.yMin),ulCodePageRange1:1,sxHeight:_p(w,"xyvw",{yMax:Math.round(nt.ascender/2)}).yMax,sCapHeight:_p(w,"HIKLEFJMNTZBDPRAGOQSUVWXY",nt).yMax,usDefaultChar:w.hasChar(" ")?32:0,usBreakChar:w.hasChar(" ")?32:0}),rr=xt_make(w.glyphs),Yr=ge_make(w.glyphs),qr=(Qr=w.getEnglishName("fontFamily"))+" "+(Tr=w.getEnglishName("fontSubfamily")),Nr=(Nr=w.getEnglishName("postScriptName"))||Qr.replace(/\s/g,"")+"-"+Tr,oi={};for(at in w.names)oi[at]=w.names[at];oi.uniqueID||(oi.uniqueID={en:w.getEnglishName("manufacturer")+":"+qr}),oi.postScriptName||(oi.postScriptName={en:Nr}),oi.preferredFamily||(oi.preferredFamily=w.names.fontFamily),oi.preferredSubfamily||(oi.preferredSubfamily=w.names.fontSubfamily);var ts=js_make(oi,ns=[]),ns=0<ns.length?tn_make(ns):void 0,Fs=vp_make(),Qr=(qr=Jl_make(w.glyphs,{version:w.getEnglishName("version"),fullName:qr,familyName:Qr,weightName:Tr,postScriptName:Nr,unitsPerEm:w.unitsPerEm,fontBBox:[0,nt.yMin,nt.ascender,nt.advanceWidthMax]}),w.metas&&0<Object.keys(w.metas).length?Un_make(w.metas):void 0),Tr=[gn,un,Mn,Tn,ts,Yr,Fs,qr,rr];ns&&Tr.push(ns),w.tables.gsub&&Tr.push(Es_make(w.tables.gsub)),Qr&&Tr.push(Qr);for(var rs=Ql((Nr=bp(Tr)).encode()),ai=Nr.fields,is=!1,ei=0;ei<ai.length;ei+=1)if("head table"===ai[ei].name){ai[ei].value.checkSumAdjustment=2981146554-rs,is=!0;break}if(is)return Nr;throw new Error("Could not find head table with checkSum to adjust.")};function pl(w,I){for(var j=0,V=w.length-1;j<=V;){var J=j+V>>>1,se=w[J].tag;if(se===I)return J;se<I?j=1+J:V=J-1}return-j-1}function Di(w,I){for(var j=0,V=w.length-1;j<=V;){var J=j+V>>>1,se=w[J];if(se===I)return J;se<I?j=1+J:V=J-1}return-j-1}function nu(w,I){for(var j=0,V=w.length-1;j<=V;){var J,se=j+V>>>1,ae=(J=w[se]).start;if(ae===I)return J;ae<I?j=1+se:V=se-1}if(0<j)return I>(J=w[j-1]).end?0:J}function ru(w,I){this.font=w,this.tableName=I}function Ur(w){ru.call(this,w,"gpos")}function Rn(w){ru.call(this,w,"gsub")}function iu(w,I,j){for(var V=w.subtables,J=0;J<V.length;J++){var se=V[J];if(se.substFormat===I)return se}if(j)return V.push(j),j}function su(w){for(var I=new ArrayBuffer(w.length),j=new Uint8Array(I),V=0;V<w.length;++V)j[V]=w[V];return I}function ec(w,I){if(!w)throw I}function fh(w,I,j,V,J){var se=0<(I&V)?(se=w.parseByte(),j+(se=I&J?se:-se)):0<(I&J)?j:j+w.parseShort();return se}function jt(w,I,j){var V,J=new rt.Parser(I,j);if(w.numberOfContours=J.parseShort(),w._xMin=J.parseShort(),w._yMin=J.parseShort(),w._xMax=J.parseShort(),w._yMax=J.parseShort(),0<w.numberOfContours){for(var se=w.endPointIndices=[],ae=0;ae<w.numberOfContours;ae+=1)se.push(J.parseUShort());w.instructionLength=J.parseUShort(),w.instructions=[];for(var me=0;me<w.instructionLength;me+=1)w.instructions.push(J.parseByte());for(var De=se[se.length-1]+1,_e=[],We=0;We<De;We+=1)if(V=J.parseByte(),_e.push(V),0<(8&V))for(var it=J.parseByte(),Ze=0;Ze<it;Ze+=1)_e.push(V),We+=1;if(P.argument(_e.length===De,"Bad flags."),0<se.length){var Ue,bt=[];if(0<De){for(var ct=0;ct<De;ct+=1)(Ue={}).onCurve=!!(1&(V=_e[ct])),Ue.lastPointOfContour=0<=se.indexOf(ct),bt.push(Ue);for(var ht=0,at=0;at<De;at+=1)(Ue=bt[at]).x=fh(J,V=_e[at],ht,2,16),ht=Ue.x;for(var nt=0,gn=0;gn<De;gn+=1)(Ue=bt[gn]).y=fh(J,V=_e[gn],nt,4,32),nt=Ue.y}w.points=bt}else w.points=[]}else if(0===w.numberOfContours)w.points=[];else{w.isComposite=!0,w.points=[],w.components=[];for(var un=!0;un;){_e=J.parseUShort();var Mn={glyphIndex:J.parseUShort(),xScale:1,scale01:0,scale10:0,yScale:1,dx:0,dy:0};0<(1&_e)?0<(2&_e)?(Mn.dx=J.parseShort(),Mn.dy=J.parseShort()):Mn.matchedPoints=[J.parseUShort(),J.parseUShort()]:0<(2&_e)?(Mn.dx=J.parseChar(),Mn.dy=J.parseChar()):Mn.matchedPoints=[J.parseByte(),J.parseByte()],0<(8&_e)?Mn.xScale=Mn.yScale=J.parseF2Dot14():0<(64&_e)?(Mn.xScale=J.parseF2Dot14(),Mn.yScale=J.parseF2Dot14()):0<(128&_e)&&(Mn.xScale=J.parseF2Dot14(),Mn.scale01=J.parseF2Dot14(),Mn.scale10=J.parseF2Dot14(),Mn.yScale=J.parseF2Dot14()),w.components.push(Mn),un=!!(32&_e)}if(256&_e){w.instructionLength=J.parseUShort(),w.instructions=[];for(var Tn=0;Tn<w.instructionLength;Tn+=1)w.instructions.push(J.parseByte())}}}function ml(w,I){for(var j=[],V=0;V<w.length;V+=1){var J;j.push(J={x:I.xScale*(J=w[V]).x+I.scale01*J.y+I.dx,y:I.scale10*J.x+I.yScale*J.y+I.dy,onCurve:J.onCurve,lastPointOfContour:J.lastPointOfContour})}return j}function Hn(w){var I=new pe;if(w)for(var j=function(it){for(var Ze=[],Ue=[],bt=0;bt<it.length;bt+=1){var ct=it[bt];Ue.push(ct),ct.lastPointOfContour&&(Ze.push(Ue),Ue=[])}return P.argument(0===Ue.length,"There are still points left in the current contour."),Ze}(w),V=0;V<j.length;++V){var J,se=j[V],me=se[0];(ae=se[se.length-1]).onCurve?I.moveTo(ae.x,ae.y):me.onCurve?I.moveTo(me.x,me.y):I.moveTo((J={x:.5*(ae.x+me.x),y:.5*(ae.y+me.y)}).x,J.y);for(var De=0;De<se.length;++De){var _e,ae=me;me=se[(De+1)%se.length],ae.onCurve?I.lineTo(ae.x,ae.y):(_e=me,me.onCurve||(_e={x:.5*(ae.x+me.x),y:.5*(ae.y+me.y)}),I.quadraticCurveTo(ae.x,ae.y,_e.x,_e.y))}I.closePath()}return I}function jr(w,I){if(I.isComposite)for(var j=0;j<I.components.length;j+=1){var J=w.get((V=I.components[j]).glyphIndex);if(J.getPath(),J.points){var se=void 0;if(void 0===V.matchedPoints)se=ml(J.points,V);else{if(V.matchedPoints[0]>I.points.length-1||V.matchedPoints[1]>J.points.length-1)throw Error("Matched points out of range in "+I.name);var V,ae=I.points[V.matchedPoints[0]],me=ml([me=J.points[V.matchedPoints[1]]],V={xScale:V.xScale,scale01:V.scale01,scale10:V.scale10,yScale:V.yScale,dx:0,dy:0})[0];V.dx=ae.x-me.x,V.dy=ae.y-me.y,se=ml(J.points,V)}I.points=I.points.concat(se)}}return Hn(I.points)}(Ur.prototype=ru.prototype={searchTag:pl,binSearch:Di,getTable:function(w){var I=this.font.tables[this.tableName];return!I&&w?this.font.tables[this.tableName]=this.createDefaultTable():I},getScriptNames:function(){var w=this.getTable();return w?w.scripts.map(function(I){return I.tag}):[]},getDefaultScriptName:function(){var w=this.getTable();if(w){for(var I=!1,j=0;j<w.scripts.length;j++){var V=w.scripts[j].tag;if("DFLT"===V)return V;"latn"===V&&(I=!0)}return I?"latn":void 0}},getScriptTable:function(w,I){var j,V=this.getTable(I);if(V)return j=V.scripts,0<=(V=pl(V.scripts,w=w||"DFLT"))?j[V].script:I?(j.splice(-1-V,0,I={tag:w,script:{defaultLangSys:{reserved:0,reqFeatureIndex:65535,featureIndexes:[]},langSysRecords:[]}}),I.script):void 0},getLangSysTable:function(J,I,j){var V;if(J=this.getScriptTable(J,j))return I&&"dflt"!==I&&"DFLT"!==I?0<=(V=pl(J.langSysRecords,I))?J.langSysRecords[V].langSys:j?(J.langSysRecords.splice(-1-V,0,j={tag:I,langSys:{reserved:0,reqFeatureIndex:65535,featureIndexes:[]}}),j.langSys):void 0:J.defaultLangSys},getFeatureTable:function(w,I,j,V){if(w=this.getLangSysTable(w,I,V)){for(var J,se=w.featureIndexes,ae=this.font.tables[this.tableName].features,me=0;me<se.length;me++)if((J=ae[se[me]]).tag===j)return J.feature;if(V)return P.assert(0===(I=ae.length)||j>=ae[I-1].tag,"Features must be added in alphabetical order."),ae.push(J={tag:j,feature:{params:0,lookupListIndexes:[]}}),se.push(I),J.feature}},getLookupTables:function(se,I,j,V,J){var ae=[];if(se=this.getFeatureTable(se,I,j,J)){for(var me,De=se.lookupListIndexes,_e=this.font.tables[this.tableName].lookups,We=0;We<De.length;We++)(me=_e[De[We]]).lookupType===V&&ae.push(me);if(0===ae.length&&J)return I=_e.length,_e.push(me={lookupType:V,lookupFlag:0,subtables:[],markFilteringSet:void 0}),De.push(I),[me]}return ae},getGlyphClass:function(w,I){switch(w.format){case 1:return w.startGlyph<=I&&I<w.startGlyph+w.classes.length?w.classes[I-w.startGlyph]:0;case 2:var j=nu(w.ranges,I);return j?j.classId:0}},getCoverageIndex:function(w,I){switch(w.format){case 1:var j=Di(w.glyphs,I);return 0<=j?j:-1;case 2:return(j=nu(w.ranges,I))?j.index+I-j.start:-1}},expandCoverage:function(w){if(1===w.format)return w.glyphs;for(var I=[],j=w.ranges,V=0;V<j.length;V++)for(var J=j[V],ae=J.end,me=J.start;me<=ae;me++)I.push(me);return I}}).init=function(){var w=this.getDefaultScriptName();this.defaultKerningTables=this.getKerningTables(w)},Ur.prototype.getKerningValue=function(w,I,j){for(var V=0;V<w.length;V++)for(var J=w[V].subtables,se=0;se<J.length;se++){var ae=J[se],me=this.getCoverageIndex(ae.coverage,I);if(!(me<0))switch(ae.posFormat){case 1:for(var De=ae.pairSets[me],_e=0;_e<De.length;_e++){var We=De[_e];if(We.secondGlyph===j)return We.value1&&We.value1.xAdvance||0}break;case 2:var Ze=this.getGlyphClass(ae.classDef1,I),it=this.getGlyphClass(ae.classDef2,j);return(Ze=ae.classRecords[Ze][it]).value1&&Ze.value1.xAdvance||0}}return 0},Ur.prototype.getKerningTables=function(w,I){if(this.font.tables.gpos)return this.getLookupTables(w,I,"kern",2)},(Rn.prototype=ru.prototype).createDefaultTable=function(){return{version:1,scripts:[{tag:"DFLT",script:{defaultLangSys:{reserved:0,reqFeatureIndex:65535,featureIndexes:[]},langSysRecords:[]}}],features:[],lookups:[]}},Rn.prototype.getSingle=function(w,I,j){for(var V=[],J=this.getLookupTables(I,j,w,1),se=0;se<J.length;se++)for(var ae=J[se].subtables,me=0;me<ae.length;me++){var De=ae[me],_e=this.expandCoverage(De.coverage),We=void 0;if(1===De.substFormat){var it=De.deltaGlyphId;for(We=0;We<_e.length;We++){var Ze=_e[We];V.push({sub:Ze,by:Ze+it})}}else{var Ue=De.substitute;for(We=0;We<_e.length;We++)V.push({sub:_e[We],by:Ue[We]})}}return V},Rn.prototype.getAlternates=function(w,I,j){for(var V=[],J=this.getLookupTables(I,j,w,3),se=0;se<J.length;se++)for(var ae=J[se].subtables,me=0;me<ae.length;me++)for(var De=ae[me],_e=this.expandCoverage(De.coverage),We=De.alternateSets,it=0;it<_e.length;it++)V.push({sub:_e[it],by:We[it]});return V},Rn.prototype.getLigatures=function(w,I,j){for(var V=[],J=this.getLookupTables(I,j,w,4),se=0;se<J.length;se++)for(var ae=J[se].subtables,me=0;me<ae.length;me++)for(var De=ae[me],_e=this.expandCoverage(De.coverage),We=De.ligatureSets,it=0;it<_e.length;it++)for(var Ze=_e[it],Ue=We[it],bt=0;bt<Ue.length;bt++){var ct=Ue[bt];V.push({sub:[Ze].concat(ct.components),by:ct.ligGlyph})}return V},Rn.prototype.addSingle=function(w,I,j,V){j=iu(this.getLookupTables(j,V,w,1,!0)[0],2,{substFormat:2,coverage:{format:1,glyphs:[]},substitute:[]}),P.assert(1===j.coverage.format,"Ligature: unable to modify coverage table format "+j.coverage.format),(w=this.binSearch(j.coverage.glyphs,V=I.sub))<0&&(j.coverage.glyphs.splice(w=-1-w,0,V),j.substitute.splice(w,0,0)),j.substitute[w]=I.by},Rn.prototype.addAlternate=function(w,I,j,V){j=iu(this.getLookupTables(j,V,w,3,!0)[0],1,{substFormat:1,coverage:{format:1,glyphs:[]},alternateSets:[]}),P.assert(1===j.coverage.format,"Ligature: unable to modify coverage table format "+j.coverage.format),(w=this.binSearch(j.coverage.glyphs,V=I.sub))<0&&(j.coverage.glyphs.splice(w=-1-w,0,V),j.alternateSets.splice(w,0,0)),j.alternateSets[w]=I.by},Rn.prototype.addLigature=function(se,De,me,J){(J=(me=this.getLookupTables(me,J,se,4,!0)[0]).subtables[0])||(me.subtables[0]=J={substFormat:1,coverage:{format:1,glyphs:[]},ligatureSets:[]}),P.assert(1===J.coverage.format,"Ligature: unable to modify coverage table format "+J.coverage.format),se=De.sub[0];var ae=De.sub.slice(1);if(me={ligGlyph:De.by,components:ae},0<=(De=this.binSearch(J.coverage.glyphs,se))){for(var _e=J.ligatureSets[De],We=0;We<_e.length;We++)if(function(it,Ze){var Ue=it.length;if(Ue===Ze.length){for(var bt=0;bt<Ue;bt++)if(it[bt]!==Ze[bt])return;return 1}}(_e[We].components,ae))return;_e.push(me)}else J.coverage.glyphs.splice(De=-1-De,0,se),J.ligatureSets.splice(De,0,[me])},Rn.prototype.getFeature=function(w,I,j){if(/ss\d\d/.test(w))return this.getSingle(w,I,j);switch(w){case"aalt":case"salt":return this.getSingle(w,I,j).concat(this.getAlternates(w,I,j));case"dlig":case"liga":case"rlig":return this.getLigatures(w,I,j)}},Rn.prototype.add=function(w,I,j,V){if(/ss\d\d/.test(w))return this.addSingle(w,I,j,V);switch(w){case"aalt":case"salt":return"number"==typeof I.by?this.addSingle(w,I,j,V):this.addAlternate(w,I,j,V);case"dlig":case"liga":case"rlig":return this.addLigature(w,I,j,V)}};var xp={getPath:Hn,parse:function(w,I,j,V){for(var J=new _n.GlyphSet(V),se=0;se<j.length-1;se+=1){var ae=j[se];J.push(se,ae!==j[se+1]?_n.ttfGlyphLoader(V,se,jt,w,I+ae,jr):_n.glyphLoader(V,se))}return J}};function yv(w){this.font=w,this.getCommands=function(I){return xp.getPath(I).commands},this._fpgmState=this._prepState=void 0,this._errorState=0}function vv(w){return w}function ou(w){return Math.sign(w)*Math.round(Math.abs(w))}function Ns(w){return Math.sign(w)*Math.round(Math.abs(2*w))/2}function fw(w){return Math.sign(w)*(Math.round(Math.abs(w)+.5)-.5)}function bv(w){return Math.sign(w)*Math.ceil(Math.abs(w))}function pw(w){return Math.sign(w)*Math.floor(Math.abs(w))}function da(w){var I=this.srPeriod,j=this.srPhase,V=1;return w<0&&(w=-w,V=-1),w+=this.srThreshold-j,w=Math.trunc(w/I)*I,(w+=j)<0?j*V:w*V}var Wo={x:1,y:0,axis:"x",distance:function(w,I,j,V){return(j?w.xo:w.x)-(V?I.xo:I.x)},interpolate:function(w,I,j,V){var J,se,ae,me,De,_e,We;if(!V||V===this)return J=w.xo-I.xo,se=w.xo-j.xo,De=I.x-I.xo,_e=j.x-j.xo,0===(We=(ae=Math.abs(J))+(me=Math.abs(se)))?void(w.x=w.xo+(De+_e)/2):void(w.x=w.xo+(De*me+_e*ae)/We);J=V.distance(w,I,!0,!0),se=V.distance(w,j,!0,!0),De=V.distance(I,I,!1,!0),_e=V.distance(j,j,!1,!0),0===(We=(ae=Math.abs(J))+(me=Math.abs(se)))?Wo.setRelative(w,w,(De+_e)/2,V,!0):Wo.setRelative(w,w,(De*me+_e*ae)/We,V,!0)},normalSlope:Number.NEGATIVE_INFINITY,setRelative:function(w,I,j,V,J){var se,ae;V&&V!==this?(se=J?I.xo:I.x,ae=J?I.yo:I.y,w.x=(se+=j*V.x)+(w.y-(ae+=j*V.y))/V.normalSlope):w.x=(J?I.xo:I.x)+j},slope:0,touch:function(w){w.xTouched=!0},touched:function(w){return w.xTouched},untouch:function(w){w.xTouched=!1}},ha={x:0,y:1,axis:"y",distance:function(w,I,j,V){return(j?w.yo:w.y)-(V?I.yo:I.y)},interpolate:function(w,I,j,V){var J,se,ae,me,De,_e,We;if(!V||V===this)return J=w.yo-I.yo,se=w.yo-j.yo,De=I.y-I.yo,_e=j.y-j.yo,0===(We=(ae=Math.abs(J))+(me=Math.abs(se)))?void(w.y=w.yo+(De+_e)/2):void(w.y=w.yo+(De*me+_e*ae)/We);J=V.distance(w,I,!0,!0),se=V.distance(w,j,!0,!0),De=V.distance(I,I,!1,!0),_e=V.distance(j,j,!1,!0),0===(We=(ae=Math.abs(J))+(me=Math.abs(se)))?ha.setRelative(w,w,(De+_e)/2,V,!0):ha.setRelative(w,w,(De*me+_e*ae)/We,V,!0)},normalSlope:0,setRelative:function(w,I,j,V,J){var se,ae;V&&V!==this?(se=J?I.xo:I.x,ae=J?I.yo:I.y,w.y=(ae+=j*V.y)+V.normalSlope*(w.x-(se+=j*V.x))):w.y=(J?I.yo:I.y)+j},slope:Number.POSITIVE_INFINITY,touch:function(w){w.yTouched=!0},touched:function(w){return w.yTouched},untouch:function(w){w.yTouched=!1}};function au(w,I){this.x=w,this.y=I,this.axis=void 0,this.slope=I/w,this.normalSlope=-w/I,Object.freeze(this)}function lu(w,I){var j=Math.sqrt(w*w+I*I);return I/=j,1==(w/=j)&&0===I?Wo:0===w&&1===I?ha:new au(w,I)}function qo(w,I,j,V){this.x=this.xo=Math.round(64*w)/64,this.y=this.yo=Math.round(64*I)/64,this.lastPointOfContour=j,this.onCurve=V,this.prevPointOnContour=void 0,this.nextPointOnContour=void 0,this.xTouched=!1,this.yTouched=!1,Object.preventExtensions(this)}Object.freeze(Wo),Object.freeze(ha),au.prototype.distance=function(w,I,j,V){return this.x*Wo.distance(w,I,j,V)+this.y*ha.distance(w,I,j,V)},au.prototype.interpolate=function(w,J,se,V){var ae=V.distance(w,J,!0,!0),me=V.distance(w,se,!0,!0),De=(J=V.distance(J,J,!1,!0),se=V.distance(se,se,!1,!0),(ae=Math.abs(ae))+(me=Math.abs(me)));this.setRelative(w,w,0===De?(J+se)/2:(J*me+se*ae)/De,V,!0)},au.prototype.setRelative=function(w,se,De,_e,me){var ae=me?se.xo:se.x,We=(me=me?se.yo:se.y,se=ae+De*(_e=_e||this).x,ae=me+De*_e.y,me=_e.normalSlope,w.y);w.x=((De=this.slope)*(_e=w.x)-me*se+ae-We)/(De-me),w.y=De*(w.x-_e)+We},au.prototype.touch=function(w){w.xTouched=!0,w.yTouched=!0},qo.prototype.nextTouched=function(w){for(var I=this.nextPointOnContour;!w.touched(I)&&I!==this;)I=I.nextPointOnContour;return I},qo.prototype.prevTouched=function(w){for(var I=this.prevPointOnContour;!w.touched(I)&&I!==this;)I=I.prevPointOnContour;return I};var cu=Object.freeze(new qo(0,0)),_v={cvCutIn:17/16,deltaBase:9,deltaShift:.125,loop:1,minDis:1,autoFlip:!0};function Ra(w,I){switch(this.env=w,this.stack=[],this.prog=I,w){case"glyf":this.zp0=this.zp1=this.zp2=1,this.rp0=this.rp1=this.rp2=0;case"prep":this.fv=this.pv=this.dpv=Wo,this.round=ou}}function fs(w){for(var I=w.tZone=new Array(w.gZone.length),j=0;j<I.length;j++)I[j]=new qo(0,0)}function Bn(w,I){var j,V=w.prog,J=w.ip,se=1;do{if(88===(j=V[++J]))se++;else if(89===j)se--;else if(64===j)J+=V[J+1]+1;else if(65===j)J+=2*V[J+1]+1;else if(176<=j&&j<=183)J+=j-176+1;else if(184<=j&&j<=191)J+=2*(j-184+1);else if(I&&1===se&&27===j)break}while(0<se);w.ip=J}function xv(w,I){S.DEBUG&&console.log(I.step,"SVTCA["+w.axis+"]"),I.fv=I.pv=I.dpv=w}function wv(w,I){S.DEBUG&&console.log(I.step,"SPVTCA["+w.axis+"]"),I.pv=I.dpv=w}function Sv(w,I){S.DEBUG&&console.log(I.step,"SFVTCA["+w.axis+"]"),I.fv=w}function Dn(w,I){var j,V=(J=I.stack).pop(),J=J.pop(),se=I.z2[V],ae=I.z1[J];S.DEBUG&&console.log("SPVTL["+w+"]",V,J),V=w?(j=se.y-ae.y,ae.x-se.x):(j=ae.x-se.x,ae.y-se.y),I.pv=I.dpv=lu(j,V)}function Mv(w,I){var j,V=(J=I.stack).pop(),J=J.pop(),se=I.z2[V],ae=I.z1[J];S.DEBUG&&console.log("SFVTL["+w+"]",V,J),V=w?(j=se.y-ae.y,ae.x-se.x):(j=ae.x-se.x,ae.y-se.y),I.fv=lu(j,V)}function Cs(w){S.DEBUG&&console.log(w.step,"POP[]"),w.stack.pop()}function tc(w,I){var j=I.stack.pop(),V=I.z0[j],J=I.fv,se=I.pv,ae=(S.DEBUG&&console.log(I.step,"MDAP["+w+"]",j),se.distance(V,cu));w&&(ae=I.round(ae)),J.setRelative(V,cu,ae,se),J.touch(V),I.rp0=I.rp1=j}function wp(w,I){var j,V,J,se=I.z2,ae=se.length-2;S.DEBUG&&console.log(I.step,"IUP["+w.axis+"]");for(var me=0;me<ae;me++)w.touched(j=se[me])||(V=j.prevTouched(w))!==j&&(V===(J=j.nextTouched(w))&&w.setRelative(j,j,w.distance(V,V,!1,!0),w,!0),w.interpolate(j,V,J,w))}function ph(w,I){for(var j=I.stack,J=(w?I.z0:I.z1)[w?I.rp1:I.rp2],se=I.fv,ae=I.pv,me=I.loop,De=I.z2;me--;){var _e=j.pop(),We=De[_e],it=ae.distance(J,J,!1,!0);se.setRelative(We,We,it,ae),se.touch(We),S.DEBUG&&console.log(I.step,(1<I.loop?"loop "+(I.loop-me)+": ":"")+"SHP["+(w?"rp1":"rp2")+"]",_e)}I.loop=1}function Sp(w,I){for(var V=(w?I.z0:I.z1)[w?I.rp1:I.rp2],J=I.fv,se=I.pv,ae=I.stack.pop(),me=I.z2[I.contours[ae]],De=me,_e=(S.DEBUG&&console.log(I.step,"SHC["+w+"]",ae),se.distance(V,V,!1,!0));De!==V&&J.setRelative(De,De,_e,se),(De=De.nextPointOnContour)!==me;);}function nc(w,I){var j,V,J=(w?I.z0:I.z1)[J=w?I.rp1:I.rp2],se=I.fv,ae=I.pv,me=(me=I.stack).pop();switch(S.DEBUG&&console.log(I.step,"SHZ["+w+"]",me),me){case 0:j=I.tZone;break;case 1:j=I.gZone;break;default:throw new Error("Invalid zone")}for(var De=ae.distance(J,J,!1,!0),_e=j.length-2,We=0;We<_e;We++)se.setRelative(V=j[We],V,De,ae)}function rc(w,I){var j=(V=I.stack).pop()/64,V=V.pop(),J=I.z1[V],ae=I.fv;ae.setRelative(J,I.z0[I.rp0],j,I.pv),ae.touch(J),S.DEBUG&&console.log(I.step,"MSIRP["+w+"]",j,V),I.rp1=I.rp0,I.rp2=V,w&&(I.rp0=V)}function uu(w,I){var me=(j=I.stack).pop(),j=j.pop(),V=I.z0[j],J=I.fv,se=I.pv,ae=I.cvt[me];S.DEBUG&&console.log(I.step,"MIAP["+w+"]",me,"(",ae,")",j),me=se.distance(V,cu),w&&(Math.abs(me-ae)<I.cvCutIn&&(me=ae),me=I.round(me)),J.setRelative(V,cu,me,se),0===I.zp0&&(V.xo=V.x,V.yo=V.y),J.touch(V),I.rp0=I.rp1=j}function mh(w,I){var j=I.stack,V=j.pop(),J=I.z2[V];S.DEBUG&&console.log(I.step,"GC["+w+"]",V),j.push(64*I.dpv.distance(J,cu,w,!1))}function Mp(w,I){var j=(V=I.stack).pop(),V=V.pop(),se=I.dpv.distance(se=I.z0[V],I.z1[j],w,w);S.DEBUG&&console.log(I.step,"MD["+w+"]",j,V,"->",se),I.stack.push(Math.round(64*se))}function fr(w,I){var j=I.stack,V=j.pop(),J=I.fv,se=I.pv,ae=I.ppem,me=I.deltaBase+16*(w-1),De=I.deltaShift,_e=I.z0;S.DEBUG&&console.log(I.step,"DELTAP["+w+"]",V,j);for(var We=0;We<V;We++){var it=j.pop(),Ze=j.pop();me+((240&Ze)>>4)===ae&&(0<=(Ze=(15&Ze)-8)&&Ze++,S.DEBUG&&console.log(I.step,"DELTAPFIX",it,"by",Ze*De),J.setRelative(it=_e[it],it,Ze*De,se))}}function gl(w,I){var j=I.stack,V=j.pop();S.DEBUG&&console.log(I.step,"ROUND[]"),j.push(64*I.round(V/64))}function du(w,I){var j=I.stack,V=j.pop(),J=I.ppem,se=I.deltaBase+16*(w-1),ae=I.deltaShift;S.DEBUG&&console.log(I.step,"DELTAC["+w+"]",V,j);for(var me=0;me<V;me++){var De=j.pop(),_e=j.pop();se+((240&_e)>>4)===J&&(0<=(_e=(15&_e)-8)&&_e++,_e*=ae,S.DEBUG&&console.log(I.step,"DELTACFIX",De,"by",_e),I.cvt[De]+=_e)}}function ps(w,I){var j,V=(J=I.stack).pop(),J=J.pop(),se=I.z2[V],ae=I.z1[J];S.DEBUG&&console.log(I.step,"SDPVTL["+w+"]",V,J),V=w?(j=se.y-ae.y,ae.x-se.x):(j=ae.x-se.x,ae.y-se.y),I.dpv=lu(j,V)}function $o(w,I){var j=I.stack,V=I.prog,J=I.ip;S.DEBUG&&console.log(I.step,"PUSHB["+w+"]");for(var se=0;se<w;se++)j.push(V[++J]);I.ip=J}function Oa(w,I){var j=I.ip,V=I.prog,J=I.stack;S.DEBUG&&console.log(I.ip,"PUSHW["+w+"]");for(var se=0;se<w;se++){var ae=V[++j]<<8|V[++j];32768&ae&&(ae=-(1+(65535^ae))),J.push(ae)}I.ip=j}function Ht(w,I,j,V,J,se){var ae,me,We,_e=se.stack,De=w&&_e.pop(),it=(_e=_e.pop(),se.z1[_e]),Ze=se.minDis,Ue=se.fv,bt=se.dpv,ct=ae=bt.distance(it,We=se.z0[We=se.rp0],!0,!0),ht=0<=ct?1:-1;ct=Math.abs(ct),w&&(me=se.cvt[De],V&&Math.abs(ct-me)<se.cvCutIn&&(ct=me)),j&&ct<Ze&&(ct=Ze),V&&(ct=se.round(ct)),Ue.setRelative(it,We,ht*ct,bt),Ue.touch(it),S.DEBUG&&console.log(se.step,(w?"MIRP[":"MDRP[")+(I?"M":"m")+(j?">":"_")+(V?"R":"_")+(0===J?"Gr":1===J?"Bl":2===J?"Wh":"")+"]",w?De+"("+se.cvt[De]+","+me+")":"",_e,"(d =",ae,"->",ht*ct,")"),se.rp1=se.rp0,se.rp2=_e,I&&(se.rp0=_e)}yv.prototype.exec=function(w,I){if("number"!=typeof I)throw new Error("Point size is not a number!");if(!(2<this._errorState)){var j=this.font,V=this._prepState;if(!V||V.ppem!==I){var J=this._fpgmState;if(!J){Ra.prototype=_v,(J=this._fpgmState=new Ra("fpgm",j.tables.fpgm)).funcs=[],J.font=j,S.DEBUG&&(console.log("---EXEC FPGM---"),J.step=-1);try{hn(J)}catch(_e){return console.log("Hinting error in FPGM:"+_e),void(this._errorState=3)}}Ra.prototype=J,(V=this._prepState=new Ra("prep",j.tables.prep)).ppem=I;var se=j.tables.cvt;if(se)for(var ae=V.cvt=new Array(se.length),me=I/j.unitsPerEm,De=0;De<se.length;De++)ae[De]=se[De]*me;else V.cvt=[];S.DEBUG&&(console.log("---EXEC PREP---"),V.step=-1);try{hn(V)}catch(_e){this._errorState<2&&console.log("Hinting error in PREP:"+_e),this._errorState=2}}if(!(1<this._errorState))try{return mw(w,V)}catch(_e){this._errorState<1&&(console.log("Hinting error:"+_e),console.log("Note: further hinting errors are silenced")),this._errorState=1}}};var mw=function(w,I){var j=I.ppem/I.font.unitsPerEm,V=j,J=w.components;if(Ra.prototype=I,J){for(var se=I.font,ae=[],me=[],De=0;De<J.length;De++){var _e=J[De],We=se.glyphs.get(_e.glyphIndex),it=new Ra("glyf",We.instructions);S.DEBUG&&(console.log("---EXEC COMP "+De+"---"),it.step=-1),Ev(We,it,j,V);for(var Ze=Math.round(_e.dx*j),Ue=Math.round(_e.dy*V),bt=it.gZone,ct=it.contours,ht=0;ht<bt.length;ht++){var at=bt[ht];at.xTouched=at.yTouched=!1,at.xo=at.x=at.x+Ze,at.yo=at.y=at.y+Ue}var nt=ae.length;ae.push.apply(ae,bt);for(var gn=0;gn<ct.length;gn++)me.push(ct[gn]+nt)}w.instructions&&!it.inhibitGridFit&&((it=new Ra("glyf",w.instructions)).gZone=it.z0=it.z1=it.z2=ae,it.contours=me,ae.push(new qo(0,0),new qo(Math.round(w.advanceWidth*j),0)),S.DEBUG&&(console.log("---EXEC COMPOSITE---"),it.step=-1),hn(it),ae.length-=2)}else it=new Ra("glyf",w.instructions),S.DEBUG&&(console.log("---EXEC GLYPH---"),it.step=-1),Ev(w,it,j,V),ae=it.gZone;return ae},Ev=function(w,I,j,V){for(var J,se,me=w.points||[],De=me.length,_e=I.gZone=I.z0=I.z1=I.z2=[],We=I.contours=[],it=0;it<De;it++)_e[it]=new qo((J=me[it]).x*j,J.y*V,J.lastPointOfContour,J.onCurve);for(var Ze=0;Ze<De;Ze++)J=_e[Ze],se||(se=J,We.push(Ze)),J.lastPointOfContour?((J.nextPointOnContour=se).prevPointOnContour=J,se=void 0):(J.nextPointOnContour=_e[Ze+1]).prevPointOnContour=J;if(!I.inhibitGridFit){if(S.DEBUG){console.log("PROCESSING GLYPH",I.stack);for(var Ue=0;Ue<De;Ue++)console.log(Ue,_e[Ue].x,_e[Ue].y)}if(_e.push(new qo(0,0),new qo(Math.round(w.advanceWidth*j),0)),hn(I),_e.length-=2,S.DEBUG){console.log("FINISHED GLYPH",I.stack);for(var bt=0;bt<De;bt++)console.log(bt,_e[bt].x,_e[bt].y)}}},hn=function(w){var I=w.prog;if(I){var j,V=I.length;for(w.ip=0;w.ip<V;w.ip++){if(S.DEBUG&&w.step++,!(j=gh[I[w.ip]]))throw new Error("unknown instruction: 0x"+Number(I[w.ip]).toString(16));j(w)}}},gh=[xv.bind(void 0,ha),xv.bind(void 0,Wo),wv.bind(void 0,ha),wv.bind(void 0,Wo),Sv.bind(void 0,ha),Sv.bind(void 0,Wo),Dn.bind(void 0,0),Dn.bind(void 0,1),Mv.bind(void 0,0),Mv.bind(void 0,1),function(w){var I=(j=w.stack).pop(),j=j.pop();S.DEBUG&&console.log(w.step,"SPVFS[]",I,j),w.pv=w.dpv=lu(j,I)},function(w){var I=(j=w.stack).pop(),j=j.pop();S.DEBUG&&console.log(w.step,"SPVFS[]",I,j),w.fv=lu(j,I)},function(w){var I=w.stack,j=w.pv;S.DEBUG&&console.log(w.step,"GPV[]"),I.push(16384*j.x),I.push(16384*j.y)},function(w){var I=w.stack,j=w.fv;S.DEBUG&&console.log(w.step,"GFV[]"),I.push(16384*j.x),I.push(16384*j.y)},function(w){w.fv=w.pv,S.DEBUG&&console.log(w.step,"SFVTPV[]")},function(I){var j=(ae=I.stack).pop(),V=ae.pop(),J=ae.pop(),se=ae.pop(),ae=ae.pop(),me=(De=I.z0)[j],De=De[V],_e=(We=I.z1)[J],We=We[se],it=(I=I.z2[ae],S.DEBUG&&console.log("ISECT[], ",j,V,J,se,ae),j=me.x,V=me.y,me=_e.y,j*(se=De.y)-V*(J=De.x)),Ze=(ae=_e.x)*(_e=We.y)-me*(De=We.x);I.x=(it*(ae-De)-Ze*(j-J))/(We=(j-J)*(me-_e)-(V-se)*(ae-De)),I.y=(it*(me-_e)-Ze*(V-se))/We},function(w){w.rp0=w.stack.pop(),S.DEBUG&&console.log(w.step,"SRP0[]",w.rp0)},function(w){w.rp1=w.stack.pop(),S.DEBUG&&console.log(w.step,"SRP1[]",w.rp1)},function(w){w.rp2=w.stack.pop(),S.DEBUG&&console.log(w.step,"SRP2[]",w.rp2)},function(w){var I=w.stack.pop();switch(S.DEBUG&&console.log(w.step,"SZP0[]",I),w.zp0=I){case 0:w.tZone||fs(w),w.z0=w.tZone;break;case 1:w.z0=w.gZone;break;default:throw new Error("Invalid zone pointer")}},function(w){var I=w.stack.pop();switch(S.DEBUG&&console.log(w.step,"SZP1[]",I),w.zp1=I){case 0:w.tZone||fs(w),w.z1=w.tZone;break;case 1:w.z1=w.gZone;break;default:throw new Error("Invalid zone pointer")}},function(w){var I=w.stack.pop();switch(S.DEBUG&&console.log(w.step,"SZP2[]",I),w.zp2=I){case 0:w.tZone||fs(w),w.z2=w.tZone;break;case 1:w.z2=w.gZone;break;default:throw new Error("Invalid zone pointer")}},function(w){var I=w.stack.pop();switch(S.DEBUG&&console.log(w.step,"SZPS[]",I),w.zp0=w.zp1=w.zp2=I){case 0:w.tZone||fs(w),w.z0=w.z1=w.z2=w.tZone;break;case 1:w.z0=w.z1=w.z2=w.gZone;break;default:throw new Error("Invalid zone pointer")}},function(w){w.loop=w.stack.pop(),S.DEBUG&&console.log(w.step,"SLOOP[]",w.loop)},function(w){S.DEBUG&&console.log(w.step,"RTG[]"),w.round=ou},function(w){S.DEBUG&&console.log(w.step,"RTHG[]"),w.round=fw},function(w){var I=w.stack.pop();S.DEBUG&&console.log(w.step,"SMD[]",I),w.minDis=I/64},function(w){S.DEBUG&&console.log(w.step,"ELSE[]"),Bn(w,!1)},function(w){var I=w.stack.pop();S.DEBUG&&console.log(w.step,"JMPR[]",I),w.ip+=I-1},function(w){var I=w.stack.pop();S.DEBUG&&console.log(w.step,"SCVTCI[]",I),w.cvCutIn=I/64},void 0,void 0,function(w){var I=w.stack;S.DEBUG&&console.log(w.step,"DUP[]"),I.push(I[I.length-1])},Cs,function(w){S.DEBUG&&console.log(w.step,"CLEAR[]"),w.stack.length=0},function(w){var I=w.stack,j=I.pop(),V=I.pop();S.DEBUG&&console.log(w.step,"SWAP[]"),I.push(j),I.push(V)},function(w){var I=w.stack;S.DEBUG&&console.log(w.step,"DEPTH[]"),I.push(I.length)},function(w){var I=w.stack,j=I.pop();S.DEBUG&&console.log(w.step,"CINDEX[]",j),I.push(I[I.length-j])},function(w){var I=w.stack,j=I.pop();S.DEBUG&&console.log(w.step,"MINDEX[]",j),I.push(I.splice(I.length-j,1)[0])},void 0,void 0,void 0,function(w){var I=(V=w.stack).pop(),j=V.pop(),V=(S.DEBUG&&console.log(w.step,"LOOPCALL[]",I,j),w.ip),J=w.prog;w.prog=w.funcs[I];for(var se=0;se<j;se++)hn(w),S.DEBUG&&console.log(++w.step,se+1<j?"next loopcall":"done loopcall",se);w.ip=V,w.prog=J},function(w){var I=w.stack.pop(),j=(S.DEBUG&&console.log(w.step,"CALL[]",I),w.ip),V=w.prog;w.prog=w.funcs[I],hn(w),w.ip=j,w.prog=V,S.DEBUG&&console.log(++w.step,"returning from",I)},function(w){if("fpgm"!==w.env)throw new Error("FDEF not allowed here");var I=w.prog,j=w.ip,V=(V=w.stack).pop(),J=j;for(S.DEBUG&&console.log(w.step,"FDEF[]",V);45!==I[++j];);w.ip=j,w.funcs[V]=I.slice(J+1,j)},void 0,tc.bind(void 0,0),tc.bind(void 0,1),wp.bind(void 0,ha),wp.bind(void 0,Wo),ph.bind(void 0,0),ph.bind(void 0,1),Sp.bind(void 0,0),Sp.bind(void 0,1),nc.bind(void 0,0),nc.bind(void 0,1),function(w){for(var I=w.stack,j=w.loop,V=w.fv,J=I.pop()/64,se=w.z2;j--;){var ae=I.pop(),me=se[ae];S.DEBUG&&console.log(w.step,(1<w.loop?"loop "+(w.loop-j)+": ":"")+"SHPIX[]",ae,J),V.setRelative(me,me,J),V.touch(me)}w.loop=1},function(w){for(var I=w.stack,j=w.rp1,V=w.rp2,J=w.loop,se=w.z0[j],ae=w.z1[V],me=w.fv,De=w.dpv,_e=w.z2;J--;){var We=I.pop(),it=_e[We];S.DEBUG&&console.log(w.step,(1<w.loop?"loop "+(w.loop-J)+": ":"")+"IP[]",We,j,"<->",V),me.interpolate(it,se,ae,De),me.touch(it)}w.loop=1},rc.bind(void 0,0),rc.bind(void 0,1),function(w){for(var I=w.stack,V=w.z0[w.rp0],J=w.loop,se=w.fv,ae=w.pv,me=w.z1;J--;){var De=I.pop(),_e=me[De];S.DEBUG&&console.log(w.step,(1<w.loop?"loop "+(w.loop-J)+": ":"")+"ALIGNRP[]",De),se.setRelative(_e,V,0,ae),se.touch(_e)}w.loop=1},function(w){S.DEBUG&&console.log(w.step,"RTDG[]"),w.round=Ns},uu.bind(void 0,0),uu.bind(void 0,1),function(w){var I=w.prog,j=w.ip,V=w.stack,J=I[++j];S.DEBUG&&console.log(w.step,"NPUSHB[]",J);for(var se=0;se<J;se++)V.push(I[++j]);w.ip=j},function(w){var I=w.ip,j=w.prog,V=w.stack,J=j[++I];S.DEBUG&&console.log(w.step,"NPUSHW[]",J);for(var se=0;se<J;se++){var ae=j[++I]<<8|j[++I];32768&ae&&(ae=-(1+(65535^ae))),V.push(ae)}w.ip=I},function(w){var V=w.stack,I=(I=w.store)||(w.store=[]),j=V.pop();V=V.pop(),S.DEBUG&&console.log(w.step,"WS",j,V),I[V]=j},function(J){var I=J.stack,j=J.store,V=I.pop();S.DEBUG&&console.log(J.step,"RS",V),I.push(J=j&&j[V]||0)},function(w){var I=(j=w.stack).pop(),j=j.pop();S.DEBUG&&console.log(w.step,"WCVTP",I,j),w.cvt[j]=I/64},function(w){var I=w.stack,j=I.pop();S.DEBUG&&console.log(w.step,"RCVT",j),I.push(64*w.cvt[j])},mh.bind(void 0,0),mh.bind(void 0,1),void 0,Mp.bind(void 0,0),Mp.bind(void 0,1),function(w){S.DEBUG&&console.log(w.step,"MPPEM[]"),w.stack.push(w.ppem)},void 0,function(w){S.DEBUG&&console.log(w.step,"FLIPON[]"),w.autoFlip=!0},void 0,void 0,function(w){var I=w.stack,j=I.pop(),V=I.pop();S.DEBUG&&console.log(w.step,"LT[]",j,V),I.push(V<j?1:0)},function(w){var I=w.stack,j=I.pop(),V=I.pop();S.DEBUG&&console.log(w.step,"LTEQ[]",j,V),I.push(V<=j?1:0)},function(w){var I=w.stack,j=I.pop(),V=I.pop();S.DEBUG&&console.log(w.step,"GT[]",j,V),I.push(j<V?1:0)},function(w){var I=w.stack,j=I.pop(),V=I.pop();S.DEBUG&&console.log(w.step,"GTEQ[]",j,V),I.push(j<=V?1:0)},function(w){var I=w.stack,j=I.pop(),V=I.pop();S.DEBUG&&console.log(w.step,"EQ[]",j,V),I.push(j===V?1:0)},function(w){var I=w.stack,j=I.pop(),V=I.pop();S.DEBUG&&console.log(w.step,"NEQ[]",j,V),I.push(j!==V?1:0)},function(w){var I=w.stack,j=I.pop();S.DEBUG&&console.log(w.step,"ODD[]",j),I.push(Math.trunc(j)%2?1:0)},function(w){var I=w.stack,j=I.pop();S.DEBUG&&console.log(w.step,"EVEN[]",j),I.push(Math.trunc(j)%2?0:1)},function(w){var I=w.stack.pop();S.DEBUG&&console.log(w.step,"IF[]",I),I||(Bn(w,!0),S.DEBUG&&console.log(w.step,"EIF[]"))},function(w){S.DEBUG&&console.log(w.step,"EIF[]")},function(w){var I=w.stack,j=I.pop(),V=I.pop();S.DEBUG&&console.log(w.step,"AND[]",j,V),I.push(j&&V?1:0)},function(w){var I=w.stack,j=I.pop(),V=I.pop();S.DEBUG&&console.log(w.step,"OR[]",j,V),I.push(j||V?1:0)},function(w){var I=w.stack,j=I.pop();S.DEBUG&&console.log(w.step,"NOT[]",j),I.push(j?0:1)},fr.bind(void 0,1),function(w){var I=w.stack.pop();S.DEBUG&&console.log(w.step,"SDB[]",I),w.deltaBase=I},function(w){var I=w.stack.pop();S.DEBUG&&console.log(w.step,"SDS[]",I),w.deltaShift=Math.pow(.5,I)},function(w){var I=w.stack,j=I.pop(),V=I.pop();S.DEBUG&&console.log(w.step,"ADD[]",j,V),I.push(V+j)},function(w){var I=w.stack,j=I.pop(),V=I.pop();S.DEBUG&&console.log(w.step,"SUB[]",j,V),I.push(V-j)},function(w){var I=w.stack,j=I.pop(),V=I.pop();S.DEBUG&&console.log(w.step,"DIV[]",j,V),I.push(64*V/j)},function(w){var I=w.stack,j=I.pop(),V=I.pop();S.DEBUG&&console.log(w.step,"MUL[]",j,V),I.push(V*j/64)},function(w){var I=w.stack,j=I.pop();S.DEBUG&&console.log(w.step,"ABS[]",j),I.push(Math.abs(j))},function(w){var I=w.stack,j=I.pop();S.DEBUG&&console.log(w.step,"NEG[]",j),I.push(-j)},function(w){var I=w.stack,j=I.pop();S.DEBUG&&console.log(w.step,"FLOOR[]",j),I.push(64*Math.floor(j/64))},function(w){var I=w.stack,j=I.pop();S.DEBUG&&console.log(w.step,"CEILING[]",j),I.push(64*Math.ceil(j/64))},gl.bind(void 0,0),gl.bind(void 0,1),gl.bind(void 0,2),gl.bind(void 0,3),void 0,void 0,void 0,void 0,function(w){var I=(j=w.stack).pop(),j=j.pop();S.DEBUG&&console.log(w.step,"WCVTF[]",I,j),w.cvt[j]=I*w.ppem/w.font.unitsPerEm},fr.bind(void 0,2),fr.bind(void 0,3),du.bind(void 0,1),du.bind(void 0,2),du.bind(void 0,3),function(w){var I,j=w.stack.pop();switch(S.DEBUG&&console.log(w.step,"SROUND[]",j),w.round=da,192&j){case 0:I=.5;break;case 64:I=1;break;case 128:I=2;break;default:throw new Error("invalid SROUND value")}switch(w.srPeriod=I,48&j){case 0:w.srPhase=0;break;case 16:w.srPhase=.25*I;break;case 32:w.srPhase=.5*I;break;case 48:w.srPhase=.75*I;break;default:throw new Error("invalid SROUND value")}w.srThreshold=0==(j&=15)?0:(j/8-.5)*I},function(w){var I,j=w.stack.pop();switch(S.DEBUG&&console.log(w.step,"S45ROUND[]",j),w.round=da,192&j){case 0:I=Math.sqrt(2)/2;break;case 64:I=Math.sqrt(2);break;case 128:I=2*Math.sqrt(2);break;default:throw new Error("invalid S45ROUND value")}switch(w.srPeriod=I,48&j){case 0:w.srPhase=0;break;case 16:w.srPhase=.25*I;break;case 32:w.srPhase=.5*I;break;case 48:w.srPhase=.75*I;break;default:throw new Error("invalid S45ROUND value")}w.srThreshold=0==(j&=15)?0:(j/8-.5)*I},void 0,void 0,function(w){S.DEBUG&&console.log(w.step,"ROFF[]"),w.round=vv},void 0,function(w){S.DEBUG&&console.log(w.step,"RUTG[]"),w.round=bv},function(w){S.DEBUG&&console.log(w.step,"RDTG[]"),w.round=pw},Cs,Cs,void 0,void 0,void 0,void 0,void 0,function(w){var I=w.stack.pop();S.DEBUG&&console.log(w.step,"SCANCTRL[]",I)},ps.bind(void 0,0),ps.bind(void 0,1),function(w){var I=w.stack,j=I.pop(),V=0;S.DEBUG&&console.log(w.step,"GETINFO[]",j),1&j&&(V=35),32&j&&(V|=4096),I.push(V)},void 0,function(w){var I=w.stack,j=I.pop(),V=I.pop(),J=I.pop();S.DEBUG&&console.log(w.step,"ROLL[]"),I.push(V),I.push(j),I.push(J)},function(w){var I=w.stack,j=I.pop(),V=I.pop();S.DEBUG&&console.log(w.step,"MAX[]",j,V),I.push(Math.max(V,j))},function(w){var I=w.stack,j=I.pop(),V=I.pop();S.DEBUG&&console.log(w.step,"MIN[]",j,V),I.push(Math.min(V,j))},function(w){var I=w.stack.pop();S.DEBUG&&console.log(w.step,"SCANTYPE[]",I)},function(w){var I=w.stack.pop(),j=w.stack.pop();switch(S.DEBUG&&console.log(w.step,"INSTCTRL[]",I,j),I){case 1:return void(w.inhibitGridFit=!!j);case 2:return void(w.ignoreCvt=!!j);default:throw new Error("invalid INSTCTRL[] selector")}},void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,$o.bind(void 0,1),$o.bind(void 0,2),$o.bind(void 0,3),$o.bind(void 0,4),$o.bind(void 0,5),$o.bind(void 0,6),$o.bind(void 0,7),$o.bind(void 0,8),Oa.bind(void 0,1),Oa.bind(void 0,2),Oa.bind(void 0,3),Oa.bind(void 0,4),Oa.bind(void 0,5),Oa.bind(void 0,6),Oa.bind(void 0,7),Oa.bind(void 0,8),Ht.bind(void 0,0,0,0,0,0),Ht.bind(void 0,0,0,0,0,1),Ht.bind(void 0,0,0,0,0,2),Ht.bind(void 0,0,0,0,0,3),Ht.bind(void 0,0,0,0,1,0),Ht.bind(void 0,0,0,0,1,1),Ht.bind(void 0,0,0,0,1,2),Ht.bind(void 0,0,0,0,1,3),Ht.bind(void 0,0,0,1,0,0),Ht.bind(void 0,0,0,1,0,1),Ht.bind(void 0,0,0,1,0,2),Ht.bind(void 0,0,0,1,0,3),Ht.bind(void 0,0,0,1,1,0),Ht.bind(void 0,0,0,1,1,1),Ht.bind(void 0,0,0,1,1,2),Ht.bind(void 0,0,0,1,1,3),Ht.bind(void 0,0,1,0,0,0),Ht.bind(void 0,0,1,0,0,1),Ht.bind(void 0,0,1,0,0,2),Ht.bind(void 0,0,1,0,0,3),Ht.bind(void 0,0,1,0,1,0),Ht.bind(void 0,0,1,0,1,1),Ht.bind(void 0,0,1,0,1,2),Ht.bind(void 0,0,1,0,1,3),Ht.bind(void 0,0,1,1,0,0),Ht.bind(void 0,0,1,1,0,1),Ht.bind(void 0,0,1,1,0,2),Ht.bind(void 0,0,1,1,0,3),Ht.bind(void 0,0,1,1,1,0),Ht.bind(void 0,0,1,1,1,1),Ht.bind(void 0,0,1,1,1,2),Ht.bind(void 0,0,1,1,1,3),Ht.bind(void 0,1,0,0,0,0),Ht.bind(void 0,1,0,0,0,1),Ht.bind(void 0,1,0,0,0,2),Ht.bind(void 0,1,0,0,0,3),Ht.bind(void 0,1,0,0,1,0),Ht.bind(void 0,1,0,0,1,1),Ht.bind(void 0,1,0,0,1,2),Ht.bind(void 0,1,0,0,1,3),Ht.bind(void 0,1,0,1,0,0),Ht.bind(void 0,1,0,1,0,1),Ht.bind(void 0,1,0,1,0,2),Ht.bind(void 0,1,0,1,0,3),Ht.bind(void 0,1,0,1,1,0),Ht.bind(void 0,1,0,1,1,1),Ht.bind(void 0,1,0,1,1,2),Ht.bind(void 0,1,0,1,1,3),Ht.bind(void 0,1,1,0,0,0),Ht.bind(void 0,1,1,0,0,1),Ht.bind(void 0,1,1,0,0,2),Ht.bind(void 0,1,1,0,0,3),Ht.bind(void 0,1,1,0,1,0),Ht.bind(void 0,1,1,0,1,1),Ht.bind(void 0,1,1,0,1,2),Ht.bind(void 0,1,1,0,1,3),Ht.bind(void 0,1,1,1,0,0),Ht.bind(void 0,1,1,1,0,1),Ht.bind(void 0,1,1,1,0,2),Ht.bind(void 0,1,1,1,0,3),Ht.bind(void 0,1,1,1,1,0),Ht.bind(void 0,1,1,1,1,1),Ht.bind(void 0,1,1,1,1,2),Ht.bind(void 0,1,1,1,1,3)],yh=Array.from||function(w){return w.match(/[\uD800-\uDBFF][\uDC00-\uDFFF]?|[^\uD800-\uDFFF]|./g)||[]};function Wr(w){(w=w||{}).empty||(ec(w.familyName,"When creating a new Font object, familyName is required."),ec(w.styleName,"When creating a new Font object, styleName is required."),ec(w.unitsPerEm,"When creating a new Font object, unitsPerEm is required."),ec(w.ascender,"When creating a new Font object, ascender is required."),ec(w.descender,"When creating a new Font object, descender is required."),ec(w.descender<0,"Descender should be negative (e.g. -512)."),this.names={fontFamily:{en:w.familyName||" "},fontSubfamily:{en:w.styleName||" "},fullName:{en:w.fullName||w.familyName+" "+w.styleName},postScriptName:{en:w.postScriptName||(w.familyName+w.styleName).replace(/\s/g,"")},designer:{en:w.designer||" "},designerURL:{en:w.designerURL||" "},manufacturer:{en:w.manufacturer||" "},manufacturerURL:{en:w.manufacturerURL||" "},license:{en:w.license||" "},licenseURL:{en:w.licenseURL||" "},version:{en:w.version||"Version 0.1"},description:{en:w.description||" "},copyright:{en:w.copyright||" "},trademark:{en:w.trademark||" "}},this.unitsPerEm=w.unitsPerEm||1e3,this.ascender=w.ascender,this.descender=w.descender,this.createdTimestamp=w.createdTimestamp,this.tables={os2:{usWeightClass:w.weightClass||this.usWeightClasses.MEDIUM,usWidthClass:w.widthClass||this.usWidthClasses.MEDIUM,fsSelection:w.fsSelection||this.fsSelectionValues.REGULAR}}),this.supported=!0,this.glyphs=new _n.GlyphSet(this,w.glyphs||[]),this.encoding=new Je(this),this.position=new Ur(this),this.substitution=new Rn(this),this.tables=this.tables||{},Object.defineProperty(this,"hinting",{get:function(){return this._hinting||("truetype"===this.outlinesFormat?this._hinting=new yv(this):void 0)}})}Wr.prototype.hasChar=function(w){return null!==this.encoding.charToGlyphIndex(w)},Wr.prototype.charToGlyphIndex=function(w){return this.encoding.charToGlyphIndex(w)},Wr.prototype.charToGlyph=function(w){return w=this.charToGlyphIndex(w),this.glyphs.get(w)||this.glyphs.get(0)},Wr.prototype.stringToGlyphs=function(w,I){I=I||this.defaultRenderOptions;for(var j=yh(w),V=[],J=0;J<j.length;J+=1)V.push(this.charToGlyphIndex(j[J]));var ae=V.length;if(I.features){w=I.script||this.substitution.getDefaultScriptName();var me=[];I.features.liga&&(me=me.concat(this.substitution.getFeature("liga",w,I.language))),I.features.rlig&&(me=me.concat(this.substitution.getFeature("rlig",w,I.language)));for(var De=0;De<ae;De+=1)for(var _e=0;_e<me.length;_e++){for(var We=me[_e],it=We.sub,Ze=it.length,Ue=0;Ue<Ze&&it[Ue]===V[De+Ue];)Ue++;Ue===Ze&&(V.splice(De,Ze,We.by),ae=ae-Ze+1)}}for(var bt=new Array(ae),ct=this.glyphs.get(0),ht=0;ht<ae;ht+=1)bt[ht]=this.glyphs.get(V[ht])||ct;return bt},Wr.prototype.nameToGlyphIndex=function(w){return this.glyphNames.nameToGlyphIndex(w)},Wr.prototype.nameToGlyph=function(w){return w=this.nameToGlyphIndex(w),this.glyphs.get(w)||this.glyphs.get(0)},Wr.prototype.glyphIndexToName=function(w){return this.glyphNames.glyphIndexToName?this.glyphNames.glyphIndexToName(w):""},Wr.prototype.getKerningValue=function(w,I){w=w.index||w,I=I.index||I;var j=this.position.defaultKerningTables;return j?this.position.getKerningValue(j,w,I):this.kerningPairs[w+","+I]||0},Wr.prototype.defaultRenderOptions={kerning:!0,features:{liga:!0,rlig:!0}},Wr.prototype.forEachGlyph=function(w,I,j,V,J,se){I=void 0!==I?I:0,j=void 0!==j?j:0;var ae,me=1/this.unitsPerEm*(V=void 0!==V?V:72),De=this.stringToGlyphs(w,J=J||this.defaultRenderOptions);J.kerning&&(w=J.script||this.position.getDefaultScriptName(),ae=this.position.getKerningTables(w,J.language));for(var _e=0;_e<De.length;_e+=1){var We=De[_e];se.call(this,We,I,j,V,J),We.advanceWidth&&(I+=We.advanceWidth*me),J.kerning&&_e<De.length-1&&(I+=(ae?this.position.getKerningValue(ae,We.index,De[_e+1].index):this.getKerningValue(We,De[_e+1]))*me),J.letterSpacing?I+=J.letterSpacing*V:J.tracking&&(I+=J.tracking/1e3*V)}return I},Wr.prototype.getPath=function(w,I,j,V,J){var se=new pe;return this.forEachGlyph(w,I,j,V,J,function(ae,me,De,_e){ae=ae.getPath(me,De,_e,J,this),se.extend(ae)}),se},Wr.prototype.getPaths=function(w,I,j,V,J){var se=[];return this.forEachGlyph(w,I,j,V,J,function(ae,me,De,_e){ae=ae.getPath(me,De,_e,J,this),se.push(ae)}),se},Wr.prototype.getAdvanceWidth=function(w,I,j){return this.forEachGlyph(w,0,0,I,j,function(){})},Wr.prototype.draw=function(w,I,j,V,J,se){this.getPath(I,j,V,J,se).draw(w)},Wr.prototype.drawPoints=function(w,I,j,V,J,se){this.forEachGlyph(I,j,V,J,se,function(ae,me,De,_e){ae.drawPoints(w,me,De,_e)})},Wr.prototype.drawMetrics=function(w,I,j,V,J,se){this.forEachGlyph(I,j,V,J,se,function(ae,me,De,_e){ae.drawMetrics(w,me,De,_e)})},Wr.prototype.getEnglishName=function(w){if(w=this.names[w])return w.en},Wr.prototype.validate=function(){var w=this;function I(j){(j=w.getEnglishName(j))&&j.trim()}I("fontFamily"),I("weightName"),I("manufacturer"),I("copyright"),I("version")},Wr.prototype.toTables=function(){return Fr_fontToTable(this)},Wr.prototype.toBuffer=function(){return console.warn("Font.toBuffer is deprecated. Use Font.toArrayBuffer instead."),this.toArrayBuffer()},Wr.prototype.toArrayBuffer=function(){for(var w=this.toTables().encode(),I=new ArrayBuffer(w.length),j=new Uint8Array(I),V=0;V<w.length;V++)j[V]=w[V];return I},Wr.prototype.download=function(w){var I=this.getEnglishName("fontFamily"),j=this.getEnglishName("fontSubfamily"),V=(w=w||I.replace(/\s/g,"")+"-"+j+".otf",this.toArrayBuffer());typeof window<"u"?(window.requestFileSystem=window.requestFileSystem||window.webkitRequestFileSystem,window.requestFileSystem(window.TEMPORARY,V.byteLength,function(J){J.root.getFile(w,{create:!0},function(se){se.createWriter(function(ae){var me=new DataView(V);me=new Blob([me],{type:"font/opentype"}),ae.write(me),ae.addEventListener("writeend",function(){location.href=se.toURL()},!1)})})},function(J){throw new Error(J.name+": "+J.message)})):(I=l("fs"),j=function(J){for(var se=new M(J.byteLength),ae=new Uint8Array(J),me=0;me<se.length;++me)se[me]=ae[me];return se}(V),I.writeFileSync(w,j))},Wr.prototype.fsSelectionValues={ITALIC:1,UNDERSCORE:2,NEGATIVE:4,OUTLINED:8,STRIKEOUT:16,BOLD:32,REGULAR:64,USER_TYPO_METRICS:128,WWS:256,OBLIQUE:512},Wr.prototype.usWidthClasses={ULTRA_CONDENSED:1,EXTRA_CONDENSED:2,CONDENSED:3,SEMI_CONDENSED:4,MEDIUM:5,SEMI_EXPANDED:6,EXPANDED:7,EXTRA_EXPANDED:8,ULTRA_EXPANDED:9},Wr.prototype.usWeightClasses={THIN:100,EXTRA_LIGHT:200,LIGHT:300,NORMAL:400,MEDIUM:500,SEMI_BOLD:600,BOLD:700,EXTRA_BOLD:800,BLACK:900};var Cv_parse=function(w,I,j){for(var V,se,ae,me=new rt.Parser(w,I),De=me.parseULong(),_e=(P.argument(65536===De,"Unsupported fvar table version."),me.parseOffset16()),We=(me.skip("uShort",1),me.parseUShort()),it=me.parseUShort(),Ze=me.parseUShort(),Ue=me.parseUShort(),bt=[],ct=0;ct<We;ct++)bt.push((se=j,ae={},V=new rt.Parser(V=w,I+_e+ct*it),ae.tag=V.parseTag(),ae.minValue=V.parseFixed(),ae.defaultValue=V.parseFixed(),ae.maxValue=V.parseFixed(),V.skip("uShort",1),ae.name=se[V.parseUShort()]||{},ae));for(var ht=[],at=I+_e+We*it,nt=0;nt<Ze;nt++)ht.push(function(gn,un,Mn,Tn){var rr={},Yr=new rt.Parser(gn,un);rr.name=Tn[Yr.parseUShort()]||{},Yr.skip("uShort",1),rr.coordinates={};for(var Nr=0;Nr<Mn.length;++Nr)rr.coordinates[Mn[Nr].tag]=Yr.parseFixed();return rr}(w,at+nt*Ue,bt,j));return{axes:bt,instances:ht}},ks=new Array(10);ks[1]=function(){var w=this.offset+this.relativeOffset,I=this.parseUShort();return 1===I?{posFormat:1,coverage:this.parsePointer(Ye.coverage),value:this.parseValueRecord()}:2===I?{posFormat:2,coverage:this.parsePointer(Ye.coverage),values:this.parseValueRecordList()}:void P.assert(!1,"0x"+w.toString(16)+": GPOS lookup type 1 format must be 1 or 2.")},ks[2]=function(){var w,I,j,V,se=this.offset+this.relativeOffset,J=this.parseUShort(),ae=(P.assert(1===J||2===J,"0x"+se.toString(16)+": GPOS lookup type 2 format must be 1 or 2."),se=this.parsePointer(Ye.coverage),this.parseUShort()),me=this.parseUShort();return 1===J?{posFormat:J,coverage:se,valueFormat1:ae,valueFormat2:me,pairSets:this.parseList(Ye.pointer(Ye.list(function(){return{secondGlyph:this.parseUShort(),value1:this.parseValueRecord(ae),value2:this.parseValueRecord(me)}})))}:2===J?(w=this.parsePointer(Ye.classDef),I=this.parsePointer(Ye.classDef),j=this.parseUShort(),V=this.parseUShort(),{posFormat:J,coverage:se,valueFormat1:ae,valueFormat2:me,classDef1:w,classDef2:I,class1Count:j,class2Count:V,classRecords:this.parseList(j,Ye.list(V,function(){return{value1:this.parseValueRecord(ae),value2:this.parseValueRecord(me)}}))}):void 0},ks[3]=function(){return{error:"GPOS Lookup 3 not supported"}},ks[4]=function(){return{error:"GPOS Lookup 4 not supported"}},ks[5]=function(){return{error:"GPOS Lookup 5 not supported"}},ks[6]=function(){return{error:"GPOS Lookup 6 not supported"}},ks[7]=function(){return{error:"GPOS Lookup 7 not supported"}},ks[8]=function(){return{error:"GPOS Lookup 8 not supported"}},ks[9]=function(){return{error:"GPOS Lookup 9 not supported"}};new Array(10);var yw_parse=function(w,I){return I=(w=new Ye(w,I=I||0)).parseVersion(1),P.argument(1===I||1.1===I,"Unsupported GPOS table version "+I),1===I?{version:I,scripts:w.parseScriptList(),features:w.parseFeatureList(),lookups:w.parseLookupList(ks)}:{version:I,scripts:w.parseScriptList(),features:w.parseFeatureList(),lookups:w.parseLookupList(ks),variations:w.parseFeatureVariationsList()}},vw_parse=function(w,I){if(0===(I=(w=new rt.Parser(w,I)).parseUShort())){var j=w,V={},it=(j.skip("uShort"),j.parseUShort()),J=(P.argument(0===it,"Unsupported kern sub-table version."),j.skip("uShort",2),j.parseUShort());j.skip("uShort",3);for(var se=0;se<J;se+=1){var ae=j.parseUShort(),me=j.parseUShort(),De=j.parseShort();V[ae+","+me]=De}return V}if(1!==I)throw new Error("Unsupported kern table version ("+I+").");var _e=w,We={};if(_e.skip("uShort"),1<_e.parseULong()&&console.warn("Only the first kern subtable is supported."),_e.skip("uLong"),it=255&_e.parseUShort(),_e.skip("uShort"),0==it){var Ze=_e.parseUShort();_e.skip("uShort",3);for(var Ue=0;Ue<Ze;Ue+=1){var bt=_e.parseUShort(),ct=_e.parseUShort(),ht=_e.parseShort();We[bt+","+ct]=ht}}return We},bw_parse=function(w,I,j,V){for(var J=new rt.Parser(w,I),se=V?J.parseUShort:J.parseULong,ae=[],me=0;me<j+1;me+=1){var De=se.call(J);V&&(De*=2),ae.push(De)}return ae};function _w(w,I){l("fs").readFile(w,function(j,V){if(j)return I(j.message);I(null,su(V))})}function ic(w,I){var j=new XMLHttpRequest;j.open("get",w,!0),j.responseType="arraybuffer",j.onload=function(){return j.response?I(null,j.response):I("Font could not be loaded: "+j.statusText)},j.onerror=function(){I("Font could not be loaded")},j.send()}function fu(w,I){for(var j=[],V=12,J=0;J<I;J+=1){var se=rt.getTag(w,V),ae=rt.getULong(w,V+4),me=rt.getULong(w,V+8),De=rt.getULong(w,V+12);j.push({tag:se,checksum:ae,offset:me,length:De,compression:!1}),V+=16}return j}function gi(j,I){if("WOFF"!==I.compression)return{data:j,offset:I.offset};j=new Uint8Array(j.buffer,I.offset+2,I.compressedLength-2);var V=new Uint8Array(I.length);if(ie(j,V),V.byteLength!==I.length)throw new Error("Decompression error: "+I.tag+" decompressed length doesn't match recorded length");return{data:new DataView(V.buffer,0),offset:0}}function vh(nt){var I,j,V,J,se,ae,me,De,_e,We,it,Ze,Ue,bt,ct=new Wr({empty:!0}),ht=new DataView(nt,0),at=[];if((nt=rt.getTag(ht,0))===String.fromCharCode(0,1,0,0)||"true"===nt||"typ1"===nt)ct.outlinesFormat="truetype",at=fu(ht,V=rt.getUShort(ht,4));else if("OTTO"===nt)ct.outlinesFormat="cff",at=fu(ht,V=rt.getUShort(ht,4));else{if("wOFF"!==nt)throw new Error("Unsupported OpenType signature "+nt);if((gn=rt.getTag(ht,4))===String.fromCharCode(0,1,0,0))ct.outlinesFormat="truetype";else{if("OTTO"!==gn)throw new Error("Unsupported OpenType flavor "+nt);ct.outlinesFormat="cff"}at=function(Qr,Tr){for(var rs=[],ai=44,is=0;is<Tr;is+=1){var ei=rt.getTag(Qr,ai),qi=rt.getULong(Qr,ai+4),sc=rt.getULong(Qr,ai+8),cs=rt.getULong(Qr,ai+12);rs.push({tag:ei,offset:qi,compression:sc<cs&&"WOFF",compressedLength:sc,length:cs}),ai+=20}return rs}(ht,V=rt.getUShort(ht,12))}for(var un=0;un<V;un+=1){var Mn=at[un],Tn=void 0;switch(Mn.tag){case"cmap":Tn=gi(ht,Mn),ct.tables.cmap=ge_parse(Tn.data,Tn.offset),ct.encoding=new ut(ct.tables.cmap);break;case"cvt ":Tn=gi(ht,Mn),bt=new rt.Parser(Tn.data,Tn.offset),ct.tables.cvt=bt.parseShortList(Mn.length/2);break;case"fvar":se=Mn;break;case"fpgm":Tn=gi(ht,Mn),bt=new rt.Parser(Tn.data,Tn.offset),ct.tables.fpgm=bt.parseByteList(Mn.length);break;case"head":Tn=gi(ht,Mn),ct.tables.head=Ls_parse(Tn.data,Tn.offset),ct.unitsPerEm=ct.tables.head.unitsPerEm,I=ct.tables.head.indexToLocFormat;break;case"hhea":Tn=gi(ht,Mn),ct.tables.hhea=Be_parse(Tn.data,Tn.offset),ct.ascender=ct.tables.hhea.ascender,ct.descender=ct.tables.hhea.descender,ct.numberOfHMetrics=ct.tables.hhea.numberOfHMetrics;break;case"hmtx":_e=Mn;break;case"ltag":Tn=gi(ht,Mn),j=tn_parse(Tn.data,Tn.offset);break;case"maxp":Tn=gi(ht,Mn),ct.tables.maxp=St_parse(Tn.data,Tn.offset),ct.numGlyphs=ct.tables.maxp.numGlyphs;break;case"name":Ze=Mn;break;case"OS/2":Tn=gi(ht,Mn),ct.tables.os2=Fi_parse(Tn.data,Tn.offset);break;case"post":Tn=gi(ht,Mn),ct.tables.post=vp_parse(Tn.data,Tn.offset),ct.glyphNames=new zt(ct.tables.post);break;case"prep":Tn=gi(ht,Mn),bt=new rt.Parser(Tn.data,Tn.offset),ct.tables.prep=bt.parseByteList(Mn.length);break;case"glyf":ae=Mn;break;case"loca":it=Mn;break;case"CFF ":J=Mn;break;case"kern":We=Mn;break;case"GPOS":me=Mn;break;case"GSUB":De=Mn;break;case"meta":Ue=Mn}}if(gn=gi(ht,Ze),ct.tables.name=js_parse(gn.data,gn.offset,j),ct.names=ct.tables.name,ae&&it)nt=0===I,gn=gi(ht,it),gn=bw_parse(gn.data,gn.offset,ct.numGlyphs,nt),nt=gi(ht,ae),ct.glyphs=xp.parse(nt.data,nt.offset,gn,ct);else{if(!J)throw new Error("Font doesn't contain TrueType or CFF outlines.");nt=gi(ht,J),Jl_parse(nt.data,nt.offset,ct)}for(var gn=gi(ht,_e),rr=(xt_parse(gn.data,gn.offset,ct.numberOfHMetrics,ct.numGlyphs,ct.glyphs),ct),Yr=rr.tables.cmap.glyphIndexMap,Nr=Object.keys(Yr),oi=0;oi<Nr.length;oi+=1){var ts,ns=Nr[oi];(ts=rr.glyphs.get(Yr[ns])).addUnicode(parseInt(ns))}for(var qr=0;qr<rr.glyphs.length;qr+=1)ts=rr.glyphs.get(qr),rr.cffEncoding?ts.name=rr.isCIDFont?"gid"+qr:rr.cffEncoding.charset[qr]:rr.glyphNames.names&&(ts.name=rr.glyphNames.glyphIndexToName(qr));return We?(nt=gi(ht,We),ct.kerningPairs=vw_parse(nt.data,nt.offset)):ct.kerningPairs={},me&&(gn=gi(ht,me),ct.tables.gpos=yw_parse(gn.data,gn.offset),ct.position.init()),De&&(nt=gi(ht,De),ct.tables.gsub=Es_parse(nt.data,nt.offset)),se&&(gn=gi(ht,se),ct.tables.fvar=Cv_parse(gn.data,gn.offset,ct.names)),Ue&&(nt=gi(ht,Ue),ct.tables.meta=Un_parse(nt.data,nt.offset),ct.metas=ct.tables.meta),ct}S.Font=Wr,S.Glyph=cn,S.Path=pe,S.BoundingBox=le,S._parse=rt,S.parse=vh,S.load=function(w,I){(typeof window>"u"?_w:ic)(w,function(j,V){if(j)return I(j);var J;try{J=vh(V)}catch(se){return I(se,null)}return I(null,J)})},S.loadSync=function(w){return vh(su(l("fs").readFileSync(w)))},Object.defineProperty(S,"__esModule",{value:!0})},v("object"==typeof H&&void 0!==de?H:this.opentype={})}).call(this,l("buffer").Buffer)},{buffer:4,fs:2}],258:[function(l,de,H){(function(M){function E(T,C){for(var f=0,g=T.length-1;0<=g;g--){var d=T[g];"."===d?T.splice(g,1):".."===d?(T.splice(g,1),f++):f&&(T.splice(g,1),f--)}if(C)for(;f--;)T.unshift("..");return T}function v(T,C){if(T.filter)return T.filter(C);for(var f=[],g=0;g<T.length;g++)C(T[g],g,T)&&f.push(T[g]);return f}H.resolve=function(){for(var T="",C=!1,f=arguments.length-1;-1<=f&&!C;f--){var g=0<=f?arguments[f]:M.cwd();if("string"!=typeof g)throw new TypeError("Arguments to path.resolve must be strings");g&&(T=g+"/"+T,C="/"===g.charAt(0))}return(C?"/":"")+(T=E(v(T.split("/"),function(d){return!!d}),!C).join("/"))||"."},H.normalize=function(T){var C=H.isAbsolute(T),f="/"===S(T,-1);return(T=(T=E(v(T.split("/"),function(g){return!!g}),!C).join("/"))||C?T:".")&&f&&(T+="/"),(C?"/":"")+T},H.isAbsolute=function(T){return"/"===T.charAt(0)},H.join=function(){var T=Array.prototype.slice.call(arguments,0);return H.normalize(v(T,function(C,f){if("string"!=typeof C)throw new TypeError("Arguments to path.join must be strings");return C}).join("/"))},H.relative=function(T,C){function f(b){for(var x=0;x<b.length&&""===b[x];x++);for(var D=b.length-1;0<=D&&""===b[D];D--);return D<x?[]:b.slice(x,D-x+1)}T=H.resolve(T).substr(1),C=H.resolve(C).substr(1);for(var g=f(T.split("/")),d=f(C.split("/")),m=Math.min(g.length,d.length),p=m,h=0;h<m;h++)if(g[h]!==d[h]){p=h;break}var y=[];for(h=p;h<g.length;h++)y.push("..");return(y=y.concat(d.slice(p))).join("/")},H.sep="/",H.delimiter=":",H.dirname=function(T){if("string"!=typeof T&&(T+=""),0===T.length)return".";for(var C=47===T.charCodeAt(0),f=-1,g=!0,d=T.length-1;1<=d;--d)if(47===T.charCodeAt(d)){if(!g){f=d;break}}else g=!1;return-1===f?C?"/":".":C&&1===f?"/":T.slice(0,f)},H.basename=function(T,C){return T=function(f){"string"!=typeof f&&(f+="");for(var g=0,d=-1,m=!0,p=f.length-1;0<=p;--p)if(47===f.charCodeAt(p)){if(!m){g=p+1;break}}else-1===d&&(m=!1,d=p+1);return-1===d?"":f.slice(g,d)}(T),C&&T.substr(-1*C.length)===C?T.substr(0,T.length-C.length):T},H.extname=function(T){"string"!=typeof T&&(T+="");for(var C=-1,f=0,g=-1,d=!0,m=0,p=T.length-1;0<=p;--p){var h=T.charCodeAt(p);if(47===h){if(d)continue;f=p+1;break}-1===g&&(d=!1,g=p+1),46===h?-1===C?C=p:1!==m&&(m=1):-1!==C&&(m=-1)}return-1===C||-1===g||0===m||1===m&&C===g-1&&C===f+1?"":T.slice(C,g)};var S=function(T,C,f){return T.substr(C,f)}}).call(this,l("_process"))},{_process:259}],259:[function(l,v,H){var M,E;function S(){throw new Error("setTimeout has not been defined")}function T(){throw new Error("clearTimeout has not been defined")}v=v.exports={};try{M="function"==typeof setTimeout?setTimeout:S}catch{M=S}try{E="function"==typeof clearTimeout?clearTimeout:T}catch{E=T}function C(x){if(M===setTimeout)return setTimeout(x,0);if((M===S||!M)&&setTimeout)return(M=setTimeout)(x,0);try{return M(x,0)}catch{try{return M.call(null,x,0)}catch{return M.call(this,x,0)}}}var f,g=[],d=!1,m=-1;function p(){d&&f&&(d=!1,f.length?g=f.concat(g):m=-1,g.length&&h())}function h(){if(!d){for(var x=C(p),D=(d=!0,g.length);D;){for(f=g,g=[];++m<D;)f&&f[m].run();m=-1,D=g.length}f=null,d=!1,function(N){if(E===clearTimeout)return clearTimeout(N);if((E===T||!E)&&clearTimeout)return(E=clearTimeout)(N);try{E(N)}catch{try{return E.call(null,N)}catch{return E.call(this,N)}}}(x)}}function y(x,D){this.fun=x,this.array=D}function b(){}v.nextTick=function(x){var D=new Array(arguments.length-1);if(1<arguments.length)for(var N=1;N<arguments.length;N++)D[N-1]=arguments[N];g.push(new y(x,D)),1!==g.length||d||C(h)},y.prototype.run=function(){this.fun.apply(null,this.array)},v.title="browser",v.browser=!0,v.env={},v.argv=[],v.version="",v.versions={},v.on=b,v.addListener=b,v.once=b,v.off=b,v.removeListener=b,v.removeAllListeners=b,v.emit=b,v.prependListener=b,v.prependOnceListener=b,v.listeners=function(x){return[]},v.binding=function(x){throw new Error("process.binding is not supported")},v.cwd=function(){return"/"},v.chdir=function(x){throw new Error("process.chdir is not supported")},v.umask=function(){return 0}},{}],260:[function(l,de,H){de=function(M){"use strict";var E,v=Object.prototype,S=v.hasOwnProperty,T=(U="function"==typeof Symbol?Symbol:{}).iterator||"@@iterator",C=U.asyncIterator||"@@asyncIterator",f=U.toStringTag||"@@toStringTag";function g(oe,K,re,te){var pe,Ae,$,P;return K=K&&K.prototype instanceof x?K:x,K=Object.create(K.prototype),te=new Z(te||[]),K._invoke=(pe=oe,Ae=re,$=te,P=m,function(fe,ve){if(P===h)throw new Error("Generator is already running");if(P===y){if("throw"===fe)throw ve;return W()}for($.method=fe,$.arg=ve;;){var Te=$.delegate;if(Te&&(Te=function Ie(we,Pe){var je=we.iterator[Pe.method];if(je===E){if(Pe.delegate=null,"throw"===Pe.method){if(we.iterator.return&&(Pe.method="return",Pe.arg=E,Ie(we,Pe),"throw"===Pe.method))return b;Pe.method="throw",Pe.arg=new TypeError("The iterator does not provide a 'throw' method")}return b}return"throw"===(je=d(je,we.iterator,Pe.arg)).type?(Pe.method="throw",Pe.arg=je.arg,Pe.delegate=null,b):(je=je.arg)?je.done?(Pe[we.resultName]=je.value,Pe.next=we.nextLoc,"return"!==Pe.method&&(Pe.method="next",Pe.arg=E),Pe.delegate=null,b):je:(Pe.method="throw",Pe.arg=new TypeError("iterator result is not an object"),Pe.delegate=null,b)}(Te,$))){if(Te===b)continue;return Te}if("next"===$.method)$.sent=$._sent=$.arg;else if("throw"===$.method){if(P===m)throw P=y,$.arg;$.dispatchException($.arg)}else"return"===$.method&&$.abrupt("return",$.arg);if(P=h,"normal"===(Te=d(pe,Ae,$)).type){if(P=$.done?y:p,Te.arg!==b)return{value:Te.arg,done:$.done}}else"throw"===Te.type&&(P=y,$.method="throw",$.arg=Te.arg)}}),K}function d(oe,ie,re){try{return{type:"normal",arg:oe.call(ie,re)}}catch(le){return{type:"throw",arg:le}}}M.wrap=g;var m="suspendedStart",p="suspendedYield",h="executing",y="completed",b={};function x(){}function D(){}function N(){}var U,R,L=((U={})[T]=function(){return this},(R=(R=Object.getPrototypeOf)&&R(R(X([]))))&&R!==v&&S.call(R,T)&&(U=R),N.prototype=x.prototype=Object.create(U));function z(oe){["next","throw","return"].forEach(function(ie){oe[ie]=function(re){return this._invoke(ie,re)}})}function F(oe){var ie;this._invoke=function(re,le){function pe(){return new Promise(function(Ae,$){!function P(Ie,te,fe,ve){var Te;if("throw"!==(Ie=d(oe[Ie],oe,te)).type)return(te=(Te=Ie.arg).value)&&"object"==typeof te&&S.call(te,"__await")?Promise.resolve(te.__await).then(function(we){P("next",we,fe,ve)},function(we){P("throw",we,fe,ve)}):Promise.resolve(te).then(function(we){Te.value=we,fe(Te)},function(we){return P("throw",we,fe,ve)});ve(Ie.arg)}(re,le,Ae,$)})}return ie=ie?ie.then(pe,pe):pe()}}function q(oe){var ie={tryLoc:oe[0]};1 in oe&&(ie.catchLoc=oe[1]),2 in oe&&(ie.finallyLoc=oe[2],ie.afterLoc=oe[3]),this.tryEntries.push(ie)}function k(oe){var ie=oe.completion||{};ie.type="normal",delete ie.arg,oe.completion=ie}function Z(oe){this.tryEntries=[{tryLoc:"root"}],oe.forEach(q,this),this.reset(!0)}function X(oe){if(oe){var ie,re=oe[T];if(re)return re.call(oe);if("function"==typeof oe.next)return oe;if(!isNaN(oe.length))return ie=-1,(re=function le(){for(;++ie<oe.length;)if(S.call(oe,ie))return le.value=oe[ie],le.done=!1,le;return le.value=E,le.done=!0,le}).next=re}return{next:W}}function W(){return{value:E,done:!0}}return(D.prototype=L.constructor=N).constructor=D,N[f]=D.displayName="GeneratorFunction",M.isGeneratorFunction=function(oe){return!!(oe="function"==typeof oe&&oe.constructor)&&(oe===D||"GeneratorFunction"===(oe.displayName||oe.name))},M.mark=function(oe){return Object.setPrototypeOf?Object.setPrototypeOf(oe,N):(oe.__proto__=N,f in oe||(oe[f]="GeneratorFunction")),oe.prototype=Object.create(L),oe},M.awrap=function(oe){return{__await:oe}},z(F.prototype),F.prototype[C]=function(){return this},M.AsyncIterator=F,M.async=function(oe,ie,re,le){var pe=new F(g(oe,ie,re,le));return M.isGeneratorFunction(ie)?pe:pe.next().then(function(Ae){return Ae.done?Ae.value:pe.next()})},z(L),L[f]="Generator",L[T]=function(){return this},L.toString=function(){return"[object Generator]"},M.keys=function(oe){var ie,re=[];for(ie in oe)re.push(ie);return re.reverse(),function le(){for(;re.length;){var pe=re.pop();if(pe in oe)return le.value=pe,le.done=!1,le}return le.done=!0,le}},M.values=X,Z.prototype={constructor:Z,reset:function(oe){if(this.prev=0,this.next=0,this.sent=this._sent=E,this.done=!1,this.delegate=null,this.method="next",this.arg=E,this.tryEntries.forEach(k),!oe)for(var ie in this)"t"===ie.charAt(0)&&S.call(this,ie)&&!isNaN(+ie.slice(1))&&(this[ie]=E)},stop:function(){this.done=!0;var oe=this.tryEntries[0].completion;if("throw"===oe.type)throw oe.arg;return this.rval},dispatchException:function(oe){if(this.done)throw oe;var ie=this;function re(K,te){return Ae.type="throw",Ae.arg=oe,ie.next=K,te&&(ie.method="next",ie.arg=E),!!te}for(var le=this.tryEntries.length-1;0<=le;--le){var pe=this.tryEntries[le],Ae=pe.completion;if("root"===pe.tryLoc)return re("end");if(pe.tryLoc<=this.prev){var $=S.call(pe,"catchLoc"),P=S.call(pe,"finallyLoc");if($&&P){if(this.prev<pe.catchLoc)return re(pe.catchLoc,!0);if(this.prev<pe.finallyLoc)return re(pe.finallyLoc)}else if($){if(this.prev<pe.catchLoc)return re(pe.catchLoc,!0)}else{if(!P)throw new Error("try statement without catch or finally");if(this.prev<pe.finallyLoc)return re(pe.finallyLoc)}}}},abrupt:function(oe,ie){for(var re=this.tryEntries.length-1;0<=re;--re){var le=this.tryEntries[re];if(le.tryLoc<=this.prev&&S.call(le,"finallyLoc")&&this.prev<le.finallyLoc){var pe=le;break}}var Ae=(pe=pe&&("break"===oe||"continue"===oe)&&pe.tryLoc<=ie&&ie<=pe.finallyLoc?null:pe)?pe.completion:{};return Ae.type=oe,Ae.arg=ie,pe?(this.method="next",this.next=pe.finallyLoc,b):this.complete(Ae)},complete:function(oe,ie){if("throw"===oe.type)throw oe.arg;return"break"===oe.type||"continue"===oe.type?this.next=oe.arg:"return"===oe.type?(this.rval=this.arg=oe.arg,this.method="return",this.next="end"):"normal"===oe.type&&ie&&(this.next=ie),b},finish:function(oe){for(var ie=this.tryEntries.length-1;0<=ie;--ie){var re=this.tryEntries[ie];if(re.finallyLoc===oe)return this.complete(re.completion,re.afterLoc),k(re),b}},catch:function(oe){for(var ie=this.tryEntries.length-1;0<=ie;--ie){var re,le,pe=this.tryEntries[ie];if(pe.tryLoc===oe)return"throw"===(re=pe.completion).type&&(le=re.arg,k(pe)),le}throw new Error("illegal catch attempt")},delegateYield:function(oe,ie,re){return this.delegate={iterator:X(oe),resultName:ie,nextLoc:re},"next"===this.method&&(this.arg=E),b}},M}("object"==typeof de?de.exports:{});try{regeneratorRuntime=de}catch{Function("r","regeneratorRuntime = r")(de)}},{}],261:[function(l,de,H){!function(M){"use strict";var E,v,S,T,C,f,g,d,m,p;function h(k){if("string"!=typeof k&&(k=String(k)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(k))throw new TypeError("Invalid character in header field name");return k.toLowerCase()}function y(k){return"string"!=typeof k?String(k):k}function b(k){var Z={next:function(){var X=k.shift();return{done:void 0===X,value:X}}};return v&&(Z[Symbol.iterator]=function(){return Z}),Z}function x(k){this.map={},k instanceof x?k.forEach(function(Z,X){this.append(X,Z)},this):Array.isArray(k)?k.forEach(function(Z){this.append(Z[0],Z[1])},this):k&&Object.getOwnPropertyNames(k).forEach(function(Z){this.append(Z,k[Z])},this)}function D(k){if(k.bodyUsed)return Promise.reject(new TypeError("Already read"));k.bodyUsed=!0}function N(k){return new Promise(function(Z,X){k.onload=function(){Z(k.result)},k.onerror=function(){X(k.error)}})}function U(k){var Z=new FileReader,X=N(Z);return Z.readAsArrayBuffer(k),X}function R(k){var Z;return k.slice?k.slice(0):((Z=new Uint8Array(k.byteLength)).set(new Uint8Array(k)),Z.buffer)}function L(){return this.bodyUsed=!1,this._initBody=function(k){if(this._bodyInit=k)if("string"==typeof k)this._bodyText=k;else if(S&&Blob.prototype.isPrototypeOf(k))this._bodyBlob=k;else if(T&&FormData.prototype.isPrototypeOf(k))this._bodyFormData=k;else if(E&&URLSearchParams.prototype.isPrototypeOf(k))this._bodyText=k.toString();else if(C&&S&&g(k))this._bodyArrayBuffer=R(k.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer]);else{if(!C||!ArrayBuffer.prototype.isPrototypeOf(k)&&!d(k))throw new Error("unsupported BodyInit type");this._bodyArrayBuffer=R(k)}else this._bodyText="";this.headers.get("content-type")||("string"==typeof k?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):E&&URLSearchParams.prototype.isPrototypeOf(k)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},S&&(this.blob=function(){var k=D(this);if(k)return k;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?D(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(U)}),this.text=function(){var k,Z,X=D(this);if(X)return X;if(this._bodyBlob)return X=this._bodyBlob,Z=N(k=new FileReader),k.readAsText(X),Z;if(this._bodyArrayBuffer)return Promise.resolve(function(W){for(var oe=new Uint8Array(W),ie=new Array(oe.length),re=0;re<oe.length;re++)ie[re]=String.fromCharCode(oe[re]);return ie.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},T&&(this.formData=function(){return this.text().then(F)}),this.json=function(){return this.text().then(JSON.parse)},this}function z(k,Z){var X,W=(Z=Z||{}).body;if(k instanceof z){if(k.bodyUsed)throw new TypeError("Already read");this.url=k.url,this.credentials=k.credentials,Z.headers||(this.headers=new x(k.headers)),this.method=k.method,this.mode=k.mode,W||null==k._bodyInit||(W=k._bodyInit,k.bodyUsed=!0)}else this.url=String(k);if(this.credentials=Z.credentials||this.credentials||"omit",!Z.headers&&this.headers||(this.headers=new x(Z.headers)),this.method=(X=(k=Z.method||this.method||"GET").toUpperCase(),-1<m.indexOf(X)?X:k),this.mode=Z.mode||this.mode||null,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&W)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(W)}function F(k){var Z=new FormData;return k.trim().split("&").forEach(function(X){var W;X&&(W=(X=X.split("=")).shift().replace(/\+/g," "),X=X.join("=").replace(/\+/g," "),Z.append(decodeURIComponent(W),decodeURIComponent(X)))}),Z}function q(k,Z){Z=Z||{},this.type="default",this.status=void 0===Z.status?200:Z.status,this.ok=200<=this.status&&this.status<300,this.statusText="statusText"in Z?Z.statusText:"OK",this.headers=new x(Z.headers),this.url=Z.url||"",this._initBody(k)}M.fetch||(E="URLSearchParams"in M,v="Symbol"in M&&"iterator"in Symbol,S="FileReader"in M&&"Blob"in M&&function(){try{return new Blob,!0}catch{return!1}}(),T="FormData"in M,(C="ArrayBuffer"in M)&&(f=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],g=function(k){return k&&DataView.prototype.isPrototypeOf(k)},d=ArrayBuffer.isView||function(k){return k&&-1<f.indexOf(Object.prototype.toString.call(k))}),x.prototype.append=function(k,Z){k=h(k),Z=y(Z);var X=this.map[k];this.map[k]=X?X+","+Z:Z},x.prototype.delete=function(k){delete this.map[h(k)]},x.prototype.get=function(k){return k=h(k),this.has(k)?this.map[k]:null},x.prototype.has=function(k){return this.map.hasOwnProperty(h(k))},x.prototype.set=function(k,Z){this.map[h(k)]=y(Z)},x.prototype.forEach=function(k,Z){for(var X in this.map)this.map.hasOwnProperty(X)&&k.call(Z,this.map[X],X,this)},x.prototype.keys=function(){var k=[];return this.forEach(function(Z,X){k.push(X)}),b(k)},x.prototype.values=function(){var k=[];return this.forEach(function(Z){k.push(Z)}),b(k)},x.prototype.entries=function(){var k=[];return this.forEach(function(Z,X){k.push([X,Z])}),b(k)},v&&(x.prototype[Symbol.iterator]=x.prototype.entries),m=["DELETE","GET","HEAD","OPTIONS","POST","PUT"],z.prototype.clone=function(){return new z(this,{body:this._bodyInit})},L.call(z.prototype),L.call(q.prototype),q.prototype.clone=function(){return new q(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new x(this.headers),url:this.url})},q.error=function(){var k=new q(null,{status:0,statusText:""});return k.type="error",k},p=[301,302,303,307,308],q.redirect=function(k,Z){if(-1===p.indexOf(Z))throw new RangeError("Invalid status code");return new q(null,{status:Z,headers:{location:k}})},M.Headers=x,M.Request=z,M.Response=q,M.fetch=function(k,Z){return new Promise(function(X,W){var oe=new z(k,Z),ie=new XMLHttpRequest;ie.onload=function(){var re,le={status:ie.status,statusText:ie.statusText,headers:(le=ie.getAllResponseHeaders()||"",re=new x,le.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach(function($){var P=($=$.split(":")).shift().trim();P&&($=$.join(":").trim(),re.append(P,$))}),re)},pe=(le.url="responseURL"in ie?ie.responseURL:le.headers.get("X-Request-URL"),"response"in ie?ie.response:ie.responseText);X(new q(pe,le))},ie.onerror=function(){W(new TypeError("Network request failed"))},ie.ontimeout=function(){W(new TypeError("Network request failed"))},ie.open(oe.method,oe.url,!0),"include"===oe.credentials?ie.withCredentials=!0:"omit"===oe.credentials&&(ie.withCredentials=!1),"responseType"in ie&&S&&(ie.responseType="blob"),oe.headers.forEach(function(re,le){ie.setRequestHeader(le,re)}),ie.send(void 0===oe._bodyInit?null:oe._bodyInit)})},M.fetch.polyfill=!0)}(typeof self<"u"?self:this)},{}],262:[function(l,de,H){"use strict";l("core-js/modules/es.function.name"),l("core-js/modules/es.object.to-string"),l("core-js/modules/es.regexp.exec"),l("core-js/modules/es.regexp.to-string"),l("core-js/modules/es.string.split"),l("core-js/modules/es.function.name"),l("core-js/modules/es.object.to-string"),l("core-js/modules/es.regexp.exec"),l("core-js/modules/es.regexp.to-string"),l("core-js/modules/es.string.split"),Object.defineProperty(H,"__esModule",{value:!0}),H.default=void 0;var M,E=S(l("../core/main")),v=S(l("../color/color_conversion"));function S(f){return f&&f.__esModule?f:{default:f}}var T=[{h:0,s:0,b:.8275,name:"gray"},{h:0,s:0,b:.8627,name:"gray"},{h:0,s:0,b:.7529,name:"gray"},{h:.0167,s:.1176,b:1,name:"light pink"}],C=[{h:0,s:0,b:0,name:"black"},{h:0,s:0,b:.5,name:"gray"},{h:0,s:0,b:1,name:"white"},{h:0,s:.5,b:.5,name:"dark maroon"},{h:0,s:.5,b:1,name:"salmon pink"},{h:0,s:1,b:0,name:"black"},{h:0,s:1,b:.5,name:"dark red"},{h:0,s:1,b:1,name:"red"},{h:5,s:0,b:1,name:"very light peach"},{h:5,s:.5,b:.5,name:"brown"},{h:5,s:.5,b:1,name:"peach"},{h:5,s:1,b:.5,name:"brick red"},{h:5,s:1,b:1,name:"crimson"},{h:10,s:0,b:1,name:"light peach"},{h:10,s:.5,b:.5,name:"brown"},{h:10,s:.5,b:1,name:"light orange"},{h:10,s:1,b:.5,name:"brown"},{h:10,s:1,b:1,name:"orange"},{h:15,s:0,b:1,name:"very light yellow"},{h:15,s:.5,b:.5,name:"olive green"},{h:15,s:.5,b:1,name:"light yellow"},{h:15,s:1,b:0,name:"dark olive green"},{h:15,s:1,b:.5,name:"olive green"},{h:15,s:1,b:1,name:"yellow"},{h:20,s:0,b:1,name:"very light yellow"},{h:20,s:.5,b:.5,name:"olive green"},{h:20,s:.5,b:1,name:"light yellow green"},{h:20,s:1,b:0,name:"dark olive green"},{h:20,s:1,b:.5,name:"dark yellow green"},{h:20,s:1,b:1,name:"yellow green"},{h:25,s:.5,b:.5,name:"dark yellow green"},{h:25,s:.5,b:1,name:"light green"},{h:25,s:1,b:.5,name:"dark green"},{h:25,s:1,b:1,name:"green"},{h:30,s:.5,b:1,name:"light green"},{h:30,s:1,b:.5,name:"dark green"},{h:30,s:1,b:1,name:"green"},{h:35,s:0,b:.5,name:"light green"},{h:35,s:0,b:1,name:"very light green"},{h:35,s:.5,b:.5,name:"dark green"},{h:35,s:.5,b:1,name:"light green"},{h:35,s:1,b:0,name:"very dark green"},{h:35,s:1,b:.5,name:"dark green"},{h:35,s:1,b:1,name:"green"},{h:40,s:0,b:1,name:"very light green"},{h:40,s:.5,b:.5,name:"dark green"},{h:40,s:.5,b:1,name:"light green"},{h:40,s:1,b:.5,name:"dark green"},{h:40,s:1,b:1,name:"green"},{h:45,s:.5,b:1,name:"light turquoise"},{h:45,s:1,b:.5,name:"dark turquoise"},{h:45,s:1,b:1,name:"turquoise"},{h:50,s:0,b:1,name:"light sky blue"},{h:50,s:.5,b:.5,name:"dark cyan"},{h:50,s:.5,b:1,name:"light cyan"},{h:50,s:1,b:.5,name:"dark cyan"},{h:50,s:1,b:1,name:"cyan"},{h:55,s:0,b:1,name:"light sky blue"},{h:55,s:.5,b:1,name:"light sky blue"},{h:55,s:1,b:.5,name:"dark blue"},{h:55,s:1,b:1,name:"sky blue"},{h:60,s:0,b:.5,name:"gray"},{h:60,s:0,b:1,name:"very light blue"},{h:60,s:.5,b:.5,name:"blue"},{h:60,s:.5,b:1,name:"light blue"},{h:60,s:1,b:.5,name:"navy blue"},{h:60,s:1,b:1,name:"blue"},{h:65,s:0,b:1,name:"lavender"},{h:65,s:.5,b:.5,name:"navy blue"},{h:65,s:.5,b:1,name:"light purple"},{h:65,s:1,b:.5,name:"dark navy blue"},{h:65,s:1,b:1,name:"blue"},{h:70,s:0,b:1,name:"lavender"},{h:70,s:.5,b:.5,name:"navy blue"},{h:70,s:.5,b:1,name:"lavender blue"},{h:70,s:1,b:.5,name:"dark navy blue"},{h:70,s:1,b:1,name:"blue"},{h:75,s:.5,b:1,name:"lavender"},{h:75,s:1,b:.5,name:"dark purple"},{h:75,s:1,b:1,name:"purple"},{h:80,s:.5,b:1,name:"pinkish purple"},{h:80,s:1,b:.5,name:"dark purple"},{h:80,s:1,b:1,name:"purple"},{h:85,s:0,b:1,name:"light pink"},{h:85,s:.5,b:.5,name:"purple"},{h:85,s:.5,b:1,name:"light fuchsia"},{h:85,s:1,b:.5,name:"dark fuchsia"},{h:85,s:1,b:1,name:"fuchsia"},{h:90,s:.5,b:.5,name:"dark fuchsia"},{h:90,s:.5,b:1,name:"hot pink"},{h:90,s:1,b:.5,name:"dark fuchsia"},{h:90,s:1,b:1,name:"fuchsia"},{h:95,s:0,b:1,name:"pink"},{h:95,s:.5,b:1,name:"light pink"},{h:95,s:1,b:.5,name:"dark magenta"},{h:95,s:1,b:1,name:"magenta"}];E.default.prototype._rgbColorName=function(m){m=v.default._rgbaToHSBA(m);var g,d,p=[(M=m)[0],m[1],m[2]];0!==p[0]&&(p[0]=Math.round(100*p[0]),(m=p[0].toString().split(""))[d=m.length-1]=parseInt(m[d]),m[d]<2.5?m[d]=0:2.5<=m[d]&&m[d]<7.5&&(m[d]=5),2===m.length?(m[0]=parseInt(m[0]),7.5<=m[d]&&(m[d]=0,m[0]=m[0]+1),p[0]=10*m[0]+m[1]):p[0]=7.5<=m[d]?10:m[d]),p[2]=p[2]/255;for(var h=p.length-1;1<=h;h--)p[h]=p[h]<=.25?0:.25<p[h]&&p[h]<.75?.5:1;if(0===p[0]&&0===p[1]&&1===p[2]){for(var y=2;0<=y;y--)M[y]=Math.round(1e4*M[y])/1e4;for(var b=0;b<T.length;b++){if(T[b].h===M[0]&&T[b].s===M[1]&&T[b].b===M[2]){g=T[b].name;break}g="white"}}else for(var x=0;x<C.length;x++)if(C[x].h===p[0]&&C[x].s===p[1]&&C[x].b===p[2]){g=C[x].name;break}return g},H.default=l=E.default},{"../color/color_conversion":268,"../core/main":283,"core-js/modules/es.function.name":174,"core-js/modules/es.object.to-string":190,"core-js/modules/es.regexp.exec":195,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.string.split":206}],263:[function(l,de,H){"use strict";l("core-js/modules/es.array.concat"),l("core-js/modules/es.regexp.exec"),l("core-js/modules/es.string.ends-with"),l("core-js/modules/es.string.replace"),l("core-js/modules/es.array.concat"),l("core-js/modules/es.regexp.exec"),l("core-js/modules/es.string.ends-with"),l("core-js/modules/es.string.replace"),Object.defineProperty(H,"__esModule",{value:!0}),H.default=void 0;var M=(l=l("../core/main"))&&l.__esModule?l:{default:l},E="_Description",v="_fallbackDesc",S="_fallbackTable",T="_Label",C="_labelDesc",f="_labelTable";function g(d){if("label"===d||"fallback"===d)throw new Error("description should not be LABEL or FALLBACK");return d.endsWith(".")||d.endsWith(";")||d.endsWith(",")||d.endsWith("?")||d.endsWith("!")||(d+="."),d}M.default.prototype.describe=function(d,m){var p;M.default._validateParameters("describe",arguments),"string"==typeof d&&(p=this.canvas.id,d=g(d),this.dummyDOM||(this.dummyDOM=document.getElementById(p).parentNode),this.descriptions||(this.descriptions={}),this.descriptions.fallback?this.descriptions.fallback.innerHTML!==d&&(this.descriptions.fallback.innerHTML=d):this._describeHTML("fallback",d),m===this.LABEL&&(this.descriptions.label?this.descriptions.label.innerHTML!==d&&(this.descriptions.label.innerHTML=d):this._describeHTML("label",d)))},M.default.prototype.describeElement=function(d,m,p){var h,y;M.default._validateParameters("describeElement",arguments),"string"==typeof m&&"string"==typeof d&&(h=this.canvas.id,m=g(m),y=function(b){if("label"===b||"fallback"===b)throw new Error("element name should not be LABEL or FALLBACK");return b.endsWith(".")||b.endsWith(";")||b.endsWith(",")?b=b.replace(/.$/,":"):b.endsWith(":")||(b+=":"),b}(d),d=d.replace(/[^a-zA-Z0-9]/g,""),y='<th scope="row">'.concat(y,"</th><td>").concat(m,"</td>"),this.dummyDOM||(this.dummyDOM=document.getElementById(h).parentNode),this.descriptions?this.descriptions.fallbackElements||(this.descriptions.fallbackElements={}):this.descriptions={fallbackElements:{}},this.descriptions.fallbackElements[d]?this.descriptions.fallbackElements[d].innerHTML!==y&&(this.descriptions.fallbackElements[d].innerHTML=y):this._describeElementHTML("fallback",d,y),p===this.LABEL&&(this.descriptions.labelElements||(this.descriptions.labelElements={}),this.descriptions.labelElements[d]?this.descriptions.labelElements[d].innerHTML!==y&&(this.descriptions.labelElements[d].innerHTML=y):this._describeElementHTML("label",d,y)))},M.default.prototype._describeHTML=function(d,m){var p,h=this.canvas.id;"fallback"===d?(this.dummyDOM.querySelector("#".concat(h+E))?this.dummyDOM.querySelector("#"+h+S).insertAdjacentHTML("beforebegin",'<p id="'.concat(h+v,'"></p>')):(p='<div id="'.concat(h).concat(E,'" role="region" aria-label="Canvas Description"><p id="').concat(h).concat(v,'"></p></div>'),this.dummyDOM.querySelector("#".concat(h,"accessibleOutput"))?this.dummyDOM.querySelector("#".concat(h,"accessibleOutput")).insertAdjacentHTML("beforebegin",p):this.dummyDOM.querySelector("#".concat(h)).innerHTML=p),this.descriptions.fallback=this.dummyDOM.querySelector("#".concat(h).concat(v)),this.descriptions.fallback.innerHTML=m):"label"===d&&(this.dummyDOM.querySelector("#".concat(h+T))?this.dummyDOM.querySelector("#".concat(h+f))&&this.dummyDOM.querySelector("#".concat(h+f)).insertAdjacentHTML("beforebegin",'<p id="'.concat(h).concat(C,'"></p>')):(p='<div id="'.concat(h).concat(T,'" class="p5Label"><p id="').concat(h).concat(C,'"></p></div>'),this.dummyDOM.querySelector("#".concat(h,"accessibleOutputLabel"))?this.dummyDOM.querySelector("#".concat(h,"accessibleOutputLabel")).insertAdjacentHTML("beforebegin",p):this.dummyDOM.querySelector("#"+h).insertAdjacentHTML("afterend",p)),this.descriptions.label=this.dummyDOM.querySelector("#"+h+C),this.descriptions.label.innerHTML=m)},M.default.prototype._describeElementHTML=function(d,m,p){var h,y=this.canvas.id;"fallback"===d?(this.dummyDOM.querySelector("#".concat(y+E))?this.dummyDOM.querySelector("#"+y+S)||this.dummyDOM.querySelector("#"+y+v).insertAdjacentHTML("afterend",'<table id="'.concat(y).concat(S,'"><caption>Canvas elements and their descriptions</caption></table>')):(h='<div id="'.concat(y).concat(E,'" role="region" aria-label="Canvas Description"><table id="').concat(y).concat(S,'"><caption>Canvas elements and their descriptions</caption></table></div>'),this.dummyDOM.querySelector("#".concat(y,"accessibleOutput"))?this.dummyDOM.querySelector("#".concat(y,"accessibleOutput")).insertAdjacentHTML("beforebegin",h):this.dummyDOM.querySelector("#"+y).innerHTML=h),(h=document.createElement("tr")).id=y+"_fte_"+m,this.dummyDOM.querySelector("#"+y+S).appendChild(h),this.descriptions.fallbackElements[m]=this.dummyDOM.querySelector("#".concat(y).concat("_fte_").concat(m)),this.descriptions.fallbackElements[m].innerHTML=p):"label"===d&&(this.dummyDOM.querySelector("#".concat(y+T))?this.dummyDOM.querySelector("#".concat(y+f))||this.dummyDOM.querySelector("#"+y+C).insertAdjacentHTML("afterend",'<table id="'.concat(y+f,'"></table>')):(h='<div id="'.concat(y).concat(T,'" class="p5Label"><table id="').concat(y).concat(f,'"></table></div>'),this.dummyDOM.querySelector("#".concat(y,"accessibleOutputLabel"))?this.dummyDOM.querySelector("#".concat(y,"accessibleOutputLabel")).insertAdjacentHTML("beforebegin",h):this.dummyDOM.querySelector("#"+y).insertAdjacentHTML("afterend",h)),(d=document.createElement("tr")).id=y+"_lte_"+m,this.dummyDOM.querySelector("#"+y+f).appendChild(d),this.descriptions.labelElements[m]=this.dummyDOM.querySelector("#".concat(y).concat("_lte_").concat(m)),this.descriptions.labelElements[m].innerHTML=p)},H.default=l=M.default},{"../core/main":283,"core-js/modules/es.array.concat":153,"core-js/modules/es.regexp.exec":195,"core-js/modules/es.string.ends-with":198,"core-js/modules/es.string.replace":204}],264:[function(l,de,H){"use strict";l("core-js/modules/es.array.concat"),l("core-js/modules/es.array.from"),l("core-js/modules/es.array.map"),l("core-js/modules/es.string.iterator"),l("core-js/modules/es.array.concat"),l("core-js/modules/es.array.from"),l("core-js/modules/es.array.map"),l("core-js/modules/es.string.iterator"),Object.defineProperty(H,"__esModule",{value:!0}),H.default=void 0;var M=(l=l("../core/main"))&&l.__esModule?l:{default:l};M.default.prototype._updateGridOutput=function(E){var v,S,T,C,f,g,d,m;this._renderer&&this._renderer instanceof M.default.RendererGL?this._didOutputGridWebGLMessage||(this._didOutputGridWebGLMessage=!0,console.error("gridOutput() does not yet work in WebGL mode.")):this.dummyDOM.querySelector("#".concat(E,"_summary"))&&(v=this._accessibleOutputs[E],f=(S=function(f,g){var d,m="",p="",h=0;for(d in g){var y,b=0;for(y in g[d]){var x='<li id="'.concat(f,"shape").concat(h,'">').concat(g[d][y].color," ").concat(d,",");"line"===d?x+=" location = ".concat(g[d][y].pos,", length = ").concat(g[d][y].length," pixels"):(x+=" location = ".concat(g[d][y].pos),"point"!==d&&(x+=", area = ".concat(g[d][y].area," %")),x+="</li>"),m+=x,b++,h++}p=1<b?"".concat(p," ").concat(b," ").concat(d,"s"):"".concat(p," ").concat(b," ").concat(d)}return{numShapes:[h,p],details:m}}(E,this.ingredients.shapes)).numShapes,d=this.width,m=this.height,g="".concat(g=this.ingredients.colors.background," canvas, ").concat(d," by ").concat(m," pixels, contains ").concat(f[0]),T=g="".concat(g,1===f[0]?" shape: ":" shapes: ").concat(f[1]),C=function(f,g){var d,m,p=0,h="",y=Array.from(Array(10),function(){return Array(10)});for(d in g)for(var b in g[d]){var x;x="line"!==d?'<a href="#'.concat(f,"shape").concat(p,'">').concat(g[d][b].color," ").concat(d,"</a>"):'<a href="#'.concat(f,"shape").concat(p,'">').concat(g[d][b].color," ").concat(d," midpoint</a>"),g[d][b].loc.locY<y.length&&g[d][b].loc.locX<y[g[d][b].loc.locY].length&&(y[g[d][b].loc.locY][g[d][b].loc.locX]=y[g[d][b].loc.locY][g[d][b].loc.locX]?y[g[d][b].loc.locY][g[d][b].loc.locX]+"  "+x:x,p++)}for(m in y){var D,N="<tr>";for(D in y[m])N+="<td>",void 0!==y[m][D]&&(N+=y[m][D]),N+="</td>";h=h+N+"</tr>"}return h}(E,this.ingredients.shapes),T!==v.summary.innerHTML&&(v.summary.innerHTML=T),C!==v.map.innerHTML&&(v.map.innerHTML=C),S.details!==v.shapeDetails.innerHTML&&(v.shapeDetails.innerHTML=S.details),this._accessibleOutputs[E]=v)},H.default=l=M.default},{"../core/main":283,"core-js/modules/es.array.concat":153,"core-js/modules/es.array.from":162,"core-js/modules/es.array.map":168,"core-js/modules/es.string.iterator":200}],265:[function(l,de,H){"use strict";l("core-js/modules/es.symbol"),l("core-js/modules/es.symbol.description"),l("core-js/modules/es.symbol.iterator"),l("core-js/modules/es.array.concat"),l("core-js/modules/es.array.fill"),l("core-js/modules/es.array.from"),l("core-js/modules/es.array.iterator"),l("core-js/modules/es.array.map"),l("core-js/modules/es.number.to-fixed"),l("core-js/modules/es.object.to-string"),l("core-js/modules/es.regexp.to-string"),l("core-js/modules/es.string.iterator"),l("core-js/modules/web.dom-collections.iterator"),l("core-js/modules/es.array.concat"),l("core-js/modules/es.array.fill"),l("core-js/modules/es.array.map"),l("core-js/modules/es.number.to-fixed"),Object.defineProperty(H,"__esModule",{value:!0}),H.default=void 0;var M=(l=l("../core/main"))&&l.__esModule?l:{default:l};function v(f,d,C){var g=f[0];return f=f[1],g=Math.floor(g/d*10),d=Math.floor(f/C*10),{locX:Math.min(Math.max(g,0),9),locY:Math.min(Math.max(d,0),9)}}M.default.prototype.textOutput=function(S){M.default._validateParameters("textOutput",arguments),this._accessibleOutputs.text||(this._accessibleOutputs.text=!0,this._createOutput("textOutput","Fallback"),S===this.LABEL&&(this._accessibleOutputs.textLabel=!0,this._createOutput("textOutput","Label")))},M.default.prototype.gridOutput=function(S){M.default._validateParameters("gridOutput",arguments),this._accessibleOutputs.grid||(this._accessibleOutputs.grid=!0,this._createOutput("gridOutput","Fallback"),S===this.LABEL&&(this._accessibleOutputs.gridLabel=!0,this._createOutput("gridOutput","Label")))},M.default.prototype._addAccsOutput=function(){return this._accessibleOutputs||(this._accessibleOutputs={text:!1,grid:!1,textLabel:!1,gridLabel:!1}),this._accessibleOutputs.grid||this._accessibleOutputs.text},M.default.prototype._createOutput=function(S,T){var C,f,g,d=this.canvas.id,m=(this.ingredients||(this.ingredients={shapes:{},colors:{background:"white",fill:"white",stroke:"black"},pShapes:"",pBackground:""}),this.dummyDOM||(this.dummyDOM=document.getElementById(d).parentNode),"");"Fallback"===T?(C=d+S,this.dummyDOM.querySelector("#".concat(f=d+"accessibleOutput"))||(this.dummyDOM.querySelector("#".concat(d,"_Description"))?this.dummyDOM.querySelector("#".concat(d,"_Description")).insertAdjacentHTML("afterend",'<div id="'.concat(f,'" role="region" aria-label="Canvas Outputs"></div>')):this.dummyDOM.querySelector("#".concat(d)).innerHTML='<div id="'.concat(f,'" role="region" aria-label="Canvas Outputs"></div>'))):"Label"===T&&(C=d+S+(m=T),this.dummyDOM.querySelector("#".concat(f=d+"accessibleOutput"+T))||(this.dummyDOM.querySelector("#".concat(d,"_Label"))?this.dummyDOM.querySelector("#".concat(d,"_Label")):this.dummyDOM.querySelector("#".concat(d))).insertAdjacentHTML("afterend",'<div id="'.concat(f,'"></div>'))),this._accessibleOutputs[C]={},"textOutput"===S?(m="#".concat(d,"gridOutput").concat(m),g='<div id="'.concat(C,'">Text Output<div id="').concat(C,'Summary" aria-label="text output summary"><p id="').concat(C,'_summary"></p><ul id="').concat(C,'_list"></ul></div><table id="').concat(C,'_shapeDetails" summary="text output shape details"></table></div>'),this.dummyDOM.querySelector(m)?this.dummyDOM.querySelector(m).insertAdjacentHTML("beforebegin",g):this.dummyDOM.querySelector("#".concat(f)).innerHTML=g,this._accessibleOutputs[C].list=this.dummyDOM.querySelector("#".concat(C,"_list"))):"gridOutput"===S&&(m="#".concat(d,"textOutput").concat(m),g='<div id="'.concat(C,'">Grid Output<p id="').concat(C,'_summary" aria-label="grid output summary"><table id="').concat(C,'_map" summary="grid output content"></table><ul id="').concat(C,'_shapeDetails" aria-label="grid output shape details"></ul></div>'),this.dummyDOM.querySelector(m)?this.dummyDOM.querySelector(m).insertAdjacentHTML("afterend",g):this.dummyDOM.querySelector("#".concat(f)).innerHTML=g,this._accessibleOutputs[C].map=this.dummyDOM.querySelector("#".concat(C,"_map"))),this._accessibleOutputs[C].shapeDetails=this.dummyDOM.querySelector("#".concat(C,"_shapeDetails")),this._accessibleOutputs[C].summary=this.dummyDOM.querySelector("#".concat(C,"_summary"))},M.default.prototype._updateAccsOutput=function(){var S=this.canvas.id;JSON.stringify(this.ingredients.shapes)===this.ingredients.pShapes&&this.ingredients.colors.background===this.ingredients.pBackground||(this.ingredients.pShapes=JSON.stringify(this.ingredients.shapes),this._accessibleOutputs.text&&this._updateTextOutput(S+"textOutput"),this._accessibleOutputs.grid&&this._updateGridOutput(S+"gridOutput"),this._accessibleOutputs.textLabel&&this._updateTextOutput(S+"textOutputLabel"),this._accessibleOutputs.gridLabel&&this._updateGridOutput(S+"gridOutputLabel"))},M.default.prototype._accsBackground=function(S){this.ingredients.pShapes=JSON.stringify(this.ingredients.shapes),this.ingredients.pBackground=this.ingredients.colors.background,this.ingredients.shapes={},this.ingredients.colors.backgroundRGBA!==S&&(this.ingredients.colors.backgroundRGBA=S,this.ingredients.colors.background=this._rgbColorName(S))},M.default.prototype._accsCanvasColors=function(S,T){"fill"===S?this.ingredients.colors.fillRGBA!==T&&(this.ingredients.colors.fillRGBA=T,this.ingredients.colors.fill=this._rgbColorName(T)):"stroke"===S&&this.ingredients.colors.strokeRGBA!==T&&(this.ingredients.colors.strokeRGBA=T,this.ingredients.colors.stroke=this._rgbColorName(T))},M.default.prototype._accsOutput=function(S,T){"ellipse"===S&&T[2]===T[3]?S="circle":"rectangle"===S&&T[2]===T[3]&&(S="square");var C,f,h,y,b,g={},d=!0,m=(y=T,h="rectangle"===(h=S)||"ellipse"===h||"arc"===h||"circle"===h||"square"===h?(b=Math.round(y[0]+y[2]/2),Math.round(y[1]+y[3]/2)):"triangle"===h?(b=(y[0]+y[2]+y[4])/3,(y[1]+y[3]+y[5])/3):"quadrilateral"===h?(b=(y[0]+y[2]+y[4]+y[6])/4,(y[1]+y[3]+y[5]+y[7])/4):"line"===h?(b=(y[0]+y[2])/2,(y[1]+y[3])/2):(b=y[0],y[1]),[b,h]);if("line"===S?(g.color=this.ingredients.colors.stroke,g.length=Math.round(this.dist(T[0],T[1],T[2],T[3])),C=this._getPos(T[0],[1]),f=this._getPos(T[2],[3]),g.loc=v(m,this.width,this.height),g.pos=C===f?"at ".concat(C):"from ".concat(C," to ").concat(f)):("point"===S?g.color=this.ingredients.colors.stroke:(g.color=this.ingredients.colors.fill,g.area=this._getArea(S,T)),g.pos=this._getPos.apply(this,function E(S){return function(T){if(Array.isArray(T)){for(var C=0,f=new Array(T.length);C<T.length;C++)f[C]=T[C];return f}}(S)||function(T){if(Symbol.iterator in Object(T)||"[object Arguments]"===Object.prototype.toString.call(T))return Array.from(T)}(S)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}(m)),g.loc=v(m,this.width,this.height)),this.ingredients.shapes[S]){for(var p in this.ingredients.shapes[S])JSON.stringify(this.ingredients.shapes[S][p])===JSON.stringify(g)&&(d=!1);!0===d&&this.ingredients.shapes[S].push(g)}else this.ingredients.shapes[S]=[g]},M.default.prototype._getPos=function(f,C){f=new DOMPointReadOnly(f,C),C=this._renderer.isP3D?new DOMMatrix(this._renderer.uMVMatrix.mat4):this.drawingContext.getTransform(),C=(f=f.matrixTransform(C)).x,f=f.y;var g=this.width*this._pixelDensity,d=this.height*this._pixelDensity;return C<.4*g?f<.4*d?"top left":.6*d<f?"bottom left":"mid left":.6*g<C?f<.4*d?"top right":.6*d<f?"bottom right":"mid right":f<.4*d?"top middle":.6*d<f?"bottom middle":"middle"},M.default.prototype._getArea=function(S,T){var C,f,g=0,d=("arc"===S?(g=(C=((T[5]-T[4])%(2*Math.PI)+2*Math.PI)%(2*Math.PI))*T[2]*T[3]/8,"open"!==T[6]&&"chord"!==T[6]||(f=T[0],y=T[1],d=T[0]+T[2]/2*Math.cos(T[4]).toFixed(2),b=T[1]+T[3]/2*Math.sin(T[4]).toFixed(2),p=T[0]+T[2]/2*Math.cos(T[5]).toFixed(2),m=T[1]+T[3]/2*Math.sin(T[5]).toFixed(2),f=Math.abs(f*(b-m)+d*(m-y)+p*(y-b))/2,C>Math.PI?g+=f:g-=f)):"ellipse"===S||"circle"===S?g=3.14*T[2]/2*T[3]/2:"line"===S||"point"===S?g=0:"quadrilateral"===S?g=Math.abs((T[6]+T[0])*(T[7]-T[1])+(T[0]+T[2])*(T[1]-T[3])+(T[2]+T[4])*(T[3]-T[5])+(T[4]+T[6])*(T[5]-T[7]))/2:"rectangle"===S||"square"===S?g=T[2]*T[3]:"triangle"===S&&(g=Math.abs(T[0]*(T[3]-T[5])+T[2]*(T[5]-T[1])+T[4]*(T[1]-T[3]))/2),this.width*this._pixelDensity),m=this.height*this._pixelDensity,p=[new DOMPoint(0,0),new DOMPoint(d,0),new DOMPoint(d,m),new DOMPoint(0,m)],h=(this._renderer.isP3D?new DOMMatrix(this._renderer.uMVMatrix.mat4):this.drawingContext.getTransform()).inverse(),y=p.map(function(x){return x.matrixTransform(h)}),b=Math.abs((y[3].x+y[0].x)*(y[3].y-y[0].y)+(y[0].x+y[1].x)*(y[0].y-y[1].y)+(y[1].x+y[2].x)*(y[1].y-y[2].y)+(y[2].x+y[3].x)*(y[2].y-y[3].y))/2;return Math.round(100*g/b)},H.default=l=M.default},{"../core/main":283,"core-js/modules/es.array.concat":153,"core-js/modules/es.array.fill":156,"core-js/modules/es.array.from":162,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.map":168,"core-js/modules/es.number.to-fixed":182,"core-js/modules/es.object.to-string":190,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/web.dom-collections.iterator":246}],266:[function(l,de,H){"use strict";l("core-js/modules/es.array.concat"),l("core-js/modules/es.array.concat"),Object.defineProperty(H,"__esModule",{value:!0}),H.default=void 0;var M=(l=l("../core/main"))&&l.__esModule?l:{default:l};M.default.prototype._updateTextOutput=function(E){var v,S,T,C,f,g,d,m;this._renderer&&this._renderer instanceof M.default.RendererGL?this._didOutputTextWebGLMessage||(this._didOutputTextWebGLMessage=!0,console.error("textOutput() does not yet work in WebGL mode.")):this.dummyDOM.querySelector("#".concat(E,"_summary"))&&(v=this._accessibleOutputs[E],f=(S=function(f,g){var d,m="",p=0;for(d in g)for(var h in g[d]){var y='<li><a href="#'.concat(f,"shape").concat(p,'">').concat(g[d][h].color," ").concat(d,"</a>");"line"===d?y+=", ".concat(g[d][h].pos,", ").concat(g[d][h].length," pixels long.</li>"):(y+=", at ".concat(g[d][h].pos),"point"!==d&&(y+=", covering ".concat(g[d][h].area,"% of the canvas")),y+=".</li>"),m+=y,p++}return{numShapes:p,listShapes:m}}(E,this.ingredients.shapes)).numShapes,g=this.ingredients.colors.background,m=this.height,d="Your output is a, ".concat(d=this.width," by ").concat(m," pixels, ").concat(g," canvas containing the following"),T=d=1===f?"".concat(d," shape:"):"".concat(d," ").concat(f," shapes:"),C=function(f,g){var d,m="",p=0;for(d in g)for(var h in g[d]){var y='<tr id="'.concat(f,"shape").concat(p,'"><th>').concat(g[d][h].color," ").concat(d,"</th>");"line"===d?y+="<td>location = ".concat(g[d][h].pos,"</td><td>length = ").concat(g[d][h].length," pixels</td></tr>"):(y+="<td>location = ".concat(g[d][h].pos,"</td>"),"point"!==d&&(y+="<td> area = ".concat(g[d][h].area,"%</td>")),y+="</tr>"),m+=y,p++}return m}(E,this.ingredients.shapes),T!==v.summary.innerHTML&&(v.summary.innerHTML=T),S.listShapes!==v.list.innerHTML&&(v.list.innerHTML=S.listShapes),C!==v.shapeDetails.innerHTML&&(v.shapeDetails.innerHTML=C),this._accessibleOutputs[E]=v)},H.default=l=M.default},{"../core/main":283,"core-js/modules/es.array.concat":153}],267:[function(l,de,H){"use strict";var M=(M=l("./core/main"))&&M.__esModule?M:{default:M};l("./core/constants"),l("./core/environment"),l("./core/friendly_errors/stacktrace"),l("./core/friendly_errors/validate_params"),l("./core/friendly_errors/file_errors"),l("./core/friendly_errors/fes_core"),l("./core/friendly_errors/sketch_reader"),l("./core/helpers"),l("./core/legacy"),l("./core/preload"),l("./core/p5.Element"),l("./core/p5.Graphics"),l("./core/p5.Renderer"),l("./core/p5.Renderer2D"),l("./core/rendering"),l("./core/shim"),l("./core/structure"),l("./core/transform"),l("./core/shape/2d_primitives"),l("./core/shape/attributes"),l("./core/shape/curves"),l("./core/shape/vertex"),l("./accessibility/outputs"),l("./accessibility/textOutput"),l("./accessibility/gridOutput"),l("./accessibility/color_namer"),l("./color/color_conversion"),l("./color/creating_reading"),l("./color/p5.Color"),l("./color/setting"),l("./data/p5.TypedDict"),l("./data/local_storage.js"),l("./dom/dom"),l("./accessibility/describe"),l("./events/acceleration"),l("./events/keyboard"),l("./events/mouse"),l("./events/touch"),l("./image/filters"),l("./image/image"),l("./image/loading_displaying"),l("./image/p5.Image"),l("./image/pixels"),l("./io/files"),l("./io/p5.Table"),l("./io/p5.TableRow"),l("./io/p5.XML"),l("./math/calculation"),l("./math/math"),l("./math/noise"),l("./math/p5.Vector"),l("./math/random"),l("./math/trigonometry"),l("./typography/attributes"),l("./typography/loading_displaying"),l("./typography/p5.Font"),l("./utilities/array_functions"),l("./utilities/conversion"),l("./utilities/string_functions"),l("./utilities/time_date"),l("./webgl/3d_primitives"),l("./webgl/interaction"),l("./webgl/light"),l("./webgl/loading"),l("./webgl/material"),l("./webgl/p5.Camera"),l("./webgl/p5.DataArray"),l("./webgl/p5.Geometry"),l("./webgl/p5.Matrix"),l("./webgl/p5.Quat"),l("./webgl/p5.RendererGL.Immediate"),l("./webgl/p5.RendererGL"),l("./webgl/p5.RendererGL.Retained"),l("./webgl/p5.Framebuffer"),l("./webgl/p5.Shader"),l("./webgl/p5.RenderBuffer"),l("./webgl/p5.Texture"),l("./webgl/text"),l("./core/init"),de.exports=M.default},{"./accessibility/color_namer":262,"./accessibility/describe":263,"./accessibility/gridOutput":264,"./accessibility/outputs":265,"./accessibility/textOutput":266,"./color/color_conversion":268,"./color/creating_reading":269,"./color/p5.Color":270,"./color/setting":271,"./core/constants":272,"./core/environment":273,"./core/friendly_errors/fes_core":274,"./core/friendly_errors/file_errors":275,"./core/friendly_errors/sketch_reader":276,"./core/friendly_errors/stacktrace":277,"./core/friendly_errors/validate_params":278,"./core/helpers":279,"./core/init":280,"./core/legacy":282,"./core/main":283,"./core/p5.Element":284,"./core/p5.Graphics":285,"./core/p5.Renderer":286,"./core/p5.Renderer2D":287,"./core/preload":288,"./core/rendering":289,"./core/shape/2d_primitives":290,"./core/shape/attributes":291,"./core/shape/curves":292,"./core/shape/vertex":293,"./core/shim":294,"./core/structure":295,"./core/transform":296,"./data/local_storage.js":297,"./data/p5.TypedDict":298,"./dom/dom":299,"./events/acceleration":300,"./events/keyboard":301,"./events/mouse":302,"./events/touch":303,"./image/filters":304,"./image/image":305,"./image/loading_displaying":306,"./image/p5.Image":307,"./image/pixels":308,"./io/files":309,"./io/p5.Table":310,"./io/p5.TableRow":311,"./io/p5.XML":312,"./math/calculation":313,"./math/math":314,"./math/noise":315,"./math/p5.Vector":316,"./math/random":317,"./math/trigonometry":318,"./typography/attributes":319,"./typography/loading_displaying":320,"./typography/p5.Font":321,"./utilities/array_functions":322,"./utilities/conversion":323,"./utilities/string_functions":324,"./utilities/time_date":325,"./webgl/3d_primitives":326,"./webgl/interaction":328,"./webgl/light":329,"./webgl/loading":330,"./webgl/material":331,"./webgl/p5.Camera":332,"./webgl/p5.DataArray":333,"./webgl/p5.Framebuffer":334,"./webgl/p5.Geometry":335,"./webgl/p5.Matrix":336,"./webgl/p5.Quat":337,"./webgl/p5.RenderBuffer":338,"./webgl/p5.RendererGL":341,"./webgl/p5.RendererGL.Immediate":339,"./webgl/p5.RendererGL.Retained":340,"./webgl/p5.Shader":342,"./webgl/p5.Texture":343,"./webgl/text":344}],268:[function(l,de,H){"use strict";Object.defineProperty(H,"__esModule",{value:!0}),H.default=void 0,(l=(l=l("../core/main"))&&l.__esModule?l:{default:l}).default.ColorConversion={_hsbaToHSLA:function(M){var v=M[1],S=M[2],T=(2-v)*S/2;return 0!=T&&(1==T?v=0:T<.5?v/=2-v:v=v*S/(2-2*T)),[M[0],v,T,M[3]]},_hsbaToRGBA:function(M){var E,v,S,T,C,f=6*M[0],g=M[1],d=M[2];return 0===g?[d,d,d,M[3]]:(v=d*(1-g),S=d*(1-g*(f-(E=Math.floor(f)))),g=d*(1-g*(1+E-f)),f=1===E?(T=S,C=d,v):2===E?(T=v,C=d,g):3===E?(T=v,C=S,d):4===E?(T=g,C=v,d):5===E?(T=d,C=v,S):(T=d,C=g,v),[T,C,f,M[3]])},_hslaToHSBA:function(M){var v=M[1],S=M[2],T=S<.5?(1+v)*S:S+v-S*v;return[M[0],v=2*(T-S)/T,T,M[3]]},_hslaToRGBA:function(M){var E,v=6*M[0],S=M[1],T=M[2];return 0===S?[T,T,T,M[3]]:[(E=function(C,f,g){return C<0?C+=6:6<=C&&(C-=6),C<1?f+(g-f)*C:C<3?g:C<4?f+(g-f)*(4-C):f})(2+v,S=2*T-(T=T<.5?(1+S)*T:T+S-T*S),T),E(v,S,T),E(v-2,S,T),M[3]]},_rgbaToHSBA:function(M){var E,v,S=M[0],T=M[1],C=M[2],f=Math.max(S,T,C),g=f-Math.min(S,T,C);return 0==g?v=E=0:(v=g/f,S===f?E=(T-C)/g:T===f?E=2+(C-S)/g:C===f&&(E=4+(S-T)/g),E<0?E+=6:6<=E&&(E-=6)),[E/6,v,f,M[3]]},_rgbaToHSLA:function(M){var E,v,d,S=M[0],T=M[1],C=M[2],f=Math.max(S,T,C),g=f+(d=Math.min(S,T,C));return 0==(d=f-d)?v=E=0:(v=g<1?d/g:d/(2-g),S===f?E=(T-C)/d:T===f?E=2+(C-S)/d:C===f&&(E=4+(S-T)/d),E<0?E+=6:6<=E&&(E-=6)),[E/6,v,g/2,M[3]]}},H.default=l=l.default.ColorConversion},{"../core/main":283}],269:[function(l,de,H){"use strict";function M(f){return(M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(g){return typeof g}:function(g){return g&&"function"==typeof Symbol&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":typeof g})(f)}function E(f){return(E="function"==typeof Symbol&&"symbol"===M(Symbol.iterator)?function(g){return M(g)}:function(g){return g&&"function"==typeof Symbol&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":M(g)})(f)}l("core-js/modules/es.symbol"),l("core-js/modules/es.symbol.description"),l("core-js/modules/es.symbol.iterator"),l("core-js/modules/es.array.iterator"),l("core-js/modules/es.array.map"),l("core-js/modules/es.object.get-own-property-descriptor"),l("core-js/modules/es.object.to-string"),l("core-js/modules/es.string.iterator"),l("core-js/modules/es.weak-map"),l("core-js/modules/web.dom-collections.iterator"),l("core-js/modules/es.array.map"),Object.defineProperty(H,"__esModule",{value:!0}),H.default=void 0;var v=(C=l("../core/main"))&&C.__esModule?C:{default:C},S=function(f){if(f&&f.__esModule)return f;if(null===f||"object"!==E(f)&&"function"!=typeof f)return{default:f};var g=T();if(g&&g.has(f))return g.get(f);var d,m={},p=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(d in f){var h;Object.prototype.hasOwnProperty.call(f,d)&&((h=p?Object.getOwnPropertyDescriptor(f,d):null)&&(h.get||h.set)?Object.defineProperty(m,d,h):m[d]=f[d])}return m.default=f,g&&g.set(f,m),m}(l("../core/constants"));function T(){var f;return"function"!=typeof WeakMap?null:(T=function(){return f},f=new WeakMap)}l("./p5.Color"),l("../core/friendly_errors/validate_params"),l("../core/friendly_errors/file_errors"),l("../core/friendly_errors/fes_core"),v.default.prototype.alpha=function(f){return v.default._validateParameters("alpha",arguments),this.color(f)._getAlpha()},v.default.prototype.blue=function(f){return v.default._validateParameters("blue",arguments),this.color(f)._getBlue()},v.default.prototype.brightness=function(f){return v.default._validateParameters("brightness",arguments),this.color(f)._getBrightness()},v.default.prototype.color=function(){for(var f,g=arguments.length,d=new Array(g),m=0;m<g;m++)d[m]=arguments[m];return v.default._validateParameters("color",d),d[0]instanceof v.default.Color?d[0]:(f=Array.isArray(d[0])?d[0]:d,new v.default.Color(this,f))},v.default.prototype.green=function(f){return v.default._validateParameters("green",arguments),this.color(f)._getGreen()},v.default.prototype.hue=function(f){return v.default._validateParameters("hue",arguments),this.color(f)._getHue()},v.default.prototype.lerpColor=function(f,g,d){v.default._validateParameters("lerpColor",arguments),f instanceof v.default.Color||(f=color(f)),g instanceof v.default.Color||(g=color(g));var m,p,h,y=this._colorMode,b=this._colorMaxes;if(y===S.RGB)p=f.levels.map(function(x){return x/255}),h=g.levels.map(function(x){return x/255});else if(y===S.HSB)f._getBrightness(),g._getBrightness(),p=f.hsba,h=g.hsba;else{if(y!==S.HSL)throw new Error("".concat(y," cannot be used for interpolation."));f._getLightness(),g._getLightness(),p=f.hsla,h=g.hsla}return d=Math.max(Math.min(d,1),0),void 0===this.lerp&&(this.lerp=function(x,D,N){return N*(D-x)+x}),y===S.RGB?m=this.lerp(p[0],h[0],d):(.5<Math.abs(p[0]-h[0])&&(p[0]>h[0]?h[0]+=1:p[0]+=1),1<=(m=this.lerp(p[0],h[0],d))&&--m),f=this.lerp(p[1],h[1],d),g=this.lerp(p[2],h[2],d),p=this.lerp(p[3],h[3],d),this.color(m*=b[y][0],f*=b[y][1],g*=b[y][2],p*=b[y][3])},v.default.prototype.paletteLerp=function(f,g){var d=f[0];if(g<d[1])return this.color(d[0]);for(var m=1;m<f.length;m++){var p,h=f[m];if(g<h[1])return this.lerpColor(this.color((p=f[m-1])[0]),this.color(h[0]),(g-p[1])/(h[1]-p[1]))}return this.color(f[f.length-1][0])},v.default.prototype.lightness=function(f){return v.default._validateParameters("lightness",arguments),this.color(f)._getLightness()},v.default.prototype.red=function(f){return v.default._validateParameters("red",arguments),this.color(f)._getRed()},v.default.prototype.saturation=function(f){return v.default._validateParameters("saturation",arguments),this.color(f)._getSaturation()};var C=v.default;H.default=C},{"../core/constants":272,"../core/friendly_errors/fes_core":274,"../core/friendly_errors/file_errors":275,"../core/friendly_errors/validate_params":278,"../core/main":283,"./p5.Color":270,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.map":168,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.to-string":190,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246}],270:[function(m,de,H){"use strict";function M(x){return(M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(D){return typeof D}:function(D){return D&&"function"==typeof Symbol&&D.constructor===Symbol&&D!==Symbol.prototype?"symbol":typeof D})(x)}function E(x){return(E="function"==typeof Symbol&&"symbol"===M(Symbol.iterator)?function(D){return M(D)}:function(D){return D&&"function"==typeof Symbol&&D.constructor===Symbol&&D!==Symbol.prototype?"symbol":M(D)})(x)}m("core-js/modules/es.symbol"),m("core-js/modules/es.symbol.description"),m("core-js/modules/es.symbol.iterator"),m("core-js/modules/es.array.includes"),m("core-js/modules/es.array.iterator"),m("core-js/modules/es.array.join"),m("core-js/modules/es.array.map"),m("core-js/modules/es.array.slice"),m("core-js/modules/es.object.get-own-property-descriptor"),m("core-js/modules/es.object.to-string"),m("core-js/modules/es.regexp.constructor"),m("core-js/modules/es.regexp.exec"),m("core-js/modules/es.regexp.to-string"),m("core-js/modules/es.string.includes"),m("core-js/modules/es.string.iterator"),m("core-js/modules/es.string.trim"),m("core-js/modules/es.weak-map"),m("core-js/modules/web.dom-collections.iterator"),m("core-js/modules/es.array.includes"),m("core-js/modules/es.array.join"),m("core-js/modules/es.array.map"),m("core-js/modules/es.array.slice"),m("core-js/modules/es.object.to-string"),m("core-js/modules/es.regexp.constructor"),m("core-js/modules/es.regexp.exec"),m("core-js/modules/es.regexp.to-string"),m("core-js/modules/es.string.includes"),m("core-js/modules/es.string.trim"),Object.defineProperty(H,"__esModule",{value:!0}),H.default=void 0;var v=f(m("../core/main")),S=function(x){if(x&&x.__esModule)return x;if(null===x||"object"!==E(x)&&"function"!=typeof x)return{default:x};var D=C();if(D&&D.has(x))return D.get(x);var N,U={},R=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(N in x){var L;Object.prototype.hasOwnProperty.call(x,N)&&((L=R?Object.getOwnPropertyDescriptor(x,N):null)&&(L.get||L.set)?Object.defineProperty(U,N,L):U[N]=x[N])}return U.default=x,D&&D.set(x,U),U}(m("../core/constants")),T=f(m("./color_conversion"));function C(){var x;return"function"!=typeof WeakMap?null:(C=function(){return x},x=new WeakMap)}function f(x){return x&&x.__esModule?x:{default:x}}function g(x,D){for(var N=0;N<D.length;N++){var U=D[N];U.enumerable=U.enumerable||!1,U.configurable=!0,"value"in U&&(U.writable=!0),Object.defineProperty(x,U.key,U)}}var d={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"},b=(m=/\s*/,/(\d{1,3})/),p=/((?:\d+(?:\.\d+)?)|(?:\.\d+))/,h=new RegExp("".concat(p.source,"%")),y={HEX3:/^#([a-f0-9])([a-f0-9])([a-f0-9])$/i,HEX4:/^#([a-f0-9])([a-f0-9])([a-f0-9])([a-f0-9])$/i,HEX6:/^#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})$/i,HEX8:/^#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})$/i,RGB:new RegExp(["^rgb\\(",b.source,",",b.source,",",b.source,"\\)$"].join(m.source),"i"),RGB_PERCENT:new RegExp(["^rgb\\(",h.source,",",h.source,",",h.source,"\\)$"].join(m.source),"i"),RGBA:new RegExp(["^rgba\\(",b.source,",",b.source,",",b.source,",",p.source,"\\)$"].join(m.source),"i"),RGBA_PERCENT:new RegExp(["^rgba\\(",h.source,",",h.source,",",h.source,",",p.source,"\\)$"].join(m.source),"i"),HSL:new RegExp(["^hsl\\(",b.source,",",h.source,",",h.source,"\\)$"].join(m.source),"i"),HSLA:new RegExp(["^hsla\\(",b.source,",",h.source,",",h.source,",",p.source,"\\)$"].join(m.source),"i"),HSB:new RegExp(["^hsb\\(",b.source,",",h.source,",",h.source,"\\)$"].join(m.source),"i"),HSBA:new RegExp(["^hsba\\(",b.source,",",h.source,",",h.source,",",p.source,"\\)$"].join(m.source),"i")};v.default.Color=function(){function x(R,L){if(!(this instanceof x))throw new TypeError("Cannot call a class as a function");if(this._storeModeAndMaxes(R._colorMode,R._colorMaxes),![S.RGB,S.HSL,S.HSB].includes(this.mode))throw new Error("".concat(this.mode," is an invalid colorMode."));this._array=x._parseInputs.apply(this,L),this._calculateLevels()}var D,N,U;return D=x,U=[{key:"_parseInputs",value:function(R,L,z,F){var q,k=arguments.length,Z=this.mode,X=this.maxes[Z],W=[];if(3<=k){for(W[0]=R/X[0],W[1]=L/X[1],W[2]=z/X[2],W[3]="number"==typeof F?F/X[3]:1,q=W.length-1;0<=q;--q){var oe=W[q];oe<0?W[q]=0:1<oe&&(W[q]=1)}return Z===S.HSL?T.default._hslaToRGBA(W):Z===S.HSB?T.default._hsbaToRGBA(W):W}if(1===k&&"string"==typeof R){if(z=R.trim().toLowerCase(),d[z])return x._parseInputs.call(this,d[z]);if(y.HEX3.test(z))return(W=y.HEX3.exec(z).slice(1).map(function(ie){return parseInt(ie+ie,16)/255}))[3]=1,W;if(y.HEX6.test(z))return(W=y.HEX6.exec(z).slice(1).map(function(ie){return parseInt(ie,16)/255}))[3]=1,W;if(y.HEX4.test(z))return y.HEX4.exec(z).slice(1).map(function(ie){return parseInt(ie+ie,16)/255});if(y.HEX8.test(z))return y.HEX8.exec(z).slice(1).map(function(ie){return parseInt(ie,16)/255});if(y.RGB.test(z))return(W=y.RGB.exec(z).slice(1).map(function(ie){return ie/255}))[3]=1,W;if(y.RGB_PERCENT.test(z))return(W=y.RGB_PERCENT.exec(z).slice(1).map(function(ie){return parseFloat(ie)/100}))[3]=1,W;if(y.RGBA.test(z))return y.RGBA.exec(z).slice(1).map(function(ie,re){return 3===re?parseFloat(ie):ie/255});if(y.RGBA_PERCENT.test(z))return y.RGBA_PERCENT.exec(z).slice(1).map(function(ie,re){return 3===re?parseFloat(ie):parseFloat(ie)/100});if(y.HSL.test(z)?(W=y.HSL.exec(z).slice(1).map(function(ie,re){return 0===re?parseInt(ie,10)/360:parseInt(ie,10)/100}))[3]=1:y.HSLA.test(z)&&(W=y.HSLA.exec(z).slice(1).map(function(ie,re){return 0===re?parseInt(ie,10)/360:3===re?parseFloat(ie):parseInt(ie,10)/100})),(W=W.map(function(ie){return Math.max(Math.min(ie,1),0)})).length)return T.default._hslaToRGBA(W);if(y.HSB.test(z)?(W=y.HSB.exec(z).slice(1).map(function(ie,re){return 0===re?parseInt(ie,10)/360:parseInt(ie,10)/100}))[3]=1:y.HSBA.test(z)&&(W=y.HSBA.exec(z).slice(1).map(function(ie,re){return 0===re?parseInt(ie,10)/360:3===re?parseFloat(ie):parseInt(ie,10)/100})),W.length){for(q=W.length-1;0<=q;--q)W[q]=Math.max(Math.min(W[q],1),0);return T.default._hsbaToRGBA(W)}W=[1,1,1,1]}else{if(1!==k&&2!==k||"number"!=typeof R)throw new Error("".concat(arguments,"is not a valid color representation."));W[0]=R/X[2],W[1]=R/X[2],W[2]=R/X[2],W[3]="number"==typeof L?L/X[3]:1,W=W.map(function(ie){return Math.max(Math.min(ie,1),0)})}return W}}],(N=[{key:"toString",value:function(R){var L=this.levels,z=this._array,F=z[3];switch(R){case"#rrggbb":return"#".concat(L[0]<16?"0".concat(L[0].toString(16)):L[0].toString(16),L[1]<16?"0".concat(L[1].toString(16)):L[1].toString(16),L[2]<16?"0".concat(L[2].toString(16)):L[2].toString(16));case"#rrggbbaa":return"#".concat(L[0]<16?"0".concat(L[0].toString(16)):L[0].toString(16),L[1]<16?"0".concat(L[1].toString(16)):L[1].toString(16),L[2]<16?"0".concat(L[2].toString(16)):L[2].toString(16),L[3]<16?"0".concat(L[3].toString(16)):L[3].toString(16));case"#rgb":return"#".concat(Math.round(15*z[0]).toString(16),Math.round(15*z[1]).toString(16),Math.round(15*z[2]).toString(16));case"#rgba":return"#".concat(Math.round(15*z[0]).toString(16),Math.round(15*z[1]).toString(16),Math.round(15*z[2]).toString(16),Math.round(15*z[3]).toString(16));case"rgb":return"rgb(".concat(L[0],", ",L[1],", ",L[2],")");case"rgb%":return"rgb(".concat((100*z[0]).toPrecision(3),"%, ",(100*z[1]).toPrecision(3),"%, ",(100*z[2]).toPrecision(3),"%)");case"rgba%":return"rgba(".concat((100*z[0]).toPrecision(3),"%, ",(100*z[1]).toPrecision(3),"%, ",(100*z[2]).toPrecision(3),"%, ",(100*z[3]).toPrecision(3),"%)");case"hsb":case"hsv":return this.hsba||(this.hsba=T.default._rgbaToHSBA(this._array)),"hsb(".concat(this.hsba[0]*this.maxes[S.HSB][0],", ",this.hsba[1]*this.maxes[S.HSB][1],", ",this.hsba[2]*this.maxes[S.HSB][2],")");case"hsb%":case"hsv%":return this.hsba||(this.hsba=T.default._rgbaToHSBA(this._array)),"hsb(".concat((100*this.hsba[0]).toPrecision(3),"%, ",(100*this.hsba[1]).toPrecision(3),"%, ",(100*this.hsba[2]).toPrecision(3),"%)");case"hsba":case"hsva":return this.hsba||(this.hsba=T.default._rgbaToHSBA(this._array)),"hsba(".concat(this.hsba[0]*this.maxes[S.HSB][0],", ",this.hsba[1]*this.maxes[S.HSB][1],", ",this.hsba[2]*this.maxes[S.HSB][2],", ",F,")");case"hsba%":case"hsva%":return this.hsba||(this.hsba=T.default._rgbaToHSBA(this._array)),"hsba(".concat((100*this.hsba[0]).toPrecision(3),"%, ",(100*this.hsba[1]).toPrecision(3),"%, ",(100*this.hsba[2]).toPrecision(3),"%, ",(100*F).toPrecision(3),"%)");case"hsl":return this.hsla||(this.hsla=T.default._rgbaToHSLA(this._array)),"hsl(".concat(this.hsla[0]*this.maxes[S.HSL][0],", ",this.hsla[1]*this.maxes[S.HSL][1],", ",this.hsla[2]*this.maxes[S.HSL][2],")");case"hsl%":return this.hsla||(this.hsla=T.default._rgbaToHSLA(this._array)),"hsl(".concat((100*this.hsla[0]).toPrecision(3),"%, ",(100*this.hsla[1]).toPrecision(3),"%, ",(100*this.hsla[2]).toPrecision(3),"%)");case"hsla":return this.hsla||(this.hsla=T.default._rgbaToHSLA(this._array)),"hsla(".concat(this.hsla[0]*this.maxes[S.HSL][0],", ",this.hsla[1]*this.maxes[S.HSL][1],", ",this.hsla[2]*this.maxes[S.HSL][2],", ",F,")");case"hsla%":return this.hsla||(this.hsla=T.default._rgbaToHSLA(this._array)),"hsl(".concat((100*this.hsla[0]).toPrecision(3),"%, ",(100*this.hsla[1]).toPrecision(3),"%, ",(100*this.hsla[2]).toPrecision(3),"%, ",(100*F).toPrecision(3),"%)");default:return"rgba(".concat(L[0],",",L[1],",",L[2],",",F,")")}}},{key:"setRed",value:function(R){this._array[0]=R/this.maxes[S.RGB][0],this._calculateLevels()}},{key:"setGreen",value:function(R){this._array[1]=R/this.maxes[S.RGB][1],this._calculateLevels()}},{key:"setBlue",value:function(R){this._array[2]=R/this.maxes[S.RGB][2],this._calculateLevels()}},{key:"setAlpha",value:function(R){this._array[3]=R/this.maxes[this.mode][3],this._calculateLevels()}},{key:"_calculateLevels",value:function(){for(var R=this._array,L=this.levels=new Array(R.length),z=R.length-1;0<=z;--z)L[z]=Math.round(255*R[z]);this.hsla=null,this.hsba=null}},{key:"_getAlpha",value:function(){return this._array[3]*this.maxes[this.mode][3]}},{key:"_storeModeAndMaxes",value:function(R,L){this.mode=R,this.maxes=L}},{key:"_getMode",value:function(){return this.mode}},{key:"_getMaxes",value:function(){return this.maxes}},{key:"_getBlue",value:function(){return this._array[2]*this.maxes[S.RGB][2]}},{key:"_getBrightness",value:function(){return this.hsba||(this.hsba=T.default._rgbaToHSBA(this._array)),this.hsba[2]*this.maxes[S.HSB][2]}},{key:"_getGreen",value:function(){return this._array[1]*this.maxes[S.RGB][1]}},{key:"_getHue",value:function(){return this.mode===S.HSB?(this.hsba||(this.hsba=T.default._rgbaToHSBA(this._array)),this.hsba[0]*this.maxes[S.HSB][0]):(this.hsla||(this.hsla=T.default._rgbaToHSLA(this._array)),this.hsla[0]*this.maxes[S.HSL][0])}},{key:"_getLightness",value:function(){return this.hsla||(this.hsla=T.default._rgbaToHSLA(this._array)),this.hsla[2]*this.maxes[S.HSL][2]}},{key:"_getRed",value:function(){return this._array[0]*this.maxes[S.RGB][0]}},{key:"_getSaturation",value:function(){return this.mode===S.HSB?(this.hsba||(this.hsba=T.default._rgbaToHSBA(this._array)),this.hsba[1]*this.maxes[S.HSB][1]):(this.hsla||(this.hsla=T.default._rgbaToHSLA(this._array)),this.hsla[1]*this.maxes[S.HSL][1])}}])&&g(D.prototype,N),U&&g(D,U),x}(),H.default=b=v.default.Color},{"../core/constants":272,"../core/main":283,"./color_conversion":268,"core-js/modules/es.array.includes":163,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.join":166,"core-js/modules/es.array.map":168,"core-js/modules/es.array.slice":169,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.to-string":190,"core-js/modules/es.regexp.constructor":194,"core-js/modules/es.regexp.exec":195,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.string.includes":199,"core-js/modules/es.string.iterator":200,"core-js/modules/es.string.trim":209,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246}],271:[function(l,de,H){"use strict";function M(f){return(M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(g){return typeof g}:function(g){return g&&"function"==typeof Symbol&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":typeof g})(f)}function E(f){return(E="function"==typeof Symbol&&"symbol"===M(Symbol.iterator)?function(g){return M(g)}:function(g){return g&&"function"==typeof Symbol&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":M(g)})(f)}l("core-js/modules/es.symbol"),l("core-js/modules/es.symbol.description"),l("core-js/modules/es.symbol.iterator"),l("core-js/modules/es.array.fill"),l("core-js/modules/es.array.iterator"),l("core-js/modules/es.object.get-own-property-descriptor"),l("core-js/modules/es.object.to-string"),l("core-js/modules/es.string.iterator"),l("core-js/modules/es.weak-map"),l("core-js/modules/web.dom-collections.iterator"),l("core-js/modules/es.array.fill"),Object.defineProperty(H,"__esModule",{value:!0}),H.default=void 0;var v=(C=l("../core/main"))&&C.__esModule?C:{default:C},S=function(f){if(f&&f.__esModule)return f;if(null===f||"object"!==E(f)&&"function"!=typeof f)return{default:f};var g=T();if(g&&g.has(f))return g.get(f);var d,m={},p=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(d in f){var h;Object.prototype.hasOwnProperty.call(f,d)&&((h=p?Object.getOwnPropertyDescriptor(f,d):null)&&(h.get||h.set)?Object.defineProperty(m,d,h):m[d]=f[d])}return m.default=f,g&&g.set(f,m),m}(l("../core/constants"));function T(){var f;return"function"!=typeof WeakMap?null:(T=function(){return f},f=new WeakMap)}l("./p5.Color"),v.default.prototype.beginClip=function(){this._renderer.beginClip(0<arguments.length&&void 0!==arguments[0]?arguments[0]:{})},v.default.prototype.endClip=function(){this._renderer.endClip()},v.default.prototype.clip=function(f,g){this._renderer.beginClip(g),f(),this._renderer.endClip(g)},v.default.prototype.background=function(){var f;return(f=this._renderer).background.apply(f,arguments),this},v.default.prototype.clear=function(){return this._renderer.clear((arguments.length<=0?void 0:arguments[0])||0,(arguments.length<=1?void 0:arguments[1])||0,(arguments.length<=2?void 0:arguments[2])||0,(arguments.length<=3?void 0:arguments[3])||0),this},v.default.prototype.colorMode=function(f,g,d,m,p){return v.default._validateParameters("colorMode",arguments),f!==S.RGB&&f!==S.HSB&&f!==S.HSL||(this._colorMode=f,f=this._colorMaxes[f],2===arguments.length?(f[0]=g,f[1]=g,f[2]=g,f[3]=g):4===arguments.length?(f[0]=g,f[1]=d,f[2]=m):5===arguments.length&&(f[0]=g,f[1]=d,f[2]=m,f[3]=p)),this},v.default.prototype.fill=function(){var f;return this._renderer._setProperty("_fillSet",!0),this._renderer._setProperty("_doFill",!0),(f=this._renderer).fill.apply(f,arguments),this},v.default.prototype.noFill=function(){return this._renderer._setProperty("_doFill",!1),this},v.default.prototype.noStroke=function(){return this._renderer._setProperty("_doStroke",!1),this},v.default.prototype.stroke=function(){var f;return this._renderer._setProperty("_strokeSet",!0),this._renderer._setProperty("_doStroke",!0),(f=this._renderer).stroke.apply(f,arguments),this},v.default.prototype.erase=function(){return this._renderer.erase(0<arguments.length&&void 0!==arguments[0]?arguments[0]:255,1<arguments.length&&void 0!==arguments[1]?arguments[1]:255),this},v.default.prototype.noErase=function(){return this._renderer.noErase(),this};var C=v.default;H.default=C},{"../core/constants":272,"../core/main":283,"./p5.Color":270,"core-js/modules/es.array.fill":156,"core-js/modules/es.array.iterator":165,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.to-string":190,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246}],272:[function(l,de,H){"use strict";Object.defineProperty(H,"__esModule",{value:!0}),H.QUADRATIC=H.LINEAR=H._CTX_MIDDLE=H._DEFAULT_LEADMULT=H._DEFAULT_TEXT_FILL=H.WORD=H.CHAR=H.BOLDITALIC=H.BOLD=H.ITALIC=H.NORMAL=H.BLUR=H.ERODE=H.DILATE=H.POSTERIZE=H.INVERT=H.OPAQUE=H.GRAY=H.THRESHOLD=H.BURN=H.DODGE=H.SOFT_LIGHT=H.HARD_LIGHT=H.OVERLAY=H.REPLACE=H.SCREEN=H.MULTIPLY=H.EXCLUSION=H.SUBTRACT=H.DIFFERENCE=H.LIGHTEST=H.DARKEST=H.ADD=H.REMOVE=H.BLEND=H.UP_ARROW=H.TAB=H.SHIFT=H.RIGHT_ARROW=H.RETURN=H.OPTION=H.LEFT_ARROW=H.ESCAPE=H.ENTER=H.DOWN_ARROW=H.DELETE=H.CONTROL=H.BACKSPACE=H.ALT=H.AUTO=H.HSL=H.HSB=H.RGB=H.MITER=H.BEVEL=H.ROUND=H.SQUARE=H.PROJECT=H.PIE=H.CHORD=H.OPEN=H.CLOSE=H.TESS=H.QUAD_STRIP=H.QUADS=H.TRIANGLE_STRIP=H.TRIANGLE_FAN=H.TRIANGLES=H.LINE_LOOP=H.LINE_STRIP=H.LINES=H.POINTS=H.BASELINE=H.BOTTOM=H.TOP=H.CENTER=H.LEFT=H.RIGHT=H.RADIUS=H.CORNERS=H.CORNER=H.RAD_TO_DEG=H.DEG_TO_RAD=H.RADIANS=H.DEGREES=H.TWO_PI=H.TAU=H.QUARTER_PI=H.PI=H.HALF_PI=H.WAIT=H.TEXT=H.MOVE=H.HAND=H.CROSS=H.ARROW=H.WEBGL2=H.WEBGL=H.P2D=H.VERSION=void 0,H.RGBA=H.HALF_FLOAT=H.FLOAT=H.UNSIGNED_INT=H.UNSIGNED_BYTE=H.COVER=H.CONTAIN=H.FALLBACK=H.LABEL=H.AXES=H.GRID=H._DEFAULT_FILL=H._DEFAULT_STROKE=H.PORTRAIT=H.LANDSCAPE=H.SMOOTH=H.FLAT=H.MIRROR=H.CLAMP=H.REPEAT=H.NEAREST=H.IMAGE=H.IMMEDIATE=H.TEXTURE=H.FILL=H.STROKE=H.CURVE=H.BEZIER=void 0;var M=Math.PI,E=(H.VERSION="1.11.11",H.P2D="p2d",H.WEBGL="webgl",H.WEBGL2="webgl2",H.ARROW="default",H.CROSS="crosshair",H.HAND="pointer",H.MOVE="move",H.TEXT="text",H.WAIT="wait",M/2);H.HALF_PI=E,H.PI=E=M,H.QUARTER_PI=E=M/4,H.TAU=E=2*M,H.TWO_PI=E=2*M,H.DEGREES="degrees",H.RADIANS="radians",H.DEG_TO_RAD=E=M/180,H.RAD_TO_DEG=E=180/M,H.CORNER="corner",H.CORNERS="corners",H.RADIUS="radius",H.RIGHT="right",H.LEFT="left",H.CENTER="center",H.TOP="top",H.BOTTOM="bottom",H.BASELINE="alphabetic",H.POINTS=0,H.LINES=1,H.LINE_STRIP=3,H.LINE_LOOP=2,H.TRIANGLES=4,H.TRIANGLE_FAN=6,H.TRIANGLE_STRIP=5,H.QUADS="quads",H.QUAD_STRIP="quad_strip",H.TESS="tess",H.CLOSE="close",H.OPEN="open",H.CHORD="chord",H.PIE="pie",H.PROJECT="square",H.SQUARE="butt",H.ROUND="round",H.BEVEL="bevel",H.MITER="miter",H.RGB="rgb",H.HSB="hsb",H.HSL="hsl",H.AUTO="auto",H.ALT=18,H.BACKSPACE=8,H.CONTROL=17,H.DELETE=46,H.DOWN_ARROW=40,H.ENTER=13,H.ESCAPE=27,H.LEFT_ARROW=37,H.OPTION=18,H.RETURN=13,H.RIGHT_ARROW=39,H.SHIFT=16,H.TAB=9,H.UP_ARROW=38,H.BLEND="source-over",H.REMOVE="destination-out",H.ADD="lighter",H.DARKEST="darken",H.LIGHTEST="lighten",H.DIFFERENCE="difference",H.SUBTRACT="subtract",H.EXCLUSION="exclusion",H.MULTIPLY="multiply",H.SCREEN="screen",H.REPLACE="copy",H.OVERLAY="overlay",H.HARD_LIGHT="hard-light",H.SOFT_LIGHT="soft-light",H.DODGE="color-dodge",H.BURN="color-burn",H.THRESHOLD="threshold",H.GRAY="gray",H.OPAQUE="opaque",H.INVERT="invert",H.POSTERIZE="posterize",H.DILATE="dilate",H.ERODE="erode",H.BLUR="blur",H.NORMAL="normal",H.ITALIC="italic",H.BOLD="bold",H.BOLDITALIC="bold italic",H.CHAR="CHAR",H.WORD="WORD",H._DEFAULT_TEXT_FILL="#000000",H._DEFAULT_LEADMULT=1.25,H._CTX_MIDDLE="middle",H.LINEAR="linear",H.QUADRATIC="quadratic",H.BEZIER="bezier",H.CURVE="curve",H.STROKE="stroke",H.FILL="fill",H.TEXTURE="texture",H.IMMEDIATE="immediate",H.IMAGE="image",H.NEAREST="nearest",H.REPEAT="repeat",H.CLAMP="clamp",H.MIRROR="mirror",H.FLAT="flat",H.SMOOTH="smooth",H.LANDSCAPE="landscape",H.PORTRAIT="portrait",H._DEFAULT_STROKE="#000000",H._DEFAULT_FILL="#FFFFFF",H.GRID="grid",H.AXES="axes",H.LABEL="label",H.FALLBACK="fallback",H.CONTAIN="contain",H.COVER="cover",H.UNSIGNED_BYTE="unsigned-byte",H.UNSIGNED_INT="unsigned-int",H.FLOAT="float",H.HALF_FLOAT="half-float",H.RGBA="rgba"},{}],273:[function(l,de,H){"use strict";function M(p){return(M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(h){return typeof h}:function(h){return h&&"function"==typeof Symbol&&h.constructor===Symbol&&h!==Symbol.prototype?"symbol":typeof h})(p)}function E(p){return(E="function"==typeof Symbol&&"symbol"===M(Symbol.iterator)?function(h){return M(h)}:function(h){return h&&"function"==typeof Symbol&&h.constructor===Symbol&&h!==Symbol.prototype?"symbol":M(h)})(p)}l("core-js/modules/es.symbol"),l("core-js/modules/es.symbol.description"),l("core-js/modules/es.symbol.iterator"),l("core-js/modules/es.array.concat"),l("core-js/modules/es.array.filter"),l("core-js/modules/es.array.includes"),l("core-js/modules/es.array.iterator"),l("core-js/modules/es.object.get-own-property-descriptor"),l("core-js/modules/es.object.to-string"),l("core-js/modules/es.regexp.exec"),l("core-js/modules/es.string.includes"),l("core-js/modules/es.string.iterator"),l("core-js/modules/es.string.search"),l("core-js/modules/es.string.split"),l("core-js/modules/es.weak-map"),l("core-js/modules/web.dom-collections.iterator"),l("core-js/modules/es.array.concat"),l("core-js/modules/es.array.filter"),l("core-js/modules/es.array.includes"),l("core-js/modules/es.regexp.exec"),l("core-js/modules/es.string.includes"),l("core-js/modules/es.string.search"),l("core-js/modules/es.string.split"),Object.defineProperty(H,"__esModule",{value:!0}),H.default=void 0;var v=(S=l("./main"))&&S.__esModule?S:{default:S},S=function(p){if(p&&p.__esModule)return p;if(null===p||"object"!==E(p)&&"function"!=typeof p)return{default:p};var h=T();if(h&&h.has(p))return h.get(p);var y,b={},x=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(y in p){var D;Object.prototype.hasOwnProperty.call(p,y)&&((D=x?Object.getOwnPropertyDescriptor(p,y):null)&&(D.get||D.set)?Object.defineProperty(b,y,D):b[y]=p[y])}return b.default=p,h&&h.set(p,b),b}(l("./constants"));function T(){var p;return"function"!=typeof WeakMap?null:(T=function(){return p},p=new WeakMap)}var C=[S.ARROW,S.CROSS,S.HAND,S.MOVE,S.TEXT,S.WAIT],f=(v.default.prototype._frameRate=0,v.default.prototype._lastFrameTime=window.performance.now(),v.default.prototype._targetFrameRate=60,window.print),g=!1;function d(){return window.innerWidth||document.documentElement&&document.documentElement.clientWidth||document.body&&document.body.clientWidth||0}function m(){return window.innerHeight||document.documentElement&&document.documentElement.clientHeight||document.body&&document.body.clientHeight||0}v.default.prototype.print=function(){var p;arguments.length?(p=console).log.apply(p,arguments):g||(f(),window.confirm("You just tried to print the webpage. Do you want to prevent this from running again?")&&(g=!0))},v.default.prototype.frameCount=0,v.default.prototype.deltaTime=0,v.default.prototype.focused=document.hasFocus(),v.default.prototype.cursor=function(p,h,y){var b,x="auto",D=this._curElement.elt;C.includes(p)?x=p:"string"==typeof p&&(b="",h&&y&&"number"==typeof h&&"number"==typeof y&&(b="".concat(h," ").concat(y)),x="http://"===p.substring(0,7)||"https://"===p.substring(0,8)||/\.(cur|jpg|jpeg|gif|png|CUR|JPG|JPEG|GIF|PNG)$/.test(p)?"url(".concat(p,") ").concat(b,", auto"):p),D.style.cursor=x},v.default.prototype.frameRate=function(p){return v.default._validateParameters("frameRate",arguments),"number"!=typeof p||p<0?this._frameRate:(this._setProperty("_targetFrameRate",p),0===p&&this._setProperty("_frameRate",p),this)},v.default.prototype.getFrameRate=function(){return this.frameRate()},v.default.prototype.setFrameRate=function(p){return this.frameRate(p)},v.default.prototype.getTargetFrameRate=function(){return this._targetFrameRate},v.default.prototype.noCursor=function(){this._curElement.elt.style.cursor="none"},v.default.prototype.webglVersion=S.P2D,v.default.prototype.displayWidth=screen.width,v.default.prototype.displayHeight=screen.height,v.default.prototype.windowWidth=0,v.default.prototype.windowHeight=0,v.default.prototype._onresize=function(p){this._setProperty("windowWidth",d()),this._setProperty("windowHeight",m());var h=this._isGlobal?window:this;"function"!=typeof h.windowResized||void 0===(h=h.windowResized(p))||h||p.preventDefault()},v.default.prototype._updateWindowSize=function(){this._setProperty("windowWidth",d()),this._setProperty("windowHeight",m())},v.default.prototype.width=0,v.default.prototype.height=0,v.default.prototype.fullscreen=function(p){if(v.default._validateParameters("fullscreen",arguments),void 0===p)return document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement;if(p){if(p=document.documentElement,!(document.fullscreenEnabled||document.webkitFullscreenEnabled||document.mozFullScreenEnabled||document.msFullscreenEnabled))throw new Error("Fullscreen not enabled in this browser.");p.requestFullscreen?p.requestFullscreen():p.mozRequestFullScreen?p.mozRequestFullScreen():p.webkitRequestFullscreen?p.webkitRequestFullscreen():p.msRequestFullscreen&&p.msRequestFullscreen()}else document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.msExitFullscreen&&document.msExitFullscreen()},v.default.prototype.pixelDensity=function(p){var h;return v.default._validateParameters("pixelDensity",arguments),"number"==typeof p?(p!==this._pixelDensity&&(this._pixelDensity=this._maxAllowedPixelDimensions=p),(h=this).resizeCanvas(this.width,this.height,!0)):h=this._pixelDensity,h},v.default.prototype.displayDensity=function(){return window.devicePixelRatio},v.default.prototype.getURL=function(){return location.href},v.default.prototype.getURLPath=function(){return location.pathname.split("/").filter(function(p){return""!==p})},v.default.prototype.getURLParams=function(){for(var p,h=/[?&]([^&=]+)(?:[&=])([^&=]+)/gim,y={};null!=(p=h.exec(location.search));)p.index===h.lastIndex&&h.lastIndex++,y[p[1]]=p[2];return y},H.default=l=v.default},{"./constants":272,"./main":283,"core-js/modules/es.array.concat":153,"core-js/modules/es.array.filter":157,"core-js/modules/es.array.includes":163,"core-js/modules/es.array.iterator":165,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.to-string":190,"core-js/modules/es.regexp.exec":195,"core-js/modules/es.string.includes":199,"core-js/modules/es.string.iterator":200,"core-js/modules/es.string.search":205,"core-js/modules/es.string.split":206,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246}],274:[function(l,de,H){"use strict";l("core-js/modules/es.symbol"),l("core-js/modules/es.symbol.description"),l("core-js/modules/es.symbol.iterator"),l("core-js/modules/es.array.concat"),l("core-js/modules/es.array.filter"),l("core-js/modules/es.array.for-each"),l("core-js/modules/es.array.includes"),l("core-js/modules/es.array.iterator"),l("core-js/modules/es.array.join"),l("core-js/modules/es.array.map"),l("core-js/modules/es.array.slice"),l("core-js/modules/es.array.some"),l("core-js/modules/es.function.name"),l("core-js/modules/es.object.assign"),l("core-js/modules/es.object.get-own-property-names"),l("core-js/modules/es.object.keys"),l("core-js/modules/es.object.to-string"),l("core-js/modules/es.regexp.constructor"),l("core-js/modules/es.regexp.exec"),l("core-js/modules/es.regexp.to-string"),l("core-js/modules/es.string.iterator"),l("core-js/modules/es.string.match"),l("core-js/modules/es.string.replace"),l("core-js/modules/es.string.split"),l("core-js/modules/es.string.starts-with"),l("core-js/modules/web.dom-collections.for-each"),l("core-js/modules/web.dom-collections.iterator"),l("core-js/modules/es.symbol"),l("core-js/modules/es.symbol.description"),l("core-js/modules/es.symbol.iterator"),l("core-js/modules/es.array.concat"),l("core-js/modules/es.array.filter"),l("core-js/modules/es.array.for-each"),l("core-js/modules/es.array.includes"),l("core-js/modules/es.array.iterator"),l("core-js/modules/es.array.join"),l("core-js/modules/es.array.map"),l("core-js/modules/es.array.slice"),l("core-js/modules/es.array.some"),l("core-js/modules/es.function.name"),l("core-js/modules/es.object.assign"),l("core-js/modules/es.object.get-own-property-names"),l("core-js/modules/es.object.keys"),l("core-js/modules/es.object.to-string"),l("core-js/modules/es.regexp.constructor"),l("core-js/modules/es.regexp.exec"),l("core-js/modules/es.regexp.to-string"),l("core-js/modules/es.string.iterator"),l("core-js/modules/es.string.match"),l("core-js/modules/es.string.replace"),l("core-js/modules/es.string.split"),l("core-js/modules/es.string.starts-with"),l("core-js/modules/web.dom-collections.for-each"),l("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(H,"__esModule",{value:!0}),H.default=void 0;var M=(C=l("../main"))&&C.__esModule?C:{default:C};function E(f,g){g=g||console.log.bind(console),v||T(),v.some(function(d){var m;if(f.message&&null!==f.message.match("\\W?".concat(d.name,"\\W")))return m="function"===d.type?"".concat(d.name,"()"):d.name,g("Did you just try to use p5.js's ".concat(m," ").concat(d.type,"? If so, you may want to move it into your sketch's setup() function.\n\nFor more details, see: ").concat(S)),!0})}l("../internationalization");var v=null,T=null,S=(M.default._friendlyError=M.default._checkForUserDefinedFunctions=M.default._fesErrorMonitor=function(){},v=null,"https://github.com/processing/p5.js/wiki/p5.js-overview#why-cant-i-assign-variables-using-p5-functions-and-variables-before-setup"),C=(T=function(){function f(d){return Object.getOwnPropertyNames(d).filter(function(m){return"_"!==m[0]&&!(m in g)&&(g[m]=!0)}).map(function(m){var p="function"==typeof d[m]?"function":m===m.toUpperCase()?"constant":"variable";return{name:m,type:p}})}var g={};(v=[].concat(f(M.default.prototype),f(l("../constants")))).sort(function(d,m){return m.name.length-d.name.length})},M.default.prototype._helpForMisusedAtTopLevelCode=E,"complete"!==document.readyState&&(window.addEventListener("error",E,!1),window.addEventListener("load",function(){window.removeEventListener("error",E,!1)})),M.default);H.default=C},{"../constants":272,"../internationalization":281,"../main":283,"./browser_errors":void 0,"core-js/modules/es.array.concat":153,"core-js/modules/es.array.filter":157,"core-js/modules/es.array.for-each":161,"core-js/modules/es.array.includes":163,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.join":166,"core-js/modules/es.array.map":168,"core-js/modules/es.array.slice":169,"core-js/modules/es.array.some":170,"core-js/modules/es.function.name":174,"core-js/modules/es.object.assign":183,"core-js/modules/es.object.get-own-property-names":187,"core-js/modules/es.object.keys":189,"core-js/modules/es.object.to-string":190,"core-js/modules/es.regexp.constructor":194,"core-js/modules/es.regexp.exec":195,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.string.iterator":200,"core-js/modules/es.string.match":201,"core-js/modules/es.string.replace":204,"core-js/modules/es.string.split":206,"core-js/modules/es.string.starts-with":207,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/web.dom-collections.for-each":245,"core-js/modules/web.dom-collections.iterator":246}],275:[function(l,de,H){"use strict";Object.defineProperty(H,"__esModule",{value:!0}),H.default=void 0;var M=(M=l("../main"))&&M.__esModule?M:{default:M};l("../internationalization"),M.default._friendlyFileLoadError=function(){},H.default=l=M.default},{"../internationalization":281,"../main":283}],276:[function(l,de,H){"use strict";function M(P){return(M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(K){return typeof K}:function(K){return K&&"function"==typeof Symbol&&K.constructor===Symbol&&K!==Symbol.prototype?"symbol":typeof K})(P)}function E(P){return(E="function"==typeof Symbol&&"symbol"===M(Symbol.iterator)?function(K){return M(K)}:function(K){return K&&"function"==typeof Symbol&&K.constructor===Symbol&&K!==Symbol.prototype?"symbol":M(K)})(P)}l("core-js/modules/es.symbol"),l("core-js/modules/es.symbol.description"),l("core-js/modules/es.symbol.iterator"),l("core-js/modules/es.array.filter"),l("core-js/modules/es.array.for-each"),l("core-js/modules/es.array.from"),l("core-js/modules/es.array.includes"),l("core-js/modules/es.array.index-of"),l("core-js/modules/es.array.iterator"),l("core-js/modules/es.array.join"),l("core-js/modules/es.array.map"),l("core-js/modules/es.array.slice"),l("core-js/modules/es.object.get-own-property-descriptor"),l("core-js/modules/es.object.keys"),l("core-js/modules/es.object.to-string"),l("core-js/modules/es.regexp.constructor"),l("core-js/modules/es.regexp.exec"),l("core-js/modules/es.regexp.to-string"),l("core-js/modules/es.string.includes"),l("core-js/modules/es.string.iterator"),l("core-js/modules/es.string.match"),l("core-js/modules/es.string.split"),l("core-js/modules/es.string.trim"),l("core-js/modules/es.weak-map"),l("core-js/modules/web.dom-collections.for-each"),l("core-js/modules/web.dom-collections.iterator"),l("core-js/modules/es.array.filter"),l("core-js/modules/es.array.for-each"),l("core-js/modules/es.array.includes"),l("core-js/modules/es.array.index-of"),l("core-js/modules/es.array.join"),l("core-js/modules/es.array.map"),l("core-js/modules/es.array.slice"),l("core-js/modules/es.object.keys"),l("core-js/modules/es.regexp.constructor"),l("core-js/modules/es.regexp.exec"),l("core-js/modules/es.regexp.to-string"),l("core-js/modules/es.string.includes"),l("core-js/modules/es.string.match"),l("core-js/modules/es.string.split"),l("core-js/modules/es.string.trim"),l("core-js/modules/web.dom-collections.for-each"),Object.defineProperty(H,"__esModule",{value:!0}),H.default=void 0;var v=function ie(P){return P&&P.__esModule?P:{default:P}}(l("../main"));function W(){var P;return"function"!=typeof WeakMap?null:(W=function(){return P},P=new WeakMap)}l("../internationalization"),function oe(P){if(P&&P.__esModule)return P;if(null===P||"object"!==E(P)&&"function"!=typeof P)return{default:P};var K=W();if(K&&K.has(P))return K.get(P);var te,fe,ve={},Te=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(te in P)Object.prototype.hasOwnProperty.call(P,te)&&((fe=Te?Object.getOwnPropertyDescriptor(P,te):null)&&(fe.get||fe.set)?Object.defineProperty(ve,te,fe):ve[te]=P[te]);return ve.default=P,K&&K.set(P,ve),ve}(l("../constants")),v.default._fesCodeReader=function(){},H.default=v.default},{"../constants":272,"../internationalization":281,"../main":283,"core-js/modules/es.array.filter":157,"core-js/modules/es.array.for-each":161,"core-js/modules/es.array.from":162,"core-js/modules/es.array.includes":163,"core-js/modules/es.array.index-of":164,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.join":166,"core-js/modules/es.array.map":168,"core-js/modules/es.array.slice":169,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.keys":189,"core-js/modules/es.object.to-string":190,"core-js/modules/es.regexp.constructor":194,"core-js/modules/es.regexp.exec":195,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.string.includes":199,"core-js/modules/es.string.iterator":200,"core-js/modules/es.string.match":201,"core-js/modules/es.string.split":206,"core-js/modules/es.string.trim":209,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.for-each":245,"core-js/modules/web.dom-collections.iterator":246}],277:[function(l,de,H){"use strict";function M(){var E=/(^|@)\S+:\d+/,v=/^\s*at .*(\S+:\d+|\(native\))/m,S=/^(eval@)?(\[native code])?$/;return{parse:function(T){return void 0!==T.stacktrace||void 0!==T["opera#sourceloc"]?this.parseOpera(T):T.stack&&T.stack.match(v)?this.parseV8OrIE(T):T.stack?this.parseFFOrSafari(T):void 0},extractLocation:function(T){return-1===T.indexOf(":")?[T]:[(T=/(.+?)(?::(\d+))?(?::(\d+))?$/.exec(T.replace(/[()]/g,"")))[1],T[2]||void 0,T[3]||void 0]},parseV8OrIE:function(T){return T.stack.split("\n").filter(function(C){return!!C.match(v)},this).map(function(C){var g=(f=(C=-1<C.indexOf("(eval ")?C.replace(/eval code/g,"eval").replace(/(\(eval at [^()]*)|(\),.*$)/g,""):C).replace(/^\s+/,"").replace(/\(eval code/g,"(")).match(/ (\((.+):(\d+):(\d+)\)$)/),f=(f=g?f.replace(g[0],""):f).split(/\s+/).slice(1);return g=this.extractLocation(g?g[1]:f.pop()),{functionName:f.join(" ")||void 0,fileName:-1<["eval","<anonymous>"].indexOf(g[0])?void 0:g[0],lineNumber:g[1],columnNumber:g[2],source:C}},this)},parseFFOrSafari:function(T){return T.stack.split("\n").filter(function(C){return!C.match(S)},this).map(function(C){var f,g;return-1===(C=-1<C.indexOf(" > eval")?C.replace(/ line (\d+)(?: > eval line \d+)* > eval:\d+:\d+/g,":$1"):C).indexOf("@")&&-1===C.indexOf(":")?{functionName:C}:{functionName:(g=C.match(f=/((.*".+"[^@]*)?[^@]*)(?:@)/))&&g[1]?g[1]:void 0,fileName:(g=this.extractLocation(C.replace(f,"")))[0],lineNumber:g[1],columnNumber:g[2],source:C}},this)},parseOpera:function(T){return!T.stacktrace||-1<T.message.indexOf("\n")&&T.message.split("\n").length>T.stacktrace.split("\n").length?this.parseOpera9(T):T.stack?this.parseOpera11(T):this.parseOpera10(T)},parseOpera9:function(T){for(var C=/Line (\d+).*script (?:in )?(\S+)/i,f=T.message.split("\n"),g=[],d=2,m=f.length;d<m;d+=2){var p=C.exec(f[d]);p&&g.push({fileName:p[2],lineNumber:p[1],source:f[d]})}return g},parseOpera10:function(T){for(var C=/Line (\d+).*script (?:in )?(\S+)(?:: In function (\S+))?$/i,f=T.stacktrace.split("\n"),g=[],d=0,m=f.length;d<m;d+=2){var p=C.exec(f[d]);p&&g.push({functionName:p[3]||void 0,fileName:p[2],lineNumber:p[1],source:f[d]})}return g},parseOpera11:function(T){return T.stack.split("\n").filter(function(C){return!!C.match(E)&&!C.match(/^Error created at/)},this).map(function(C){var f,d=C.split("@"),g=this.extractLocation(d.pop());return{functionName:(d=d.shift()||"").replace(/<anonymous function(: (\w+))?>/,"$2").replace(/\([^)]*\)/g,"")||void 0,args:void 0===(f=d.match(/\(([^)]*)\)/)?d.replace(/^[^(]+\(([^)]*)\)$/,"$1"):f)||"[arguments not available]"===f?void 0:f.split(","),fileName:g[0],lineNumber:g[1],columnNumber:g[2],source:C}},this)}}}l("core-js/modules/es.array.filter"),l("core-js/modules/es.array.index-of"),l("core-js/modules/es.array.join"),l("core-js/modules/es.array.map"),l("core-js/modules/es.array.slice"),l("core-js/modules/es.regexp.exec"),l("core-js/modules/es.string.match"),l("core-js/modules/es.string.replace"),l("core-js/modules/es.string.split"),l("core-js/modules/es.array.filter"),l("core-js/modules/es.array.index-of"),l("core-js/modules/es.array.join"),l("core-js/modules/es.array.map"),l("core-js/modules/es.array.slice"),l("core-js/modules/es.regexp.exec"),l("core-js/modules/es.string.match"),l("core-js/modules/es.string.replace"),l("core-js/modules/es.string.split"),Object.defineProperty(H,"__esModule",{value:!0}),H.default=void 0,(l=(l=l("../main"))&&l.__esModule?l:{default:l}).default._getErrorStackParser=function(){return new M},H.default=l=l.default},{"../main":283,"core-js/modules/es.array.filter":157,"core-js/modules/es.array.index-of":164,"core-js/modules/es.array.join":166,"core-js/modules/es.array.map":168,"core-js/modules/es.array.slice":169,"core-js/modules/es.regexp.exec":195,"core-js/modules/es.string.match":201,"core-js/modules/es.string.replace":204,"core-js/modules/es.string.split":206}],278:[function(l,de,H){"use strict";function M(T){return(M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(C){return typeof C}:function(C){return C&&"function"==typeof Symbol&&C.constructor===Symbol&&C!==Symbol.prototype?"symbol":typeof C})(T)}l("core-js/modules/es.symbol"),l("core-js/modules/es.symbol.description"),l("core-js/modules/es.symbol.iterator"),l("core-js/modules/es.array.concat"),l("core-js/modules/es.array.for-each"),l("core-js/modules/es.array.includes"),l("core-js/modules/es.array.index-of"),l("core-js/modules/es.array.iterator"),l("core-js/modules/es.array.join"),l("core-js/modules/es.array.last-index-of"),l("core-js/modules/es.array.map"),l("core-js/modules/es.array.slice"),l("core-js/modules/es.function.name"),l("core-js/modules/es.map"),l("core-js/modules/es.number.constructor"),l("core-js/modules/es.object.get-own-property-descriptor"),l("core-js/modules/es.object.get-prototype-of"),l("core-js/modules/es.object.keys"),l("core-js/modules/es.object.to-string"),l("core-js/modules/es.reflect.construct"),l("core-js/modules/es.regexp.exec"),l("core-js/modules/es.regexp.to-string"),l("core-js/modules/es.set"),l("core-js/modules/es.string.includes"),l("core-js/modules/es.string.iterator"),l("core-js/modules/es.string.split"),l("core-js/modules/es.weak-map"),l("core-js/modules/web.dom-collections.for-each"),l("core-js/modules/web.dom-collections.iterator"),l("core-js/modules/es.symbol"),l("core-js/modules/es.symbol.description"),l("core-js/modules/es.symbol.iterator"),l("core-js/modules/es.array.concat"),l("core-js/modules/es.array.for-each"),l("core-js/modules/es.array.includes"),l("core-js/modules/es.array.iterator"),l("core-js/modules/es.array.join"),l("core-js/modules/es.array.last-index-of"),l("core-js/modules/es.array.map"),l("core-js/modules/es.array.slice"),l("core-js/modules/es.function.name"),l("core-js/modules/es.number.constructor"),l("core-js/modules/es.object.keys"),l("core-js/modules/es.object.to-string"),l("core-js/modules/es.regexp.exec"),l("core-js/modules/es.regexp.to-string"),l("core-js/modules/es.set"),l("core-js/modules/es.string.includes"),l("core-js/modules/es.string.iterator"),l("core-js/modules/es.string.split"),l("core-js/modules/web.dom-collections.for-each"),l("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(H,"__esModule",{value:!0}),H.default=void 0;var E=(E=l("../main"))&&E.__esModule?E:{default:E};function v(){var T;return"function"!=typeof WeakMap?null:(v=function(){return T},T=new WeakMap)}function S(T){return(S="function"==typeof Symbol&&"symbol"===M(Symbol.iterator)?function(C){return M(C)}:function(C){return C&&"function"==typeof Symbol&&C.constructor===Symbol&&C!==Symbol.prototype?"symbol":M(C)})(T)}(function(T){if(!(T&&T.__esModule||null===T||"object"!==S(T)&&"function"!=typeof T)){var C=v();if(C&&C.has(T))return C.get(T);var f,g={},d=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(f in T){var m;Object.prototype.hasOwnProperty.call(T,f)&&((m=d?Object.getOwnPropertyDescriptor(T,f):null)&&(m.get||m.set)?Object.defineProperty(g,f,m):g[f]=T[f])}g.default=T,C&&C.set(T,g)}})(l("../constants")),l("../internationalization"),E.default._validateParameters=E.default._clearValidateParamsCache=function(){},H.default=l=E.default},{"../../../docs/parameterData.json":void 0,"../constants":272,"../internationalization":281,"../main":283,"core-js/modules/es.array.concat":153,"core-js/modules/es.array.for-each":161,"core-js/modules/es.array.includes":163,"core-js/modules/es.array.index-of":164,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.join":166,"core-js/modules/es.array.last-index-of":167,"core-js/modules/es.array.map":168,"core-js/modules/es.array.slice":169,"core-js/modules/es.function.name":174,"core-js/modules/es.map":175,"core-js/modules/es.number.constructor":179,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.get-prototype-of":188,"core-js/modules/es.object.keys":189,"core-js/modules/es.object.to-string":190,"core-js/modules/es.reflect.construct":192,"core-js/modules/es.regexp.exec":195,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.set":197,"core-js/modules/es.string.includes":199,"core-js/modules/es.string.iterator":200,"core-js/modules/es.string.split":206,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.for-each":245,"core-js/modules/web.dom-collections.iterator":246}],279:[function(l,de,H){"use strict";function M(T){return(M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(C){return typeof C}:function(C){return C&&"function"==typeof Symbol&&C.constructor===Symbol&&C!==Symbol.prototype?"symbol":typeof C})(T)}function E(T){return(E="function"==typeof Symbol&&"symbol"===M(Symbol.iterator)?function(C){return M(C)}:function(C){return C&&"function"==typeof Symbol&&C.constructor===Symbol&&C!==Symbol.prototype?"symbol":M(C)})(T)}l("core-js/modules/es.symbol"),l("core-js/modules/es.symbol.description"),l("core-js/modules/es.symbol.iterator"),l("core-js/modules/es.array.iterator"),l("core-js/modules/es.object.get-own-property-descriptor"),l("core-js/modules/es.object.to-string"),l("core-js/modules/es.string.iterator"),l("core-js/modules/es.weak-map"),l("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(H,"__esModule",{value:!0}),H.default=void 0;var v=function(T){if(T&&T.__esModule)return T;if(null===T||"object"!==E(T)&&"function"!=typeof T)return{default:T};var C=S();if(C&&C.has(T))return C.get(T);var f,g={},d=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(f in T){var m;Object.prototype.hasOwnProperty.call(T,f)&&((m=d?Object.getOwnPropertyDescriptor(T,f):null)&&(m.get||m.set)?Object.defineProperty(g,f,m):g[f]=T[f])}return g.default=T,C&&C.set(T,g),g}(l("./constants"));function S(){var T;return"function"!=typeof WeakMap?null:(S=function(){return T},T=new WeakMap)}H.default={modeAdjust:function(T,C,f,g,d){var m;return d===v.CORNER?m={x:T,y:C,w:Math.abs(f),h:Math.abs(g)}:d===v.CORNERS?m={x:Math.min(T,f),y:Math.min(C,g),w:Math.abs(f-T),h:Math.abs(g-C)}:d===v.RADIUS?m={x:T-(f=Math.abs(f)),y:C-(g=Math.abs(g)),w:2*f,h:2*g}:d===v.CENTER&&(m={x:T-.5*(f=Math.abs(f)),y:C-.5*(g=Math.abs(g)),w:f,h:g}),m}}},{"./constants":272,"core-js/modules/es.array.iterator":165,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.to-string":190,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246}],280:[function(l,de,H){"use strict";l("core-js/modules/es.array.iterator"),l("core-js/modules/es.object.to-string"),l("core-js/modules/es.promise"),l("core-js/modules/es.string.iterator"),l("core-js/modules/web.dom-collections.iterator"),l("core-js/modules/es.array.iterator"),l("core-js/modules/es.object.to-string"),l("core-js/modules/es.promise"),l("core-js/modules/es.string.iterator"),l("core-js/modules/web.dom-collections.iterator");var M=(E=l("../core/main"))&&E.__esModule?E:{default:E};l("./internationalization");var E=Promise.resolve();Promise.all([new Promise(function(v,S){"complete"===document.readyState?v():window.addEventListener("load",v,!1)}),E]).then(function(){var v;void 0!==window._setupDone?console.warn("p5.js seems to have been imported multiple times. Please remove the duplicate import"):window.mocha||(v=new Event("p5Ready"),window.dispatchEvent(v),(window.setup&&"function"==typeof window.setup||window.draw&&"function"==typeof window.draw)&&!M.default.instance&&new M.default)})},{"../core/main":283,"./internationalization":281,"core-js/modules/es.array.iterator":165,"core-js/modules/es.object.to-string":190,"core-js/modules/es.promise":191,"core-js/modules/es.string.iterator":200,"core-js/modules/web.dom-collections.iterator":246}],281:[function(l,de,H){"use strict";l("core-js/modules/es.array.includes"),l("core-js/modules/es.array.iterator"),l("core-js/modules/es.array.join"),l("core-js/modules/es.array.slice"),l("core-js/modules/es.object.keys"),l("core-js/modules/es.object.to-string"),l("core-js/modules/es.promise"),l("core-js/modules/es.regexp.exec"),l("core-js/modules/es.string.includes"),l("core-js/modules/es.string.iterator"),l("core-js/modules/es.string.replace"),l("core-js/modules/es.string.split"),l("core-js/modules/web.dom-collections.iterator"),l("core-js/modules/es.array.includes"),l("core-js/modules/es.array.iterator"),l("core-js/modules/es.array.join"),l("core-js/modules/es.array.slice"),l("core-js/modules/es.object.keys"),l("core-js/modules/es.object.to-string"),l("core-js/modules/es.promise"),l("core-js/modules/es.regexp.exec"),l("core-js/modules/es.string.includes"),l("core-js/modules/es.string.iterator"),l("core-js/modules/es.string.replace"),l("core-js/modules/es.string.split"),l("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(H,"__esModule",{value:!0}),H.setTranslatorLanguage=H.currentTranslatorLanguage=H.availableTranslatorLanguages=H.initialize=H.translator=void 0;var M,v=C(l("i18next")),S=C(l("i18next-browser-languagedetector")),T=l("./constants");function C(d){return d&&d.__esModule?d:{default:d}}function f(d,m){for(var p=0;p<m.length;p++){var h=m[p];h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(d,h.key,h)}}var g=function(){function d(y,b){if(!(this instanceof d))throw new TypeError("Cannot call a class as a function");this.init(y,b)}var m,p;return m=d,(p=[{key:"fetchWithTimeout",value:function(y,b){var x=2<arguments.length&&void 0!==arguments[2]?arguments[2]:2e3;return Promise.race([fetch(y,b),new Promise(function(D,N){return setTimeout(function(){return N(new Error("timeout"))},x)})])}},{key:"init",value:function(y){var b=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};this.services=y,this.options=b}},{key:"read",value:function(y,b,x){var D=this.options.loadPath;y===this.options.fallback?x(null,M[y][b]):undefined.includes(y)?(D=this.services.interpolator.interpolate(D,{lng:y,ns:b}),this.loadUrl(D,x)):x("Not found",!1)}},{key:"loadUrl",value:function(y,b){this.fetchWithTimeout(y).then(function(x){if(x.ok)return x.json();throw new Error("failed loading ".concat(y))},function(){throw new Error("failed loading ".concat(y))}).then(function(x){return b(null,x)}).catch(b)}}])&&f(m.prototype,p),d}();g.type="backend",H.translator=function(d,m){console.debug("p5.js translator called before translations were loaded"),v.default.t(d,m)},H.initialize=function(){return v.default.use(S.default).use(g).init({fallbackLng:"en",nestingPrefix:"$tr(",nestingSuffix:")",defaultNS:"translation",returnEmptyString:!1,interpolation:{escapeValue:!1},detection:{checkWhitelist:!1,order:["querystring","navigator","htmlTag","path","subdomain"],caches:[]},backend:{fallback:"en",loadPath:"https://cdn.jsdelivr.net/npm/p5@".concat(T.VERSION.replace(/^(\d+\.\d+)\.\d+.*$/,"$1"),"/translations/{{lng}}/{{ns}}.json")},partialBundledLanguages:!0,resources:M}).then(function(d){H.translator=d},function(d){return console.debug("Translations failed to load (".concat(d,")"))})},H.availableTranslatorLanguages=function(){return v.default.languages},H.currentTranslatorLanguage=function(d){return v.default.language},H.setTranslatorLanguage=function(d){return v.default.changeLanguage(d||void 0,function(m){return console.debug("Translations failed to load (".concat(m,")"))})}},{"../../translations":void 0,"../../translations/dev":void 0,"./constants":272,"core-js/modules/es.array.includes":163,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.join":166,"core-js/modules/es.array.slice":169,"core-js/modules/es.object.keys":189,"core-js/modules/es.object.to-string":190,"core-js/modules/es.promise":191,"core-js/modules/es.regexp.exec":195,"core-js/modules/es.string.includes":199,"core-js/modules/es.string.iterator":200,"core-js/modules/es.string.replace":204,"core-js/modules/es.string.split":206,"core-js/modules/web.dom-collections.iterator":246,i18next:3,"i18next-browser-languagedetector":3}],282:[function(l,de,H){"use strict";Object.defineProperty(H,"__esModule",{value:!0}),H.default=void 0,(l=(l=l("./main"))&&l.__esModule?l:{default:l}).default.prototype.pushStyle=function(){throw new Error("pushStyle() not used, see push()")},l.default.prototype.popStyle=function(){throw new Error("popStyle() not used, see pop()")},l.default.prototype.popMatrix=function(){throw new Error("popMatrix() not used, see pop()")},l.default.prototype.pushMatrix=function(){throw new Error("pushMatrix() not used, see push()")},H.default=l=l.default},{"./main":283}],283:[function(l,de,H){"use strict";function M(g){return(M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(d){return typeof d}:function(d){return d&&"function"==typeof Symbol&&d.constructor===Symbol&&d!==Symbol.prototype?"symbol":typeof d})(g)}function E(g){return(E="function"==typeof Symbol&&"symbol"===M(Symbol.iterator)?function(d){return M(d)}:function(d){return d&&"function"==typeof Symbol&&d.constructor===Symbol&&d!==Symbol.prototype?"symbol":M(d)})(g)}l("core-js/modules/es.symbol"),l("core-js/modules/es.symbol.description"),l("core-js/modules/es.symbol.iterator"),l("core-js/modules/es.array.for-each"),l("core-js/modules/es.array.iterator"),l("core-js/modules/es.array.slice"),l("core-js/modules/es.array.splice"),l("core-js/modules/es.object.get-own-property-descriptor"),l("core-js/modules/es.object.get-own-property-names"),l("core-js/modules/es.object.to-string"),l("core-js/modules/es.string.iterator"),l("core-js/modules/es.weak-map"),l("core-js/modules/web.dom-collections.for-each"),l("core-js/modules/web.dom-collections.iterator"),l("core-js/modules/es.symbol"),l("core-js/modules/es.symbol.description"),l("core-js/modules/es.symbol.iterator"),l("core-js/modules/es.array.for-each"),l("core-js/modules/es.array.iterator"),l("core-js/modules/es.array.slice"),l("core-js/modules/es.array.splice"),l("core-js/modules/es.object.get-own-property-names"),l("core-js/modules/es.object.to-string"),l("core-js/modules/es.string.iterator"),l("core-js/modules/web.dom-collections.for-each"),l("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(H,"__esModule",{value:!0}),H.default=void 0,l("./shim");var v=function(g){if(g&&g.__esModule)return g;if(null===g||"object"!==E(g)&&"function"!=typeof g)return{default:g};var d=S();if(d&&d.has(g))return d.get(g);var m,p={},h=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(m in g){var y;Object.prototype.hasOwnProperty.call(g,m)&&((y=h?Object.getOwnPropertyDescriptor(g,m):null)&&(y.get||y.set)?Object.defineProperty(p,m,y):p[m]=g[m])}return p.default=g,d&&d.set(g,p),p}(l("./constants"));function S(){var g;return"function"!=typeof WeakMap?null:(S=function(){return g},g=new WeakMap)}function T(g,d){for(var m=0;m<d.length;m++){var p=d[m];p.enumerable=p.enumerable||!1,p.configurable=!0,"value"in p&&(p.writable=!0),Object.defineProperty(g,p.key,p)}}var C,f=function(){function g(h,x){var b=this;if(!(this instanceof g))throw new TypeError("Cannot call a class as a function");this._isGlobal=!h,this._setupDone=!1,this._preloadDone=!1,this._pixelDensity=Math.ceil(window.devicePixelRatio)||1,this._maxAllowedPixelDimensions=0,this._userNode=x,this._curElement=null,this._elements=[],this._glAttributes=null,this._requestAnimId=0,this._preloadCount=0,this._loop=!0,this._startListener=null,this._initializeInstanceVariables(),this._defaultCanvasSize={width:100,height:100},this._events={mousemove:null,mousedown:null,mouseup:null,dragend:null,dragover:null,click:null,dblclick:null,mouseover:null,mouseout:null,keydown:null,keyup:null,keypress:null,touchstart:null,touchmove:null,touchend:null,resize:null,blur:null},this._millisStart=-1,this._recording=!1,this.touchstart=!1,this.touchend=!1,this._lcg_random_state=null,this._gaussian_previous=!1,this._events.wheel=null,this._loadingScreenId="p5_loading",this._registeredMethods={},x=Object.getOwnPropertyNames(g.prototype._registeredMethods);var D=!0,N=!1,U=void 0;try{for(var R,L=x[Symbol.iterator]();!(D=(R=L.next()).done);D=!0){var z=R.value;this._registeredMethods[z]=g.prototype._registeredMethods[z].slice()}}catch(re){N=!0,U=re}finally{try{D||null==L.return||L.return()}finally{if(N)throw U}}window.DeviceOrientationEvent&&(this._events.deviceorientation=null),window.DeviceMotionEvent&&!window._isNodeWebkit&&(this._events.devicemotion=null),g.prototype.callRegisteredHooksFor=function(re){var le=this||g.prototype,pe=this._isGlobal?window:this;if(le._registeredMethods.hasOwnProperty(re)){le=le._registeredMethods[re];var Ae=!0,$=void(re=!1);try{for(var P,K=le[Symbol.iterator]();!(Ae=(P=K.next()).done);Ae=!0){var te=P.value;"function"==typeof te&&te.call(pe)}}catch(Te){re=!0,$=Te}finally{try{Ae||null==K.return||K.return()}finally{if(re)throw $}}}},this._start=function(){b._userNode&&"string"==typeof b._userNode&&(b._userNode=document.getElementById(b._userNode));var re=b._isGlobal?window:b;if(re.preload){b.callRegisteredHooksFor("beforePreload");var le,pe=document.getElementById(b._loadingScreenId),Ae=(pe||((pe=document.createElement("div")).innerHTML="Loading...",pe.style.position="absolute",pe.id=b._loadingScreenId,(b._userNode||document.body).appendChild(pe)),b._preloadMethods);for(le in Ae){Ae[le]=Ae[le]||g;var $=Ae[le];$!==g.prototype&&$!==g||(b._isGlobal&&(window[le]=b._wrapPreload(b,le)),$=b),b._registeredPreloadMethods[le]=$[le],$[le]=b._wrapPreload($,le)}re.preload(),b._runIfPreloadsAreDone()}else b._setup(),b._recording||b._draw()},this._runIfPreloadsAreDone=function(){var re,le=this._isGlobal?window:this;0===le._preloadCount&&((re=document.getElementById(le._loadingScreenId))&&re.parentNode.removeChild(re),this.callRegisteredHooksFor("afterPreload"),this._setupDone||(this._lastTargetFrameTime=window.performance.now(),this._lastRealFrameTime=window.performance.now(),le._setup(),this._recording||le._draw()))},this._decrementPreload=function(){var re=this._isGlobal?window:this;re._preloadDone||"function"!=typeof re.preload||(re._setProperty("_preloadCount",re._preloadCount-1),re._runIfPreloadsAreDone())},this._wrapPreload=function(re,le){var pe=this;return function(){pe._incrementPreload();for(var Ae=arguments.length,$=new Array(Ae),P=0;P<Ae;P++)$[P]=arguments[P];return pe._registeredPreloadMethods[le].apply(re,$)}},this._incrementPreload=function(){var re=this._isGlobal?window:this;re._preloadDone||re._setProperty("_preloadCount",re._preloadCount+1)},this._setup=function(){b.callRegisteredHooksFor("beforeSetup"),b.createCanvas(b._defaultCanvasSize.width,b._defaultCanvasSize.height,"p2d");var re=b._isGlobal?window:b;if("function"==typeof re.preload)for(var le in b._preloadMethods)re[le]=b._preloadMethods[le][le],re[le]&&b&&(re[le]=re[le].bind(b));b._millisStart=window.performance.now(),re._preloadDone=!0,"function"==typeof re.setup&&re.setup();var pe=document.getElementsByTagName("canvas"),Ae=!0,$=!1,P=void 0;try{for(var K,te=pe[Symbol.iterator]();!(Ae=(K=te.next()).done);Ae=!0){var fe=K.value;"true"===fe.dataset.hidden&&(fe.style.visibility="",delete fe.dataset.hidden)}}catch(ve){$=!0,P=ve}finally{try{Ae||null==te.return||te.return()}finally{if($)throw P}}b._lastTargetFrameTime=window.performance.now(),b._lastRealFrameTime=window.performance.now(),b._setupDone=!0,(b._accessibleOutputs.grid||b._accessibleOutputs.text)&&b._updateAccsOutput(),b.callRegisteredHooksFor("afterSetup")},this._draw=function(le){le=le||window.performance.now();var Ae=1e3/b._targetFrameRate;(!b._loop||Ae-5<=le-b._lastTargetFrameTime)&&(b.deltaTime=le-b._lastRealFrameTime,b._setProperty("deltaTime",b.deltaTime),b._frameRate=1e3/b.deltaTime,b.redraw(),b._lastTargetFrameTime=Math.max(b._lastTargetFrameTime+Ae,le),b._lastRealFrameTime=le,void 0!==b._updateMouseCoords&&(b._updateMouseCoords(),b._setProperty("movedX",0),b._setProperty("movedY",0))),b._loop&&(b._requestAnimId=window.requestAnimationFrame(b._draw))},this._setProperty=function(re,le){b[re]=le,b._isGlobal&&(window[re]=le)},this.remove=function(){if(b._startListener&&window.removeEventListener("load",b._startListener,!1),(re=document.getElementById(b._loadingScreenId))&&(re.parentNode.removeChild(re),b._incrementPreload()),b._curElement){for(var le in b._loop=!1,b._requestAnimId&&window.cancelAnimationFrame(b._requestAnimId),b._events)window.removeEventListener(le,b._events[le]);var pe=!0,re=!1,Ae=void 0;try{for(var $,P=b._elements[Symbol.iterator]();!(pe=($=P.next()).done);pe=!0){var K,te=$.value;for(K in te.elt&&te.elt.parentNode&&te.elt.parentNode.removeChild(te.elt),te._events)te.elt.removeEventListener(K,te._events[K])}}catch(we){re=!0,Ae=we}finally{try{pe||null==P.return||P.return()}finally{if(re)throw Ae}}var fe=b;b._registeredMethods.remove.forEach(function(we){void 0!==we&&we.call(fe)})}if(b._isGlobal){for(var ve in g.prototype)try{delete window[ve]}catch{window[ve]=void 0}for(var Te in b)if(b.hasOwnProperty(Te))try{delete window[Te]}catch{window[Te]=void 0}g.instance=null}};var F,q,k=this._createFriendlyGlobalFunctionBinder();if(this._isGlobal){for(var Z in g.instance=this,g.prototype)"function"==typeof g.prototype[Z]?(F=Z.substring(2),this._events.hasOwnProperty(F)||(Math.hasOwnProperty(Z)&&Math[Z]===g.prototype[Z]?k(Z,g.prototype[Z]):k(Z,g.prototype[Z].bind(this)))):k(Z,g.prototype[Z]);for(var X in this)this.hasOwnProperty(X)&&k(X,this[X])}else h(this),g._checkForUserDefinedFunctions(this);for(q in this._updateWindowSize(),this.callRegisteredHooksFor("init"),this._setupPromisePreloads(),this._events){var W=this["_on".concat(q)];W&&(W=W.bind(this),window.addEventListener(q,W,{passive:!1}),this._events[q]=W)}function oe(){b._setProperty("focused",!0)}function ie(){b._setProperty("focused",!1)}window.addEventListener("focus",oe),window.addEventListener("blur",ie),this.registerMethod("remove",function(){window.removeEventListener("focus",oe),window.removeEventListener("blur",ie)}),"complete"===document.readyState?this._start():(this._startListener=this._start.bind(this),window.addEventListener("load",this._startListener,!1))}var d,m;return d=g,(m=[{key:"_initializeInstanceVariables",value:function(){this._accessibleOutputs={text:!1,grid:!1,textLabel:!1,gridLabel:!1},this._styles=[],this._bezierDetail=20,this._curveDetail=20,this._colorMode=v.RGB,this._colorMaxes={rgb:[255,255,255,255],hsb:[360,100,100,1],hsl:[360,100,100,1]},this._downKeys={}}},{key:"registerPreloadMethod",value:function(h,y){g.prototype._preloadMethods.hasOwnProperty(h)||(g.prototype._preloadMethods[h]=y)}},{key:"registerMethod",value:function(h,y){var b=this||g.prototype;b._registeredMethods.hasOwnProperty(h)||(b._registeredMethods[h]=[]),b._registeredMethods[h].push(y)}},{key:"unregisterMethod",value:function(h,y){var b=this||g.prototype;if(b._registeredMethods.hasOwnProperty(h)){for(var x=b._registeredMethods[h],D=[],N=0;N<x.length;N++)x[N]===y&&D.push(N);for(var U=D.length-1;0<=U;U--)x.splice(D[U],1)}}},{key:"_createFriendlyGlobalFunctionBinder",value:function(){var h=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},y=h.globalObject||window;return h.log||console.log.bind(console),function(b,x){y[b]=x}}}])&&T(d.prototype,m),g}();for(C in f.instance=null,f.disableFriendlyErrors=!1,v)f.prototype[C]=v[C];f.VERSION=v.VERSION,f.prototype._preloadMethods={loadJSON:f.prototype,loadImage:f.prototype,loadStrings:f.prototype,loadXML:f.prototype,loadBytes:f.prototype,loadTable:f.prototype,loadFont:f.prototype,loadModel:f.prototype,loadShader:f.prototype},f.prototype._registeredMethods={init:[],pre:[],post:[],remove:[]},f.prototype._registeredPreloadMethods={},H.default=f},{"./constants":272,"./shim":294,"core-js/modules/es.array.for-each":161,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.slice":169,"core-js/modules/es.array.splice":171,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.get-own-property-names":187,"core-js/modules/es.object.to-string":190,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.for-each":245,"core-js/modules/web.dom-collections.iterator":246}],284:[function(l,de,H){"use strict";Object.defineProperty(H,"__esModule",{value:!0}),H.default=void 0;var M=(l=l("./main"))&&l.__esModule?l:{default:l};function E(v,S){for(var T=0;T<S.length;T++){var C=S[T];C.enumerable=C.enumerable||!1,C.configurable=!0,"value"in C&&(C.writable=!0),Object.defineProperty(v,C.key,C)}}M.default.Element=function(){function v(f,g){if(!(this instanceof v))throw new TypeError("Cannot call a class as a function");this.elt=f,this._pInst=this._pixelsState=g,this._events={},this.width=this.elt.offsetWidth,this.height=this.elt.offsetHeight}var S,T,C;return S=v,C=[{key:"_adjustListener",value:function(f,g,d){return!1===g?M.default.Element._detachListener(f,d):M.default.Element._attachListener(f,g,d),this}},{key:"_attachListener",value:function(f,g,d){d._events[f]&&M.default.Element._detachListener(f,d),g=g.bind(d),d.elt.addEventListener(f,g,!1),d._events[f]=g}},{key:"_detachListener",value:function(f,g){g.elt.removeEventListener(f,g._events[f],!1),g._events[f]=null}}],(T=[{key:"parent",value:function(f){return void 0===f?this.elt.parentNode:("string"==typeof f?("#"===f[0]&&(f=f.substring(1)),f=document.getElementById(f)):f instanceof M.default.Element&&(f=f.elt),f.appendChild(this.elt),this)}},{key:"id",value:function(f){return void 0===f?this.elt.id:(this.elt.id=f,this.width=this.elt.offsetWidth,this.height=this.elt.offsetHeight,this)}},{key:"class",value:function(f){return void 0===f?this.elt.className:(this.elt.className=f,this)}},{key:"mousePressed",value:function(f){return M.default.Element._adjustListener("mousedown",function(g){return this._pInst._setProperty("mouseIsPressed",!0),this._pInst._setMouseButton(g),f.call(this,g)},this),this}},{key:"doubleClicked",value:function(f){return M.default.Element._adjustListener("dblclick",f,this),this}},{key:"mouseWheel",value:function(f){return M.default.Element._adjustListener("wheel",f,this),this}},{key:"mouseReleased",value:function(f){return M.default.Element._adjustListener("mouseup",f,this),this}},{key:"mouseClicked",value:function(f){return M.default.Element._adjustListener("click",f,this),this}},{key:"mouseMoved",value:function(f){return M.default.Element._adjustListener("mousemove",f,this),this}},{key:"mouseOver",value:function(f){return M.default.Element._adjustListener("mouseover",f,this),this}},{key:"mouseOut",value:function(f){return M.default.Element._adjustListener("mouseout",f,this),this}},{key:"touchStarted",value:function(f){return M.default.Element._adjustListener("touchstart",f,this),this}},{key:"touchMoved",value:function(f){return M.default.Element._adjustListener("touchmove",f,this),this}},{key:"touchEnded",value:function(f){return M.default.Element._adjustListener("touchend",f,this),this}},{key:"dragOver",value:function(f){return M.default.Element._adjustListener("dragover",f,this),this}},{key:"dragLeave",value:function(f){return M.default.Element._adjustListener("dragleave",f,this),this}},{key:"_setProperty",value:function(f,g){this[f]=g}}])&&E(S.prototype,T),C&&E(S,C),v}(),H.default=l=M.default.Element},{"./main":283}],285:[function(l,de,H){"use strict";function M(y){return(M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(b){return typeof b}:function(b){return b&&"function"==typeof Symbol&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":typeof b})(y)}function E(y){return(E="function"==typeof Symbol&&"symbol"===M(Symbol.iterator)?function(b){return M(b)}:function(b){return b&&"function"==typeof Symbol&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":M(b)})(y)}l("core-js/modules/es.symbol"),l("core-js/modules/es.symbol.description"),l("core-js/modules/es.symbol.iterator"),l("core-js/modules/es.array.index-of"),l("core-js/modules/es.array.iterator"),l("core-js/modules/es.array.splice"),l("core-js/modules/es.object.get-own-property-descriptor"),l("core-js/modules/es.object.get-prototype-of"),l("core-js/modules/es.object.to-string"),l("core-js/modules/es.reflect.construct"),l("core-js/modules/es.regexp.to-string"),l("core-js/modules/es.string.iterator"),l("core-js/modules/es.weak-map"),l("core-js/modules/web.dom-collections.iterator"),l("core-js/modules/es.array.index-of"),l("core-js/modules/es.array.splice"),l("core-js/modules/es.object.get-prototype-of"),Object.defineProperty(H,"__esModule",{value:!0}),H.default=void 0;var v=(h=l("./main"))&&h.__esModule?h:{default:h},S=function(y){if(y&&y.__esModule)return y;if(null===y||"object"!==E(y)&&"function"!=typeof y)return{default:y};var b=T();if(b&&b.has(y))return b.get(y);var x,D={},N=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(x in y){var U;Object.prototype.hasOwnProperty.call(y,x)&&((U=N?Object.getOwnPropertyDescriptor(y,x):null)&&(U.get||U.set)?Object.defineProperty(D,x,U):D[x]=y[x])}return D.default=y,b&&b.set(y,D),D}(l("./constants"));function T(){var y;return"function"!=typeof WeakMap?null:(T=function(){return y},y=new WeakMap)}function C(y,b){for(var x=0;x<b.length;x++){var D=b[x];D.enumerable=D.enumerable||!1,D.configurable=!0,"value"in D&&(D.writable=!0),Object.defineProperty(y,D.key,D)}}function f(y,b){return(f=Object.setPrototypeOf||function(x,D){return x.__proto__=D,x})(y,b)}function d(y,b){return!b||"object"!==E(b)&&"function"!=typeof b?m(y):b}function m(y){if(void 0===y)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return y}function p(y){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(b){return b.__proto__||Object.getPrototypeOf(b)})(y)}v.default.Graphics=function(y){var b=N;if("function"!=typeof y&&null!==y)throw new TypeError("Super expression must either be null or a function");b.prototype=Object.create(y&&y.prototype,{constructor:{value:b,writable:!0,configurable:!0}}),y&&f(b,y);var D=function g(y){return function(){var b,x=p(y);return d(this,function(){if(typeof Reflect<"u"&&Reflect.construct&&!Reflect.construct.sham){if("function"==typeof Proxy)return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch{}}}()?(b=p(this).constructor,Reflect.construct(x,arguments,b)):x.apply(this,arguments))}}(N);function N(U,R,X,z,F){var q;if(!(this instanceof N))throw new TypeError("Cannot call a class as a function");Z=F||document.createElement("canvas"),(q=D.call(this,Z,z)).canvas=Z;var k,Z=X||S.P2D;for(k in X=z._userNode||document.body,F||X.appendChild(q.canvas),v.default.prototype)q[k]||(q[k]="function"==typeof v.default.prototype[k]?v.default.prototype[k].bind(m(q)):v.default.prototype[k]);return v.default.prototype._initializeInstanceVariables.apply(m(q)),q.width=U,q.height=R,q._pixelDensity=z._pixelDensity,Z===S.WEBGL?(q._renderer=new v.default.RendererGL(q.canvas,m(q),!1),U=(F=q._renderer._adjustDimensions(U,R)).adjustedWidth,R=F.adjustedHeight):q._renderer=new v.default.Renderer2D(q.canvas,m(q),!1),z._elements.push(m(q)),Object.defineProperty(m(q),"deltaTime",{get:function(){return this._pInst.deltaTime}}),q._renderer.resize(U,R),q._renderer._applyDefaults(),d(q,m(q))}return b=N,(y=[{key:"reset",value:function(){this._renderer.resetMatrix(),this._renderer.isP3D&&this._renderer._update()}},{key:"remove",value:function(){this.elt.parentNode&&this.elt.parentNode.removeChild(this.elt);var U,R=this._pInst._elements.indexOf(this);for(U in-1!==R&&this._pInst._elements.splice(R,1),this._events)this.elt.removeEventListener(U,this._events[U]);this._renderer=void 0,this.canvas=void 0,this.elt=void 0}},{key:"createFramebuffer",value:function(U){return new v.default.Framebuffer(this,U)}}])&&C(b.prototype,y),N}(v.default.Element);var h=v.default.Graphics;H.default=h},{"./constants":272,"./main":283,"core-js/modules/es.array.index-of":164,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.splice":171,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.get-prototype-of":188,"core-js/modules/es.object.to-string":190,"core-js/modules/es.reflect.construct":192,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246}],286:[function(l,de,H){"use strict";function M(y){return(M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(b){return typeof b}:function(b){return b&&"function"==typeof Symbol&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":typeof b})(y)}l("core-js/modules/es.symbol"),l("core-js/modules/es.symbol.description"),l("core-js/modules/es.symbol.iterator"),l("core-js/modules/es.array.iterator"),l("core-js/modules/es.number.constructor"),l("core-js/modules/es.object.assign"),l("core-js/modules/es.object.get-own-property-descriptor"),l("core-js/modules/es.object.get-prototype-of"),l("core-js/modules/es.object.to-string"),l("core-js/modules/es.reflect.construct"),l("core-js/modules/es.regexp.exec"),l("core-js/modules/es.regexp.to-string"),l("core-js/modules/es.string.iterator"),l("core-js/modules/es.string.replace"),l("core-js/modules/es.string.split"),l("core-js/modules/es.string.trim"),l("core-js/modules/es.weak-map"),l("core-js/modules/web.dom-collections.iterator"),l("core-js/modules/es.number.constructor"),l("core-js/modules/es.object.assign"),l("core-js/modules/es.object.get-prototype-of"),l("core-js/modules/es.object.to-string"),l("core-js/modules/es.regexp.exec"),l("core-js/modules/es.regexp.to-string"),l("core-js/modules/es.string.replace"),l("core-js/modules/es.string.split"),l("core-js/modules/es.string.trim"),Object.defineProperty(H,"__esModule",{value:!0}),H.default=void 0;var E=(p=l("./main"))&&p.__esModule?p:{default:p},v=function(y){if(y&&y.__esModule)return y;if(null===y||"object"!==T(y)&&"function"!=typeof y)return{default:y};var b=S();if(b&&b.has(y))return b.get(y);var x,D={},N=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(x in y){var U;Object.prototype.hasOwnProperty.call(y,x)&&((U=N?Object.getOwnPropertyDescriptor(y,x):null)&&(U.get||U.set)?Object.defineProperty(D,x,U):D[x]=y[x])}return D.default=y,b&&b.set(y,D),D}(l("../core/constants"));function S(){var y;return"function"!=typeof WeakMap?null:(S=function(){return y},y=new WeakMap)}function T(y){return(T="function"==typeof Symbol&&"symbol"===M(Symbol.iterator)?function(b){return M(b)}:function(b){return b&&"function"==typeof Symbol&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":M(b)})(y)}function C(y,b){for(var x=0;x<b.length;x++){var D=b[x];D.enumerable=D.enumerable||!1,D.configurable=!0,"value"in D&&(D.writable=!0),Object.defineProperty(y,D.key,D)}}function f(y,b){return(f=Object.setPrototypeOf||function(x,D){return x.__proto__=D,x})(y,b)}function d(y){if(void 0===y)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return y}function m(y){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(b){return b.__proto__||Object.getPrototypeOf(b)})(y)}var p=function(y){var b=N;if("function"!=typeof y&&null!==y)throw new TypeError("Super expression must either be null or a function");b.prototype=Object.create(y&&y.prototype,{constructor:{value:b,writable:!0,configurable:!0}}),y&&f(b,y);var D=function g(y){return function(){var b,x,D=m(y);return b=function(){if(typeof Reflect<"u"&&Reflect.construct&&!Reflect.construct.sham){if("function"==typeof Proxy)return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch{}}}()?(b=m(this).constructor,Reflect.construct(D,arguments,b)):D.apply(this,arguments),D=this,!(x=b)||"object"!==T(x)&&"function"!=typeof x?d(D):x}}(N);function N(U,R,L){var z;if(this instanceof N)return(z=D.call(this,U,R)).canvas=U,z._pixelsState=R,L?(z._isMainCanvas=!0,z._pInst._setProperty("_curElement",d(z)),z._pInst._setProperty("canvas",z.canvas),z._pInst._setProperty("width",z.width),z._pInst._setProperty("height",z.height)):(z.canvas.style.display="none",z._styles=[]),z._clipping=!1,z._clipInvert=!1,z._textSize=12,z._textLeading=15,z._textFont="sans-serif",z._textStyle=v.NORMAL,z._textAscent=null,z._textDescent=null,z._textAlign=v.LEFT,z._textBaseline=v.BASELINE,z._textWrap=v.WORD,z._rectMode=v.CORNER,z._ellipseMode=v.CENTER,z._curveTightness=0,z._imageMode=v.CORNER,z._tint=null,z._doStroke=!0,z._doFill=!0,z._strokeSet=!1,z._fillSet=!1,z._leadingSet=!1,z._pushPopDepth=0,z;throw new TypeError("Cannot call a class as a function")}return b=N,(y=[{key:"push",value:function(){return this._pushPopDepth++,{properties:{_doStroke:this._doStroke,_strokeSet:this._strokeSet,_doFill:this._doFill,_fillSet:this._fillSet,_tint:this._tint,_imageMode:this._imageMode,_rectMode:this._rectMode,_ellipseMode:this._ellipseMode,_textFont:this._textFont,_textLeading:this._textLeading,_leadingSet:this._leadingSet,_textSize:this._textSize,_textAlign:this._textAlign,_textBaseline:this._textBaseline,_textStyle:this._textStyle,_textWrap:this._textWrap}}}},{key:"pop",value:function(U){this._pushPopDepth--,U.properties&&Object.assign(this,U.properties)}},{key:"beginClip",value:function(){var U=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};if(this._clipping)throw new Error("It looks like you're trying to clip while already in the middle of clipping. Did you forget to endClip()?");this._clipping=!0,this._clipInvert=U.invert}},{key:"endClip",value:function(){if(!this._clipping)throw new Error("It looks like you've called endClip() without beginClip(). Did you forget to call beginClip() first?");this._clipping=!1}},{key:"resize",value:function(U,R){this.width=U,this.height=R,this.elt.width=U*this._pInst._pixelDensity,this.elt.height=R*this._pInst._pixelDensity,this.elt.style.width="".concat(U,"px"),this.elt.style.height="".concat(R,"px"),this._isMainCanvas&&(this._pInst._setProperty("width",this.width),this._pInst._setProperty("height",this.height))}},{key:"get",value:function(U,R,L,z){var F=this._pixelsState,q=F._pixelDensity,k=this.canvas;if(void 0===U&&void 0===R)U=R=0,L=F.width,z=F.height;else if(U*=q,R*=q,void 0===L&&void 0===z)return U<0||R<0||U>=k.width||R>=k.height?[0,0,0,0]:this._getPixel(U,R);return(F=new E.default.Image(L*q,z*q)).pixelDensity(q),F.canvas.getContext("2d").drawImage(k,U,R,L*q,z*q,0,0,L*q,z*q),F}},{key:"textLeading",value:function(U){return"number"==typeof U?(this._setProperty("_leadingSet",!0),this._setProperty("_textLeading",U),this._pInst):this._textLeading}},{key:"textStyle",value:function(U){return U?(U!==v.NORMAL&&U!==v.ITALIC&&U!==v.BOLD&&U!==v.BOLDITALIC||this._setProperty("_textStyle",U),this._applyTextProperties()):this._textStyle}},{key:"textAscent",value:function(){return null===this._textAscent&&this._updateTextMetrics(),this._textAscent}},{key:"textDescent",value:function(){return null===this._textDescent&&this._updateTextMetrics(),this._textDescent}},{key:"textAlign",value:function(U,R){return void 0!==U?(this._setProperty("_textAlign",U),void 0!==R&&this._setProperty("_textBaseline",R),this._applyTextProperties()):{horizontal:this._textAlign,vertical:this._textBaseline}}},{key:"textWrap",value:function(U){return this._setProperty("_textWrap",U),this._textWrap}},{key:"text",value:function(U,R,L,z,F){var q,k,Z,X,W=this._pInst,oe=this._textWrap,ie=Number.MAX_VALUE,re=L;if((this._doFill||this._doStroke)&&void 0!==U){if(q=(U=(U="string"!=typeof U?U.toString():U).replace(/(\t)/g,"  ")).split("\n"),void 0!==z){switch(this._rectMode===v.CENTER&&(R-=z/2),this._textAlign){case v.CENTER:R+=z/2;break;case v.RIGHT:R+=z}if(void 0!==F){this._rectMode===v.CENTER&&(L-=F/2,re-=F/2),U=L;var le=W.textAscent();switch(this._textBaseline){case v.BOTTOM:X=L+F,L=Math.max(X,L),re+=le;break;case v.CENTER:X=L+F/2,L=Math.max(X,L),re+=le/2}ie=L+F-le,this._textBaseline===v.CENTER&&(ie=U+F-le/2)}else this._textBaseline!==v.BOTTOM&&this._textBaseline!==v.CENTER||(re=L-(U=W.textSize()*this._textLeading)/2,ie=L+U/2);if(oe===v.WORD){for(var pe=[],Ae=0;Ae<q.length;Ae++){for(var $="",P=q[Ae].split(" "),K=0;K<P.length;K++)k="".concat($+P[K])+" ",$=z<(Z=this.textWidth(k))&&0<$.length?(pe.push($),"".concat(P[K])+" "):k;pe.push($)}var te=0;this._textBaseline===v.CENTER?te=(pe.length-1)*W.textLeading()/2:this._textBaseline===v.BOTTOM&&(te=(pe.length-1)*W.textLeading());for(var fe=0;fe<q.length;fe++){$="",P=q[fe].split(" ");for(var ve=0;ve<P.length;ve++)k="".concat($+P[ve])+" ",z<(Z=this.textWidth(k))&&0<$.length?(this._renderText(W,$.trim(),R,L-te,ie,re),$="".concat(P[ve])+" ",L+=W.textLeading()):$=k;this._renderText(W,$.trim(),R,L-te,ie,re),L+=W.textLeading()}}else{for(var Te=[],Ie=0;Ie<q.length;Ie++)for(var we=q[Ie].split($=""),Pe=0;Pe<we.length;Pe++)k="".concat($+we[Pe]),(Z=this.textWidth(k))<=z?$+=we[Pe]:z<Z&&0<$.length&&(Te.push($),$="".concat(we[Pe]));Te.push($);var je=0;this._textBaseline===v.CENTER?je=(Te.length-1)*W.textLeading()/2:this._textBaseline===v.BOTTOM&&(je=(Te.length-1)*W.textLeading());for(var be=0;be<q.length;be++){we=q[be].split($="");for(var Oe=0;Oe<we.length;Oe++)k="".concat($+we[Oe]),(Z=this.textWidth(k))<=z?$+=we[Oe]:z<Z&&0<$.length&&(this._renderText(W,$.trim(),R,L-je,ie,re),L+=W.textLeading(),$="".concat(we[Oe]))}this._renderText(W,$.trim(),R,L-je,ie,re),L+=W.textLeading()}}else{var Ge=0;this._textBaseline===v.CENTER?Ge=(q.length-1)*W.textLeading()/2:this._textBaseline===v.BOTTOM&&(Ge=(q.length-1)*W.textLeading());for(var Ke=0;Ke<q.length;Ke++)this._renderText(W,q[Ke],R,L-Ge,ie,re-Ge),L+=W.textLeading()}return W}}},{key:"_applyDefaults",value:function(){return this}},{key:"_isOpenType",value:function(){var U=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this._textFont;return"object"===T(U)&&U.font&&U.font.supported}},{key:"_updateTextMetrics",value:function(){var U,R,L,z,F,q;return this._isOpenType()?(this._setProperty("_textAscent",this._textFont._textAscent()),this._setProperty("_textDescent",this._textFont._textDescent())):((U=document.createElement("span")).style.fontFamily=this._textFont,U.style.fontSize="".concat(this._textSize,"px"),U.innerHTML="ABCjgq|",(q=document.createElement("div")).style.display="inline-block",q.style.width="1px",q.style.height="0px",(R=document.createElement("div")).appendChild(U),R.appendChild(q),R.style.height="0px",R.style.overflow="hidden",document.body.appendChild(R),q.style.verticalAlign="baseline",z=h(q),F=h(U),L=z[1]-F[1],q.style.verticalAlign="bottom",z=h(q),F=h(U),q=z[1]-F[1]-L,document.body.removeChild(R),this._setProperty("_textAscent",L),this._setProperty("_textDescent",q)),this}}])&&C(b.prototype,y),N}(E.default.Element);function h(y){var b=0,x=0;if(y.offsetParent)for(;b+=y.offsetLeft,x+=y.offsetTop,y=y.offsetParent;);else b+=y.offsetLeft,x+=y.offsetTop;return[b,x]}p.prototype.textSize=function(y){return"number"==typeof y?(this._setProperty("_textSize",y),this._leadingSet||this._setProperty("_textLeading",y*v._DEFAULT_LEADMULT),this._applyTextProperties()):this._textSize},E.default.Renderer=p,H.default=l=E.default.Renderer},{"../core/constants":272,"./main":283,"core-js/modules/es.array.iterator":165,"core-js/modules/es.number.constructor":179,"core-js/modules/es.object.assign":183,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.get-prototype-of":188,"core-js/modules/es.object.to-string":190,"core-js/modules/es.reflect.construct":192,"core-js/modules/es.regexp.exec":195,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.string.iterator":200,"core-js/modules/es.string.replace":204,"core-js/modules/es.string.split":206,"core-js/modules/es.string.trim":209,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246}],287:[function(y,de,H){"use strict";function M(b){return(M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(x){return typeof x}:function(x){return x&&"function"==typeof Symbol&&x.constructor===Symbol&&x!==Symbol.prototype?"symbol":typeof x})(b)}function E(b){return(E="function"==typeof Symbol&&"symbol"===M(Symbol.iterator)?function(x){return M(x)}:function(x){return x&&"function"==typeof Symbol&&x.constructor===Symbol&&x!==Symbol.prototype?"symbol":M(x)})(b)}y("core-js/modules/es.symbol"),y("core-js/modules/es.symbol.description"),y("core-js/modules/es.symbol.iterator"),y("core-js/modules/es.array.concat"),y("core-js/modules/es.array.fill"),y("core-js/modules/es.array.iterator"),y("core-js/modules/es.array.join"),y("core-js/modules/es.array.slice"),y("core-js/modules/es.function.name"),y("core-js/modules/es.object.get-own-property-descriptor"),y("core-js/modules/es.object.get-prototype-of"),y("core-js/modules/es.object.to-string"),y("core-js/modules/es.reflect.construct"),y("core-js/modules/es.reflect.get"),y("core-js/modules/es.regexp.exec"),y("core-js/modules/es.regexp.to-string"),y("core-js/modules/es.string.iterator"),y("core-js/modules/es.weak-map"),y("core-js/modules/web.dom-collections.iterator"),y("core-js/modules/es.array.concat"),y("core-js/modules/es.array.fill"),y("core-js/modules/es.array.join"),y("core-js/modules/es.array.slice"),y("core-js/modules/es.function.name"),y("core-js/modules/es.object.get-prototype-of"),y("core-js/modules/es.object.to-string"),y("core-js/modules/es.regexp.exec"),y("core-js/modules/es.regexp.to-string"),Object.defineProperty(H,"__esModule",{value:!0}),H.default=void 0;var v=(h=y("./main"))&&h.__esModule?h:{default:h},S=function(b){if(b&&b.__esModule)return b;if(null===b||"object"!==E(b)&&"function"!=typeof b)return{default:b};var x=T();if(x&&x.has(b))return x.get(b);var D,N={},U=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(D in b){var R;Object.prototype.hasOwnProperty.call(b,D)&&((R=U?Object.getOwnPropertyDescriptor(b,D):null)&&(R.get||R.set)?Object.defineProperty(N,D,R):N[D]=b[D])}return N.default=b,x&&x.set(b,N),N}(y("./constants"));function T(){var b;return"function"!=typeof WeakMap?null:(T=function(){return b},b=new WeakMap)}function C(b,x){for(var D=0;D<x.length;D++){var N=x[D];N.enumerable=N.enumerable||!1,N.configurable=!0,"value"in N&&(N.writable=!0),Object.defineProperty(b,N.key,N)}}function f(b,x,D){return(f=typeof Reflect<"u"&&Reflect.get?Reflect.get:function(L,U,R){if(L=function(z,F){for(;!Object.prototype.hasOwnProperty.call(z,F)&&null!==(z=m(z)););return z}(L,U))return(L=Object.getOwnPropertyDescriptor(L,U)).get?L.get.call(R):L.value})(b,x,D||b)}function g(b,x){return(g=Object.setPrototypeOf||function(D,N){return D.__proto__=N,D})(b,x)}function m(b){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(x){return x.__proto__||Object.getPrototypeOf(x)})(b)}y("./p5.Renderer");var p="rgba(0,0,0,0)",h=function(b){var x=U;if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function");x.prototype=Object.create(b&&b.prototype,{constructor:{value:x,writable:!0,configurable:!0}}),b&&g(x,b);var N=function d(b){return function(){var x,D=m(b);if(x=function(){if(typeof Reflect<"u"&&Reflect.construct&&!Reflect.construct.sham){if("function"==typeof Proxy)return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch{}}}()?(x=m(this).constructor,Reflect.construct(D,arguments,x)):D.apply(this,arguments),D=this,!x||"object"!==E(x)&&"function"!=typeof x){if(void 0!==D)return D;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return x}}(U);function U(R,L,z){if(this instanceof U)return(R=N.call(this,R,L,z)).drawingContext=R.canvas.getContext("2d"),R._pInst._setProperty("drawingContext",R.drawingContext),R;throw new TypeError("Cannot call a class as a function")}return x=U,(b=[{key:"getFilterGraphicsLayer",value:function(){return this.filterGraphicsLayer||(this.filterGraphicsLayer=new v.default.Graphics(this.width,this.height,S.WEBGL,(this._pInst instanceof v.default.Graphics?this._pInst:this)._pInst)),this.filterGraphicsLayer.width===this.width&&this.filterGraphicsLayer.height===this.height||this.filterGraphicsLayer.resizeCanvas(this.width,this.height),this.filterGraphicsLayer.pixelDensity()!==this._pInst.pixelDensity()&&this.filterGraphicsLayer.pixelDensity(this._pInst.pixelDensity()),this.filterGraphicsLayer}},{key:"_applyDefaults",value:function(){this._cachedFillStyle=this._cachedStrokeStyle=void 0,this._cachedBlendMode=S.BLEND,this._setFill(S._DEFAULT_FILL),this._setStroke(S._DEFAULT_STROKE),this.drawingContext.lineCap=S.ROUND,this.drawingContext.font="normal 12px sans-serif"}},{key:"resize",value:function(R,L){f(m(U.prototype),"resize",this).call(this,R,L),this.drawingContext.scale(this._pInst._pixelDensity,this._pInst._pixelDensity)}},{key:"background",value:function(){var R,L;this.drawingContext.save(),this.resetMatrix(),(arguments.length<=0?void 0:arguments[0])instanceof v.default.Image?0<=(arguments.length<=1?void 0:arguments[1])?(R=arguments.length<=0?void 0:arguments[0],this.drawingContext.globalAlpha=(arguments.length<=1?void 0:arguments[1])/255,this._pInst.image(R,0,0,this.width,this.height)):this._pInst.image(arguments.length<=0?void 0:arguments[0],0,0,this.width,this.height):(R=this._getFill(),L=(L=this._pInst).color.apply(L,arguments),this._pInst._addAccsOutput()&&this._pInst._accsBackground(L.levels),L=L.toString(),this._setFill(L),this._isErasing&&this.blendMode(this._cachedBlendMode),this.drawingContext.fillRect(0,0,this.width,this.height),this._setFill(R),this._isErasing&&this._pInst.erase()),this.drawingContext.restore()}},{key:"clear",value:function(){this.drawingContext.save(),this.resetMatrix(),this.drawingContext.clearRect(0,0,this.width,this.height),this.drawingContext.restore()}},{key:"fill",value:function(){var R=(R=this._pInst).color.apply(R,arguments);this._setFill(R.toString()),this._pInst._addAccsOutput()&&this._pInst._accsCanvasColors("fill",R.levels)}},{key:"stroke",value:function(){var R=(R=this._pInst).color.apply(R,arguments);this._setStroke(R.toString()),this._pInst._addAccsOutput()&&this._pInst._accsCanvasColors("stroke",R.levels)}},{key:"erase",value:function(R,L){this._isErasing||(this._cachedFillStyle=this.drawingContext.fillStyle,R=this._pInst.color(255,R).toString(),this.drawingContext.fillStyle=R,this._cachedStrokeStyle=this.drawingContext.strokeStyle,R=this._pInst.color(255,L).toString(),this.drawingContext.strokeStyle=R,L=this._cachedBlendMode,this.blendMode(S.REMOVE),this._cachedBlendMode=L,this._isErasing=!0)}},{key:"noErase",value:function(){this._isErasing&&(this.drawingContext.fillStyle=this._cachedFillStyle,this.drawingContext.strokeStyle=this._cachedStrokeStyle,this.blendMode(this._cachedBlendMode),this._isErasing=!1)}},{key:"beginClip",value:function(){var R=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};f(m(U.prototype),"beginClip",this).call(this,R),this._cachedFillStyle=this.drawingContext.fillStyle,R=this._pInst.color(255,0).toString(),this.drawingContext.fillStyle=R,this._cachedStrokeStyle=this.drawingContext.strokeStyle,R=this._pInst.color(255,0).toString(),this.drawingContext.strokeStyle=R,R=this._cachedBlendMode,this.blendMode(S.BLEND),this._cachedBlendMode=R,this.drawingContext.beginPath(),this._clipInvert&&(this.drawingContext.moveTo(-2*this.width,-2*this.height),this.drawingContext.lineTo(-2*this.width,2*this.height),this.drawingContext.lineTo(2*this.width,2*this.height),this.drawingContext.lineTo(2*this.width,-2*this.height),this.drawingContext.closePath())}},{key:"endClip",value:function(){this._doFillStrokeClose(),this.drawingContext.clip(),f(m(U.prototype),"endClip",this).call(this),this.drawingContext.fillStyle=this._cachedFillStyle,this.drawingContext.strokeStyle=this._cachedStrokeStyle,this.blendMode(this._cachedBlendMode)}},{key:"image",value:function(R,L,z,F,q,k,Z,X,W){R.gifProperties&&R._animateGif(this._pInst);try{v.default.MediaElement&&R instanceof v.default.MediaElement&&R._ensureCanvas();var oe=(oe=this._tint&&R.canvas?this._getTintedImageCanvas(R):oe)||R.canvas||R.elt,ie=1;R.width&&0<R.width&&(ie=oe.width/R.width),this._isErasing&&this.blendMode(this._cachedBlendMode),this.drawingContext.drawImage(oe,ie*L,ie*z,ie*F,ie*q,k,Z,X,W),this._isErasing&&this._pInst.erase()}catch(re){if("NS_ERROR_NOT_AVAILABLE"!==re.name)throw re}}},{key:"_getTintedImageCanvas",value:function(R){if(!R.canvas)return R;R.tintCanvas||(R.tintCanvas=document.createElement("canvas")),R.tintCanvas.width!==R.canvas.width&&(R.tintCanvas.width=R.canvas.width),R.tintCanvas.height!==R.canvas.height&&(R.tintCanvas.height=R.canvas.height);var L=R.tintCanvas.getContext("2d");return L.save(),L.clearRect(0,0,R.canvas.width,R.canvas.height),(this._tint[0]<255||this._tint[1]<255||this._tint[2]<255)&&(L.drawImage(R.canvas,0,0),L.globalCompositeOperation="luminosity",L.drawImage(R.canvas,0,0),L.globalCompositeOperation="color",L.drawImage(R.canvas,0,0),L.globalCompositeOperation="multiply",L.fillStyle="rgb(".concat(this._tint.slice(0,3).join(", "),")"),L.fillRect(0,0,R.canvas.width,R.canvas.height),L.globalCompositeOperation="destination-in"),L.globalAlpha=this._tint[3]/255,L.drawImage(R.canvas,0,0),L.restore(),R.tintCanvas}},{key:"blendMode",value:function(R){if(R===S.SUBTRACT)console.warn("blendMode(SUBTRACT) only works in WEBGL mode.");else{if(R!==S.BLEND&&R!==S.REMOVE&&R!==S.DARKEST&&R!==S.LIGHTEST&&R!==S.DIFFERENCE&&R!==S.MULTIPLY&&R!==S.EXCLUSION&&R!==S.SCREEN&&R!==S.REPLACE&&R!==S.OVERLAY&&R!==S.HARD_LIGHT&&R!==S.SOFT_LIGHT&&R!==S.DODGE&&R!==S.BURN&&R!==S.ADD)throw new Error("Mode ".concat(R," not recognized."));this._cachedBlendMode=R,this.drawingContext.globalCompositeOperation=R}}},{key:"blend",value:function(){for(var R=this.drawingContext.globalCompositeOperation,L=arguments.length,z=new Array(L),F=0;F<L;F++)z[F]=arguments[F];var q=z[z.length-1],k=Array.prototype.slice.call(z,0,z.length-1);this.drawingContext.globalCompositeOperation=q,v.default.prototype.copy.apply(this,k),this.drawingContext.globalCompositeOperation=R}},{key:"_getPixel",value:function(R,L){return[(R=this.drawingContext.getImageData(R,L,1,1).data)[0],R[1],R[2],R[3]]}},{key:"loadPixels",value:function(){var L,R=this._pixelsState,z=this.drawingContext.getImageData(0,0,z=this.width*(L=R._pixelDensity),L*=this.height);R._setProperty("imageData",z),R._setProperty("pixels",z.data)}},{key:"set",value:function(R,L,z){R=Math.floor(R),L=Math.floor(L);var F=this._pixelsState;if(z instanceof v.default.Image)this.drawingContext.save(),this.drawingContext.setTransform(1,0,0,1,0,0),this.drawingContext.scale(F._pixelDensity,F._pixelDensity),this.drawingContext.clearRect(R,L,z.width,z.height),this.drawingContext.drawImage(z.canvas,R,L),this.drawingContext.restore();else{var q=0,k=0,Z=0,X=0,W=4*(L*F._pixelDensity*(this.width*F._pixelDensity)+R*F._pixelDensity);if(F.imageData||F.loadPixels(),"number"==typeof z)W<F.pixels.length&&(Z=k=q=z,X=255);else if(Array.isArray(z)){if(z.length<4)throw new Error("pixel array must be of the form [R, G, B, A]");W<F.pixels.length&&(q=z[0],k=z[1],Z=z[2],X=z[3])}else z instanceof v.default.Color&&W<F.pixels.length&&(q=z.levels[0],k=z.levels[1],Z=z.levels[2],X=z.levels[3]);for(var oe=0;oe<F._pixelDensity;oe++)for(var ie=0;ie<F._pixelDensity;ie++)F.pixels[W=4*((L*F._pixelDensity+ie)*this.width*F._pixelDensity+(R*F._pixelDensity+oe))]=q,F.pixels[W+1]=k,F.pixels[W+2]=Z,F.pixels[W+3]=X}}},{key:"updatePixels",value:function(R,L,z,F){var q=this._pixelsState,k=q._pixelDensity;void 0===R&&void 0===L&&void 0===z&&void 0===F&&(L=R=0,z=this.width,F=this.height),R*=k,L*=k,z*=k,F*=k,this.gifProperties&&(this.gifProperties.frames[this.gifProperties.displayIndex].image=q.imageData),this.drawingContext.putImageData(q.imageData,0,0,R,L,z,F)}},{key:"arc",value:function(W,oe,ie,re,q,k,Z){var X=this.drawingContext,le=(W+=ie/2,oe+=re/2,ie/=2,re/=2,!(Z===S.CHORD||Z===S.OPEN||(k-q)%S.TWO_PI==0));return this._doFill&&(this._clipping||X.beginPath(),X.ellipse(W,oe,ie,re,0,q,k),le&&X.lineTo(W,oe),X.closePath(),this._clipping||X.fill()),this._doStroke&&(this._clipping||X.beginPath(),X.ellipse(W,oe,ie,re,0,q,k),Z===S.PIE&&le&&X.lineTo(W,oe),Z!==S.PIE&&Z!==S.CHORD||X.closePath(),this._clipping||X.stroke()),this}},{key:"ellipse",value:function(X){var L=this.drawingContext,z=this._doFill,F=this._doStroke,q=parseFloat(X[0]),k=parseFloat(X[1]),Z=parseFloat(X[2]);if(X=parseFloat(X[3]),z&&!F){if(this._getFill()===p)return this}else if(!z&&F&&this._getStroke()===p)return this;q+=Z/2,k+=X/2,Z/=2,X/=2,this._clipping||L.beginPath(),L.ellipse(q,k,Z,X,0,0,2*Math.PI),L.closePath(),!this._clipping&&z&&L.fill(),!this._clipping&&F&&L.stroke()}},{key:"line",value:function(R,L,z,F){var q=this.drawingContext;return this._doStroke&&this._getStroke()!==p&&(this._clipping||q.beginPath(),q.moveTo(R,L),q.lineTo(z,F),q.stroke()),this}},{key:"point",value:function(R,L){var z,F,q=this.drawingContext;return this._doStroke&&this._getStroke()!==p?(z=this._getStroke(),F=this._getFill(),this._clipping||this._setFill(z),this._clipping||q.beginPath(),q.arc(R,L,q.lineWidth/2,0,S.TWO_PI,!1),void(this._clipping||(q.fill(),this._setFill(F)))):this}},{key:"quad",value:function(R,L,z,F,q,k,Z,X){var W=this.drawingContext,oe=this._doFill,ie=this._doStroke;if(oe&&!ie){if(this._getFill()===p)return this}else if(!oe&&ie&&this._getStroke()===p)return this;return this._clipping||W.beginPath(),W.moveTo(R,L),W.lineTo(z,F),W.lineTo(q,k),W.lineTo(Z,X),W.closePath(),!this._clipping&&oe&&W.fill(),!this._clipping&&ie&&W.stroke(),this}},{key:"rect",value:function(ie){var L,z,F=ie[0],q=ie[1],k=ie[2],Z=ie[3],X=ie[4],W=ie[5],oe=ie[6],re=(ie=ie[7],this.drawingContext),le=this._doFill,pe=this._doStroke;if(le&&!pe){if(this._getFill()===p)return this}else if(!le&&pe&&this._getStroke()===p)return this;return this._clipping||re.beginPath(),void 0===X?re.rect(F,q,k,Z):(void 0===W&&(W=X),void 0===oe&&(oe=W),void 0===ie&&(ie=oe),pe=(le=Math.abs(k))/2,z=(L=Math.abs(Z))/2,re.roundRect(F,q,k,Z,[X=L<2*(X=le<2*X?pe:X)?z:X,W=L<2*(W=le<2*W?pe:W)?z:W,oe=L<2*(oe=le<2*oe?pe:oe)?z:oe,ie=L<2*(ie=le<2*ie?pe:ie)?z:ie])),!this._clipping&&this._doFill&&re.fill(),!this._clipping&&this._doStroke&&re.stroke(),this}},{key:"triangle",value:function(oe){var L=this.drawingContext,z=this._doFill,F=this._doStroke,q=oe[0],k=oe[1],Z=oe[2],X=oe[3],W=oe[4];if(oe=oe[5],z&&!F){if(this._getFill()===p)return this}else if(!z&&F&&this._getStroke()===p)return this;this._clipping||L.beginPath(),L.moveTo(q,k),L.lineTo(Z,X),L.lineTo(W,oe),L.closePath(),!this._clipping&&z&&L.fill(),!this._clipping&&F&&L.stroke()}},{key:"endShape",value:function(R,L,z,F,q,k,Z){if(0!==L.length&&(this._doStroke||this._doFill)){var X,W,oe,ie=R===S.CLOSE,re=(ie&&!k&&L.push(L[0]),L.length);if(z&&null===Z){if(3<re){var le=[],pe=1-this._curveTightness;for(this._clipping||this.drawingContext.beginPath(),this.drawingContext.moveTo(L[1][0],L[1][1]),W=1;W+2<re;W++)le[0]=[(X=L[W])[0],X[1]],le[1]=[X[0]+(pe*L[W+1][0]-pe*L[W-1][0])/6,X[1]+(pe*L[W+1][1]-pe*L[W-1][1])/6],le[2]=[L[W+1][0]+(pe*L[W][0]-pe*L[W+2][0])/6,L[W+1][1]+(pe*L[W][1]-pe*L[W+2][1])/6],le[3]=[L[W+1][0],L[W+1][1]],this.drawingContext.bezierCurveTo(le[1][0],le[1][1],le[2][0],le[2][1],le[3][0],le[3][1]);ie&&this.drawingContext.lineTo(L[W+1][0],L[W+1][1]),this._doFillStrokeClose(ie)}}else if(F&&null===Z){for(this._clipping||this.drawingContext.beginPath(),W=0;W<re;W++)L[W].isVert?L[W].moveTo?this.drawingContext.moveTo(L[W][0],L[W][1]):this.drawingContext.lineTo(L[W][0],L[W][1]):this.drawingContext.bezierCurveTo(L[W][0],L[W][1],L[W][2],L[W][3],L[W][4],L[W][5]);this._doFillStrokeClose(ie)}else if(q&&null===Z){for(this._clipping||this.drawingContext.beginPath(),W=0;W<re;W++)L[W].isVert?L[W].moveTo?this.drawingContext.moveTo(L[W][0],L[W][1]):this.drawingContext.lineTo(L[W][0],L[W][1]):this.drawingContext.quadraticCurveTo(L[W][0],L[W][1],L[W][2],L[W][3]);this._doFillStrokeClose(ie)}else if(Z===S.POINTS)for(W=0;W<re;W++)X=L[W],this._doStroke&&this._pInst.stroke(X[6]),this._pInst.point(X[0],X[1]);else if(Z===S.LINES)for(W=0;W+1<re;W+=2)X=L[W],this._doStroke&&this._pInst.stroke(L[W+1][6]),this._pInst.line(X[0],X[1],L[W+1][0],L[W+1][1]);else if(Z===S.TRIANGLES)for(W=0;W+2<re;W+=3)X=L[W],this._clipping||this.drawingContext.beginPath(),this.drawingContext.moveTo(X[0],X[1]),this.drawingContext.lineTo(L[W+1][0],L[W+1][1]),this.drawingContext.lineTo(L[W+2][0],L[W+2][1]),this.drawingContext.closePath(),!this._clipping&&this._doFill&&(this._pInst.fill(L[W+2][5]),this.drawingContext.fill()),!this._clipping&&this._doStroke&&(this._pInst.stroke(L[W+2][6]),this.drawingContext.stroke());else if(Z===S.TRIANGLE_STRIP)for(W=0;W+1<re;W++)X=L[W],this._clipping||this.drawingContext.beginPath(),this.drawingContext.moveTo(L[W+1][0],L[W+1][1]),this.drawingContext.lineTo(X[0],X[1]),!this._clipping&&this._doStroke&&this._pInst.stroke(L[W+1][6]),!this._clipping&&this._doFill&&this._pInst.fill(L[W+1][5]),W+2<re&&(this.drawingContext.lineTo(L[W+2][0],L[W+2][1]),!this._clipping&&this._doStroke&&this._pInst.stroke(L[W+2][6]),!this._clipping&&this._doFill&&this._pInst.fill(L[W+2][5])),this._doFillStrokeClose(ie);else if(Z===S.TRIANGLE_FAN){if(2<re){for(this._clipping||this.drawingContext.beginPath(),W=2;W<re;W++)X=L[W],this.drawingContext.moveTo(L[0][0],L[0][1]),this.drawingContext.lineTo(L[W-1][0],L[W-1][1]),this.drawingContext.lineTo(X[0],X[1]),this.drawingContext.lineTo(L[0][0],L[0][1]),W<re-1&&(this._doFill&&X[5]!==L[W+1][5]||this._doStroke&&X[6]!==L[W+1][6])&&(!this._clipping&&this._doFill&&(this._pInst.fill(X[5]),this.drawingContext.fill(),this._pInst.fill(L[W+1][5])),!this._clipping&&this._doStroke&&(this._pInst.stroke(X[6]),this.drawingContext.stroke(),this._pInst.stroke(L[W+1][6])),this.drawingContext.closePath(),this._clipping||this.drawingContext.beginPath());this._doFillStrokeClose(ie)}}else if(Z===S.QUADS)for(W=0;W+3<re;W+=4){for(X=L[W],this._clipping||this.drawingContext.beginPath(),this.drawingContext.moveTo(X[0],X[1]),oe=1;oe<4;oe++)this.drawingContext.lineTo(L[W+oe][0],L[W+oe][1]);this.drawingContext.lineTo(X[0],X[1]),!this._clipping&&this._doFill&&this._pInst.fill(L[W+3][5]),!this._clipping&&this._doStroke&&this._pInst.stroke(L[W+3][6]),this._doFillStrokeClose(ie)}else if(Z===S.QUAD_STRIP){if(3<re)for(W=0;W+1<re;W+=2)X=L[W],this._clipping||this.drawingContext.beginPath(),W+3<re?(this.drawingContext.moveTo(L[W+2][0],L[W+2][1]),this.drawingContext.lineTo(X[0],X[1]),this.drawingContext.lineTo(L[W+1][0],L[W+1][1]),this.drawingContext.lineTo(L[W+3][0],L[W+3][1]),!this._clipping&&this._doFill&&this._pInst.fill(L[W+3][5]),!this._clipping&&this._doStroke&&this._pInst.stroke(L[W+3][6])):(this.drawingContext.moveTo(X[0],X[1]),this.drawingContext.lineTo(L[W+1][0],L[W+1][1])),this._doFillStrokeClose(ie)}else{for(this._clipping||this.drawingContext.beginPath(),this.drawingContext.moveTo(L[0][0],L[0][1]),W=1;W<re;W++)(X=L[W]).isVert&&(X.moveTo?(ie&&this.drawingContext.closePath(),this.drawingContext.moveTo(X[0],X[1])):this.drawingContext.lineTo(X[0],X[1]));this._doFillStrokeClose(ie),this.drawingContext.closePath()}k=q=F=z=!1,ie&&L.pop()}return this}},{key:"strokeCap",value:function(R){return R!==S.ROUND&&R!==S.SQUARE&&R!==S.PROJECT||(this.drawingContext.lineCap=R),this}},{key:"strokeJoin",value:function(R){return R!==S.ROUND&&R!==S.BEVEL&&R!==S.MITER||(this.drawingContext.lineJoin=R),this}},{key:"strokeWeight",value:function(R){return this.drawingContext.lineWidth=void 0===R||0===R?1e-4:R,this}},{key:"_getFill",value:function(){return this._cachedFillStyle||(this._cachedFillStyle=this.drawingContext.fillStyle),this._cachedFillStyle}},{key:"_setFill",value:function(R){R!==this._cachedFillStyle&&(this.drawingContext.fillStyle=R,this._cachedFillStyle=R)}},{key:"_getStroke",value:function(){return this._cachedStrokeStyle||(this._cachedStrokeStyle=this.drawingContext.strokeStyle),this._cachedStrokeStyle}},{key:"_setStroke",value:function(R){R!==this._cachedStrokeStyle&&(this.drawingContext.strokeStyle=R,this._cachedStrokeStyle=R)}},{key:"bezier",value:function(R,L,z,F,q,k,Z,X){return this._pInst.beginShape(),this._pInst.vertex(R,L),this._pInst.bezierVertex(z,F,q,k,Z,X),this._pInst.endShape(),this}},{key:"curve",value:function(R,L,z,F,q,k,Z,X){return this._pInst.beginShape(),this._pInst.curveVertex(R,L),this._pInst.curveVertex(z,F),this._pInst.curveVertex(q,k),this._pInst.curveVertex(Z,X),this._pInst.endShape(),this}},{key:"_doFillStrokeClose",value:function(R){R&&this.drawingContext.closePath(),!this._clipping&&this._doFill&&this.drawingContext.fill(),!this._clipping&&this._doStroke&&this.drawingContext.stroke()}},{key:"applyMatrix",value:function(R,L,z,F,q,k){this.drawingContext.transform(R,L,z,F,q,k)}},{key:"resetMatrix",value:function(){return this.drawingContext.setTransform(1,0,0,1,0,0),this.drawingContext.scale(this._pInst._pixelDensity,this._pInst._pixelDensity),this}},{key:"rotate",value:function(R){this.drawingContext.rotate(R)}},{key:"scale",value:function(R,L){return this.drawingContext.scale(R,L),this}},{key:"translate",value:function(R,L){return R instanceof v.default.Vector&&(L=R.y,R=R.x),this.drawingContext.translate(R,L),this}},{key:"_renderText",value:function(R,L,z,F,q,k){if(!(F<k||q<=F))return R.push(),this._isOpenType()?this._textFont._renderPath(L,z,F,{renderer:this}):(this._doStroke&&this._strokeSet&&this.drawingContext.strokeText(L,z,F),!this._clipping&&this._doFill&&(this._fillSet||this._setFill(S._DEFAULT_TEXT_FILL),this.drawingContext.fillText(L,z,F))),R.pop(),R}},{key:"textWidth",value:function(R){return this._isOpenType()?this._textFont._textWidth(R,this._textSize):this.drawingContext.measureText(R).width}},{key:"_applyTextProperties",value:function(){var R=this._pInst,L=(this._setProperty("_textAscent",null),this._setProperty("_textDescent",null),L=this._textFont,this._isOpenType()&&(L=this._textFont.font.familyName,this._setProperty("_textStyle",this._textFont.font.styleName)),L||"sans-serif");return/\s/.exec(L)&&(L='"'.concat(L,'"')),this.drawingContext.font="".concat(this._textStyle||"normal"," ").concat(this._textSize||12,"px ").concat(L),this.drawingContext.textAlign=this._textAlign,this.drawingContext.textBaseline=this._textBaseline===S.CENTER?S._CTX_MIDDLE:this._textBaseline,R}},{key:"push",value:function(){return this.drawingContext.save(),f(m(U.prototype),"push",this).call(this)}},{key:"pop",value:function(R){this.drawingContext.restore(),this._cachedFillStyle=this.drawingContext.fillStyle,this._cachedStrokeStyle=this.drawingContext.strokeStyle,f(m(U.prototype),"pop",this).call(this,R)}}])&&C(x.prototype,b),U}(v.default.Renderer);h.prototype.text=function(b,x,D,L,U){var R;return void 0!==L&&this.drawingContext.textBaseline===S.BASELINE&&(R=!0,this.drawingContext.textBaseline=S.TOP),L=v.default.Renderer.prototype.text.apply(this,arguments),R&&(this.drawingContext.textBaseline=S.BASELINE),L},v.default.Renderer2D=h,H.default=y=v.default.Renderer2D},{"./constants":272,"./main":283,"./p5.Renderer":286,"core-js/modules/es.array.concat":153,"core-js/modules/es.array.fill":156,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.join":166,"core-js/modules/es.array.slice":169,"core-js/modules/es.function.name":174,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.get-prototype-of":188,"core-js/modules/es.object.to-string":190,"core-js/modules/es.reflect.construct":192,"core-js/modules/es.reflect.get":193,"core-js/modules/es.regexp.exec":195,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246}],288:[function(l,de,H){"use strict";l("core-js/modules/es.symbol"),l("core-js/modules/es.symbol.description"),l("core-js/modules/es.symbol.iterator"),l("core-js/modules/es.array.iterator"),l("core-js/modules/es.object.assign"),l("core-js/modules/es.object.to-string"),l("core-js/modules/es.promise"),l("core-js/modules/es.string.iterator"),l("core-js/modules/web.dom-collections.iterator"),l("core-js/modules/es.symbol"),l("core-js/modules/es.symbol.description"),l("core-js/modules/es.symbol.iterator"),l("core-js/modules/es.array.iterator"),l("core-js/modules/es.object.assign"),l("core-js/modules/es.object.to-string"),l("core-js/modules/es.promise"),l("core-js/modules/es.string.iterator"),l("core-js/modules/web.dom-collections.iterator");var M=(l=l("./main"))&&l.__esModule?l:{default:l};function E(){return{}}M.default.prototype._promisePreloads=[];var v=!(M.default.prototype.registerPromisePreload=function(S){M.default.prototype._promisePreloads.push(S)});M.default.prototype._setupPromisePreloads=function(){var S=!0,T=!1,C=void 0;try{for(var f,g=this._promisePreloads[Symbol.iterator]();!(S=(f=g.next()).done);S=!0){var d=f.value,m=this,p=d.method,h=d.addCallbacks,y=d.legacyPreloadSetup,b=d.target||this,x=b[p].bind(b);if(b===M.default.prototype){if(v)continue;m=null,x=b[p]}b[p]=this._wrapPromisePreload(m,x,h),y&&(b[y.method]=this._legacyPreloadGenerator(m,y,b[p]))}}catch(D){T=!0,C=D}finally{try{S||null==g.return||g.return()}finally{if(T)throw C}}v=!0},M.default.prototype._wrapPromisePreload=function(S,T,C){var f=function(){for(var g=this,d=(this._incrementPreload(),null),m=null,p=arguments.length,h=new Array(p),y=0;y<p;y++)h[y]=arguments[y];if(C)for(var b=h.length-1;0<=b&&!m&&"function"==typeof h[b];b--)m=d,d=h.pop();var x=Promise.resolve(T.apply(this,h));return d&&x.then(d),m&&x.catch(m),x.then(function(){return g._decrementPreload()}),x};return S?f.bind(S):f},M.default.prototype._legacyPreloadGenerator=function(S,g,C){var f=g.createBaseObject||E;return g=function(){var d=this;this._incrementPreload();for(var m=arguments.length,p=new Array(m),h=0;h<m;h++)p[h]=arguments[h];var y=f.apply(this,p);return C.apply(this,p).then(function(b){Object.assign(y,b),d._decrementPreload()}),y},S?g.bind(S):g}},{"./main":283,"core-js/modules/es.array.iterator":165,"core-js/modules/es.object.assign":183,"core-js/modules/es.object.to-string":190,"core-js/modules/es.promise":191,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/web.dom-collections.iterator":246}],289:[function(l,de,H){"use strict";function M(g){return(M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(d){return typeof d}:function(d){return d&&"function"==typeof Symbol&&d.constructor===Symbol&&d!==Symbol.prototype?"symbol":typeof d})(g)}l("core-js/modules/es.symbol"),l("core-js/modules/es.symbol.description"),l("core-js/modules/es.symbol.iterator"),l("core-js/modules/es.array.filter"),l("core-js/modules/es.array.iterator"),l("core-js/modules/es.object.get-own-property-descriptor"),l("core-js/modules/es.object.to-string"),l("core-js/modules/es.string.iterator"),l("core-js/modules/es.weak-map"),l("core-js/modules/web.dom-collections.iterator"),l("core-js/modules/es.symbol"),l("core-js/modules/es.symbol.description"),l("core-js/modules/es.symbol.iterator"),l("core-js/modules/es.array.filter"),l("core-js/modules/es.array.iterator"),l("core-js/modules/es.object.to-string"),l("core-js/modules/es.string.iterator"),l("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(H,"__esModule",{value:!0}),H.default=void 0;var E=(f=l("./main"))&&f.__esModule?f:{default:f},v=function(g){if(g&&g.__esModule)return g;if(null===g||"object"!==T(g)&&"function"!=typeof g)return{default:g};var d=S();if(d&&d.has(g))return d.get(g);var m,p={},h=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(m in g){var y;Object.prototype.hasOwnProperty.call(g,m)&&((y=h?Object.getOwnPropertyDescriptor(g,m):null)&&(y.get||y.set)?Object.defineProperty(p,m,y):p[m]=g[m])}return p.default=g,d&&d.set(g,p),p}(l("./constants"));function S(){var g;return"function"!=typeof WeakMap?null:(S=function(){return g},g=new WeakMap)}function T(g){return(T="function"==typeof Symbol&&"symbol"===M(Symbol.iterator)?function(d){return M(d)}:function(d){return d&&"function"==typeof Symbol&&d.constructor===Symbol&&d!==Symbol.prototype?"symbol":M(d)})(g)}l("./p5.Graphics"),l("./p5.Renderer2D"),l("../webgl/p5.RendererGL");var C="defaultCanvas0",f=(E.default.prototype.createCanvas=function(g,d,m,p){var h,y,b;if(E.default._validateParameters("createCanvas",arguments),arguments[2]instanceof HTMLCanvasElement?(m=v.P2D,p=arguments[2]):h=m||v.P2D,p)(b=document.getElementById(C))&&b.parentNode.removeChild(b),b=p,this._defaultGraphicsCreated=!1;else{if(h===v.WEBGL)(b=document.getElementById(C))&&(b.parentNode.removeChild(b),y=this._renderer,this._elements=this._elements.filter(function(D){return D!==y})),(b=document.createElement("canvas")).id=C,b.classList.add("p5Canvas");else if(this._defaultGraphicsCreated)b=this.canvas;else{b=p||document.createElement("canvas");for(var x=0;document.getElementById("defaultCanvas".concat(x));)x++;C="defaultCanvas".concat(x),b.id=C,b.classList.add("p5Canvas")}this._setupDone||(b.dataset.hidden=!0,b.style.visibility="hidden"),(this._userNode||(0===document.getElementsByTagName("main").length&&(m=document.createElement("main"),document.body.appendChild(m)),document.getElementsByTagName("main")[0])).appendChild(b)}return h===v.WEBGL?(this._setProperty("_renderer",new E.default.RendererGL(b,this,!0)),this._elements.push(this._renderer),g=(p=this._renderer._adjustDimensions(g,d)).adjustedWidth,d=p.adjustedHeight):this._defaultGraphicsCreated||(this._setProperty("_renderer",new E.default.Renderer2D(b,this,!0)),this._defaultGraphicsCreated=!0,this._elements.push(this._renderer)),this._renderer.resize(g,d),this._renderer._applyDefaults(),this._renderer},E.default.prototype.resizeCanvas=function(g,d,m){if(E.default._validateParameters("resizeCanvas",arguments),this._renderer){var p,h,y,b={};for(p in this.drawingContext){var x=this.drawingContext[p];"object"!==T(x)&&"function"!=typeof x&&(b[p]=x)}for(y in this._renderer instanceof E.default.RendererGL&&(g=(h=this._renderer._adjustDimensions(g,d)).adjustedWidth,d=h.adjustedHeight),this.width=g,this.height=d,this._renderer.resize(g,d),b)try{this.drawingContext[y]=b[y]}catch{}m||this.redraw()}this._addAccsOutput()&&this._updateAccsOutput()},E.default.prototype.noCanvas=function(){this.canvas&&this.canvas.parentNode.removeChild(this.canvas)},E.default.prototype.createGraphics=function(g,d){for(var m=arguments.length,p=new Array(2<m?m-2:0),h=2;h<m;h++)p[h-2]=arguments[h];return p[0]instanceof HTMLCanvasElement&&(p[1]=p[0],p[0]=v.P2D),E.default._validateParameters("createGraphics",arguments),new E.default.Graphics(g,d,p[0],this,p[1])},E.default.prototype.createFramebuffer=function(g){return new E.default.Framebuffer(this,g)},E.default.prototype.clearDepth=function(g){this._assert3d("clearDepth"),this._renderer.clearDepth(g)},E.default.prototype.blendMode=function(g){E.default._validateParameters("blendMode",arguments),g===v.NORMAL&&(console.warn("NORMAL has been deprecated for use in blendMode. defaulting to BLEND instead."),g=v.BLEND),this._renderer.blendMode(g)},E.default);H.default=f},{"../webgl/p5.RendererGL":341,"./constants":272,"./main":283,"./p5.Graphics":285,"./p5.Renderer2D":287,"core-js/modules/es.array.filter":157,"core-js/modules/es.array.iterator":165,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.to-string":190,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246}],290:[function(l,de,H){"use strict";function M(d){return(M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(m){return typeof m}:function(m){return m&&"function"==typeof Symbol&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":typeof m})(d)}function E(d){return(E="function"==typeof Symbol&&"symbol"===M(Symbol.iterator)?function(m){return M(m)}:function(m){return m&&"function"==typeof Symbol&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":M(m)})(d)}l("core-js/modules/es.symbol"),l("core-js/modules/es.symbol.description"),l("core-js/modules/es.symbol.iterator"),l("core-js/modules/es.array.from"),l("core-js/modules/es.array.iterator"),l("core-js/modules/es.array.slice"),l("core-js/modules/es.object.get-own-property-descriptor"),l("core-js/modules/es.object.to-string"),l("core-js/modules/es.regexp.to-string"),l("core-js/modules/es.string.iterator"),l("core-js/modules/es.weak-map"),l("core-js/modules/web.dom-collections.iterator"),l("core-js/modules/es.array.slice"),Object.defineProperty(H,"__esModule",{value:!0}),H.default=void 0;var v=f(l("../main")),S=function(d){if(d&&d.__esModule)return d;if(null===d||"object"!==E(d)&&"function"!=typeof d)return{default:d};var m=C();if(m&&m.has(d))return m.get(d);var p,h={},y=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(p in d){var b;Object.prototype.hasOwnProperty.call(d,p)&&((b=y?Object.getOwnPropertyDescriptor(d,p):null)&&(b.get||b.set)?Object.defineProperty(h,p,b):h[p]=d[p])}return h.default=d,m&&m.set(d,h),h}(l("../constants")),T=f(l("../helpers"));function C(){var d;return"function"!=typeof WeakMap?null:(C=function(){return d},d=new WeakMap)}function f(d){return d&&d.__esModule?d:{default:d}}l("../friendly_errors/fes_core"),l("../friendly_errors/file_errors"),l("../friendly_errors/validate_params"),v.default.prototype._normalizeArcAngles=function(d,m,p,h,y){var b;return d-=S.TWO_PI*Math.floor(d/S.TWO_PI),m-=S.TWO_PI*Math.floor(m/S.TWO_PI),b=Math.min(Math.abs(d-m),S.TWO_PI-Math.abs(d-m)),y&&(d=d<=S.HALF_PI?Math.atan(p/h*Math.tan(d)):d>S.HALF_PI&&d<=3*S.HALF_PI?Math.atan(p/h*Math.tan(d))+S.PI:Math.atan(p/h*Math.tan(d))+S.TWO_PI,m=m<=S.HALF_PI?Math.atan(p/h*Math.tan(m)):m>S.HALF_PI&&m<=3*S.HALF_PI?Math.atan(p/h*Math.tan(m))+S.PI:Math.atan(p/h*Math.tan(m))+S.TWO_PI),m<d&&(m+=S.TWO_PI),{start:d,stop:m,correspondToSamePoint:b<1e-5}},v.default.prototype.arc=function(d,m,p,h,y,b,x,D){return v.default._validateParameters("arc",arguments),(this._renderer._doStroke||this._renderer._doFill)&&y!==b&&(y=this._toRadians(y),b=this._toRadians(b),d=T.default.modeAdjust(d,m,p,h,this._renderer._ellipseMode),(m=this._normalizeArcAngles(y,b,d.w,d.h,!0)).correspondToSamePoint?this._renderer.ellipse([d.x,d.y,d.w,d.h,D]):(this._renderer.arc(d.x,d.y,d.w,d.h,m.start,m.stop,x,D),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._accsOutput("arc",[d.x,d.y,d.w,d.h,m.start,m.stop,x]))),this},v.default.prototype.ellipse=function(d,m,p,h,y){return v.default._validateParameters("ellipse",arguments),this._renderEllipse.apply(this,arguments)},v.default.prototype.circle=function(){for(var d=arguments.length,m=new Array(d),p=0;p<d;p++)m[p]=arguments[p];v.default._validateParameters("circle",m);var h=m.slice(0,2);return h.push(m[2],m[2]),this._renderEllipse.apply(this,function g(d){return function(m){if(Array.isArray(m)){for(var p=0,h=new Array(m.length);p<m.length;p++)h[p]=m[p];return h}}(d)||function(m){if(Symbol.iterator in Object(m)||"[object Arguments]"===Object.prototype.toString.call(m))return Array.from(m)}(d)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}(h))},v.default.prototype._renderEllipse=function(d,m,p,h,y){return(this._renderer._doStroke||this._renderer._doFill)&&(d=T.default.modeAdjust(d,m,p,h=void 0===h?p:h,this._renderer._ellipseMode),this._renderer.ellipse([d.x,d.y,d.w,d.h,y]),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._accsOutput("ellipse",[d.x,d.y,d.w,d.h])),this},v.default.prototype.line=function(){for(var d,m=arguments.length,p=new Array(m),h=0;h<m;h++)p[h]=arguments[h];return v.default._validateParameters("line",p),this._renderer._doStroke&&(d=this._renderer).line.apply(d,p),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._accsOutput("line",p),this},v.default.prototype.point=function(){for(var d,m=arguments.length,p=new Array(m),h=0;h<m;h++)p[h]=arguments[h];return v.default._validateParameters("point",p),this._renderer._doStroke&&(1===p.length&&p[0]instanceof v.default.Vector?this._renderer.point.call(this._renderer,p[0].x,p[0].y,p[0].z):((d=this._renderer).point.apply(d,p),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._accsOutput("point",p))),this},v.default.prototype.quad=function(){for(var d,m=arguments.length,p=new Array(m),h=0;h<m;h++)p[h]=arguments[h];return v.default._validateParameters("quad",p),(this._renderer._doStroke||this._renderer._doFill)&&(this._renderer.isP3D&&p.length<12?this._renderer.quad.call(this._renderer,p[0],p[1],0,p[2],p[3],0,p[4],p[5],0,p[6],p[7],0,p[8],p[9]):((d=this._renderer).quad.apply(d,p),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._accsOutput("quadrilateral",p))),this},v.default.prototype.rect=function(){for(var d=arguments.length,m=new Array(d),p=0;p<d;p++)m[p]=arguments[p];return v.default._validateParameters("rect",m),this._renderRect.apply(this,m)},v.default.prototype.square=function(d,m,p,h,y,b,x){return v.default._validateParameters("square",arguments),this._renderRect.call(this,d,m,p,p,h,y,b,x)},v.default.prototype._renderRect=function(){if(this._renderer._doStroke||this._renderer._doFill){3===arguments.length&&(arguments[3]=arguments[2]);for(var d=T.default.modeAdjust(arguments[0],arguments[1],arguments[2],arguments[3],this._renderer._rectMode),m=(this._renderer._rectMode===S.CORNER&&(d.w=arguments[2],d.h=arguments[3]),[d.x,d.y,d.w,d.h]),p=4;p<arguments.length;p++)m[p]=arguments[p];this._renderer.rect(m),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._accsOutput("rectangle",[d.x,d.y,d.w,d.h])}return this},v.default.prototype.triangle=function(){for(var d=arguments.length,m=new Array(d),p=0;p<d;p++)m[p]=arguments[p];return v.default._validateParameters("triangle",m),(this._renderer._doStroke||this._renderer._doFill)&&this._renderer.triangle(m),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._accsOutput("triangle",m),this},H.default=l=v.default},{"../constants":272,"../friendly_errors/fes_core":274,"../friendly_errors/file_errors":275,"../friendly_errors/validate_params":278,"../helpers":279,"../main":283,"core-js/modules/es.array.from":162,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.slice":169,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.to-string":190,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246}],291:[function(l,de,H){"use strict";function M(f){return(M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(g){return typeof g}:function(g){return g&&"function"==typeof Symbol&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":typeof g})(f)}function E(f){return(E="function"==typeof Symbol&&"symbol"===M(Symbol.iterator)?function(g){return M(g)}:function(g){return g&&"function"==typeof Symbol&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":M(g)})(f)}l("core-js/modules/es.symbol"),l("core-js/modules/es.symbol.description"),l("core-js/modules/es.symbol.iterator"),l("core-js/modules/es.array.iterator"),l("core-js/modules/es.object.get-own-property-descriptor"),l("core-js/modules/es.object.to-string"),l("core-js/modules/es.string.iterator"),l("core-js/modules/es.weak-map"),l("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(H,"__esModule",{value:!0}),H.default=void 0;var v=(C=l("../main"))&&C.__esModule?C:{default:C},S=function(f){if(f&&f.__esModule)return f;if(null===f||"object"!==E(f)&&"function"!=typeof f)return{default:f};var g=T();if(g&&g.has(f))return g.get(f);var d,m={},p=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(d in f){var h;Object.prototype.hasOwnProperty.call(f,d)&&((h=p?Object.getOwnPropertyDescriptor(f,d):null)&&(h.get||h.set)?Object.defineProperty(m,d,h):m[d]=f[d])}return m.default=f,g&&g.set(f,m),m}(l("../constants"));function T(){var f;return"function"!=typeof WeakMap?null:(T=function(){return f},f=new WeakMap)}v.default.prototype.ellipseMode=function(f){return v.default._validateParameters("ellipseMode",arguments),f!==S.CORNER&&f!==S.CORNERS&&f!==S.RADIUS&&f!==S.CENTER||(this._renderer._ellipseMode=f),this},v.default.prototype.noSmooth=function(){return this._renderer.isP3D?this.setAttributes("antialias",!1):"imageSmoothingEnabled"in this.drawingContext&&(this.drawingContext.imageSmoothingEnabled=!1),this},v.default.prototype.rectMode=function(f){return v.default._validateParameters("rectMode",arguments),f!==S.CORNER&&f!==S.CORNERS&&f!==S.RADIUS&&f!==S.CENTER||(this._renderer._rectMode=f),this},v.default.prototype.smooth=function(){return this._renderer.isP3D?this.setAttributes("antialias",!0):"imageSmoothingEnabled"in this.drawingContext&&(this.drawingContext.imageSmoothingEnabled=!0),this},v.default.prototype.strokeCap=function(f){return v.default._validateParameters("strokeCap",arguments),f!==S.ROUND&&f!==S.SQUARE&&f!==S.PROJECT||this._renderer.strokeCap(f),this},v.default.prototype.strokeJoin=function(f){return v.default._validateParameters("strokeJoin",arguments),f!==S.ROUND&&f!==S.BEVEL&&f!==S.MITER||this._renderer.strokeJoin(f),this},v.default.prototype.strokeWeight=function(f){return v.default._validateParameters("strokeWeight",arguments),this._renderer.strokeWeight(f),this};var C=v.default;H.default=C},{"../constants":272,"../main":283,"core-js/modules/es.array.iterator":165,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.to-string":190,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246}],292:[function(l,de,H){"use strict";Object.defineProperty(H,"__esModule",{value:!0}),H.default=void 0;var M=(E=l("../main"))&&E.__esModule?E:{default:E};l("../friendly_errors/fes_core"),l("../friendly_errors/file_errors"),l("../friendly_errors/validate_params"),M.default.prototype.bezier=function(){for(var v,S=arguments.length,T=new Array(S),C=0;C<S;C++)T[C]=arguments[C];return M.default._validateParameters("bezier",T),(this._renderer._doStroke||this._renderer._doFill)&&(v=this._renderer).bezier.apply(v,T),this},M.default.prototype.bezierDetail=function(v){return M.default._validateParameters("bezierDetail",arguments),this._bezierDetail=v,this},M.default.prototype.bezierPoint=function(v,S,T,C,f){M.default._validateParameters("bezierPoint",arguments);var g=1-f;return Math.pow(g,3)*v+3*Math.pow(g,2)*f*S+3*g*Math.pow(f,2)*T+Math.pow(f,3)*C},M.default.prototype.bezierTangent=function(v,S,T,C,f){M.default._validateParameters("bezierTangent",arguments);var g=1-f;return 3*C*Math.pow(f,2)-3*T*Math.pow(f,2)+6*T*g*f-6*S*g*f+3*S*Math.pow(g,2)-3*v*Math.pow(g,2)},M.default.prototype.curve=function(){for(var v,S=arguments.length,T=new Array(S),C=0;C<S;C++)T[C]=arguments[C];return M.default._validateParameters("curve",T),this._renderer._doStroke&&(v=this._renderer).curve.apply(v,T),this},M.default.prototype.curveDetail=function(v){return M.default._validateParameters("curveDetail",arguments),this._curveDetail=v<3?3:v,this},M.default.prototype.curveTightness=function(v){return M.default._validateParameters("curveTightness",arguments),this._renderer._curveTightness=v,this},M.default.prototype.curvePoint=function(v,S,T,C,f){M.default._validateParameters("curvePoint",arguments);var g=this._renderer._curveTightness,d=f*f*f,m=f*f;return v*((g-1)/2*d+(1-g)*m+(g-1)/2*f)+S*((g+3)/2*d+(-5-g)/2*m+1)+T*((-3-g)/2*d+(g+2)*m+(1-g)/2*f)+C*((1-g)/2*d+(g-1)/2*m)},M.default.prototype.curveTangent=function(v,S,T,C,m){M.default._validateParameters("curveTangent",arguments);var g=this._renderer._curveTightness,d=m*m*3;return v*((g-1)/2*d+(1-g)*(m*=2)+(g-1)/2)+S*((g+3)/2*d+(-5-g)/2*m)+T*((-3-g)/2*d+(g+2)*m+(1-g)/2)+C*((1-g)/2*d+(g-1)/2*m)};var E=M.default;H.default=E},{"../friendly_errors/fes_core":274,"../friendly_errors/file_errors":275,"../friendly_errors/validate_params":278,"../main":283}],293:[function(l,de,H){"use strict";function M(x){return(M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(D){return typeof D}:function(D){return D&&"function"==typeof Symbol&&D.constructor===Symbol&&D!==Symbol.prototype?"symbol":typeof D})(x)}function E(x){return(E="function"==typeof Symbol&&"symbol"===M(Symbol.iterator)?function(D){return M(D)}:function(D){return D&&"function"==typeof Symbol&&D.constructor===Symbol&&D!==Symbol.prototype?"symbol":M(D)})(x)}l("core-js/modules/es.symbol"),l("core-js/modules/es.symbol.description"),l("core-js/modules/es.symbol.iterator"),l("core-js/modules/es.array.iterator"),l("core-js/modules/es.array.slice"),l("core-js/modules/es.object.get-own-property-descriptor"),l("core-js/modules/es.object.to-string"),l("core-js/modules/es.string.iterator"),l("core-js/modules/es.weak-map"),l("core-js/modules/web.dom-collections.iterator"),l("core-js/modules/es.array.slice"),Object.defineProperty(H,"__esModule",{value:!0}),H.default=void 0;var v=(b=l("../main"))&&b.__esModule?b:{default:b},S=function(x){if(x&&x.__esModule)return x;if(null===x||"object"!==E(x)&&"function"!=typeof x)return{default:x};var D=T();if(D&&D.has(x))return D.get(x);var N,U={},R=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(N in x){var L;Object.prototype.hasOwnProperty.call(x,N)&&((L=R?Object.getOwnPropertyDescriptor(x,N):null)&&(L.get||L.set)?Object.defineProperty(U,N,L):U[N]=x[N])}return U.default=x,D&&D.set(x,U),U}(l("../constants"));function T(){var x;return"function"!=typeof WeakMap?null:(T=function(){return x},x=new WeakMap)}var C=null,f=[],g=[],d=!1,m=!1,p=!1,h=!1,y=!0,b=(v.default.prototype.beginContour=function(){return this._renderer.isP3D?this._renderer.beginContour():(g=[],h=!0),this},v.default.prototype.beginShape=function(x){var D;return v.default._validateParameters("beginShape",arguments),this._renderer.isP3D?(D=this._renderer).beginShape.apply(D,arguments):(C=x===S.POINTS||x===S.LINES||x===S.TRIANGLES||x===S.TRIANGLE_FAN||x===S.TRIANGLE_STRIP||x===S.QUADS||x===S.QUAD_STRIP?x:null,f=[],g=[]),this},v.default.prototype.bezierVertex=function(){for(var x,D=arguments.length,N=new Array(D),U=0;U<D;U++)N[U]=arguments[U];if(v.default._validateParameters("bezierVertex",N),this._renderer.isP3D)(x=this._renderer).bezierVertex.apply(x,N);else if(0===f.length)v.default._friendlyError("vertex() must be used once before calling bezierVertex()","bezierVertex");else{d=!0;for(var R=[],L=0;L<N.length;L++)R[L]=N[L];R.isVert=!1,(h?g:f).push(R)}return this},v.default.prototype.curveVertex=function(){for(var x,D=arguments.length,N=new Array(D),U=0;U<D;U++)N[U]=arguments[U];return v.default._validateParameters("curveVertex",N),this._renderer.isP3D?(x=this._renderer).curveVertex.apply(x,N):(m=!0,this.vertex(N[0],N[1])),this},v.default.prototype.endContour=function(){if(!this._renderer.isP3D){var x=g[0].slice();x.isVert=g[0].isVert,x.moveTo=!1,g.push(x),y&&(f.push(f[0]),y=!1);for(var D=0;D<g.length;D++)f.push(g[D])}return this},v.default.prototype.endShape=function(x){var D=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1;if(v.default._validateParameters("endShape",arguments),D<1&&(console.log("\u{1f338} p5.js says: You can not have less than one instance"),D=1),this._renderer.isP3D)this._renderer.endShape(x,m,d,p,h,C,D);else{if(1!==D&&console.log("\u{1f338} p5.js says: Instancing is only supported in WebGL2 mode"),0===f.length)return this;if(!this._renderer._doStroke&&!this._renderer._doFill)return this;(D=x===S.CLOSE)&&!h&&f.push(f[0]),this._renderer.endShape(x,f,m,d,p,h,C),y=!(h=p=d=m=!1),D&&f.pop()}return this},v.default.prototype.quadraticVertex=function(){for(var x,D=arguments.length,N=new Array(D),U=0;U<D;U++)N[U]=arguments[U];if(v.default._validateParameters("quadraticVertex",N),this._renderer.isP3D)(x=this._renderer).quadraticVertex.apply(x,N);else{if(this._contourInited)return(x={}).x=N[0],x.y=N[1],x.x3=N[2],x.y3=N[3],x.type=S.QUADRATIC,this._contourVertices.push(x),this;if(0<f.length){p=!0;for(var R=[],L=0;L<N.length;L++)R[L]=N[L];R.isVert=!1,(h?g:f).push(R)}else v.default._friendlyError("vertex() must be used once before calling quadraticVertex()","quadraticVertex")}return this},v.default.prototype.vertex=function(x,D,N,U,R){var L;return this._renderer.isP3D?(L=this._renderer).vertex.apply(L,arguments):((L=[]).isVert=!0,L[0]=x,L[1]=D,L[2]=0,L[3]=0,L[4]=0,L[5]=this._renderer._getFill(),L[6]=this._renderer._getStroke(),N&&(L.moveTo=N),(h?(0===g.length&&(L.moveTo=!0),g):f).push(L)),this},v.default.prototype.normal=function(x,D,N){var U;return this._assert3d("normal"),v.default._validateParameters("normal",arguments),(U=this._renderer).normal.apply(U,arguments),this},v.default);H.default=b},{"../constants":272,"../main":283,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.slice":169,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.to-string":190,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246}],294:[function(l,de,H){},{}],295:[function(l,de,H){"use strict";l("core-js/modules/es.object.assign"),l("core-js/modules/es.object.assign"),Object.defineProperty(H,"__esModule",{value:!0}),H.default=void 0,(l=(l=l("./main"))&&l.__esModule?l:{default:l}).default.prototype.noLoop=function(){this._loop=!1},l.default.prototype.loop=function(){this._loop||(this._loop=!0,this._setupDone&&this._draw())},l.default.prototype.isLooping=function(){return this._loop},l.default.prototype.push=function(){this._styles.push({props:{_colorMode:this._colorMode},renderer:this._renderer.push()})},l.default.prototype.pop=function(){var M=this._styles.pop();M?(this._renderer.pop(M.renderer),Object.assign(this,M.props)):console.warn("pop() was called without matching push()")},l.default.prototype.redraw=function(M){if(!this._inUserDraw&&this._setupDone){var E=parseInt(M),v=((isNaN(E)||E<1)&&(E=1),this._isGlobal?window:this);if("function"==typeof v.draw){void 0===v.setup&&v.scale(v._pixelDensity,v._pixelDensity);for(var S=0;S<E;S++){v.resetMatrix(),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._updateAccsOutput(),v._renderer.isP3D&&v._renderer._update(),v._setProperty("frameCount",v.frameCount+1),this.callRegisteredHooksFor("pre"),this._inUserDraw=!0;try{v.draw()}finally{this._inUserDraw=!1}this.callRegisteredHooksFor("post")}}}},H.default=l=l.default},{"./main":283,"core-js/modules/es.object.assign":183}],296:[function(l,de,H){"use strict";l("core-js/modules/es.symbol"),l("core-js/modules/es.symbol.description"),l("core-js/modules/es.symbol.iterator"),l("core-js/modules/es.array.from"),l("core-js/modules/es.array.iterator"),l("core-js/modules/es.object.get-prototype-of"),l("core-js/modules/es.object.to-string"),l("core-js/modules/es.regexp.to-string"),l("core-js/modules/es.string.iterator"),l("core-js/modules/es.typed-array.uint8-array"),l("core-js/modules/es.typed-array.copy-within"),l("core-js/modules/es.typed-array.every"),l("core-js/modules/es.typed-array.fill"),l("core-js/modules/es.typed-array.filter"),l("core-js/modules/es.typed-array.find"),l("core-js/modules/es.typed-array.find-index"),l("core-js/modules/es.typed-array.for-each"),l("core-js/modules/es.typed-array.includes"),l("core-js/modules/es.typed-array.index-of"),l("core-js/modules/es.typed-array.iterator"),l("core-js/modules/es.typed-array.join"),l("core-js/modules/es.typed-array.last-index-of"),l("core-js/modules/es.typed-array.map"),l("core-js/modules/es.typed-array.reduce"),l("core-js/modules/es.typed-array.reduce-right"),l("core-js/modules/es.typed-array.reverse"),l("core-js/modules/es.typed-array.set"),l("core-js/modules/es.typed-array.slice"),l("core-js/modules/es.typed-array.some"),l("core-js/modules/es.typed-array.sort"),l("core-js/modules/es.typed-array.subarray"),l("core-js/modules/es.typed-array.to-locale-string"),l("core-js/modules/es.typed-array.to-string"),l("core-js/modules/web.dom-collections.iterator"),l("core-js/modules/es.array.iterator"),l("core-js/modules/es.object.get-prototype-of"),l("core-js/modules/es.object.to-string"),l("core-js/modules/es.typed-array.uint8-array"),l("core-js/modules/es.typed-array.copy-within"),l("core-js/modules/es.typed-array.every"),l("core-js/modules/es.typed-array.fill"),l("core-js/modules/es.typed-array.filter"),l("core-js/modules/es.typed-array.find"),l("core-js/modules/es.typed-array.find-index"),l("core-js/modules/es.typed-array.for-each"),l("core-js/modules/es.typed-array.includes"),l("core-js/modules/es.typed-array.index-of"),l("core-js/modules/es.typed-array.iterator"),l("core-js/modules/es.typed-array.join"),l("core-js/modules/es.typed-array.last-index-of"),l("core-js/modules/es.typed-array.map"),l("core-js/modules/es.typed-array.reduce"),l("core-js/modules/es.typed-array.reduce-right"),l("core-js/modules/es.typed-array.reverse"),l("core-js/modules/es.typed-array.set"),l("core-js/modules/es.typed-array.slice"),l("core-js/modules/es.typed-array.some"),l("core-js/modules/es.typed-array.sort"),l("core-js/modules/es.typed-array.subarray"),l("core-js/modules/es.typed-array.to-locale-string"),l("core-js/modules/es.typed-array.to-string"),Object.defineProperty(H,"__esModule",{value:!0}),H.default=void 0;var M=(l=l("./main"))&&l.__esModule?l:{default:l};M.default.prototype.applyMatrix=function(){var v=(arguments.length<=0?void 0:arguments[0])instanceof Object.getPrototypeOf(Uint8Array);return Array.isArray(arguments.length<=0?void 0:arguments[0])||v?(v=this._renderer).applyMatrix.apply(v,function E(v){return function(S){if(Array.isArray(S)){for(var T=0,C=new Array(S.length);T<S.length;T++)C[T]=S[T];return C}}(v)||function(S){if(Symbol.iterator in Object(S)||"[object Arguments]"===Object.prototype.toString.call(S))return Array.from(S)}(v)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}(arguments.length<=0?void 0:arguments[0])):(v=this._renderer).applyMatrix.apply(v,arguments),this},M.default.prototype.resetMatrix=function(){return this._renderer.resetMatrix(),this},M.default.prototype.rotate=function(v,S){return M.default._validateParameters("rotate",arguments),this._renderer.rotate(this._toRadians(v),S),this},M.default.prototype.rotateX=function(v){return this._assert3d("rotateX"),M.default._validateParameters("rotateX",arguments),this._renderer.rotateX(this._toRadians(v)),this},M.default.prototype.rotateY=function(v){return this._assert3d("rotateY"),M.default._validateParameters("rotateY",arguments),this._renderer.rotateY(this._toRadians(v)),this},M.default.prototype.rotateZ=function(v){return this._assert3d("rotateZ"),M.default._validateParameters("rotateZ",arguments),this._renderer.rotateZ(this._toRadians(v)),this},M.default.prototype.scale=function(v,S,T){var C;return M.default._validateParameters("scale",arguments),v instanceof M.default.Vector?(v=(C=v).x,S=C.y,T=C.z):Array.isArray(v)&&(v=(C=v)[0],S=C[1],T=C[2]||1),isNaN(S)?S=T=v:isNaN(T)&&(T=1),this._renderer.scale(v,S,T),this},M.default.prototype.shearX=function(v){return M.default._validateParameters("shearX",arguments),v=this._toRadians(v),this._renderer.applyMatrix(1,0,Math.tan(v),1,0,0),this},M.default.prototype.shearY=function(v){return M.default._validateParameters("shearY",arguments),v=this._toRadians(v),this._renderer.applyMatrix(1,Math.tan(v),0,1,0,0),this},M.default.prototype.translate=function(v,S,T){return M.default._validateParameters("translate",arguments),this._renderer.isP3D?this._renderer.translate(v,S,T):this._renderer.translate(v,S),this},H.default=l=M.default},{"./main":283,"core-js/modules/es.array.from":162,"core-js/modules/es.array.iterator":165,"core-js/modules/es.object.get-prototype-of":188,"core-js/modules/es.object.to-string":190,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.typed-array.copy-within":213,"core-js/modules/es.typed-array.every":214,"core-js/modules/es.typed-array.fill":215,"core-js/modules/es.typed-array.filter":216,"core-js/modules/es.typed-array.find":218,"core-js/modules/es.typed-array.find-index":217,"core-js/modules/es.typed-array.for-each":221,"core-js/modules/es.typed-array.includes":222,"core-js/modules/es.typed-array.index-of":223,"core-js/modules/es.typed-array.iterator":226,"core-js/modules/es.typed-array.join":227,"core-js/modules/es.typed-array.last-index-of":228,"core-js/modules/es.typed-array.map":229,"core-js/modules/es.typed-array.reduce":231,"core-js/modules/es.typed-array.reduce-right":230,"core-js/modules/es.typed-array.reverse":232,"core-js/modules/es.typed-array.set":233,"core-js/modules/es.typed-array.slice":234,"core-js/modules/es.typed-array.some":235,"core-js/modules/es.typed-array.sort":236,"core-js/modules/es.typed-array.subarray":237,"core-js/modules/es.typed-array.to-locale-string":238,"core-js/modules/es.typed-array.to-string":239,"core-js/modules/es.typed-array.uint8-array":242,"core-js/modules/web.dom-collections.iterator":246}],297:[function(l,de,H){"use strict";function M(T){return(M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(C){return typeof C}:function(C){return C&&"function"==typeof Symbol&&C.constructor===Symbol&&C!==Symbol.prototype?"symbol":typeof C})(T)}l("core-js/modules/es.symbol"),l("core-js/modules/es.symbol.description"),l("core-js/modules/es.symbol.iterator"),l("core-js/modules/es.array.for-each"),l("core-js/modules/es.array.from"),l("core-js/modules/es.array.iterator"),l("core-js/modules/es.object.keys"),l("core-js/modules/es.object.to-string"),l("core-js/modules/es.regexp.exec"),l("core-js/modules/es.regexp.to-string"),l("core-js/modules/es.string.ends-with"),l("core-js/modules/es.string.iterator"),l("core-js/modules/es.string.replace"),l("core-js/modules/web.dom-collections.for-each"),l("core-js/modules/web.dom-collections.iterator"),l("core-js/modules/es.symbol"),l("core-js/modules/es.symbol.description"),l("core-js/modules/es.symbol.iterator"),l("core-js/modules/es.array.for-each"),l("core-js/modules/es.array.iterator"),l("core-js/modules/es.object.keys"),l("core-js/modules/es.object.to-string"),l("core-js/modules/es.regexp.exec"),l("core-js/modules/es.regexp.to-string"),l("core-js/modules/es.string.ends-with"),l("core-js/modules/es.string.iterator"),l("core-js/modules/es.string.replace"),l("core-js/modules/web.dom-collections.for-each"),l("core-js/modules/web.dom-collections.iterator");var E=(l=l("../core/main"))&&l.__esModule?l:{default:l};function v(T){return function(C){if(Array.isArray(C)){for(var f=0,g=new Array(C.length);f<C.length;f++)g[f]=C[f];return g}}(T)||function(C){if(Symbol.iterator in Object(C)||"[object Arguments]"===Object.prototype.toString.call(C))return Array.from(C)}(T)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function S(T){return(S="function"==typeof Symbol&&"symbol"===M(Symbol.iterator)?function(C){return M(C)}:function(C){return C&&"function"==typeof Symbol&&C.constructor===Symbol&&C!==Symbol.prototype?"symbol":M(C)})(T)}E.default.prototype.storeItem=function(T,C){"string"!=typeof T&&console.log("The argument that you passed to storeItem() - ".concat(T," is not a string.")),T.endsWith("p5TypeID")&&console.log("The argument that you passed to storeItem() - ".concat(T," must not end with 'p5TypeID'.")),void 0===C&&console.log("You cannot store undefined variables using storeItem().");var f=S(C);switch(f){case"number":case"boolean":C=C.toString();break;case"object":C instanceof E.default.Color?f="p5.Color":C instanceof E.default.Vector&&(f="p5.Vector",C=[C.x,C.y,C.z]),C=JSON.stringify(C)}localStorage.setItem(T,C),T="".concat(T,"p5TypeID"),localStorage.setItem(T,f)},E.default.prototype.getItem=function(T){var C=localStorage.getItem(T),f=localStorage.getItem("".concat(T,"p5TypeID"));if(void 0===f)console.log("Unable to determine type of item stored under ".concat(T,"in local storage. Did you save the item with something other than setItem()?"));else if(null!==C)switch(f){case"number":C=parseFloat(C);break;case"boolean":C="true"===C;break;case"object":C=JSON.parse(C);break;case"p5.Color":C=JSON.parse(C),C=this.color.apply(this,v(C.levels));break;case"p5.Vector":C=JSON.parse(C),C=this.createVector.apply(this,v(C))}return C},E.default.prototype.clearStorage=function(){var T=this;Object.keys(localStorage).forEach(function(C){C.endsWith("p5TypeID")&&T.removeItem(C.replace("p5TypeID",""))})},E.default.prototype.removeItem=function(T){"string"!=typeof T&&console.log("The argument that you passed to removeItem() - ".concat(T," is not a string.")),localStorage.removeItem(T),localStorage.removeItem("".concat(T,"p5TypeID"))}},{"../core/main":283,"core-js/modules/es.array.for-each":161,"core-js/modules/es.array.from":162,"core-js/modules/es.array.iterator":165,"core-js/modules/es.object.keys":189,"core-js/modules/es.object.to-string":190,"core-js/modules/es.regexp.exec":195,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.string.ends-with":198,"core-js/modules/es.string.iterator":200,"core-js/modules/es.string.replace":204,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/web.dom-collections.for-each":245,"core-js/modules/web.dom-collections.iterator":246}],298:[function(l,de,H){"use strict";function M(p){return(M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(h){return typeof h}:function(h){return h&&"function"==typeof Symbol&&h.constructor===Symbol&&h!==Symbol.prototype?"symbol":typeof h})(p)}function E(p){return(E="function"==typeof Symbol&&"symbol"===M(Symbol.iterator)?function(h){return M(h)}:function(h){return h&&"function"==typeof Symbol&&h.constructor===Symbol&&h!==Symbol.prototype?"symbol":M(h)})(p)}l("core-js/modules/es.symbol"),l("core-js/modules/es.symbol.description"),l("core-js/modules/es.symbol.iterator"),l("core-js/modules/es.array.concat"),l("core-js/modules/es.array.iterator"),l("core-js/modules/es.object.get-prototype-of"),l("core-js/modules/es.object.keys"),l("core-js/modules/es.object.to-string"),l("core-js/modules/es.reflect.construct"),l("core-js/modules/es.regexp.to-string"),l("core-js/modules/es.string.iterator"),l("core-js/modules/web.dom-collections.iterator"),l("core-js/modules/es.array.concat"),l("core-js/modules/es.object.keys"),Object.defineProperty(H,"__esModule",{value:!0}),H.default=void 0;var v=(l=l("../core/main"))&&l.__esModule?l:{default:l};function S(p,h){if("function"!=typeof h&&null!==h)throw new TypeError("Super expression must either be null or a function");p.prototype=Object.create(h&&h.prototype,{constructor:{value:p,writable:!0,configurable:!0}}),h&&T(p,h)}function T(p,h){return(T=Object.setPrototypeOf||function(y,b){return y.__proto__=b,y})(p,h)}function C(p){return function(){var h,y=f(p);if(h=function(){if(typeof Reflect<"u"&&Reflect.construct&&!Reflect.construct.sham){if("function"==typeof Proxy)return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch{}}}()?(h=f(this).constructor,Reflect.construct(y,arguments,h)):y.apply(this,arguments),y=this,!h||"object"!==E(h)&&"function"!=typeof h){if(void 0!==y)return y;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return h}}function f(p){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(h){return h.__proto__||Object.getPrototypeOf(h)})(p)}function g(p,h){if(!(p instanceof h))throw new TypeError("Cannot call a class as a function")}function d(p,h){for(var y=0;y<h.length;y++){var b=h[y];b.enumerable=b.enumerable||!1,b.configurable=!0,"value"in b&&(b.writable=!0),Object.defineProperty(p,b.key,b)}}function m(p,h,y){h&&d(p.prototype,h),y&&d(p,y)}v.default.prototype.createStringDict=function(p,h){return v.default._validateParameters("createStringDict",arguments),new v.default.StringDict(p,h)},v.default.prototype.createNumberDict=function(p,h){return v.default._validateParameters("createNumberDict",arguments),new v.default.NumberDict(p,h)},v.default.TypedDict=function(){function p(h,y){return g(this,p),h instanceof Object?this.data=h:(this.data={},this.data[h]=y),this}return m(p,[{key:"size",value:function(){return Object.keys(this.data).length}},{key:"hasKey",value:function(h){return this.data.hasOwnProperty(h)}},{key:"get",value:function(h){if(this.data.hasOwnProperty(h))return this.data[h];console.log("".concat(h," does not exist in this Dictionary"))}},{key:"set",value:function(h,y){this._validate(y)?this.data[h]=y:console.log("Those values dont work for this dictionary type.")}},{key:"_addObj",value:function(h){for(var y in h)this.set(y,h[y])}},{key:"create",value:function(h,y){h instanceof Object&&void 0===y?this._addObj(h):void 0!==h?this.set(h,y):console.log("In order to create a new Dictionary entry you must pass an object or a key, value pair")}},{key:"clear",value:function(){this.data={}}},{key:"remove",value:function(h){if(!this.data.hasOwnProperty(h))throw new Error("".concat(h," does not exist in this Dictionary"));delete this.data[h]}},{key:"print",value:function(){for(var h in this.data)console.log("key:".concat(h," value:").concat(this.data[h]))}},{key:"saveTable",value:function(h){var y,b="";for(y in this.data)b+="".concat(y,",").concat(this.data[y],"\n");var x=new Blob([b],{type:"text/csv"});v.default.prototype.downloadFile(x,h||"mycsv","csv")}},{key:"saveJSON",value:function(h,y){v.default.prototype.saveJSON(this.data,h,y)}},{key:"_validate",value:function(h){return!0}}]),p}(),v.default.StringDict=function(){S(h,v.default.TypedDict);var p=C(h);function h(){g(this,h);for(var y=arguments.length,b=new Array(y),x=0;x<y;x++)b[x]=arguments[x];return p.call.apply(p,[this].concat(b))}return m(h,[{key:"_validate",value:function(y){return"string"==typeof y}}]),h}(),v.default.NumberDict=function(){S(h,v.default.TypedDict);var p=C(h);function h(){g(this,h);for(var y=arguments.length,b=new Array(y),x=0;x<y;x++)b[x]=arguments[x];return p.call.apply(p,[this].concat(b))}return m(h,[{key:"_validate",value:function(y){return"number"==typeof y}},{key:"add",value:function(y,b){this.data.hasOwnProperty(y)?this.data[y]+=b:console.log("The key - ".concat(y," does not exist in this dictionary."))}},{key:"sub",value:function(y,b){this.add(y,-b)}},{key:"mult",value:function(y,b){this.data.hasOwnProperty(y)?this.data[y]*=b:console.log("The key - ".concat(y," does not exist in this dictionary."))}},{key:"div",value:function(y,b){this.data.hasOwnProperty(y)?this.data[y]/=b:console.log("The key - ".concat(y," does not exist in this dictionary."))}},{key:"_valueTest",value:function(y){if(0===Object.keys(this.data).length)throw new Error("Unable to search for a minimum or maximum value on an empty NumberDict");if(1===Object.keys(this.data).length)return this.data[Object.keys(this.data)[0]];var b,x=this.data[Object.keys(this.data)[0]];for(b in this.data)this.data[b]*y<x*y&&(x=this.data[b]);return x}},{key:"minValue",value:function(){return this._valueTest(1)}},{key:"maxValue",value:function(){return this._valueTest(-1)}},{key:"_keyTest",value:function(y){if(0===Object.keys(this.data).length)throw new Error("Unable to use minValue on an empty NumberDict");if(1===Object.keys(this.data).length)return Object.keys(this.data)[0];for(var b=Object.keys(this.data)[0],x=1;x<Object.keys(this.data).length;x++)Object.keys(this.data)[x]*y<b*y&&(b=Object.keys(this.data)[x]);return b}},{key:"minKey",value:function(){return this._keyTest(1)}},{key:"maxKey",value:function(){return this._keyTest(-1)}}]),h}(),H.default=l=v.default.TypedDict},{"../core/main":283,"core-js/modules/es.array.concat":153,"core-js/modules/es.array.iterator":165,"core-js/modules/es.object.get-prototype-of":188,"core-js/modules/es.object.keys":189,"core-js/modules/es.object.to-string":190,"core-js/modules/es.reflect.construct":192,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/web.dom-collections.iterator":246}],299:[function(l,de,H){"use strict";function M(x){return(M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(D){return typeof D}:function(D){return D&&"function"==typeof Symbol&&D.constructor===Symbol&&D!==Symbol.prototype?"symbol":typeof D})(x)}l("core-js/modules/es.symbol"),l("core-js/modules/es.symbol.description"),l("core-js/modules/es.symbol.iterator"),l("core-js/modules/es.array.every"),l("core-js/modules/es.array.filter"),l("core-js/modules/es.array.for-each"),l("core-js/modules/es.array.from"),l("core-js/modules/es.array.index-of"),l("core-js/modules/es.array.iterator"),l("core-js/modules/es.array.map"),l("core-js/modules/es.array.slice"),l("core-js/modules/es.array.splice"),l("core-js/modules/es.function.name"),l("core-js/modules/es.object.assign"),l("core-js/modules/es.object.get-prototype-of"),l("core-js/modules/es.object.to-string"),l("core-js/modules/es.promise"),l("core-js/modules/es.reflect.construct"),l("core-js/modules/es.regexp.exec"),l("core-js/modules/es.regexp.to-string"),l("core-js/modules/es.string.iterator"),l("core-js/modules/es.string.replace"),l("core-js/modules/es.string.split"),l("core-js/modules/es.string.trim"),l("core-js/modules/web.dom-collections.for-each"),l("core-js/modules/web.dom-collections.iterator"),l("core-js/modules/web.url"),l("core-js/modules/es.symbol"),l("core-js/modules/es.symbol.description"),l("core-js/modules/es.symbol.iterator"),l("core-js/modules/es.array.every"),l("core-js/modules/es.array.filter"),l("core-js/modules/es.array.for-each"),l("core-js/modules/es.array.from"),l("core-js/modules/es.array.index-of"),l("core-js/modules/es.array.iterator"),l("core-js/modules/es.array.map"),l("core-js/modules/es.array.slice"),l("core-js/modules/es.array.splice"),l("core-js/modules/es.function.name"),l("core-js/modules/es.object.assign"),l("core-js/modules/es.object.to-string"),l("core-js/modules/es.promise"),l("core-js/modules/es.regexp.exec"),l("core-js/modules/es.regexp.to-string"),l("core-js/modules/es.string.iterator"),l("core-js/modules/es.string.replace"),l("core-js/modules/es.string.split"),l("core-js/modules/es.string.trim"),l("core-js/modules/web.dom-collections.for-each"),l("core-js/modules/web.dom-collections.iterator"),l("core-js/modules/web.url"),Object.defineProperty(H,"__esModule",{value:!0}),H.default=void 0;var E=(l=l("../core/main"))&&l.__esModule?l:{default:l};function v(x,D){for(var N=0;N<D.length;N++){var U=D[N];U.enumerable=U.enumerable||!1,U.configurable=!0,"value"in U&&(U.writable=!0),Object.defineProperty(x,U.key,U)}}function S(x,D,N){D&&v(x.prototype,D),N&&v(x,N)}function T(x,D){return(T=Object.setPrototypeOf||function(N,U){return N.__proto__=U,N})(x,D)}function f(x){if(void 0===x)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return x}function g(x){return(g=Object.setPrototypeOf?Object.getPrototypeOf:function(D){return D.__proto__||Object.getPrototypeOf(D)})(x)}function d(x,D){if(!(x instanceof D))throw new TypeError("Cannot call a class as a function")}function m(x){return(m="function"==typeof Symbol&&"symbol"===M(Symbol.iterator)?function(D){return M(D)}:function(D){return D&&"function"==typeof Symbol&&D.constructor===Symbol&&D!==Symbol.prototype?"symbol":M(D)})(x)}function p(x,D,N){return(D._userNode||document.body).appendChild(x),N=new(N?E.default.MediaElement:E.default.Element)(x,D),D._elements.push(N),N}E.default.prototype.select=function(x,D){return E.default._validateParameters("select",arguments),(D=this._getContainer(D).querySelector(x))?this._wrapElement(D):null},E.default.prototype.selectAll=function(x,D){E.default._validateParameters("selectAll",arguments);var N=[],U=this._getContainer(D).querySelectorAll(x);if(U)for(var R=0;R<U.length;R++){var L=this._wrapElement(U[R]);N.push(L)}return N},E.default.prototype._getContainer=function(x){var D=document;return"string"==typeof x?D=document.querySelector(x)||document:x instanceof E.default.Element?D=x.elt:x instanceof HTMLElement&&(D=x),D},E.default.prototype._wrapElement=function(x){var D,N=Array.prototype.slice.call(x.children);return"INPUT"===x.tagName&&"checkbox"===x.type?((D=new E.default.Element(x,this)).checked=function(){return 0===arguments.length?this.elt.checked:(this.elt.checked=!(arguments.length<=0||!arguments[0]),this)},D):"VIDEO"===x.tagName||"AUDIO"===x.tagName?new E.default.MediaElement(x,this):"SELECT"===x.tagName?this.createSelect(new E.default.Element(x,this)):0<N.length&&N.every(function(U){return"INPUT"===U.tagName||"LABEL"===U.tagName})&&("DIV"===x.tagName||"SPAN"===x.tagName)?this.createRadio(new E.default.Element(x,this)):new E.default.Element(x,this)},E.default.prototype.removeElements=function(x){E.default._validateParameters("removeElements",arguments),this._elements.filter(function(D){return!(D.elt instanceof HTMLCanvasElement)}).map(function(D){return D.remove()})},E.default.Element.prototype.changed=function(x){return E.default.Element._adjustListener("change",x,this),this},E.default.Element.prototype.input=function(x){return E.default.Element._adjustListener("input",x,this),this},E.default.prototype.createDiv=function(){var x=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",D=document.createElement("div");return D.innerHTML=x,p(D,this)},E.default.prototype.createP=function(){var x=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",D=document.createElement("p");return D.innerHTML=x,p(D,this)},E.default.prototype.createSpan=function(){var x=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",D=document.createElement("span");return D.innerHTML=x,p(D,this)},E.default.prototype.createImg=function(){E.default._validateParameters("createImg",arguments);var x,D=document.createElement("img"),N=arguments;return 1<N.length&&"string"==typeof N[1]&&(D.alt=N[1]),2<N.length&&"string"==typeof N[2]&&(D.crossOrigin=N[2]),D.src=N[0],x=p(D,this),D.addEventListener("load",function(){x.width=D.offsetWidth||D.width,x.height=D.offsetHeight||D.height;var U=N[N.length-1];"function"==typeof U&&U(x)}),x},E.default.prototype.createA=function(x,D,N){E.default._validateParameters("createA",arguments);var U=document.createElement("a");return U.href=x,U.innerHTML=D,N&&(U.target=N),p(U,this)},E.default.prototype.createSlider=function(x,D,N,U){E.default._validateParameters("createSlider",arguments);var R=document.createElement("input");return R.type="range",R.min=x,R.max=D,0===U?R.step=1e-18:U&&(R.step=U),"number"==typeof N&&(R.value=N),p(R,this)},E.default.prototype.createButton=function(x,D){E.default._validateParameters("createButton",arguments);var N=document.createElement("button");return N.innerHTML=x,D&&(N.value=D),p(N,this)},E.default.prototype.createCheckbox=function(){for(var x=arguments.length,D=new Array(x),N=0;N<x;N++)D[N]=arguments[N];E.default._validateParameters("createCheckbox",D);var U=document.createElement("div"),R=document.createElement("input"),L=(R.type="checkbox",document.createElement("label")),z=(L.appendChild(R),U.appendChild(L),p(U,this));return z.checked=function(){var F=z.elt.firstElementChild.getElementsByTagName("input")[0];if(F){if(0===arguments.length)return F.checked;F.checked=!(arguments.length<=0||!arguments[0])}return z},this.value=function(F){return z.value=F,this},D[0]&&(z.value(D[0]),(U=document.createElement("span")).innerHTML=D[0],L.appendChild(U)),D[1]&&(R.checked=!0),z},E.default.prototype.createSelect=function(){for(var x,D=arguments.length,N=new Array(D),U=0;U<D;U++)N[U]=arguments[U];E.default._validateParameters("createSelect",N);var R,L=N[0];return L instanceof E.default.Element&&L.elt instanceof HTMLSelectElement?this.elt=(x=L).elt:L instanceof HTMLSelectElement?(x=p(L,this),this.elt=L):(R=document.createElement("select"),L&&"boolean"==typeof L&&R.setAttribute("multiple","true"),x=p(R,this),this.elt=R),x.option=function(z,F){var q;if(void 0!==z){for(var k,Z=0;Z<this.elt.length;Z+=1)if(this.elt[Z].textContent===z){q=Z;break}void 0!==q?!1===F?this.elt.remove(q):this.elt[q].value=F:((k=document.createElement("option")).textContent=z,k.value=void 0===F?z:F,this.elt.appendChild(k),this._pInst._elements.push(k))}},x.selected=function(z){if(void 0!==z){for(var F=0;F<this.elt.length;F+=1)this.elt[F].value.toString()===z.toString()&&(this.elt.selectedIndex=F);return this}if(this.elt.getAttribute("multiple")){var q=[],k=!0,Z=!1,X=void 0;try{for(var W,oe=this.elt.selectedOptions[Symbol.iterator]();!(k=(W=oe.next()).done);k=!0)q.push(W.value.value)}catch(re){Z=!0,X=re}finally{try{k||null==oe.return||oe.return()}finally{if(Z)throw X}}return q}return this.elt.value},x.disable=function(z){if("string"==typeof z)for(var F=0;F<this.elt.length;F++)this.elt[F].value.toString()===z&&(this.elt[F].disabled=!0,this.elt[F].selected=!1);else this.elt.disabled=!0;return this},x.enable=function(z){if("string"==typeof z)for(var F=0;F<this.elt.length;F++)this.elt[F].value.toString()===z&&(this.elt[F].disabled=!1,this.elt[F].selected=!1);else{this.elt.disabled=!1;for(var q=0;q<this.elt.length;q++)this.elt[q].disabled=!1,this.elt[q].selected=!1}return this},x};var h=0;function y(x,z,N,U){var R=document.createElement(z),L=("string"==typeof(N=N||"")&&(N=[N]),!0),F=void(z=!1);try{for(var q,k=N[Symbol.iterator]();!(L=(q=k.next()).done);L=!0){var Z=q.value,X=document.createElement("source");X.setAttribute("src",Z),R.appendChild(X)}}catch(oe){z=!0,F=oe}finally{try{L||null==k.return||k.return()}finally{if(z)throw F}}var W=p(R,x,!0);return W.loadedmetadata=!1,R.addEventListener("loadedmetadata",function(){W.width=R.videoWidth,W.height=R.videoHeight,0===W.elt.width&&(W.elt.width=R.videoWidth),0===W.elt.height&&(W.elt.height=R.videoHeight),W.presetPlaybackRate&&(W.elt.playbackRate=W.presetPlaybackRate,delete W.presetPlaybackRate),W.loadedmetadata=!0}),"function"==typeof U&&R.addEventListener("canplaythrough",function oe(){U(W),R.removeEventListener("canplaythrough",oe)}),W}function b(x,D,N,U){d(this,b),this.callback=x,this.time=D,this.id=N,this.val=U}E.default.prototype.createRadio=function(){function x(z){return z instanceof HTMLInputElement&&"radio"===z.type}function D(z){return z instanceof HTMLLabelElement}var N,U,R,L=arguments.length<=0?void 0:arguments[0];return L instanceof E.default.Element&&(L.elt instanceof HTMLDivElement||L.elt instanceof HTMLSpanElement)?(N=L,this.elt=L.elt):L instanceof HTMLDivElement||L instanceof HTMLSpanElement?(N=p(L,this),U=this.elt=L,"string"==typeof(arguments.length<=1?void 0:arguments[1])&&(R=arguments.length<=1?void 0:arguments[1])):("string"==typeof L&&(R=L),U=document.createElement("div"),N=p(U,this),this.elt=U),N._name=R||"radioOption_".concat(h++),N._getOptionsArray=function(){return Array.from(this.elt.children).filter(function(z){return x(z)||D(z)&&x(z.firstElementChild)}).map(function(z){return x(z)?z:z.firstElementChild})},N.option=function(z,F){var q,k,Z,X=!0,W=!1,oe=void 0;try{for(var ie,re=N._getOptionsArray()[Symbol.iterator]();!(X=(ie=re.next()).done);X=!0){var le=ie.value;if(le.value===z){q=le;break}}}catch(pe){W=!0,oe=pe}finally{try{X||null==re.return||re.return()}finally{if(W)throw oe}}return void 0===q&&((q=document.createElement("input")).setAttribute("type","radio"),q.setAttribute("value",z)),q.setAttribute("name",N._name),D(q.parentElement)?k=q.parentElement:(k=document.createElement("label")).insertAdjacentElement("afterbegin",q),k.lastElementChild instanceof HTMLSpanElement?Z=k.lastElementChild:(Z=document.createElement("span"),q.insertAdjacentElement("afterend",Z)),Z.innerHTML=void 0===F?z:F,this.elt.appendChild(k),q},N.remove=function(z){var F=!0,q=!1,k=void 0;try{for(var Z,X=N._getOptionsArray()[Symbol.iterator]();!(F=(Z=X.next()).done);F=!0){var W=Z.value;if(W.value===z)return void(D(W.parentElement)?W.parentElement:W).remove()}}catch(oe){q=!0,k=oe}finally{try{F||null==X.return||X.return()}finally{if(q)throw k}}},N.value=function(){var z="",F=!0,q=!1,k=void 0;try{for(var Z,X=N._getOptionsArray()[Symbol.iterator]();!(F=(Z=X.next()).done);F=!0){var W=Z.value;if(W.checked){z=W.value;break}}}catch(oe){q=!0,k=oe}finally{try{F||null==X.return||X.return()}finally{if(q)throw k}}return z},N.selected=function(z){var F=null;if(void 0===z){var q=!0,k=!1,Z=void 0;try{for(var X,W=N._getOptionsArray()[Symbol.iterator]();!(q=(X=W.next()).done);q=!0){var oe=X.value;if(oe.checked){F=oe;break}}}catch(Ae){k=!0,Z=Ae}finally{try{q||null==W.return||W.return()}finally{if(k)throw Z}}}else{N._getOptionsArray().forEach(function(P){P.checked=!1,P.removeAttribute("checked")});var ie=!0;k=!1,Z=void 0;try{for(var re,le=N._getOptionsArray()[Symbol.iterator]();!(ie=(re=le.next()).done);ie=!0){var pe=re.value;pe.value===z&&(pe.setAttribute("checked",!0),pe.checked=!0,F=pe)}}catch(P){k=!0,Z=P}finally{try{ie||null==le.return||le.return()}finally{if(k)throw Z}}}return F},N.disable=function(){var z=!(0<arguments.length&&void 0!==arguments[0])||arguments[0],F=!0,q=!1,k=void 0;try{for(var Z,X=N._getOptionsArray()[Symbol.iterator]();!(F=(Z=X.next()).done);F=!0)Z.value.setAttribute("disabled",z)}catch(W){q=!0,k=W}finally{try{F||null==X.return||X.return()}finally{if(q)throw k}}},N},E.default.prototype.createColorPicker=function(x){E.default._validateParameters("createColorPicker",arguments);var D=document.createElement("input");return D.type="color",x?x instanceof E.default.Color?D.value=x.toString("#rrggbb"):(E.default.prototype._colorMode="rgb",E.default.prototype._colorMaxes={rgb:[255,255,255,255],hsb:[360,100,100,1],hsl:[360,100,100,1]},D.value=E.default.prototype.color(x).toString("#rrggbb")):D.value="#000000",(D=p(D,this)).color=function(){return x&&(x.mode&&(E.default.prototype._colorMode=x.mode),x.maxes&&(E.default.prototype._colorMaxes=x.maxes)),E.default.prototype.color(this.elt.value)},D},E.default.prototype.createInput=function(){var x=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",D=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"text",N=(E.default._validateParameters("createInput",arguments),document.createElement("input"));return N.setAttribute("value",x),N.setAttribute("type",D),p(N,this)},E.default.prototype.createFileInput=function(x){var D,N=1<arguments.length&&void 0!==arguments[1]&&arguments[1];if(E.default._validateParameters("createFileInput",arguments),window.File&&window.FileReader&&window.FileList&&window.Blob)return(D=document.createElement("input")).setAttribute("type","file"),N&&D.setAttribute("multiple",!0),D.addEventListener("change",function(U){var R=!0,L=!1,z=void 0;try{for(var F,q=U.target.files[Symbol.iterator]();!(R=(F=q.next()).done);R=!0)E.default.File._load(F.value,x)}catch(Z){L=!0,z=Z}finally{try{R||null==q.return||q.return()}finally{if(L)throw z}}},!1),p(D,this);console.log("The File APIs are not fully supported in this browser. Cannot create element.")},E.default.prototype.createVideo=function(x,D){return E.default._validateParameters("createVideo",arguments),y(this,"video",x,D)},E.default.prototype.createAudio=function(x,D){return E.default._validateParameters("createAudio",arguments),y(this,"audio",x,D)},E.default.prototype.VIDEO="video",E.default.prototype.AUDIO="audio",void 0===navigator.mediaDevices&&(navigator.mediaDevices={}),void 0===navigator.mediaDevices.getUserMedia&&(navigator.mediaDevices.getUserMedia=function(x){var D=navigator.webkitGetUserMedia||navigator.mozGetUserMedia;return D?new Promise(function(N,U){D.call(navigator,x,N,U)}):Promise.reject(new Error("getUserMedia is not implemented in this browser"))}),E.default.prototype.createCapture=function(){for(var x=arguments.length,D=new Array(x),N=0;N<x;N++)D[N]=arguments[N];if(E.default._validateParameters("createCapture",D),!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia)throw new DOMException("getUserMedia not supported in this browser");for(var U,R=!0,L=!0,z=!1,F=0,q=D;F<q.length;F++){var k=q[F];k===E.default.prototype.VIDEO?L=!1:k===E.default.prototype.AUDIO?R=!1:"object"===m(k)?(void 0!==k.flipped&&(z=k.flipped,delete k.flipped),Z=Object.assign({},Z,k)):"function"==typeof k&&(U=k)}var Z=Object.assign({},{video:R,audio:L},Z),X=document.createElement("video"),W=(X.setAttribute("playsinline",""),navigator.mediaDevices.getUserMedia(Z).then(function(oe){try{"srcObject"in X?X.srcObject=oe:X.src=window.URL.createObjectURL(oe)}catch{X.src=oe}}).catch(function(oe){"NotFoundError"===oe.name&&E.default._friendlyError("No webcam found on this device","createCapture"),"NotAllowedError"===oe.name&&E.default._friendlyError("Access to the camera was denied","createCapture"),console.error(oe)}),p(X,this,!0));return W.loadedmetadata=!1,X.addEventListener("loadedmetadata",function(){X.play(),X.width?(W.width=X.width,W.height=X.height,z&&(W.elt.style.transform="scaleX(-1)")):(W.width=W.elt.width=X.videoWidth,W.height=W.elt.height=X.videoHeight),W.loadedmetadata=!0,U&&U(X.srcObject)}),W.flipped=z,W},E.default.prototype.createElement=function(x,D){return E.default._validateParameters("createElement",arguments),x=document.createElement(x),void 0!==D&&(x.innerHTML=D),p(x,this)},E.default.Element.prototype.addClass=function(x){return this.elt.className?this.hasClass(x)||(this.elt.className=this.elt.className+" "+x):this.elt.className=x,this},E.default.Element.prototype.removeClass=function(x){return this.elt.classList.remove(x),this},E.default.Element.prototype.hasClass=function(x){return this.elt.classList.contains(x)},E.default.Element.prototype.toggleClass=function(x){return this.elt.classList.contains(x)?this.elt.classList.remove(x):this.elt.classList.add(x),this},E.default.Element.prototype.child=function(x){return void 0===x?this.elt.childNodes:("string"==typeof x?("#"===x[0]&&(x=x.substring(1)),x=document.getElementById(x)):x instanceof E.default.Element&&(x=x.elt),x instanceof HTMLElement&&this.elt.appendChild(x),this)},E.default.Element.prototype.center=function(x){var D=this.elt.style.display,N="none"===this.elt.style.display,U="none"===this.parent().style.display,R={x:this.elt.offsetLeft,y:this.elt.offsetTop},L=(N&&this.show(),U&&this.parent().show(),this.elt.style.display="block",this.position(0,0),Math.abs(this.parent().offsetWidth-this.elt.offsetWidth)),z=Math.abs(this.parent().offsetHeight-this.elt.offsetHeight);return"both"===x||void 0===x?this.position(L/2+this.parent().offsetLeft,z/2+this.parent().offsetTop):"horizontal"===x?this.position(L/2+this.parent().offsetLeft,R.y):"vertical"===x&&this.position(R.x,z/2+this.parent().offsetTop),this.style("display",D),N&&this.hide(),U&&this.parent().hide(),this},E.default.Element.prototype.html=function(){return 0===arguments.length?this.elt.innerHTML:(arguments.length<=1||!arguments[1]?this.elt.innerHTML=arguments.length<=0?void 0:arguments[0]:this.elt.insertAdjacentHTML("beforeend",arguments.length<=0?void 0:arguments[0]),this)},E.default.Element.prototype.position=function(){return 0===arguments.length?{x:this.elt.offsetLeft,y:this.elt.offsetTop}:(this.elt.style.position="static"!==(arguments.length<=2?void 0:arguments[2])&&"fixed"!==(arguments.length<=2?void 0:arguments[2])&&"relative"!==(arguments.length<=2?void 0:arguments[2])&&"sticky"!==(arguments.length<=2?void 0:arguments[2])&&"initial"!==(arguments.length<=2?void 0:arguments[2])&&"inherit"!==(arguments.length<=2?void 0:arguments[2])?"absolute":arguments.length<=2?void 0:arguments[2],this.elt.style.left=(arguments.length<=0?void 0:arguments[0])+"px",this.elt.style.top=(arguments.length<=1?void 0:arguments[1])+"px",this.x=arguments.length<=0?void 0:arguments[0],this.y=arguments.length<=1?void 0:arguments[1],this)},E.default.Element.prototype._translate=function(){this.elt.style.position="absolute";var x="";return this.elt.style.transform&&(x=(x=this.elt.style.transform.replace(/translate3d\(.*\)/g,"")).replace(/translate[X-Z]?\(.*\)/g,"")),2===arguments.length?this.elt.style.transform="translate("+(arguments.length<=0?void 0:arguments[0])+"px, "+(arguments.length<=1?void 0:arguments[1])+"px)":2<arguments.length&&(this.elt.style.transform="translate3d("+(arguments.length<=0?void 0:arguments[0])+"px,"+(arguments.length<=1?void 0:arguments[1])+"px,"+(arguments.length<=2?void 0:arguments[2])+"px)",this.elt.parentElement.style.perspective=3===arguments.length?"1000px":(arguments.length<=3?void 0:arguments[3])+"px"),this.elt.style.transform+=x,this},E.default.Element.prototype._rotate=function(){var x="";return this.elt.style.transform&&(x=(x=this.elt.style.transform.replace(/rotate3d\(.*\)/g,"")).replace(/rotate[X-Z]?\(.*\)/g,"")),1===arguments.length?this.elt.style.transform="rotate("+(arguments.length<=0?void 0:arguments[0])+"deg)":2===arguments.length?this.elt.style.transform="rotate("+(arguments.length<=0?void 0:arguments[0])+"deg, "+(arguments.length<=1?void 0:arguments[1])+"deg)":3===arguments.length&&(this.elt.style.transform="rotateX("+(arguments.length<=0?void 0:arguments[0])+"deg)",this.elt.style.transform+="rotateY("+(arguments.length<=1?void 0:arguments[1])+"deg)",this.elt.style.transform+="rotateZ("+(arguments.length<=2?void 0:arguments[2])+"deg)"),this.elt.style.transform+=x,this},E.default.Element.prototype.style=function(x,D){if(void 0===(D=D instanceof E.default.Color?"rgba("+D.levels[0]+","+D.levels[1]+","+D.levels[2]+","+D.levels[3]/255+")":D)){if(-1===x.indexOf(":"))return window.getComputedStyle(this.elt).getPropertyValue(x);for(var N=x.split(";"),U=0;U<N.length;U++){var R=N[U].split(":");R[0]&&R[1]&&(this.elt.style[R[0].trim()]=R[1].trim())}}else this.elt.style[x]=D,"width"!==x&&"height"!==x&&"left"!==x&&"top"!==x||(D=window.getComputedStyle(this.elt).getPropertyValue(x).replace(/[^\d.]/g,""),this[x]=Math.round(parseFloat(D,10)));return this},E.default.Element.prototype.attribute=function(x,D){if(null==this.elt.firstChild||"checkbox"!==this.elt.firstChild.type&&"radio"!==this.elt.firstChild.type)return void 0===D?this.elt.getAttribute(x):(this.elt.setAttribute(x,D),this);if(void 0===D)return this.elt.firstChild.getAttribute(x);for(var N=0;N<this.elt.childNodes.length;N++)this.elt.childNodes[N].setAttribute(x,D)},E.default.Element.prototype.removeAttribute=function(x){if(null!=this.elt.firstChild&&("checkbox"===this.elt.firstChild.type||"radio"===this.elt.firstChild.type))for(var D=0;D<this.elt.childNodes.length;D++)this.elt.childNodes[D].removeAttribute(x);return this.elt.removeAttribute(x),this},E.default.Element.prototype.value=function(){return 0<arguments.length?(this.elt.value=arguments.length<=0?void 0:arguments[0],this):"range"===this.elt.type?parseFloat(this.elt.value):this.elt.value},E.default.Element.prototype.show=function(){return this.elt.style.display="block",this},E.default.Element.prototype.hide=function(){return this.elt.style.display="none",this},E.default.Element.prototype.size=function(x,D){if(0===arguments.length)return{width:this.elt.offsetWidth,height:this.elt.offsetHeight};var N=x,U=D,R=E.default.prototype.AUTO;if(N!==R||U!==R){if(N===R?N=D*this.width/this.height:U===R&&(U=x*this.height/this.width),this.elt instanceof HTMLCanvasElement){var L,z={},F=this.elt.getContext("2d");for(L in F)z[L]=F[L];for(L in this.elt.setAttribute("width",N*this._pInst._pixelDensity),this.elt.setAttribute("height",U*this._pInst._pixelDensity),this.elt.style.width=N+"px",this.elt.style.height=U+"px",this._pInst.scale(this._pInst._pixelDensity,this._pInst._pixelDensity),z)this.elt.getContext("2d")[L]=z[L]}else this.elt.style.width=N+"px",this.elt.style.height=U+"px",this.elt.width=N,this.elt.height=U;this.width=N,this.height=U,this._pInst&&this._pInst._curElement&&this._pInst._curElement.elt===this.elt&&(this._pInst._setProperty("width",N),this._pInst._setProperty("height",U))}return this},E.default.Element.prototype.remove=function(){this instanceof E.default.MediaElement&&(this.stop(),null!==(D=this.elt.srcObject)&&D.getTracks().forEach(function(N){N.stop()}));var x,D=this._pInst._elements.indexOf(this);for(x in-1!==D&&this._pInst._elements.splice(D,1),this._events)this.elt.removeEventListener(x,this._events[x]);this.elt&&this.elt.parentNode&&this.elt.parentNode.removeChild(this.elt)},E.default.Element.prototype.drop=function(x,D){var N;return window.File&&window.FileReader&&window.FileList&&window.Blob?(this._dragDisabled||(this._dragDisabled=!0,this.elt.addEventListener("dragover",N=function(U){U.preventDefault()}),this.elt.addEventListener("dragleave",N)),E.default.Element._attachListener("drop",function(R){R.preventDefault(),"function"==typeof D&&D.call(this,R),R=R.dataTransfer.files;var L=!0,z=!1,F=void 0;try{for(var q,k=R[Symbol.iterator]();!(L=(q=k.next()).done);L=!0)E.default.File._load(q.value,x)}catch(X){z=!0,F=X}finally{try{L||null==k.return||k.return()}finally{if(z)throw F}}},this)):console.log("The File APIs are not fully supported in this browser."),this},E.default.Element.prototype.draggable=function(x){var D,N="ontouchstart"in window,U=0,R=0,L=0,z=0,F=N?"touchend":"mouseup",q=N?"touchmove":"mousemove";function k(X){var W;X=X||window.event,z=N?(W=X.changedTouches,U=L-parseInt(W[0].clientX),R=z-parseInt(W[0].clientY),L=parseInt(W[0].clientX),parseInt(W[0].clientY)):(U=L-parseInt(X.clientX),R=z-parseInt(X.clientY),L=parseInt(X.clientX),parseInt(X.clientY)),x.style.left=x.offsetLeft-U+"px",x.style.top=x.offsetTop-R+"px"}function Z(){document.removeEventListener(F,Z,!1),document.removeEventListener(q,k,!1)}return void 0===x?D=x=this.elt:x!==this.elt&&x.elt!==this.elt&&(x=x.elt,D=this.elt),D.addEventListener(N?"touchstart":"mousedown",function(X){var W;return X=X||window.event,z=N?(W=X.changedTouches,L=parseInt(W[0].clientX),parseInt(W[0].clientY)):(L=parseInt(X.clientX),parseInt(X.clientY)),document.addEventListener(F,Z,!1),document.addEventListener(q,k,!1),!1},!1),D.style.cursor="move",this},l=function(x){var D=U;if("function"!=typeof x&&null!==x)throw new TypeError("Super expression must either be null or a function");D.prototype=Object.create(x&&x.prototype,{constructor:{value:D,writable:!0,configurable:!0}}),x&&T(D,x);var N=function C(x){return function(){var D,N,U=g(x);return D=function(){if(typeof Reflect<"u"&&Reflect.construct&&!Reflect.construct.sham){if("function"==typeof Proxy)return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch{}}}()?(D=g(this).constructor,Reflect.construct(U,arguments,D)):U.apply(this,arguments),U=this,!(N=D)||"object"!==m(N)&&"function"!=typeof N?f(U):N}}(U);function U(R,L){d(this,U);var z=f(L=N.call(this,R,L));return L.elt.crossOrigin="anonymous",L._prevTime=0,L._cueIDCounter=0,L._cues=[],L.pixels=[],L._pixelsState=f(L),L._pixelDensity=1,L._modified=!1,L._frameOnCanvas=-1,Object.defineProperty(z,"src",{get:function(){var F=z.elt.children[0].src,q=z.elt.src===window.location.href?"":z.elt.src;return F===window.location.href?q:F},set:function(F){for(var q=0;q<z.elt.children.length;q++)z.elt.removeChild(z.elt.children[q]);var k=document.createElement("source");k.src=F,R.appendChild(k),z.elt.src=F,z.modified=!0}}),z._onended=function(){},z.elt.onended=function(){z._onended(z)},L}return S(U,[{key:"play",value:function(){var R;return this.elt.currentTime===this.elt.duration&&(this.elt.currentTime=0),1<this.elt.readyState||this.elt.load(),(R=this.elt.play())&&R.catch&&R.catch(function(L){"NotAllowedError"===L.name?console.error(L):console.error("Media play method encountered an unexpected error",L)}),this}},{key:"stop",value:function(){return this.elt.pause(),this.elt.currentTime=0,this}},{key:"pause",value:function(){return this.elt.pause(),this}},{key:"loop",value:function(){return this.elt.setAttribute("loop",!0),this.play(),this}},{key:"noLoop",value:function(){return this.elt.removeAttribute("loop"),this}},{key:"_setupAutoplayFailDetection",value:function(){var R=setTimeout(function(){console.error(e)},500);this.elt.addEventListener("play",function(){return clearTimeout(R)},{passive:!0,once:!0})}},{key:"autoplay",value:function(R){var L=this,z=this.elt.getAttribute("autoplay");return this.elt.setAttribute("autoplay",R),R&&!z&&(R=function(){return L._setupAutoplayFailDetection()},4===this.elt.readyState?R():this.elt.addEventListener("canplay",R,{passive:!0,once:!0})),this}},{key:"volume",value:function(R){if(void 0===R)return this.elt.volume;this.elt.volume=R}},{key:"speed",value:function(R){if(void 0===R)return this.presetPlaybackRate||this.elt.playbackRate;this.loadedmetadata?this.elt.playbackRate=R:this.presetPlaybackRate=R}},{key:"time",value:function(R){return void 0===R?this.elt.currentTime:(this.elt.currentTime=R,this)}},{key:"duration",value:function(){return this.elt.duration}},{key:"_ensureCanvas",value:function(){this.canvas||(this.canvas=document.createElement("canvas"),this.drawingContext=this.canvas.getContext("2d"),this.setModified(!0)),this.loadedmetadata&&this._frameOnCanvas!==this._pInst.frameCount&&(this.canvas.width!==this.elt.width&&(this.canvas.width=this.elt.width,this.canvas.height=this.elt.height,this.width=this.canvas.width,this.height=this.canvas.height),this.drawingContext.clearRect(0,0,this.canvas.width,this.canvas.height),!0===this.flipped&&(this.drawingContext.save(),this.drawingContext.scale(-1,1),this.drawingContext.translate(-this.canvas.width,0)),this.drawingContext.drawImage(this.elt,0,0,this.canvas.width,this.canvas.height),!0===this.flipped&&this.drawingContext.restore(),this.setModified(!0),this._frameOnCanvas=this._pInst.frameCount)}},{key:"loadPixels",value:function(){this._ensureCanvas();for(var R=arguments.length,L=new Array(R),z=0;z<R;z++)L[z]=arguments[z];return E.default.Renderer2D.prototype.loadPixels.apply(this,L)}},{key:"updatePixels",value:function(R,L,z,F){return this.loadedmetadata&&(this._ensureCanvas(),E.default.Renderer2D.prototype.updatePixels.call(this,R,L,z,F)),this.setModified(!0),this}},{key:"get",value:function(){this._ensureCanvas();for(var R=arguments.length,L=new Array(R),z=0;z<R;z++)L[z]=arguments[z];return E.default.Renderer2D.prototype.get.apply(this,L)}},{key:"_getPixel",value:function(){this.loadPixels();for(var R=arguments.length,L=new Array(R),z=0;z<R;z++)L[z]=arguments[z];return E.default.Renderer2D.prototype._getPixel.apply(this,L)}},{key:"set",value:function(R,L,z){this.loadedmetadata&&(this._ensureCanvas(),E.default.Renderer2D.prototype.set.call(this,R,L,z),this.setModified(!0))}},{key:"copy",value:function(){this._ensureCanvas();for(var R=arguments.length,L=new Array(R),z=0;z<R;z++)L[z]=arguments[z];E.default.prototype.copy.apply(this,L)}},{key:"mask",value:function(){this.loadPixels(),this.setModified(!0);for(var R=arguments.length,L=new Array(R),z=0;z<R;z++)L[z]=arguments[z];E.default.Image.prototype.mask.apply(this,L)}},{key:"isModified",value:function(){return this._modified}},{key:"setModified",value:function(R){this._modified=R}},{key:"onended",value:function(R){return this._onended=R,this}},{key:"connect",value:function(R){var L,z;if("function"==typeof E.default.prototype.getAudioContext)L=E.default.prototype.getAudioContext(),z=E.default.soundOut.input;else try{z=(L=R.context).destination}catch{throw"connect() is meant to be used with Web Audio API or p5.sound.js"}this.audioSourceNode||(this.audioSourceNode=L.createMediaElementSource(this.elt),this.audioSourceNode.connect(z)),this.audioSourceNode.connect(R?R.input?R.input:R:z)}},{key:"disconnect",value:function(){if(!this.audioSourceNode)throw"nothing to disconnect";this.audioSourceNode.disconnect()}},{key:"showControls",value:function(){this.elt.style["text-align"]="inherit",this.elt.controls=!0}},{key:"hideControls",value:function(){this.elt.controls=!1}},{key:"addCue",value:function(R,q,z){var F=this._cueIDCounter++;return q=new b(q,R,F,z),this._cues.push(q),this.elt.ontimeupdate||(this.elt.ontimeupdate=this._onTimeUpdate.bind(this)),F}},{key:"removeCue",value:function(R){for(var L=0;L<this._cues.length;L++)this._cues[L].id===R&&(console.log(R),this._cues.splice(L,1));0===this._cues.length&&(this.elt.ontimeupdate=null)}},{key:"clearCues",value:function(){this._cues=[],this.elt.ontimeupdate=null}},{key:"_onTimeUpdate",value:function(){for(var R=this.time(),L=0;L<this._cues.length;L++){var z=this._cues[L].time;this._prevTime<z&&z<=R&&this._cues[L].callback(this._cues[L].val)}this._prevTime=R}}]),U}(E.default.Element),E.default.MediaElement=l,l=function(){function x(D,N){d(this,x),this.file=D,this._pInst=N,N=D.type.split("/"),this.type=N[0],this.subtype=N[1],this.name=D.name,this.size=D.size,this.data=void 0}return S(x,null,[{key:"_createLoader",value:function(D,N){var U=new FileReader;return U.onload=function(R){var L,z=new E.default.File(D);"application/json"===z.file.type?z.data=JSON.parse(R.target.result):"text/xml"===z.file.type?(L=(new DOMParser).parseFromString(R.target.result,"text/xml"),z.data=new E.default.XML(L.documentElement)):z.data=R.target.result,N(z)},U}},{key:"_load",value:function(D,N){var U;/^text\//.test(D.type)||"application/json"===D.type?E.default.File._createLoader(D,N).readAsText(D):/^(video|audio)\//.test(D.type)?((U=new E.default.File(D)).data=URL.createObjectURL(D),N(U)):E.default.File._createLoader(D,N).readAsDataURL(D)}}]),x}(),E.default.File=l,H.default=l=E.default},{"../core/main":283,"core-js/modules/es.array.every":155,"core-js/modules/es.array.filter":157,"core-js/modules/es.array.for-each":161,"core-js/modules/es.array.from":162,"core-js/modules/es.array.index-of":164,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.map":168,"core-js/modules/es.array.slice":169,"core-js/modules/es.array.splice":171,"core-js/modules/es.function.name":174,"core-js/modules/es.object.assign":183,"core-js/modules/es.object.get-prototype-of":188,"core-js/modules/es.object.to-string":190,"core-js/modules/es.promise":191,"core-js/modules/es.reflect.construct":192,"core-js/modules/es.regexp.exec":195,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.string.iterator":200,"core-js/modules/es.string.replace":204,"core-js/modules/es.string.split":206,"core-js/modules/es.string.trim":209,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/web.dom-collections.for-each":245,"core-js/modules/web.dom-collections.iterator":246,"core-js/modules/web.url":248}],300:[function(m,de,H){"use strict";Object.defineProperty(H,"__esModule",{value:!0}),H.default=void 0;var M=(m=m("../core/main"))&&m.__esModule?m:{default:m};M.default.prototype.deviceOrientation=1<window.innerWidth/window.innerHeight?"landscape":"portrait",M.default.prototype.accelerationX=0,M.default.prototype.accelerationY=0,M.default.prototype.accelerationZ=0,M.default.prototype.pAccelerationX=0,M.default.prototype.pAccelerationY=0,M.default.prototype.pAccelerationZ=0,M.default.prototype._updatePAccelerations=function(){this._setProperty("pAccelerationX",this.accelerationX),this._setProperty("pAccelerationY",this.accelerationY),this._setProperty("pAccelerationZ",this.accelerationZ)},M.default.prototype.rotationX=0,M.default.prototype.rotationY=0,M.default.prototype.rotationZ=0,M.default.prototype.pRotationX=0,M.default.prototype.pRotationY=0;var E=M.default.prototype.pRotationZ=0,v=0,S=0,T="clockwise",C="clockwise",f="clockwise",g=(M.default.prototype.pRotateDirectionX=void 0,M.default.prototype.pRotateDirectionY=void 0,M.default.prototype.pRotateDirectionZ=void 0,M.default.prototype._updatePRotations=function(){this._setProperty("pRotationX",this.rotationX),this._setProperty("pRotationY",this.rotationY),this._setProperty("pRotationZ",this.rotationZ)},M.default.prototype.turnAxis=void 0,.5),d=30;M.default.prototype.setMoveThreshold=function(p){M.default._validateParameters("setMoveThreshold",arguments),g=p},M.default.prototype.setShakeThreshold=function(p){M.default._validateParameters("setShakeThreshold",arguments),d=p},M.default.prototype._ondeviceorientation=function(p){this._updatePRotations(),this._setProperty("rotationX",this._fromDegrees(p.beta)),this._setProperty("rotationY",this._fromDegrees(p.gamma)),this._setProperty("rotationZ",this._fromDegrees(p.alpha)),this._handleMotion()},M.default.prototype._ondevicemotion=function(p){this._updatePAccelerations(),this._setProperty("accelerationX",2*p.acceleration.x),this._setProperty("accelerationY",2*p.acceleration.y),this._setProperty("accelerationZ",2*p.acceleration.z),this._handleMotion()},M.default.prototype._handleMotion=function(){90===window.orientation||-90===window.orientation?this._setProperty("deviceOrientation","landscape"):0===window.orientation?this._setProperty("deviceOrientation","portrait"):void 0===window.orientation&&this._setProperty("deviceOrientation","undefined");var p,h,y,b,x,D=this._isGlobal?window:this;"function"==typeof D.deviceMoved&&(Math.abs(this.accelerationX-this.pAccelerationX)>g||Math.abs(this.accelerationY-this.pAccelerationY)>g||Math.abs(this.accelerationZ-this.pAccelerationZ)>g)&&D.deviceMoved(),"function"==typeof D.deviceTurned&&(h=this._toDegrees(this.rotationX)+180,y=this._toDegrees(this.pRotationX)+180,p=E+180,0<h-y&&h-y<270||h-y<-270?T="clockwise":(h-y<0||270<h-y)&&(T="counter-clockwise"),T!==this.pRotateDirectionX&&(p=h),90<Math.abs(h-p)&&Math.abs(h-p)<270&&(p=h,this._setProperty("turnAxis","X"),D.deviceTurned()),this.pRotateDirectionX=T,E=p-180,y=this._toDegrees(this.rotationY)+180,h=this._toDegrees(this.pRotationY)+180,p=v+180,0<y-h&&y-h<270||y-h<-270?C="clockwise":(y-h<0||270<y-this.pRotationY)&&(C="counter-clockwise"),C!==this.pRotateDirectionY&&(p=y),90<Math.abs(y-p)&&Math.abs(y-p)<270&&(p=y,this._setProperty("turnAxis","Y"),D.deviceTurned()),this.pRotateDirectionY=C,v=p-180,0<(h=this._toDegrees(this.rotationZ))-(y=this._toDegrees(this.pRotationZ))&&h-y<270||h-y<-270?f="clockwise":(h-y<0||270<h-y)&&(f="counter-clockwise"),f!==this.pRotateDirectionZ&&(S=h),90<Math.abs(h-S)&&Math.abs(h-S)<270&&(S=h,this._setProperty("turnAxis","Z"),D.deviceTurned()),this.pRotateDirectionZ=f,this._setProperty("turnAxis",void 0)),"function"==typeof D.deviceShaken&&(null!==this.pAccelerationX&&(b=Math.abs(this.accelerationX-this.pAccelerationX),x=Math.abs(this.accelerationY-this.pAccelerationY)),d<b+x&&D.deviceShaken())},H.default=m=M.default},{"../core/main":283}],301:[function(l,de,H){"use strict";l("core-js/modules/es.array.for-each"),l("core-js/modules/es.string.repeat"),l("core-js/modules/web.dom-collections.for-each"),l("core-js/modules/es.array.for-each"),l("core-js/modules/es.string.repeat"),l("core-js/modules/web.dom-collections.for-each"),Object.defineProperty(H,"__esModule",{value:!0}),H.default=void 0;var M=(l=l("../core/main"))&&l.__esModule?l:{default:l};M.default.prototype.isKeyPressed=!1,M.default.prototype.keyIsPressed=!1,M.default.prototype.key="",M.default.prototype.keyCode=0,M.default.prototype._onkeydown=function(E){var v;E.repeat?this._setProperty("isKeyRepeated",!0):(this._setProperty("isKeyRepeated",!1),this._setProperty("isKeyPressed",!0),this._setProperty("keyIsPressed",!0),this._setProperty("keyCode",E.which),this._downKeys[E.which]=!0,this._setProperty("key",E.key||String.fromCharCode(E.which)||E.which),E.metaKey&&(this._metaKeys||(this._metaKeys=[]),this._metaKeys.push(E.which)),"function"!=typeof(v=this._isGlobal?window:this).keyPressed||E.charCode||!1===v.keyPressed(E)&&E.preventDefault())},M.default.prototype._onkeyup=function(E){var v=this,S=(this._setProperty("isKeyPressed",!1),this._setProperty("keyIsPressed",!1),this._setProperty("_lastKeyCodePressed",this._keyCode),this._downKeys[E.which]=!1,"Meta"===E.key&&this._metaKeys&&(this._metaKeys.forEach(function(T){v._downKeys[T]=!1}),this._metaKeys=[]),this._isGlobal?window:this);"function"==typeof S.keyReleased&&!1===S.keyReleased(E)&&E.preventDefault()},M.default.prototype._onkeypress=function(E){var v;E.which===this._lastKeyCodeTyped&&this.isKeyRepeated||(this._setProperty("_lastKeyCodeTyped",E.which),this._setProperty("key",E.key||String.fromCharCode(E.which)||E.which),"function"==typeof(v=this._isGlobal?window:this).keyTyped&&!1===v.keyTyped(E)&&E.preventDefault())},M.default.prototype._onblur=function(E){this._downKeys={}},M.default.prototype.keyIsDown=function(E){return M.default._validateParameters("keyIsDown",arguments),this._downKeys[E]||!1},M.default.prototype._areDownKeys=function(){for(var E in this._downKeys)if(this._downKeys.hasOwnProperty(E)&&!0===this._downKeys[E])return!0;return!1},H.default=l=M.default},{"../core/main":283,"core-js/modules/es.array.for-each":161,"core-js/modules/es.string.repeat":203,"core-js/modules/web.dom-collections.for-each":245}],302:[function(l,de,H){"use strict";function M(C){return(M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(f){return typeof f}:function(f){return f&&"function"==typeof Symbol&&f.constructor===Symbol&&f!==Symbol.prototype?"symbol":typeof f})(C)}function E(C){return(E="function"==typeof Symbol&&"symbol"===M(Symbol.iterator)?function(f){return M(f)}:function(f){return f&&"function"==typeof Symbol&&f.constructor===Symbol&&f!==Symbol.prototype?"symbol":M(f)})(C)}l("core-js/modules/es.symbol"),l("core-js/modules/es.symbol.description"),l("core-js/modules/es.symbol.iterator"),l("core-js/modules/es.array.iterator"),l("core-js/modules/es.object.get-own-property-descriptor"),l("core-js/modules/es.object.to-string"),l("core-js/modules/es.string.iterator"),l("core-js/modules/es.weak-map"),l("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(H,"__esModule",{value:!0}),H.default=void 0;var v=(v=l("../core/main"))&&v.__esModule?v:{default:v},S=function(C){if(C&&C.__esModule)return C;if(null===C||"object"!==E(C)&&"function"!=typeof C)return{default:C};var f=T();if(f&&f.has(C))return f.get(C);var g,d={},m=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(g in C){var p;Object.prototype.hasOwnProperty.call(C,g)&&((p=m?Object.getOwnPropertyDescriptor(C,g):null)&&(p.get||p.set)?Object.defineProperty(d,g,p):d[g]=C[g])}return d.default=C,f&&f.set(C,d),d}(l("../core/constants"));function T(){var C;return"function"!=typeof WeakMap?null:(T=function(){return C},C=new WeakMap)}v.default.prototype.movedX=0,v.default.prototype.movedY=0,v.default.prototype._hasMouseInteracted=!1,v.default.prototype.mouseX=0,v.default.prototype.mouseY=0,v.default.prototype.pmouseX=0,v.default.prototype.pmouseY=0,v.default.prototype.winMouseX=0,v.default.prototype.winMouseY=0,v.default.prototype.pwinMouseX=0,v.default.prototype.pwinMouseY=0,v.default.prototype.mouseButton=0,v.default.prototype.mouseIsPressed=!1,v.default.prototype._updateNextMouseCoords=function(C){var f,g,d,m,p;null!==this._curElement&&(!C.touches||0<C.touches.length)&&(g=this.width,d=this.height,(m=C)&&!m.clientX&&(m.touches?m=m.touches[0]:m.changedTouches&&(m=m.changedTouches[0])),p=(f=this._curElement.elt).getBoundingClientRect(),this._setProperty("mouseX",(d={x:(m.clientX-p.left)/(g=f.scrollWidth/g||1),y:(m.clientY-p.top)/(f=f.scrollHeight/d||1),winX:m.clientX,winY:m.clientY,id:m.identifier}).x),this._setProperty("mouseY",d.y),this._setProperty("winMouseX",d.winX),this._setProperty("winMouseY",d.winY),null===document.pointerLockElement?(p=this.mouseY-this.pmouseY,this._setProperty("movedX",g=this.mouseX-this.pmouseX),this._setProperty("movedY",p)):(this._setProperty("movedX",C.movementX),this._setProperty("movedY",C.movementY))),this._hasMouseInteracted||(this._updateMouseCoords(),this._setProperty("_hasMouseInteracted",!0))},v.default.prototype._updateMouseCoords=function(){this._setProperty("pmouseX",this.mouseX),this._setProperty("pmouseY",this.mouseY),this._setProperty("pwinMouseX",this.winMouseX),this._setProperty("pwinMouseY",this.winMouseY),this._setProperty("_pmouseWheelDeltaY",this._mouseWheelDeltaY)},v.default.prototype._setMouseButton=function(C){this._setProperty("mouseButton",1===C.button?S.CENTER:2===C.button?S.RIGHT:S.LEFT)},v.default.prototype._onmousemove=function(C){var f=this._isGlobal?window:this;this._updateNextMouseCoords(C),this.mouseIsPressed?"function"==typeof f.mouseDragged?!1===f.mouseDragged(C)&&C.preventDefault():"function"==typeof f.touchMoved&&!1===f.touchMoved(C)&&C.preventDefault():"function"==typeof f.mouseMoved&&!1===f.mouseMoved(C)&&C.preventDefault()},v.default.prototype._onmousedown=function(C){var f=this._isGlobal?window:this;this._setProperty("mouseIsPressed",!0),this._setMouseButton(C),this._updateNextMouseCoords(C),this.touchstart||("function"==typeof f.mousePressed?!1===f.mousePressed(C)&&C.preventDefault():"function"==typeof f.touchStarted&&!1===f.touchStarted(C)&&C.preventDefault(),this.touchstart=!1)},v.default.prototype._onmouseup=function(C){var f=this._isGlobal?window:this;this._setProperty("mouseIsPressed",!1),this.touchend||("function"==typeof f.mouseReleased?!1===f.mouseReleased(C)&&C.preventDefault():"function"==typeof f.touchEnded&&!1===f.touchEnded(C)&&C.preventDefault(),this.touchend=!1)},v.default.prototype._ondragend=v.default.prototype._onmouseup,v.default.prototype._ondragover=v.default.prototype._onmousemove,v.default.prototype._onclick=function(C){var f=this._isGlobal?window:this;"function"==typeof f.mouseClicked&&!1===f.mouseClicked(C)&&C.preventDefault()},v.default.prototype._ondblclick=function(C){var f=this._isGlobal?window:this;"function"==typeof f.doubleClicked&&!1===f.doubleClicked(C)&&C.preventDefault()},v.default.prototype._mouseWheelDeltaY=0,v.default.prototype._pmouseWheelDeltaY=0,v.default.prototype._onwheel=function(C){var f=this._isGlobal?window:this;this._setProperty("_mouseWheelDeltaY",C.deltaY),"function"==typeof f.mouseWheel&&(C.delta=C.deltaY,!1===f.mouseWheel(C)&&C.preventDefault())},v.default.prototype.requestPointerLock=function(){var C=this._curElement.elt;return C.requestPointerLock=C.requestPointerLock||C.mozRequestPointerLock,C.requestPointerLock?(C.requestPointerLock(),!0):(console.log("requestPointerLock is not implemented in this browser"),!1)},v.default.prototype.exitPointerLock=function(){document.exitPointerLock()},H.default=l=v.default},{"../core/constants":272,"../core/main":283,"core-js/modules/es.array.iterator":165,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.to-string":190,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246}],303:[function(l,de,H){"use strict";Object.defineProperty(H,"__esModule",{value:!0}),H.default=void 0,(l=(l=l("../core/main"))&&l.__esModule?l:{default:l}).default.prototype.touches=[],l.default.prototype._updateTouchCoords=function(M){if(null!==this._curElement){for(var E=[],v=0;v<M.touches.length;v++)E[v]=function(p,m,h,f){var g=4<arguments.length&&void 0!==arguments[4]?arguments[4]:0,d=p.getBoundingClientRect();return m=p.scrollWidth/m||1,p=p.scrollHeight/h||1,{x:((h=f.touches[g]||f.changedTouches[g]).clientX-d.left)/m,y:(h.clientY-d.top)/p,winX:h.clientX,winY:h.clientY,id:h.identifier}}(this._curElement.elt,this.width,this.height,M,v);this._setProperty("touches",E)}},l.default.prototype._ontouchstart=function(M){var E=this._isGlobal?window:this;this._setProperty("mouseIsPressed",!0),this._updateTouchCoords(M),this._updateNextMouseCoords(M),this._updateMouseCoords(),"function"==typeof E.touchStarted&&(!1===E.touchStarted(M)&&M.preventDefault(),this.touchstart=!0)},l.default.prototype._ontouchmove=function(M){var E=this._isGlobal?window:this;this._updateTouchCoords(M),this._updateNextMouseCoords(M),"function"==typeof E.touchMoved?!1===E.touchMoved(M)&&M.preventDefault():"function"==typeof E.mouseDragged&&!1===E.mouseDragged(M)&&M.preventDefault()},l.default.prototype._ontouchend=function(M){this._setProperty("mouseIsPressed",!1),this._updateTouchCoords(M),this._updateNextMouseCoords(M);var E=this._isGlobal?window:this;"function"==typeof E.touchEnded&&(!1===E.touchEnded(M)&&M.preventDefault(),this.touchend=!0)},H.default=l=l.default},{"../core/main":283}],304:[function(l,de,H){"use strict";l("core-js/modules/es.array.iterator"),l("core-js/modules/es.object.to-string"),l("core-js/modules/es.typed-array.int32-array"),l("core-js/modules/es.typed-array.uint8-array"),l("core-js/modules/es.typed-array.copy-within"),l("core-js/modules/es.typed-array.every"),l("core-js/modules/es.typed-array.fill"),l("core-js/modules/es.typed-array.filter"),l("core-js/modules/es.typed-array.find"),l("core-js/modules/es.typed-array.find-index"),l("core-js/modules/es.typed-array.for-each"),l("core-js/modules/es.typed-array.includes"),l("core-js/modules/es.typed-array.index-of"),l("core-js/modules/es.typed-array.iterator"),l("core-js/modules/es.typed-array.join"),l("core-js/modules/es.typed-array.last-index-of"),l("core-js/modules/es.typed-array.map"),l("core-js/modules/es.typed-array.reduce"),l("core-js/modules/es.typed-array.reduce-right"),l("core-js/modules/es.typed-array.reverse"),l("core-js/modules/es.typed-array.set"),l("core-js/modules/es.typed-array.slice"),l("core-js/modules/es.typed-array.some"),l("core-js/modules/es.typed-array.sort"),l("core-js/modules/es.typed-array.subarray"),l("core-js/modules/es.typed-array.to-locale-string"),l("core-js/modules/es.typed-array.to-string"),l("core-js/modules/es.array.iterator"),l("core-js/modules/es.object.to-string"),l("core-js/modules/es.typed-array.int32-array"),l("core-js/modules/es.typed-array.uint8-array"),l("core-js/modules/es.typed-array.copy-within"),l("core-js/modules/es.typed-array.every"),l("core-js/modules/es.typed-array.fill"),l("core-js/modules/es.typed-array.filter"),l("core-js/modules/es.typed-array.find"),l("core-js/modules/es.typed-array.find-index"),l("core-js/modules/es.typed-array.for-each"),l("core-js/modules/es.typed-array.includes"),l("core-js/modules/es.typed-array.index-of"),l("core-js/modules/es.typed-array.iterator"),l("core-js/modules/es.typed-array.join"),l("core-js/modules/es.typed-array.last-index-of"),l("core-js/modules/es.typed-array.map"),l("core-js/modules/es.typed-array.reduce"),l("core-js/modules/es.typed-array.reduce-right"),l("core-js/modules/es.typed-array.reverse"),l("core-js/modules/es.typed-array.set"),l("core-js/modules/es.typed-array.slice"),l("core-js/modules/es.typed-array.some"),l("core-js/modules/es.typed-array.sort"),l("core-js/modules/es.typed-array.subarray"),l("core-js/modules/es.typed-array.to-locale-string"),l("core-js/modules/es.typed-array.to-string"),Object.defineProperty(H,"__esModule",{value:!0}),H.default=void 0;var M,E,v,S,T={_toPixels:function(C){var f,g;return C instanceof ImageData?C.data:C.getContext("2d")?C.getContext("2d").getImageData(0,0,C.width,C.height).data:C.getContext("webgl")?(g=(f=C.getContext("webgl")).drawingBufferWidth*f.drawingBufferHeight*4,g=new Uint8Array(g),f.readPixels(0,0,C.width,C.height,f.RGBA,f.UNSIGNED_BYTE,g),g):void 0},_getARGB:function(C,f){return C[3+(f*=4)]<<24&4278190080|C[f]<<16&16711680|C[1+f]<<8&65280|255&C[2+f]},_setPixels:function(C,f){for(var g,d=0,m=C.length;d<m;d++)C[0+(g=4*d)]=(16711680&f[d])>>>16,C[1+g]=(65280&f[d])>>>8,C[2+g]=255&f[d],C[3+g]=(4278190080&f[d])>>>24},_toImageData:function(C){return C instanceof ImageData?C:C.getContext("2d").getImageData(0,0,C.width,C.height)},_createImageData:function(C,f){return T._tmpCanvas=document.createElement("canvas"),T._tmpCtx=T._tmpCanvas.getContext("2d"),this._tmpCtx.createImageData(C,f)},apply:function(C,p,g){var d=C.getContext("2d"),m=d.getImageData(0,0,C.width,C.height);(p=p(m,g))instanceof ImageData?d.putImageData(p,0,0,0,0,C.width,C.height):d.putImageData(m,0,0,0,0,C.width,C.height)},threshold:function(C){for(var f=1<arguments.length&&void 0!==arguments[1]?arguments[1]:.5,g=T._toPixels(C),d=Math.floor(255*f),m=0;m<g.length;m+=4)g[m]=g[m+1]=g[m+2]=d<=.2126*g[m]+.7152*g[m+1]+.0722*g[m+2]?255:0},gray:function(C){for(var f=T._toPixels(C),g=0;g<f.length;g+=4)f[g]=f[g+1]=f[g+2]=.2126*f[g]+.7152*f[g+1]+.0722*f[g+2]},opaque:function(C){for(var f=T._toPixels(C),g=0;g<f.length;g+=4)f[g+3]=255;return f},invert:function(C){for(var f=T._toPixels(C),g=0;g<f.length;g+=4)f[g]=255-f[g],f[g+1]=255-f[g+1],f[g+2]=255-f[g+2]},posterize:function(C){var f=1<arguments.length&&void 0!==arguments[1]?arguments[1]:4,g=T._toPixels(C);if(f<2||255<f)throw new Error("Level must be greater than 2 and less than 255 for posterize");for(var d=f-1,m=0;m<g.length;m+=4){var h=g[m+1],y=g[m+2];g[m]=255*(g[m]*f>>8)/d,g[m+1]=255*(h*f>>8)/d,g[m+2]=255*(y*f>>8)/d}},dilate:function(C){for(var f,g,d,m,p,h,y,b,x,D=T._toPixels(C),N=0,U=D.length?D.length/4:0,R=new Int32Array(U);N<U;)for(g=(f=N)+C.width;N<g;)m=d=T._getARGB(D,N),(x=N-1)<f&&(x=N),g<=(b=N+1)&&(b=N),(p=N-C.width)<0&&(p=0),U<=(h=N+C.width)&&(h=N),p=T._getARGB(D,p),x=T._getARGB(D,x),h=T._getARGB(D,h),(m=77*(m>>16&255)+151*(m>>8&255)+28*(255&m))<(y=77*(x>>16&255)+151*(x>>8&255)+28*(255&x))&&(d=x,m=y),m<(y=77*((x=T._getARGB(D,b))>>16&255)+151*(x>>8&255)+28*(255&x))&&(d=x,m=y),m<(b=77*(p>>16&255)+151*(p>>8&255)+28*(255&p))&&(d=p,m=b),m<(x=77*(h>>16&255)+151*(h>>8&255)+28*(255&h))&&(d=h,m=x),R[N++]=d;T._setPixels(D,R)},erode:function(C){for(var f,g,d,m,p,h,y,b,x,D=T._toPixels(C),N=0,U=D.length?D.length/4:0,R=new Int32Array(U);N<U;)for(g=(f=N)+C.width;N<g;)m=d=T._getARGB(D,N),(x=N-1)<f&&(x=N),g<=(b=N+1)&&(b=N),(p=N-C.width)<0&&(p=0),U<=(h=N+C.width)&&(h=N),p=T._getARGB(D,p),x=T._getARGB(D,x),h=T._getARGB(D,h),(y=77*(x>>16&255)+151*(x>>8&255)+28*(255&x))<(m=77*(m>>16&255)+151*(m>>8&255)+28*(255&m))&&(d=x,m=y),(y=77*((x=T._getARGB(D,b))>>16&255)+151*(x>>8&255)+28*(255&x))<m&&(d=x,m=y),(b=77*(p>>16&255)+151*(p>>8&255)+28*(255&p))<m&&(d=p,m=b),(x=77*(h>>16&255)+151*(h>>8&255)+28*(255&h))<m&&(d=h,m=x),R[N++]=d;T._setPixels(D,R)},blur:function(C,f){for(var g,d,m,p,h,y,b,x,D,N,U=T._toPixels(C),R=C.width,L=C.height,z=R*L,F=new Int32Array(z),q=0;q<z;q++)F[q]=T._getARGB(U,q);var k,Z,X,W,oe,ie,re,le,pe=new Int32Array(z),Ae=new Int32Array(z),$=new Int32Array(z),P=new Int32Array(z),K=0,te=3.5*f|0;if(M!==(te=te<1?1:te<248?te:248)){E=1+(M=te)<<1,v=new Int32Array(E),S=new Array(E);for(var fe=0;fe<E;fe++)S[fe]=new Int32Array(256);for(var ve=1,Te=te-1;ve<te;ve++){v[te+ve]=v[Te]=ie=Te*Te,re=S[te+ve],le=S[Te--];for(var Ie=0;Ie<256;Ie++)re[Ie]=le[Ie]=ie*Ie}oe=v[te]=te*te,re=S[te];for(var we=0;we<256;we++)re[we]=oe*we}for(Z=0;Z<L;Z++){for(k=0;k<R;k++){if(p=m=d=h=g=0,(y=k-M)<0)N=-y,y=0;else{if(R<=y)break;N=0}for(X=N;X<E&&!(R<=y);X++){var Pe=F[y+K];h+=(W=S[X])[(-16777216&Pe)>>>24],d+=W[(16711680&Pe)>>16],m+=W[(65280&Pe)>>8],p+=W[255&Pe],g+=v[X],y++}pe[b=K+k]=h/g,Ae[b]=d/g,$[b]=m/g,P[b]=p/g}K+=R}for(D=(x=-M)*R,Z=K=0;Z<L;Z++){for(k=0;k<R;k++){if(p=m=d=h=g=0,x<0)N=b=-x,y=k;else{if(L<=x)break;N=0,b=x,y=k+D}for(X=N;X<E&&!(L<=b);X++)h+=(W=S[X])[pe[y]],d+=W[Ae[y]],m+=W[$[y]],p+=W[P[y]],g+=v[X],b++,y+=R;F[k+K]=h/g<<24|d/g<<16|m/g<<8|p/g}K+=R,D+=R,x++}T._setPixels(U,F)}};H.default=T},{"core-js/modules/es.array.iterator":165,"core-js/modules/es.object.to-string":190,"core-js/modules/es.typed-array.copy-within":213,"core-js/modules/es.typed-array.every":214,"core-js/modules/es.typed-array.fill":215,"core-js/modules/es.typed-array.filter":216,"core-js/modules/es.typed-array.find":218,"core-js/modules/es.typed-array.find-index":217,"core-js/modules/es.typed-array.for-each":221,"core-js/modules/es.typed-array.includes":222,"core-js/modules/es.typed-array.index-of":223,"core-js/modules/es.typed-array.int32-array":225,"core-js/modules/es.typed-array.iterator":226,"core-js/modules/es.typed-array.join":227,"core-js/modules/es.typed-array.last-index-of":228,"core-js/modules/es.typed-array.map":229,"core-js/modules/es.typed-array.reduce":231,"core-js/modules/es.typed-array.reduce-right":230,"core-js/modules/es.typed-array.reverse":232,"core-js/modules/es.typed-array.set":233,"core-js/modules/es.typed-array.slice":234,"core-js/modules/es.typed-array.some":235,"core-js/modules/es.typed-array.sort":236,"core-js/modules/es.typed-array.subarray":237,"core-js/modules/es.typed-array.to-locale-string":238,"core-js/modules/es.typed-array.to-string":239,"core-js/modules/es.typed-array.uint8-array":242}],305:[function(l,de,H){"use strict";l("core-js/modules/es.symbol"),l("core-js/modules/es.symbol.description"),l("core-js/modules/es.symbol.iterator"),l("core-js/modules/es.array.concat"),l("core-js/modules/es.array.filter"),l("core-js/modules/es.array.for-each"),l("core-js/modules/es.array.from"),l("core-js/modules/es.array.iterator"),l("core-js/modules/es.array.map"),l("core-js/modules/es.array.slice"),l("core-js/modules/es.object.keys"),l("core-js/modules/es.object.to-string"),l("core-js/modules/es.regexp.exec"),l("core-js/modules/es.regexp.to-string"),l("core-js/modules/es.set"),l("core-js/modules/es.string.iterator"),l("core-js/modules/es.string.replace"),l("core-js/modules/es.string.split"),l("core-js/modules/es.typed-array.uint8-array"),l("core-js/modules/es.typed-array.uint32-array"),l("core-js/modules/es.typed-array.copy-within"),l("core-js/modules/es.typed-array.every"),l("core-js/modules/es.typed-array.fill"),l("core-js/modules/es.typed-array.filter"),l("core-js/modules/es.typed-array.find"),l("core-js/modules/es.typed-array.find-index"),l("core-js/modules/es.typed-array.for-each"),l("core-js/modules/es.typed-array.includes"),l("core-js/modules/es.typed-array.index-of"),l("core-js/modules/es.typed-array.iterator"),l("core-js/modules/es.typed-array.join"),l("core-js/modules/es.typed-array.last-index-of"),l("core-js/modules/es.typed-array.map"),l("core-js/modules/es.typed-array.reduce"),l("core-js/modules/es.typed-array.reduce-right"),l("core-js/modules/es.typed-array.reverse"),l("core-js/modules/es.typed-array.set"),l("core-js/modules/es.typed-array.slice"),l("core-js/modules/es.typed-array.some"),l("core-js/modules/es.typed-array.sort"),l("core-js/modules/es.typed-array.subarray"),l("core-js/modules/es.typed-array.to-locale-string"),l("core-js/modules/es.typed-array.to-string"),l("core-js/modules/web.dom-collections.for-each"),l("core-js/modules/web.dom-collections.iterator"),l("core-js/modules/es.array.concat"),l("core-js/modules/es.array.filter"),l("core-js/modules/es.array.for-each"),l("core-js/modules/es.array.iterator"),l("core-js/modules/es.array.map"),l("core-js/modules/es.array.slice"),l("core-js/modules/es.object.keys"),l("core-js/modules/es.object.to-string"),l("core-js/modules/es.regexp.exec"),l("core-js/modules/es.regexp.to-string"),l("core-js/modules/es.set"),l("core-js/modules/es.string.iterator"),l("core-js/modules/es.string.replace"),l("core-js/modules/es.string.split"),l("core-js/modules/es.typed-array.uint8-array"),l("core-js/modules/es.typed-array.uint32-array"),l("core-js/modules/es.typed-array.copy-within"),l("core-js/modules/es.typed-array.every"),l("core-js/modules/es.typed-array.fill"),l("core-js/modules/es.typed-array.filter"),l("core-js/modules/es.typed-array.find"),l("core-js/modules/es.typed-array.find-index"),l("core-js/modules/es.typed-array.for-each"),l("core-js/modules/es.typed-array.includes"),l("core-js/modules/es.typed-array.index-of"),l("core-js/modules/es.typed-array.iterator"),l("core-js/modules/es.typed-array.join"),l("core-js/modules/es.typed-array.last-index-of"),l("core-js/modules/es.typed-array.map"),l("core-js/modules/es.typed-array.reduce"),l("core-js/modules/es.typed-array.reduce-right"),l("core-js/modules/es.typed-array.reverse"),l("core-js/modules/es.typed-array.set"),l("core-js/modules/es.typed-array.slice"),l("core-js/modules/es.typed-array.some"),l("core-js/modules/es.typed-array.sort"),l("core-js/modules/es.typed-array.subarray"),l("core-js/modules/es.typed-array.to-locale-string"),l("core-js/modules/es.typed-array.to-string"),l("core-js/modules/web.dom-collections.for-each"),l("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(H,"__esModule",{value:!0}),H.default=void 0;var M=v(l("../core/main")),E=v(l("omggif"));function v(T){return T&&T.__esModule?T:{default:T}}function S(T){return function(C){if(Array.isArray(C)){for(var f=0,g=new Array(C.length);f<C.length;f++)g[f]=C[f];return g}}(T)||function(C){if(Symbol.iterator in Object(C)||"[object Arguments]"===Object.prototype.toString.call(C))return Array.from(C)}(T)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}M.default.prototype.createImage=function(T,C){return M.default._validateParameters("createImage",arguments),new M.default.Image(T,C)},M.default.prototype.saveCanvas=function(){for(var T,C,f,g,d,m,p=arguments.length,h=new Array(p),y=0;y<p;y++)h[y]=arguments[y];switch(M.default._validateParameters("saveCanvas",h),h[0]instanceof HTMLCanvasElement?(T=h[0],h.shift()):h[0]instanceof M.default.Element?(T=h[0].elt,h.shift()):h[0]instanceof M.default.Framebuffer?((d=this.createGraphics((g=h[0]).width,g.height)).pixelDensity(pixelDensity()),g.loadPixels(),d.loadPixels(),d.pixels.set(g.pixels),d.updatePixels(),T=d.elt,h.shift()):T=this._curElement&&this._curElement.elt,1<=h.length&&(C=h[0]),f=(f=2<=h.length?h[1]:f)||M.default.prototype._checkFileExtension(C,f)[1]||"png"){default:m="image/png";break;case"webp":m="image/webp";break;case"jpeg":case"jpg":m="image/jpeg"}T.toBlob(function(b){M.default.prototype.downloadFile(b,C,f),d&&d.remove()},m)},M.default.prototype.encodeAndDownloadGif=function(T,C){for(var f=T.gifProperties,d=(1===(g=f.loopLimit)?g=null:null===g&&(g=0),new Uint8Array(T.width*T.height*f.numFrames)),m=[],p={},h=0;h<f.numFrames;h++){for(var y=new Set,b=f.frames[h].image.data,x=b.length,D=new Uint32Array(T.width*T.height),N=0,U=0;N<x;N+=4,U++){var R=b[N+0]<<16|b[N+1]<<8|b[N+2]<<0;y.add(R),D[U]=R}var L=S(y).sort().toString();void 0===p[L]?p[L]={freq:1,frames:[h]}:(p[L].freq+=1,p[L].frames.push(h)),m.push(D)}for(var q=[],z=Object.keys(p).sort(function($,P){return p[P].freq-p[$].freq}),F=z[0].split(",").map(function($){return parseInt($)}),k=(q=q.concat(p[F].frames),new Set(F)),Z=1;Z<z.length;Z++){var X=z[Z].split(",").map(function($){return parseInt($)}).filter(function($){return!k.has($)});if(F.length+X.length<=256){for(var W=0;W<X.length;W++)F.push(X[W]),k.add(X[W]);q=q.concat(p[z[Z]].frames)}}q=new Set(q);for(var oe={},ie=0;ie<F.length;ie++)oe[F[ie]]||(oe[F[ie]]=ie);for(var re=1;re<F.length;)re<<=1;F.length=re;for(var g={loop:g,palette:new Uint32Array(F)},le=new E.default.GifWriter(d,T.width,T.height,g),pe={},Ae=0;Ae<f.numFrames;Ae++)!function(P){var K=!q.has(P),te=K?[]:F,fe=new Uint8Array(T.width*T.height),ve={},Te=new Set,Ie=(m[P].forEach(function(Oe,Ge){K?(void 0===ve[Oe]&&(ve[Oe]=te.length,te.push(Oe)),fe[Ge]=ve[Oe]):fe[Ge]=oe[Oe],0<P&&m[P-1][Ge]!==Oe&&Te.add(Oe)}),{});if(0<(we=te.filter(function(Oe){return!Te.has(Oe)})).length){var we,Pe=(K?ve:oe)[we=we[0]];if(0<P){for(var je=0;je<m[P].length;je++)m[P-1][je]===m[P][je]&&(fe[je]=Pe);Ie.transparent=Pe,pe.frameOpts.disposal=1}}if(Ie.delay=f.frames[P].delay/10,K){for(var be=1;be<te.length;)be<<=1;te.length=be,Ie.palette=new Uint32Array(te)}0<P&&le.addFrame(0,0,T.width,T.height,pe.pixelPaletteIndex,pe.frameOpts),pe={pixelPaletteIndex:fe,frameOpts:Ie}}(Ae);pe.frameOpts.disposal=1,le.addFrame(0,0,T.width,T.height,pe.pixelPaletteIndex,pe.frameOpts),g=new Blob([d.slice(0,le.end())],{type:"image/gif"}),M.default.prototype.downloadFile(g,C,"gif")},M.default.prototype.saveFrames=function(T,C,f,m,d){M.default._validateParameters("saveFrames",arguments),f=M.default.prototype.constrain(f=f||3,0,15),f*=1e3,m=M.default.prototype.constrain(m||15,0,22);var p=0,h=M.default.prototype._makeFrame,y=this._curElement.elt,b=[],x=setInterval(function(){b.push(h(T+p,C,y)),p++},1e3/m);setTimeout(function(){if(clearInterval(x),d)d(b);else for(var D=0,N=b;D<N.length;D++){var U=N[D];M.default.prototype.downloadFile(U.imageData,U.filename,U.ext)}b=[]},.01+f)},M.default.prototype._makeFrame=function(T,C,d){var g;if(d=this?this._curElement.elt:d,C)switch(C.toLowerCase()){case"png":default:g="image/png";break;case"jpeg":case"jpg":g="image/jpeg"}else C="png",g="image/png";d=(d=d.toDataURL(g)).replace(g,"image/octet-stream");var m={};return m.imageData=d,m.filename=T,m.ext=C,m},H.default=l=M.default},{"../core/main":283,"core-js/modules/es.array.concat":153,"core-js/modules/es.array.filter":157,"core-js/modules/es.array.for-each":161,"core-js/modules/es.array.from":162,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.map":168,"core-js/modules/es.array.slice":169,"core-js/modules/es.object.keys":189,"core-js/modules/es.object.to-string":190,"core-js/modules/es.regexp.exec":195,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.set":197,"core-js/modules/es.string.iterator":200,"core-js/modules/es.string.replace":204,"core-js/modules/es.string.split":206,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.typed-array.copy-within":213,"core-js/modules/es.typed-array.every":214,"core-js/modules/es.typed-array.fill":215,"core-js/modules/es.typed-array.filter":216,"core-js/modules/es.typed-array.find":218,"core-js/modules/es.typed-array.find-index":217,"core-js/modules/es.typed-array.for-each":221,"core-js/modules/es.typed-array.includes":222,"core-js/modules/es.typed-array.index-of":223,"core-js/modules/es.typed-array.iterator":226,"core-js/modules/es.typed-array.join":227,"core-js/modules/es.typed-array.last-index-of":228,"core-js/modules/es.typed-array.map":229,"core-js/modules/es.typed-array.reduce":231,"core-js/modules/es.typed-array.reduce-right":230,"core-js/modules/es.typed-array.reverse":232,"core-js/modules/es.typed-array.set":233,"core-js/modules/es.typed-array.slice":234,"core-js/modules/es.typed-array.some":235,"core-js/modules/es.typed-array.sort":236,"core-js/modules/es.typed-array.subarray":237,"core-js/modules/es.typed-array.to-locale-string":238,"core-js/modules/es.typed-array.to-string":239,"core-js/modules/es.typed-array.uint32-array":241,"core-js/modules/es.typed-array.uint8-array":242,"core-js/modules/web.dom-collections.for-each":245,"core-js/modules/web.dom-collections.iterator":246,omggif:256}],306:[function(l,de,H){"use strict";function M(y){return(M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(b){return typeof b}:function(b){return b&&"function"==typeof Symbol&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":typeof b})(y)}function E(y){return(E="function"==typeof Symbol&&"symbol"===M(Symbol.iterator)?function(b){return M(b)}:function(b){return b&&"function"==typeof Symbol&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":M(b)})(y)}l("core-js/modules/es.symbol"),l("core-js/modules/es.symbol.description"),l("core-js/modules/es.symbol.iterator"),l("core-js/modules/es.array.copy-within"),l("core-js/modules/es.array.includes"),l("core-js/modules/es.array.index-of"),l("core-js/modules/es.array.iterator"),l("core-js/modules/es.array.slice"),l("core-js/modules/es.object.get-own-property-descriptor"),l("core-js/modules/es.object.to-string"),l("core-js/modules/es.promise"),l("core-js/modules/es.regexp.to-string"),l("core-js/modules/es.string.includes"),l("core-js/modules/es.string.iterator"),l("core-js/modules/es.typed-array.uint8-array"),l("core-js/modules/es.typed-array.uint8-clamped-array"),l("core-js/modules/es.typed-array.copy-within"),l("core-js/modules/es.typed-array.every"),l("core-js/modules/es.typed-array.fill"),l("core-js/modules/es.typed-array.filter"),l("core-js/modules/es.typed-array.find"),l("core-js/modules/es.typed-array.find-index"),l("core-js/modules/es.typed-array.for-each"),l("core-js/modules/es.typed-array.includes"),l("core-js/modules/es.typed-array.index-of"),l("core-js/modules/es.typed-array.iterator"),l("core-js/modules/es.typed-array.join"),l("core-js/modules/es.typed-array.last-index-of"),l("core-js/modules/es.typed-array.map"),l("core-js/modules/es.typed-array.reduce"),l("core-js/modules/es.typed-array.reduce-right"),l("core-js/modules/es.typed-array.reverse"),l("core-js/modules/es.typed-array.set"),l("core-js/modules/es.typed-array.slice"),l("core-js/modules/es.typed-array.some"),l("core-js/modules/es.typed-array.sort"),l("core-js/modules/es.typed-array.subarray"),l("core-js/modules/es.typed-array.to-locale-string"),l("core-js/modules/es.typed-array.to-string"),l("core-js/modules/es.weak-map"),l("core-js/modules/web.dom-collections.iterator"),l("core-js/modules/es.array.copy-within"),l("core-js/modules/es.array.includes"),l("core-js/modules/es.array.index-of"),l("core-js/modules/es.array.iterator"),l("core-js/modules/es.array.slice"),l("core-js/modules/es.object.to-string"),l("core-js/modules/es.promise"),l("core-js/modules/es.regexp.to-string"),l("core-js/modules/es.string.includes"),l("core-js/modules/es.typed-array.uint8-array"),l("core-js/modules/es.typed-array.uint8-clamped-array"),l("core-js/modules/es.typed-array.copy-within"),l("core-js/modules/es.typed-array.every"),l("core-js/modules/es.typed-array.fill"),l("core-js/modules/es.typed-array.filter"),l("core-js/modules/es.typed-array.find"),l("core-js/modules/es.typed-array.find-index"),l("core-js/modules/es.typed-array.for-each"),l("core-js/modules/es.typed-array.includes"),l("core-js/modules/es.typed-array.index-of"),l("core-js/modules/es.typed-array.iterator"),l("core-js/modules/es.typed-array.join"),l("core-js/modules/es.typed-array.last-index-of"),l("core-js/modules/es.typed-array.map"),l("core-js/modules/es.typed-array.reduce"),l("core-js/modules/es.typed-array.reduce-right"),l("core-js/modules/es.typed-array.reverse"),l("core-js/modules/es.typed-array.set"),l("core-js/modules/es.typed-array.slice"),l("core-js/modules/es.typed-array.some"),l("core-js/modules/es.typed-array.sort"),l("core-js/modules/es.typed-array.subarray"),l("core-js/modules/es.typed-array.to-locale-string"),l("core-js/modules/es.typed-array.to-string"),Object.defineProperty(H,"__esModule",{value:!0}),H.default=void 0,l("regenerator-runtime/runtime");var v=d(l("../core/main")),S=d(l("../core/helpers")),T=function(y){if(y&&y.__esModule)return y;if(null===y||"object"!==E(y)&&"function"!=typeof y)return{default:y};var b=g();if(b&&b.has(y))return b.get(y);var x,D={},N=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(x in y){var U;Object.prototype.hasOwnProperty.call(y,x)&&((U=N?Object.getOwnPropertyDescriptor(y,x):null)&&(U.get||U.set)?Object.defineProperty(D,x,U):D[x]=y[x])}return D.default=y,b&&b.set(y,D),D}(l("../core/constants")),C=d(l("omggif")),f=l("gifenc");function g(){var y;return"function"!=typeof WeakMap?null:(g=function(){return y},y=new WeakMap)}function d(y){return y&&y.__esModule?y:{default:y}}function m(y,b,x,D,N,U,R){try{var L=y[U](R),z=L.value}catch(F){return void x(F)}L.done?b(z):Promise.resolve(z).then(D,N)}function h(y,b){return 0<y&&y<b?y:b}l("../core/friendly_errors/validate_params"),l("../core/friendly_errors/file_errors"),l("../core/friendly_errors/fes_core"),v.default.prototype.loadImage=function(y,b,x){v.default._validateParameters("loadImage",arguments);var D=new v.default.Image(1,1,this),N=this,U=new Request(y,{method:"GET",mode:"cors"});return fetch(y,U).then(function(R){var L,z=R.headers.get("content-type");null===z&&console.warn("The image you loaded does not have a Content-Type header. If you are using the online editor consider reuploading the asset."),z&&z.includes("image/gif")?R.arrayBuffer().then(function(F){if(F){F=new Uint8Array(F);for(var q=D,k=b,Z=x,X=function(K){N._decrementPreload()}.bind(N),W=new C.default.GifReader(F),oe=(q.width=q.canvas.width=W.width,q.height=q.canvas.height=W.height,[]),ie=W.numFrames(),re=new Uint8ClampedArray(q.width*q.height*4),le=0;le<ie;le++){var pe=W.frameInfo(le),Ae=q.drawingContext.getImageData(0,0,q.width,q.height),$=(re=Ae.data.slice(),function(K,te){try{te.decodeAndBlitFrameRGBA(K,re)}catch(fe){v.default._friendlyFileLoadError(8,q.src),"function"==typeof Z?Z(fe):console.error(fe)}}(le,W),new ImageData(re,q.width,q.height));0===(q.drawingContext.putImageData($,0,0),$=pe.delay)&&($=10),oe.push({image:q.drawingContext.getImageData(0,0,q.width,q.height),delay:10*$}),2===pe.disposal?q.drawingContext.clearRect(pe.x,pe.y,pe.width,pe.height):3===pe.disposal&&q.drawingContext.putImageData(Ae,0,0,pe.x,pe.y,pe.width,pe.height)}null===(F=W.loopCount())?F=1:0===F&&(F=null),q.drawingContext.putImageData(oe[0].image,0,0),1<oe.length&&(q.gifProperties={displayIndex:0,loopLimit:F,loopCount:0,frames:oe,numFrames:ie,playing:!0,timeDisplayed:0,lastChangeTime:0}),"function"==typeof k&&k(q),X()}},function(F){"function"==typeof x?(x(F),N._decrementPreload()):console.error(F)}):((L=new Image).onload=function(){D.width=D.canvas.width=L.width,D.height=D.canvas.height=L.height,D.drawingContext.drawImage(L,0,0),D.modified=!0,"function"==typeof b&&b(D),N._decrementPreload()},L.onerror=function(F){v.default._friendlyFileLoadError(0,L.src),"function"==typeof x?(x(F),N._decrementPreload()):console.error(F)},0!==y.indexOf("data:image/")&&(L.crossOrigin="Anonymous"),L.src=y),D.modified=!0}).catch(function(R){v.default._friendlyFileLoadError(0,y),"function"==typeof x?(x(R),N._decrementPreload()):console.error(R)}),D},v.default.prototype.saveGif=function(){y=Vn.mark(function x(D,N){var U,R,L,z,F,q,k,Z,X,W,oe,ie,re,le,pe,Ae,$,P,K,te,fe,ve,Te,Ie,we,Pe,je=arguments;return Vn.wrap(function(be){for(;;)switch(be.prev=be.next){case 0:if(U=2<je.length&&void 0!==je[2]?je[2]:{delay:0,units:"seconds",silent:!1,notificationDuration:0,notificationID:"progressBar"},"string"!=typeof D)throw TypeError("fileName parameter must be a string");be.next=3;break;case 3:if("number"!=typeof N)throw TypeError("Duration parameter must be a number");be.next=5;break;case 5:if(L=U&&U.units||"seconds",z=U&&U.silent||!1,F=U&&U.notificationDuration||0,q=U&&U.notificationID||"progressBar","number"!=typeof(R=U&&U.delay||0))throw TypeError("Delay parameter must be a number");be.next=12;break;case 12:if("seconds"!==L&&"frames"!==L)throw TypeError('Units parameter must be either "frames" or "seconds"');be.next=14;break;case 14:if("boolean"!=typeof z)throw TypeError("Silent parameter must be a boolean");be.next=16;break;case 16:if("number"!=typeof F)throw TypeError("Notification duration parameter must be a number");be.next=18;break;case 18:if("string"!=typeof q)throw TypeError("Notification ID parameter must be a string");be.next=20;break;case 20:return this._recording=!0,k=(k=1/(W=(W=this._targetFrameRate)!==1/0&&void 0!==W&&0!==W?W:60)*1e3)<20?20:k,X=(Z="seconds"===L?N*W:N)+(W="seconds"===L?R*W:R),this.frameCount=W,oe=this._pixelDensity,this.pixelDensity(1),ie=[],null!==document.getElementById(q)&&document.getElementById(q).remove(),z||((re=this.createP("")).id(q),re.style("font-size","16px"),re.style("font-family","Montserrat"),re.style("background-color","#ffffffa0"),re.style("padding","8px"),re.style("border-radius","10px"),re.position(0,0)),this._renderer instanceof v.default.RendererGL&&(pe=this.drawingContext,le=new Uint8Array(pe.drawingBufferWidth*pe.drawingBufferHeight*4)),this.noLoop(),be.next=39,Promise.resolve();case 39:if(W<X)return this.redraw(),Ie=void 0,Ie=this._renderer instanceof v.default.RendererGL?(le=new Uint8Array(pe.drawingBufferWidth*pe.drawingBufferHeight*4),pe.readPixels(0,0,pe.drawingBufferWidth,pe.drawingBufferHeight,pe.RGBA,pe.UNSIGNED_BYTE,le),function(Oe,Ge,Ke){for(var ze=parseInt(Ke/2),qe=4*Ge,et=new Uint8Array(4*Ge),_t=0;_t<ze;++_t){var ot=_t*qe,Kt=(Ke-_t-1)*qe;et.set(Oe.subarray(ot,ot+qe)),Oe.copyWithin(ot,Kt,Kt+qe),Oe.set(et,Kt)}return Oe}(le,this.width,this.height)):this.drawingContext.getImageData(0,0,this.width,this.height).data,ie.push(Ie),W++,z||re.html("Saved frame <b>"+ie.length.toString()+"</b> out of "+Z.toString()),be.next=48,new Promise(function(Oe){return setTimeout(Oe,0)});be.next=50;break;case 48:be.next=39;break;case 50:z||re.html("Frames processed, generating color palette..."),this.loop(),this.pixelDensity(oe),Ae=(0,f.GIFEncoder)(),$=function(Oe){for(var Ge=new Uint8Array(Oe.length*Oe[0].length),Ke=0;Ke<Oe.length;Ke++)Ge.set(Oe[Ke],Ke*Oe[0].length);var ze=(0,f.quantize)(Ge,256,{format:"rgba4444",oneBitAlpha:!0});return 256===ze.length?ze[ze.length-1]=[255*Math.random(),255*Math.random(),255*Math.random(),0]:ze.push([255*Math.random(),255*Math.random(),255*Math.random(),0]),ze}(ie),P={},K=function(Oe){for(var Ge=Oe.length/4,Ke=new Uint8Array(Ge),ze=0;ze<Ge;ze++){var qe=Oe[4*ze]<<24|Oe[4*ze+1]<<16|Oe[4*ze+2]<<8|Oe[4*ze+3];void 0===P[qe]&&(P[qe]=(0,f.nearestColorIndex)($,Oe.slice(4*ze,4*(ze+1)))),Ke[ze]=P[qe]}return Ke},te=$.length-1,fe=[],ve=0;case 60:if(!(ve<ie.length)){be.next=71;break}if(Te=K(ie[ve]),Ie=Te.slice(),0===ve)Ae.writeFrame(Te,this.width,this.height,{palette:$,delay:k,dispose:1});else{for(we=0;we<Te.length;we++)Te[we]===fe[we]&&(Te[we]=te);Ae.writeFrame(Te,this.width,this.height,{delay:k,transparent:!0,transparentIndex:te,dispose:1})}return fe=Ie,z||re.html("Rendered frame <b>"+ve.toString()+"</b> out of "+Z.toString()),be.next=68,new Promise(function(Oe){return setTimeout(Oe,0)});case 68:ve++,be.next=60;break;case 71:Ae.finish(),Pe=Ae.bytesView(),Pe=new Blob([Pe],{type:"image/gif"}),ie=[],this._recording=!1,this.loop(),z||(re.html("Done. Downloading your gif!\u{1f338}"),0<F&&setTimeout(function(){return re.remove()},1e3*F)),v.default.prototype.downloadFile(Pe,D,"gif");case 80:case"end":return be.stop()}},x,this)});var y,b=function(){var x=this,D=arguments;return new Promise(function(N,U){var R=y.apply(x,D);function L(F){m(R,N,U,L,z,"next",F)}function z(F){m(R,N,U,L,z,"throw",F)}L(void 0)})};return function(x,D){return b.apply(this,arguments)}}(),v.default.prototype.image=function(y,b,x,D,W,oe,ie,re,pe,F,q,k){v.default._validateParameters("image",arguments);var le=y.width,Z=y.height,X=(k=k||T.CENTER,q=q||T.CENTER,y.elt&&(le=void 0!==le?le:y.elt.width,Z=void 0!==Z?Z:y.elt.height),y.elt&&y.elt.videoWidth&&!y.canvas&&(le=void 0!==le?le:y.elt.videoWidth,Z=void 0!==Z?Z:y.elt.videoHeight),D||le);W=W||Z,oe=oe||0,ie=ie||0,re=h(void 0!==re?re:le,le),le=h(void 0!==pe?pe:Z,Z),pe=1,y.elt&&!y.canvas&&y.elt.style.width&&(pe=y.elt.videoWidth&&!D?y.elt.videoWidth:y.elt.width,pe/=parseInt(y.elt.style.width,10)),oe*=pe,ie*=pe,le*=pe,re*=pe,Z=function p(y,b,x,D,N,U,R,L,z,F,q){var k,Z,X,W,oe,ie,re,le,pe;return y===T.COVER&&(k=b,X=x,re=U,le=R,ie=L,pe=z,Z=F,W=q,re/=oe=Math.max(re/Z,le/W),le/=oe,oe=ie,ie=pe,k===T.CENTER?oe+=(Z-re)/2:k===T.RIGHT&&(oe+=Z-re),X===T.CENTER?ie+=(W-le)/2:X===T.BOTTOM&&(ie+=W-le),L=(pe={x:oe,y:ie,w:re,h:le}).x,z=pe.y,F=pe.w,q=pe.h),y===T.CONTAIN&&(k=b,Z=x,X=D,W=N,oe=U,ie=R,re=F,le=q,re/=pe=Math.max(re/oe,le/ie),le/=pe,pe=X,X=W,k===T.CENTER?pe+=(oe-re)/2:k===T.RIGHT&&(pe+=oe-re),Z===T.CENTER?X+=(ie-le)/2:Z===T.BOTTOM&&(X+=ie-le),D=(y={x:pe,y:X,w:re,h:le}).x,N=y.y,U=y.w,R=y.h),{sx:L,sy:z,sw:F,sh:q,dx:D,dy:N,dw:U,dh:R}}(F,q,k,(Z=S.default.modeAdjust(b,x,X,W,this._renderer._imageMode)).x,Z.y,Z.w,Z.h,oe,ie,re,le),this._renderer.image(y,Z.sx,Z.sy,Z.sw,Z.sh,Z.dx,Z.dy,Z.dw,Z.dh)},v.default.prototype.tint=function(){for(var y=arguments.length,b=new Array(y),x=0;x<y;x++)b[x]=arguments[x];v.default._validateParameters("tint",b);var D=this.color.apply(this,b);this._renderer._tint=D.levels},v.default.prototype.noTint=function(){this._renderer._tint=null},v.default.prototype._getTintedImageCanvas=v.default.Renderer2D.prototype._getTintedImageCanvas,v.default.prototype.imageMode=function(y){v.default._validateParameters("imageMode",arguments),y!==T.CORNER&&y!==T.CORNERS&&y!==T.CENTER||(this._renderer._imageMode=y)},H.default=l=v.default},{"../core/constants":272,"../core/friendly_errors/fes_core":274,"../core/friendly_errors/file_errors":275,"../core/friendly_errors/validate_params":278,"../core/helpers":279,"../core/main":283,"core-js/modules/es.array.copy-within":154,"core-js/modules/es.array.includes":163,"core-js/modules/es.array.index-of":164,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.slice":169,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.to-string":190,"core-js/modules/es.promise":191,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.string.includes":199,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.typed-array.copy-within":213,"core-js/modules/es.typed-array.every":214,"core-js/modules/es.typed-array.fill":215,"core-js/modules/es.typed-array.filter":216,"core-js/modules/es.typed-array.find":218,"core-js/modules/es.typed-array.find-index":217,"core-js/modules/es.typed-array.for-each":221,"core-js/modules/es.typed-array.includes":222,"core-js/modules/es.typed-array.index-of":223,"core-js/modules/es.typed-array.iterator":226,"core-js/modules/es.typed-array.join":227,"core-js/modules/es.typed-array.last-index-of":228,"core-js/modules/es.typed-array.map":229,"core-js/modules/es.typed-array.reduce":231,"core-js/modules/es.typed-array.reduce-right":230,"core-js/modules/es.typed-array.reverse":232,"core-js/modules/es.typed-array.set":233,"core-js/modules/es.typed-array.slice":234,"core-js/modules/es.typed-array.some":235,"core-js/modules/es.typed-array.sort":236,"core-js/modules/es.typed-array.subarray":237,"core-js/modules/es.typed-array.to-locale-string":238,"core-js/modules/es.typed-array.to-string":239,"core-js/modules/es.typed-array.uint8-array":242,"core-js/modules/es.typed-array.uint8-clamped-array":243,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246,gifenc:253,omggif:256,"regenerator-runtime/runtime":260}],307:[function(l,de,H){"use strict";l("core-js/modules/es.symbol"),l("core-js/modules/es.symbol.description"),l("core-js/modules/es.symbol.iterator"),l("core-js/modules/es.array.iterator"),l("core-js/modules/es.object.to-string"),l("core-js/modules/es.string.iterator"),l("core-js/modules/web.dom-collections.iterator"),l("core-js/modules/es.symbol"),l("core-js/modules/es.symbol.description"),l("core-js/modules/es.symbol.iterator"),l("core-js/modules/es.array.iterator"),l("core-js/modules/es.object.to-string"),l("core-js/modules/es.string.iterator"),l("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(H,"__esModule",{value:!0}),H.default=void 0;var M=v(l("../core/main")),E=v(l("./filters"));function v(T){return T&&T.__esModule?T:{default:T}}function S(T,C){for(var f=0;f<C.length;f++){var g=C[f];g.enumerable=g.enumerable||!1,g.configurable=!0,"value"in g&&(g.writable=!0),Object.defineProperty(T,g.key,g)}}M.default.Image=function(){function T(d,m){if(!(this instanceof T))throw new TypeError("Cannot call a class as a function");this.width=d,this.height=m,this.canvas=document.createElement("canvas"),this.canvas.width=this.width,this.canvas.height=this.height,this.drawingContext=this.canvas.getContext("2d"),(this._pixelsState=this)._pixelDensity=1,this.gifProperties=null,this._modified=!1,this.pixels=[]}var C,f;return C=T,(f=[{key:"pixelDensity",value:function(d){return void 0!==d?(d<=0&&(M.default._friendlyParamError({type:"INVALID_VALUE",format:{types:["Number"]},position:1},"pixelDensity"),d=1),this._pixelDensity=d,this.width/=d,this.height/=d,this):this._pixelDensity}},{key:"_animateGif",value:function(h){var m,p=this.gifProperties;h=h._lastRealFrameTime||window.performance.now(),0===p.lastChangeTime&&(p.lastChangeTime=h),p.playing&&(p.timeDisplayed=h-p.lastChangeTime,p.timeDisplayed>=(m=p.frames[p.displayIndex].delay)&&(m=Math.floor(p.timeDisplayed/m),p.timeDisplayed=0,p.lastChangeTime=h,p.displayIndex+=m,p.loopCount=Math.floor(p.displayIndex/p.numFrames),null!==p.loopLimit&&p.loopCount>=p.loopLimit?p.playing=!1:(this.drawingContext.putImageData(p.frames[h=p.displayIndex%p.numFrames].image,0,0),p.displayIndex=h,this.setModified(!0))))}},{key:"_setProperty",value:function(d,m){this[d]=m,this.setModified(!0)}},{key:"loadPixels",value:function(){M.default.Renderer2D.prototype.loadPixels.call(this),this.setModified(!0)}},{key:"updatePixels",value:function(d,m,p,h){M.default.Renderer2D.prototype.updatePixels.call(this,d,m,p,h),this.setModified(!0)}},{key:"get",value:function(d,m,p,h){return M.default._validateParameters("p5.Image.get",arguments),M.default.Renderer2D.prototype.get.apply(this,arguments)}},{key:"_getPixel",value:function(){for(var d=arguments.length,m=new Array(d),p=0;p<d;p++)m[p]=arguments[p];return M.default.Renderer2D.prototype._getPixel.apply(this,m)}},{key:"set",value:function(d,m,p){M.default.Renderer2D.prototype.set.call(this,d,m,p),this.setModified(!0)}},{key:"resize",value:function(d,m){0===d&&0===m?(d=this.canvas.width,m=this.canvas.height):0===d?d=this.canvas.width*m/this.canvas.height:0===m&&(m=this.canvas.height*d/this.canvas.width),d=Math.floor(d),m=Math.floor(m);var p=document.createElement("canvas");if(p.width=d,p.height=m,this.gifProperties)for(var h=this.gifProperties,y=0;y<h.numFrames;y++){for(var b=this.drawingContext.createImageData(d,m),x=(L=L=R=U=N=void 0,h.frames[y].image),D=b,N=0,U=0;U<D.height;U++)for(var R=0;R<D.width;R++){var L=Math.floor(R*x.width/D.width);L=4*(Math.floor(U*x.height/D.height)*x.width+L),D.data[N++]=x.data[L++],D.data[N++]=x.data[L++],D.data[N++]=x.data[L++],D.data[N++]=x.data[+L]}h.frames[y].image=b}p.getContext("2d").drawImage(this.canvas,0,0,this.canvas.width,this.canvas.height,0,0,p.width,p.height),this.canvas.width=this.width=d,this.canvas.height=this.height=m,this.drawingContext.drawImage(p,0,0,d,m,0,0,d,m),0<this.pixels.length&&this.loadPixels(),this.setModified(!0)}},{key:"copy",value:function(){for(var d=arguments.length,m=new Array(d),p=0;p<d;p++)m[p]=arguments[p];M.default.prototype.copy.apply(this,m)}},{key:"mask",value:function(d){var m=this.drawingContext.globalCompositeOperation,p=this._pixelDensity,h=1,y=[d=void 0===d?this:d,0,0,(h=d instanceof M.default.Renderer?d._pInst._pixelDensity:h)*d.width,h*d.height,0,0,p*this.width,p*this.height];if(this.drawingContext.globalCompositeOperation="destination-in",this.gifProperties){for(var b=0;b<this.gifProperties.frames.length;b++)this.drawingContext.putImageData(this.gifProperties.frames[b].image,0,0),this.copy.apply(this,y),this.gifProperties.frames[b].image=this.drawingContext.getImageData(0,0,p*this.width,p*this.height);this.drawingContext.putImageData(this.gifProperties.frames[this.gifProperties.displayIndex].image,0,0)}else this.copy.apply(this,y);this.drawingContext.globalCompositeOperation=m,this.setModified(!0)}},{key:"filter",value:function(d,m){E.default.apply(this.canvas,E.default[d],m),this.setModified(!0)}},{key:"blend",value:function(){for(var d=arguments.length,m=new Array(d),p=0;p<d;p++)m[p]=arguments[p];M.default._validateParameters("p5.Image.blend",arguments),M.default.prototype.blend.apply(this,m),this.setModified(!0)}},{key:"setModified",value:function(d){this._modified=d}},{key:"isModified",value:function(){return this._modified}},{key:"save",value:function(d,m){this.gifProperties?M.default.prototype.encodeAndDownloadGif(this,d):M.default.prototype.saveCanvas(this.canvas,d,m)}},{key:"reset",value:function(){var d;this.gifProperties&&((d=this.gifProperties).playing=!0,d.timeSinceStart=0,d.timeDisplayed=0,d.lastChangeTime=0,d.loopCount=0,d.displayIndex=0,this.drawingContext.putImageData(d.frames[0].image,0,0))}},{key:"getCurrentFrame",value:function(){var d;if(this.gifProperties)return(d=this.gifProperties).displayIndex%d.numFrames}},{key:"setFrame",value:function(d){var m;this.gifProperties&&(d<(m=this.gifProperties).numFrames&&0<=d?(m.timeDisplayed=0,m.lastChangeTime=0,m.displayIndex=d,this.drawingContext.putImageData(m.frames[d].image,0,0)):console.log("Cannot set GIF to a frame number that is higher than total number of frames or below zero."))}},{key:"numFrames",value:function(){if(this.gifProperties)return this.gifProperties.numFrames}},{key:"play",value:function(){this.gifProperties&&(this.gifProperties.playing=!0)}},{key:"pause",value:function(){this.gifProperties&&(this.gifProperties.playing=!1)}},{key:"delay",value:function(d,m){if(this.gifProperties){var p=this.gifProperties;if(m<p.numFrames&&0<=m)p.frames[m].delay=d;else{var h=!0,y=void(m=!1);try{for(var b,x=p.frames[Symbol.iterator]();!(h=(b=x.next()).done);h=!0)b.value.delay=d}catch(N){m=!0,y=N}finally{try{h||null==x.return||x.return()}finally{if(m)throw y}}}}}}])&&S(C.prototype,f),T}(),H.default=l=M.default.Image},{"../core/main":283,"./filters":304,"core-js/modules/es.array.iterator":165,"core-js/modules/es.object.to-string":190,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/web.dom-collections.iterator":246}],308:[function(l,de,H){"use strict";l("core-js/modules/es.array.filter"),l("core-js/modules/es.array.filter"),Object.defineProperty(H,"__esModule",{value:!0}),H.default=void 0;var M=v(l("../core/main")),E=v(l("./filters"));function v(S){return S&&S.__esModule?S:{default:S}}l("../color/p5.Color"),M.default.prototype.pixels=[],M.default.prototype.blend=function(){for(var S,T=arguments.length,C=new Array(T),f=0;f<T;f++)C[f]=arguments[f];M.default._validateParameters("blend",C),this._renderer?(S=this._renderer).blend.apply(S,C):M.default.Renderer2D.prototype.blend.apply(this,C)},M.default.prototype.copy=function(){for(var S,T,C,f,g,d,m,p,h,y=arguments.length,b=new Array(y),x=0;x<y;x++)b[x]=arguments[x];if(M.default._validateParameters("copy",b),9===b.length)S=b[0],T=b[1],C=b[2],f=b[3],g=b[4],d=b[5],m=b[6],p=b[7],h=b[8];else{if(8!==b.length)throw new Error("Signature not supported");S=this,T=b[0],C=b[1],f=b[2],g=b[3],d=b[4],m=b[5],p=b[6],h=b[7]}M.default.prototype._copyHelper(this,S,T,C,f,g,d,m,p,h)},M.default.prototype._copyHelper=function(S,T,C,f,g,d,m,p,h,y){var b=T.canvas.width/T.width,x=0,D=0;T._renderer&&T._renderer.isP3D&&(x=T.width/2,D=T.height/2),S._renderer&&S._renderer.isP3D?(S.push(),S.resetMatrix(),S.noLights(),S.blendMode(S.BLEND),S.imageMode(S.CORNER),M.default.RendererGL.prototype.image.call(S._renderer,T,C+x,f+D,g,d,m,p,h,y),S.pop()):S.drawingContext.drawImage(T.canvas,b*(C+x),b*(f+D),b*g,b*d,m,p,h,y)},M.default.prototype.getFilterGraphicsLayer=function(){return this._renderer.getFilterGraphicsLayer()},M.default.prototype.filter=function(){for(var S=arguments.length,T=new Array(S),C=0;C<S;C++)T[C]=arguments[C];M.default._validateParameters("filter",T);var m=function(){var p,h={shader:void 0,operation:void 0,value:void 0,useWebGL:!0};return(arguments.length<=0?void 0:arguments[0])instanceof M.default.Shader?h.shader=arguments.length<=0?void 0:arguments[0]:(h.operation=arguments.length<=0?void 0:arguments[0],1<arguments.length&&"number"==typeof(arguments.length<=1?void 0:arguments[1])&&(h.value=arguments.length<=1?void 0:arguments[1]),!1===((p=arguments.length-1)<0||arguments.length<=p?void 0:arguments[p])&&(h.useWebGL=!1)),h}.apply(void 0,T),f=m.shader,g=m.operation,d=m.value;m=m.useWebGL,this._renderer.isP3D&&f?M.default.RendererGL.prototype.filter.call(this._renderer,f):m||this._renderer.isP3D?(!m&&this._renderer.isP3D&&console.warn("filter() with useWebGL=false is not supported in WEBGL"),this._renderer.isP3D?M.default.RendererGL.prototype.filter.call(this._renderer,g,d):((f=this.getFilterGraphicsLayer()).copy(this._renderer,0,0,this.width,this.height,-this.width/2,-this.height/2,this.width,this.height),this._renderer.clear(),this._renderer.resetMatrix(),f.filter.apply(f,T),this.copy(f._renderer,0,0,this.width,this.height,0,0,this.width,this.height),f.clear())):E.default.apply(void 0!==this.canvas?this.canvas:this.elt,E.default[g],d)},M.default.prototype.get=function(S,T,C,f){var g;return M.default._validateParameters("get",arguments),(g=this._renderer).get.apply(g,arguments)},M.default.prototype.loadPixels=function(){for(var S=arguments.length,T=new Array(S),C=0;C<S;C++)T[C]=arguments[C];M.default._validateParameters("loadPixels",T),this._renderer.loadPixels()},M.default.prototype.set=function(S,T,C){this._renderer.set(S,T,C)},M.default.prototype.updatePixels=function(S,T,C,f){M.default._validateParameters("updatePixels",arguments),0!==this.pixels.length&&this._renderer.updatePixels(S,T,C,f)},H.default=l=M.default},{"../color/p5.Color":270,"../core/main":283,"./filters":304,"core-js/modules/es.array.filter":157}],309:[function(l,de,H){"use strict";function M(d){return(M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(m){return typeof m}:function(m){return m&&"function"==typeof Symbol&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":typeof m})(d)}l("core-js/modules/es.symbol"),l("core-js/modules/es.symbol.description"),l("core-js/modules/es.symbol.iterator"),l("core-js/modules/es.array.concat"),l("core-js/modules/es.array.includes"),l("core-js/modules/es.array.iterator"),l("core-js/modules/es.array.last-index-of"),l("core-js/modules/es.array.map"),l("core-js/modules/es.array.slice"),l("core-js/modules/es.array.splice"),l("core-js/modules/es.function.name"),l("core-js/modules/es.object.from-entries"),l("core-js/modules/es.object.to-string"),l("core-js/modules/es.promise"),l("core-js/modules/es.regexp.exec"),l("core-js/modules/es.regexp.to-string"),l("core-js/modules/es.string.includes"),l("core-js/modules/es.string.iterator"),l("core-js/modules/es.string.replace"),l("core-js/modules/es.string.split"),l("core-js/modules/es.typed-array.uint8-array"),l("core-js/modules/es.typed-array.copy-within"),l("core-js/modules/es.typed-array.every"),l("core-js/modules/es.typed-array.fill"),l("core-js/modules/es.typed-array.filter"),l("core-js/modules/es.typed-array.find"),l("core-js/modules/es.typed-array.find-index"),l("core-js/modules/es.typed-array.for-each"),l("core-js/modules/es.typed-array.includes"),l("core-js/modules/es.typed-array.index-of"),l("core-js/modules/es.typed-array.iterator"),l("core-js/modules/es.typed-array.join"),l("core-js/modules/es.typed-array.last-index-of"),l("core-js/modules/es.typed-array.map"),l("core-js/modules/es.typed-array.reduce"),l("core-js/modules/es.typed-array.reduce-right"),l("core-js/modules/es.typed-array.reverse"),l("core-js/modules/es.typed-array.set"),l("core-js/modules/es.typed-array.slice"),l("core-js/modules/es.typed-array.some"),l("core-js/modules/es.typed-array.sort"),l("core-js/modules/es.typed-array.subarray"),l("core-js/modules/es.typed-array.to-locale-string"),l("core-js/modules/es.typed-array.to-string"),l("core-js/modules/web.dom-collections.iterator"),l("core-js/modules/web.url"),l("core-js/modules/es.symbol"),l("core-js/modules/es.symbol.description"),l("core-js/modules/es.symbol.iterator"),l("core-js/modules/es.array.concat"),l("core-js/modules/es.array.includes"),l("core-js/modules/es.array.iterator"),l("core-js/modules/es.array.last-index-of"),l("core-js/modules/es.array.map"),l("core-js/modules/es.array.slice"),l("core-js/modules/es.array.splice"),l("core-js/modules/es.function.name"),l("core-js/modules/es.object.from-entries"),l("core-js/modules/es.object.to-string"),l("core-js/modules/es.promise"),l("core-js/modules/es.regexp.exec"),l("core-js/modules/es.regexp.to-string"),l("core-js/modules/es.string.includes"),l("core-js/modules/es.string.iterator"),l("core-js/modules/es.string.replace"),l("core-js/modules/es.string.split"),l("core-js/modules/es.typed-array.uint8-array"),l("core-js/modules/es.typed-array.copy-within"),l("core-js/modules/es.typed-array.every"),l("core-js/modules/es.typed-array.fill"),l("core-js/modules/es.typed-array.filter"),l("core-js/modules/es.typed-array.find"),l("core-js/modules/es.typed-array.find-index"),l("core-js/modules/es.typed-array.for-each"),l("core-js/modules/es.typed-array.includes"),l("core-js/modules/es.typed-array.index-of"),l("core-js/modules/es.typed-array.iterator"),l("core-js/modules/es.typed-array.join"),l("core-js/modules/es.typed-array.last-index-of"),l("core-js/modules/es.typed-array.map"),l("core-js/modules/es.typed-array.reduce"),l("core-js/modules/es.typed-array.reduce-right"),l("core-js/modules/es.typed-array.reverse"),l("core-js/modules/es.typed-array.set"),l("core-js/modules/es.typed-array.slice"),l("core-js/modules/es.typed-array.some"),l("core-js/modules/es.typed-array.sort"),l("core-js/modules/es.typed-array.subarray"),l("core-js/modules/es.typed-array.to-locale-string"),l("core-js/modules/es.typed-array.to-string"),l("core-js/modules/web.dom-collections.iterator"),l("core-js/modules/web.url"),Object.defineProperty(H,"__esModule",{value:!0}),H.default=void 0;var E=T(l("../core/main")),v=(l("whatwg-fetch"),l("es6-promise/auto"),T(l("fetch-jsonp"))),S=T(l("file-saver"));function T(d){return d&&d.__esModule?d:{default:d}}function C(d){return(C="function"==typeof Symbol&&"symbol"===M(Symbol.iterator)?function(m){return M(m)}:function(m){return m&&"function"==typeof Symbol&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":M(m)})(d)}function f(d){return d.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")}function g(d,m){m&&!0!==m&&"true"!==m||(m="");var p="";return(d=d||"untitled")&&d.includes(".")&&(p=d.split(".").pop()),m&&p!==m&&(p=m,d="".concat(d,".").concat(p)),[d,p]}l("../core/friendly_errors/validate_params"),l("../core/friendly_errors/file_errors"),l("../core/friendly_errors/fes_core"),E.default.prototype.loadJSON=function(){for(var d=arguments.length,m=new Array(d),p=0;p<d;p++)m[p]=arguments[p];E.default._validateParameters("loadJSON",m);for(var h,y,b,x=m[0],D={},N="json",U=1;U<m.length;U++){var R=m[U];"string"==typeof R?"jsonp"!==R&&"json"!==R||(N=R):"function"==typeof R?h?y=R:h=R:"object"===C(R)&&(R.hasOwnProperty("jsonpCallback")||R.hasOwnProperty("jsonpCallbackFunction"))&&(N="jsonp",b=R)}var L=this;return this.httpDo(x,"GET",b,N,function(z){for(var F in z)D[F]=z[F];void 0!==h&&h(z),L._decrementPreload()},function(z){if(E.default._friendlyFileLoadError(5,x),!y)throw z;y(z)}),D},E.default.prototype.loadStrings=function(){for(var d=arguments.length,m=new Array(d),p=0;p<d;p++)m[p]=arguments[p];E.default._validateParameters("loadStrings",m);for(var h,y,b=[],x=1;x<m.length;x++){var D=m[x];"function"==typeof D&&(void 0===h?h=D:void 0===y&&(y=D))}var N=this;return E.default.prototype.httpDo.call(this,m[0],"GET","text",function(U){for(var R=U.replace(/\r\n/g,"\r").replace(/\n/g,"\r").split(/\r/),L=0,z=R.length;L<z;L+=32768)Array.prototype.push.apply(b,R.slice(L,Math.min(L+32768,z)));void 0!==h&&h(b),N._decrementPreload()},function(U){if(E.default._friendlyFileLoadError(3,U),!y)throw U;y(U)}),b},E.default.prototype.loadTable=function(d){var m,p,h,y=[],b=!1,x=d.substring(d.lastIndexOf(".")+1,d.length);"csv"===x?h=",":"ssv"===x?h=";":"tsv"===x&&(h="\t");for(var D=1;D<arguments.length;D++)"function"==typeof arguments[D]?void 0===m?m=arguments[D]:void 0===p&&(p=arguments[D]):"string"==typeof arguments[D]&&(y.push(arguments[D]),"header"===arguments[D]&&(b=!0),"csv"===arguments[D]?h=",":"ssv"===arguments[D]?h=";":"tsv"===arguments[D]&&(h="\t"));var N=new E.default.Table,U=this;return this.httpDo(d,"GET","table",function(R){for(var L,z,F={},k=[],Z=0,X=null,W=function(){F.currentState=0,F.token=""},oe=function(){X.push(F.token),W()},ie=function(){F.currentState=4,k.push(X),X=null};;){if(null==(L=R[Z++])){if(F.escaped)throw new Error("Unclosed quote in file.");if(X){oe(),ie();break}}if(null===X&&(F.escaped=!1,X=[],W()),0===F.currentState){if('"'===L){F.escaped=!0,F.currentState=1;continue}F.currentState=1}if(1===F.currentState&&F.escaped)if('"'===L)'"'===R[Z]?(F.token+='"',Z++):(F.escaped=!1,F.currentState=2);else{if("\r"===L)continue;F.token+=L}else"\r"===L?("\n"===R[Z]&&Z++,oe(),ie()):"\n"===L?(oe(),ie()):L===h?oe():1===F.currentState&&(F.token+=L)}if(b)N.columns=k.shift();else for(var re=0;re<k[0].length;re++)N.columns[re]="null";for(var le=0;le<k.length;le++)(1!==k[le].length||"undefined"!==k[le][0]&&""!==k[le][0])&&((z=new E.default.TableRow).arr=k[le],z.obj=function(pe,Ae){if(void 0===(Ae=Ae||[]))for(var $=0;$<pe.length;$++)Ae[$.toString()]=$;return Object.fromEntries(Ae.map(function(P,K){return[P,pe[K]]}))}(k[le],N.columns),N.addRow(z));"function"==typeof m&&m(N),U._decrementPreload()},function(R){E.default._friendlyFileLoadError(2,d),p?p(R):console.error(R)}),N},E.default.prototype.loadXML=function(){for(var d=arguments.length,m=new Array(d),p=0;p<d;p++)m[p]=arguments[p];for(var h,y,b=new E.default.XML,x=1;x<m.length;x++){var D=m[x];"function"==typeof D&&(void 0===h?h=D:void 0===y&&(y=D))}var N=this;return this.httpDo(m[0],"GET","xml",function(U){for(var R in U)b[R]=U[R];void 0!==h&&h(b),N._decrementPreload()},function(U){if(E.default._friendlyFileLoadError(1,U),!y)throw U;y(U)}),b},E.default.prototype.loadBytes=function(d,m,p){var h={},y=this;return this.httpDo(d,"GET","arrayBuffer",function(b){h.bytes=new Uint8Array(b),"function"==typeof m&&m(h),y._decrementPreload()},function(b){if(E.default._friendlyFileLoadError(6,d),!p)throw b;p(b)}),h},E.default.prototype.httpGet=function(){for(var d=arguments.length,m=new Array(d),p=0;p<d;p++)m[p]=arguments[p];return E.default._validateParameters("httpGet",m),m.splice(1,0,"GET"),E.default.prototype.httpDo.apply(this,m)},E.default.prototype.httpPost=function(){for(var d=arguments.length,m=new Array(d),p=0;p<d;p++)m[p]=arguments[p];return E.default._validateParameters("httpPost",m),m.splice(1,0,"POST"),E.default.prototype.httpDo.apply(this,m)},E.default.prototype.httpDo=function(){for(var d,m,p,h={},y=0,b="text/plain",x=arguments.length-1;0<x&&"function"==typeof(x<0||arguments.length<=x?void 0:arguments[x]);x--)y++;var N=arguments.length<=0?void 0:arguments[0];if(2==(D=arguments.length-y)&&"string"==typeof N&&"object"===C(arguments.length<=1?void 0:arguments[1]))q=new Request(N,arguments.length<=1?void 0:arguments[1]),m=arguments.length<=2?void 0:arguments[2],p=arguments.length<=3?void 0:arguments[3];else{for(var U,R="GET",L=1;L<arguments.length;L++){var z=L<0||arguments.length<=L?void 0:arguments[L];if("string"==typeof z)"GET"===z||"POST"===z||"PUT"===z||"DELETE"===z?R=z:"json"===z||"jsonp"===z||"binary"===z||"arrayBuffer"===z||"xml"===z||"text"===z||"table"===z?d=z:U=z;else if("number"==typeof z)U=z.toString();else if("object"===C(z))if(z.hasOwnProperty("jsonpCallback")||z.hasOwnProperty("jsonpCallbackFunction"))for(var F in z)h[F]=z[F];else b=z instanceof E.default.XML?(U=z.serialize(),"application/xml"):(U=JSON.stringify(z),"application/json");else"function"==typeof z&&(m?p=z:m=z)}var D="GET"===R?new Headers:new Headers({"Content-Type":b}),q=new Request(N,{method:R,mode:"cors",body:U,headers:D})}return(D=(D="jsonp"===(d=d||(N.includes("json")?"json":N.includes("xml")?"xml":"text"))?(0,v.default)(N,h):fetch(q)).then(function(k){if(!k.ok)throw(Z=new Error(k.body)).status=k.status,Z.ok=!1,Z;var Z=0;switch((Z="jsonp"!==d?k.headers.get("content-length"):Z)&&64e6<Z&&E.default._friendlyFileLoadError(7,N),d){case"json":case"jsonp":return k.json();case"binary":return k.blob();case"arrayBuffer":return k.arrayBuffer();case"xml":return k.text().then(function(X){return X=(new DOMParser).parseFromString(X,"text/xml"),new E.default.XML(X.documentElement)});default:return k.text()}})).then(m||function(){}),D.catch(p||console.error),D},window.URL=window.URL||window.webkitURL,E.default.prototype._pWriters=[],E.default.prototype.createWriter=function(d,m){var p,h;for(h in E.default.prototype._pWriters)if(E.default.prototype._pWriters[h].name===d)return p=new E.default.PrintWriter(d+this.millis(),m),E.default.prototype._pWriters.push(p),p;return p=new E.default.PrintWriter(d,m),E.default.prototype._pWriters.push(p),p},E.default.PrintWriter=function(d,m){var p=this;this.name=d,this.content="",this.write=function(h){this.content+=h},this.print=function(h){this.content+="".concat(h,"\n")},this.clear=function(){this.content=""},this.close=function(){var h,y=[];for(h in y.push(this.content),E.default.prototype.writeFile(y,d,m),E.default.prototype._pWriters)E.default.prototype._pWriters[h].name===this.name&&E.default.prototype._pWriters.splice(h,1);p.clear(),p={}}},E.default.prototype.save=function(d,m,p){var h=arguments,y=(this._curElement||this).elt;if(0===h.length)E.default.prototype.saveCanvas(y);else if(h[0]instanceof E.default.Renderer||h[0]instanceof E.default.Graphics)E.default.prototype.saveCanvas(h[0].elt,h[1],h[2]);else if(1===h.length&&"string"==typeof h[0])E.default.prototype.saveCanvas(y,h[0]);else switch(g(h[1],h[2])[1]){case"json":return void E.default.prototype.saveJSON(h[0],h[1],h[2]);case"txt":return void E.default.prototype.saveStrings(h[0],h[1],h[2]);default:h[0]instanceof Array?E.default.prototype.saveStrings(h[0],h[1],h[2]):h[0]instanceof E.default.Table?E.default.prototype.saveTable(h[0],h[1],h[2]):h[0]instanceof E.default.Image?E.default.prototype.saveCanvas(h[0].canvas,h[1]):h[0]instanceof E.default.SoundFile&&E.default.prototype.saveSound(h[0],h[1],h[2],h[3])}},E.default.prototype.saveJSON=function(d,m,p){E.default._validateParameters("saveJSON",arguments),p=p?JSON.stringify(d):JSON.stringify(d,void 0,2),this.saveStrings(p.split("\n"),m,"json")},E.default.prototype.saveJSONObject=E.default.prototype.saveJSON,E.default.prototype.saveJSONArray=E.default.prototype.saveJSON,E.default.prototype.saveStrings=function(d,m,p,h){E.default._validateParameters("saveStrings",arguments);for(var y=this.createWriter(m,p||"txt"),b=0;b<d.length;b++)y.write(h?d[b]+"\r\n":d[b]+"\n");y.close(),y.clear()},E.default.prototype.saveTable=function(d,m,p){E.default._validateParameters("saveTable",arguments),h=void 0===p?m.substring(m.lastIndexOf(".")+1,m.length):p;var h,y=this.createWriter(m,h),b=d.columns,x="tsv"===h?"\t":",";if("html"!==h){if("0"!==b[0]){for(var D=0;D<b.length;D++)y.write(D<b.length-1?b[D]+x:b[D]);y.write("\n")}for(var N=0;N<d.rows.length;N++){var U=void 0;for(U=0;U<d.rows[N].arr.length;U++)U<d.rows[N].arr.length-1?"csv"===h&&String(d.rows[N].arr[U]).includes(",")?y.write('"'+d.rows[N].arr[U]+'"'+x):y.write(d.rows[N].arr[U]+x):"csv"===h&&String(d.rows[N].arr[U]).includes(",")?y.write('"'+d.rows[N].arr[U]+'"'):y.write(d.rows[N].arr[U]);y.write("\n")}}else{if(y.print("<html>"),y.print("<head>"),y.print('  <meta http-equiv="content-type" content="text/html;charset=utf-8" />'),y.print("</head>"),y.print("<body>"),y.print("  <table>"),"0"!==b[0]){y.print("    <tr>");for(var R=0;R<b.length;R++){var L=f(b[R]);y.print("      <td>".concat(L)),y.print("      </td>")}y.print("    </tr>")}for(var z=0;z<d.rows.length;z++){y.print("    <tr>");for(var F=0;F<d.columns.length;F++){var q=f(d.rows[z].getString(F));y.print("      <td>".concat(q)),y.print("      </td>")}y.print("    </tr>")}y.print("  </table>"),y.print("</body>"),y.print("</html>")}y.close(),y.clear()},E.default.prototype.writeFile=function(y,m,p){var h="application/octet-stream";E.default.prototype._isSafari()&&(h="text/plain"),y=new Blob(y,{type:h}),E.default.prototype.downloadFile(y,m,p)},E.default.prototype.downloadFile=function(d,y,b){var h;b=(y=g(y,b))[0],d instanceof Blob?S.default.saveAs(d,b):((h=document.createElement("a")).href=d,h.download=b,h.onclick=function(x){document.body.removeChild(x.target),x.stopPropagation()},h.style.display="none",document.body.appendChild(h),E.default.prototype._isSafari()&&(d=(d='Hello, Safari user! To download this file...\n1. Go to File --\x3e Save As.\n2. Choose "Page Source" as the Format.\n')+'3. Name it with this extension: ."'.concat(y[1],'"'),alert(d)),h.click())},E.default.prototype._checkFileExtension=g,E.default.prototype._isSafari=function(){return window.HTMLElement.toString().includes("Constructor")},H.default=l=E.default},{"../core/friendly_errors/fes_core":274,"../core/friendly_errors/file_errors":275,"../core/friendly_errors/validate_params":278,"../core/main":283,"core-js/modules/es.array.concat":153,"core-js/modules/es.array.includes":163,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.last-index-of":167,"core-js/modules/es.array.map":168,"core-js/modules/es.array.slice":169,"core-js/modules/es.array.splice":171,"core-js/modules/es.function.name":174,"core-js/modules/es.object.from-entries":185,"core-js/modules/es.object.to-string":190,"core-js/modules/es.promise":191,"core-js/modules/es.regexp.exec":195,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.string.includes":199,"core-js/modules/es.string.iterator":200,"core-js/modules/es.string.replace":204,"core-js/modules/es.string.split":206,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.typed-array.copy-within":213,"core-js/modules/es.typed-array.every":214,"core-js/modules/es.typed-array.fill":215,"core-js/modules/es.typed-array.filter":216,"core-js/modules/es.typed-array.find":218,"core-js/modules/es.typed-array.find-index":217,"core-js/modules/es.typed-array.for-each":221,"core-js/modules/es.typed-array.includes":222,"core-js/modules/es.typed-array.index-of":223,"core-js/modules/es.typed-array.iterator":226,"core-js/modules/es.typed-array.join":227,"core-js/modules/es.typed-array.last-index-of":228,"core-js/modules/es.typed-array.map":229,"core-js/modules/es.typed-array.reduce":231,"core-js/modules/es.typed-array.reduce-right":230,"core-js/modules/es.typed-array.reverse":232,"core-js/modules/es.typed-array.set":233,"core-js/modules/es.typed-array.slice":234,"core-js/modules/es.typed-array.some":235,"core-js/modules/es.typed-array.sort":236,"core-js/modules/es.typed-array.subarray":237,"core-js/modules/es.typed-array.to-locale-string":238,"core-js/modules/es.typed-array.to-string":239,"core-js/modules/es.typed-array.uint8-array":242,"core-js/modules/web.dom-collections.iterator":246,"core-js/modules/web.url":248,"es6-promise/auto":249,"fetch-jsonp":251,"file-saver":252,"whatwg-fetch":261}],310:[function(l,de,H){"use strict";l("core-js/modules/es.array.concat"),l("core-js/modules/es.array.index-of"),l("core-js/modules/es.array.join"),l("core-js/modules/es.array.splice"),l("core-js/modules/es.regexp.constructor"),l("core-js/modules/es.regexp.exec"),l("core-js/modules/es.regexp.to-string"),l("core-js/modules/es.string.match"),l("core-js/modules/es.string.replace"),l("core-js/modules/es.array.concat"),l("core-js/modules/es.array.index-of"),l("core-js/modules/es.array.join"),l("core-js/modules/es.array.splice"),l("core-js/modules/es.regexp.constructor"),l("core-js/modules/es.regexp.exec"),l("core-js/modules/es.regexp.to-string"),l("core-js/modules/es.string.match"),l("core-js/modules/es.string.replace"),Object.defineProperty(H,"__esModule",{value:!0}),H.default=void 0;var M=(l=l("../core/main"))&&l.__esModule?l:{default:l};function E(v,S){for(var T=0;T<S.length;T++){var C=S[T];C.enumerable=C.enumerable||!1,C.configurable=!0,"value"in C&&(C.writable=!0),Object.defineProperty(v,C.key,C)}}M.default.Table=function(){function v(){var f=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[];if(!(this instanceof v))throw new TypeError("Cannot call a class as a function");this.columns=[],this.rows=f}var S,T;return S=v,(T=[{key:"addRow",value:function(f){if(void 0===(f=f||new M.default.TableRow).arr||void 0===f.obj)throw new Error("invalid TableRow: ".concat(f));return(f.table=this).rows.push(f),f}},{key:"removeRow",value:function(f){this.rows[f].table=null,f=this.rows.splice(f+1,this.rows.length),this.rows.pop(),this.rows=this.rows.concat(f)}},{key:"getRow",value:function(f){return this.rows[f]}},{key:"getRows",value:function(){return this.rows}},{key:"findRow",value:function(f,g){if("string"==typeof g){for(var d=0;d<this.rows.length;d++)if(this.rows[d].obj[g]===f)return this.rows[d]}else for(var m=0;m<this.rows.length;m++)if(this.rows[m].arr[g]===f)return this.rows[m];return null}},{key:"findRows",value:function(f,g){var d=[];if("string"==typeof g)for(var m=0;m<this.rows.length;m++)this.rows[m].obj[g]===f&&d.push(this.rows[m]);else for(var p=0;p<this.rows.length;p++)this.rows[p].arr[g]===f&&d.push(this.rows[p]);return d}},{key:"matchRow",value:function(f,g){if("number"==typeof g){for(var d=0;d<this.rows.length;d++)if(this.rows[d].arr[g].match(f))return this.rows[d]}else for(var m=0;m<this.rows.length;m++)if(this.rows[m].obj[g].match(f))return this.rows[m];return null}},{key:"matchRows",value:function(f,g){var d=[];if("number"==typeof g)for(var m=0;m<this.rows.length;m++)this.rows[m].arr[g].match(f)&&d.push(this.rows[m]);else for(var p=0;p<this.rows.length;p++)this.rows[p].obj[g].match(f)&&d.push(this.rows[p]);return d}},{key:"getColumn",value:function(f){var g=[];if("string"==typeof f)for(var d=0;d<this.rows.length;d++)g.push(this.rows[d].obj[f]);else for(var m=0;m<this.rows.length;m++)g.push(this.rows[m].arr[f]);return g}},{key:"clearRows",value:function(){delete this.rows,this.rows=[]}},{key:"addColumn",value:function(f){this.columns.push(f||null)}},{key:"getColumnCount",value:function(){return this.columns.length}},{key:"getRowCount",value:function(){return this.rows.length}},{key:"removeTokens",value:function(f,g){for(var d=[],m=0;m<f.length;m++)d.push(f.charAt(m).replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&"));var p=new RegExp(d.join("|"),"g");if(void 0===g)for(var h=0;h<this.columns.length;h++)for(var y=0;y<this.rows.length;y++){var b=(b=this.rows[y].arr[h]).replace(p,"");this.rows[y].arr[h]=b,this.rows[y].obj[this.columns[h]]=b}else if("string"==typeof g)for(var x=0;x<this.rows.length;x++){var D=(D=this.rows[x].obj[g]).replace(p,""),N=(this.rows[x].obj[g]=D,this.columns.indexOf(g));this.rows[x].arr[N]=D}else for(var U=0;U<this.rows.length;U++){var R=(R=this.rows[U].arr[g]).replace(p,"");this.rows[U].arr[g]=R,this.rows[U].obj[this.columns[g]]=R}}},{key:"trim",value:function(f){var g=new RegExp(" ","g");if(void 0===f)for(var d=0;d<this.columns.length;d++)for(var m=0;m<this.rows.length;m++){var p=(p=this.rows[m].arr[d]).replace(g,"");this.rows[m].arr[d]=p,this.rows[m].obj[this.columns[d]]=p}else if("string"==typeof f)for(var h=0;h<this.rows.length;h++){var y=(y=this.rows[h].obj[f]).replace(g,""),b=(this.rows[h].obj[f]=y,this.columns.indexOf(f));this.rows[h].arr[b]=y}else for(var x=0;x<this.rows.length;x++){var D=(D=this.rows[x].arr[f]).replace(g,"");this.rows[x].arr[f]=D,this.rows[x].obj[this.columns[f]]=D}}},{key:"removeColumn",value:function(m){var g,d;"string"==typeof m?d=this.columns.indexOf(g=m):g=this.columns[d=m],m=this.columns.splice(d+1,this.columns.length),this.columns.pop(),this.columns=this.columns.concat(m);for(var p=0;p<this.rows.length;p++){var h=this.rows[p].arr,y=h.splice(d+1,h.length);h.pop(),this.rows[p].arr=h.concat(y),delete this.rows[p].obj[g]}}},{key:"set",value:function(f,g,d){this.rows[f].set(g,d)}},{key:"setNum",value:function(f,g,d){this.rows[f].setNum(g,d)}},{key:"setString",value:function(f,g,d){this.rows[f].setString(g,d)}},{key:"get",value:function(f,g){return this.rows[f].get(g)}},{key:"getNum",value:function(f,g){return this.rows[f].getNum(g)}},{key:"getString",value:function(f,g){return this.rows[f].getString(g)}},{key:"getObject",value:function(f){for(var g,d={},m=0;m<this.rows.length;m++)if(g=this.rows[m].obj,"string"==typeof f){if(!(0<=this.columns.indexOf(f)))throw new Error('This table has no column named "'.concat(f,'"'));d[g[f]]=g}else d[m]=this.rows[m].obj;return d}},{key:"getArray",value:function(){for(var f=[],g=0;g<this.rows.length;g++)f.push(this.rows[g].arr);return f}}])&&E(S.prototype,T),v}(),H.default=l=M.default},{"../core/main":283,"core-js/modules/es.array.concat":153,"core-js/modules/es.array.index-of":164,"core-js/modules/es.array.join":166,"core-js/modules/es.array.splice":171,"core-js/modules/es.regexp.constructor":194,"core-js/modules/es.regexp.exec":195,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.string.match":201,"core-js/modules/es.string.replace":204}],311:[function(l,de,H){"use strict";function M(E,v){for(var S=0;S<v.length;S++){var T=v[S];T.enumerable=T.enumerable||!1,T.configurable=!0,"value"in T&&(T.writable=!0),Object.defineProperty(E,T.key,T)}}l("core-js/modules/es.array.index-of"),l("core-js/modules/es.array.iterator"),l("core-js/modules/es.object.from-entries"),l("core-js/modules/es.object.to-string"),l("core-js/modules/es.regexp.exec"),l("core-js/modules/es.regexp.to-string"),l("core-js/modules/es.string.split"),l("core-js/modules/web.dom-collections.iterator"),l("core-js/modules/es.array.index-of"),l("core-js/modules/es.array.iterator"),l("core-js/modules/es.object.from-entries"),l("core-js/modules/es.object.to-string"),l("core-js/modules/es.regexp.exec"),l("core-js/modules/es.regexp.to-string"),l("core-js/modules/es.string.split"),l("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(H,"__esModule",{value:!0}),H.default=void 0,(l=(l=l("../core/main"))&&l.__esModule?l:{default:l}).default.TableRow=function(){function E(C,f){if(!(this instanceof E))throw new TypeError("Cannot call a class as a function");var g=[];C&&(g=C.split(f=f||",")),this.arr=g,this.obj=Object.fromEntries(g.entries()),this.table=null}var v,S;return v=E,(S=[{key:"set",value:function(C,f){if("string"==typeof C){var g=this.table.columns.indexOf(C);if(!(0<=g))throw new Error('This table has no column named "'.concat(C,'"'));this.obj[C]=f,this.arr[g]=f}else{if(!(C<this.table.columns.length))throw new Error("Column #".concat(C," is out of the range of this table"));this.arr[C]=f,this.obj[g=this.table.columns[C]]=f}}},{key:"setNum",value:function(C,f){f=parseFloat(f),this.set(C,f)}},{key:"setString",value:function(C,f){f=f.toString(),this.set(C,f)}},{key:"get",value:function(C){return("string"==typeof C?this.obj:this.arr)[C]}},{key:"getNum",value:function(C){var f=parseFloat("string"==typeof C?this.obj[C]:this.arr[C]);if("NaN"===f.toString())throw"Error: ".concat(this.obj[C]," is NaN (Not a Number)");return f}},{key:"getString",value:function(C){return("string"==typeof C?this.obj:this.arr)[C].toString()}}])&&M(v.prototype,S),E}(),H.default=l=l.default},{"../core/main":283,"core-js/modules/es.array.index-of":164,"core-js/modules/es.array.iterator":165,"core-js/modules/es.object.from-entries":185,"core-js/modules/es.object.to-string":190,"core-js/modules/es.regexp.exec":195,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.string.split":206,"core-js/modules/web.dom-collections.iterator":246}],312:[function(l,de,H){"use strict";l("core-js/modules/es.symbol"),l("core-js/modules/es.symbol.description"),l("core-js/modules/es.symbol.iterator"),l("core-js/modules/es.array.iterator"),l("core-js/modules/es.number.constructor"),l("core-js/modules/es.object.to-string"),l("core-js/modules/es.regexp.exec"),l("core-js/modules/es.string.iterator"),l("core-js/modules/es.string.replace"),l("core-js/modules/web.dom-collections.iterator"),l("core-js/modules/es.symbol"),l("core-js/modules/es.symbol.description"),l("core-js/modules/es.symbol.iterator"),l("core-js/modules/es.array.iterator"),l("core-js/modules/es.number.constructor"),l("core-js/modules/es.object.to-string"),l("core-js/modules/es.regexp.exec"),l("core-js/modules/es.string.iterator"),l("core-js/modules/es.string.replace"),l("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(H,"__esModule",{value:!0}),H.default=void 0;var M=(l=l("../core/main"))&&l.__esModule?l:{default:l};function E(S,T){for(var C=0;C<T.length;C++){var f=T[C];f.enumerable=f.enumerable||!1,f.configurable=!0,"value"in f&&(f.writable=!0),Object.defineProperty(S,f.key,f)}}M.default.XML=function(){function S(g){if(!(this instanceof S))throw new TypeError("Cannot call a class as a function");g?this.DOM=g:(g=document.implementation.createDocument(null,"doc"),this.DOM=g.createElement("root"))}var T,C;return T=S,(C=[{key:"getParent",value:function(){return new M.default.XML(this.DOM.parentElement)}},{key:"getName",value:function(){return this.DOM.tagName}},{key:"setName",value:function(g){var d=this.DOM.innerHTML,m=this.DOM.attributes,p=document.implementation.createDocument(null,"default").createElement(g);p.innerHTML=d;for(var h=0;h<m.length;h++)p.setAttribute(m[h].nodeName,m[h].nodeValue);this.DOM=p}},{key:"hasChildren",value:function(){return 0<this.DOM.children.length}},{key:"listChildren",value:function(){for(var g=[],d=0;d<this.DOM.childNodes.length;d++)g.push(this.DOM.childNodes[d].nodeName);return g}},{key:"getChildren",value:function(g){return function v(S){for(var T=[],C=0;C<S.length;C++)T.push(new M.default.XML(S[C]));return T}(g?this.DOM.getElementsByTagName(g):this.DOM.children)}},{key:"getChild",value:function(g){if("string"!=typeof g)return new M.default.XML(this.DOM.children[g]);var d=!0,m=!1,p=void 0;try{for(var h,y=this.DOM.children[Symbol.iterator]();!(d=(h=y.next()).done);d=!0){var b=h.value;if(b.tagName===g)return new M.default.XML(b)}}catch(x){m=!0,p=x}finally{try{d||null==y.return||y.return()}finally{if(m)throw p}}}},{key:"addChild",value:function(g){g instanceof M.default.XML&&this.DOM.appendChild(g.DOM)}},{key:"removeChild",value:function(g){var d=-1;if("string"==typeof g){for(var m=0;m<this.DOM.children.length;m++)if(this.DOM.children[m].tagName===g){d=m;break}}else d=g;-1!==d&&this.DOM.removeChild(this.DOM.children[d])}},{key:"getAttributeCount",value:function(){return this.DOM.attributes.length}},{key:"listAttributes",value:function(){var g=[],d=!0,m=!1,p=void 0;try{for(var h,y=this.DOM.attributes[Symbol.iterator]();!(d=(h=y.next()).done);d=!0)g.push(h.value.nodeName)}catch(x){m=!0,p=x}finally{try{d||null==y.return||y.return()}finally{if(m)throw p}}return g}},{key:"hasAttribute",value:function(g){var d={},m=!0,p=!1,h=void 0;try{for(var y,b=this.DOM.attributes[Symbol.iterator]();!(m=(y=b.next()).done);m=!0){var x=y.value;d[x.nodeName]=x.nodeValue}}catch(D){p=!0,h=D}finally{try{m||null==b.return||b.return()}finally{if(p)throw h}}return!!d[g]}},{key:"getNum",value:function(g,d){var m={},p=!0,h=!1,y=void 0;try{for(var b,x=this.DOM.attributes[Symbol.iterator]();!(p=(b=x.next()).done);p=!0){var D=b.value;m[D.nodeName]=D.nodeValue}}catch(N){h=!0,y=N}finally{try{p||null==x.return||x.return()}finally{if(h)throw y}}return Number(m[g])||d||0}},{key:"getString",value:function(g,d){var m={},p=!0,h=!1,y=void 0;try{for(var b,x=this.DOM.attributes[Symbol.iterator]();!(p=(b=x.next()).done);p=!0){var D=b.value;m[D.nodeName]=D.nodeValue}}catch(N){h=!0,y=N}finally{try{p||null==x.return||x.return()}finally{if(h)throw y}}return m[g]?String(m[g]):d||null}},{key:"setAttribute",value:function(g,d){this.DOM.setAttribute(g,d)}},{key:"getContent",value:function(g){var d=this.DOM.textContent;return(d=d.replace(/\s\s+/g,","))||g||null}},{key:"setContent",value:function(g){this.DOM.children.length||(this.DOM.textContent=g)}},{key:"serialize",value:function(){return(new XMLSerializer).serializeToString(this.DOM)}}])&&E(T.prototype,C),S}(),H.default=l=M.default},{"../core/main":283,"core-js/modules/es.array.iterator":165,"core-js/modules/es.number.constructor":179,"core-js/modules/es.object.to-string":190,"core-js/modules/es.regexp.exec":195,"core-js/modules/es.string.iterator":200,"core-js/modules/es.string.replace":204,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/web.dom-collections.iterator":246}],313:[function(l,de,H){"use strict";l("core-js/modules/es.symbol"),l("core-js/modules/es.symbol.description"),l("core-js/modules/es.symbol.iterator"),l("core-js/modules/es.array.from"),l("core-js/modules/es.array.includes"),l("core-js/modules/es.array.index-of"),l("core-js/modules/es.array.iterator"),l("core-js/modules/es.array.map"),l("core-js/modules/es.array.slice"),l("core-js/modules/es.math.hypot"),l("core-js/modules/es.number.constructor"),l("core-js/modules/es.object.to-string"),l("core-js/modules/es.regexp.to-string"),l("core-js/modules/es.string.includes"),l("core-js/modules/es.string.iterator"),l("core-js/modules/web.dom-collections.iterator"),l("core-js/modules/es.array.includes"),l("core-js/modules/es.array.index-of"),l("core-js/modules/es.array.map"),l("core-js/modules/es.array.slice"),l("core-js/modules/es.math.hypot"),l("core-js/modules/es.number.constructor"),l("core-js/modules/es.string.includes"),Object.defineProperty(H,"__esModule",{value:!0}),H.default=void 0;var M=(l=l("../core/main"))&&l.__esModule?l:{default:l};function E(v){return function(S){if(Array.isArray(S)){for(var T=0,C=new Array(S.length);T<S.length;T++)C[T]=S[T];return C}}(v)||function(S){if(Symbol.iterator in Object(S)||"[object Arguments]"===Object.prototype.toString.call(S))return Array.from(S)}(v)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}M.default.prototype.abs=Math.abs,M.default.prototype.ceil=Math.ceil,M.default.prototype.constrain=function(v,S,T){return M.default._validateParameters("constrain",arguments),Math.max(Math.min(v,T),S)},M.default.prototype.dist=function(){for(var v=arguments.length,S=new Array(v),T=0;T<v;T++)S[T]=arguments[T];return M.default._validateParameters("dist",S),4===S.length?Math.hypot(S[2]-S[0],S[3]-S[1]):6===S.length?Math.hypot(S[3]-S[0],S[4]-S[1],S[5]-S[2]):void 0},M.default.prototype.exp=Math.exp,M.default.prototype.floor=Math.floor,M.default.prototype.lerp=function(v,S,T){return M.default._validateParameters("lerp",arguments),T*(S-v)+v},M.default.prototype.log=Math.log,M.default.prototype.mag=function(v,S){return M.default._validateParameters("mag",arguments),Math.hypot(v,S)},M.default.prototype.map=function(v,S,T,C,f,g){return M.default._validateParameters("map",arguments),v=(v-S)/(T-S)*(f-C)+C,g?C<f?this.constrain(v,C,f):this.constrain(v,f,C):v},M.default.prototype.max=function(){for(var v=function(f){return Math.max.apply(Math,E(f))},S=arguments.length,T=new Array(S),C=0;C<S;C++)T[C]=arguments[C];return Array.isArray(T[0])?v(T[0]):v(T)},M.default.prototype.min=function(){for(var v=function(f){return Math.min.apply(Math,E(f))},S=arguments.length,T=new Array(S),C=0;C<S;C++)T[C]=arguments[C];return Array.isArray(T[0])?v(T[0]):v(T)},M.default.prototype.norm=function(v,S,T){return M.default._validateParameters("norm",arguments),this.map(v,S,T,0,1)},M.default.prototype.pow=Math.pow,M.default.prototype.round=function(v,S){return S?(S=Math.pow(10,S),Math.round(v*S)/S):Math.round(v)},M.default.prototype.sq=function(v){return v*v},M.default.prototype.sqrt=Math.sqrt,M.default.prototype.fract=function(C){M.default._validateParameters("fract",arguments);var S,T=0;return C=Number(C),isNaN(C)||Math.abs(C)===1/0?C:(C<0&&(C=-C,T=1),String(C).includes(".")&&!String(C).includes("e")?(S=+("0"+(S=String(C)).slice(S.indexOf("."))),Math.abs(T-S)):C<1?Math.abs(T-C):0)},H.default=l=M.default},{"../core/main":283,"core-js/modules/es.array.from":162,"core-js/modules/es.array.includes":163,"core-js/modules/es.array.index-of":164,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.map":168,"core-js/modules/es.array.slice":169,"core-js/modules/es.math.hypot":176,"core-js/modules/es.number.constructor":179,"core-js/modules/es.object.to-string":190,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.string.includes":199,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/web.dom-collections.iterator":246}],314:[function(l,de,H){"use strict";l("core-js/modules/es.array.concat"),l("core-js/modules/es.array.slice"),l("core-js/modules/es.object.to-string"),l("core-js/modules/es.reflect.construct"),l("core-js/modules/es.regexp.to-string"),l("core-js/modules/es.array.concat"),l("core-js/modules/es.array.slice"),Object.defineProperty(H,"__esModule",{value:!0}),H.default=void 0;var M=(l=l("../core/main"))&&l.__esModule?l:{default:l};function E(S,T,C){return(E=function(){if(typeof Reflect<"u"&&Reflect.construct&&!Reflect.construct.sham){if("function"==typeof Proxy)return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch{}}}()?Reflect.construct:function(f,g,d){var m=[null];return m.push.apply(m,g),g=new(Function.bind.apply(f,m)),d&&v(g,d.prototype),g}).apply(null,arguments)}function v(S,T){return(v=Object.setPrototypeOf||function(C,f){return C.__proto__=f,C})(S,T)}M.default.prototype.createVector=function(S,T,C){return this instanceof M.default?E(M.default.Vector,[this._fromRadians.bind(this),this._toRadians.bind(this)].concat(Array.prototype.slice.call(arguments))):new M.default.Vector(S,T,C)},H.default=l=M.default},{"../core/main":283,"core-js/modules/es.array.concat":153,"core-js/modules/es.array.slice":169,"core-js/modules/es.object.to-string":190,"core-js/modules/es.reflect.construct":192,"core-js/modules/es.regexp.to-string":196}],315:[function(C,de,H){"use strict";function M(f){return.5*(1-Math.cos(f*Math.PI))}Object.defineProperty(H,"__esModule",{value:!0}),H.default=void 0,C=(C=C("../core/main"))&&C.__esModule?C:{default:C};var E,v=4095,S=4,T=.5;C.default.prototype.noise=function(f){var g=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,d=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0;if(null==E){E=new Array(4096);for(var m=0;m<4096;m++)E[m]=Math.random()}f<0&&(f=-f),g<0&&(g=-g),d<0&&(d=-d);for(var p,h,y=Math.floor(f),b=Math.floor(g),x=Math.floor(d),D=f-y,N=g-b,U=d-x,R=0,L=.5,z=0;z<S;z++){var F=y+(b<<4)+(x<<8),q=M(D),k=M(N),Z=E[F&v];Z+=q*(E[F+1&v]-Z),p=E[F+16&v],Z+=k*((p+=q*(E[F+16+1&v]-p))-Z),p=E[(F+=256)&v],p+=q*(E[F+1&v]-p),h=E[F+16&v],p+=k*((h+=q*(E[F+16+1&v]-h))-p),R+=(Z+=M(U)*(p-Z))*L,L*=T,y<<=1,b<<=1,x<<=1,1<=(D*=2)&&(y++,D--),1<=(N*=2)&&(b++,N--),1<=(U*=2)&&(x++,U--)}return R},C.default.prototype.noiseDetail=function(f,g){0<f&&(S=f),0<g&&(T=g)},C.default.prototype.noiseSeed=function(f){m=4294967296;var d,m,p_rand=function(){return(d=(1664525*d+1013904223)%m)/m};(function(y){d=(y??Math.random()*m)>>>0})(f),E=new Array(4096);for(var h=0;h<4096;h++)E[h]=p_rand()},H.default=C=C.default},{"../core/main":283}],316:[function(l,de,H){"use strict";function M(g){return(M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(d){return typeof d}:function(d){return d&&"function"==typeof Symbol&&d.constructor===Symbol&&d!==Symbol.prototype?"symbol":typeof d})(g)}function E(g){return(E="function"==typeof Symbol&&"symbol"===M(Symbol.iterator)?function(d){return M(d)}:function(d){return d&&"function"==typeof Symbol&&d.constructor===Symbol&&d!==Symbol.prototype?"symbol":M(d)})(g)}l("core-js/modules/es.symbol"),l("core-js/modules/es.symbol.description"),l("core-js/modules/es.symbol.iterator"),l("core-js/modules/es.array.concat"),l("core-js/modules/es.array.every"),l("core-js/modules/es.array.iterator"),l("core-js/modules/es.array.some"),l("core-js/modules/es.math.sign"),l("core-js/modules/es.number.constructor"),l("core-js/modules/es.number.epsilon"),l("core-js/modules/es.number.is-finite"),l("core-js/modules/es.object.get-own-property-descriptor"),l("core-js/modules/es.object.to-string"),l("core-js/modules/es.string.iterator"),l("core-js/modules/es.string.sub"),l("core-js/modules/es.weak-map"),l("core-js/modules/web.dom-collections.iterator"),l("core-js/modules/es.array.concat"),l("core-js/modules/es.array.every"),l("core-js/modules/es.array.some"),l("core-js/modules/es.math.sign"),l("core-js/modules/es.number.constructor"),l("core-js/modules/es.number.epsilon"),l("core-js/modules/es.number.is-finite"),l("core-js/modules/es.string.sub"),Object.defineProperty(H,"__esModule",{value:!0}),H.default=void 0;var v=(f=l("../core/main"))&&f.__esModule?f:{default:f},S=function(g){if(g&&g.__esModule)return g;if(null===g||"object"!==E(g)&&"function"!=typeof g)return{default:g};var d=T();if(d&&d.has(g))return d.get(g);var m,p={},h=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(m in g){var y;Object.prototype.hasOwnProperty.call(g,m)&&((y=h?Object.getOwnPropertyDescriptor(g,m):null)&&(y.get||y.set)?Object.defineProperty(p,m,y):p[m]=g[m])}return p.default=g,d&&d.set(g,p),p}(l("../core/constants"));function T(){var g;return"function"!=typeof WeakMap?null:(T=function(){return g},g=new WeakMap)}function C(g,d){for(var m=0;m<d.length;m++){var p=d[m];p.enumerable=p.enumerable||!1,p.configurable=!0,"value"in p&&(p.writable=!0),Object.defineProperty(g,p.key,p)}}v.default.Vector=function(){function g(){if(!(this instanceof g))throw new TypeError("Cannot call a class as a function");var y,b,x="function"==typeof(arguments.length<=0?void 0:arguments[0])?(this.isPInst=!0,this._fromRadians=arguments.length<=0?void 0:arguments[0],this._toRadians=arguments.length<=1?void 0:arguments[1],y=(arguments.length<=2?void 0:arguments[2])||0,b=(arguments.length<=3?void 0:arguments[3])||0,(arguments.length<=4?void 0:arguments[4])||0):(y=(arguments.length<=0?void 0:arguments[0])||0,b=(arguments.length<=1?void 0:arguments[1])||0,(arguments.length<=2?void 0:arguments[2])||0);this.x=y,this.y=b,this.z=x}var d,m,p;return d=g,p=[{key:"fromAngle",value:function(h){var y=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1;return new v.default.Vector(y*Math.cos(h),y*Math.sin(h),0)}},{key:"fromAngles",value:function(U,D){var b=2<arguments.length&&void 0!==arguments[2]?arguments[2]:1,x=Math.cos(D),N=(D=Math.sin(D),Math.cos(U));return U=Math.sin(U),new v.default.Vector(b*U*D,-b*N,b*U*x)}},{key:"random2D",value:function(){return this.fromAngle(Math.random()*S.TWO_PI)}},{key:"random3D",value:function(){var h=Math.random()*S.TWO_PI,y=2*Math.random()-1,b=(x=Math.sqrt(1-y*y))*Math.cos(h),x=x*Math.sin(h);return new v.default.Vector(b,x,y)}},{key:"copy",value:function(h){return h.copy(h)}},{key:"add",value:function(){for(var h=arguments.length,y=new Array(h),b=0;b<h;b++)y[b]=arguments[b];var x=y[0],D=y[1],N=y[2];return N?N.set(x):(N=x.copy(),3===y.length&&v.default._friendlyError("The target parameter is undefined, it should be of type p5.Vector","p5.Vector.add")),N.add(D),N}},{key:"rem",value:function(h,y){if(h instanceof v.default.Vector&&y instanceof v.default.Vector)return(h=h.copy()).rem(y),h}},{key:"sub",value:function(){for(var h=arguments.length,y=new Array(h),b=0;b<h;b++)y[b]=arguments[b];var x=y[0],D=y[1],N=y[2];return N?N.set(x):(N=x.copy(),3===y.length&&v.default._friendlyError("The target parameter is undefined, it should be of type p5.Vector","p5.Vector.sub")),N.sub(D),N}},{key:"mult",value:function(){for(var h=arguments.length,y=new Array(h),b=0;b<h;b++)y[b]=arguments[b];var x=y[0],D=y[1],N=y[2];return N?N.set(x):(N=x.copy(),3===y.length&&v.default._friendlyError("The target parameter is undefined, it should be of type p5.Vector","p5.Vector.mult")),N.mult(D),N}},{key:"rotate",value:function(){for(var h=arguments.length,y=new Array(h),b=0;b<h;b++)y[b]=arguments[b];var x=y[0],D=y[1],N=y[2];return 2===y.length?N=x.copy():(N instanceof v.default.Vector||v.default._friendlyError("The target parameter should be of type p5.Vector","p5.Vector.rotate"),N.set(x)),N.rotate(D),N}},{key:"div",value:function(){for(var h=arguments.length,y=new Array(h),b=0;b<h;b++)y[b]=arguments[b];var x=y[0],D=y[1],N=y[2];return N?N.set(x):(N=x.copy(),3===y.length&&v.default._friendlyError("The target parameter is undefined, it should be of type p5.Vector","p5.Vector.div")),N.div(D),N}},{key:"dot",value:function(h,y){return h.dot(y)}},{key:"cross",value:function(h,y){return h.cross(y)}},{key:"dist",value:function(h,y){return h.dist(y)}},{key:"lerp",value:function(){for(var h=arguments.length,y=new Array(h),b=0;b<h;b++)y[b]=arguments[b];var x=y[0],D=y[1],N=y[2],U=y[3];return U?U.set(x):(U=x.copy(),4===y.length&&v.default._friendlyError("The target parameter is undefined, it should be of type p5.Vector","p5.Vector.lerp")),U.lerp(D,N),U}},{key:"slerp",value:function(){for(var h=arguments.length,y=new Array(h),b=0;b<h;b++)y[b]=arguments[b];var x=y[0],D=y[1],N=y[2],U=y[3];return U?U.set(x):(U=x.copy(),4===y.length&&v.default._friendlyError("The target parameter is undefined, it should be of type p5.Vector","p5.Vector.slerp")),U.slerp(D,N),U}},{key:"mag",value:function(h){return h.mag()}},{key:"magSq",value:function(h){return h.magSq()}},{key:"normalize",value:function(){for(var h=arguments.length,y=new Array(h),b=0;b<h;b++)y[b]=arguments[b];var x=y[0],D=y[1];return y.length<2?D=x.copy():(D instanceof v.default.Vector||v.default._friendlyError("The target parameter should be of type p5.Vector","p5.Vector.normalize"),D.set(x)),D.normalize()}},{key:"limit",value:function(){for(var h=arguments.length,y=new Array(h),b=0;b<h;b++)y[b]=arguments[b];var x=y[0],D=y[1],N=y[2];return y.length<3?N=x.copy():(N instanceof v.default.Vector||v.default._friendlyError("The target parameter should be of type p5.Vector","p5.Vector.limit"),N.set(x)),N.limit(D)}},{key:"setMag",value:function(){for(var h=arguments.length,y=new Array(h),b=0;b<h;b++)y[b]=arguments[b];var x=y[0],D=y[1],N=y[2];return y.length<3?N=x.copy():(N instanceof v.default.Vector||v.default._friendlyError("The target parameter should be of type p5.Vector","p5.Vector.setMag"),N.set(x)),N.setMag(D)}},{key:"heading",value:function(h){return h.heading()}},{key:"angleBetween",value:function(h,y){return h.angleBetween(y)}},{key:"reflect",value:function(){for(var h=arguments.length,y=new Array(h),b=0;b<h;b++)y[b]=arguments[b];var x=y[0],D=y[1],N=y[2];return y.length<3?N=x.copy():(N instanceof v.default.Vector||v.default._friendlyError("The target parameter should be of type p5.Vector","p5.Vector.reflect"),N.set(x)),N.reflect(D)}},{key:"array",value:function(h){return h.array()}},{key:"equals",value:function(h,y){var b;return h instanceof v.default.Vector?b=h:Array.isArray(h)?b=(new v.default.Vector).set(h):v.default._friendlyError("The v1 parameter should be of type Array or p5.Vector","p5.Vector.equals"),b.equals(y)}}],(m=[{key:"toString",value:function(){return"p5.Vector Object : [".concat(this.x,", ").concat(this.y,", ").concat(this.z,"]")}},{key:"set",value:function(h,y,b){return h instanceof v.default.Vector?(this.x=h.x||0,this.y=h.y||0,this.z=h.z||0):Array.isArray(h)?(this.x=h[0]||0,this.y=h[1]||0,this.z=h[2]||0):(this.x=h||0,this.y=y||0,this.z=b||0),this}},{key:"copy",value:function(){return this.isPInst?new v.default.Vector(this._fromRadians,this._toRadians,this.x,this.y,this.z):new v.default.Vector(this.x,this.y,this.z)}},{key:"add",value:function(h,y,b){return h instanceof v.default.Vector?(this.x+=h.x||0,this.y+=h.y||0,this.z+=h.z||0):Array.isArray(h)?(this.x+=h[0]||0,this.y+=h[1]||0,this.z+=h[2]||0):(this.x+=h||0,this.y+=y||0,this.z+=b||0),this}},{key:"calculateRemainder2D",value:function(h,y){return 0!==h&&(this.x=this.x%h),0!==y&&(this.y=this.y%y),this}},{key:"calculateRemainder3D",value:function(h,y,b){return 0!==h&&(this.x=this.x%h),0!==y&&(this.y=this.y%y),0!==b&&(this.z=this.z%b),this}},{key:"rem",value:function(){for(var h=arguments.length,y=new Array(h),b=0;b<h;b++)y[b]=arguments[b];var x,D,N,U=y[0],R=y[1],L=y[2];if(U instanceof v.default.Vector){if([U.x,U.y,U.z].every(Number.isFinite))return x=parseFloat(U.x),D=parseFloat(U.y),N=parseFloat(U.z),this.calculateRemainder3D(x,D,N)}else if(Array.isArray(U)){if(U.every(Number.isFinite))return 2===U.length?this.calculateRemainder2D(U[0],U[1]):3===U.length?this.calculateRemainder3D(U[0],U[1],U[2]):void 0}else if(1===y.length){if(Number.isFinite(U)&&0!==U)return this.x=this.x%U,this.y=this.y%U,this.z=this.z%U,this}else if(2===y.length){if(y.every(Number.isFinite))return this.calculateRemainder2D(U,R)}else if(3===y.length&&y.every(Number.isFinite))return this.calculateRemainder3D(U,R,L)}},{key:"sub",value:function(h,y,b){return h instanceof v.default.Vector?(this.x-=h.x||0,this.y-=h.y||0,this.z-=h.z||0):Array.isArray(h)?(this.x-=h[0]||0,this.y-=h[1]||0,this.z-=h[2]||0):(this.x-=h||0,this.y-=y||0,this.z-=b||0),this}},{key:"mult",value:function(){for(var h=arguments.length,y=new Array(h),b=0;b<h;b++)y[b]=arguments[b];var x,D=y[0],N=y[1],U=y[2];return D instanceof v.default.Vector?Number.isFinite(D.x)&&Number.isFinite(D.y)&&Number.isFinite(D.z)&&"number"==typeof D.x&&"number"==typeof D.y&&"number"==typeof D.z?(this.x*=D.x,this.y*=D.y,this.z*=D.z):console.warn("p5.Vector.prototype.mult:","x contains components that are either undefined or not finite numbers"):Array.isArray(D)?D.every(function(R){return Number.isFinite(R)})&&D.every(function(R){return"number"==typeof R})?1===D.length?(this.x*=D[0],this.y*=D[0],this.z*=D[0]):2===D.length?(this.x*=D[0],this.y*=D[1]):3===D.length&&(this.x*=D[0],this.y*=D[1],this.z*=D[2]):console.warn("p5.Vector.prototype.mult:","x contains elements that are either undefined or not finite numbers"):(x=y).every(function(R){return Number.isFinite(R)})&&x.every(function(R){return"number"==typeof R})?(1===y.length&&(this.x*=D,this.y*=D,this.z*=D),2===y.length&&(this.x*=D,this.y*=N),3===y.length&&(this.x*=D,this.y*=N,this.z*=U)):console.warn("p5.Vector.prototype.mult:","x, y, or z arguments are either undefined or not a finite number"),this}},{key:"div",value:function(){for(var h=arguments.length,y=new Array(h),b=0;b<h;b++)y[b]=arguments[b];var x=y[0],D=y[1],N=y[2];if(x instanceof v.default.Vector)if(Number.isFinite(x.x)&&Number.isFinite(x.y)&&Number.isFinite(x.z)&&"number"==typeof x.x&&"number"==typeof x.y&&"number"==typeof x.z){var U=0===x.z&&0===this.z;if(0===x.x||0===x.y||!U&&0===x.z)return console.warn("p5.Vector.prototype.div:","divide by 0"),this;this.x/=x.x,this.y/=x.y,U||(this.z/=x.z)}else console.warn("p5.Vector.prototype.div:","x contains components that are either undefined or not finite numbers");else if(Array.isArray(x))if(x.every(Number.isFinite)&&x.every(function(R){return"number"==typeof R})){if(x.some(function(R){return 0===R}))return console.warn("p5.Vector.prototype.div:","divide by 0"),this;1===x.length?(this.x/=x[0],this.y/=x[0],this.z/=x[0]):2===x.length?(this.x/=x[0],this.y/=x[1]):3===x.length&&(this.x/=x[0],this.y/=x[1],this.z/=x[2])}else console.warn("p5.Vector.prototype.div:","x contains components that are either undefined or not finite numbers");else if(y.every(Number.isFinite)&&y.every(function(R){return"number"==typeof R})){if(y.some(function(R){return 0===R}))return console.warn("p5.Vector.prototype.div:","divide by 0"),this;1===y.length&&(this.x/=x,this.y/=x,this.z/=x),2===y.length&&(this.x/=x,this.y/=D),3===y.length&&(this.x/=x,this.y/=D,this.z/=N)}else console.warn("p5.Vector.prototype.div:","x, y, or z arguments are either undefined or not a finite number");return this}},{key:"mag",value:function(){return Math.sqrt(this.magSq())}},{key:"magSq",value:function(){var h=this.x,y=this.y,b=this.z;return h*h+y*y+b*b}},{key:"dot",value:function(h,y,b){return h instanceof v.default.Vector?this.dot(h.x,h.y,h.z):this.x*(h||0)+this.y*(y||0)+this.z*(b||0)}},{key:"cross",value:function(x){var y=this.y*x.z-this.z*x.y,b=this.z*x.x-this.x*x.z;return x=this.x*x.y-this.y*x.x,this.isPInst?new v.default.Vector(this._fromRadians,this._toRadians,y,b,x):new v.default.Vector(y,b,x)}},{key:"dist",value:function(h){return h.copy().sub(this).mag()}},{key:"normalize",value:function(){var h=this.mag();return 0!==h&&this.mult(1/h),this}},{key:"limit",value:function(h){var y=this.magSq();return h*h<y&&this.div(Math.sqrt(y)).mult(h),this}},{key:"setMag",value:function(h){return this.normalize().mult(h)}},{key:"heading",value:function(){var h=Math.atan2(this.y,this.x);return this.isPInst?this._fromRadians(h):h}},{key:"setHeading",value:function(h){this.isPInst&&(h=this._toRadians(h));var y=this.mag();return this.x=y*Math.cos(h),this.y=y*Math.sin(h),this}},{key:"rotate",value:function(y){y=this.heading()+y;var b=(this.isPInst&&(y=this._toRadians(y)),this.mag());return this.x=Math.cos(y)*b,this.y=Math.sin(y)*b,this}},{key:"angleBetween",value:function(h){var y;return this.magSq()*h.magSq()==0?NaN:(y=this.cross(h),h=Math.atan2(y.mag(),this.dot(h))*Math.sign(y.z||1),this.isPInst?this._fromRadians(h):h)}},{key:"lerp",value:function(h,y,b,x){return h instanceof v.default.Vector?this.lerp(h.x,h.y,h.z,y):(this.x+=(h-this.x)*x||0,this.y+=(y-this.y)*x||0,this.z+=(b-this.z)*x||0,this)}},{key:"slerp",value:function(h,y){if(0!==y){if(1===y)return this.set(h);var b=this.mag(),x=h.mag();if(b*x==0)this.mult(1-y).add(h.x*y,h.y*y,h.z*y);else{var D=this.cross(h),N=D.mag(),U=Math.atan2(N,this.dot(h));if(0<N)D.x/=N,D.y/=N,D.z/=N;else{if(U<.5*Math.PI)return this.mult(1-y).add(h.x*y,h.y*y,h.z*y),this;0===this.z&&0===h.z?D.set(0,0,1):0!==this.x?D.set(this.y,-this.x,0).normalize():D.set(1,0,0)}N=D.cross(this),D=(h=1-y+y*x/b)*Math.cos(y*U),x=h*Math.sin(y*U),this.x=this.x*D+N.x*x,this.y=this.y*D+N.y*x,this.z=this.z*D+N.z*x}}return this}},{key:"reflect",value:function(h){return h=v.default.Vector.normalize(h),this.sub(h.mult(2*this.dot(h)))}},{key:"array",value:function(){return[this.x||0,this.y||0,this.z||0]}},{key:"equals",value:function(N,y,b){var x,D;return N=N instanceof v.default.Vector?(x=N.x||0,D=N.y||0,N.z||0):Array.isArray(N)?(x=N[0]||0,D=N[1]||0,N[2]||0):(x=N||0,D=y||0,b||0),this.x===x&&this.y===D&&this.z===N}},{key:"clampToZero",value:function(){return this.x=this._clampToZero(this.x),this.y=this._clampToZero(this.y),this.z=this._clampToZero(this.z),this}},{key:"_clampToZero",value:function(h){return Math.abs(+(h||0))<=Number.EPSILON?0:h}}])&&C(d.prototype,m),p&&C(d,p),g}();var f=v.default.Vector;H.default=f},{"../core/constants":272,"../core/main":283,"core-js/modules/es.array.concat":153,"core-js/modules/es.array.every":155,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.some":170,"core-js/modules/es.math.sign":178,"core-js/modules/es.number.constructor":179,"core-js/modules/es.number.epsilon":180,"core-js/modules/es.number.is-finite":181,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.to-string":190,"core-js/modules/es.string.iterator":200,"core-js/modules/es.string.sub":208,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246}],317:[function(T,de,H){"use strict";Object.defineProperty(H,"__esModule",{value:!0}),H.default=void 0;var M=(T=T("../core/main"))&&T.__esModule?T:{default:T},E="_lcg_random_state",v=4294967296,S=0;M.default.prototype._lcg=function(C){return this[C]=(1664525*this[C]+1013904223)%v,this[C]/v},M.default.prototype._lcgSetSeed=function(C,f){this[C]=(f??Math.random()*v)>>>0},M.default.prototype.randomSeed=function(C){this._lcgSetSeed(E,C),this._gaussian_previous=!1},M.default.prototype.random=function(C,f){var g,d;return M.default._validateParameters("random",arguments),g=null!=this[E]?this._lcg(E):Math.random(),void 0===C?g:void 0===f?Array.isArray(C)?C[Math.floor(g*C.length)]:g*C:(f<C&&(d=C,C=f,f=d),g*(f-C)+C)},M.default.prototype.randomGaussian=function(C){var f,g,d,m,p=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1;if(this._gaussian_previous)f=S,this._gaussian_previous=!1;else{for(;1<=(m=(g=this.random(2)-1)*g+(d=this.random(2)-1)*d););f=g*(m=Math.sqrt(-2*Math.log(m)/m)),S=d*m,this._gaussian_previous=!0}return f*p+(C||0)},H.default=T=M.default},{"../core/main":283}],318:[function(l,de,H){"use strict";function M(f){return(M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(g){return typeof g}:function(g){return g&&"function"==typeof Symbol&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":typeof g})(f)}function E(f){return(E="function"==typeof Symbol&&"symbol"===M(Symbol.iterator)?function(g){return M(g)}:function(g){return g&&"function"==typeof Symbol&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":M(g)})(f)}l("core-js/modules/es.symbol"),l("core-js/modules/es.symbol.description"),l("core-js/modules/es.symbol.iterator"),l("core-js/modules/es.array.iterator"),l("core-js/modules/es.object.get-own-property-descriptor"),l("core-js/modules/es.object.to-string"),l("core-js/modules/es.string.iterator"),l("core-js/modules/es.weak-map"),l("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(H,"__esModule",{value:!0}),H.default=void 0;var v=(C=l("../core/main"))&&C.__esModule?C:{default:C},S=function(f){if(f&&f.__esModule)return f;if(null===f||"object"!==E(f)&&"function"!=typeof f)return{default:f};var g=T();if(g&&g.has(f))return g.get(f);var d,m={},p=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(d in f){var h;Object.prototype.hasOwnProperty.call(f,d)&&((h=p?Object.getOwnPropertyDescriptor(f,d):null)&&(h.get||h.set)?Object.defineProperty(m,d,h):m[d]=f[d])}return m.default=f,g&&g.set(f,m),m}(l("../core/constants"));function T(){var f;return"function"!=typeof WeakMap?null:(T=function(){return f},f=new WeakMap)}v.default.prototype._angleMode=S.RADIANS,v.default.prototype.acos=function(f){return this._fromRadians(Math.acos(f))},v.default.prototype.asin=function(f){return this._fromRadians(Math.asin(f))},v.default.prototype.atan=function(f){return this._fromRadians(Math.atan(f))},v.default.prototype.atan2=function(f,g){return this._fromRadians(Math.atan2(f,g))},v.default.prototype.cos=function(f){return Math.cos(this._toRadians(f))},v.default.prototype.sin=function(f){return Math.sin(this._toRadians(f))},v.default.prototype.tan=function(f){return Math.tan(this._toRadians(f))},v.default.prototype.degrees=function(f){return f*S.RAD_TO_DEG},v.default.prototype.radians=function(f){return f*S.DEG_TO_RAD},v.default.prototype.angleMode=function(f){if(v.default._validateParameters("angleMode",arguments),void 0===f)return this._angleMode;f!==S.DEGREES&&f!==S.RADIANS||f!==this._angleMode&&(f===S.RADIANS?(this._setProperty("pRotationX",this.pRotationX*S.DEG_TO_RAD),this._setProperty("pRotationY",this.pRotationY*S.DEG_TO_RAD),this._setProperty("pRotationZ",this.pRotationZ*S.DEG_TO_RAD)):(this._setProperty("pRotationX",this.pRotationX*S.RAD_TO_DEG),this._setProperty("pRotationY",this.pRotationY*S.RAD_TO_DEG),this._setProperty("pRotationZ",this.pRotationZ*S.RAD_TO_DEG)),this._angleMode=f)},v.default.prototype._toRadians=function(f){return this._angleMode===S.DEGREES?f*S.DEG_TO_RAD:f},v.default.prototype._toDegrees=function(f){return this._angleMode===S.RADIANS?f*S.RAD_TO_DEG:f},v.default.prototype._fromRadians=function(f){return this._angleMode===S.DEGREES?f*S.RAD_TO_DEG:f},v.default.prototype._fromDegrees=function(f){return this._angleMode===S.RADIANS?f*S.DEG_TO_RAD:f};var C=v.default;H.default=C},{"../core/constants":272,"../core/main":283,"core-js/modules/es.array.iterator":165,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.to-string":190,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246}],319:[function(l,de,H){"use strict";l("core-js/modules/es.regexp.exec"),l("core-js/modules/es.string.replace"),l("core-js/modules/es.string.split"),l("core-js/modules/es.regexp.exec"),l("core-js/modules/es.string.replace"),l("core-js/modules/es.string.split"),Object.defineProperty(H,"__esModule",{value:!0}),H.default=void 0;var M=(l=l("../core/main"))&&l.__esModule?l:{default:l};M.default.prototype.textAlign=function(E,v){var S;return M.default._validateParameters("textAlign",arguments),(S=this._renderer).textAlign.apply(S,arguments)},M.default.prototype.textLeading=function(E){var v;return M.default._validateParameters("textLeading",arguments),(v=this._renderer).textLeading.apply(v,arguments)},M.default.prototype.textSize=function(E){var v;return M.default._validateParameters("textSize",arguments),(v=this._renderer).textSize.apply(v,arguments)},M.default.prototype.textStyle=function(E){var v;return M.default._validateParameters("textStyle",arguments),(v=this._renderer).textStyle.apply(v,arguments)},M.default.prototype.textWidth=function(){for(var E=arguments.length,v=new Array(E),S=0;S<E;S++)v[S]=arguments[S];if(v[0]+="",M.default._validateParameters("textWidth",v),0===v[0].length)return 0;for(var T=v[0].replace(/\t/g,"  ").split(/\r?\n|\r|\n/g),C=[],f=0;f<T.length;f++)C.push(this._renderer.textWidth(T[f]));return Math.max.apply(Math,C)},M.default.prototype.textAscent=function(){for(var E=arguments.length,v=new Array(E),S=0;S<E;S++)v[S]=arguments[S];return M.default._validateParameters("textAscent",v),this._renderer.textAscent()},M.default.prototype.textDescent=function(){for(var E=arguments.length,v=new Array(E),S=0;S<E;S++)v[S]=arguments[S];return M.default._validateParameters("textDescent",v),this._renderer.textDescent()},M.default.prototype._updateTextMetrics=function(){return this._renderer._updateTextMetrics()},M.default.prototype.textWrap=function(E){return M.default._validateParameters("textWrap",[E]),this._renderer.textWrap(E)},H.default=l=M.default},{"../core/main":283,"core-js/modules/es.regexp.exec":195,"core-js/modules/es.string.replace":204,"core-js/modules/es.string.split":206}],320:[function(l,de,H){"use strict";function M(d){return(M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(m){return typeof m}:function(m){return m&&"function"==typeof Symbol&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":typeof m})(d)}function E(d){return(E="function"==typeof Symbol&&"symbol"===M(Symbol.iterator)?function(m){return M(m)}:function(m){return m&&"function"==typeof Symbol&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":M(m)})(d)}l("core-js/modules/es.symbol"),l("core-js/modules/es.symbol.description"),l("core-js/modules/es.symbol.iterator"),l("core-js/modules/es.array.concat"),l("core-js/modules/es.array.includes"),l("core-js/modules/es.array.iterator"),l("core-js/modules/es.array.last-index-of"),l("core-js/modules/es.array.slice"),l("core-js/modules/es.object.get-own-property-descriptor"),l("core-js/modules/es.object.to-string"),l("core-js/modules/es.regexp.exec"),l("core-js/modules/es.string.iterator"),l("core-js/modules/es.string.split"),l("core-js/modules/es.weak-map"),l("core-js/modules/web.dom-collections.iterator"),l("core-js/modules/es.array.concat"),l("core-js/modules/es.array.includes"),l("core-js/modules/es.array.last-index-of"),l("core-js/modules/es.array.slice"),l("core-js/modules/es.regexp.exec"),l("core-js/modules/es.string.split"),Object.defineProperty(H,"__esModule",{value:!0}),H.default=void 0;var v=(g=l("../core/main"))&&g.__esModule?g:{default:g},S=f(l("../core/constants")),T=f(l("opentype.js"));function C(){var d;return"function"!=typeof WeakMap?null:(C=function(){return d},d=new WeakMap)}function f(d){if(d&&d.__esModule)return d;if(null===d||"object"!==E(d)&&"function"!=typeof d)return{default:d};var m=C();if(m&&m.has(d))return m.get(d);var p,h,y={},b=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(p in d)Object.prototype.hasOwnProperty.call(d,p)&&((h=b?Object.getOwnPropertyDescriptor(d,p):null)&&(h.get||h.set)?Object.defineProperty(y,p,h):y[p]=d[p]);return y.default=d,m&&m.set(d,y),y}l("../core/friendly_errors/validate_params"),l("../core/friendly_errors/file_errors"),l("../core/friendly_errors/fes_core"),v.default.prototype.loadFont=function(d,m,p){v.default._validateParameters("loadFont",arguments);var h=new v.default.Font(this),y=this;return T.load(d,function(D,N){if(D)return v.default._friendlyFileLoadError(4,d),void 0!==p?p(D):void console.error(D,d);h.font=N,void 0!==m&&m(h),y._decrementPreload();var U=(N=(D=d.split("\\").pop().split("/").pop()).lastIndexOf("."))<1?null:D.slice(N+1);["ttf","otf","woff","woff2"].includes(U)&&(U=D.slice(0,-1!==N?N:0),(D=document.createElement("style")).appendChild(document.createTextNode("\n@font-face {\nfont-family: ".concat(U,";\nsrc: url(").concat(d,");\n}\n"))),document.head.appendChild(D))}),h},v.default.prototype.text=function(d,m,p,h,y){var b;return v.default._validateParameters("text",arguments),this._renderer._doFill||this._renderer._doStroke?(b=this._renderer).text.apply(b,arguments):this},v.default.prototype.textFont=function(d,m){if(v.default._validateParameters("textFont",arguments),arguments.length){if(d)return this._renderer._setProperty("_textFont",d),m&&(this._renderer._setProperty("_textSize",m),this._renderer._leadingSet||this._renderer._setProperty("_textLeading",m*S._DEFAULT_LEADMULT)),this._renderer._applyTextProperties();throw new Error("null font passed to textFont")}return this._renderer._textFont};var g=v.default;H.default=g},{"../core/constants":272,"../core/friendly_errors/fes_core":274,"../core/friendly_errors/file_errors":275,"../core/friendly_errors/validate_params":278,"../core/main":283,"core-js/modules/es.array.concat":153,"core-js/modules/es.array.includes":163,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.last-index-of":167,"core-js/modules/es.array.slice":169,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.to-string":190,"core-js/modules/es.regexp.exec":195,"core-js/modules/es.string.iterator":200,"core-js/modules/es.string.split":206,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246,"opentype.js":257}],321:[function(l,de,H){"use strict";function M(R){return(M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(L){return typeof L}:function(L){return L&&"function"==typeof Symbol&&L.constructor===Symbol&&L!==Symbol.prototype?"symbol":typeof L})(R)}l("core-js/modules/es.symbol"),l("core-js/modules/es.symbol.description"),l("core-js/modules/es.symbol.iterator"),l("core-js/modules/es.array.concat"),l("core-js/modules/es.array.fill"),l("core-js/modules/es.array.iterator"),l("core-js/modules/es.array.join"),l("core-js/modules/es.array.slice"),l("core-js/modules/es.array.splice"),l("core-js/modules/es.function.name"),l("core-js/modules/es.number.to-fixed"),l("core-js/modules/es.object.get-own-property-descriptor"),l("core-js/modules/es.object.to-string"),l("core-js/modules/es.regexp.exec"),l("core-js/modules/es.string.iterator"),l("core-js/modules/es.string.replace"),l("core-js/modules/es.string.split"),l("core-js/modules/es.weak-map"),l("core-js/modules/web.dom-collections.iterator"),l("core-js/modules/es.symbol"),l("core-js/modules/es.symbol.description"),l("core-js/modules/es.symbol.iterator"),l("core-js/modules/es.array.concat"),l("core-js/modules/es.array.fill"),l("core-js/modules/es.array.iterator"),l("core-js/modules/es.array.join"),l("core-js/modules/es.array.slice"),l("core-js/modules/es.array.splice"),l("core-js/modules/es.function.name"),l("core-js/modules/es.number.to-fixed"),l("core-js/modules/es.object.to-string"),l("core-js/modules/es.regexp.exec"),l("core-js/modules/es.string.iterator"),l("core-js/modules/es.string.replace"),l("core-js/modules/es.string.split"),l("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(H,"__esModule",{value:!0}),H.default=void 0;var E=(E=l("../core/main"))&&E.__esModule?E:{default:E},v=function(R){if(R&&R.__esModule)return R;if(null===R||"object"!==T(R)&&"function"!=typeof R)return{default:R};var L=S();if(L&&L.has(R))return L.get(R);var z,F={},q=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(z in R){var k;Object.prototype.hasOwnProperty.call(R,z)&&((k=q?Object.getOwnPropertyDescriptor(R,z):null)&&(k.get||k.set)?Object.defineProperty(F,z,k):F[z]=R[z])}return F.default=R,L&&L.set(R,F),F}(l("../core/constants"));function S(){var R;return"function"!=typeof WeakMap?null:(S=function(){return R},R=new WeakMap)}function T(R){return(T="function"==typeof Symbol&&"symbol"===M(Symbol.iterator)?function(L){return M(L)}:function(L){return L&&"function"==typeof Symbol&&L.constructor===Symbol&&L!==Symbol.prototype?"symbol":M(L)})(R)}function C(R,L){for(var z=0;z<L.length;z++){var F=L[z];F.enumerable=F.enumerable||!1,F.configurable=!0,"value"in F&&(F.writable=!0),Object.defineProperty(R,F.key,F)}}function f(R,L){var z=R.length;return R[L<0?L%z+z:L%z]}function g(R,L,z,F){var q,k,Z;return F?(void 0===g.tmpPoint1&&(g.tmpPoint1=[],g.tmpPoint2=[]),Z=g.tmpPoint2,(k=g.tmpPoint1).x=L.x-R.x,k.y=L.y-R.y,Z.x=z.x-L.x,Z.y=z.y-L.y,q=k.x*Z.x+k.y*Z.y,k=Math.sqrt(k.x*k.x+k.y*k.y),Z=Math.sqrt(Z.x*Z.x+Z.y*Z.y),Math.acos(q/(k*Z))<F):(L[0]-R[0])*(z[1]-R[1])-(z[0]-R[0])*(L[1]-R[1])==0}function d(P,te,K,fe,ve,k,Z,X,W){var oe=1-W,ie=(re=Math.pow(oe,3))*P+3*(le=Math.pow(oe,2))*W*K+3*oe*W*W*ve+(pe=($=W*W)*W)*Z,re=re*te+3*le*W*fe+3*oe*W*W*k+pe*X,le=P+2*W*(K-P)+$*(ve-2*K+P),pe=te+2*W*(fe-te)+$*(k-2*fe+te),Ae=K+2*W*(ve-K)+$*(Z-2*ve+K),$=fe+2*W*(k-fe)+$*(X-2*k+fe);return P=oe*P+W*K,K=oe*te+W*fe,te=oe*ve+W*Z,fe=oe*k+W*X,ve=90-180*Math.atan2(le-Ae,pe-$)/Math.PI,(Ae<le||pe<$)&&(ve+=180),{x:ie,y:re,m:{x:le,y:pe},n:{x:Ae,y:$},start:{x:P,y:K},end:{x:te,y:fe},alpha:ve}}function m(R,L,z,F,q,k,Z,X,W){return null==W?N(R,L,z,F,q,k,Z,X):d(R,L,z,F,q,k,Z,X,function(oe,ie,re,le,pe,Ae,$,P,K){if(!(K<0||N(oe,ie,re,le,pe,Ae,$,P)<K)){var te,fe=.5,ve=1-fe;for(te=N(oe,ie,re,le,pe,Ae,$,P,ve);.01<Math.abs(te-K);)te=N(oe,ie,re,le,pe,Ae,$,P,ve+=(te<K?1:-1)*(fe/=2));return ve}}(R,L,z,F,q,k,Z,X,W))}function p(R,L,z){for(var F,q,k,Z,X,W=0,oe=0,ie=(R=function(re,le){function pe(ze,qe,et){var _t,ot;if(!ze)return["C",qe.x,qe.y,qe.x,qe.y,qe.x,qe.y];switch(ze[0]in{T:1,Q:1}||(qe.qx=qe.qy=null),ze[0]){case"M":qe.X=ze[1],qe.Y=ze[2];break;case"A":ze=["C"].concat(y.apply(0,[qe.x,qe.y].concat(ze.slice(1))));break;case"S":ot="C"===et||"S"===et?(_t=2*qe.x-qe.bx,2*qe.y-qe.by):(_t=qe.x,qe.y),ze=["C",_t,ot].concat(ze.slice(1));break;case"T":"Q"===et||"T"===et?(qe.qx=2*qe.x-qe.qx,qe.qy=2*qe.y-qe.qy):(qe.qx=qe.x,qe.qy=qe.y),ze=["C"].concat(D(qe.x,qe.y,qe.qx,qe.qy,ze[1],ze[2]));break;case"Q":qe.qx=ze[1],qe.qy=ze[2],ze=["C"].concat(D(qe.x,qe.y,ze[1],ze[2],ze[3],ze[4]));break;case"L":ze=["C"].concat(x(qe.x,qe.y,ze[1],ze[2]));break;case"H":ze=["C"].concat(x(qe.x,qe.y,ze[1],qe.y));break;case"V":ze=["C"].concat(x(qe.x,qe.y,qe.x,ze[1]));break;case"Z":ze=["C"].concat(x(qe.x,qe.y,qe.X,qe.Y))}return ze}function Ae(ze,qe){if(7<ze[qe].length){ze[qe].shift();for(var et=ze[qe];et.length;)Te[qe]="A",te&&(Ie[qe]="A"),ze.splice(qe++,0,["C"].concat(et.splice(0,6)));ze.splice(qe,1),P=Math.max(K.length,te&&te.length||0)}}function $(ze,qe,et,_t,ot){ze&&qe&&"M"===ze[ot][0]&&"M"!==qe[ot][0]&&(qe.splice(ot,0,["M",_t.x,_t.y]),et.bx=0,et.by=0,et.x=ze[ot][1],et.y=ze[ot][2],P=Math.max(K.length,te&&te.length||0))}var P,K=h(re),te=undefined,fe={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},ve={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},Te=[],Ie=[],we="",Pe="";P=Math.max(K.length,te&&te.length||0);for(var je=0;je<P;je++){"C"!==(we=K[je]?K[je][0]:we)&&(Te[je]=we,je&&(Pe=Te[je-1])),K[je]=pe(K[je],fe,Pe),"A"!==Te[je]&&"C"===we&&(Te[je]="C"),Ae(K,je),te&&("C"!==(we=te[je]?te[je][0]:we)&&(Ie[je]=we,je&&(Pe=Ie[je-1])),te[je]=pe(te[je],ve,Pe),"A"!==Ie[je]&&"C"===we&&(Ie[je]="C"),Ae(te,je)),$(K,te,fe,ve,je),$(te,K,ve,fe,je);var be=K[je],Oe=te&&te[je],Ge=be.length,Ke=te&&Oe.length;fe.x=be[Ge-2],fe.y=be[Ge-1],fe.bx=parseFloat(be[Ge-4])||fe.x,fe.by=parseFloat(be[Ge-3])||fe.y,ve.bx=te&&(parseFloat(Oe[Ke-4])||ve.x),ve.by=te&&(parseFloat(Oe[Ke-3])||ve.y),ve.x=te&&Oe[Ke-2],ve.y=te&&Oe[Ke-1]}return te?[K,te]:K}(R)).length;oe<ie;oe++){if("M"===(k=R[oe])[0])F=+k[1],q=+k[2];else{if(L<W+(Z=m(F,q,k[1],k[2],k[3],k[4],k[5],k[6]))&&!z)return{x:(X=m(F,q,k[1],k[2],k[3],k[4],k[5],k[6],L-W)).x,y:X.y,alpha:X.alpha};W+=Z,F=+k[5],q=+k[6]}k.shift()}return(X=z?W:d(F,q,k[0],k[1],k[2],k[3],k[4],k[5],1)).alpha?{x:X.x,y:X.y,alpha:X.alpha}:X}function h(R){var L=[],z=0,F=0,q=0,k=0,Z=0;if(R){"M"===R[0][0]&&(q=z=+R[0][1],k=F=+R[0][2],Z++,L[0]=["M",z,F]);for(var X,W,oe=3===R.length&&"M"===R[0][0]&&"R"===R[1][0].toUpperCase()&&"Z"===R[2][0].toUpperCase(),ie=Z,re=R.length;ie<re;ie++){if(L.push(X=[]),(W=R[ie])[0]!==W[0].toUpperCase())switch(X[0]=W[0].toUpperCase(),X[0]){case"A":X[1]=W[1],X[2]=W[2],X[3]=W[3],X[4]=W[4],X[5]=W[5],X[6]=+(W[6]+z),X[7]=+(W[7]+F);break;case"V":X[1]=+W[1]+F;break;case"H":X[1]=+W[1]+z;break;case"R":for(var le,pe=2,Ae=(le=[z,F].concat(W.slice(1))).length;pe<Ae;pe++)le[pe]=+le[pe]+z,le[++pe]=+le[pe]+F;L.pop(),L=L.concat(b(le,oe));break;case"M":q=+W[1]+z,k=+W[2]+F;break;default:for(var $=1,P=W.length;$<P;$++)X[$]=+W[$]+($%2?z:F)}else if("R"===W[0])le=[z,F].concat(W.slice(1)),L.pop(),L=L.concat(b(le,oe)),X=["R"].concat(W.slice(-2));else for(var K=0,te=W.length;K<te;K++)X[K]=W[K];switch(X[0]){case"Z":z=q,F=k;break;case"H":z=X[1];break;case"V":F=X[1];break;case"M":q=X[X.length-2],k=X[X.length-1];break;default:z=X[X.length-2],F=X[X.length-1]}}}return L}function y(R,L,z,F,te,Te,fe,X,W,oe){function ie(Ke,ze,qe){return{x:Ke*Math.cos(qe)-ze*Math.sin(qe),y:Ke*Math.sin(qe)+ze*Math.cos(qe)}}var re,K=120*(P=Math.PI)/180,le=P/180*(+te||0),pe=[],Ae=(oe?(je=oe[0],re=oe[1],we=oe[2],Pe=oe[3]):(R=(ve=ie(R,L,-le)).x,L=ve.y,1<(Ae=($=(R-(X=(ve=ie(X,W,-le)).x))/2)*$/(z*z)+(ve=(L-(W=ve.y))/2)*ve/(F*F))&&(z*=Ae=Math.sqrt(Ae),F*=Ae),Ae=z*z,Ie=F*F,we=(Te=(Te===fe?-1:1)*Math.sqrt(Math.abs((Ae*Ie-Ae*ve*ve-Ie*$*$)/(Ae*ve*ve+Ie*$*$))))*z*ve/F+(R+X)/2,Pe=Te*-F*$/z+(L+W)/2,je=Math.asin(((L-Pe)/F).toFixed(9)),re=Math.asin(((W-Pe)/F).toFixed(9)),(je=R<we?P-je:je)<0&&(je=2*P+je),(re=X<we?P-re:re)<0&&(re=2*P+re),fe&&re<je&&(je-=2*P),!fe&&je<re&&(re-=2*P)),re-je),$=(Math.abs(Ae)>K&&(Ie=re,ve=X,Te=W,re=je+K*(fe&&je<re?1:-1),pe=y(X=we+z*Math.cos(re),W=Pe+F*Math.sin(re),z,F,te,0,fe,ve,Te,[re,Ie,we,Pe])),Ae=re-je,Math.cos(je)),P=Math.sin(je),ve=(K=Math.cos(re),te=Math.sin(re),4/3*z*(fe=Math.tan(Ae/4))),Ie=[R,L],we=[R+ve*P,L-(Te=4/3*F*fe)*$],Pe=[X+ve*te,W-Te*K],je=[X,W];if(we[0]=2*Ie[0]-we[0],we[1]=2*Ie[1]-we[1],oe)return[we,Pe,je].concat(pe);for(var be=[],Oe=0,Ge=(pe=[we,Pe,je].concat(pe).join().split(",")).length;Oe<Ge;Oe++)be[Oe]=Oe%2?ie(pe[Oe-1],pe[Oe],le).y:ie(pe[Oe],pe[Oe+1],le).x;return be}function b(R,L){for(var z=[],F=0,q=R.length;F<q-2*!L;F+=2){var k=[{x:+R[F-2],y:+R[F-1]},{x:+R[F],y:+R[F+1]},{x:+R[F+2],y:+R[F+3]},{x:+R[F+4],y:+R[F+5]}];L?F?q-4===F?k[3]={x:+R[0],y:+R[1]}:q-2===F&&(k[2]={x:+R[0],y:+R[1]},k[3]={x:+R[2],y:+R[3]}):k[0]={x:+R[q-2],y:+R[q-1]}:q-4===F?k[3]=k[2]:F||(k[0]={x:+R[F],y:+R[F+1]}),z.push(["C",(6*k[1].x-k[0].x+k[2].x)/6,(6*k[1].y-k[0].y+k[2].y)/6,(k[1].x+6*k[2].x-k[3].x)/6,(k[1].y+6*k[2].y-k[3].y)/6,k[2].x,k[2].y])}return z}function x(R,L,z,F){return[R,L,z,F,z,F]}function D(R,L,z,F,q,k){return[1/3*R+2/3*z,1/3*L+2/3*F,1/3*q+2/3*z,1/3*k+2/3*F,q,k]}function N(R,L,z,F,q,k,Z,X,W){for(var oe=(W=1<(W=W??1)?1:W<0?0:W)/2,ie=[-.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,.9041,-.9816,.9816],re=0,le=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472],pe=0;pe<12;pe++){var Ae=U($=oe*ie[pe]+oe,R,z,q,Z),$=U($,L,F,k,X);re+=le[pe]*Math.sqrt(Ae*Ae+$*$)}return oe*re}function U(R,L,z,F,q){return R*(R*(-3*L+9*z-9*F+3*q)+6*L-12*z+6*F)-3*L+3*z}E.default.Font=function(){function R(q){if(!(this instanceof R))throw new TypeError("Cannot call a class as a function");this.parent=q,this.cache={},this.font=void 0}var L,z;return L=R,(z=[{key:"textBounds",value:function(q){var k=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,Z=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,X=4<arguments.length?arguments[4]:void 0,W=X&&X.renderer&&X.renderer._pInst||this.parent,oe=W._renderer.drawingContext,ie=(ie=3<arguments.length?arguments[3]:void 0)||W._renderer._textSize;if(!Te){for(var re=[],le=[],pe=[],Ae=(pe[0]=[],[]),$=this._scale(ie),P=W._renderer.textLeading(),K=0,te=(this.font.forEachGlyph(q,k,Z,ie,X,function(Pe,je,be,Oe){var Ge=Pe.getMetrics();0===Pe.index?pe[K+=1]=[]:(pe[K].push(je+Ge.xMin*$),pe[K].push(je+Ge.xMax*$),Ae.push(be+K*P+-Ge.yMin*$),Ae.push(be+K*P+-Ge.yMax*$))}),0<pe[K].length&&(re[K]=Math.min.apply(null,pe[K]),le[K]=Math.max.apply(null,pe[K])),0),fe=0;fe<=K;fe++){re[fe]=Math.min.apply(null,pe[fe]),le[fe]=Math.max.apply(null,pe[fe]);var ve=le[fe]-re[fe];te<ve&&(te=ve)}var Te={x:oe=Math.min.apply(null,re),y:Z=Math.min.apply(null,Ae),h:Math.max.apply(null,Ae)-Z,w:te,advance:oe-k};ie=this._handleAlignment(W._renderer,q,Te.x,Te.y,Te.w+Te.advance),Te.x=ie.x,Te.y=ie.y}return Te}},{key:"textToPoints",value:function(q,k,Z,X,W){var oe,ie=k,re=[],le=this.parent,pe=q.split(/\r?\n|\r|\n/g);X=X||this.parent._renderer._textSize;for(var Ae,$,P,K=0;K<pe.length;K++){var te=0;k=ie;for(var fe=(fe=pe[K]).replace(/\t/g,"  "),ve=this._getGlyphs(fe),Te=0;Te<ve.length;Te++){if($=fe,!((P=ve)[Ae=Te].name&&"space"===P[Ae].name||$.length===P.length&&" "===$[Ae]))for(var Ie=function(be){for(var Oe,Ge=[],Ke=0;Ke<be.length;Ke++)"M"===be[Ke].type&&(Oe&&Ge.push(Oe),Oe=[]),Oe.push((qe=void 0,qe=[(ze=be[Ke]).type],"M"===ze.type||"L"===ze.type?qe.push(ze.x,ze.y):"C"===ze.type?qe.push(ze.x1,ze.y1,ze.x2,ze.y2,ze.x,ze.y):"Q"===ze.type&&qe.push(ze.x1,ze.y1,ze.x,ze.y),qe));var ze,qe;return Ge.push(Oe),Ge}(ve[Te].getPath(k,Z,X).commands),we=0;we<Ie.length;we++)for(var Pe=function(be,Oe){Oe=function(_t,ot){if("object"!==T(_t))_t=ot;else for(var Kt in ot)void 0===_t[Kt]&&(_t[Kt]=ot[Kt]);return _t}(Oe,{sampleFactor:.1,simplifyThreshold:0});for(var Ge=p(be,0,1),Ke=Ge/(Ge*Oe.sampleFactor),ze=[],qe=0;qe<Ge;qe+=Ke)ze.push(p(be,qe));return Oe.simplifyThreshold&&function(et){for(var _t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,Kt=et.length-1;3<et.length&&0<=Kt;--Kt)g(f(et,Kt-1),f(et,Kt),f(et,Kt+1),_t)&&et.splice(Kt%et.length,1)}(ze,Oe.simplifyThreshold),ze}(Ie[we],W),je=0;je<Pe.length;je++)Pe[je].x+=te,oe=this._handleAlignment(le._renderer,fe,Pe[je].x,Pe[je].y),Pe[je].x=oe.x,Pe[je].y=oe.y,re.push(Pe[je]);te+=ve[Te].advanceWidth*this._scale(X)}Z+=this.parent._renderer._textLeading}return re}},{key:"_getGlyphs",value:function(q){return this.font.stringToGlyphs(q)}},{key:"_getPath",value:function(q,oe,Z,X){var W=(X&&X.renderer&&X.renderer._pInst||this.parent)._renderer;return oe=this._handleAlignment(W,q,oe,Z),this.font.getPath(q,oe.x,oe.y,W._textSize,X)}},{key:"_getPathData",value:function(q,k,Z,X){var W=3;return"string"==typeof q&&2<arguments.length?q=this._getPath(q,k,Z,X):"object"===T(k)&&(X=k),X&&"number"==typeof X.decimals&&(W=X.decimals),q.toPathData(W)}},{key:"_getSVG",value:function(q,k,Z,X){var W=3;return"string"==typeof q&&2<arguments.length?q=this._getPath(q,k,Z,X):"object"===T(k)&&(X=k),X&&("number"==typeof X.decimals&&(W=X.decimals),"number"==typeof X.strokeWidth&&(q.strokeWidth=X.strokeWidth),void 0!==X.fill&&(q.fill=X.fill),void 0!==X.stroke&&(q.stroke=X.stroke)),q.toSVG(W)}},{key:"_renderPath",value:function(ie,le,pe,X){var W=X&&X.renderer||this.parent._renderer,oe=W.drawingContext,re=(ie=("object"===T(ie)&&ie.commands?ie:this._getPath(ie,le,pe,X)).commands,W._clipping||oe.beginPath(),!0);le=!1,pe=void 0;try{for(var Ae,$=ie[Symbol.iterator]();!(re=(Ae=$.next()).done);re=!0){var P=Ae.value;"M"===P.type?oe.moveTo(P.x,P.y):"L"===P.type?oe.lineTo(P.x,P.y):"C"===P.type?oe.bezierCurveTo(P.x1,P.y1,P.x2,P.y2,P.x,P.y):"Q"===P.type?oe.quadraticCurveTo(P.x1,P.y1,P.x,P.y):"Z"===P.type&&oe.closePath()}}catch(K){le=!0,pe=K}finally{try{re||null==$.return||$.return()}finally{if(le)throw pe}}return W._doStroke&&W._strokeSet&&!W._clipping&&oe.stroke(),W._doFill&&!W._clipping&&(W._fillSet||W._setFill(v._DEFAULT_TEXT_FILL),oe.fill()),this}},{key:"_textWidth",value:function(q,k){return this.font.getAdvanceWidth(q,k)}},{key:"_textAscent",value:function(q){return this.font.ascender*this._scale(q)}},{key:"_textDescent",value:function(q){return-this.font.descender*this._scale(q)}},{key:"_scale",value:function(q){return 1/this.font.unitsPerEm*(q||this.parent._renderer._textSize)}},{key:"_handleAlignment",value:function(q,k,Z,X,W){var oe=q._textSize;switch(void 0===W&&(W=this._textWidth(k,oe)),q._textAlign){case v.CENTER:Z-=W/2;break;case v.RIGHT:Z-=W}switch(q._textBaseline){case v.TOP:X+=this._textAscent(oe);break;case v.CENTER:X+=this._textAscent(oe)/2;break;case v.BOTTOM:X-=this._textDescent(oe)}return{x:Z,y:X}}}])&&C(L.prototype,z),R}(),H.default=l=E.default},{"../core/constants":272,"../core/main":283,"core-js/modules/es.array.concat":153,"core-js/modules/es.array.fill":156,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.join":166,"core-js/modules/es.array.slice":169,"core-js/modules/es.array.splice":171,"core-js/modules/es.function.name":174,"core-js/modules/es.number.to-fixed":182,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.to-string":190,"core-js/modules/es.regexp.exec":195,"core-js/modules/es.string.iterator":200,"core-js/modules/es.string.replace":204,"core-js/modules/es.string.split":206,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246}],322:[function(l,de,H){"use strict";l("core-js/modules/es.array.concat"),l("core-js/modules/es.array.slice"),l("core-js/modules/es.array.splice"),l("core-js/modules/es.array-buffer.constructor"),l("core-js/modules/es.object.to-string"),l("core-js/modules/es.array.concat"),l("core-js/modules/es.array.slice"),l("core-js/modules/es.array.splice"),l("core-js/modules/es.array-buffer.constructor"),l("core-js/modules/es.object.to-string"),Object.defineProperty(H,"__esModule",{value:!0}),H.default=void 0,(l=(l=l("../core/main"))&&l.__esModule?l:{default:l}).default.prototype.append=function(M,E){return M.push(E),M},l.default.prototype.arrayCopy=function(M,E,v,S,T){var C,f;M=void 0!==T?(f=Math.min(T,M.length),C=S,M.slice(E,f+E)):(f=void 0!==v?(f=v,Math.min(f,M.length)):M.length,v=E,M.slice(C=0,f)),Array.prototype.splice.apply(v,[C,f].concat(M))},l.default.prototype.concat=function(M,E){return M.concat(E)},l.default.prototype.reverse=function(M){return M.reverse()},l.default.prototype.shorten=function(M){return M.pop(),M},l.default.prototype.shuffle=function(M,E){for(var v,S,T=ArrayBuffer&&ArrayBuffer.isView&&ArrayBuffer.isView(M),C=(M=E||T?M:M.slice()).length;1<C;)v=this.random(0,1)*C|0,S=M[--C],M[C]=M[v],M[v]=S;return M},l.default.prototype.sort=function(M,S){var v=S?M.slice(0,Math.min(S,M.length)):M;return S=S?M.slice(Math.min(S,M.length)):[],(v="string"==typeof v[0]?v.sort():v.sort(function(T,C){return T-C})).concat(S)},l.default.prototype.splice=function(M,E,v){return Array.prototype.splice.apply(M,[v,0].concat(E)),M},l.default.prototype.subset=function(M,E,v){return M.slice(E,void 0!==v?E+v:M.length)},H.default=l=l.default},{"../core/main":283,"core-js/modules/es.array-buffer.constructor":152,"core-js/modules/es.array.concat":153,"core-js/modules/es.array.slice":169,"core-js/modules/es.array.splice":171,"core-js/modules/es.object.to-string":190}],323:[function(l,de,H){"use strict";l("core-js/modules/es.array.map"),l("core-js/modules/es.number.constructor"),l("core-js/modules/es.object.to-string"),l("core-js/modules/es.regexp.to-string"),l("core-js/modules/es.string.repeat"),l("core-js/modules/es.array.map"),l("core-js/modules/es.number.constructor"),l("core-js/modules/es.object.to-string"),l("core-js/modules/es.regexp.to-string"),l("core-js/modules/es.string.repeat"),Object.defineProperty(H,"__esModule",{value:!0}),H.default=void 0;var M=(l=l("../core/main"))&&l.__esModule?l:{default:l};M.default.prototype.float=function(E){return E instanceof Array?E.map(parseFloat):parseFloat(E)},M.default.prototype.int=function(E){var v=1<arguments.length&&void 0!==arguments[1]?arguments[1]:10;return E===1/0||"Infinity"===E?1/0:E===-1/0||"-Infinity"===E?-1/0:"string"==typeof E?parseInt(E,v):"number"==typeof E?0|E:"boolean"==typeof E?E?1:0:E instanceof Array?E.map(function(S){return M.default.prototype.int(S,v)}):void 0},M.default.prototype.str=function(E){return E instanceof Array?E.map(M.default.prototype.str):String(E)},M.default.prototype.boolean=function(E){return"number"==typeof E?0!==E:"string"==typeof E?"true"===E.toLowerCase():"boolean"==typeof E?E:E instanceof Array?E.map(M.default.prototype.boolean):void 0},M.default.prototype.byte=function(E){return"number"==typeof(E=M.default.prototype.int(E,10))?(E+128)%256-128:E instanceof Array?E.map(M.default.prototype.byte):void 0},M.default.prototype.char=function(E){return"number"!=typeof E||isNaN(E)?E instanceof Array?E.map(M.default.prototype.char):"string"==typeof E?M.default.prototype.char(parseInt(E,10)):void 0:String.fromCharCode(E)},M.default.prototype.unchar=function(E){return"string"==typeof E&&1===E.length?E.charCodeAt(0):E instanceof Array?E.map(M.default.prototype.unchar):void 0},M.default.prototype.hex=function(E,v){if(v=v??8,E instanceof Array)return E.map(function(T){return M.default.prototype.hex(T,v)});if(E===1/0||E===-1/0)return(E===1/0?"F":"0").repeat(v);if("number"==typeof E){E<0&&(E=4294967295+E+1);for(var S=Number(E).toString(16).toUpperCase();S.length<v;)S="0".concat(S);return S.length>=v?S.substring(S.length-v,S.length):S}},M.default.prototype.unhex=function(E){return E instanceof Array?E.map(M.default.prototype.unhex):parseInt("0x".concat(E),16)},H.default=l=M.default},{"../core/main":283,"core-js/modules/es.array.map":168,"core-js/modules/es.number.constructor":179,"core-js/modules/es.object.to-string":190,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.string.repeat":203}],324:[function(l,de,H){"use strict";l("core-js/modules/es.symbol"),l("core-js/modules/es.symbol.description"),l("core-js/modules/es.symbol.iterator"),l("core-js/modules/es.array.filter"),l("core-js/modules/es.array.index-of"),l("core-js/modules/es.array.iterator"),l("core-js/modules/es.array.join"),l("core-js/modules/es.array.map"),l("core-js/modules/es.array.slice"),l("core-js/modules/es.number.to-fixed"),l("core-js/modules/es.object.to-string"),l("core-js/modules/es.regexp.constructor"),l("core-js/modules/es.regexp.exec"),l("core-js/modules/es.regexp.to-string"),l("core-js/modules/es.string.iterator"),l("core-js/modules/es.string.match"),l("core-js/modules/es.string.pad-start"),l("core-js/modules/es.string.replace"),l("core-js/modules/es.string.split"),l("core-js/modules/es.string.trim"),l("core-js/modules/web.dom-collections.iterator"),l("core-js/modules/es.array.filter"),l("core-js/modules/es.array.index-of"),l("core-js/modules/es.array.join"),l("core-js/modules/es.array.map"),l("core-js/modules/es.array.slice"),l("core-js/modules/es.number.to-fixed"),l("core-js/modules/es.object.to-string"),l("core-js/modules/es.regexp.constructor"),l("core-js/modules/es.regexp.exec"),l("core-js/modules/es.regexp.to-string"),l("core-js/modules/es.string.match"),l("core-js/modules/es.string.pad-start"),l("core-js/modules/es.string.replace"),l("core-js/modules/es.string.split"),l("core-js/modules/es.string.trim"),Object.defineProperty(H,"__esModule",{value:!0}),H.default=void 0;var M=(f=l("../core/main"))&&f.__esModule?f:{default:f};function E(g,d){return function(m){if(Array.isArray(m))return m}(g)||function(m,p){if(Symbol.iterator in Object(m)||"[object Arguments]"===Object.prototype.toString.call(m)){var h=[],y=!0,b=!1,x=void 0;try{for(var D,N=m[Symbol.iterator]();!(y=(D=N.next()).done)&&(h.push(D.value),!p||h.length!==p);y=!0);}catch(U){b=!0,x=U}finally{try{y||null==N.return||N.return()}finally{if(b)throw x}}return h}}(g,d)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function v(g,d,m){var p,h=g<0,y=(b=E((g=Math.abs(g)).toString().split("."),2))[0],b=b[1];return void 0===m?(y=y.padStart(d,"0"),p=b?y+"."+b:y,h?"-"+p:p):(y=(p=E(g.toFixed(m).toString().split("."),2))[0],b=p[1],y=y.padStart(d,"0"),g=void 0===b?y:y+"."+b,h?"-"+g:g)}function S(h,d){var m=(h=h.toString()).indexOf("."),p=-1!==m?h.substring(m):"";if(h=(h=-1!==m?h.substring(0,m):h).toString().replace(/\B(?=(\d{3})+(?!\d))/g,","),0===d)p="";else if(void 0!==d)if(d>p.length)for(var y=d-(p+=-1===m?".":"").length+1,b=0;b<y;b++)p+="0";else p=p.substring(0,d+1);return h+p}function T(g){return 0<parseFloat(g)?"+".concat(g.toString()):g.toString()}function C(g){return 0<=parseFloat(g)?" ".concat(g.toString()):g.toString()}l("../core/friendly_errors/validate_params"),l("../core/friendly_errors/file_errors"),l("../core/friendly_errors/fes_core"),M.default.prototype.join=function(g,d){return M.default._validateParameters("join",arguments),g.join(d)},M.default.prototype.match=function(g,d){return M.default._validateParameters("match",arguments),g.match(d)},M.default.prototype.matchAll=function(g,d){M.default._validateParameters("matchAll",arguments);for(var m=new RegExp(d,"g"),p=m.exec(g),h=[];null!==p;)h.push(p),p=m.exec(g);return h},M.default.prototype.nf=function(g,d,m){return M.default._validateParameters("nf",arguments),g instanceof Array?g.map(function(p){return v(p,d,m)}):"[object Arguments]"===Object.prototype.toString.call(g)?3===g.length?this.nf(g[0],g[1],g[2]):2===g.length?this.nf(g[0],g[1]):this.nf(g[0]):v(g,d,m)},M.default.prototype.nfc=function(g,d){return M.default._validateParameters("nfc",arguments),g instanceof Array?g.map(function(m){return S(m,d)}):S(g,d)},M.default.prototype.nfp=function(){for(var g=arguments.length,d=new Array(g),m=0;m<g;m++)d[m]=arguments[m];M.default._validateParameters("nfp",d);var p=M.default.prototype.nf.apply(this,d);return p instanceof Array?p.map(T):T(p)},M.default.prototype.nfs=function(){for(var g=arguments.length,d=new Array(g),m=0;m<g;m++)d[m]=arguments[m];M.default._validateParameters("nfs",d);var p=M.default.prototype.nf.apply(this,d);return p instanceof Array?p.map(C):C(p)},M.default.prototype.split=function(g,d){return M.default._validateParameters("split",arguments),g.split(d)},M.default.prototype.splitTokens=function(g,d){var m,p;return M.default._validateParameters("splitTokens",arguments),p=void 0!==d?(p=/\]/g.exec(d),(m=/\[/g.exec(d))&&p?(d=d.slice(0,p.index)+d.slice(p.index+1),m=/\[/g.exec(d),d=d.slice(0,m.index)+d.slice(m.index+1),new RegExp("[\\[".concat(d,"\\]]"),"g")):p?(d=d.slice(0,p.index)+d.slice(p.index+1),new RegExp("[".concat(d,"\\]]"),"g")):m?(d=d.slice(0,m.index)+d.slice(m.index+1),new RegExp("[".concat(d,"\\[]"),"g")):new RegExp("[".concat(d,"]"),"g")):/\s/g,g.split(p).filter(function(h){return h})},M.default.prototype.trim=function(g){return M.default._validateParameters("trim",arguments),g instanceof Array?g.map(this.trim):g.trim()};var f=M.default;H.default=f},{"../core/friendly_errors/fes_core":274,"../core/friendly_errors/file_errors":275,"../core/friendly_errors/validate_params":278,"../core/main":283,"core-js/modules/es.array.filter":157,"core-js/modules/es.array.index-of":164,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.join":166,"core-js/modules/es.array.map":168,"core-js/modules/es.array.slice":169,"core-js/modules/es.number.to-fixed":182,"core-js/modules/es.object.to-string":190,"core-js/modules/es.regexp.constructor":194,"core-js/modules/es.regexp.exec":195,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.string.iterator":200,"core-js/modules/es.string.match":201,"core-js/modules/es.string.pad-start":202,"core-js/modules/es.string.replace":204,"core-js/modules/es.string.split":206,"core-js/modules/es.string.trim":209,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/web.dom-collections.iterator":246}],325:[function(l,de,H){"use strict";Object.defineProperty(H,"__esModule",{value:!0}),H.default=void 0,(l=(l=l("../core/main"))&&l.__esModule?l:{default:l}).default.prototype.day=function(){return(new Date).getDate()},l.default.prototype.hour=function(){return(new Date).getHours()},l.default.prototype.minute=function(){return(new Date).getMinutes()},l.default.prototype.millis=function(){return-1===this._millisStart?0:window.performance.now()-this._millisStart},l.default.prototype.month=function(){return(new Date).getMonth()+1},l.default.prototype.second=function(){return(new Date).getSeconds()},l.default.prototype.year=function(){return(new Date).getFullYear()},H.default=l=l.default},{"../core/main":283}],326:[function(l,de,H){"use strict";function M(g){return(M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(d){return typeof d}:function(d){return d&&"function"==typeof Symbol&&d.constructor===Symbol&&d!==Symbol.prototype?"symbol":typeof d})(g)}function E(g){return(E="function"==typeof Symbol&&"symbol"===M(Symbol.iterator)?function(d){return M(d)}:function(d){return d&&"function"==typeof Symbol&&d.constructor===Symbol&&d!==Symbol.prototype?"symbol":M(d)})(g)}l("core-js/modules/es.symbol"),l("core-js/modules/es.symbol.description"),l("core-js/modules/es.symbol.iterator"),l("core-js/modules/es.array.concat"),l("core-js/modules/es.array.for-each"),l("core-js/modules/es.array.iterator"),l("core-js/modules/es.array.slice"),l("core-js/modules/es.math.hypot"),l("core-js/modules/es.math.sign"),l("core-js/modules/es.number.to-fixed"),l("core-js/modules/es.object.get-own-property-descriptor"),l("core-js/modules/es.object.to-string"),l("core-js/modules/es.string.iterator"),l("core-js/modules/es.weak-map"),l("core-js/modules/web.dom-collections.iterator"),l("core-js/modules/es.symbol"),l("core-js/modules/es.symbol.description"),l("core-js/modules/es.symbol.iterator"),l("core-js/modules/es.array.concat"),l("core-js/modules/es.array.for-each"),l("core-js/modules/es.array.iterator"),l("core-js/modules/es.array.slice"),l("core-js/modules/es.math.hypot"),l("core-js/modules/es.math.sign"),l("core-js/modules/es.number.to-fixed"),l("core-js/modules/es.object.to-string"),l("core-js/modules/es.string.iterator"),l("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(H,"__esModule",{value:!0}),H.default=void 0;var v=(f=l("../core/main"))&&f.__esModule?f:{default:f},S=(l("./p5.Geometry"),function(g){if(g&&g.__esModule)return g;if(null===g||"object"!==E(g)&&"function"!=typeof g)return{default:g};var d=T();if(d&&d.has(g))return d.get(g);var m,p={},h=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(m in g){var y;Object.prototype.hasOwnProperty.call(g,m)&&((y=h?Object.getOwnPropertyDescriptor(g,m):null)&&(y.get||y.set)?Object.defineProperty(p,m,y):p[m]=g[m])}return p.default=g,d&&d.set(g,p),p}(l("../core/constants")));function T(){var g;return"function"!=typeof WeakMap?null:(T=function(){return g},g=new WeakMap)}function C(g,d,m,p,h,y,b){g=g<=0?1:g,d=d<0?0:d,m=m<=0?g:m,p=p<3?3:p;for(var x,D,N=(y=void 0===y||y)?-2:0,U=(h=h<1?1:h)+((b=void 0===b?0!==d:b)?2:0),R=Math.atan2(g-d,m),L=Math.sin(R),z=Math.cos(R),F=N;F<=U;++F){var q=F/h,k=m*q,Z=void 0;for(Z=F<0?(q=k=0,g):h<F?(k=m,q=1,d):g+(d-g)*q,-2!==F&&F!==h+2||(Z=0),k-=m/2,x=0;x<p;++x){var X=x/(p-1),oe=2*Math.PI*X,W=Math.sin(oe),ie=(oe=Math.cos(oe),this.vertices.push(new v.default.Vector(W*Z,k,oe*Z)));ie=F<0?new v.default.Vector(0,-1,0):h<F&&d?new v.default.Vector(0,1,0):new v.default.Vector(W*z,L,oe*z),this.vertexNormals.push(ie),this.uvs.push(X,q)}}var re=0;if(y){for(D=0;D<p;++D)this.faces.push([re+D,re+p+(D+1)%p,re+p+D]);re+=2*p}for(F=0;F<h;++F){for(x=0;x<p;++x){var le=(x+1)%p;this.faces.push([re+x,re+le,re+p+le]),this.faces.push([re+x,re+p+le,re+p+x])}re+=p}if(b)for(re+=p,x=0;x<p;++x)this.faces.push([re+x,re+(x+1)%p,re+p])}v.default.prototype.beginGeometry=function(){return this._renderer.beginGeometry()},v.default.prototype.endGeometry=function(){return this._renderer.endGeometry()},v.default.prototype.buildGeometry=function(g){return this._renderer.buildGeometry(g)},v.default.prototype.freeGeometry=function(g){this._renderer._freeBuffers(g.gid)},v.default.prototype.plane=function(){var g,d=0<arguments.length&&void 0!==arguments[0]?arguments[0]:50,m=1<arguments.length&&void 0!==arguments[1]?arguments[1]:d,p=2<arguments.length&&void 0!==arguments[2]?arguments[2]:1,h=3<arguments.length&&void 0!==arguments[3]?arguments[3]:1,y=(this._assert3d("plane"),v.default._validateParameters("plane",arguments),"plane|".concat(p,"|").concat(h));return this._renderer.geometryInHash(y)||((g=new v.default.Geometry(p,h,function(){for(var b,x,D=0;D<=this.detailY;D++)for(var N=D/this.detailY,U=0;U<=this.detailX;U++)x=new v.default.Vector((b=U/this.detailX)-.5,N-.5,0),this.vertices.push(x),this.uvs.push(b,N)})).computeFaces().computeNormals(),p<=1&&h<=1?g._makeTriangleEdges()._edgesToVertices():this._renderer._doStroke&&console.log("Cannot draw stroke on plane objects with more than 1 detailX or 1 detailY"),this._renderer.createBuffers(y,g)),this._renderer.drawBuffersScaled(y,d,m,1),this},v.default.prototype.box=function(g,d,m,p,h){this._assert3d("box"),v.default._validateParameters("box",arguments),void 0===g&&(g=50),void 0===d&&(d=g),void 0===m&&(m=d);var y,b=this._renderer.attributes&&this._renderer.attributes.perPixelLighting;return void 0===h&&(h=b?1:4),b="box|".concat(p=void 0===p?b?1:4:p,"|").concat(h),this._renderer.geometryInHash(b)||((y=new v.default.Geometry(p,h,function(){var x=this;this.edges=[[0,1],[1,3],[3,2],[6,7],[8,9],[9,11],[14,15],[16,17],[17,19],[18,19],[20,21],[22,23]],[[0,4,2,6],[1,3,5,7],[0,1,4,5],[2,6,3,7],[0,2,1,3],[4,5,6,7]].forEach(function(D,N){N*=4;for(var U=0;U<4;U++){var R=new v.default.Vector((2*(1&(R=D[U]))-1)/2,((2&R)-1)/2,((4&R)/2-1)/2);x.vertices.push(R),x.uvs.push(1&U,(2&U)/2)}x.faces.push([N,1+N,2+N]),x.faces.push([2+N,1+N,3+N])})})).computeNormals(),p<=4&&h<=4?y._edgesToVertices():this._renderer._doStroke&&console.log("Cannot draw stroke on box objects with more than 4 detailX or 4 detailY"),this._renderer.createBuffers(b,y)),this._renderer.drawBuffersScaled(b,g,d,m),this},v.default.prototype.sphere=function(){var g=0<arguments.length&&void 0!==arguments[0]?arguments[0]:50,d=1<arguments.length&&void 0!==arguments[1]?arguments[1]:24,m=2<arguments.length&&void 0!==arguments[2]?arguments[2]:16;return this._assert3d("sphere"),v.default._validateParameters("sphere",arguments),this.ellipsoid(g,g,g,d,m),this},v.default.prototype.cylinder=function(){var g,d=0<arguments.length&&void 0!==arguments[0]?arguments[0]:50,m=1<arguments.length&&void 0!==arguments[1]?arguments[1]:d,p=2<arguments.length&&void 0!==arguments[2]?arguments[2]:24,h=3<arguments.length&&void 0!==arguments[3]?arguments[3]:1,y=!(4<arguments.length&&void 0!==arguments[4])||arguments[4],b=!(5<arguments.length&&void 0!==arguments[5])||arguments[5],x=(this._assert3d("cylinder"),v.default._validateParameters("cylinder",arguments),"cylinder|".concat(p,"|").concat(h,"|").concat(y,"|").concat(b));return this._renderer.geometryInHash(x)||(g=new v.default.Geometry(p,h),C.call(g,1,1,1,p,h,y,b),p<=24&&h<=16?g._makeTriangleEdges()._edgesToVertices():this._renderer._doStroke&&console.log("Cannot draw stroke on cylinder objects with more than 24 detailX or 16 detailY"),this._renderer.createBuffers(x,g)),this._renderer.drawBuffersScaled(x,d,m,d),this},v.default.prototype.cone=function(){var g,d=0<arguments.length&&void 0!==arguments[0]?arguments[0]:50,m=1<arguments.length&&void 0!==arguments[1]?arguments[1]:d,p=2<arguments.length&&void 0!==arguments[2]?arguments[2]:24,h=3<arguments.length&&void 0!==arguments[3]?arguments[3]:1,y=!(4<arguments.length&&void 0!==arguments[4])||arguments[4],b=(this._assert3d("cone"),v.default._validateParameters("cone",arguments),"cone|".concat(p,"|").concat(h,"|").concat(y));return this._renderer.geometryInHash(b)||(g=new v.default.Geometry(p,h),C.call(g,1,0,1,p,h,y,!1),p<=24&&h<=16?g._makeTriangleEdges()._edgesToVertices():this._renderer._doStroke&&console.log("Cannot draw stroke on cone objects with more than 24 detailX or 16 detailY"),this._renderer.createBuffers(b,g)),this._renderer.drawBuffersScaled(b,d,m,d),this},v.default.prototype.ellipsoid=function(){var g,d=0<arguments.length&&void 0!==arguments[0]?arguments[0]:50,m=1<arguments.length&&void 0!==arguments[1]?arguments[1]:d,p=2<arguments.length&&void 0!==arguments[2]?arguments[2]:d,h=3<arguments.length&&void 0!==arguments[3]?arguments[3]:24,y=4<arguments.length&&void 0!==arguments[4]?arguments[4]:16,b=(this._assert3d("ellipsoid"),v.default._validateParameters("ellipsoid",arguments),"ellipsoid|".concat(h,"|").concat(y));return this._renderer.geometryInHash(b)||((g=new v.default.Geometry(h,y,function(){for(var x=0;x<=this.detailY;x++)for(var D=x/this.detailY,N=Math.PI*D-Math.PI/2,U=Math.cos(N),R=Math.sin(N),L=0;L<=this.detailX;L++){var z=L/this.detailX,q=2*Math.PI*z,F=Math.cos(q);q=Math.sin(q),q=new v.default.Vector(U*q,R,U*F),this.vertices.push(q),this.vertexNormals.push(q),this.uvs.push(z,D)}})).computeFaces(),h<=24&&y<=24?g._makeTriangleEdges()._edgesToVertices():this._renderer._doStroke&&console.log("Cannot draw stroke on ellipsoids with more than 24 detailX or 24 detailY"),this._renderer.createBuffers(b,g)),this._renderer.drawBuffersScaled(b,d,m,p),this},v.default.prototype.torus=function(g,b,m,p){if(this._assert3d("torus"),v.default._validateParameters("torus",arguments),void 0===g)g=50;else if(!g)return;if(void 0===b)b=10;else if(!b)return;void 0===m&&(m=24),void 0===p&&(p=16);var h,y=(b/g).toPrecision(4);return b="torus|".concat(y,"|").concat(m,"|").concat(p),this._renderer.geometryInHash(b)||((h=new v.default.Geometry(m,p,function(){for(var x=0;x<=this.detailY;x++)for(var D=x/this.detailY,N=2*Math.PI*D,U=Math.cos(N),R=Math.sin(N),L=1+y*U,z=0;z<=this.detailX;z++){var F=z/this.detailX,q=2*Math.PI*F,Z=Math.cos(q),k=(q=Math.sin(q),new v.default.Vector(L*Z,L*q,y*R));Z=new v.default.Vector(U*Z,U*q,R),this.vertices.push(k),this.vertexNormals.push(Z),this.uvs.push(F,D)}})).computeFaces(),m<=24&&p<=16?h._makeTriangleEdges()._edgesToVertices():this._renderer._doStroke&&console.log("Cannot draw strokes on torus object with more than 24 detailX or 16 detailY"),this._renderer.createBuffers(b,h)),this._renderer.drawBuffersScaled(b,g,g,g),this},v.default.RendererGL.prototype.point=function(g,d){var m=[];return m.push(new v.default.Vector(g,d,2<arguments.length&&void 0!==arguments[2]?arguments[2]:0)),this._drawPoints(m,this.immediateMode.buffers.point),this},v.default.RendererGL.prototype.triangle=function(b){var d=b[0],m=b[1],p=b[2],h=b[3],y=b[4],x=(b=b[5],this.geometryInHash("tri")||((x=new v.default.Geometry(1,1,function(){var U=[];U.push(new v.default.Vector(0,0,0)),U.push(new v.default.Vector(1,0,0)),U.push(new v.default.Vector(0,1,0)),this.edges=[[0,1],[1,2],[2,0]],this.vertices=U,this.faces=[[0,1,2]],this.uvs=[0,0,1,0,1,1]}))._edgesToVertices(),x.computeNormals(),this.createBuffers("tri",x)),this.uModelMatrix.copy());try{var D=Math.sign(d*h-p*m+p*b-y*h+y*m-d*b),N=new v.default.Matrix([p-d,h-m,0,0,y-d,b-m,0,0,0,0,D,0,d,m,0,1]).mult(this.uModelMatrix);this.uModelMatrix=N,this.drawBuffers("tri")}finally{this.uModelMatrix=x}return this},v.default.RendererGL.prototype.ellipse=function(g){this.arc(g[0],g[1],g[2],g[3],0,S.TWO_PI,S.OPEN,g[4])},v.default.RendererGL.prototype.arc=function(){var g,d=arguments.length<=0?void 0:arguments[0],m=arguments.length<=1?void 0:arguments[1],p=arguments.length<=2?void 0:arguments[2],h=arguments.length<=3?void 0:arguments[3],y=arguments.length<=4?void 0:arguments[4],b=arguments.length<=5?void 0:arguments[5],x=arguments.length<=6?void 0:arguments[6],D=(arguments.length<=7?void 0:arguments[7])||25,N=(Math.abs(b-y)>=S.TWO_PI?"".concat(U="ellipse","|"):"".concat(U="arc","|").concat(y,"|").concat(b,"|").concat(x,"|")).concat(D,"|"),U=(this.geometryInHash(N)||((g=new v.default.Geometry(D,1,function(){if(y.toFixed(10)!==b.toFixed(10)){x!==S.PIE&&void 0!==x||(this.vertices.push(new v.default.Vector(.5,.5,0)),this.uvs.push([.5,.5]));for(var R=0;R<=D;R++){var z=R/D*(b-y)+y,L=.5+Math.cos(z)/2;z=.5+Math.sin(z)/2,this.vertices.push(new v.default.Vector(L,z,0)),this.uvs.push([L,z]),R<D-1&&(this.faces.push([0,R+1,R+2]),this.edges.push([R+1,R+2]))}switch(x){case S.PIE:this.faces.push([0,this.vertices.length-2,this.vertices.length-1]),this.edges.push([0,1]),this.edges.push([this.vertices.length-2,this.vertices.length-1]),this.edges.push([0,this.vertices.length-1]);break;case S.CHORD:this.edges.push([0,1]),this.edges.push([0,this.vertices.length-1]);break;case S.OPEN:this.edges.push([0,1]);break;default:this.faces.push([0,this.vertices.length-2,this.vertices.length-1]),this.edges.push([this.vertices.length-2,this.vertices.length-1])}}})).computeNormals(),D<=50?g._edgesToVertices(g):this._doStroke&&console.log("Cannot apply a stroke to an ".concat(U," with more than 50 detail")),this.createBuffers(N,g)),this.uModelMatrix.copy());try{this.uModelMatrix.translate([d,m,0]),this.uModelMatrix.scale(p,h,1),this.drawBuffers(N)}finally{this.uModelMatrix=U}return this},v.default.RendererGL.prototype.rect=function(g){var d=g[0],m=g[1],p=g[2],h=g[3];if(void 0===g[4]){var x=this._pInst._glAttributes.perPixelLighting,y=g[4]||(x?1:24),b=g[5]||(x?1:16),D=(x="rect|".concat(y,"|").concat(b),this.geometryInHash(x)||((D=new v.default.Geometry(y,b,function(){for(var ie=0;ie<=this.detailY;ie++)for(var re=ie/this.detailY,le=0;le<=this.detailX;le++){var pe=le/this.detailX,Ae=new v.default.Vector(pe,re,0);this.vertices.push(Ae),this.uvs.push(pe,re)}0<y&&0<b&&(this.edges=[[0,y],[y,(y+1)*(b+1)-1],[(y+1)*(b+1)-1,(y+1)*b],[(y+1)*b,0]])})).computeFaces().computeNormals()._edgesToVertices(),this.createBuffers(x,D)),this.uModelMatrix.copy());try{this.uModelMatrix.translate([d,m,0]),this.uModelMatrix.scale(p,h,1),this.drawBuffers(x)}finally{this.uModelMatrix=D}}else{x=g[4],D=void 0===g[5]?x:g[5];var N=void 0===g[6]?D:g[6],q=(g=void 0===g[7]?N:g[7],p),U=h,R=((q+=d)<d&&(z=d,d=q,q=z),(U+=m)<m&&(z=m,m=U,U=z),(z=Math.min((q-d)/2,(U-m)/2))<x&&(x=z),z<D&&(D=z),z<N&&(N=z),z<g&&(g=z),d),L=m,z=q,F=(d=U,this.beginShape(),0!==D?(this.vertex(z-D,L),this.quadraticVertex(z,L,z,L+D)):this.vertex(z,L),0!==N?(this.vertex(z,d-N),this.quadraticVertex(z,d,z-N,d)):this.vertex(z,d),0!==g?(this.vertex(R+g,d),this.quadraticVertex(R,d,R,d-g)):this.vertex(R,d),0!==x?(this.vertex(R,L+x),this.quadraticVertex(R,L,R+x,L)):this.vertex(R,L),!(this.immediateMode.geometry.uvs.length=0));m=!1,q=void 0;try{for(var k,Z=this.immediateMode.geometry.vertices[Symbol.iterator]();!(F=(k=Z.next()).done);F=!0){var X=k.value;this.immediateMode.geometry.uvs.push((X.x-R)/p,(X.y-L)/h)}}catch($){m=!0,q=$}finally{try{F||null==Z.return||Z.return()}finally{if(m)throw q}}this.endShape(S.CLOSE)}return this},v.default.RendererGL.prototype.quad=function(g,d,m,p,h,y,b,x,D,N,U,R){var L=12<arguments.length&&void 0!==arguments[12]?arguments[12]:2,z=13<arguments.length&&void 0!==arguments[13]?arguments[13]:2,F="quad|".concat(g,"|").concat(d,"|").concat(m,"|").concat(p,"|").concat(h,"|").concat(y,"|").concat(b,"|").concat(x,"|").concat(D,"|").concat(N,"|").concat(U,"|").concat(R,"|").concat(L,"|").concat(z);if(!this.geometryInHash(F)){var q=new v.default.Geometry(L,z,function(){for(var le=1/(this.detailX-1),pe=1/(this.detailY-1),Ae=0;Ae<this.detailY;Ae++)for(var $=0;$<this.detailX;$++){var P=$*le,K=Ae*pe;this.vertices.push(new v.default.Vector((1-P)*((1-K)*g+K*N)+P*((1-K)*p+K*b),(1-P)*((1-K)*d+K*U)+P*((1-K)*h+K*x),(1-P)*((1-K)*m+K*R)+P*((1-K)*y+K*D))),this.uvs.push([P,K])}});q.faces=[];for(var k=0;k<z-1;k++)for(var Z=0;Z<L-1;Z++){var X=Z+k*L,W=Z+1+(k+1)*L,oe=Z+(k+1)*L;q.faces.push([X,Z+1+k*L,W]),q.faces.push([X,W,oe])}q.computeNormals();for(var ie=[q.edges.length=0,2,3,1],re=0;re<ie.length;re++)q.edges.push([ie[re],ie[(re+1)%ie.length]]);q._edgesToVertices(),this.createBuffers(F,q)}return this.drawBuffers(F),this},v.default.RendererGL.prototype.bezier=function(g,d,m,p,h,y,b,x,D,N,U,R){8===arguments.length&&(U=x,N=b,x=y,b=h,h=p,p=m,m=y=D=R=0);var L=this._pInst._bezierDetail||20;this.beginShape();for(var z=0;z<=L;z++){var F=Math.pow(1-z/L,3),q=z/L*3*Math.pow(1-z/L,2),k=3*Math.pow(z/L,2)*(1-z/L),Z=Math.pow(z/L,3);this.vertex(g*F+p*q+b*k+N*Z,d*F+h*q+x*k+U*Z,m*F+y*q+D*k+R*Z)}return this.endShape(),this},v.default.RendererGL.prototype.curve=function(g,d,m,p,h,y,b,x,D,N,U,R){8===arguments.length&&(N=b,U=x,b=h,x=p,h=p=m,m=y=D=R=0);var L=this._pInst._curveDetail;this.beginShape();for(var z=0;z<=L;z++){var F=.5*Math.pow(z/L,3),q=.5*Math.pow(z/L,2),k=z/L*.5;this.vertex(F*(3*p-g-3*b+N)+q*(2*g-5*p+4*b-N)+k*(-g+b)+2*p*.5,F*(3*h-d-3*x+U)+q*(2*d-5*h+4*x-U)+k*(-d+x)+2*h*.5,F*(3*y-m-3*D+R)+q*(2*m-5*y+4*D-R)+k*(-m+D)+2*y*.5)}return this.endShape(),this},v.default.RendererGL.prototype.line=function(){return 6===arguments.length?(this.beginShape(S.LINES),this.vertex(arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1],arguments.length<=2?void 0:arguments[2]),this.vertex(arguments.length<=3?void 0:arguments[3],arguments.length<=4?void 0:arguments[4],arguments.length<=5?void 0:arguments[5]),this.endShape()):4===arguments.length&&(this.beginShape(S.LINES),this.vertex(arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1],0),this.vertex(arguments.length<=2?void 0:arguments[2],arguments.length<=3?void 0:arguments[3],0),this.endShape()),this},v.default.RendererGL.prototype.bezierVertex=function(){if(0===this.immediateMode._bezierVertex.length)throw Error("vertex() must be used once before calling bezierVertex()");var g,d,m,p,h,y,b=[],x=[],D=arguments.length;if(0===this._lookUpTableBezier.length||this._lutBezierDetail!==this._pInst._curveDetail){this._lookUpTableBezier=[],this._lutBezierDetail=this._pInst._curveDetail;for(var N=1/this._lutBezierDetail,U=N,R=1,L=0;U<1;){if(y=parseFloat(U.toFixed(6)),this._lookUpTableBezier[L]=this._bezierCoefficients(y),R.toFixed(6)===N.toFixed(6)){y=parseFloat(R.toFixed(6))+parseFloat(U.toFixed(6)),++L,this._lookUpTableBezier[L]=this._bezierCoefficients(y);break}U+=N,R-=N,++L}}for(var z=this._lookUpTableBezier.length,F=[],q=0;q<4;q++)F.push([]);F[0]=this.immediateMode.geometry.vertexColors.slice(-4),F[3]=this.curFillColor.slice();var k=[];for(q=0;q<4;q++)k.push([]);if(k[0]=this.immediateMode.geometry.vertexStrokeColors.slice(-4),k[3]=this.curStrokeColor.slice(),6===D){this.isBezier=!0,b=[this.immediateMode._bezierVertex[0],arguments.length<=0?void 0:arguments[0],arguments.length<=2?void 0:arguments[2],arguments.length<=4?void 0:arguments[4]],x=[this.immediateMode._bezierVertex[1],arguments.length<=1?void 0:arguments[1],arguments.length<=3?void 0:arguments[3],arguments.length<=5?void 0:arguments[5]];var Z=Math.hypot(b[0]-b[1],x[0]-x[1]),W=Math.hypot(b[1]-b[2],x[1]-x[2]),X=Math.hypot(b[2]-b[3],x[2]-x[3]);for(Z/=W=Z+W+X,X/=W,h=0;h<4;h++)F[1].push(F[0][h]*(1-Z)+F[3][h]*Z),F[2].push(F[0][h]*X+F[3][h]*(1-X)),k[1].push(k[0][h]*(1-Z)+k[3][h]*Z),k[2].push(k[0][h]*X+k[3][h]*(1-X));for(p=0;p<z;p++){for(this.curFillColor=[0,0,0,0],this.curStrokeColor=[0,0,0,0],q=g=d=0;q<4;q++){for(h=0;h<4;h++)this.curFillColor[h]+=this._lookUpTableBezier[p][q]*F[q][h],this.curStrokeColor[h]+=this._lookUpTableBezier[p][q]*k[q][h];g+=b[q]*this._lookUpTableBezier[p][q],d+=x[q]*this._lookUpTableBezier[p][q]}this.vertex(g,d)}this.curFillColor=F[3],this.curStrokeColor=k[3],this.immediateMode._bezierVertex[0]=arguments.length<=4?void 0:arguments[4],this.immediateMode._bezierVertex[1]=arguments.length<=5?void 0:arguments[5]}else if(9===D){this.isBezier=!0,b=[this.immediateMode._bezierVertex[0],arguments.length<=0?void 0:arguments[0],arguments.length<=3?void 0:arguments[3],arguments.length<=6?void 0:arguments[6]],x=[this.immediateMode._bezierVertex[1],arguments.length<=1?void 0:arguments[1],arguments.length<=4?void 0:arguments[4],arguments.length<=7?void 0:arguments[7]];var oe=[this.immediateMode._bezierVertex[2],arguments.length<=2?void 0:arguments[2],arguments.length<=5?void 0:arguments[5],arguments.length<=8?void 0:arguments[8]],ie=Math.hypot(b[0]-b[1],x[0]-x[1],oe[0]-oe[1]),re=(W=Math.hypot(b[1]-b[2],x[1]-x[2],oe[1]-oe[2]),Math.hypot(b[2]-b[3],x[2]-x[3],oe[2]-oe[3]));for(ie/=D=ie+W+re,re/=D,h=0;h<4;h++)F[1].push(F[0][h]*(1-ie)+F[3][h]*ie),F[2].push(F[0][h]*re+F[3][h]*(1-re)),k[1].push(k[0][h]*(1-ie)+k[3][h]*ie),k[2].push(k[0][h]*re+k[3][h]*(1-re));for(p=0;p<z;p++){for(this.curFillColor=[0,0,0,0],this.curStrokeColor=[0,0,0,0],q=g=d=m=0;q<4;q++){for(h=0;h<4;h++)this.curFillColor[h]+=this._lookUpTableBezier[p][q]*F[q][h],this.curStrokeColor[h]+=this._lookUpTableBezier[p][q]*k[q][h];g+=b[q]*this._lookUpTableBezier[p][q],d+=x[q]*this._lookUpTableBezier[p][q],m+=oe[q]*this._lookUpTableBezier[p][q]}this.vertex(g,d,m)}this.curFillColor=F[3],this.curStrokeColor=k[3],this.immediateMode._bezierVertex[0]=arguments.length<=6?void 0:arguments[6],this.immediateMode._bezierVertex[1]=arguments.length<=7?void 0:arguments[7],this.immediateMode._bezierVertex[2]=arguments.length<=8?void 0:arguments[8]}},v.default.RendererGL.prototype.quadraticVertex=function(){if(0===this.immediateMode._quadraticVertex.length)throw Error("vertex() must be used once before calling quadraticVertex()");var g,d,m,p,h,y,b=[],x=[],D=arguments.length;if(0===this._lookUpTableQuadratic.length||this._lutQuadraticDetail!==this._pInst._curveDetail){this._lookUpTableQuadratic=[],this._lutQuadraticDetail=this._pInst._curveDetail;for(var N=1/this._lutQuadraticDetail,U=N,R=1,L=0;U<1;){if(y=parseFloat(U.toFixed(6)),this._lookUpTableQuadratic[L]=this._quadraticCoefficients(y),R.toFixed(6)===N.toFixed(6)){y=parseFloat(R.toFixed(6))+parseFloat(U.toFixed(6)),++L,this._lookUpTableQuadratic[L]=this._quadraticCoefficients(y);break}U+=N,R-=N,++L}}for(var z=this._lookUpTableQuadratic.length,F=[],q=0;q<3;q++)F.push([]);F[0]=this.immediateMode.geometry.vertexColors.slice(-4),F[2]=this.curFillColor.slice();var k=[];for(q=0;q<3;q++)k.push([]);if(k[0]=this.immediateMode.geometry.vertexStrokeColors.slice(-4),k[2]=this.curStrokeColor.slice(),4===D){this.isQuadratic=!0,b=[this.immediateMode._quadraticVertex[0],arguments.length<=0?void 0:arguments[0],arguments.length<=2?void 0:arguments[2]],x=[this.immediateMode._quadraticVertex[1],arguments.length<=1?void 0:arguments[1],arguments.length<=3?void 0:arguments[3]];var Z=Math.hypot(b[0]-b[1],x[0]-x[1]);for(Z/=Z+Math.hypot(b[1]-b[2],x[1]-x[2]),h=0;h<4;h++)F[1].push(F[0][h]*(1-Z)+F[2][h]*Z),k[1].push(k[0][h]*(1-Z)+k[2][h]*Z);for(p=0;p<z;p++){for(this.curFillColor=[0,0,0,0],this.curStrokeColor=[0,0,0,0],q=g=d=0;q<3;q++){for(h=0;h<4;h++)this.curFillColor[h]+=this._lookUpTableQuadratic[p][q]*F[q][h],this.curStrokeColor[h]+=this._lookUpTableQuadratic[p][q]*k[q][h];g+=b[q]*this._lookUpTableQuadratic[p][q],d+=x[q]*this._lookUpTableQuadratic[p][q]}this.vertex(g,d)}this.curFillColor=F[2],this.curStrokeColor=k[2],this.immediateMode._quadraticVertex[0]=arguments.length<=2?void 0:arguments[2],this.immediateMode._quadraticVertex[1]=arguments.length<=3?void 0:arguments[3]}else if(6===D){this.isQuadratic=!0,b=[this.immediateMode._quadraticVertex[0],arguments.length<=0?void 0:arguments[0],arguments.length<=3?void 0:arguments[3]],x=[this.immediateMode._quadraticVertex[1],arguments.length<=1?void 0:arguments[1],arguments.length<=4?void 0:arguments[4]];var X=[this.immediateMode._quadraticVertex[2],arguments.length<=2?void 0:arguments[2],arguments.length<=5?void 0:arguments[5]],W=Math.hypot(b[0]-b[1],x[0]-x[1],X[0]-X[1]);for(W/=W+Math.hypot(b[1]-b[2],x[1]-x[2],X[1]-X[2]),h=0;h<4;h++)F[1].push(F[0][h]*(1-W)+F[2][h]*W),k[1].push(k[0][h]*(1-W)+k[2][h]*W);for(p=0;p<z;p++){for(this.curFillColor=[0,0,0,0],this.curStrokeColor=[0,0,0,0],q=g=d=m=0;q<3;q++){for(h=0;h<4;h++)this.curFillColor[h]+=this._lookUpTableQuadratic[p][q]*F[q][h],this.curStrokeColor[h]+=this._lookUpTableQuadratic[p][q]*k[q][h];g+=b[q]*this._lookUpTableQuadratic[p][q],d+=x[q]*this._lookUpTableQuadratic[p][q],m+=X[q]*this._lookUpTableQuadratic[p][q]}this.vertex(g,d,m)}this.curFillColor=F[2],this.curStrokeColor=k[2],this.immediateMode._quadraticVertex[0]=arguments.length<=3?void 0:arguments[3],this.immediateMode._quadraticVertex[1]=arguments.length<=4?void 0:arguments[4],this.immediateMode._quadraticVertex[2]=arguments.length<=5?void 0:arguments[5]}},v.default.RendererGL.prototype.curveVertex=function(){var g,h,y,b=[],x=[],D=arguments.length;if(0===this._lookUpTableBezier.length||this._lutBezierDetail!==this._pInst._curveDetail){this._lookUpTableBezier=[],this._lutBezierDetail=this._pInst._curveDetail;for(var N=1/this._lutBezierDetail,U=N,R=1,L=0;U<1;){if(y=parseFloat(U.toFixed(6)),this._lookUpTableBezier[L]=this._bezierCoefficients(y),R.toFixed(6)===N.toFixed(6)){y=parseFloat(R.toFixed(6))+parseFloat(U.toFixed(6)),++L,this._lookUpTableBezier[L]=this._bezierCoefficients(y);break}U+=N,R-=N,++L}}var z=this._lookUpTableBezier.length;if(2===D){if(this.immediateMode._curveVertex.push(arguments.length<=0?void 0:arguments[0]),this.immediateMode._curveVertex.push(arguments.length<=1?void 0:arguments[1]),8===this.immediateMode._curveVertex.length){for(this.isCurve=!0,b=this._bezierToCatmull([this.immediateMode._curveVertex[0],this.immediateMode._curveVertex[2],this.immediateMode._curveVertex[4],this.immediateMode._curveVertex[6]]),x=this._bezierToCatmull([this.immediateMode._curveVertex[1],this.immediateMode._curveVertex[3],this.immediateMode._curveVertex[5],this.immediateMode._curveVertex[7]]),h=0;h<z;h++)this.vertex(b[0]*this._lookUpTableBezier[h][0]+b[1]*this._lookUpTableBezier[h][1]+b[2]*this._lookUpTableBezier[h][2]+b[3]*this._lookUpTableBezier[h][3],x[0]*this._lookUpTableBezier[h][0]+x[1]*this._lookUpTableBezier[h][1]+x[2]*this._lookUpTableBezier[h][2]+x[3]*this._lookUpTableBezier[h][3]);for(h=0;h<D;h++)this.immediateMode._curveVertex.shift()}}else if(3===D&&(this.immediateMode._curveVertex.push(arguments.length<=0?void 0:arguments[0]),this.immediateMode._curveVertex.push(arguments.length<=1?void 0:arguments[1]),this.immediateMode._curveVertex.push(arguments.length<=2?void 0:arguments[2]),12===this.immediateMode._curveVertex.length)){for(this.isCurve=!0,b=this._bezierToCatmull([this.immediateMode._curveVertex[0],this.immediateMode._curveVertex[3],this.immediateMode._curveVertex[6],this.immediateMode._curveVertex[9]]),x=this._bezierToCatmull([this.immediateMode._curveVertex[1],this.immediateMode._curveVertex[4],this.immediateMode._curveVertex[7],this.immediateMode._curveVertex[10]]),g=this._bezierToCatmull([this.immediateMode._curveVertex[2],this.immediateMode._curveVertex[5],this.immediateMode._curveVertex[8],this.immediateMode._curveVertex[11]]),h=0;h<z;h++)this.vertex(b[0]*this._lookUpTableBezier[h][0]+b[1]*this._lookUpTableBezier[h][1]+b[2]*this._lookUpTableBezier[h][2]+b[3]*this._lookUpTableBezier[h][3],x[0]*this._lookUpTableBezier[h][0]+x[1]*this._lookUpTableBezier[h][1]+x[2]*this._lookUpTableBezier[h][2]+x[3]*this._lookUpTableBezier[h][3],g[0]*this._lookUpTableBezier[h][0]+g[1]*this._lookUpTableBezier[h][1]+g[2]*this._lookUpTableBezier[h][2]+g[3]*this._lookUpTableBezier[h][3]);for(h=0;h<D;h++)this.immediateMode._curveVertex.shift()}},v.default.RendererGL.prototype.image=function(g,R,m,L,h,y,b,x,D){this._isErasing&&this.blendMode(this._cachedBlendMode),this._pInst.push(),this._pInst.noLights(),this._pInst.noStroke(),this._pInst.texture(g),this._pInst.textureMode(S.NORMAL);var N=0,U=(R<=g.width&&(N=R/g.width),1);R+L<=g.width&&(U=(R+L)/g.width),R=0,m<=g.height&&(R=m/g.height),L=1,m+h<=g.height&&(L=(m+h)/g.height),this.beginShape(),this.vertex(y,b,0,N,R),this.vertex(y+x,b,0,U,R),this.vertex(y+x,b+D,0,U,L),this.vertex(y,b+D,0,N,L),this.endShape(S.CLOSE),this._pInst.pop(),this._isErasing&&this.blendMode(S.REMOVE)};var f=v.default;H.default=f},{"../core/constants":272,"../core/main":283,"./p5.Geometry":335,"core-js/modules/es.array.concat":153,"core-js/modules/es.array.for-each":161,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.slice":169,"core-js/modules/es.math.hypot":176,"core-js/modules/es.math.sign":178,"core-js/modules/es.number.to-fixed":182,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.to-string":190,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246}],327:[function(l,de,H){"use strict";function M(d){return(M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(m){return typeof m}:function(m){return m&&"function"==typeof Symbol&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":typeof m})(d)}function E(d){return(E="function"==typeof Symbol&&"symbol"===M(Symbol.iterator)?function(m){return M(m)}:function(m){return m&&"function"==typeof Symbol&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":M(m)})(d)}l("core-js/modules/es.symbol"),l("core-js/modules/es.symbol.description"),l("core-js/modules/es.symbol.iterator"),l("core-js/modules/es.array.every"),l("core-js/modules/es.array.from"),l("core-js/modules/es.array.iterator"),l("core-js/modules/es.array.map"),l("core-js/modules/es.object.assign"),l("core-js/modules/es.object.get-own-property-descriptor"),l("core-js/modules/es.object.to-string"),l("core-js/modules/es.regexp.to-string"),l("core-js/modules/es.string.iterator"),l("core-js/modules/es.weak-map"),l("core-js/modules/web.dom-collections.iterator"),l("core-js/modules/es.array.every"),l("core-js/modules/es.array.map"),l("core-js/modules/es.object.assign"),Object.defineProperty(H,"__esModule",{value:!0}),H.default=void 0;var v=(g=l("../core/main"))&&g.__esModule?g:{default:g},S=function(d){if(d&&d.__esModule)return d;if(null===d||"object"!==E(d)&&"function"!=typeof d)return{default:d};var m=T();if(m&&m.has(d))return m.get(d);var p,h={},y=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(p in d){var b;Object.prototype.hasOwnProperty.call(d,p)&&((b=y?Object.getOwnPropertyDescriptor(d,p):null)&&(b.get||b.set)?Object.defineProperty(h,p,b):h[p]=d[p])}return h.default=d,m&&m.set(d,h),h}(l("../core/constants"));function T(){var d;return"function"!=typeof WeakMap?null:(T=function(){return d},d=new WeakMap)}function C(d){return function(m){if(Array.isArray(m)){for(var p=0,h=new Array(m.length);p<m.length;p++)h[p]=m[p];return h}}(d)||function(m){if(Symbol.iterator in Object(m)||"[object Arguments]"===Object.prototype.toString.call(m))return Array.from(m)}(d)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function f(d,m){for(var p=0;p<m.length;p++){var h=m[p];h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(d,h.key,h)}}var g=function(){function d(y){if(!(this instanceof d))throw new TypeError("Cannot call a class as a function");(this.renderer=y)._pInst.push(),this.identityMatrix=new v.default.Matrix,y.uModelMatrix=new v.default.Matrix,this.geometry=new v.default.Geometry,this.geometry.gid="_p5_GeometryBuilder_".concat(d.nextGeometryId),d.nextGeometryId++,this.hasTransform=!1}var m,p;return m=d,(p=[{key:"transformVertices",value:function(y){var b=this;return this.hasTransform?y.map(function(x){return b.renderer.uModelMatrix.multiplyPoint(x)}):y}},{key:"transformNormals",value:function(y){var b=this;return this.hasTransform?y.map(function(x){return b.renderer.uNMatrix.multiplyVec3(x)}):y}},{key:"addGeometry",value:function(y){for(var b,x=this,D=(this.hasTransform=!this.renderer.uModelMatrix.mat4.every(function(U,R){return U===x.identityMatrix.mat4[R]}),this.hasTransform&&this.renderer.uNMatrix.inverseTranspose(this.renderer.uModelMatrix),this.geometry.vertices.length),N=((b=this.geometry.vertices).push.apply(b,C(this.transformVertices(y.vertices))),(b=this.geometry.vertexNormals).push.apply(b,C(this.transformNormals(y.vertexNormals))),(b=this.geometry.uvs).push.apply(b,C(y.uvs)),this.renderer._doFill&&(b=this.geometry.faces).push.apply(b,C(y.faces.map(function(U){return U.map(function(R){return R+D})}))),this.renderer._doStroke&&(b=this.geometry.edges).push.apply(b,C(y.edges.map(function(U){return U.map(function(R){return R+D})}))),C(y.vertexColors));N.length<4*y.vertices.length;)N.push.apply(N,C(this.renderer.curFillColor));(b=this.geometry.vertexColors).push.apply(b,C(N))}},{key:"addImmediate",value:function(){var y=this.renderer.immediateMode.geometry,b=this.renderer.immediateMode.shapeMode,x=[];if(this.renderer._doFill)if(b===S.TRIANGLE_STRIP||b===S.QUAD_STRIP)for(var D=2;D<y.vertices.length;D++)x.push(D%2==0?[D,D-1,D-2]:[D,D-2,D-1]);else if(b===S.TRIANGLE_FAN)for(var N=2;N<y.vertices.length;N++)x.push([0,N-1,N]);else for(var U=0;U<y.vertices.length;U+=3)x.push([U,U+1,U+2]);this.addGeometry(Object.assign({},y,{faces:x}))}},{key:"addRetained",value:function(y){this.addGeometry(y.model)}},{key:"finish",value:function(){return this.renderer._pInst.pop(),this.geometry}}])&&f(m.prototype,p),d}();g.nextGeometryId=0,H.default=g},{"../core/constants":272,"../core/main":283,"core-js/modules/es.array.every":155,"core-js/modules/es.array.from":162,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.map":168,"core-js/modules/es.object.assign":183,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.to-string":190,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246}],328:[function(l,de,H){"use strict";function M(f){return(M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(g){return typeof g}:function(g){return g&&"function"==typeof Symbol&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":typeof g})(f)}l("core-js/modules/es.symbol"),l("core-js/modules/es.symbol.description"),l("core-js/modules/es.symbol.iterator"),l("core-js/modules/es.array.for-each"),l("core-js/modules/es.array.iterator"),l("core-js/modules/es.array.splice"),l("core-js/modules/es.math.hypot"),l("core-js/modules/es.math.sign"),l("core-js/modules/es.object.get-own-property-descriptor"),l("core-js/modules/es.object.to-string"),l("core-js/modules/es.regexp.to-string"),l("core-js/modules/es.string.iterator"),l("core-js/modules/es.weak-map"),l("core-js/modules/web.dom-collections.for-each"),l("core-js/modules/web.dom-collections.iterator"),l("core-js/modules/es.symbol"),l("core-js/modules/es.symbol.description"),l("core-js/modules/es.symbol.iterator"),l("core-js/modules/es.array.for-each"),l("core-js/modules/es.array.iterator"),l("core-js/modules/es.array.splice"),l("core-js/modules/es.math.hypot"),l("core-js/modules/es.math.sign"),l("core-js/modules/es.object.to-string"),l("core-js/modules/es.regexp.to-string"),l("core-js/modules/es.string.iterator"),l("core-js/modules/web.dom-collections.for-each"),l("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(H,"__esModule",{value:!0}),H.default=void 0;var E=(C=l("../core/main"))&&C.__esModule?C:{default:C},v=function(f){if(f&&f.__esModule)return f;if(null===f||"object"!==T(f)&&"function"!=typeof f)return{default:f};var g=S();if(g&&g.has(f))return g.get(f);var d,m={},p=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(d in f){var h;Object.prototype.hasOwnProperty.call(f,d)&&((h=p?Object.getOwnPropertyDescriptor(f,d):null)&&(h.get||h.set)?Object.defineProperty(m,d,h):m[d]=f[d])}return m.default=f,g&&g.set(f,m),m}(l("../core/constants"));function S(){var f;return"function"!=typeof WeakMap?null:(S=function(){return f},f=new WeakMap)}function T(f){return(T="function"==typeof Symbol&&"symbol"===M(Symbol.iterator)?function(g){return M(g)}:function(g){return g&&"function"==typeof Symbol&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":M(g)})(f)}E.default.prototype.orbitControl=function(f,g,d,D){var p=this,h=(this._assert3d("orbitControl"),E.default._validateParameters("orbitControl",arguments),this._renderer._curCamera);void 0===f&&(f=1),void 0===g&&(g=f),void 0===d&&(d=1),"object"!==T(D)&&(D={}),!0!==this.contextMenuDisabled&&(this.canvas.oncontextmenu=function(){return!1},this._setProperty("contextMenuDisabled",!0)),!0!==this.wheelDefaultDisabled&&(this.canvas.onwheel=function(){return!1},this._setProperty("wheelDefaultDisabled",!0));var U=D.disableTouchActions;!0===this.touchActionsDisabled||void 0!==U&&!U||(this.canvas.style["touch-action"]="none",this._setProperty("touchActionsDisabled",!0)),D=void 0!==(U=D.freeRotation)&&U;var y,b,x,N=[],R=(this.touches.forEach(function(Z){p._renderer.prevTouches.forEach(function(X){Z.id===X.id&&N.push(X={x:Z.x,y:Z.y,px:X.x,py:X.y})})}),this._renderer.prevTouches=this.touches,U=0,0),L=0,z=0,F=0,q=this.height<this.width?this.height:this.width,k=!1;return 0<N.length?(k=0<N[0].x&&N[0].x<this.width&&0<N[0].y&&N[0].y<this.height,1===N.length?(R=-f*((y=N[0]).x-y.px)/q,L=g*(y.y-y.py)/q):(y=N[0],b=N[1],U=-(Math.hypot(y.x-b.x,y.y-b.y)-Math.hypot(y.px-b.px,y.py-b.py))*d*4e-4,z=.5*(y.x+b.x)-.5*(y.px+b.px),F=.5*(y.y+b.y)-.5*(y.py+b.py)),0<this.touches.length?k&&(this._renderer.executeRotateAndMove=!0,this._renderer.executeZoom=!0):(this._renderer.executeRotateAndMove=!1,this._renderer.executeZoom=!1)):(k=0<this.mouseX&&this.mouseX<this.width&&0<this.mouseY&&this.mouseY<this.height,0!==this._mouseWheelDeltaY?(U=Math.sign(this._mouseWheelDeltaY)*d,U*=.01,this._mouseWheelDeltaY=0,k&&(this._renderer.executeZoom=!0)):this._renderer.executeZoom=!1,this.mouseIsPressed?(this.mouseButton===this.LEFT?(R=-f*this.movedX/q,L=g*this.movedY/q):this.mouseButton===this.RIGHT&&(z=this.movedX,F=this.movedY*h.yScale),k&&(this._renderer.executeRotateAndMove=!0)):this._renderer.executeRotateAndMove=!1),0!==U&&this._renderer.executeZoom&&(this._renderer.zoomVelocity+=U),.001<Math.abs(this._renderer.zoomVelocity)?(D?h._orbitFree(0,0,this._renderer.zoomVelocity):h._orbit(0,0,this._renderer.zoomVelocity),0!==h.projMatrix.mat4[15]&&(h.projMatrix.mat4[0]*=Math.pow(10,-this._renderer.zoomVelocity),h.projMatrix.mat4[5]*=Math.pow(10,-this._renderer.zoomVelocity),this._renderer.uPMatrix.mat4[0]=h.projMatrix.mat4[0],this._renderer.uPMatrix.mat4[5]=h.projMatrix.mat4[5]),this._renderer.zoomVelocity*=.85):this._renderer.zoomVelocity=0,0===R&&0===L||!this._renderer.executeRotateAndMove||this._renderer.rotateVelocity.add(.6*R,.6*L),1e-6<this._renderer.rotateVelocity.magSq()?(D?h._orbitFree(-this._renderer.rotateVelocity.x,this._renderer.rotateVelocity.y,0):h._orbit(this._renderer.rotateVelocity.x,this._renderer.rotateVelocity.y,0),this._renderer.rotateVelocity.mult(.85)):this._renderer.rotateVelocity.set(0,0),0===z&&0===F||!this._renderer.executeRotateAndMove||this._renderer.moveVelocity.add(.15*(y=2*z/this.width),.15*(b=2*-F/this.height)),1e-6<this._renderer.moveVelocity.magSq()?(d=h._getLocalAxes(),f=h.eyeX-h.centerX,g=h.eyeY-h.centerY,q=h.eyeZ-h.centerZ,k=Math.sqrt(f*f+g*g+q*q),U=new E.default.Vector(h.centerX,h.centerY,h.centerZ),U=h.cameraMatrix.multiplyPoint(U),(U=this._renderer.uPMatrix.multiplyAndNormalizePoint(U)).x-=this._renderer.moveVelocity.x,U.y-=this._renderer.moveVelocity.y,L=0===(R=this._renderer.uPMatrix.mat4)[15]?(x=(R[8]+U.x)/R[0]*k,(R[9]+U.y)/R[5]*k):(x=(U.x-R[12])/R[0],(U.y-R[13])/R[5]),h.setPosition(h.eyeX+x*d.x[0]+L*d.y[0],h.eyeY+x*d.x[1]+L*d.y[1],h.eyeZ+x*d.x[2]+L*d.y[2]),this._renderer.moveVelocity.mult(.85)):this._renderer.moveVelocity.set(0,0),this},E.default.prototype.debugMode=function(){this._assert3d("debugMode");for(var f=arguments.length,g=new Array(f),d=0;d<f;d++)g[d]=arguments[d];E.default._validateParameters("debugMode",g);for(var m=this._registeredMethods.post.length-1;0<=m;m--)this._registeredMethods.post[m].toString()!==this._grid().toString()&&this._registeredMethods.post[m].toString()!==this._axesIcon().toString()||this._registeredMethods.post.splice(m,1);g[0]===v.GRID?this.registerMethod("post",this._grid(g[1],g[2],g[3],g[4],g[5])):g[0]===v.AXES?this.registerMethod("post",this._axesIcon(g[1],g[2],g[3],g[4])):(this.registerMethod("post",this._grid(g[0],g[1],g[2],g[3],g[4])),this.registerMethod("post",this._axesIcon(g[5],g[6],g[7],g[8])))},E.default.prototype.noDebugMode=function(){this._assert3d("noDebugMode");for(var f=this._registeredMethods.post.length-1;0<=f;f--)this._registeredMethods.post[f].toString()!==this._grid().toString()&&this._registeredMethods.post[f].toString()!==this._axesIcon().toString()||this._registeredMethods.post.splice(f,1)},E.default.prototype._grid=function(f,g,d,m,p){void 0===f&&(f=this.width/2),void 0===g&&(g=Math.round(f/30)<4?4:Math.round(f/30)),void 0===d&&(d=0),void 0===m&&(m=0),void 0===p&&(p=0);var h=f/g,y=f/2;return function(){this.push(),this.stroke(255*this._renderer.curStrokeColor[0],255*this._renderer.curStrokeColor[1],255*this._renderer.curStrokeColor[2]),this._renderer.uModelMatrix.reset();for(var b=0;b<=g;b++)this.beginShape(this.LINES),this.vertex(-y+d,m,b*h-y+p),this.vertex(y+d,m,b*h-y+p),this.endShape();for(var x=0;x<=g;x++)this.beginShape(this.LINES),this.vertex(x*h-y+d,m,-y+p),this.vertex(x*h-y+d,m,y+p),this.endShape();this.pop()}},E.default.prototype._axesIcon=function(f,g,d,m){return void 0===f&&(f=40<this.width/20?this.width/20:40),void 0===g&&(g=-this.width/4),void 0===d&&(d=g),void 0===m&&(m=g),function(){this.push(),this._renderer.uModelMatrix.reset(),this.strokeWeight(2),this.stroke(255,0,0),this.beginShape(this.LINES),this.vertex(g,d,m),this.vertex(g+f,d,m),this.endShape(),this.stroke(0,255,0),this.beginShape(this.LINES),this.vertex(g,d,m),this.vertex(g,d+f,m),this.endShape(),this.stroke(0,0,255),this.beginShape(this.LINES),this.vertex(g,d,m),this.vertex(g,d,m+f),this.endShape(),this.pop()}};var C=E.default;H.default=C},{"../core/constants":272,"../core/main":283,"core-js/modules/es.array.for-each":161,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.splice":171,"core-js/modules/es.math.hypot":176,"core-js/modules/es.math.sign":178,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.to-string":190,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.for-each":245,"core-js/modules/web.dom-collections.iterator":246}],329:[function(l,de,H){"use strict";l("core-js/modules/es.array.filter"),l("core-js/modules/es.array.filter"),Object.defineProperty(H,"__esModule",{value:!0}),H.default=void 0;var M=(l=l("../core/main"))&&l.__esModule?l:{default:l};M.default.prototype.ambientLight=function(E,v,S,T){this._assert3d("ambientLight"),M.default._validateParameters("ambientLight",arguments);var C=this.color.apply(this,arguments);return this._renderer.ambientLightColors.push(C._array[0],C._array[1],C._array[2]),this._renderer._enableLighting=!0,this},M.default.prototype.specularColor=function(E,v,S){this._assert3d("specularColor"),M.default._validateParameters("specularColor",arguments);var T=this.color.apply(this,arguments);return this._renderer.specularColors=[T._array[0],T._array[1],T._array[2]],this},M.default.prototype.directionalLight=function(E,p,m,T,C,f){var g,d;return this._assert3d("directionalLight"),M.default._validateParameters("directionalLight",arguments),E=E instanceof M.default.Color?E:this.color(E,p,m),m="number"==typeof(p=arguments[arguments.length-1])?(g=arguments[arguments.length-3],d=arguments[arguments.length-2],arguments[arguments.length-1]):(g=p.x,d=p.y,p.z),p=Math.sqrt(g*g+d*d+m*m),this._renderer.directionalLightDirections.push(g/p,d/p,m/p),this._renderer.directionalLightDiffuseColors.push(E._array[0],E._array[1],E._array[2]),Array.prototype.push.apply(this._renderer.directionalLightSpecularColors,this._renderer.specularColors),this._renderer._enableLighting=!0,this},M.default.prototype.pointLight=function(E,m,p,T,C,f){var g,d;return this._assert3d("pointLight"),M.default._validateParameters("pointLight",arguments),E=E instanceof M.default.Color?E:this.color(E,m,p),p="number"==typeof(m=arguments[arguments.length-1])?(g=arguments[arguments.length-3],d=arguments[arguments.length-2],arguments[arguments.length-1]):(g=m.x,d=m.y,m.z),this._renderer.pointLightPositions.push(g,d,p),this._renderer.pointLightDiffuseColors.push(E._array[0],E._array[1],E._array[2]),Array.prototype.push.apply(this._renderer.pointLightSpecularColors,this._renderer.specularColors),this._renderer._enableLighting=!0,this},M.default.prototype.imageLight=function(E){this._renderer.activeImageLight=E,this._renderer._enableLighting=!0},M.default.prototype.panorama=function(E){this.filter(this._renderer._getSphereMapping(E))},M.default.prototype.lights=function(){this._assert3d("lights");var E=this.color("rgb(128,128,128)");return this.ambientLight(E),this.directionalLight(E,0,0,-1),this},M.default.prototype.lightFalloff=function(E,v,S){return this._assert3d("lightFalloff"),M.default._validateParameters("lightFalloff",arguments),E<0&&(E=0,console.warn("Value of constant argument in lightFalloff() should be never be negative. Set to 0.")),v<0&&(v=0,console.warn("Value of linear argument in lightFalloff() should be never be negative. Set to 0.")),S<0&&(S=0,console.warn("Value of quadratic argument in lightFalloff() should be never be negative. Set to 0.")),0===E&&0===v&&0===S&&(E=1,console.warn("Either one of the three arguments in lightFalloff() should be greater than zero. Set constant argument to 1.")),this._renderer.constantAttenuation=E,this._renderer.linearAttenuation=v,this._renderer.quadraticAttenuation=S,this},M.default.prototype.spotLight=function(E,v,S,T,C,f,g,d,m,p,h){this._assert3d("spotLight"),M.default._validateParameters("spotLight",arguments);var y,b,x,D=arguments.length;switch(D){case 11:case 10:y=this.color(E,v,S),b=new M.default.Vector(T,C,f),x=new M.default.Vector(g,d,m);break;case 9:E instanceof M.default.Color?(y=E,b=new M.default.Vector(v,S,T),x=new M.default.Vector(C,f,g),p=d,h=m):T instanceof M.default.Vector?(y=this.color(E,v,S),b=T,x=new M.default.Vector(C,f,g),p=d,h=m):g instanceof M.default.Vector?(y=this.color(E,v,S),b=new M.default.Vector(T,C,f),x=g,p=d,h=m):(y=this.color(E,v,S),b=new M.default.Vector(T,C,f),x=new M.default.Vector(g,d,m));break;case 8:x=E instanceof M.default.Color?(y=E,b=new M.default.Vector(v,S,T),new M.default.Vector(C,f,g)):T instanceof M.default.Vector?(y=this.color(E,v,S),b=T,new M.default.Vector(C,f,g)):(y=this.color(E,v,S),b=new M.default.Vector(T,C,f),g),p=d;break;case 7:E instanceof M.default.Color&&v instanceof M.default.Vector?(y=E,b=v,x=new M.default.Vector(S,T,C),p=f,h=g):E instanceof M.default.Color&&C instanceof M.default.Vector?(y=E,b=new M.default.Vector(v,S,T),x=C,p=f,h=g):T instanceof M.default.Vector&&C instanceof M.default.Vector?(y=this.color(E,v,S),b=T,x=C,p=f,h=g):x=E instanceof M.default.Color?(y=E,b=new M.default.Vector(v,S,T),new M.default.Vector(C,f,g)):T instanceof M.default.Vector?(y=this.color(E,v,S),b=T,new M.default.Vector(C,f,g)):(y=this.color(E,v,S),b=new M.default.Vector(T,C,f),g);break;case 6:T instanceof M.default.Vector&&C instanceof M.default.Vector?(y=this.color(E,v,S),b=T,x=C,p=f):E instanceof M.default.Color&&C instanceof M.default.Vector?(y=E,b=new M.default.Vector(v,S,T),x=C,p=f):E instanceof M.default.Color&&v instanceof M.default.Vector&&(y=E,b=v,x=new M.default.Vector(S,T,C),p=f);break;case 5:E instanceof M.default.Color&&v instanceof M.default.Vector&&S instanceof M.default.Vector?(y=E,b=v,x=S,p=T,h=C):T instanceof M.default.Vector&&C instanceof M.default.Vector?(y=this.color(E,v,S),b=T,x=C):E instanceof M.default.Color&&C instanceof M.default.Vector?(y=E,b=new M.default.Vector(v,S,T),x=C):E instanceof M.default.Color&&v instanceof M.default.Vector&&(y=E,b=v,x=new M.default.Vector(S,T,C));break;case 4:y=E,b=v,x=S,p=T;break;case 3:y=E,b=v,x=S;break;default:return console.warn("Sorry, input for spotlight() is not in prescribed format. Too ".concat(D<3?"few":"many"," arguments were provided")),this}return this._renderer.spotLightDiffuseColors.push(y._array[0],y._array[1],y._array[2]),Array.prototype.push.apply(this._renderer.spotLightSpecularColors,this._renderer.specularColors),this._renderer.spotLightPositions.push(b.x,b.y,b.z),x.normalize(),this._renderer.spotLightDirections.push(x.x,x.y,x.z),void 0===p&&(p=Math.PI/3),void 0!==h&&h<1?(h=1,console.warn("Value of concentration needs to be greater than 1. Setting it to 1")):void 0===h&&(h=100),p=this._renderer._pInst._toRadians(p),this._renderer.spotLightAngle.push(Math.cos(p)),this._renderer.spotLightConc.push(h),this._renderer._enableLighting=!0,this},M.default.prototype.noLights=function(){this._assert3d("noLights");for(var E=arguments.length,v=new Array(E),S=0;S<E;S++)v[S]=arguments[S];return M.default._validateParameters("noLights",v),this._renderer.activeImageLight=null,this._renderer._enableLighting=!1,this._renderer.ambientLightColors.length=0,this._renderer.specularColors=[1,1,1],this._renderer.directionalLightDirections.length=0,this._renderer.directionalLightDiffuseColors.length=0,this._renderer.directionalLightSpecularColors.length=0,this._renderer.pointLightPositions.length=0,this._renderer.pointLightDiffuseColors.length=0,this._renderer.pointLightSpecularColors.length=0,this._renderer.spotLightPositions.length=0,this._renderer.spotLightDirections.length=0,this._renderer.spotLightDiffuseColors.length=0,this._renderer.spotLightSpecularColors.length=0,this._renderer.spotLightAngle.length=0,this._renderer.spotLightConc.length=0,this._renderer.constantAttenuation=1,this._renderer.linearAttenuation=0,this._renderer.quadraticAttenuation=0,this._renderer._useShininess=1,this._renderer._useMetalness=0,this},H.default=l=M.default},{"../core/main":283,"core-js/modules/es.array.filter":157}],330:[function(l,de,H){"use strict";function M(p){return(M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(h){return typeof h}:function(h){return h&&"function"==typeof Symbol&&h.constructor===Symbol&&h!==Symbol.prototype?"symbol":typeof h})(p)}l("core-js/modules/es.symbol"),l("core-js/modules/es.symbol.description"),l("core-js/modules/es.symbol.iterator"),l("core-js/modules/es.array.concat"),l("core-js/modules/es.array.from"),l("core-js/modules/es.array.index-of"),l("core-js/modules/es.array.iterator"),l("core-js/modules/es.array.join"),l("core-js/modules/es.array.slice"),l("core-js/modules/es.array.splice"),l("core-js/modules/es.object.assign"),l("core-js/modules/es.object.to-string"),l("core-js/modules/es.promise"),l("core-js/modules/es.regexp.exec"),l("core-js/modules/es.regexp.to-string"),l("core-js/modules/es.set"),l("core-js/modules/es.string.iterator"),l("core-js/modules/es.string.match"),l("core-js/modules/es.string.split"),l("core-js/modules/es.string.trim"),l("core-js/modules/web.dom-collections.iterator"),l("core-js/modules/es.symbol"),l("core-js/modules/es.symbol.description"),l("core-js/modules/es.symbol.iterator"),l("core-js/modules/es.array.concat"),l("core-js/modules/es.array.index-of"),l("core-js/modules/es.array.iterator"),l("core-js/modules/es.array.join"),l("core-js/modules/es.array.slice"),l("core-js/modules/es.array.splice"),l("core-js/modules/es.object.assign"),l("core-js/modules/es.object.to-string"),l("core-js/modules/es.promise"),l("core-js/modules/es.regexp.exec"),l("core-js/modules/es.set"),l("core-js/modules/es.string.iterator"),l("core-js/modules/es.string.match"),l("core-js/modules/es.string.split"),l("core-js/modules/es.string.trim"),l("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(H,"__esModule",{value:!0}),H.default=void 0,l("regenerator-runtime/runtime");var E=(m=l("../core/main"))&&m.__esModule?m:{default:m};function v(p){return function(h){if(Array.isArray(h)){for(var y=0,b=new Array(h.length);y<h.length;y++)b[y]=h[y];return b}}(p)||function(h){if(Symbol.iterator in Object(h)||"[object Arguments]"===Object.prototype.toString.call(h))return Array.from(h)}(p)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function S(p,h,y,b,x,D,N){try{var U=p[D](N),R=U.value}catch(L){return void y(L)}U.done?h(R):Promise.resolve(R).then(b,x)}function T(p){return function(){var h=this,y=arguments;return new Promise(function(b,x){var D=p.apply(h,y);function N(R){S(D,b,x,N,U,"next",R)}function U(R){S(D,b,x,N,U,"throw",R)}N(void 0)})}}function C(p){return(C="function"==typeof Symbol&&"symbol"===M(Symbol.iterator)?function(h){return M(h)}:function(h){return h&&"function"==typeof Symbol&&h.constructor===Symbol&&h!==Symbol.prototype?"symbol":M(h)})(p)}function f(p,h,y){for(var b=2<arguments.length&&void 0!==y?y:{},x={v:[],vt:[],vn:[]},D={},N=null,U=new Set,R=!1,L=!1,z=0;z<h.length;++z){var F=h[z].trim().split(/\b\s+/);if(0<F.length)if("usemtl"===F[0])N=F[1];else if("v"===F[0]||"vn"===F[0]){var q=new E.default.Vector(parseFloat(F[1]),parseFloat(F[2]),parseFloat(F[3]));x[F[0]].push(q)}else if("vt"===F[0])q=[parseFloat(F[1]),1-parseFloat(F[2])],x[F[0]].push(q);else if("f"===F[0])for(var k=3;k<F.length;++k){for(var Z=[],X=[1,k-1,k],W=0;W<X.length;++W){for(var oe,ie=F[X[W]],re=ie.split("/"),le=0;le<re.length;le++)re[le]=parseInt(re[le])-1;D[ie]||(D[ie]={}),void 0===D[ie][N]?(oe=p.vertices.length,p.vertices.push(x.v[re[0]].copy()),p.uvs.push(x.vt[re[1]]?x.vt[re[1]].slice():[0,0]),p.vertexNormals.push(x.vn[re[2]]?x.vn[re[2]].copy():new E.default.Vector),D[ie][N]=oe,Z.push(oe),N&&b[N]&&b[N].diffuseColor&&U.add(x.v[re[0]])):Z.push(D[ie][N])}if(Z[0]!==Z[1]&&Z[0]!==Z[2]&&Z[1]!==Z[2])if(p.faces.push(Z),N&&b[N]&&b[N].diffuseColor){R=R=!0;for(var pe=b[N].diffuseColor,Ae=0;Ae<Z.length;Ae++)p.vertexColors.push(pe[0]),p.vertexColors.push(pe[1]),p.vertexColors.push(pe[2])}else L=!0}}if(0===p.vertexNormals.length&&p.computeNormals(),R===L)throw new Error("Model coloring is inconsistent. Either all vertices should have colors or none should.")}function g(p,h){if(function(je){for(var be=new DataView(je),Oe=[115,111,108,105,100],Ge=0;Ge<5;Ge++)if(function(Ke,ze,qe){for(var et=0,_t=Ke.length;et<_t;et++)if(Ke[et]!==ze.getUint8(qe+et,!1))return;return 1}(Oe,be,Ge))return;return 1}(h)){for(var y,b,x,D,N,U,R,L=p,z=new DataView(h),F=z.getUint32(80,!0),q=!1,k=0;k<70;k++)1129270351===z.getUint32(k,!1)&&82===z.getUint8(k+4)&&61===z.getUint8(k+5)&&(q=!0,D=[],N=z.getUint8(k+6)/255,U=z.getUint8(k+7)/255,R=z.getUint8(k+8)/255);for(var Z=0;Z<F;Z++){for(var X,W=84+50*Z,oe=z.getFloat32(W,!0),ie=z.getFloat32(4+W,!0),re=z.getFloat32(8+W,!0),le=(q&&(x=32768&(X=z.getUint16(48+W,!0))?(y=N,b=U,R):(y=(31&X)/31,b=(X>>5&31)/31,(X>>10&31)/31)),new E.default.Vector(oe,ie,re)),pe=1;pe<=3;pe++){var Ae=new E.default.Vector(z.getFloat32(Ae=W+12*pe,!0),z.getFloat32(4+Ae,!0),z.getFloat32(8+Ae,!0));L.vertices.push(Ae),L.vertexNormals.push(le),q&&D.push(y,b,x)}L.faces.push([3*Z,3*Z+1,3*Z+2]),L.uvs.push([0,0],[0,0],[0,0])}}else if(h=new DataView(h),"TextDecoder"in window)for(var $,P,K=p,te=new TextDecoder("utf-8").decode(h).split("\n"),fe="",ve=[],Te=0;Te<te.length;++Te){for(var Ie=te[Te].trim(),we=Ie.split(" "),Pe=0;Pe<we.length;++Pe)""===we[Pe]&&we.splice(Pe,1);if(0!==we.length)switch(fe){case"":if("solid"!==we[0])return console.error(Ie),void console.error('Invalid state "'.concat(we[0],'", should be "solid"'));fe="solid";break;case"solid":if("facet"!==we[0]||"normal"!==we[1])return console.error(Ie),void console.error('Invalid state "'.concat(we[0],'", should be "facet normal"'));$=new E.default.Vector(parseFloat(we[2]),parseFloat(we[3]),parseFloat(we[4])),K.vertexNormals.push($,$,$),fe="facet normal";break;case"facet normal":if("outer"!==we[0]||"loop"!==we[1])return console.error(Ie),void console.error('Invalid state "'.concat(we[0],'", should be "outer loop"'));fe="vertex";break;case"vertex":if("vertex"===we[0])P=new E.default.Vector(parseFloat(we[1]),parseFloat(we[2]),parseFloat(we[3])),K.vertices.push(P),K.uvs.push([0,0]),ve.push(K.vertices.indexOf(P));else{if("endloop"!==we[0])return console.error(Ie),void console.error('Invalid state "'.concat(we[0],'", should be "vertex" or "endloop"'));K.faces.push(ve),ve=[],fe="endloop"}break;case"endloop":if("endfacet"!==we[0])return console.error(Ie),void console.error('Invalid state "'.concat(we[0],'", should be "endfacet"'));fe="endfacet";break;case"endfacet":if("endsolid"!==we[0]){if("facet"!==we[0]||"normal"!==we[1])return console.error(Ie),void console.error('Invalid state "'.concat(we[0],'", should be "endsolid" or "facet normal"'));$=new E.default.Vector(parseFloat(we[2]),parseFloat(we[3]),parseFloat(we[4])),K.vertexNormals.push($,$,$),fe="facet normal"}break;default:console.error('Invalid state "'.concat(fe,'"'))}}else console.warn("Sorry, ASCII STL loading only works in browsers that support TextDecoder (https://caniuse.com/#feat=textencoder)")}l("./p5.Geometry"),E.default.prototype.loadModel=function(p,h){E.default._validateParameters("loadModel",arguments);var y,b,q,x=!1,D=!1,N=!1,U=p.slice(-4),R=(h&&"object"===C(h)?(x=h.normalize||!1,y=h.successCallback,b=h.failureCallback,U=h.fileType||U,D=h.flipU||!1,N=h.flipV||!1):"boolean"==typeof h?(x=h,y=arguments[2],b=arguments[3],void 0!==arguments[4]&&(U=arguments[4])):(y="function"==typeof h?h:void 0,b=arguments[2],void 0!==arguments[3]&&(U=arguments[3])),new E.default.Geometry),L=(R.gid="".concat(p,"|").concat(x),this);function z(){return(z=T(Vn.mark(function q(k){var Z,X,W,oe;return Vn.wrap(function(ie){for(;;)switch(ie.prev=ie.next){case 0:for(Z=[],X=0;X<k.length;X++)(W=k[X].match(/^mtllib (.+)/))&&function(){var re,le=W[1],pe=p.split("/");re=1<pe.length?(pe.pop(),pe.join("/")+"/"+le):le,Z.push(function(){return F.apply(this,arguments)}(re).then(function(Ae){return Ae?($=L,P=re,new Promise(function(K,te){var fe=null,ve={};$.loadStrings(P,function(Te){for(var Ie=0;Ie<Te.length;++Ie){var Pe=Te[Ie].trim().split(/\s+/);"newmtl"===Pe[0]?ve[fe=Pe[1]]={}:"Kd"===Pe[0]?ve[fe].diffuseColor=[parseFloat(Pe[1]),parseFloat(Pe[2]),parseFloat(Pe[3])]:"Ka"===Pe[0]?ve[fe].ambientColor=[parseFloat(Pe[1]),parseFloat(Pe[2]),parseFloat(Pe[3])]:"Ks"===Pe[0]?ve[fe].specularColor=[parseFloat(Pe[1]),parseFloat(Pe[2]),parseFloat(Pe[3])]:"map_Kd"===Pe[0]&&(ve[fe].texturePath=Pe[1])}K(ve)},te)})):(console.warn("MTL file not found or error in parsing; proceeding without materials: ".concat(re)),{});var $,P}).catch(function(Ae){return console.warn("Error loading MTL file: ".concat(re),Ae),{}}))}();return ie.prev=2,ie.next=5,Promise.all(Z);case 5:return oe=ie.sent,oe=Object.assign.apply(Object,[{}].concat(v(oe))),ie.abrupt("return",oe);case 10:return ie.prev=10,ie.t0=ie.catch(2),ie.abrupt("return",{});case 13:case"end":return ie.stop()}},q,null,[[2,10]])}))).apply(this,arguments)}function F(){return(F=T(Vn.mark(function q(k){return Vn.wrap(function(X){for(;;)switch(X.prev=X.next){case 0:return X.prev=0,X.next=3,fetch(k,{method:"HEAD"});case 3:return X.abrupt("return",X.sent.ok);case 7:return X.prev=7,X.t0=X.catch(0),X.abrupt("return",!1);case 10:case"end":return X.stop()}},q,null,[[0,7]])}))).apply(this,arguments)}return U.match(/\.stl$/i)?this.httpDo(p,"GET","arrayBuffer",function(q){g(R,q),x&&R.normalize(),D&&R.flipU(),N&&R.flipV(),L._decrementPreload(),"function"==typeof y&&y(R)},b):U.match(/\.obj$/i)?this.loadStrings(p,(q=T(Vn.mark(function k(Z){return Vn.wrap(function(W){for(;;)switch(W.prev=W.next){case 0:return W.prev=0,W.next=3,function(){return z.apply(this,arguments)}(Z);case 3:f(R,Z,W.sent),W.next=11;break;case 7:return W.prev=7,W.t0=W.catch(0),b?b(W.t0):E.default._friendlyError("Error during parsing: "+W.t0.message),W.abrupt("return");case 11:return W.prev=11,x&&R.normalize(),D&&R.flipU(),N&&R.flipV(),R._makeTriangleEdges(),L._decrementPreload(),"function"==typeof y&&y(R),W.finish(11);case 19:case"end":return W.stop()}},k,null,[[0,7,11,19]])})),function(k){return q.apply(this,arguments)}),b):(E.default._friendlyFileLoadError(3,p),b?b():E.default._friendlyError("Sorry, the file type is invalid. Only OBJ and STL files are supported.")),R},E.default.prototype.model=function(p){this._assert3d("model"),E.default._validateParameters("model",arguments),0<p.vertices.length&&(this._renderer.geometryInHash(p.gid)||(p._edgesToVertices(),this._renderer.createBuffers(p.gid,p)),this._renderer.drawBuffers(p.gid))};var d=0,m=(E.default.prototype.createModel=function(p){var h,y,b=1<arguments.length&&void 0!==arguments[1]?arguments[1]:" ",U=2<arguments.length?arguments[2]:void 0,x=(E.default._validateParameters("createModel",arguments),!1),D=!1,N=!1;if((U&&"object"===C(U)?(x=U.normalize||!1,h=U.successCallback,y=U.failureCallback,D=U.flipU||!1,N=U.flipV||!1):y="boolean"==typeof U?(x=U,h=arguments[3],arguments[4]):(h="function"==typeof arguments[2]?arguments[2]:void 0,arguments[3]),U=new E.default.Geometry).gid="".concat(b,"|").concat(x,"|").concat(d++),b.match(/\.stl$/i))try{g(U,(new TextEncoder).encode(p).buffer)}catch(R){return void(y?y(R):E.default._friendlyError("Error during parsing: "+R.message))}else if(b.match(/\.obj$/i))try{f(U,p.split("\n"))}catch(R){return void(y?y(R):E.default._friendlyError("Error during parsing: "+R.message))}else E.default._friendlyFileLoadError(3,p),y?y():E.default._friendlyError("Sorry, the file type is invalid. Only OBJ and STL files are supported.");return x&&U.normalize(),D&&U.flipU(),N&&U.flipV(),U._makeTriangleEdges(),"function"==typeof h&&h(U),U},E.default);H.default=m},{"../core/main":283,"./p5.Geometry":335,"core-js/modules/es.array.concat":153,"core-js/modules/es.array.from":162,"core-js/modules/es.array.index-of":164,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.join":166,"core-js/modules/es.array.slice":169,"core-js/modules/es.array.splice":171,"core-js/modules/es.object.assign":183,"core-js/modules/es.object.to-string":190,"core-js/modules/es.promise":191,"core-js/modules/es.regexp.exec":195,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.set":197,"core-js/modules/es.string.iterator":200,"core-js/modules/es.string.match":201,"core-js/modules/es.string.split":206,"core-js/modules/es.string.trim":209,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/web.dom-collections.iterator":246,"regenerator-runtime/runtime":260}],331:[function(l,de,H){"use strict";function M(f){return(M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(g){return typeof g}:function(g){return g&&"function"==typeof Symbol&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":typeof g})(f)}function E(f){return(E="function"==typeof Symbol&&"symbol"===M(Symbol.iterator)?function(g){return M(g)}:function(g){return g&&"function"==typeof Symbol&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":M(g)})(f)}l("core-js/modules/es.symbol"),l("core-js/modules/es.symbol.description"),l("core-js/modules/es.symbol.iterator"),l("core-js/modules/es.array.includes"),l("core-js/modules/es.array.iterator"),l("core-js/modules/es.array.join"),l("core-js/modules/es.object.get-own-property-descriptor"),l("core-js/modules/es.object.to-string"),l("core-js/modules/es.string.includes"),l("core-js/modules/es.string.iterator"),l("core-js/modules/es.weak-map"),l("core-js/modules/web.dom-collections.iterator"),l("core-js/modules/es.symbol"),l("core-js/modules/es.symbol.description"),l("core-js/modules/es.symbol.iterator"),l("core-js/modules/es.array.includes"),l("core-js/modules/es.array.iterator"),l("core-js/modules/es.array.join"),l("core-js/modules/es.object.to-string"),l("core-js/modules/es.string.includes"),l("core-js/modules/es.string.iterator"),l("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(H,"__esModule",{value:!0}),H.default=void 0;var v=(C=l("../core/main"))&&C.__esModule?C:{default:C},S=function(f){if(f&&f.__esModule)return f;if(null===f||"object"!==E(f)&&"function"!=typeof f)return{default:f};var g=T();if(g&&g.has(f))return g.get(f);var d,m={},p=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(d in f){var h;Object.prototype.hasOwnProperty.call(f,d)&&((h=p?Object.getOwnPropertyDescriptor(f,d):null)&&(h.get||h.set)?Object.defineProperty(m,d,h):m[d]=f[d])}return m.default=f,g&&g.set(f,m),m}(l("../core/constants"));function T(){var f;return"function"!=typeof WeakMap?null:(T=function(){return f},f=new WeakMap)}l("./p5.Texture"),v.default.prototype.loadShader=function(f,g,d,m){function p(){y._decrementPreload(),d&&d(h)}v.default._validateParameters("loadShader",arguments),m=m||console.error;var h=new v.default.Shader,y=this,b=!1,x=!1;return this.loadStrings(f,function(D){h._vertSrc=D.join("\n"),x=!0,b&&p()},m),this.loadStrings(g,function(D){h._fragSrc=D.join("\n"),b=!0,x&&p()},m),h},v.default.prototype.createShader=function(f,g,d){return v.default._validateParameters("createShader",arguments),new v.default.Shader(this._renderer,f,g,d)},v.default.prototype.createFilterShader=function(f){v.default._validateParameters("createFilterShader",arguments);var g=f.includes("#version 300 es")?"#version 300 es\n    uniform mat4 uModelViewMatrix;\n    uniform mat4 uProjectionMatrix;\n\n    in vec3 aPosition;\n    in vec2 aTexCoord;\n    out vec2 vTexCoord;\n\n    void main() {\n      // transferring texcoords for the frag shader\n      vTexCoord = aTexCoord;\n\n      // copy position with a fourth coordinate for projection (1.0 is normal)\n      vec4 positionVec4 = vec4(aPosition, 1.0);\n\n      // project to 3D space\n      gl_Position = uProjectionMatrix * uModelViewMatrix * positionVec4;\n    }\n  ":"\n    uniform mat4 uModelViewMatrix;\n    uniform mat4 uProjectionMatrix;\n\n    attribute vec3 aPosition;\n    // texcoords only come from p5 to vertex shader\n    // so pass texcoords on to the fragment shader in a varying variable\n    attribute vec2 aTexCoord;\n    varying vec2 vTexCoord;\n\n    void main() {\n      // transferring texcoords for the frag shader\n      vTexCoord = aTexCoord;\n\n      // copy position with a fourth coordinate for projection (1.0 is normal)\n      vec4 positionVec4 = vec4(aPosition, 1.0);\n\n      // project to 3D space\n      gl_Position = uProjectionMatrix * uModelViewMatrix * positionVec4;\n    }\n  ";return(g=new v.default.Shader(this._renderer,g,f)).ensureCompiledOnContext(this._renderer.GL?this:this._renderer.getFilterGraphicsLayer()),g},v.default.prototype.shader=function(f){return this._assert3d("shader"),v.default._validateParameters("shader",arguments),f.ensureCompiledOnContext(this),f.isStrokeShader()?this._renderer.userStrokeShader=f:(this._renderer.userFillShader=f,this._renderer._useNormalMaterial=!1),f.setDefaultUniforms(),this},v.default.prototype.baseMaterialShader=function(){return this._assert3d("baseMaterialShader"),this._renderer.baseMaterialShader()},v.default.prototype.baseNormalShader=function(){return this._assert3d("baseNormalShader"),this._renderer.baseNormalShader()},v.default.prototype.baseColorShader=function(){return this._assert3d("baseColorShader"),this._renderer.baseColorShader()},v.default.prototype.baseStrokeShader=function(){return this._assert3d("baseStrokeShader"),this._renderer.baseStrokeShader()},v.default.prototype.resetShader=function(){return this._renderer.userFillShader=this._renderer.userStrokeShader=null,this},v.default.prototype.texture=function(f){return this._assert3d("texture"),v.default._validateParameters("texture",arguments),f.gifProperties&&f._animateGif(this),this._renderer.drawMode=S.TEXTURE,this._renderer._useNormalMaterial=!1,this._renderer._tex=f,this._renderer._setProperty("_doFill",!0),this},v.default.prototype.textureMode=function(f){f!==S.IMAGE&&f!==S.NORMAL?console.warn("You tried to set ".concat(f," textureMode only supports IMAGE & NORMAL ")):this._renderer.textureMode=f},v.default.prototype.textureWrap=function(f){var g=1<arguments.length&&void 0!==arguments[1]?arguments[1]:f,d=(this._renderer.textureWrapX=f,this._renderer.textureWrapY=g,!0),m=!1,p=void 0;try{for(var h,y=this._renderer.textures.values()[Symbol.iterator]();!(d=(h=y.next()).done);d=!0)h.value.setWrapMode(f,g)}catch(b){m=!0,p=b}finally{try{d||null==y.return||y.return()}finally{if(m)throw p}}},v.default.prototype.normalMaterial=function(){this._assert3d("normalMaterial");for(var f=arguments.length,g=new Array(f),d=0;d<f;d++)g[d]=arguments[d];return v.default._validateParameters("normalMaterial",g),this._renderer.drawMode=S.FILL,this._renderer._useSpecularMaterial=!1,this._renderer._useEmissiveMaterial=!1,this._renderer._useNormalMaterial=!0,this._renderer.curFillColor=[1,1,1,1],this._renderer._setProperty("_doFill",!0),this.noStroke(),this},v.default.prototype.ambientMaterial=function(f,g,d){this._assert3d("ambientMaterial"),v.default._validateParameters("ambientMaterial",arguments);var m=v.default.prototype.color.apply(this,arguments);return this._renderer._hasSetAmbient=!0,this._renderer.curAmbientColor=m._array,this._renderer._useNormalMaterial=!1,this._renderer._enableLighting=!0,this._renderer._setProperty("_doFill",!0),this},v.default.prototype.emissiveMaterial=function(f,g,d,m){this._assert3d("emissiveMaterial"),v.default._validateParameters("emissiveMaterial",arguments);var p=v.default.prototype.color.apply(this,arguments);return this._renderer.curEmissiveColor=p._array,this._renderer._useEmissiveMaterial=!0,this._renderer._useNormalMaterial=!1,this._renderer._enableLighting=!0,this},v.default.prototype.specularMaterial=function(f,g,d,m){this._assert3d("specularMaterial"),v.default._validateParameters("specularMaterial",arguments);var p=v.default.prototype.color.apply(this,arguments);return this._renderer.curSpecularColor=p._array,this._renderer._useSpecularMaterial=!0,this._renderer._useNormalMaterial=!1,this._renderer._enableLighting=!0,this},v.default.prototype.shininess=function(f){return this._assert3d("shininess"),v.default._validateParameters("shininess",arguments),this._renderer._useShininess=f=f<1?1:f,this},v.default.prototype.metalness=function(f){return this._assert3d("metalness"),f=1-Math.exp(-f/100),this._renderer._useMetalness=f,this},v.default.RendererGL.prototype._applyColorBlend=function(f,p){var d=this.GL;return(p=p||this.userFillShader||this.userStrokeShader||this.userPointShader||this.drawMode===S.TEXTURE||this.curBlendMode!==S.BLEND||f[f.length-1]<1||this._isErasing)!==this._isBlending&&(p||this.curBlendMode!==S.BLEND&&this.curBlendMode!==S.ADD?d.enable(d.BLEND):d.disable(d.BLEND),d.depthMask(!0),this._isBlending=p),this._applyBlendMode(),f},v.default.RendererGL.prototype._applyBlendMode=function(){if(this._cachedBlendMode!==this.curBlendMode){var f=this.GL;switch(this.curBlendMode){case S.BLEND:f.blendEquation(f.FUNC_ADD),f.blendFunc(f.ONE,f.ONE_MINUS_SRC_ALPHA);break;case S.ADD:f.blendEquation(f.FUNC_ADD),f.blendFunc(f.ONE,f.ONE);break;case S.REMOVE:f.blendEquation(f.FUNC_ADD),f.blendFunc(f.ZERO,f.ONE_MINUS_SRC_ALPHA);break;case S.MULTIPLY:f.blendEquation(f.FUNC_ADD),f.blendFunc(f.DST_COLOR,f.ONE_MINUS_SRC_ALPHA);break;case S.SCREEN:f.blendEquation(f.FUNC_ADD),f.blendFunc(f.ONE,f.ONE_MINUS_SRC_COLOR);break;case S.EXCLUSION:f.blendEquationSeparate(f.FUNC_ADD,f.FUNC_ADD),f.blendFuncSeparate(f.ONE_MINUS_DST_COLOR,f.ONE_MINUS_SRC_COLOR,f.ONE,f.ONE);break;case S.REPLACE:f.blendEquation(f.FUNC_ADD),f.blendFunc(f.ONE,f.ZERO);break;case S.SUBTRACT:f.blendEquationSeparate(f.FUNC_REVERSE_SUBTRACT,f.FUNC_ADD),f.blendFuncSeparate(f.ONE,f.ONE,f.ONE,f.ONE_MINUS_SRC_ALPHA);break;case S.DARKEST:this.blendExt?(f.blendEquationSeparate(this.blendExt.MIN||this.blendExt.MIN_EXT,f.FUNC_ADD),f.blendFuncSeparate(f.ONE,f.ONE,f.ONE,f.ONE)):console.warn("blendMode(DARKEST) does not work in your browser in WEBGL mode.");break;case S.LIGHTEST:this.blendExt?(f.blendEquationSeparate(this.blendExt.MAX||this.blendExt.MAX_EXT,f.FUNC_ADD),f.blendFuncSeparate(f.ONE,f.ONE,f.ONE,f.ONE)):console.warn("blendMode(LIGHTEST) does not work in your browser in WEBGL mode.");break;default:console.error("Oops! Somehow RendererGL set curBlendMode to an unsupported mode.")}this._isErasing||(this._cachedBlendMode=this.curBlendMode)}};var C=v.default;H.default=C},{"../core/constants":272,"../core/main":283,"./p5.Texture":343,"core-js/modules/es.array.includes":163,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.join":166,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.to-string":190,"core-js/modules/es.string.includes":199,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246}],332:[function(l,de,H){"use strict";l("core-js/modules/es.array.slice"),l("core-js/modules/es.math.hypot"),l("core-js/modules/es.string.sub"),l("core-js/modules/es.array.slice"),l("core-js/modules/es.math.hypot"),l("core-js/modules/es.string.sub"),Object.defineProperty(H,"__esModule",{value:!0}),H.default=void 0;var M=(l=l("../core/main"))&&l.__esModule?l:{default:l};function E(v,S){for(var T=0;T<S.length;T++){var C=S[T];C.enumerable=C.enumerable||!1,C.configurable=!0,"value"in C&&(C.writable=!0),Object.defineProperty(v,C.key,C)}}M.default.prototype.camera=function(){var v;this._assert3d("camera");for(var S=arguments.length,T=new Array(S),C=0;C<S;C++)T[C]=arguments[C];return M.default._validateParameters("camera",T),(v=this._renderer._curCamera).camera.apply(v,T),this},M.default.prototype.perspective=function(){var v;this._assert3d("perspective");for(var S=arguments.length,T=new Array(S),C=0;C<S;C++)T[C]=arguments[C];return M.default._validateParameters("perspective",T),(v=this._renderer._curCamera).perspective.apply(v,T),this},M.default.prototype.linePerspective=function(v){if(M.default._validateParameters("linePerspective",arguments),!(this._renderer instanceof M.default.RendererGL))throw new Error("linePerspective() must be called in WebGL mode.");if(void 0===v)return this._renderer._curCamera.useLinePerspective;this._renderer._curCamera.useLinePerspective=v},M.default.prototype.ortho=function(){var v;this._assert3d("ortho");for(var S=arguments.length,T=new Array(S),C=0;C<S;C++)T[C]=arguments[C];return M.default._validateParameters("ortho",T),(v=this._renderer._curCamera).ortho.apply(v,T),this},M.default.prototype.frustum=function(){var v;this._assert3d("frustum");for(var S=arguments.length,T=new Array(S),C=0;C<S;C++)T[C]=arguments[C];return M.default._validateParameters("frustum",T),(v=this._renderer._curCamera).frustum.apply(v,T),this},M.default.prototype.createCamera=function(){this._assert3d("createCamera");var v=new M.default.Camera(this._renderer);return v._computeCameraDefaultSettings(),v._setDefaultCamera(),this._renderer._curCamera=v},M.default.Camera=function(){function v(f){if(!(this instanceof v))throw new TypeError("Cannot call a class as a function");this._renderer=f,this.cameraType="default",this.useLinePerspective=!0,this.cameraMatrix=new M.default.Matrix,this.projMatrix=new M.default.Matrix,this.yScale=1}var S,T;return S=v,(T=[{key:"perspective",value:function(p,g,d,m){this.cameraType=0<arguments.length?"custom":"default",this.cameraFOV=void 0===p?p=this.defaultCameraFOV:this._renderer._pInst._toRadians(p),void 0===g&&(g=this.defaultAspectRatio),void 0===d&&(d=this.defaultCameraNear),void 0===m&&(m=this.defaultCameraFar),d<=1e-4&&(d=.01,console.log("Avoid perspective near plane values close to or below 0. Setting value to 0.01.")),m<d&&console.log("Perspective far plane value is less than near plane value. Nothing will be shown."),this.aspectRatio=g,this.cameraNear=d,this.cameraFar=m,this.projMatrix=M.default.Matrix.identity(),p=1/Math.tan(this.cameraFOV/2);var h=1/(this.cameraNear-this.cameraFar);this.projMatrix.set(p/g,0,0,0,0,-p*this.yScale,0,0,0,0,(m+d)*h,-1,0,0,2*m*d*h,0),this._isActive()&&this._renderer.uPMatrix.set(this.projMatrix)}},{key:"ortho",value:function(R,U,d,m,p,h){var L=this.fbo||this._renderer,y=(void 0===R&&(R=-L.width/2),void 0===U&&(U=+L.width/2),void 0===d&&(d=-L.height/2),void 0===m&&(m=+L.height/2),void 0===p&&(p=0),void 0===h&&(h=Math.max(L.width,L.height)+800),this.cameraNear=p,L=U-R,m-d),b=(this.cameraFar=h)-p,x=2/L,D=2/y*this.yScale,N=-2/b;U=-(U+R)/L,R=-(m+d)/y,L=-(h+p)/b,this.projMatrix=M.default.Matrix.identity(),this.projMatrix.set(x,0,0,0,0,-D,0,0,0,0,N,0,U,R,L,1),this._isActive()&&this._renderer.uPMatrix.set(this.projMatrix),this.cameraType="custom"}},{key:"frustum",value:function(R,U,d,m,p,h){void 0===R&&(R=.05*-this._renderer.width),void 0===U&&(U=.05*+this._renderer.width),void 0===d&&(d=.05*+this._renderer.height),void 0===m&&(m=.05*-this._renderer.height),void 0===p&&(p=this.defaultCameraNear),void 0===h&&(h=this.defaultCameraFar),this.cameraNear=p;var L=U-R,y=m-d,b=(this.cameraFar=h)-p,x=2*p/L,D=2*p/y*this.yScale,N=-2*h*p/b;U=(U+R)/L,R=(m+d)/y,L=-(h+p)/b,this.projMatrix=M.default.Matrix.identity(),this.projMatrix.set(x,0,0,0,0,-D,0,0,U,R,L,-1,0,0,N,0),this._isActive()&&this._renderer.uPMatrix.set(this.projMatrix),this.cameraType="custom"}},{key:"_rotateView",value:function(x,D,N,U){var p=this.centerX,h=this.centerY,y=this.centerZ,b=(p-=this.eyeX,h-=this.eyeY,y-=this.eyeZ,M.default.Matrix.identity(this._renderer._pInst));(b.rotate(this._renderer._pInst._toRadians(x),D,N,U),x=[p*b.mat4[0]+h*b.mat4[4]+y*b.mat4[8],p*b.mat4[1]+h*b.mat4[5]+y*b.mat4[9],p*b.mat4[2]+h*b.mat4[6]+y*b.mat4[10]])[0]+=this.eyeX,x[1]+=this.eyeY,x[2]+=this.eyeZ,this.camera(this.eyeX,this.eyeY,this.eyeZ,x[0],x[1],x[2],D=this.upX*b.mat4[0]+this.upY*b.mat4[4]+this.upZ*b.mat4[8],N=this.upX*b.mat4[1]+this.upY*b.mat4[5]+this.upZ*b.mat4[9],U=this.upX*b.mat4[2]+this.upY*b.mat4[6]+this.upZ*b.mat4[10])}},{key:"roll",value:function(d){var g=this._getLocalAxes();d=M.default.Quat.fromAxisAngle(this._renderer._pInst._toRadians(d),g.z[0],g.z[1],g.z[2]).rotateVector(new M.default.Vector(this.upX,this.upY,this.upZ)),this.camera(this.eyeX,this.eyeY,this.eyeZ,this.centerX,this.centerY,this.centerZ,d.x,d.y,d.z)}},{key:"pan",value:function(f){var g=this._getLocalAxes();this._rotateView(f,g.y[0],g.y[1],g.y[2])}},{key:"tilt",value:function(f){var g=this._getLocalAxes();this._rotateView(f,g.x[0],g.x[1],g.x[2])}},{key:"lookAt",value:function(f,g,d){this.camera(this.eyeX,this.eyeY,this.eyeZ,f,g,d,this.upX,this.upY,this.upZ)}},{key:"camera",value:function(f,g,d,m,p,h,y,b,x){return void 0===f&&(d=this.defaultEyeZ,m=f=this.defaultEyeX,p=g=this.defaultEyeY,b=1,x=y=h=0),this.eyeX=f,this.eyeY=g,this.eyeZ=d,void 0!==m&&(this.centerX=m,this.centerY=p,this.centerZ=h),void 0!==y&&(this.upX=y,this.upY=b,this.upZ=x),m=this._getLocalAxes(),this.cameraMatrix.set(m.x[0],m.y[0],m.z[0],0,m.x[1],m.y[1],m.z[1],0,m.x[2],m.y[2],m.z[2],0,0,0,0,1),this.cameraMatrix.translate([p=-f,-g,-d]),this._isActive()&&this._renderer.uViewMatrix.set(this.cameraMatrix),this}},{key:"move",value:function(m,p,d){var h=this._getLocalAxes();this.camera(this.eyeX+(m=[h.x[0]*m,h.x[1]*m,h.x[2]*m])[0]+(p=[h.y[0]*p,h.y[1]*p,h.y[2]*p])[0]+(h=[h.z[0]*d,h.z[1]*d,h.z[2]*d])[0],this.eyeY+m[1]+p[1]+h[1],this.eyeZ+m[2]+p[2]+h[2],this.centerX+m[0]+p[0]+h[0],this.centerY+m[1]+p[1]+h[1],this.centerZ+m[2]+p[2]+h[2],this.upX,this.upY,this.upZ)}},{key:"setPosition",value:function(f,g,d){this.camera(f,g,d,this.centerX+(f-this.eyeX),this.centerY+(g-this.eyeY),this.centerZ+(d-this.eyeZ),this.upX,this.upY,this.upZ)}},{key:"set",value:function(f){for(var g=0,d=["eyeX","eyeY","eyeZ","centerX","centerY","centerZ","upX","upY","upZ","cameraFOV","aspectRatio","cameraNear","cameraFar","cameraType","yScale","useLinePerspective"];g<d.length;g++){var m=d[g];this[m]=f[m]}this.cameraMatrix=f.cameraMatrix.copy(),this.projMatrix=f.projMatrix.copy(),this._isActive()&&(this._renderer.uModelMatrix.reset(),this._renderer.uViewMatrix.set(this.cameraMatrix),this._renderer.uPMatrix.set(this.projMatrix))}},{key:"slerp",value:function(f,g,d){var m,p,h,y,b,x,D,N,U,R,L,z,F,q,k,Z,X,W;0===d?this.set(f):1===d?this.set(g):(0!==this.projMatrix.mat4[15]&&(this.projMatrix.mat4[0]=f.projMatrix.mat4[0]*Math.pow(g.projMatrix.mat4[0]/f.projMatrix.mat4[0],d),this.projMatrix.mat4[5]=f.projMatrix.mat4[5]*Math.pow(g.projMatrix.mat4[5]/f.projMatrix.mat4[5],d),this._isActive()&&(this._renderer.uPMatrix.mat4=this.projMatrix.mat4.slice())),y=new M.default.Vector(f.eyeX,f.eyeY,f.eyeZ),b=new M.default.Vector(g.eyeX,g.eyeY,g.eyeZ),Z=new M.default.Vector(f.centerX,f.centerY,f.centerZ),W=new M.default.Vector(g.centerX,g.centerY,g.centerZ),h=M.default.Vector.dist(y,Z),m=M.default.Vector.dist(b,W),m=h*Math.pow(m/h,d),h=M.default.Vector.sub(y,b),p=1,1e-6<(X=(q=y.copy().sub(b).sub(Z).add(W)).magSq())&&(p=M.default.Vector.dot(h,q)/X,p=Math.max(0,Math.min(p,1))),h=M.default.Vector.lerp(M.default.Vector.lerp(y,Z,p),M.default.Vector.lerp(b,W,p),d),q=f.cameraMatrix.createSubMatrix3x3(),X=g.cameraMatrix.createSubMatrix3x3(),y=q.row(2),Z=X.row(2),b=q.row(1),W=X.row(1),f=new M.default.Vector,g=new M.default.Vector,x=new M.default.Vector,D=new M.default.Vector,1-(N=.5*((q=(X=X.mult3x3(q.copy().transpose3x3())).diagonal())[0]+q[1]+q[2]-1))<1e-7?(f.set(M.default.Vector.lerp(y,Z,d)).normalize(),x.set(f).mult(p*m).add(h),D.set(f).mult((p-1)*m).add(h),g.set(M.default.Vector.lerp(b,W,d)).normalize()):(Z=1/(1-N),W=Math.max(q[0],q[1],q[2]),z=X.mat3[1]+X.mat3[3],F=X.mat3[2]+X.mat3[6],k=X.mat3[5]+X.mat3[7],W=W===q[0]?(R=.5*z*(Z/=U=Math.sqrt((q[0]-N)*Z)),L=.5*F*Z,.5*(X.mat3[7]-X.mat3[5])/U):W===q[1]?(L=.5*k*(Z/=R=Math.sqrt((q[1]-N)*Z)),U=.5*z*Z,.5*(X.mat3[2]-X.mat3[6])/R):(U=.5*F*(Z/=L=Math.sqrt((q[2]-N)*Z)),R=.5*k*Z,.5*(X.mat3[3]-X.mat3[1])/L),z=d*Math.atan2(W,N),F=Math.cos(z),q=Math.sin(z),(W=new M.default.Matrix("mat3",[F+(k=1-F)*U*U,k*(Z=U*R)+q*L,k*(X=L*U)-q*R,k*Z-q*L,F+k*R*R,k*(d=R*L)+q*U,k*X+q*R,k*d-q*U,F+k*L*L])).multiplyVec3(y,f),x.set(f).mult(p*m).add(h),D.set(f).mult((p-1)*m).add(h),W.multiplyVec3(b,g)),this.camera(x.x,x.y,x.z,D.x,D.y,D.z,g.x,g.y,g.z))}},{key:"_computeCameraDefaultSettings",value:function(){this.defaultAspectRatio=this._renderer.width/this._renderer.height,this.defaultEyeX=0,this.defaultEyeY=0,this.defaultEyeZ=800,this.defaultCameraFOV=2*Math.atan(this._renderer.height/2/this.defaultEyeZ),this.defaultCenterX=0,this.defaultCenterY=0,this.defaultCenterZ=0,this.defaultCameraNear=.1*this.defaultEyeZ,this.defaultCameraFar=10*this.defaultEyeZ}},{key:"_setDefaultCamera",value:function(){this.cameraFOV=this.defaultCameraFOV,this.aspectRatio=this.defaultAspectRatio,this.eyeX=this.defaultEyeX,this.eyeY=this.defaultEyeY,this.eyeZ=this.defaultEyeZ,this.centerX=this.defaultCenterX,this.centerY=this.defaultCenterY,this.centerZ=this.defaultCenterZ,this.upX=0,this.upY=1,this.upZ=0,this.cameraNear=this.defaultCameraNear,this.cameraFar=this.defaultCameraFar,this.perspective(),this.camera(),this.cameraType="default"}},{key:"_resize",value:function(){"default"===this.cameraType&&(this._computeCameraDefaultSettings(),this.cameraFOV=this.defaultCameraFOV,this.aspectRatio=this.defaultAspectRatio,this.perspective())}},{key:"copy",value:function(){var f=new M.default.Camera(this._renderer);return f.cameraFOV=this.cameraFOV,f.aspectRatio=this.aspectRatio,f.eyeX=this.eyeX,f.eyeY=this.eyeY,f.eyeZ=this.eyeZ,f.centerX=this.centerX,f.centerY=this.centerY,f.centerZ=this.centerZ,f.upX=this.upX,f.upY=this.upY,f.upZ=this.upZ,f.cameraNear=this.cameraNear,f.cameraFar=this.cameraFar,f.cameraType=this.cameraType,f.useLinePerspective=this.useLinePerspective,f.cameraMatrix=this.cameraMatrix.copy(),f.projMatrix=this.projMatrix.copy(),f.yScale=this.yScale,f}},{key:"_getLocalAxes",value:function(){var D,f=this.eyeX-this.centerX,g=this.eyeY-this.centerY,d=this.eyeZ-this.centerZ,y=(0!==(y=Math.sqrt(f*f+g*g+d*d))&&(f/=y,g/=y,d/=y),this.upX),m=(b=this.upY)*d-(x=this.upZ)*g,p=-y*d+x*f,h=y*g-b*f,b=(y=g*h-d*p,-f*h+d*m),x=f*p-g*m;return 0!==(0!==(D=Math.sqrt(m*m+p*p+h*h))&&(m/=D,p/=D,h/=D),D=Math.sqrt(y*y+b*b+x*x))&&(y/=D,b/=D,x/=D),{x:[m,p,h],y:[y,b,x],z:[f,g,d]}}},{key:"_orbit",value:function(f,D,x){var p=this.eyeX-this.centerX,h=this.eyeY-this.centerY,y=this.eyeZ-this.centerZ,m=Math.hypot(p,h,y),b=(p=new M.default.Vector(p,h,y).normalize(),h=new M.default.Vector(this.upX,this.upY,this.upZ).normalize(),y=M.default.Vector.cross(h,p).normalize(),M.default.Vector.cross(y,h));(m=(m*=Math.pow(10,x))<this.cameraNear?this.cameraNear:m)>this.cameraFar&&(m=this.cameraFar),x=Math.acos(Math.max(-1,Math.min(1,M.default.Vector.dot(p,h))))+D,D=f,(x<=0||x>=Math.PI)&&(this.upX*=-1,this.upY*=-1,this.upZ*=-1),h.mult(Math.cos(x)),b.mult(Math.cos(D)*Math.sin(x)),y.mult(Math.sin(D)*Math.sin(x)),p.set(h).add(b).add(y),this.eyeX=m*p.x+this.centerX,this.eyeY=m*p.y+this.centerY,this.eyeZ=m*p.z+this.centerZ,this.camera(this.eyeX,this.eyeY,this.eyeZ,this.centerX,this.centerY,this.centerZ,this.upX,this.upY,this.upZ)}},{key:"_orbitFree",value:function(x,D,U){var p=this.eyeX-this.centerX,h=this.eyeY-this.centerY,y=this.eyeZ-this.centerZ,m=Math.hypot(p,h,y),b=(p=new M.default.Vector(p,h,y).normalize(),h=new M.default.Vector(this.upX,this.upY,this.upZ),y=M.default.Vector.cross(h,p).normalize(),M.default.Vector.cross(p,y)),R=Math.atan2(D,x),N=(b.mult(Math.sin(R)),y.mult(Math.cos(R)).add(b),R=Math.sqrt(x*x+D*D),b=M.default.Vector.cross(p,y),(m=(m*=Math.pow(10,U))<this.cameraNear?this.cameraNear:m)>this.cameraFar&&(m=this.cameraFar),x=Math.cos(R),D=Math.sin(R),(U=h.dot(p))*x+(R=h.dot(y))*D);U=-U*D+R*x,R=h.dot(b),h.x=N*p.x+U*y.x+R*b.x,h.y=N*p.y+U*y.y+R*b.y,h.z=N*p.z+U*y.z+R*b.z,y.mult(-D),p.mult(x).add(y).mult(m),this.camera(p.x+this.centerX,p.y+this.centerY,p.z+this.centerZ,this.centerX,this.centerY,this.centerZ,h.x,h.y,h.z)}},{key:"_isActive",value:function(){return this===this._renderer._curCamera}}])&&E(S.prototype,T),v}(),M.default.prototype.setCamera=function(v){this._renderer._curCamera=v,this._renderer.uPMatrix.set(v.projMatrix),this._renderer.uViewMatrix.set(v.cameraMatrix)},H.default=l=M.default.Camera},{"../core/main":283,"core-js/modules/es.array.slice":169,"core-js/modules/es.math.hypot":176,"core-js/modules/es.string.sub":208}],333:[function(l,de,H){"use strict";function M(E,v){for(var S=0;S<v.length;S++){var T=v[S];T.enumerable=T.enumerable||!1,T.configurable=!0,"value"in T&&(T.writable=!0),Object.defineProperty(E,T.key,T)}}l("core-js/modules/es.array.iterator"),l("core-js/modules/es.array.slice"),l("core-js/modules/es.math.log2"),l("core-js/modules/es.object.to-string"),l("core-js/modules/es.typed-array.float32-array"),l("core-js/modules/es.typed-array.copy-within"),l("core-js/modules/es.typed-array.every"),l("core-js/modules/es.typed-array.fill"),l("core-js/modules/es.typed-array.filter"),l("core-js/modules/es.typed-array.find"),l("core-js/modules/es.typed-array.find-index"),l("core-js/modules/es.typed-array.for-each"),l("core-js/modules/es.typed-array.includes"),l("core-js/modules/es.typed-array.index-of"),l("core-js/modules/es.typed-array.iterator"),l("core-js/modules/es.typed-array.join"),l("core-js/modules/es.typed-array.last-index-of"),l("core-js/modules/es.typed-array.map"),l("core-js/modules/es.typed-array.reduce"),l("core-js/modules/es.typed-array.reduce-right"),l("core-js/modules/es.typed-array.reverse"),l("core-js/modules/es.typed-array.set"),l("core-js/modules/es.typed-array.slice"),l("core-js/modules/es.typed-array.some"),l("core-js/modules/es.typed-array.sort"),l("core-js/modules/es.typed-array.subarray"),l("core-js/modules/es.typed-array.to-locale-string"),l("core-js/modules/es.typed-array.to-string"),l("core-js/modules/es.array.iterator"),l("core-js/modules/es.array.slice"),l("core-js/modules/es.math.log2"),l("core-js/modules/es.object.to-string"),l("core-js/modules/es.typed-array.float32-array"),l("core-js/modules/es.typed-array.copy-within"),l("core-js/modules/es.typed-array.every"),l("core-js/modules/es.typed-array.fill"),l("core-js/modules/es.typed-array.filter"),l("core-js/modules/es.typed-array.find"),l("core-js/modules/es.typed-array.find-index"),l("core-js/modules/es.typed-array.for-each"),l("core-js/modules/es.typed-array.includes"),l("core-js/modules/es.typed-array.index-of"),l("core-js/modules/es.typed-array.iterator"),l("core-js/modules/es.typed-array.join"),l("core-js/modules/es.typed-array.last-index-of"),l("core-js/modules/es.typed-array.map"),l("core-js/modules/es.typed-array.reduce"),l("core-js/modules/es.typed-array.reduce-right"),l("core-js/modules/es.typed-array.reverse"),l("core-js/modules/es.typed-array.set"),l("core-js/modules/es.typed-array.slice"),l("core-js/modules/es.typed-array.some"),l("core-js/modules/es.typed-array.sort"),l("core-js/modules/es.typed-array.subarray"),l("core-js/modules/es.typed-array.to-locale-string"),l("core-js/modules/es.typed-array.to-string"),Object.defineProperty(H,"__esModule",{value:!0}),H.default=void 0,(l=(l=l("../core/main"))&&l.__esModule?l:{default:l}).default.DataArray=function(){function E(){var C=0<arguments.length&&void 0!==arguments[0]?arguments[0]:128;if(!(this instanceof E))throw new TypeError("Cannot call a class as a function");this.length=0,this.data=new Float32Array(C),this.initialLength=C}var v,S;return v=E,(S=[{key:"dataArray",value:function(){return this.subArray(0,this.length)}},{key:"clear",value:function(){this.length=0}},{key:"rescale",value:function(){var C;this.length<this.data.length/2&&(C=1<<Math.ceil(Math.log2(this.length)),(C=new Float32Array(C)).set(this.data.subarray(0,this.length),0),this.data=C)}},{key:"reset",value:function(){this.clear(),this.data=new Float32Array(this.initialLength)}},{key:"push",value:function(){for(var C=arguments.length,f=new Array(C),g=0;g<C;g++)f[g]=arguments[g];this.ensureLength(this.length+f.length),this.data.set(f,this.length),this.length+=f.length}},{key:"slice",value:function(C,f){return this.data.slice(C,Math.min(f,this.length))}},{key:"subArray",value:function(C,f){return this.data.subarray(C,Math.min(f,this.length))}},{key:"ensureLength",value:function(C){for(;this.data.length<C;){var f=new Float32Array(2*this.data.length);f.set(this.data,0),this.data=f}}}])&&M(v.prototype,S),E}(),H.default=l=l.default.DataArray},{"../core/main":283,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.slice":169,"core-js/modules/es.math.log2":177,"core-js/modules/es.object.to-string":190,"core-js/modules/es.typed-array.copy-within":213,"core-js/modules/es.typed-array.every":214,"core-js/modules/es.typed-array.fill":215,"core-js/modules/es.typed-array.filter":216,"core-js/modules/es.typed-array.find":218,"core-js/modules/es.typed-array.find-index":217,"core-js/modules/es.typed-array.float32-array":219,"core-js/modules/es.typed-array.for-each":221,"core-js/modules/es.typed-array.includes":222,"core-js/modules/es.typed-array.index-of":223,"core-js/modules/es.typed-array.iterator":226,"core-js/modules/es.typed-array.join":227,"core-js/modules/es.typed-array.last-index-of":228,"core-js/modules/es.typed-array.map":229,"core-js/modules/es.typed-array.reduce":231,"core-js/modules/es.typed-array.reduce-right":230,"core-js/modules/es.typed-array.reverse":232,"core-js/modules/es.typed-array.set":233,"core-js/modules/es.typed-array.slice":234,"core-js/modules/es.typed-array.some":235,"core-js/modules/es.typed-array.sort":236,"core-js/modules/es.typed-array.subarray":237,"core-js/modules/es.typed-array.to-locale-string":238,"core-js/modules/es.typed-array.to-string":239}],334:[function(L,de,H){"use strict";function M(z){return(M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(F){return typeof F}:function(F){return F&&"function"==typeof Symbol&&F.constructor===Symbol&&F!==Symbol.prototype?"symbol":typeof F})(z)}function E(z){return(E="function"==typeof Symbol&&"symbol"===M(Symbol.iterator)?function(F){return M(F)}:function(F){return F&&"function"==typeof Symbol&&F.constructor===Symbol&&F!==Symbol.prototype?"symbol":M(F)})(z)}L("core-js/modules/es.symbol"),L("core-js/modules/es.symbol.description"),L("core-js/modules/es.symbol.iterator"),L("core-js/modules/es.array.fill"),L("core-js/modules/es.array.includes"),L("core-js/modules/es.array.iterator"),L("core-js/modules/es.object.get-own-property-descriptor"),L("core-js/modules/es.object.get-prototype-of"),L("core-js/modules/es.object.to-string"),L("core-js/modules/es.reflect.construct"),L("core-js/modules/es.reflect.get"),L("core-js/modules/es.regexp.to-string"),L("core-js/modules/es.string.includes"),L("core-js/modules/es.string.iterator"),L("core-js/modules/es.typed-array.float32-array"),L("core-js/modules/es.typed-array.uint8-array"),L("core-js/modules/es.typed-array.uint8-clamped-array"),L("core-js/modules/es.typed-array.copy-within"),L("core-js/modules/es.typed-array.every"),L("core-js/modules/es.typed-array.fill"),L("core-js/modules/es.typed-array.filter"),L("core-js/modules/es.typed-array.find"),L("core-js/modules/es.typed-array.find-index"),L("core-js/modules/es.typed-array.for-each"),L("core-js/modules/es.typed-array.includes"),L("core-js/modules/es.typed-array.index-of"),L("core-js/modules/es.typed-array.iterator"),L("core-js/modules/es.typed-array.join"),L("core-js/modules/es.typed-array.last-index-of"),L("core-js/modules/es.typed-array.map"),L("core-js/modules/es.typed-array.reduce"),L("core-js/modules/es.typed-array.reduce-right"),L("core-js/modules/es.typed-array.reverse"),L("core-js/modules/es.typed-array.set"),L("core-js/modules/es.typed-array.slice"),L("core-js/modules/es.typed-array.some"),L("core-js/modules/es.typed-array.sort"),L("core-js/modules/es.typed-array.subarray"),L("core-js/modules/es.typed-array.to-locale-string"),L("core-js/modules/es.typed-array.to-string"),L("core-js/modules/es.weak-map"),L("core-js/modules/web.dom-collections.iterator"),L("core-js/modules/es.array.fill"),L("core-js/modules/es.array.includes"),L("core-js/modules/es.array.iterator"),L("core-js/modules/es.object.get-prototype-of"),L("core-js/modules/es.object.to-string"),L("core-js/modules/es.string.includes"),L("core-js/modules/es.typed-array.float32-array"),L("core-js/modules/es.typed-array.uint8-array"),L("core-js/modules/es.typed-array.uint8-clamped-array"),L("core-js/modules/es.typed-array.copy-within"),L("core-js/modules/es.typed-array.every"),L("core-js/modules/es.typed-array.fill"),L("core-js/modules/es.typed-array.filter"),L("core-js/modules/es.typed-array.find"),L("core-js/modules/es.typed-array.find-index"),L("core-js/modules/es.typed-array.for-each"),L("core-js/modules/es.typed-array.includes"),L("core-js/modules/es.typed-array.index-of"),L("core-js/modules/es.typed-array.iterator"),L("core-js/modules/es.typed-array.join"),L("core-js/modules/es.typed-array.last-index-of"),L("core-js/modules/es.typed-array.map"),L("core-js/modules/es.typed-array.reduce"),L("core-js/modules/es.typed-array.reduce-right"),L("core-js/modules/es.typed-array.reverse"),L("core-js/modules/es.typed-array.set"),L("core-js/modules/es.typed-array.slice"),L("core-js/modules/es.typed-array.some"),L("core-js/modules/es.typed-array.sort"),L("core-js/modules/es.typed-array.subarray"),L("core-js/modules/es.typed-array.to-locale-string"),L("core-js/modules/es.typed-array.to-string"),Object.defineProperty(H,"__esModule",{value:!0}),H.default=void 0;var v=(R=L("../core/main"))&&R.__esModule?R:{default:R},S=function(z){if(z&&z.__esModule)return z;if(null===z||"object"!==E(z)&&"function"!=typeof z)return{default:z};var F=f();if(F&&F.has(z))return F.get(z);var q,k={},Z=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(q in z){var X;Object.prototype.hasOwnProperty.call(z,q)&&((X=Z?Object.getOwnPropertyDescriptor(z,q):null)&&(X.get||X.set)?Object.defineProperty(k,q,X):k[q]=z[q])}return k.default=z,F&&F.set(z,k),k}(L("../core/constants")),T=L("./p5.Texture"),C=L("./p5.RendererGL");function f(){var z;return"function"!=typeof WeakMap?null:(f=function(){return z},z=new WeakMap)}function g(z,F){return function(q){if(Array.isArray(q))return q}(z)||function(q,k){if(Symbol.iterator in Object(q)||"[object Arguments]"===Object.prototype.toString.call(q)){var Z=[],X=!0,W=!1,oe=void 0;try{for(var ie,re=q[Symbol.iterator]();!(X=(ie=re.next()).done)&&(Z.push(ie.value),!k||Z.length!==k);X=!0);}catch(le){W=!0,oe=le}finally{try{X||null==re.return||re.return()}finally{if(W)throw oe}}return Z}}(z,F)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function d(z,F,q){return F in z?Object.defineProperty(z,F,{value:q,enumerable:!0,configurable:!0,writable:!0}):z[F]=q,z}function m(z,F){if(!(z instanceof F))throw new TypeError("Cannot call a class as a function")}function p(z,F){for(var q=0;q<F.length;q++){var k=F[q];k.enumerable=k.enumerable||!1,k.configurable=!0,"value"in k&&(k.writable=!0),Object.defineProperty(z,k.key,k)}}function h(z,F,q){F&&p(z.prototype,F),q&&p(z,q)}function y(z,F,q){return(y=typeof Reflect<"u"&&Reflect.get?Reflect.get:function(W,Z,X){if(W=function(oe,ie){for(;!Object.prototype.hasOwnProperty.call(oe,ie)&&null!==(oe=D(oe)););return oe}(W,Z))return(W=Object.getOwnPropertyDescriptor(W,Z)).get?W.get.call(X):W.value})(z,F,q||z)}function b(z,F){return(b=Object.setPrototypeOf||function(q,k){return q.__proto__=k,q})(z,F)}function D(z){return(D=Object.setPrototypeOf?Object.getPrototypeOf:function(F){return F.__proto__||Object.getPrototypeOf(F)})(z)}var N=function(z){var F=k;if("function"!=typeof z&&null!==z)throw new TypeError("Super expression must either be null or a function");F.prototype=Object.create(z&&z.prototype,{constructor:{value:F,writable:!0,configurable:!0}}),z&&b(F,z);var q=function x(z){return function(){var F,q=D(z);if(F=function(){if(typeof Reflect<"u"&&Reflect.construct&&!Reflect.construct.sham){if("function"==typeof Proxy)return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch{}}}()?(F=D(this).constructor,Reflect.construct(q,arguments,F)):q.apply(this,arguments),q=this,!F||"object"!==E(F)&&"function"!=typeof F){if(void 0!==q)return q;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return F}}(k);function k(Z){var X;return m(this,k),(X=q.call(this,Z.target._renderer)).fbo=Z,X.yScale=-1,X}return h(k,[{key:"_computeCameraDefaultSettings",value:function(){y(D(k.prototype),"_computeCameraDefaultSettings",this).call(this),this.defaultAspectRatio=this.fbo.width/this.fbo.height,this.defaultCameraFOV=2*Math.atan(this.fbo.height/2/this.defaultEyeZ)}}]),k}(v.default.Camera),U=(v.default.FramebufferCamera=N,function(){function z(F,q){m(this,z),this.framebuffer=F,this.property=q}return h(z,[{key:"rawTexture",value:function(){return this.framebuffer[this.property]}},{key:"width",get:function(){return this.framebuffer.width*this.framebuffer.density}},{key:"height",get:function(){return this.framebuffer.height*this.framebuffer.density}}]),z}()),R=(v.default.FramebufferTexture=U,function(){function z(F){var q=this,k=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},Z=(m(this,z),this.target=F,this.target._renderer.framebuffers.add(this),this._isClipApplied=!1,this.pixels=[],this.format=k.format||S.UNSIGNED_BYTE,this.channels=k.channels||(F._renderer._pInst._glAttributes.alpha?S.RGBA:S.RGB),this.useDepth=void 0===k.depth||k.depth,this.depthFormat=k.depthFormat||S.FLOAT,this.textureFiltering=k.textureFiltering||S.LINEAR,this.antialiasSamples=void 0===k.antialias?F._renderer._pInst._glAttributes.antialias?2:0:"number"==typeof k.antialias?k.antialias:k.antialias?2:0,this.antialias=0<this.antialiasSamples,this.antialias&&F.webglVersion!==S.WEBGL2&&(console.warn("Antialiasing is unsupported in a WebGL 1 context"),this.antialias=!1),this.density=k.density||F.pixelDensity(),F._renderer.GL);if(this.gl=Z,k.width&&k.height?(X=F._renderer._adjustDimensions(k.width,k.height),this.width=X.adjustedWidth,this.height=X.adjustedHeight,this._autoSized=!1):(void 0===k.width!=(void 0===k.height)&&console.warn("Please supply both width and height for a framebuffer to give it a size. Only one was given, so the framebuffer will match the size of its canvas."),this.width=F.width,this.height=F.height,this._autoSized=!0),this._checkIfFormatsAvailable(),k.stencil&&!this.useDepth&&console.warn("A stencil buffer can only be used if also using depth. Since the framebuffer has no depth buffer, the stencil buffer will be ignored."),this.useStencil=this.useDepth&&(void 0===k.stencil||k.stencil),this.framebuffer=Z.createFramebuffer(),!this.framebuffer)throw new Error("Unable to create a framebuffer");if(this.antialias&&(this.aaFramebuffer=Z.createFramebuffer(),!this.aaFramebuffer))throw new Error("Unable to create a framebuffer for antialiasing");this._recreateTextures();var X=this.target._renderer._curCamera;this.defaultCamera=this.createCamera(),this.filterCamera=this.createCamera(),this.target._renderer._curCamera=X,this.draw(function(){return q.target.clear()})}return h(z,[{key:"resize",value:function(F,q){this._autoSized=!1;var k=this.target._renderer._adjustDimensions(F,q);q=k.adjustedHeight,this.width=F=k.adjustedWidth,this.height=q,this._handleResize()}},{key:"pixelDensity",value:function(F){if(!F)return this.density;this._autoSized=!1,this.density=F,this._handleResize()}},{key:"autoSized",value:function(F){if(void 0===F)return this._autoSized;this._autoSized=F,this._handleResize()}},{key:"_checkIfFormatsAvailable",value:function(){var F=this.gl;(this.useDepth&&this.target.webglVersion===S.WEBGL&&!F.getExtension("WEBGL_depth_texture")&&(console.warn("Unable to create depth textures in this environment. Falling back to a framebuffer without depth."),this.useDepth=!1),this.useDepth&&this.target.webglVersion===S.WEBGL&&this.depthFormat===S.FLOAT&&(console.warn("FLOAT depth format is unavailable in WebGL 1. Defaulting to UNSIGNED_INT."),this.depthFormat=S.UNSIGNED_INT),[S.UNSIGNED_BYTE,S.FLOAT,S.HALF_FLOAT].includes(this.format)||(console.warn("Unknown Framebuffer format. Please use UNSIGNED_BYTE, FLOAT, or HALF_FLOAT. Defaulting to UNSIGNED_BYTE."),this.format=S.UNSIGNED_BYTE),this.useDepth&&![S.UNSIGNED_INT,S.FLOAT].includes(this.depthFormat)&&(console.warn("Unknown Framebuffer depth format. Please use UNSIGNED_INT or FLOAT. Defaulting to FLOAT."),this.depthFormat=S.FLOAT),F=(0,T.checkWebGLCapabilities)(this.target._renderer)).float||this.format!==S.FLOAT||(console.warn("This environment does not support FLOAT textures. Falling back to UNSIGNED_BYTE."),this.format=S.UNSIGNED_BYTE),this.useDepth&&!F.float&&this.depthFormat===S.FLOAT&&(console.warn("This environment does not support FLOAT depth textures. Falling back to UNSIGNED_INT."),this.depthFormat=S.UNSIGNED_INT),F.halfFloat||this.format!==S.HALF_FLOAT||(console.warn("This environment does not support HALF_FLOAT textures. Falling back to UNSIGNED_BYTE."),this.format=S.UNSIGNED_BYTE),this.channels===S.RGB&&[S.FLOAT,S.HALF_FLOAT].includes(this.format)&&(console.warn("FLOAT and HALF_FLOAT formats do not work cross-platform with only RGB channels. Falling back to RGBA."),this.channels=S.RGBA)}},{key:"_recreateTextures",value:function(){var F=this.gl,q=(this._updateSize(),F.getParameter(F.TEXTURE_BINDING_2D)),k=F.getParameter(F.FRAMEBUFFER_BINDING);if(!(Z=F.createTexture()))throw new Error("Unable to create color texture");F.bindTexture(F.TEXTURE_2D,Z);var X=this._glColorFormat();if(F.texImage2D(F.TEXTURE_2D,0,X.internalFormat,this.width*this.density,this.height*this.density,0,X.format,X.type,null),this.colorTexture=Z,F.bindFramebuffer(F.FRAMEBUFFER,this.framebuffer),F.framebufferTexture2D(F.FRAMEBUFFER,F.COLOR_ATTACHMENT0,F.TEXTURE_2D,Z,0),this.useDepth){var Z;if(!(Z=F.createTexture()))throw new Error("Unable to create depth texture");var W=this._glDepthFormat();F.bindTexture(F.TEXTURE_2D,Z),F.texImage2D(F.TEXTURE_2D,0,W.internalFormat,this.width*this.density,this.height*this.density,0,W.format,W.type,null),F.framebufferTexture2D(F.FRAMEBUFFER,this.useStencil?F.DEPTH_STENCIL_ATTACHMENT:F.DEPTH_ATTACHMENT,F.TEXTURE_2D,Z,0),this.depthTexture=Z}this.antialias&&(this.colorRenderbuffer=F.createRenderbuffer(),F.bindRenderbuffer(F.RENDERBUFFER,this.colorRenderbuffer),F.renderbufferStorageMultisample(F.RENDERBUFFER,Math.max(0,Math.min(this.antialiasSamples,F.getParameter(F.MAX_SAMPLES))),X.internalFormat,this.width*this.density,this.height*this.density),this.useDepth&&(W=this._glDepthFormat(),this.depthRenderbuffer=F.createRenderbuffer(),F.bindRenderbuffer(F.RENDERBUFFER,this.depthRenderbuffer),F.renderbufferStorageMultisample(F.RENDERBUFFER,Math.max(0,Math.min(this.antialiasSamples,F.getParameter(F.MAX_SAMPLES))),W.internalFormat,this.width*this.density,this.height*this.density)),F.bindFramebuffer(F.FRAMEBUFFER,this.aaFramebuffer),F.framebufferRenderbuffer(F.FRAMEBUFFER,F.COLOR_ATTACHMENT0,F.RENDERBUFFER,this.colorRenderbuffer),this.useDepth&&F.framebufferRenderbuffer(F.FRAMEBUFFER,this.useStencil?F.DEPTH_STENCIL_ATTACHMENT:F.DEPTH_ATTACHMENT,F.RENDERBUFFER,this.depthRenderbuffer)),this.useDepth&&(this.depth=new U(this,"depthTexture"),this.depthP5Texture=new v.default.Texture(this.target._renderer,this.depth,{minFilter:Z=F.NEAREST,magFilter:Z}),this.target._renderer.textures.set(this.depth,this.depthP5Texture)),this.color=new U(this,"colorTexture"),this.colorP5Texture=new v.default.Texture(this.target._renderer,this.color,{minFilter:X=this.textureFiltering===S.LINEAR?F.LINEAR:F.NEAREST,magFilter:X}),this.target._renderer.textures.set(this.color,this.colorP5Texture),F.bindTexture(F.TEXTURE_2D,q),F.bindFramebuffer(F.FRAMEBUFFER,k)}},{key:"_glColorFormat",value:function(){var F,q,k=this.gl,Z=this.format===S.FLOAT?k.FLOAT:this.format===S.HALF_FLOAT?this.target.webglVersion===S.WEBGL2?k.HALF_FLOAT:k.getExtension("OES_texture_half_float").HALF_FLOAT_OES:k.UNSIGNED_BYTE,X=this.channels===S.RGBA?k.RGBA:k.RGB;return{internalFormat:this.target.webglVersion===S.WEBGL2?(d(q={},k.FLOAT,d({},k.RGBA,k.RGBA32F)),d(q,k.HALF_FLOAT,d({},k.RGBA,k.RGBA16F)),d(q,k.UNSIGNED_BYTE,(d(F={},k.RGBA,k.RGBA8),d(F,k.RGB,k.RGB8),F)),q[Z][X]):this.format===S.HALF_FLOAT?k.RGBA:X,format:X,type:Z}}},{key:"_glDepthFormat",value:function(){var k=this.gl,F=this.useStencil?this.depthFormat===S.FLOAT?k.FLOAT_32_UNSIGNED_INT_24_8_REV:this.target.webglVersion===S.WEBGL2?k.UNSIGNED_INT_24_8:k.getExtension("WEBGL_depth_texture").UNSIGNED_INT_24_8_WEBGL:this.depthFormat===S.FLOAT?k.FLOAT:k.UNSIGNED_INT,q=this.useStencil?k.DEPTH_STENCIL:k.DEPTH_COMPONENT;return{internalFormat:k=this.useStencil?this.depthFormat===S.FLOAT?k.DEPTH32F_STENCIL8:this.target.webglVersion===S.WEBGL2?k.DEPTH24_STENCIL8:k.DEPTH_STENCIL:this.target.webglVersion===S.WEBGL2?this.depthFormat===S.FLOAT?k.DEPTH_COMPONENT32F:k.DEPTH_COMPONENT24:k.DEPTH_COMPONENT,format:q,type:F}}},{key:"_updateSize",value:function(){this._autoSized&&(this.width=this.target.width,this.height=this.target.height,this.density=this.target.pixelDensity())}},{key:"_canvasSizeChanged",value:function(){this._autoSized&&this._handleResize()}},{key:"_handleResize",value:function(){var F=this.depth,q=this.colorRenderbuffer,k=this.depthRenderbuffer,Z=(this._deleteTexture(Z=this.color),F&&this._deleteTexture(F),this.gl);q&&Z.deleteRenderbuffer(q),k&&Z.deleteRenderbuffer(k),this._recreateTextures(),this.defaultCamera._resize()}},{key:"createCamera",value:function(){var F=new N(this);return F._computeCameraDefaultSettings(),F._setDefaultCamera(),this.target._renderer._curCamera=F}},{key:"_deleteTexture",value:function(F){this.gl.deleteTexture(F.rawTexture()),this.target._renderer.textures.delete(F)}},{key:"remove",value:function(){var F=this.gl;this._deleteTexture(this.color),this.depth&&this._deleteTexture(this.depth),F.deleteFramebuffer(this.framebuffer),this.aaFramebuffer&&F.deleteFramebuffer(this.aaFramebuffer),this.depthRenderbuffer&&F.deleteRenderbuffer(this.depthRenderbuffer),this.colorRenderbuffer&&F.deleteRenderbuffer(this.colorRenderbuffer),this.target._renderer.framebuffers.delete(this)}},{key:"begin",value:function(){this.prevFramebuffer=this.target._renderer.activeFramebuffer(),this.prevFramebuffer&&this.prevFramebuffer._beforeEnd(),this.target._renderer.activeFramebuffers.push(this),this._beforeBegin(),this.target.push(),this.target.setCamera(this.defaultCamera),this.target.resetMatrix(),this.target._renderer.uViewMatrix.set(this.target._renderer._curCamera.cameraMatrix),this.target._renderer.uModelMatrix.reset(),this.target._renderer._applyStencilTestIfClipping()}},{key:"_framebufferToBind",value:function(){return this.antialias?this.aaFramebuffer:this.framebuffer}},{key:"_beforeBegin",value:function(){var F=this.gl;F.bindFramebuffer(F.FRAMEBUFFER,this._framebufferToBind()),this.target._renderer.viewport(this.width*this.density,this.height*this.density)}},{key:"_beforeEnd",value:function(){if(this.antialias){var F=this.gl,q=(F.bindFramebuffer(F.READ_FRAMEBUFFER,this.aaFramebuffer),F.bindFramebuffer(F.DRAW_FRAMEBUFFER,this.framebuffer),[[F.COLOR_BUFFER_BIT,this.colorP5Texture.glMagFilter]]);this.useDepth&&q.push([F.DEPTH_BUFFER_BIT,this.depthP5Texture.glMagFilter]);for(var k=0,Z=q;k<Z.length;k++){var W=g(Z[k],2);F.blitFramebuffer(0,0,this.width*this.density,this.height*this.density,0,0,this.width*this.density,this.height*this.density,W[0],W=W[1])}}}},{key:"end",value:function(){var F=this.gl;if(this.target.pop(),this.target._renderer.activeFramebuffers.pop()!==this)throw new Error("It looks like you've called end() while another Framebuffer is active.");this._beforeEnd(),this.prevFramebuffer?this.prevFramebuffer._beforeBegin():(F.bindFramebuffer(F.FRAMEBUFFER,null),this.target._renderer.viewport(this.target._renderer._origViewport.width,this.target._renderer._origViewport.height)),this.target._renderer._applyStencilTestIfClipping()}},{key:"draw",value:function(F){this.begin(),F(),this.end()}},{key:"loadPixels",value:function(){var F=this.gl,q=this.target._renderer.activeFramebuffer(),k=(F.bindFramebuffer(F.FRAMEBUFFER,this.framebuffer),this._glColorFormat());this.pixels=(0,C.readPixelsWebGL)(this.pixels,F,this.framebuffer,0,0,this.width*this.density,this.height*this.density,k.format,k.type),F.bindFramebuffer(F.FRAMEBUFFER,q?q._framebufferToBind():null)}},{key:"get",value:function(F,q,k,Z){v.default._validateParameters("p5.Framebuffer.get",arguments);var X=this._glColorFormat();if(void 0===F&&void 0===q)q=F=0,k=this.width,Z=this.height;else if(void 0===k&&void 0===Z)return(F<0||q<0||F>=this.width||q>=this.height)&&(console.warn("The x and y values passed to p5.Framebuffer.get are outside of its range and will be clamped."),F=this.target.constrain(F,0,this.width-1),q=this.target.constrain(q,0,this.height-1)),(0,C.readPixelWebGL)(this.gl,this.framebuffer,F*this.density,q*this.density,X.format,X.type);F=this.target.constrain(F,0,this.width-1),q=this.target.constrain(q,0,this.height-1),k=this.target.constrain(k,1,this.width-F),Z=this.target.constrain(Z,1,this.height-q);for(var W=(0,C.readPixelsWebGL)(void 0,this.gl,this.framebuffer,F*this.density,q*this.density,k*this.density,Z*this.density,X.format,X.type),oe=new Uint8ClampedArray(k*Z*this.density*this.density*4),ie=(oe.fill(255),X.type===this.gl.RGB?3:4),re=0;re<Z*this.density;re++)for(var le=0;le<k*this.density;le++)for(var pe=0;pe<4;pe++){var $=4*(re*k*this.density+le)+pe;pe<ie&&(oe[$]=W[4==ie?$:(re*k*this.density+le)*ie+pe])}return(F=new v.default.Image(k*this.density,Z*this.density)).imageData=F.canvas.getContext("2d").createImageData(F.width,F.height),F.imageData.data.set(oe),F.pixels=F.imageData.data,F.updatePixels(),1!==this.density&&F.resize(k,Z),F}},{key:"updatePixels",value:function(){var F=this.gl,q=(this.colorP5Texture.bindTexture(),this._glColorFormat()),k=this.width*this.height*this.density*this.density*(k=q.format===F.RGBA?4:3),Z=q.type===F.UNSIGNED_BYTE?Uint8Array:Float32Array;if(!(this.pixels instanceof Z)||this.pixels.length!==k)throw new Error("The pixels array has not been set correctly. Please call loadPixels() before updatePixels().");F.texImage2D(F.TEXTURE_2D,0,q.internalFormat,this.width*this.density,this.height*this.density,0,q.format,q.type,this.pixels),this.colorP5Texture.unbindTexture(),Z=this.target._renderer.activeFramebuffer(),this.antialias?(this.begin(),this.target.push(),this.target.imageMode(this.target.CENTER),this.target.resetMatrix(),this.target.noStroke(),this.target.clear(),this.target.image(this,0,0),this.target.pop(),this.useDepth&&(F.clearDepth(1),F.clear(F.DEPTH_BUFFER_BIT)),this.end()):(F.bindFramebuffer(F.FRAMEBUFFER,this.framebuffer),this.useDepth&&(F.clearDepth(1),F.clear(F.DEPTH_BUFFER_BIT)),F.bindFramebuffer(F.FRAMEBUFFER,Z?Z._framebufferToBind():null))}}]),z}());L=v.default.Framebuffer=R,H.default=L},{"../core/constants":272,"../core/main":283,"./p5.RendererGL":341,"./p5.Texture":343,"core-js/modules/es.array.fill":156,"core-js/modules/es.array.includes":163,"core-js/modules/es.array.iterator":165,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.get-prototype-of":188,"core-js/modules/es.object.to-string":190,"core-js/modules/es.reflect.construct":192,"core-js/modules/es.reflect.get":193,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.string.includes":199,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.typed-array.copy-within":213,"core-js/modules/es.typed-array.every":214,"core-js/modules/es.typed-array.fill":215,"core-js/modules/es.typed-array.filter":216,"core-js/modules/es.typed-array.find":218,"core-js/modules/es.typed-array.find-index":217,"core-js/modules/es.typed-array.float32-array":219,"core-js/modules/es.typed-array.for-each":221,"core-js/modules/es.typed-array.includes":222,"core-js/modules/es.typed-array.index-of":223,"core-js/modules/es.typed-array.iterator":226,"core-js/modules/es.typed-array.join":227,"core-js/modules/es.typed-array.last-index-of":228,"core-js/modules/es.typed-array.map":229,"core-js/modules/es.typed-array.reduce":231,"core-js/modules/es.typed-array.reduce-right":230,"core-js/modules/es.typed-array.reverse":232,"core-js/modules/es.typed-array.set":233,"core-js/modules/es.typed-array.slice":234,"core-js/modules/es.typed-array.some":235,"core-js/modules/es.typed-array.sort":236,"core-js/modules/es.typed-array.subarray":237,"core-js/modules/es.typed-array.to-locale-string":238,"core-js/modules/es.typed-array.to-string":239,"core-js/modules/es.typed-array.uint8-array":242,"core-js/modules/es.typed-array.uint8-clamped-array":243,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246}],335:[function(l,de,H){"use strict";function M(m){return(M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(p){return typeof p}:function(p){return p&&"function"==typeof Symbol&&p.constructor===Symbol&&p!==Symbol.prototype?"symbol":typeof p})(m)}function E(m){return(E="function"==typeof Symbol&&"symbol"===M(Symbol.iterator)?function(p){return M(p)}:function(p){return p&&"function"==typeof Symbol&&p.constructor===Symbol&&p!==Symbol.prototype?"symbol":M(p)})(m)}l("core-js/modules/es.symbol"),l("core-js/modules/es.symbol.description"),l("core-js/modules/es.symbol.iterator"),l("core-js/modules/es.array.concat"),l("core-js/modules/es.array.flat"),l("core-js/modules/es.array.for-each"),l("core-js/modules/es.array.from"),l("core-js/modules/es.array.iterator"),l("core-js/modules/es.array.last-index-of"),l("core-js/modules/es.array.map"),l("core-js/modules/es.array.slice"),l("core-js/modules/es.array.unscopables.flat"),l("core-js/modules/es.array-buffer.constructor"),l("core-js/modules/es.map"),l("core-js/modules/es.number.constructor"),l("core-js/modules/es.object.entries"),l("core-js/modules/es.object.get-own-property-descriptor"),l("core-js/modules/es.object.to-string"),l("core-js/modules/es.regexp.to-string"),l("core-js/modules/es.set"),l("core-js/modules/es.string.iterator"),l("core-js/modules/es.string.sub"),l("core-js/modules/es.weak-map"),l("core-js/modules/web.dom-collections.for-each"),l("core-js/modules/web.dom-collections.iterator"),l("core-js/modules/es.symbol"),l("core-js/modules/es.symbol.description"),l("core-js/modules/es.symbol.iterator"),l("core-js/modules/es.array.concat"),l("core-js/modules/es.array.flat"),l("core-js/modules/es.array.for-each"),l("core-js/modules/es.array.iterator"),l("core-js/modules/es.array.last-index-of"),l("core-js/modules/es.array.map"),l("core-js/modules/es.array.slice"),l("core-js/modules/es.array.unscopables.flat"),l("core-js/modules/es.array-buffer.constructor"),l("core-js/modules/es.map"),l("core-js/modules/es.number.constructor"),l("core-js/modules/es.object.entries"),l("core-js/modules/es.object.to-string"),l("core-js/modules/es.set"),l("core-js/modules/es.string.iterator"),l("core-js/modules/es.string.sub"),l("core-js/modules/web.dom-collections.for-each"),l("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(H,"__esModule",{value:!0}),H.default=void 0;var v=(d=l("../core/main"))&&d.__esModule?d:{default:d},S=function(m){if(m&&m.__esModule)return m;if(null===m||"object"!==E(m)&&"function"!=typeof m)return{default:m};var p=T();if(p&&p.has(m))return p.get(m);var h,y={},b=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(h in m){var x;Object.prototype.hasOwnProperty.call(m,h)&&((x=b?Object.getOwnPropertyDescriptor(m,h):null)&&(x.get||x.set)?Object.defineProperty(y,h,x):y[h]=m[h])}return y.default=m,p&&p.set(m,y),y}(l("../core/constants"));function T(){var m;return"function"!=typeof WeakMap?null:(T=function(){return m},m=new WeakMap)}function C(m){return function(p){if(Array.isArray(p)){for(var h=0,y=new Array(p.length);h<p.length;h++)y[h]=p[h];return y}}(m)||function(p){if(Symbol.iterator in Object(p)||"[object Arguments]"===Object.prototype.toString.call(p))return Array.from(p)}(m)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function f(m,p){return function(h){if(Array.isArray(h))return h}(m)||function(h,y){if(Symbol.iterator in Object(h)||"[object Arguments]"===Object.prototype.toString.call(h)){var b=[],x=!0,D=!1,N=void 0;try{for(var U,R=h[Symbol.iterator]();!(x=(U=R.next()).done)&&(b.push(U.value),!y||b.length!==y);x=!0);}catch(L){D=!0,N=L}finally{try{x||null==R.return||R.return()}finally{if(D)throw N}}return b}}(m,p)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function g(m,p){for(var h=0;h<p.length;h++){var y=p[h];y.enumerable=y.enumerable||!1,y.configurable=!0,"value"in y&&(y.writable=!0),Object.defineProperty(m,y.key,y)}}v.default.Geometry=function(){function m(b,x,D){if(!(this instanceof m))throw new TypeError("Cannot call a class as a function");this.vertices=[],this.boundingBoxCache=null,this.lineVertices=new v.default.DataArray,this.lineTangentsIn=new v.default.DataArray,this.lineTangentsOut=new v.default.DataArray,this.lineSides=new v.default.DataArray,this.vertexNormals=[],this.faces=[],this.uvs=[],this.edges=[],this.vertexColors=[],this.vertexStrokeColors=[],this.lineVertexColors=new v.default.DataArray,this.detailX=void 0!==b?b:1,this.detailY=void 0!==x?x:1,this.dirtyFlags={},this._hasFillTransparency=void 0,this._hasStrokeTransparency=void 0,D instanceof Function&&D.call(this)}var p,h;return p=m,(h=[{key:"calculateBoundingBox",value:function(){if(!this.boundingBoxCache){for(var b=new v.default.Vector(Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE),x=new v.default.Vector(Number.MIN_VALUE,Number.MIN_VALUE,Number.MIN_VALUE),D=0;D<this.vertices.length;D++){var N=this.vertices[D];b.x=Math.min(b.x,N.x),b.y=Math.min(b.y,N.y),b.z=Math.min(b.z,N.z),x.x=Math.max(x.x,N.x),x.y=Math.max(x.y,N.y),x.z=Math.max(x.z,N.z)}var U=new v.default.Vector(x.x-b.x,x.y-b.y,x.z-b.z),R=new v.default.Vector((b.x+x.x)/2,(b.y+x.y)/2,(b.z+x.z)/2);this.boundingBoxCache={min:b,max:x,size:U,offset:R}}return this.boundingBoxCache}},{key:"reset",value:function(){this._hasFillTransparency=void 0,this._hasStrokeTransparency=void 0,this.lineVertices.clear(),this.lineTangentsIn.clear(),this.lineTangentsOut.clear(),this.lineSides.clear(),this.vertices.length=0,this.edges.length=0,this.vertexColors.length=0,this.vertexStrokeColors.length=0,this.lineVertexColors.clear(),this.vertexNormals.length=0,this.uvs.length=0,this.dirtyFlags={}}},{key:"hasFillTransparency",value:function(){if(void 0===this._hasFillTransparency){this._hasFillTransparency=!1;for(var b=0;b<this.vertexColors.length;b+=4)if(this.vertexColors[b+3]<1){this._hasFillTransparency=!0;break}}return this._hasFillTransparency}},{key:"hasStrokeTransparency",value:function(){if(void 0===this._hasStrokeTransparency){this._hasStrokeTransparency=!1;for(var b=0;b<this.lineVertexColors.length;b+=4)if(this.lineVertexColors[b+3]<1){this._hasStrokeTransparency=!0;break}}return this._hasStrokeTransparency}},{key:"clearColors",value:function(){return this.vertexColors=[],this}},{key:"saveObj",value:function(){var b=this,x=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"model.obj",D="";if(this.vertices.forEach(function(R){D+="v ".concat(R.x," ").concat(R.y," ").concat(R.z,"\n")}),this.uvs&&0<this.uvs.length)for(var N=0;N<this.uvs.length;N+=2)D+="vt ".concat(this.uvs[N]," ").concat(this.uvs[N+1],"\n");this.vertexNormals&&0<this.vertexNormals.length&&this.vertexNormals.forEach(function(R){D+="vn ".concat(R.x," ").concat(R.y," ").concat(R.z,"\n")}),this.faces.forEach(function(R){var L="f";R.forEach(function(z){L=L+" "+(z+1),(0<b.vertexNormals.length||0<b.uvs.length)&&(L+="/",0<b.uvs.length&&(L+=z+1),L+="/",0<b.vertexNormals.length&&(L+=z+1))}),D+=L+"\n"});var U=new Blob([D],{type:"text/plain"});v.default.prototype.downloadFile(U,x,"obj")}},{key:"saveStl",value:function(){var b=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"model.stl",x=void 0!==(x=(1<arguments.length&&void 0!==arguments[1]?arguments[1]:{}).binary)&&x,D=b.substring(0,b.lastIndexOf(".")),N=[],U=!0,R=!1,L=void 0;try{for(var z,F=this.faces[Symbol.iterator]();!(U=(z=F.next()).done);U=!0){var q=z.value,k=v.default.Vector.sub(this.vertices[q[1]],this.vertices[q[0]]),Z=v.default.Vector.sub(this.vertices[q[2]],this.vertices[q[0]]);N.push(new v.default.Vector(k.y*Z.z-k.z*Z.y,k.z*Z.x-k.x*Z.z,k.x*Z.y-k.y*Z.x).normalize())}}catch(et){R=!0,L=et}finally{try{U||null==F.return||F.return()}finally{if(R)throw L}}if(x){var ie,re=80;R=2*this.faces.length+3*this.faces.length*4*4+80+4,L=new ArrayBuffer(R),(ie=new DataView(L)).setUint32(re,this.faces.length,!0),re+=4;for(var le=0,pe=Object.entries(this.faces);le<pe.length;le++){var P=(Ae=f(pe[le],2))[0],Ae=Ae[1],$=(ie.setFloat32(re,(P=N[P]).x,!0),ie.setFloat32(re+=4,P.y,!0),ie.setFloat32(re+=4,P.z,!0),re+=4,!0),K=void(P=!1);try{for(var te,fe=Ae[Symbol.iterator]();!($=(te=fe.next()).done);$=!0){var Te=this.vertices[te.value];ie.setFloat32(re,Te.x,!0),ie.setFloat32(re+=4,Te.y,!0),ie.setFloat32(re+=4,Te.z,!0),re+=4}}catch(ot){P=!0,K=ot}finally{try{$||null==fe.return||fe.return()}finally{if(P)throw K}}ie.setUint16(re,0,!0),re+=2}}else{ie="solid "+D+"\n";for(var Ie=0,we=Object.entries(this.faces);Ie<we.length;Ie++){var be=(Pe=f(we[Ie],2))[0],Pe=Pe[1],je=(ie=ie+" facet norm "+(be=N[be]).x+" "+be.y+" "+be.z+"\n  outer loop\n",!0),Oe=void(be=!1);try{for(var Ge,Ke=Pe[Symbol.iterator]();!(je=(Ge=Ke.next()).done);je=!0){var qe=this.vertices[Ge.value];ie+="   vertex "+qe.x+" "+qe.y+" "+qe.z+"\n"}}catch(et){be=!0,Oe=et}finally{try{je||null==Ke.return||Ke.return()}finally{if(be)throw Oe}}ie+="  endloop\n endfacet\n"}ie+="endsolid "+D+"\n"}x=new Blob([ie],{type:"text/plain"}),v.default.prototype.downloadFile(x,b,"stl")}},{key:"flipU",value:function(){this.uvs=this.uvs.flat().map(function(b,x){return x%2==0?1-b:b})}},{key:"flipV",value:function(){this.uvs=this.uvs.flat().map(function(b,x){return x%2==0?b:1-b})}},{key:"computeFaces",value:function(){this.faces.length=0;for(var b,x,D,N=this.detailX+1,U=0;U<this.detailY;U++)for(var R=0;R<this.detailX;R++)x=(U+1)*N+R+1,this.faces.push([U*N+R,b=U*N+R+1,D=(U+1)*N+R]),this.faces.push([D,b,x]);return this}},{key:"_getFaceNormal",value:function(x){var D=this.vertices[(x=this.faces[x])[0]],U=this.vertices[x[1]],N=(x=this.vertices[x[2]],U=v.default.Vector.sub(U,D),x=v.default.Vector.sub(x,D),D=v.default.Vector.cross(U,x),v.default.Vector.mag(D));return 0==(U=N/(v.default.Vector.mag(U)*v.default.Vector.mag(x)))||isNaN(U)?(console.warn("p5.Geometry.prototype._getFaceNormal:","face has colinear sides or a repeated vertex"),D):(1<U&&(U=1),D.mult(Math.asin(U)/N))}},{key:"computeNormals",value:function(){var b,x=this,N=(1<arguments.length&&void 0!==arguments[1]?arguments[1]:{}).roundToPrecision,U=this.vertexNormals,R=this.vertices,L=this.faces;if((0<arguments.length&&void 0!==arguments[0]?arguments[0]:S.FLAT)===S.SMOOTH){for(var z={},F=[],q=Math.pow(10,void 0===N?3:N),k=function(ie){return Math.round(ie*q)/q},Z=function(ie){return"".concat(k(ie.x),",").concat(k(ie.y),",").concat(k(ie.z))},X=0;X<R.length;X++){var W=R[X],oe=Z(W);void 0===z[oe]&&(z[oe]=F.length,F.push(W))}L.forEach(function(ie){for(var re=0;re<3;++re){var le=Z(le=R[le=ie[re]]);ie[re]=z[le]}}),this.edges.forEach(function(ie){for(var re=0;re<2;++re){var le=Z(le=R[le=ie[re]]);ie[re]=z[le]}}),this.vertices=R=F}for(b=U.length=0;b<R.length;++b)U.push(new v.default.Vector);for(L.forEach(function(ie,re){for(var le=x._getFaceNormal(re),pe=0;pe<3;++pe)U[ie[pe]].add(le)}),b=0;b<R.length;++b)U[b].normalize();return this}},{key:"averageNormals",value:function(){for(var b=0;b<=this.detailY;b++){var x=this.detailX+1,D=v.default.Vector.add(this.vertexNormals[b*x],this.vertexNormals[b*x+this.detailX]);D=v.default.Vector.div(D,2),this.vertexNormals[b*x]=D,this.vertexNormals[b*x+this.detailX]=D}return this}},{key:"averagePoleNormals",value:function(){for(var b=new v.default.Vector(0,0,0),x=0;x<this.detailX;x++)b.add(this.vertexNormals[x]);b=v.default.Vector.div(b,this.detailX);for(var D=0;D<this.detailX;D++)this.vertexNormals[D]=b;b=new v.default.Vector(0,0,0);for(var N=this.vertices.length-1;N>this.vertices.length-1-this.detailX;N--)b.add(this.vertexNormals[N]);b=v.default.Vector.div(b,this.detailX);for(var U=this.vertices.length-1;U>this.vertices.length-1-this.detailX;U--)this.vertexNormals[U]=b;return this}},{key:"_makeTriangleEdges",value:function(){for(var b=this.edges.length=0;b<this.faces.length;b++)this.edges.push([this.faces[b][0],this.faces[b][1]]),this.edges.push([this.faces[b][1],this.faces[b][2]]),this.edges.push([this.faces[b][2],this.faces[b][0]]);return this}},{key:"_edgesToVertices",value:function(){this.lineVertices.clear(),this.lineTangentsIn.clear(),this.lineTangentsOut.clear(),this.lineSides.clear();for(var b,x=new Map,D=new Set,N=0;N<this.edges.length;N++){var U,R=this.edges[N-1],L=this.edges[N],z=this.vertices[L[0]],F=this.vertices[L[1]],q=0<this.vertexStrokeColors.length&&R?this.vertexStrokeColors.slice(4*R[1],4*(R[1]+1)):[0,0,0,0],k=0<this.vertexStrokeColors.length?this.vertexStrokeColors.slice(4*L[0],4*(L[0]+1)):[0,0,0,0],Z=0<this.vertexStrokeColors.length?this.vertexStrokeColors.slice(4*L[1],4*(L[1]+1)):[0,0,0,0],X=F.copy().sub(z).normalize(),W=0<X.magSq();W&&this._addSegment(z,F,k,Z,X),0<N&&R[1]===L[0]?D.has(L[0])||(D.add(L[0]),x.delete(L[0]),b&&W&&X.dot(b)<1-1e-8&&this._addJoin(z,b,X,k)):(W&&!D.has(L[0])&&((U=x.get(L[0]))?(this._addJoin(z,U.dir,X,k),x.delete(L[0]),D.add(L[0])):x.set(L[0],{point:z,dir:X.copy().mult(-1),color:k})),b&&!D.has(R[1])&&((U=x.get(R[1]))?(this._addJoin(this.vertices[R[1]],b,U.dir.copy().mult(-1),q),x.delete(R[1]),D.add(R[1])):x.set(R[1],{point:this.vertices[R[1]],dir:b,color:q}),b=void 0)),N!==this.edges.length-1||D.has(L[1])||((z=x.get(L[1]))?(this._addJoin(F,X,z.dir.copy().mult(-1),Z),x.delete(L[1]),D.add(L[1])):x.set(L[1],{point:F,dir:X,color:Z})),W&&(b=X)}var oe=!0,ie=!1,re=void 0;try{for(var le,pe=x.values()[Symbol.iterator]();!(oe=(le=pe.next()).done);oe=!0){var Ae=le.value;this._addCap(Ae.point,Ae.dir,Ae.color)}}catch(te){ie=!0,re=te}finally{try{oe||null==pe.return||pe.return()}finally{if(ie)throw re}}return this}},{key:"_addSegment",value:function(R,L,D,N,U){R=R.array(),L=L.array();var z=U.array();this.lineSides.push(1,1,-1,1,-1,-1);for(var F=0,q=[this.lineTangentsIn,this.lineTangentsOut];F<q.length;F++)for(var k=q[F],Z=0;Z<6;Z++)k.push.apply(k,C(z));return(U=this.lineVertices).push.apply(U,C(R).concat(C(L),C(R),C(L),C(L),C(R))),(U=this.lineVertexColors).push.apply(U,C(D).concat(C(N),C(D),C(N),C(N),C(D))),this}},{key:"_addCap",value:function(b,x,D){for(var N,U=b.array(),R=x.array(),L=[0,0,0],z=0;z<6;z++)(N=this.lineVertices).push.apply(N,C(U)),(N=this.lineTangentsIn).push.apply(N,C(R)),(N=this.lineTangentsOut).push.apply(N,L),(N=this.lineVertexColors).push.apply(N,C(D));return this.lineSides.push(-1,2,-2,1,2,-1),this}},{key:"_addJoin",value:function(b,x,D,N){for(var U,R=b.array(),L=x.array(),z=D.array(),F=0;F<12;F++)(U=this.lineVertices).push.apply(U,C(R)),(U=this.lineTangentsIn).push.apply(U,C(L)),(U=this.lineTangentsOut).push.apply(U,C(z)),(U=this.lineVertexColors).push.apply(U,C(N));return this.lineSides.push(-1,-3,-2,-1,0,-3),this.lineSides.push(3,1,2,3,0,1),this}},{key:"normalize",value:function(){if(0<this.vertices.length){for(var b=this.vertices[0].copy(),x=this.vertices[0].copy(),D=0;D<this.vertices.length;D++)b.x=Math.max(b.x,this.vertices[D].x),x.x=Math.min(x.x,this.vertices[D].x),b.y=Math.max(b.y,this.vertices[D].y),x.y=Math.min(x.y,this.vertices[D].y),b.z=Math.max(b.z,this.vertices[D].z),x.z=Math.min(x.z,this.vertices[D].z);for(var N=v.default.Vector.lerp(b,x,.5),U=v.default.Vector.sub(b,x),R=200/Math.max(Math.max(U.x,U.y),U.z),L=0;L<this.vertices.length;L++)this.vertices[L].sub(N),this.vertices[L].mult(R)}return this}}])&&g(p.prototype,h),m}();var d=v.default.Geometry;H.default=d},{"../core/constants":272,"../core/main":283,"core-js/modules/es.array-buffer.constructor":152,"core-js/modules/es.array.concat":153,"core-js/modules/es.array.flat":160,"core-js/modules/es.array.for-each":161,"core-js/modules/es.array.from":162,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.last-index-of":167,"core-js/modules/es.array.map":168,"core-js/modules/es.array.slice":169,"core-js/modules/es.array.unscopables.flat":173,"core-js/modules/es.map":175,"core-js/modules/es.number.constructor":179,"core-js/modules/es.object.entries":184,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.to-string":190,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.set":197,"core-js/modules/es.string.iterator":200,"core-js/modules/es.string.sub":208,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.for-each":245,"core-js/modules/web.dom-collections.iterator":246}],336:[function(T,de,H){"use strict";T("core-js/modules/es.array.iterator"),T("core-js/modules/es.object.to-string"),T("core-js/modules/es.typed-array.float32-array"),T("core-js/modules/es.typed-array.copy-within"),T("core-js/modules/es.typed-array.every"),T("core-js/modules/es.typed-array.fill"),T("core-js/modules/es.typed-array.filter"),T("core-js/modules/es.typed-array.find"),T("core-js/modules/es.typed-array.find-index"),T("core-js/modules/es.typed-array.for-each"),T("core-js/modules/es.typed-array.includes"),T("core-js/modules/es.typed-array.index-of"),T("core-js/modules/es.typed-array.iterator"),T("core-js/modules/es.typed-array.join"),T("core-js/modules/es.typed-array.last-index-of"),T("core-js/modules/es.typed-array.map"),T("core-js/modules/es.typed-array.reduce"),T("core-js/modules/es.typed-array.reduce-right"),T("core-js/modules/es.typed-array.reverse"),T("core-js/modules/es.typed-array.set"),T("core-js/modules/es.typed-array.slice"),T("core-js/modules/es.typed-array.some"),T("core-js/modules/es.typed-array.sort"),T("core-js/modules/es.typed-array.subarray"),T("core-js/modules/es.typed-array.to-locale-string"),T("core-js/modules/es.typed-array.to-string"),T("core-js/modules/es.array.iterator"),T("core-js/modules/es.object.to-string"),T("core-js/modules/es.typed-array.float32-array"),T("core-js/modules/es.typed-array.copy-within"),T("core-js/modules/es.typed-array.every"),T("core-js/modules/es.typed-array.fill"),T("core-js/modules/es.typed-array.filter"),T("core-js/modules/es.typed-array.find"),T("core-js/modules/es.typed-array.find-index"),T("core-js/modules/es.typed-array.for-each"),T("core-js/modules/es.typed-array.includes"),T("core-js/modules/es.typed-array.index-of"),T("core-js/modules/es.typed-array.iterator"),T("core-js/modules/es.typed-array.join"),T("core-js/modules/es.typed-array.last-index-of"),T("core-js/modules/es.typed-array.map"),T("core-js/modules/es.typed-array.reduce"),T("core-js/modules/es.typed-array.reduce-right"),T("core-js/modules/es.typed-array.reverse"),T("core-js/modules/es.typed-array.set"),T("core-js/modules/es.typed-array.slice"),T("core-js/modules/es.typed-array.some"),T("core-js/modules/es.typed-array.sort"),T("core-js/modules/es.typed-array.subarray"),T("core-js/modules/es.typed-array.to-locale-string"),T("core-js/modules/es.typed-array.to-string"),Object.defineProperty(H,"__esModule",{value:!0}),H.default=void 0;var M=(T=T("../core/main"))&&T.__esModule?T:{default:T};function E(C,f){for(var g=0;g<f.length;g++){var d=f[g];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(C,d.key,d)}}var v=Array,S=function(C){return Array.isArray(C)};typeof Float32Array<"u"&&(v=Float32Array,S=function(C){return Array.isArray(C)||C instanceof Float32Array}),M.default.Matrix=function(){function C(){var m=this,p=C;if(m instanceof p)return arguments.length&&((m=arguments.length-1)<0||arguments.length<=m?void 0:arguments[m])instanceof M.default&&(this.p5=(p=arguments.length-1)<0||arguments.length<=p?void 0:arguments[p]),"mat3"===(arguments.length<=0?void 0:arguments[0])?this.mat3=Array.isArray(arguments.length<=1?void 0:arguments[1])?arguments.length<=1?void 0:arguments[1]:new v([1,0,0,0,1,0,0,0,1]):this.mat4=Array.isArray(arguments.length<=0?void 0:arguments[0])?arguments.length<=0?void 0:arguments[0]:new v([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),this;throw new TypeError("Cannot call a class as a function")}var f,g,d;return f=C,d=[{key:"identity",value:function(m){return new M.default.Matrix(m)}}],(g=[{key:"reset",value:function(){return this.mat3?this.mat3.set([1,0,0,0,1,0,0,0,1]):this.mat4&&this.mat4.set([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),this}},{key:"set",value:function(m){var p=arguments;if(m instanceof M.default.Matrix?p=m.mat4:S(m)&&(p=m),16!==p.length)M.default._friendlyError("Expected 16 values but received ".concat(p.length,"."),"p5.Matrix.set");else for(var h=0;h<16;h++)this.mat4[h]=p[h];return this}},{key:"get",value:function(){return new M.default.Matrix(this.mat4,this.p5)}},{key:"copy",value:function(){var m;return void 0!==this.mat3?((m=new M.default.Matrix("mat3",this.p5)).mat3[0]=this.mat3[0],m.mat3[1]=this.mat3[1],m.mat3[2]=this.mat3[2],m.mat3[3]=this.mat3[3],m.mat3[4]=this.mat3[4],m.mat3[5]=this.mat3[5],m.mat3[6]=this.mat3[6],m.mat3[7]=this.mat3[7],m.mat3[8]=this.mat3[8]):((m=new M.default.Matrix(this.p5)).mat4[0]=this.mat4[0],m.mat4[1]=this.mat4[1],m.mat4[2]=this.mat4[2],m.mat4[3]=this.mat4[3],m.mat4[4]=this.mat4[4],m.mat4[5]=this.mat4[5],m.mat4[6]=this.mat4[6],m.mat4[7]=this.mat4[7],m.mat4[8]=this.mat4[8],m.mat4[9]=this.mat4[9],m.mat4[10]=this.mat4[10],m.mat4[11]=this.mat4[11],m.mat4[12]=this.mat4[12],m.mat4[13]=this.mat4[13],m.mat4[14]=this.mat4[14],m.mat4[15]=this.mat4[15]),m}},{key:"transpose",value:function(m){var p,h,y,b,x,D;return m instanceof M.default.Matrix?(p=m.mat4[1],h=m.mat4[2],y=m.mat4[3],b=m.mat4[6],x=m.mat4[7],D=m.mat4[11],this.mat4[0]=m.mat4[0],this.mat4[1]=m.mat4[4],this.mat4[2]=m.mat4[8],this.mat4[3]=m.mat4[12],this.mat4[4]=p,this.mat4[5]=m.mat4[5],this.mat4[6]=m.mat4[9],this.mat4[7]=m.mat4[13],this.mat4[8]=h,this.mat4[9]=b,this.mat4[10]=m.mat4[10],this.mat4[11]=m.mat4[14],this.mat4[12]=y,this.mat4[13]=x,this.mat4[14]=D,this.mat4[15]=m.mat4[15]):S(m)&&(p=m[1],h=m[2],y=m[3],b=m[6],x=m[7],D=m[11],this.mat4[0]=m[0],this.mat4[1]=m[4],this.mat4[2]=m[8],this.mat4[3]=m[12],this.mat4[4]=p,this.mat4[5]=m[5],this.mat4[6]=m[9],this.mat4[7]=m[13],this.mat4[8]=h,this.mat4[9]=b,this.mat4[10]=m[10],this.mat4[11]=m[14],this.mat4[12]=y,this.mat4[13]=x,this.mat4[14]=D,this.mat4[15]=m[15]),this}},{key:"invert",value:function(W){W instanceof M.default.Matrix?(p=W.mat4[0],h=W.mat4[1],y=W.mat4[2],b=W.mat4[3],x=W.mat4[4],D=W.mat4[5],N=W.mat4[6],U=W.mat4[7],R=W.mat4[8],L=W.mat4[9],z=W.mat4[10],F=W.mat4[11],q=W.mat4[12],k=W.mat4[13],Z=W.mat4[14],X=W.mat4[15]):S(W)&&(p=W[0],h=W[1],y=W[2],b=W[3],x=W[4],D=W[5],N=W[6],U=W[7],R=W[8],L=W[9],z=W[10],F=W[11],q=W[12],k=W[13],Z=W[14],X=W[15]);var p,h,y,b,x,D,N,U,R,L,z,F,q,k,Z,X,oe=p*N-y*x,ie=p*U-b*x,re=h*N-y*D,le=h*U-b*D,pe=y*U-b*N,Ae=R*k-L*q,$=R*Z-z*q,P=R*X-F*q,K=L*Z-z*k,te=L*X-F*k,fe=z*X-F*Z,ve=(W=p*D-h*x)*fe-oe*te+ie*K+re*P-le*$+pe*Ae;return ve?(this.mat4[0]=(D*fe-N*te+U*K)*(ve=1/ve),this.mat4[1]=(y*te-h*fe-b*K)*ve,this.mat4[2]=(k*pe-Z*le+X*re)*ve,this.mat4[3]=(z*le-L*pe-F*re)*ve,this.mat4[4]=(N*P-x*fe-U*$)*ve,this.mat4[5]=(p*fe-y*P+b*$)*ve,this.mat4[6]=(Z*ie-q*pe-X*oe)*ve,this.mat4[7]=(R*pe-z*ie+F*oe)*ve,this.mat4[8]=(x*te-D*P+U*Ae)*ve,this.mat4[9]=(h*P-p*te-b*Ae)*ve,this.mat4[10]=(q*le-k*ie+X*W)*ve,this.mat4[11]=(L*ie-R*le-F*W)*ve,this.mat4[12]=(D*$-x*K-N*Ae)*ve,this.mat4[13]=(p*K-h*$+y*Ae)*ve,this.mat4[14]=(k*oe-q*re-Z*W)*ve,this.mat4[15]=(R*re-L*oe+z*W)*ve,this):null}},{key:"invert3x3",value:function(){var m=this.mat3[0],p=this.mat3[1],h=this.mat3[2],y=this.mat3[3],b=this.mat3[4],x=this.mat3[5],D=this.mat3[6],N=this.mat3[7],U=this.mat3[8],R=U*b-x*N,L=-U*y+x*D,z=N*y-b*D,F=m*R+p*L+h*z;return F?(this.mat3[0]=R*(F=1/F),this.mat3[1]=(-U*p+h*N)*F,this.mat3[2]=(x*p-h*b)*F,this.mat3[3]=L*F,this.mat3[4]=(U*m-h*D)*F,this.mat3[5]=(-x*m+h*y)*F,this.mat3[6]=z*F,this.mat3[7]=(-N*m+p*D)*F,this.mat3[8]=(b*m-p*y)*F,this):null}},{key:"transpose3x3",value:function(m){var p=(m=void 0===m?this.mat3:m)[1],h=m[2],y=m[5];return this.mat3[0]=m[0],this.mat3[1]=m[3],this.mat3[2]=m[6],this.mat3[3]=p,this.mat3[4]=m[4],this.mat3[5]=m[7],this.mat3[6]=h,this.mat3[7]=y,this.mat3[8]=m[8],this}},{key:"inverseTranspose",value:function(m){if(m=m.mat4,void 0===this.mat3?M.default._friendlyError("sorry, this function only works with mat3"):(this.mat3[0]=m[0],this.mat3[1]=m[1],this.mat3[2]=m[2],this.mat3[3]=m[4],this.mat3[4]=m[5],this.mat3[5]=m[6],this.mat3[6]=m[8],this.mat3[7]=m[9],this.mat3[8]=m[10]),m=this.invert3x3())m.transpose3x3(this.mat3);else for(var p=0;p<9;p++)this.mat3[p]=0;return this}},{key:"determinant",value:function(){return(this.mat4[0]*this.mat4[5]-this.mat4[1]*this.mat4[4])*(this.mat4[10]*this.mat4[15]-this.mat4[11]*this.mat4[14])-(this.mat4[0]*this.mat4[6]-this.mat4[2]*this.mat4[4])*(this.mat4[9]*this.mat4[15]-this.mat4[11]*this.mat4[13])+(this.mat4[0]*this.mat4[7]-this.mat4[3]*this.mat4[4])*(this.mat4[9]*this.mat4[14]-this.mat4[10]*this.mat4[13])+(this.mat4[1]*this.mat4[6]-this.mat4[2]*this.mat4[5])*(this.mat4[8]*this.mat4[15]-this.mat4[11]*this.mat4[12])-(this.mat4[1]*this.mat4[7]-this.mat4[3]*this.mat4[5])*(this.mat4[8]*this.mat4[14]-this.mat4[10]*this.mat4[12])+(this.mat4[2]*this.mat4[7]-this.mat4[3]*this.mat4[6])*(this.mat4[8]*this.mat4[13]-this.mat4[9]*this.mat4[12])}},{key:"mult",value:function(h){var p;if(h===this||h===this.mat4)p=this.copy().mat4;else if(h instanceof M.default.Matrix)p=h.mat4;else if(S(h))p=h;else{if(16!==arguments.length)return;p=arguments}var y=this.mat4[1],b=this.mat4[2],x=this.mat4[3];return this.mat4[0]=(h=this.mat4[0])*p[0]+y*p[4]+b*p[8]+x*p[12],this.mat4[1]=h*p[1]+y*p[5]+b*p[9]+x*p[13],this.mat4[2]=h*p[2]+y*p[6]+b*p[10]+x*p[14],this.mat4[3]=h*p[3]+y*p[7]+b*p[11]+x*p[15],this.mat4[4]=(h=this.mat4[4])*p[0]+(y=this.mat4[5])*p[4]+(b=this.mat4[6])*p[8]+(x=this.mat4[7])*p[12],this.mat4[5]=h*p[1]+y*p[5]+b*p[9]+x*p[13],this.mat4[6]=h*p[2]+y*p[6]+b*p[10]+x*p[14],this.mat4[7]=h*p[3]+y*p[7]+b*p[11]+x*p[15],this.mat4[8]=(h=this.mat4[8])*p[0]+(y=this.mat4[9])*p[4]+(b=this.mat4[10])*p[8]+(x=this.mat4[11])*p[12],this.mat4[9]=h*p[1]+y*p[5]+b*p[9]+x*p[13],this.mat4[10]=h*p[2]+y*p[6]+b*p[10]+x*p[14],this.mat4[11]=h*p[3]+y*p[7]+b*p[11]+x*p[15],this.mat4[12]=(h=this.mat4[12])*p[0]+(y=this.mat4[13])*p[4]+(b=this.mat4[14])*p[8]+(x=this.mat4[15])*p[12],this.mat4[13]=h*p[1]+y*p[5]+b*p[9]+x*p[13],this.mat4[14]=h*p[2]+y*p[6]+b*p[10]+x*p[14],this.mat4[15]=h*p[3]+y*p[7]+b*p[11]+x*p[15],this}},{key:"apply",value:function(h){var p;if(h===this||h===this.mat4)p=this.copy().mat4;else if(h instanceof M.default.Matrix)p=h.mat4;else if(S(h))p=h;else{if(16!==arguments.length)return;p=arguments}var b,x,D,y=((h=this.mat4)[0]=p[0]*(y=h[0])+p[1]*(b=h[4])+p[2]*(x=h[8])+p[3]*(D=h[12]),h[4]=p[4]*y+p[5]*b+p[6]*x+p[7]*D,h[8]=p[8]*y+p[9]*b+p[10]*x+p[11]*D,h[12]=p[12]*y+p[13]*b+p[14]*x+p[15]*D,h[1]);return h[1]=p[0]*y+p[1]*(b=h[5])+p[2]*(x=h[9])+p[3]*(D=h[13]),h[5]=p[4]*y+p[5]*b+p[6]*x+p[7]*D,h[9]=p[8]*y+p[9]*b+p[10]*x+p[11]*D,h[13]=p[12]*y+p[13]*b+p[14]*x+p[15]*D,h[2]=p[0]*(y=h[2])+p[1]*(b=h[6])+p[2]*(x=h[10])+p[3]*(D=h[14]),h[6]=p[4]*y+p[5]*b+p[6]*x+p[7]*D,h[10]=p[8]*y+p[9]*b+p[10]*x+p[11]*D,h[14]=p[12]*y+p[13]*b+p[14]*x+p[15]*D,h[3]=p[0]*(y=h[3])+p[1]*(b=h[7])+p[2]*(x=h[11])+p[3]*(D=h[15]),h[7]=p[4]*y+p[5]*b+p[6]*x+p[7]*D,h[11]=p[8]*y+p[9]*b+p[10]*x+p[11]*D,h[15]=p[12]*y+p[13]*b+p[14]*x+p[15]*D,this}},{key:"scale",value:function(m,p,h){return m instanceof M.default.Vector?(p=m.y,h=m.z,m=m.x):m instanceof Array&&(p=m[1],h=m[2],m=m[0]),this.mat4[0]*=m,this.mat4[1]*=m,this.mat4[2]*=m,this.mat4[3]*=m,this.mat4[4]*=p,this.mat4[5]*=p,this.mat4[6]*=p,this.mat4[7]*=p,this.mat4[8]*=h,this.mat4[9]*=h,this.mat4[10]*=h,this.mat4[11]*=h,this}},{key:"rotate",value:function(W,te,K,y){te instanceof M.default.Vector?(K=te.y,y=te.z,te=te.x):te instanceof Array&&(K=te[1],y=te[2],te=te[0]);var b=(te*=1/(b=Math.sqrt(te*te+K*K+y*y)),K*=1/b,y*=1/b,this.mat4[0]),x=this.mat4[1],D=this.mat4[2],N=this.mat4[3],U=this.mat4[4],R=this.mat4[5],L=this.mat4[6],z=this.mat4[7],F=this.mat4[8],q=this.mat4[9],k=this.mat4[10],Z=this.mat4[11],X=Math.sin(W),oe=1-(W=Math.cos(W)),ie=te*te*oe+W,re=K*te*oe+y*X,le=y*te*oe-K*X,pe=te*K*oe-y*X,Ae=K*K*oe+W,$=y*K*oe+te*X,P=te*y*oe+K*X;return K=K*y*oe-te*X,te=y*y*oe+W,this.mat4[0]=b*ie+U*re+F*le,this.mat4[1]=x*ie+R*re+q*le,this.mat4[2]=D*ie+L*re+k*le,this.mat4[3]=N*ie+z*re+Z*le,this.mat4[4]=b*pe+U*Ae+F*$,this.mat4[5]=x*pe+R*Ae+q*$,this.mat4[6]=D*pe+L*Ae+k*$,this.mat4[7]=N*pe+z*Ae+Z*$,this.mat4[8]=b*P+U*K+F*te,this.mat4[9]=x*P+R*K+q*te,this.mat4[10]=D*P+L*K+k*te,this.mat4[11]=N*P+z*K+Z*te,this}},{key:"translate",value:function(y){var p=y[0],h=y[1];this.mat4[12]+=this.mat4[0]*p+this.mat4[4]*h+this.mat4[8]*(y=y[2]||0),this.mat4[13]+=this.mat4[1]*p+this.mat4[5]*h+this.mat4[9]*y,this.mat4[14]+=this.mat4[2]*p+this.mat4[6]*h+this.mat4[10]*y,this.mat4[15]+=this.mat4[3]*p+this.mat4[7]*h+this.mat4[11]*y}},{key:"rotateX",value:function(m){this.rotate(m,1,0,0)}},{key:"rotateY",value:function(m){this.rotate(m,0,1,0)}},{key:"rotateZ",value:function(m){this.rotate(m,0,0,1)}},{key:"perspective",value:function(b,p,h,y){b=1/Math.tan(b/2);var x=1/(h-y);return this.mat4[0]=b/p,this.mat4[1]=0,this.mat4[2]=0,this.mat4[3]=0,this.mat4[4]=0,this.mat4[5]=b,this.mat4[6]=0,this.mat4[7]=0,this.mat4[8]=0,this.mat4[9]=0,this.mat4[10]=(y+h)*x,this.mat4[11]=-1,this.mat4[12]=0,this.mat4[13]=0,this.mat4[14]=2*y*h*x,this.mat4[15]=0,this}},{key:"ortho",value:function(m,p,h,y,b,x){var D=1/(m-p),N=1/(h-y),U=1/(b-x);return this.mat4[0]=-2*D,this.mat4[1]=0,this.mat4[2]=0,this.mat4[3]=0,this.mat4[4]=0,this.mat4[5]=-2*N,this.mat4[6]=0,this.mat4[7]=0,this.mat4[8]=0,this.mat4[9]=0,this.mat4[10]=2*U,this.mat4[11]=0,this.mat4[12]=(m+p)*D,this.mat4[13]=(y+h)*N,this.mat4[14]=(x+b)*U,this.mat4[15]=1,this}},{key:"multiplyVec4",value:function(m,p,h,y){var b=new Array(4),x=this.mat4;return b[0]=x[0]*m+x[4]*p+x[8]*h+x[12]*y,b[1]=x[1]*m+x[5]*p+x[9]*h+x[13]*y,b[2]=x[2]*m+x[6]*p+x[10]*h+x[14]*y,b[3]=x[3]*m+x[7]*p+x[11]*h+x[15]*y,b}},{key:"multiplyPoint",value:function(h){var y=this.multiplyVec4(y=h.x,h.y,h=h.z,1);return new M.default.Vector(y[0],y[1],y[2])}},{key:"multiplyAndNormalizePoint",value:function(h){var y;return(y=this.multiplyVec4(y=h.x,h.y,h=h.z,1))[0]/=y[3],y[1]/=y[3],y[2]/=y[3],new M.default.Vector(y[0],y[1],y[2])}},{key:"multiplyDirection",value:function(h){var y=this.multiplyVec4(y=h.x,h.y,h=h.z,0);return new M.default.Vector(y[0],y[1],y[2])}},{key:"mult3x3",value:function(h){var p;if(h===this||h===this.mat3)p=this.copy().mat3;else if(h instanceof M.default.Matrix)p=h.mat3;else if(S(h))p=h;else{if(9!==arguments.length)return;p=arguments}var y=this.mat3[1],b=this.mat3[2];return this.mat3[0]=(h=this.mat3[0])*p[0]+y*p[3]+b*p[6],this.mat3[1]=h*p[1]+y*p[4]+b*p[7],this.mat3[2]=h*p[2]+y*p[5]+b*p[8],this.mat3[3]=(h=this.mat3[3])*p[0]+(y=this.mat3[4])*p[3]+(b=this.mat3[5])*p[6],this.mat3[4]=h*p[1]+y*p[4]+b*p[7],this.mat3[5]=h*p[2]+y*p[5]+b*p[8],this.mat3[6]=(h=this.mat3[6])*p[0]+(y=this.mat3[7])*p[3]+(b=this.mat3[8])*p[6],this.mat3[7]=h*p[1]+y*p[4]+b*p[7],this.mat3[8]=h*p[2]+y*p[5]+b*p[8],this}},{key:"column",value:function(m){return new M.default.Vector(this.mat3[3*m],this.mat3[3*m+1],this.mat3[3*m+2])}},{key:"row",value:function(m){return new M.default.Vector(this.mat3[m],this.mat3[m+3],this.mat3[m+6])}},{key:"diagonal",value:function(){return void 0!==this.mat3?[this.mat3[0],this.mat3[4],this.mat3[8]]:[this.mat4[0],this.mat4[5],this.mat4[10],this.mat4[15]]}},{key:"multiplyVec3",value:function(m,p){return(p=void 0===p?m.copy():p).x=this.row(0).dot(m),p.y=this.row(1).dot(m),p.z=this.row(2).dot(m),p}},{key:"createSubMatrix3x3",value:function(){var m=new M.default.Matrix("mat3");return m.mat3[0]=this.mat4[0],m.mat3[1]=this.mat4[1],m.mat3[2]=this.mat4[2],m.mat3[3]=this.mat4[4],m.mat3[4]=this.mat4[5],m.mat3[5]=this.mat4[6],m.mat3[6]=this.mat4[8],m.mat3[7]=this.mat4[9],m.mat3[8]=this.mat4[10],m}}])&&E(f.prototype,g),d&&E(f,d),C}(),H.default=T=M.default.Matrix},{"../core/main":283,"core-js/modules/es.array.iterator":165,"core-js/modules/es.object.to-string":190,"core-js/modules/es.typed-array.copy-within":213,"core-js/modules/es.typed-array.every":214,"core-js/modules/es.typed-array.fill":215,"core-js/modules/es.typed-array.filter":216,"core-js/modules/es.typed-array.find":218,"core-js/modules/es.typed-array.find-index":217,"core-js/modules/es.typed-array.float32-array":219,"core-js/modules/es.typed-array.for-each":221,"core-js/modules/es.typed-array.includes":222,"core-js/modules/es.typed-array.index-of":223,"core-js/modules/es.typed-array.iterator":226,"core-js/modules/es.typed-array.join":227,"core-js/modules/es.typed-array.last-index-of":228,"core-js/modules/es.typed-array.map":229,"core-js/modules/es.typed-array.reduce":231,"core-js/modules/es.typed-array.reduce-right":230,"core-js/modules/es.typed-array.reverse":232,"core-js/modules/es.typed-array.set":233,"core-js/modules/es.typed-array.slice":234,"core-js/modules/es.typed-array.some":235,"core-js/modules/es.typed-array.sort":236,"core-js/modules/es.typed-array.subarray":237,"core-js/modules/es.typed-array.to-locale-string":238,"core-js/modules/es.typed-array.to-string":239}],337:[function(l,de,H){"use strict";Object.defineProperty(H,"__esModule",{value:!0}),H.default=void 0;var M=(l=l("../core/main"))&&l.__esModule?l:{default:l};function E(v,S){for(var T=0;T<S.length;T++){var C=S[T];C.enumerable=C.enumerable||!1,C.configurable=!0,"value"in C&&(C.writable=!0),Object.defineProperty(v,C.key,C)}}M.default.Quat=function(){function v(f,g,d,m){if(!(this instanceof v))throw new TypeError("Cannot call a class as a function");this.w=f,this.vec=new M.default.Vector(g,d,m)}var S,T,C;return S=v,C=[{key:"fromAxisAngle",value:function(f,h,d,m){var p=Math.cos(f/2);return h=new M.default.Vector(h,d,m).normalize().mult(Math.sin(f/2)),new M.default.Quat(p,h.x,h.y,h.z)}}],(T=[{key:"conjugate",value:function(){return new M.default.Quat(this.w,-this.vec.x,-this.vec.y,-this.vec.z)}},{key:"multiply",value:function(f){return new M.default.Quat(this.w*f.w-this.vec.x*f.vec.x-this.vec.y*f.vec.y-this.vec.z-f.vec.z,this.w*f.vec.x+this.vec.x*f.w+this.vec.y*f.vec.z-this.vec.z*f.vec.y,this.w*f.vec.y-this.vec.x*f.vec.z+this.vec.y*f.w+this.vec.z*f.vec.x,this.w*f.vec.z+this.vec.x*f.vec.y-this.vec.y*f.vec.x+this.vec.z*f.w)}},{key:"rotateVector",value:function(f){return new M.default.Vector.mult(f,this.w*this.w-this.vec.dot(this.vec)).add(M.default.Vector.mult(this.vec,2*f.dot(this.vec))).add(M.default.Vector.mult(this.vec,2*this.w).cross(f)).clampToZero()}},{key:"rotateBy",value:function(f){return f.multiply(this).multiply(f.conjugate()).vec.clampToZero()}}])&&E(S.prototype,T),C&&E(S,C),v}(),H.default=l=M.default.Quat},{"../core/main":283}],338:[function(l,de,H){"use strict";function M(E,v){for(var S=0;S<v.length;S++){var T=v[S];T.enumerable=T.enumerable||!1,T.configurable=!0,"value"in T&&(T.writable=!0),Object.defineProperty(E,T.key,T)}}l("core-js/modules/es.array.map"),l("core-js/modules/es.array.map"),Object.defineProperty(H,"__esModule",{value:!0}),H.default=void 0,(l=(l=l("../core/main"))&&l.__esModule?l:{default:l}).default.RenderBuffer=function(){function E(C,f,g,d,m,p){if(!(this instanceof E))throw new TypeError("Cannot call a class as a function");this.size=C,this.src=f,this.dst=g,this.attr=d,this._renderer=m,this.map=p}var v,S;return v=E,(S=[{key:"_prepareBuffer",value:function(C,f){var g,d,m,y,p=this._renderer.GL,h=C.model||C;(y=(y=f.attributes)[this.attr])&&(g=C[this.dst],0<(d=h[this.src]).length?((m=!g)&&(C[this.dst]=g=p.createBuffer()),p.bindBuffer(p.ARRAY_BUFFER,g),!m&&!1===h.dirtyFlags[this.src]||(m=(C=this.map)?C(d):d,this._renderer._bindBuffer(g,p.ARRAY_BUFFER,m),h.dirtyFlags[this.src]=!1),f.enableAttrib(y,this.size)):-1!==(C=y.location)&&this._renderer.registerEnabled.has(C)&&(p.disableVertexAttribArray(C),this._renderer.registerEnabled.delete(C)))}}])&&M(v.prototype,S),E}(),H.default=l=l.default.RenderBuffer},{"../core/main":283,"core-js/modules/es.array.map":168}],339:[function(l,de,H){"use strict";function M(d){return(M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(m){return typeof m}:function(m){return m&&"function"==typeof Symbol&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":typeof m})(d)}function E(d){return(E="function"==typeof Symbol&&"symbol"===M(Symbol.iterator)?function(m){return M(m)}:function(m){return m&&"function"==typeof Symbol&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":M(m)})(d)}l("core-js/modules/es.symbol"),l("core-js/modules/es.symbol.description"),l("core-js/modules/es.symbol.iterator"),l("core-js/modules/es.array.concat"),l("core-js/modules/es.array.fill"),l("core-js/modules/es.array.find-index"),l("core-js/modules/es.array.from"),l("core-js/modules/es.array.iterator"),l("core-js/modules/es.array.map"),l("core-js/modules/es.array.slice"),l("core-js/modules/es.map"),l("core-js/modules/es.object.get-own-property-descriptor"),l("core-js/modules/es.object.to-string"),l("core-js/modules/es.regexp.to-string"),l("core-js/modules/es.string.iterator"),l("core-js/modules/es.weak-map"),l("core-js/modules/web.dom-collections.iterator"),l("core-js/modules/es.symbol"),l("core-js/modules/es.symbol.description"),l("core-js/modules/es.symbol.iterator"),l("core-js/modules/es.array.concat"),l("core-js/modules/es.array.fill"),l("core-js/modules/es.array.find-index"),l("core-js/modules/es.array.iterator"),l("core-js/modules/es.array.map"),l("core-js/modules/es.array.slice"),l("core-js/modules/es.map"),l("core-js/modules/es.object.to-string"),l("core-js/modules/es.string.iterator"),l("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(H,"__esModule",{value:!0}),H.default=void 0;var v=(g=l("../core/main"))&&g.__esModule?g:{default:g},S=function(d){if(d&&d.__esModule)return d;if(null===d||"object"!==E(d)&&"function"!=typeof d)return{default:d};var m=T();if(m&&m.has(d))return m.get(d);var p,h={},y=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(p in d){var b;Object.prototype.hasOwnProperty.call(d,p)&&((b=y?Object.getOwnPropertyDescriptor(d,p):null)&&(b.get||b.set)?Object.defineProperty(h,p,b):h[p]=d[p])}return h.default=d,m&&m.set(d,h),h}(l("../core/constants"));function T(){var d;return"function"!=typeof WeakMap?null:(T=function(){return d},d=new WeakMap)}function C(d){return function(m){if(Array.isArray(m)){for(var p=0,h=new Array(m.length);p<m.length;p++)h[p]=m[p];return h}}(d)||function(m){if(Symbol.iterator in Object(m)||"[object Arguments]"===Object.prototype.toString.call(m))return Array.from(m)}(d)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}l("./p5.RenderBuffer"),v.default.RendererGL.prototype.beginShape=function(d){return this.immediateMode.shapeMode=void 0!==d?d:S.TESS,this.immediateMode.geometry.reset(),this.immediateMode.contourIndices=[],this};var f={vertices:1,vertexNormals:1,vertexColors:4,vertexStrokeColors:4,uvs:2},g=(v.default.RendererGL.prototype.beginContour=function(){if(this.immediateMode.shapeMode!==S.TESS)throw new Error("WebGL mode can only use contours with beginShape(TESS).");this.immediateMode.contourIndices.push(this.immediateMode.geometry.vertices.length)},v.default.RendererGL.prototype.vertex=function(d,m){if(this.immediateMode.shapeMode===S.QUADS&&this.immediateMode.geometry.vertices.length%6==3)for(var p in f){var h=f[p];(p=this.immediateMode.geometry[p]).push.apply(p,C(p.slice(p.length-3*h,p.length-2*h)).concat(C(p.slice(p.length-h,p.length))))}var y,b,x=y=b=0,D=(3===arguments.length?x=arguments[2]:4===arguments.length?(y=arguments[2],b=arguments[3]):5===arguments.length&&(x=arguments[2],y=arguments[3],b=arguments[4]),new v.default.Vector(d,m,x));return this.immediateMode.geometry.vertices.push(D),this.immediateMode.geometry.vertexNormals.push(this._currentNormal),this.immediateMode.geometry.vertexColors.push((D=this.curFillColor||[.5,.5,.5,1])[0],D[1],D[2],D[3]),this.immediateMode.geometry.vertexStrokeColors.push((D=this.curStrokeColor||[.5,.5,.5,1])[0],D[1],D[2],D[3]),this.textureMode!==S.IMAGE||this.isProcessingVertices||(null!==this._tex?0<this._tex.width&&0<this._tex.height&&(y/=this._tex.width,b/=this._tex.height):void 0===this.userFillShader&&void 0===this.userStrokeShader&&void 0===this.userPointShader&&null===this._tex&&4<=arguments.length&&console.warn("You must first call texture() before using vertex() with image based u and v coordinates")),this.immediateMode.geometry.uvs.push(y,b),this.immediateMode._bezierVertex[0]=d,this.immediateMode._bezierVertex[1]=m,this.immediateMode._bezierVertex[2]=x,this.immediateMode._quadraticVertex[0]=d,this.immediateMode._quadraticVertex[1]=m,this.immediateMode._quadraticVertex[2]=x,this},v.default.RendererGL.prototype.normal=function(d,m,p){return this._currentNormal=d instanceof v.default.Vector?d:new v.default.Vector(d,m,p),this},v.default.RendererGL.prototype.endShape=function(d,m,p,h,y,b){var x,D=6<arguments.length&&void 0!==arguments[6]?arguments[6]:1;return this.immediateMode.shapeMode===S.POINTS?this._drawPoints(this.immediateMode.geometry.vertices,this.immediateMode.buffers.point):(3===this.immediateMode.geometry.vertices.length&&this.immediateMode.shapeMode===S.TESS&&(this.immediateMode.shapeMode=S.TRIANGLES),this.isProcessingVertices=!0,this._processVertices.apply(this,arguments),x=this.isProcessingVertices=!1,this.immediateMode.shapeMode!==S.LINE_STRIP&&this.immediateMode.shapeMode!==S.LINES||(this.immediateMode.shapeMode=S.TRIANGLE_FAN,x=!0),this.immediateMode.shapeMode===S.QUADS?this.immediateMode.shapeMode=S.TRIANGLES:this.immediateMode.shapeMode===S.QUAD_STRIP&&(this.immediateMode.shapeMode=S.TRIANGLE_STRIP),this._doFill&&!x&&!this.geometryBuilder&&3<=this.immediateMode.geometry.vertices.length&&this._drawImmediateFill(D),this._doStroke&&!this.geometryBuilder&&1<=this.immediateMode.geometry.lineVertices.length&&this._drawImmediateStroke(),this.geometryBuilder&&this.geometryBuilder.addImmediate(),this.isBezier=!1,this.isQuadratic=!1,this.isCurve=!1,this.immediateMode._bezierVertex.length=0,this.immediateMode._quadraticVertex.length=0,this.immediateMode._curveVertex.length=0),this},v.default.RendererGL.prototype._processVertices=function(d){var m;0!==this.immediateMode.geometry.vertices.length&&(d=d===S.CLOSE,this._doStroke&&(this.immediateMode.geometry.edges=this._calculateEdges(this.immediateMode.shapeMode,this.immediateMode.geometry.vertices,d),this.geometryBuilder||this.immediateMode.geometry._edgesToVertices()),m=this.immediateMode.shapeMode===S.TESS,d=0<this.immediateMode.contourIndices.length,this._doFill&&(this.isBezier||this.isQuadratic||this.isCurve||m||d)&&this.immediateMode.shapeMode!==S.LINES&&this._tesselateShape())},v.default.RendererGL.prototype._calculateEdges=function(d,m,p){var h=[],y=0,b=this.immediateMode.contourIndices.slice(),x=0;switch(d){case S.TRIANGLE_STRIP:for(y=0;y<m.length-2;y++)h.push([y,y+1]),h.push([y,y+2]);h.push([y,y+1]);break;case S.TRIANGLE_FAN:for(y=1;y<m.length-1;y++)h.push([0,y]),h.push([y,y+1]);h.push([0,m.length-1]);break;case S.TRIANGLES:for(y=0;y<m.length-2;y+=3)h.push([y,y+1]),h.push([y+1,y+2]),h.push([y+2,y]);break;case S.LINES:for(y=0;y<m.length-1;y+=2)h.push([y,y+1]);break;case S.QUADS:for(y=0;y<m.length-5;y+=6)h.push([y,y+1]),h.push([y+1,y+2]),h.push([y+3,y+5]),h.push([y+4,y+5]);break;case S.QUAD_STRIP:for(y=0;y<m.length-2;y+=2)h.push([y,y+1]),h.push([y,y+2]),h.push([y+1,y+3]);h.push([y,y+1]);break;default:for(y=0;y<m.length;y++)y+1<m.length&&y+1!==b[0]?h.push([y,y+1]):((p||x)&&h.push([y,x]),0<b.length&&(x=b.shift()))}return d!==S.TESS&&p&&h.push([m.length-1,0]),h},v.default.RendererGL.prototype._tesselateShape=function(){for(var d=this,m=(this.immediateMode.shapeMode=S.TRIANGLES,[[]]),p=0;p<this.immediateMode.geometry.vertices.length;p++)0<this.immediateMode.contourIndices.length&&this.immediateMode.contourIndices[0]===p&&(this.immediateMode.contourIndices.shift(),m.push([])),m[m.length-1].push(this.immediateMode.geometry.vertices[p].x,this.immediateMode.geometry.vertices[p].y,this.immediateMode.geometry.vertices[p].z,this.immediateMode.geometry.uvs[2*p],this.immediateMode.geometry.uvs[2*p+1],this.immediateMode.geometry.vertexColors[4*p],this.immediateMode.geometry.vertexColors[4*p+1],this.immediateMode.geometry.vertexColors[4*p+2],this.immediateMode.geometry.vertexColors[4*p+3],this.immediateMode.geometry.vertexNormals[p].x,this.immediateMode.geometry.vertexNormals[p].y,this.immediateMode.geometry.vertexNormals[p].z);for(var h,y=this._triangulate(m),b=this.immediateMode.geometry.vertices,x=(this.immediateMode.geometry.vertices=[],this.immediateMode.geometry.vertexNormals=[],this.immediateMode.geometry.uvs=[],[]),D=0,N=y.length;D<N;D+=v.default.RendererGL.prototype.tessyVertexSize)x.push.apply(x,C(y.slice(D+5,D+9))),this.normal.apply(this,C(y.slice(D+9,D+12))),this.vertex.apply(this,C(y.slice(D,D+5)));this.geometryBuilder&&(h=new Map,this.immediateMode.geometry.edges=this.immediateMode.geometry.edges.map(function(U){return U.map(function(R){if(!h.has(R)){var L=b[R],z=d.immediateMode.geometry.vertices.findIndex(function(oe){return L.x===oe.x&&L.y===oe.y&&L.z===oe.z});if(-1===z){for(var F=1/0,q=0,k=0;k<d.immediateMode.geometry.vertices.length;k++){var X,W,Z=L.y-(X=d.immediateMode.geometry.vertices[k]).y;(W=(W=L.x-X.x)*W+Z*Z+(X=L.z-X.z)*X)<F&&(F=W,q=k)}z=q}h.set(R,z)}return h.get(R)})})),this.immediateMode.geometry.vertexColors=x},v.default.RendererGL.prototype._drawImmediateFill=function(){var d,m=0<arguments.length&&void 0!==arguments[0]?arguments[0]:1,p=this.GL,h=(this._useVertexColor=0<this.immediateMode.geometry.vertexColors.length,d=this._getImmediateFillShader(),this._setFillUniforms(d),!0),y=!1,b=void 0;try{for(var x,D=this.immediateMode.buffers.fill[Symbol.iterator]();!(h=(x=D.next()).done);h=!0)x.value._prepareBuffer(this.immediateMode.geometry,d)}catch(N){y=!0,b=N}finally{try{h||null==D.return||D.return()}finally{if(y)throw b}}if(d.disableRemainingAttributes(),this._applyColorBlend(this.curFillColor,this.immediateMode.geometry.hasFillTransparency()),1===m)p.drawArrays(this.immediateMode.shapeMode,0,this.immediateMode.geometry.vertices.length);else try{p.drawArraysInstanced(this.immediateMode.shapeMode,0,this.immediateMode.geometry.vertices.length,m)}catch{console.log("\u{1f338} p5.js says: Instancing is only supported in WebGL2 mode")}d.unbindShader()},v.default.RendererGL.prototype._drawImmediateStroke=function(){var d=this.GL,m=(this._useLineColor=0<this.immediateMode.geometry.vertexStrokeColors.length,this._getImmediateStrokeShader()),p=(this._setStrokeUniforms(m),!0),h=!1,y=void 0;try{for(var b,x=this.immediateMode.buffers.stroke[Symbol.iterator]();!(p=(b=x.next()).done);p=!0)b.value._prepareBuffer(this.immediateMode.geometry,m)}catch(D){h=!0,y=D}finally{try{p||null==x.return||x.return()}finally{if(h)throw y}}m.disableRemainingAttributes(),this._applyColorBlend(this.curStrokeColor,this.immediateMode.geometry.hasFillTransparency()),d.drawArrays(d.TRIANGLES,0,this.immediateMode.geometry.lineVertices.length/3),m.unbindShader()},v.default.RendererGL);H.default=g},{"../core/constants":272,"../core/main":283,"./p5.RenderBuffer":338,"core-js/modules/es.array.concat":153,"core-js/modules/es.array.fill":156,"core-js/modules/es.array.find-index":158,"core-js/modules/es.array.from":162,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.map":168,"core-js/modules/es.array.slice":169,"core-js/modules/es.map":175,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.to-string":190,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246}],340:[function(l,de,H){"use strict";function M(f){return(M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(g){return typeof g}:function(g){return g&&"function"==typeof Symbol&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":typeof g})(f)}function E(f){return(E="function"==typeof Symbol&&"symbol"===M(Symbol.iterator)?function(g){return M(g)}:function(g){return g&&"function"==typeof Symbol&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":M(g)})(f)}l("core-js/modules/es.symbol"),l("core-js/modules/es.symbol.description"),l("core-js/modules/es.symbol.iterator"),l("core-js/modules/es.array.fill"),l("core-js/modules/es.array.iterator"),l("core-js/modules/es.array.some"),l("core-js/modules/es.object.get-own-property-descriptor"),l("core-js/modules/es.object.keys"),l("core-js/modules/es.object.to-string"),l("core-js/modules/es.string.iterator"),l("core-js/modules/es.typed-array.float32-array"),l("core-js/modules/es.typed-array.uint16-array"),l("core-js/modules/es.typed-array.uint32-array"),l("core-js/modules/es.typed-array.copy-within"),l("core-js/modules/es.typed-array.every"),l("core-js/modules/es.typed-array.fill"),l("core-js/modules/es.typed-array.filter"),l("core-js/modules/es.typed-array.find"),l("core-js/modules/es.typed-array.find-index"),l("core-js/modules/es.typed-array.for-each"),l("core-js/modules/es.typed-array.includes"),l("core-js/modules/es.typed-array.index-of"),l("core-js/modules/es.typed-array.iterator"),l("core-js/modules/es.typed-array.join"),l("core-js/modules/es.typed-array.last-index-of"),l("core-js/modules/es.typed-array.map"),l("core-js/modules/es.typed-array.reduce"),l("core-js/modules/es.typed-array.reduce-right"),l("core-js/modules/es.typed-array.reverse"),l("core-js/modules/es.typed-array.set"),l("core-js/modules/es.typed-array.slice"),l("core-js/modules/es.typed-array.some"),l("core-js/modules/es.typed-array.sort"),l("core-js/modules/es.typed-array.subarray"),l("core-js/modules/es.typed-array.to-locale-string"),l("core-js/modules/es.typed-array.to-string"),l("core-js/modules/es.weak-map"),l("core-js/modules/web.dom-collections.iterator"),l("core-js/modules/es.symbol"),l("core-js/modules/es.symbol.description"),l("core-js/modules/es.symbol.iterator"),l("core-js/modules/es.array.fill"),l("core-js/modules/es.array.iterator"),l("core-js/modules/es.array.some"),l("core-js/modules/es.object.keys"),l("core-js/modules/es.object.to-string"),l("core-js/modules/es.string.iterator"),l("core-js/modules/es.typed-array.float32-array"),l("core-js/modules/es.typed-array.uint16-array"),l("core-js/modules/es.typed-array.uint32-array"),l("core-js/modules/es.typed-array.copy-within"),l("core-js/modules/es.typed-array.every"),l("core-js/modules/es.typed-array.fill"),l("core-js/modules/es.typed-array.filter"),l("core-js/modules/es.typed-array.find"),l("core-js/modules/es.typed-array.find-index"),l("core-js/modules/es.typed-array.for-each"),l("core-js/modules/es.typed-array.includes"),l("core-js/modules/es.typed-array.index-of"),l("core-js/modules/es.typed-array.iterator"),l("core-js/modules/es.typed-array.join"),l("core-js/modules/es.typed-array.last-index-of"),l("core-js/modules/es.typed-array.map"),l("core-js/modules/es.typed-array.reduce"),l("core-js/modules/es.typed-array.reduce-right"),l("core-js/modules/es.typed-array.reverse"),l("core-js/modules/es.typed-array.set"),l("core-js/modules/es.typed-array.slice"),l("core-js/modules/es.typed-array.some"),l("core-js/modules/es.typed-array.sort"),l("core-js/modules/es.typed-array.subarray"),l("core-js/modules/es.typed-array.to-locale-string"),l("core-js/modules/es.typed-array.to-string"),l("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(H,"__esModule",{value:!0}),H.default=void 0;var v=(C=l("../core/main"))&&C.__esModule?C:{default:C},S=(l("./p5.RendererGL"),l("./p5.RenderBuffer"),function(f){if(f&&f.__esModule)return f;if(null===f||"object"!==E(f)&&"function"!=typeof f)return{default:f};var g=T();if(g&&g.has(f))return g.get(f);var d,m={},p=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(d in f){var h;Object.prototype.hasOwnProperty.call(f,d)&&((h=p?Object.getOwnPropertyDescriptor(f,d):null)&&(h.get||h.set)?Object.defineProperty(m,d,h):m[d]=f[d])}return m.default=f,g&&g.set(f,m),m}(l("../core/constants")));function T(){var f;return"function"!=typeof WeakMap?null:(T=function(){return f},f=new WeakMap)}v.default.RendererGL.prototype.freeGeometry=function(f){f.gid?this._freeBuffers(f.gid):console.warn("The model you passed to freeGeometry does not have an id!")},v.default.RendererGL.prototype._initBufferDefaults=function(f){var g;return this._freeBuffers(f),1e3<Object.keys(this.retainedMode.geometry).length&&(g=Object.keys(this.retainedMode.geometry)[0],this._freeBuffers(g)),this.retainedMode.geometry[f]={}},v.default.RendererGL.prototype._freeBuffers=function(f){var g,d=this.retainedMode.geometry[f];function m(p){var h=!0,y=!1,b=void 0;try{for(var x,D=p[Symbol.iterator]();!(h=(x=D.next()).done);h=!0){var N=x.value;d[N.dst]&&(g.deleteBuffer(d[N.dst]),d[N.dst]=null)}}catch(U){y=!0,b=U}finally{try{h||null==D.return||D.return()}finally{if(y)throw b}}}d&&(delete this.retainedMode.geometry[f],g=this.GL,d.indexBuffer&&g.deleteBuffer(d.indexBuffer),m(this.retainedMode.buffers.stroke),m(this.retainedMode.buffers.fill))},v.default.RendererGL.prototype.createBuffers=function(y,g){var d,m,p,h=this.GL,b=((y=this._initBufferDefaults(y)).model=g,y.indexBuffer);return g.faces.length?(b=b||(y.indexBuffer=h.createBuffer()),p=(m=(d=v.default.RendererGL.prototype._flatten(g.faces)).some(function(x){return 65535<x}))?Uint32Array:Uint16Array,this._bindBuffer(b,h.ELEMENT_ARRAY_BUFFER,d,p),y.indexBufferType=m?h.UNSIGNED_INT:h.UNSIGNED_SHORT,y.vertexCount=3*g.faces.length):(b&&(h.deleteBuffer(b),y.indexBuffer=null),y.vertexCount=g.vertices?g.vertices.length:0),y.lineVertexCount=g.lineVertices?g.lineVertices.length/3:0,y},v.default.RendererGL.prototype.drawBuffers=function(f){var g=this.GL,d=this.retainedMode.geometry[f];if(!this.geometryBuilder&&this._doFill&&0<this.retainedMode.geometry[f].vertexCount){this._useVertexColor=0<d.model.vertexColors.length;var m=this._getRetainedFillShader(),p=(this._setFillUniforms(m),!0),h=!1,y=void 0;try{for(var b,x=this.retainedMode.buffers.fill[Symbol.iterator]();!(p=(b=x.next()).done);p=!0)b.value._prepareBuffer(d,m)}catch(L){h=!0,y=L}finally{try{p||null==x.return||x.return()}finally{if(h)throw y}}m.disableRemainingAttributes(),d.indexBuffer&&this._bindBuffer(d.indexBuffer,g.ELEMENT_ARRAY_BUFFER),this._applyColorBlend(this.curFillColor,d.model.hasFillTransparency()),this._drawElements(g.TRIANGLES,f),m.unbindShader()}if(!this.geometryBuilder&&this._doStroke&&0<d.lineVertexCount){this._useLineColor=0<d.model.vertexStrokeColors.length;var D=this._getRetainedStrokeShader(),N=(this._setStrokeUniforms(D),!0);h=!1,y=void 0;try{for(var U,R=this.retainedMode.buffers.stroke[Symbol.iterator]();!(N=(U=R.next()).done);N=!0)U.value._prepareBuffer(d,D)}catch(F){h=!0,y=F}finally{try{N||null==R.return||R.return()}finally{if(h)throw y}}D.disableRemainingAttributes(),this._applyColorBlend(this.curStrokeColor,d.model.hasStrokeTransparency()),this._drawArrays(g.TRIANGLES,f),D.unbindShader()}return this.geometryBuilder&&this.geometryBuilder.addRetained(d),this},v.default.RendererGL.prototype.drawBuffersScaled=function(f,g,d,m){var p=this.uModelMatrix.copy();try{this.uModelMatrix.scale(g,d,m),this.drawBuffers(f)}finally{this.uModelMatrix=p}},v.default.RendererGL.prototype._drawArrays=function(f,g){return this.GL.drawArrays(f,0,this.retainedMode.geometry[g].lineVertexCount),this},v.default.RendererGL.prototype._drawElements=function(f,d){var m=this.GL;if((d=this.retainedMode.geometry[d]).indexBuffer){if(this._pInst.webglVersion!==S.WEBGL2&&d.indexBufferType===m.UNSIGNED_INT&&!m.getExtension("OES_element_index_uint"))throw new Error("Unable to render a 3d model with > 65535 triangles. Your web browser does not support the WebGL Extension OES_element_index_uint.");m.drawElements(m.TRIANGLES,d.vertexCount,d.indexBufferType,0)}else m.drawArrays(f||m.TRIANGLES,0,d.vertexCount)},v.default.RendererGL.prototype._drawPoints=function(f,g){var d=this.GL,m=this._getImmediatePointShader();this._setPointUniforms(m),this._bindBuffer(g,d.ARRAY_BUFFER,this._vToNArray(f),Float32Array,d.STATIC_DRAW),m.enableAttrib(m.attributes.aPosition,3),this._applyColorBlend(this.curStrokeColor),d.drawArrays(d.Points,0,f.length),m.unbindShader()};var C=v.default.RendererGL;H.default=C},{"../core/constants":272,"../core/main":283,"./p5.RenderBuffer":338,"./p5.RendererGL":341,"core-js/modules/es.array.fill":156,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.some":170,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.keys":189,"core-js/modules/es.object.to-string":190,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.typed-array.copy-within":213,"core-js/modules/es.typed-array.every":214,"core-js/modules/es.typed-array.fill":215,"core-js/modules/es.typed-array.filter":216,"core-js/modules/es.typed-array.find":218,"core-js/modules/es.typed-array.find-index":217,"core-js/modules/es.typed-array.float32-array":219,"core-js/modules/es.typed-array.for-each":221,"core-js/modules/es.typed-array.includes":222,"core-js/modules/es.typed-array.index-of":223,"core-js/modules/es.typed-array.iterator":226,"core-js/modules/es.typed-array.join":227,"core-js/modules/es.typed-array.last-index-of":228,"core-js/modules/es.typed-array.map":229,"core-js/modules/es.typed-array.reduce":231,"core-js/modules/es.typed-array.reduce-right":230,"core-js/modules/es.typed-array.reverse":232,"core-js/modules/es.typed-array.set":233,"core-js/modules/es.typed-array.slice":234,"core-js/modules/es.typed-array.some":235,"core-js/modules/es.typed-array.sort":236,"core-js/modules/es.typed-array.subarray":237,"core-js/modules/es.typed-array.to-locale-string":238,"core-js/modules/es.typed-array.to-string":239,"core-js/modules/es.typed-array.uint16-array":240,"core-js/modules/es.typed-array.uint32-array":241,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246}],341:[function(k,de,H){"use strict";function M(re){return(M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(le){return typeof le}:function(le){return le&&"function"==typeof Symbol&&le.constructor===Symbol&&le!==Symbol.prototype?"symbol":typeof le})(re)}function E(re){return(E="function"==typeof Symbol&&"symbol"===M(Symbol.iterator)?function(le){return M(le)}:function(le){return le&&"function"==typeof Symbol&&le.constructor===Symbol&&le!==Symbol.prototype?"symbol":M(le)})(re)}k("core-js/modules/es.symbol"),k("core-js/modules/es.symbol.description"),k("core-js/modules/es.symbol.iterator"),k("core-js/modules/es.array.concat"),k("core-js/modules/es.array.copy-within"),k("core-js/modules/es.array.every"),k("core-js/modules/es.array.fill"),k("core-js/modules/es.array.flat"),k("core-js/modules/es.array.flat-map"),k("core-js/modules/es.array.from"),k("core-js/modules/es.array.includes"),k("core-js/modules/es.array.iterator"),k("core-js/modules/es.array.map"),k("core-js/modules/es.array.slice"),k("core-js/modules/es.array.some"),k("core-js/modules/es.array.unscopables.flat"),k("core-js/modules/es.array.unscopables.flat-map"),k("core-js/modules/es.map"),k("core-js/modules/es.object.assign"),k("core-js/modules/es.object.get-own-property-descriptor"),k("core-js/modules/es.object.get-prototype-of"),k("core-js/modules/es.object.to-string"),k("core-js/modules/es.reflect.construct"),k("core-js/modules/es.reflect.get"),k("core-js/modules/es.regexp.to-string"),k("core-js/modules/es.set"),k("core-js/modules/es.string.includes"),k("core-js/modules/es.string.iterator"),k("core-js/modules/es.typed-array.float32-array"),k("core-js/modules/es.typed-array.float64-array"),k("core-js/modules/es.typed-array.int16-array"),k("core-js/modules/es.typed-array.uint8-array"),k("core-js/modules/es.typed-array.uint16-array"),k("core-js/modules/es.typed-array.uint32-array"),k("core-js/modules/es.typed-array.copy-within"),k("core-js/modules/es.typed-array.every"),k("core-js/modules/es.typed-array.fill"),k("core-js/modules/es.typed-array.filter"),k("core-js/modules/es.typed-array.find"),k("core-js/modules/es.typed-array.find-index"),k("core-js/modules/es.typed-array.for-each"),k("core-js/modules/es.typed-array.includes"),k("core-js/modules/es.typed-array.index-of"),k("core-js/modules/es.typed-array.iterator"),k("core-js/modules/es.typed-array.join"),k("core-js/modules/es.typed-array.last-index-of"),k("core-js/modules/es.typed-array.map"),k("core-js/modules/es.typed-array.reduce"),k("core-js/modules/es.typed-array.reduce-right"),k("core-js/modules/es.typed-array.reverse"),k("core-js/modules/es.typed-array.set"),k("core-js/modules/es.typed-array.slice"),k("core-js/modules/es.typed-array.some"),k("core-js/modules/es.typed-array.sort"),k("core-js/modules/es.typed-array.subarray"),k("core-js/modules/es.typed-array.to-locale-string"),k("core-js/modules/es.typed-array.to-string"),k("core-js/modules/es.weak-map"),k("core-js/modules/web.dom-collections.iterator"),k("core-js/modules/es.symbol"),k("core-js/modules/es.symbol.description"),k("core-js/modules/es.symbol.iterator"),k("core-js/modules/es.array.concat"),k("core-js/modules/es.array.copy-within"),k("core-js/modules/es.array.every"),k("core-js/modules/es.array.fill"),k("core-js/modules/es.array.flat"),k("core-js/modules/es.array.flat-map"),k("core-js/modules/es.array.from"),k("core-js/modules/es.array.includes"),k("core-js/modules/es.array.iterator"),k("core-js/modules/es.array.map"),k("core-js/modules/es.array.slice"),k("core-js/modules/es.array.some"),k("core-js/modules/es.array.unscopables.flat"),k("core-js/modules/es.array.unscopables.flat-map"),k("core-js/modules/es.map"),k("core-js/modules/es.object.assign"),k("core-js/modules/es.object.to-string"),k("core-js/modules/es.set"),k("core-js/modules/es.string.includes"),k("core-js/modules/es.string.iterator"),k("core-js/modules/es.typed-array.float32-array"),k("core-js/modules/es.typed-array.float64-array"),k("core-js/modules/es.typed-array.int16-array"),k("core-js/modules/es.typed-array.uint8-array"),k("core-js/modules/es.typed-array.uint16-array"),k("core-js/modules/es.typed-array.uint32-array"),k("core-js/modules/es.typed-array.copy-within"),k("core-js/modules/es.typed-array.every"),k("core-js/modules/es.typed-array.fill"),k("core-js/modules/es.typed-array.filter"),k("core-js/modules/es.typed-array.find"),k("core-js/modules/es.typed-array.find-index"),k("core-js/modules/es.typed-array.for-each"),k("core-js/modules/es.typed-array.includes"),k("core-js/modules/es.typed-array.index-of"),k("core-js/modules/es.typed-array.iterator"),k("core-js/modules/es.typed-array.join"),k("core-js/modules/es.typed-array.last-index-of"),k("core-js/modules/es.typed-array.map"),k("core-js/modules/es.typed-array.reduce"),k("core-js/modules/es.typed-array.reduce-right"),k("core-js/modules/es.typed-array.reverse"),k("core-js/modules/es.typed-array.set"),k("core-js/modules/es.typed-array.slice"),k("core-js/modules/es.typed-array.some"),k("core-js/modules/es.typed-array.sort"),k("core-js/modules/es.typed-array.subarray"),k("core-js/modules/es.typed-array.to-locale-string"),k("core-js/modules/es.typed-array.to-string"),k("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(H,"__esModule",{value:!0}),H.readPixelsWebGL=oe,H.readPixelWebGL=ie,H.default=void 0;var v=d(k("../core/main")),S=function(re){if(re&&re.__esModule)return re;if(null===re||"object"!==E(re)&&"function"!=typeof re)return{default:re};var le=g();if(le&&le.has(re))return le.get(re);var pe,Ae={},$=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(pe in re){var P;Object.prototype.hasOwnProperty.call(re,pe)&&((P=$?Object.getOwnPropertyDescriptor(re,pe):null)&&(P.get||P.set)?Object.defineProperty(Ae,pe,P):Ae[pe]=re[pe])}return Ae.default=re,le&&le.set(re,Ae),Ae}(k("../core/constants")),T=d(k("./GeometryBuilder")),C=d(k("libtess")),f=(k("./p5.Shader"),k("./p5.Camera"),k("../core/p5.Renderer"),k("./p5.Matrix"),k("./p5.Framebuffer"),k("path"),k("./p5.Texture"));function g(){var re;return"function"!=typeof WeakMap?null:(g=function(){return re},re=new WeakMap)}function d(re){return re&&re.__esModule?re:{default:re}}function m(re){return function(le){if(Array.isArray(le)){for(var pe=0,Ae=new Array(le.length);pe<le.length;pe++)Ae[pe]=le[pe];return Ae}}(re)||function(le){if(Symbol.iterator in Object(le)||"[object Arguments]"===Object.prototype.toString.call(le))return Array.from(le)}(re)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function p(re,le){for(var pe=0;pe<le.length;pe++){var Ae=le[pe];Ae.enumerable=Ae.enumerable||!1,Ae.configurable=!0,"value"in Ae&&(Ae.writable=!0),Object.defineProperty(re,Ae.key,Ae)}}function h(re,le,pe){return(h=typeof Reflect<"u"&&Reflect.get?Reflect.get:function(K,$,P){if(K=function(te,fe){for(;!Object.prototype.hasOwnProperty.call(te,fe)&&null!==(te=D(te)););return te}(K,$))return(K=Object.getOwnPropertyDescriptor(K,$)).get?K.get.call(P):K.value})(re,le,pe||re)}function y(re,le){return(y=Object.setPrototypeOf||function(pe,Ae){return pe.__proto__=Ae,pe})(re,le)}function x(re){if(void 0===re)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return re}function D(re){return(D=Object.setPrototypeOf?Object.getPrototypeOf:function(le){return le.__proto__||Object.getPrototypeOf(le)})(re)}function N(re,le,pe){le in re?Object.defineProperty(re,le,{value:pe,enumerable:!0,configurable:!0,writable:!0}):re[le]=pe}function U(re,le){q+="#define STROKE_CAP_".concat(re," ").concat(le,"\n"),z[S[re]]=le}function R(re,le){q+="#define STROKE_JOIN_".concat(re," ").concat(le,"\n"),F[S[re]]=le}var L,z={},F={},q="",Z={sphereMappingFrag:"#define PI 3.141592\n\nprecision highp float;\n  \nuniform sampler2D uSampler;\nuniform mat3 uNewNormalMatrix;\nuniform float uFovY;\nuniform float uAspect;\n\nvarying vec2 vTexCoord;\n  \nvoid main() {\n    float uFovX = uFovY * uAspect; \n    vec4 newTexColor = texture2D(uSampler, vTexCoord);\n    float angleY = mix(uFovY/2.0,  -uFovY/2.0, vTexCoord.y);\n    float angleX = mix(uFovX/2.0, -uFovX/2.0, vTexCoord.x);\n    vec3 rotatedNormal = vec3( angleX, angleY, 1.0 );\n    rotatedNormal = uNewNormalMatrix * normalize(rotatedNormal);\n    float temp = rotatedNormal.z;\n    rotatedNormal.z = rotatedNormal.x;\n    rotatedNormal.x = -temp;\n    vec2 suv;\n    suv.y = 0.5 + 0.5 * (-rotatedNormal.y);\n    suv.x = atan(rotatedNormal.z, rotatedNormal.x) / (2.0 * PI) + 0.5;\n    newTexColor = texture2D(uSampler, suv.xy);\n    gl_FragColor = newTexColor;\n}\n",immediateVert:"IN vec3 aPosition;\nIN vec4 aVertexColor;\n\nuniform mat4 uModelViewMatrix;\nuniform mat4 uProjectionMatrix;\nuniform float uResolution;\nuniform float uPointSize;\n\nOUT vec4 vColor;\nvoid main(void) {\n  vec4 positionVec4 = vec4(aPosition, 1.0);\n  gl_Position = uProjectionMatrix * uModelViewMatrix * positionVec4;\n  vColor = aVertexColor;\n  gl_PointSize = uPointSize;\n}\n",vertexColorVert:"IN vec3 aPosition;\nIN vec4 aVertexColor;\n\nuniform mat4 uModelViewMatrix;\nuniform mat4 uProjectionMatrix;\n\nOUT vec4 vColor;\n\nvoid main(void) {\n  vec4 positionVec4 = vec4(aPosition, 1.0);\n  gl_Position = uProjectionMatrix * uModelViewMatrix * positionVec4;\n  vColor = aVertexColor;\n}\n",vertexColorFrag:"IN vec4 vColor;\nvoid main(void) {\n  OUT_COLOR = vec4(vColor.rgb, 1.) * vColor.a;\n}\n",normalVert:"IN vec3 aPosition;\nIN vec3 aNormal;\nIN vec2 aTexCoord;\nIN vec4 aVertexColor;\n\nuniform mat4 uModelViewMatrix;\nuniform mat4 uProjectionMatrix;\nuniform mat3 uNormalMatrix;\n\nuniform vec4 uMaterialColor;\nuniform bool uUseVertexColor;\n\nOUT vec3 vVertexNormal;\nOUT highp vec2 vVertTexCoord;\nOUT vec4 vColor;\n\nvoid main(void) {\n  HOOK_beforeVertex();\n  vec4 positionVec4 = vec4(HOOK_getWorldPosition(\n    (uModelViewMatrix * vec4(HOOK_getLocalPosition(aPosition), 1.0)).xyz\n  ), 1.);\n\n  gl_Position = uProjectionMatrix * positionVec4;\n\n  vVertexNormal = HOOK_getWorldNormal(normalize(uNormalMatrix * HOOK_getLocalNormal(aNormal)));\n  vVertTexCoord = HOOK_getUV(aTexCoord);\n  vColor = HOOK_getVertexColor(uUseVertexColor ? aVertexColor : uMaterialColor);\n  HOOK_afterVertex();\n}\n",normalFrag:"IN vec3 vVertexNormal;\nvoid main(void) {\n  HOOK_beforeFragment();\n  OUT_COLOR = HOOK_getFinalColor(vec4(vVertexNormal, 1.0));\n  HOOK_afterFragment();\n}\n",basicFrag:"IN vec4 vColor;\nvoid main(void) {\n  HOOK_beforeFragment();\n  OUT_COLOR = HOOK_getFinalColor(vec4(vColor.rgb, 1.) * vColor.a);\n  HOOK_afterFragment();\n}\n",lightVert:(U("ROUND",0),U("PROJECT",1),U("SQUARE",2),R("ROUND",0),R("MITER",1),R("BEVEL",2),(k='#define PI 3.141592\n\nprecision highp float;\nprecision highp int;\n\nuniform mat4 uViewMatrix;\n\nuniform bool uUseLighting;\n\nuniform int uAmbientLightCount;\nuniform vec3 uAmbientColor[5];\nuniform mat3 uCameraRotation;\nuniform int uDirectionalLightCount;\nuniform vec3 uLightingDirection[5];\nuniform vec3 uDirectionalDiffuseColors[5];\nuniform vec3 uDirectionalSpecularColors[5];\n\nuniform int uPointLightCount;\nuniform vec3 uPointLightLocation[5];\nuniform vec3 uPointLightDiffuseColors[5];\t\nuniform vec3 uPointLightSpecularColors[5];\n\nuniform int uSpotLightCount;\nuniform float uSpotLightAngle[5];\nuniform float uSpotLightConc[5];\nuniform vec3 uSpotLightDiffuseColors[5];\nuniform vec3 uSpotLightSpecularColors[5];\nuniform vec3 uSpotLightLocation[5];\nuniform vec3 uSpotLightDirection[5];\n\nuniform bool uSpecular;\nuniform float uShininess;\nuniform float uMetallic;\n\nuniform float uConstantAttenuation;\nuniform float uLinearAttenuation;\nuniform float uQuadraticAttenuation;\n\n// setting from  _setImageLightUniforms()\n// boolean to initiate the calculateImageDiffuse and calculateImageSpecular\nuniform bool uUseImageLight;\n// texture for use in calculateImageDiffuse\nuniform sampler2D environmentMapDiffused;\n// texture for use in calculateImageSpecular\nuniform sampler2D environmentMapSpecular;\n\nconst float specularFactor = 2.0;\nconst float diffuseFactor = 0.73;\n\nstruct LightResult {\n  float specular;\n  float diffuse;\n};\n\nfloat _phongSpecular(\n  vec3 lightDirection,\n  vec3 viewDirection,\n  vec3 surfaceNormal,\n  float shininess) {\n\n  vec3 R = reflect(lightDirection, surfaceNormal);\n  return pow(max(0.0, dot(R, viewDirection)), shininess);\n}\n\nfloat _lambertDiffuse(vec3 lightDirection, vec3 surfaceNormal) {\n  return max(0.0, dot(-lightDirection, surfaceNormal));\n}\n\nLightResult _light(vec3 viewDirection, vec3 normal, vec3 lightVector, float shininess, float metallic) {\n\n  vec3 lightDir = normalize(lightVector);\n\n  //compute our diffuse & specular terms\n  LightResult lr;\n  float specularIntensity = mix(1.0, 0.4, metallic);\n  float diffuseIntensity = mix(1.0, 0.1, metallic);\n  if (uSpecular)\n    lr.specular = (_phongSpecular(lightDir, viewDirection, normal, shininess)) * specularIntensity;\n    lr.diffuse = _lambertDiffuse(lightDir, normal) * diffuseIntensity;\n  return lr;\n}\n\n// converts the range of "value" from [min1 to max1] to [min2 to max2]\nfloat map(float value, float min1, float max1, float min2, float max2) {\n  return min2 + (value - min1) * (max2 - min2) / (max1 - min1);\n}\n\nvec2 mapTextureToNormal( vec3 v ){\n  // x = r sin(phi) cos(theta)   \n  // y = r cos(phi)  \n  // z = r sin(phi) sin(theta)\n  float phi = acos( v.y );\n  // if phi is 0, then there are no x, z components\n  float theta = 0.0;\n  // else \n  theta = acos(v.x / sin(phi));\n  float sinTheta = v.z / sin(phi);\n  if (sinTheta < 0.0) {\n    // Turn it into -theta, but in the 0-2PI range\n    theta = 2.0 * PI - theta;\n  }\n  theta = theta / (2.0 * 3.14159);\n  phi = phi / 3.14159 ;\n  \n  vec2 angles = vec2( fract(theta + 0.25), 1.0 - phi );\n  return angles;\n}\n\n\nvec3 calculateImageDiffuse(vec3 vNormal, vec3 vViewPosition, float metallic){\n  // make 2 separate builds \n  vec3 worldCameraPosition =  vec3(0.0, 0.0, 0.0);  // hardcoded world camera position\n  vec3 worldNormal = normalize(vNormal * uCameraRotation);\n  vec2 newTexCoor = mapTextureToNormal( worldNormal );\n  vec4 texture = TEXTURE( environmentMapDiffused, newTexCoor );\n  // this is to make the darker sections more dark\n  // png and jpg usually flatten the brightness so it is to reverse that\n  return mix(smoothstep(vec3(0.0), vec3(1.0), texture.xyz), vec3(0.0), metallic);\n}\n\nvec3 calculateImageSpecular(vec3 vNormal, vec3 vViewPosition, float shininess, float metallic){\n  vec3 worldCameraPosition =  vec3(0.0, 0.0, 0.0);\n  vec3 worldNormal = normalize(vNormal);\n  vec3 lightDirection = normalize( vViewPosition - worldCameraPosition );\n  vec3 R = reflect(lightDirection, worldNormal) * uCameraRotation;\n  vec2 newTexCoor = mapTextureToNormal( R );\n#ifdef WEBGL2\n  // In p5js the range of shininess is >= 1,\n  // Therefore roughness range will be ([0,1]*8)*20 or [0, 160]\n  // The factor of 8 is because currently the getSpecularTexture\n  // only calculated 8 different levels of roughness\n  // The factor of 20 is just to spread up this range so that,\n  // [1, max] of shininess is converted to [0,160] of roughness\n  float roughness = 20. / shininess;\n  vec4 outColor = textureLod(environmentMapSpecular, newTexCoor, roughness * 8.);\n#else\n  vec4 outColor = TEXTURE(environmentMapSpecular, newTexCoor);\n#endif\n  // this is to make the darker sections more dark\n  // png and jpg usually flatten the brightness so it is to reverse that\n  return mix(\n    pow(outColor.xyz, vec3(10)),\n    pow(outColor.xyz, vec3(1.2)),\n    metallic \n  );\n}\n\nvoid totalLight(\n  vec3 modelPosition,\n  vec3 normal,\n  float shininess,\n  float metallic,\n  out vec3 totalDiffuse,\n  out vec3 totalSpecular\n) {\n\n  totalSpecular = vec3(0.0);\n\n  if (!uUseLighting) {\n    totalDiffuse = vec3(1.0);\n    return;\n  }\n\n  totalDiffuse = vec3(0.0);\n\n  vec3 viewDirection = normalize(-modelPosition);\n\n  for (int j = 0; j < 5; j++) {\n    if (j < uDirectionalLightCount) {\n      vec3 lightVector = (uViewMatrix * vec4(uLightingDirection[j], 0.0)).xyz;\n      vec3 lightColor = uDirectionalDiffuseColors[j];\n      vec3 specularColor = uDirectionalSpecularColors[j];\n      LightResult result = _light(viewDirection, normal, lightVector, shininess, metallic);\n      totalDiffuse += result.diffuse * lightColor;\n      totalSpecular += result.specular * lightColor * specularColor;\n    }\n\n    if (j < uPointLightCount) {\n      vec3 lightPosition = (uViewMatrix * vec4(uPointLightLocation[j], 1.0)).xyz;\n      vec3 lightVector = modelPosition - lightPosition;\n      //calculate attenuation\n      float lightDistance = length(lightVector);\n      float lightFalloff = 1.0 / (uConstantAttenuation + lightDistance * uLinearAttenuation + (lightDistance * lightDistance) * uQuadraticAttenuation);\n      vec3 lightColor = lightFalloff * uPointLightDiffuseColors[j];\n      vec3 specularColor = lightFalloff * uPointLightSpecularColors[j];\n\n      LightResult result = _light(viewDirection, normal, lightVector, shininess, metallic);\n      totalDiffuse += result.diffuse * lightColor;\n      totalSpecular += result.specular * lightColor * specularColor;\n    }\n\n    if(j < uSpotLightCount) {\n      vec3 lightPosition = (uViewMatrix * vec4(uSpotLightLocation[j], 1.0)).xyz;\n      vec3 lightVector = modelPosition - lightPosition;\n    \n      float lightDistance = length(lightVector);\n      float lightFalloff = 1.0 / (uConstantAttenuation + lightDistance * uLinearAttenuation + (lightDistance * lightDistance) * uQuadraticAttenuation);\n\n      vec3 lightDirection = (uViewMatrix * vec4(uSpotLightDirection[j], 0.0)).xyz;\n      float spotDot = dot(normalize(lightVector), normalize(lightDirection));\n      float spotFalloff;\n      if(spotDot < uSpotLightAngle[j]) {\n        spotFalloff = 0.0;\n      }\n      else {\n        spotFalloff = pow(spotDot, uSpotLightConc[j]);\n      }\n      lightFalloff *= spotFalloff;\n\n      vec3 lightColor = uSpotLightDiffuseColors[j];\n      vec3 specularColor = uSpotLightSpecularColors[j];\n     \n      LightResult result = _light(viewDirection, normal, lightVector, shininess, metallic);\n      \n      totalDiffuse += result.diffuse * lightColor * lightFalloff;\n      totalSpecular += result.specular * lightColor * specularColor * lightFalloff;\n    }\n  }\n\n  if( uUseImageLight ){\n    totalDiffuse += calculateImageDiffuse(normal, modelPosition, metallic);\n    totalSpecular += calculateImageSpecular(normal, modelPosition, shininess, metallic);\n  }\n\n  totalDiffuse *= diffuseFactor;\n  totalSpecular *= specularFactor;\n}\n')+"// include lighting.glgl\n\nIN vec3 aPosition;\nIN vec3 aNormal;\nIN vec2 aTexCoord;\nIN vec4 aVertexColor;\n\nuniform mat4 uModelViewMatrix;\nuniform mat4 uProjectionMatrix;\nuniform mat3 uNormalMatrix;\n\nuniform bool uUseVertexColor;\nuniform vec4 uMaterialColor;\n\nOUT highp vec2 vVertTexCoord;\nOUT vec3 vDiffuseColor;\nOUT vec3 vSpecularColor;\nOUT vec4 vColor;\n\nvoid main(void) {\n\n  vec4 viewModelPosition = uModelViewMatrix * vec4(aPosition, 1.0);\n  gl_Position = uProjectionMatrix * viewModelPosition;\n\n  vec3 vertexNormal = normalize(uNormalMatrix * aNormal);\n  vVertTexCoord = aTexCoord;\n\n  totalLight(viewModelPosition.xyz, vertexNormal, vDiffuseColor, vSpecularColor);\n\n  for (int i = 0; i < 8; i++) {\n    if (i < uAmbientLightCount) {\n      vDiffuseColor += uAmbientColor[i];\n    }\n  }\n  \n  vColor = (uUseVertexColor ? aVertexColor : uMaterialColor);\n}\n"),lightTextureFrag:"uniform vec4 uTint;\nuniform sampler2D uSampler;\nuniform bool isTexture;\nuniform bool uEmissive;\n\nIN highp vec2 vVertTexCoord;\nIN vec3 vDiffuseColor;\nIN vec3 vSpecularColor;\nIN vec4 vColor;\n\nvoid main(void) {\n  if(uEmissive && !isTexture) {\n    OUT_COLOR = vColor;\n  }\n  else {\n    vec4 baseColor = isTexture\n      // Textures come in with premultiplied alpha. To apply tint and still have\n      // premultiplied alpha output, we need to multiply the RGB channels by the\n      // tint RGB, and all channels by the tint alpha.\n      ? TEXTURE(uSampler, vVertTexCoord) * vec4(uTint.rgb/255., 1.) * (uTint.a/255.)\n      // Colors come in with unmultiplied alpha, so we need to multiply the RGB\n      // channels by alpha to convert it to premultiplied alpha.\n      : vec4(vColor.rgb * vColor.a, vColor.a);\n    OUT_COLOR = vec4(baseColor.rgb * vDiffuseColor + vSpecularColor, baseColor.a);\n  }\n}\n",phongVert:"precision highp int;\n\nIN vec3 aPosition;\nIN vec3 aNormal;\nIN vec2 aTexCoord;\nIN vec4 aVertexColor;\n\nuniform vec3 uAmbientColor[5];\n\nuniform mat4 uModelViewMatrix;\nuniform mat4 uProjectionMatrix;\nuniform mat3 uNormalMatrix;\nuniform int uAmbientLightCount;\n\nuniform bool uUseVertexColor;\nuniform vec4 uMaterialColor;\n\nOUT vec3 vNormal;\nOUT vec2 vTexCoord;\nOUT vec3 vViewPosition;\nOUT vec3 vAmbientColor;\nOUT vec4 vColor;\n\nvoid main(void) {\n  HOOK_beforeVertex();\n  vec4 viewModelPosition = vec4(HOOK_getWorldPosition(\n    (uModelViewMatrix * vec4(HOOK_getLocalPosition(aPosition), 1.0)).xyz\n  ), 1.);\n\n  // Pass varyings to fragment shader\n  vViewPosition = viewModelPosition.xyz;\n  gl_Position = uProjectionMatrix * viewModelPosition;  \n\n  vNormal = HOOK_getWorldNormal(uNormalMatrix * HOOK_getLocalNormal(aNormal));\n  vTexCoord = HOOK_getUV(aTexCoord);\n\n  // TODO: this should be a uniform\n  vAmbientColor = vec3(0.0);\n  for (int i = 0; i < 5; i++) {\n    if (i < uAmbientLightCount) {\n      vAmbientColor += uAmbientColor[i];\n    }\n  }\n  \n  vColor = HOOK_getVertexColor((uUseVertexColor ? aVertexColor : uMaterialColor));\n  HOOK_afterVertex();\n}\n",phongFrag:k+"// include lighting.glsl\nprecision highp int;\n\nuniform bool uHasSetAmbient;\nuniform vec4 uSpecularMatColor;\nuniform vec4 uAmbientMatColor;\nuniform vec4 uEmissiveMatColor;\n\nuniform vec4 uTint;\nuniform sampler2D uSampler;\nuniform bool isTexture;\n\nIN vec3 vNormal;\nIN vec2 vTexCoord;\nIN vec3 vViewPosition;\nIN vec3 vAmbientColor;\nIN vec4 vColor;\n\nstruct ColorComponents {\n  vec3 baseColor;\n  float opacity;\n  vec3 ambientColor;\n  vec3 specularColor;\n  vec3 diffuse;\n  vec3 ambient;\n  vec3 specular;\n  vec3 emissive;\n};\n\nstruct Inputs {\n  vec3 normal;\n  vec2 texCoord;\n  vec3 ambientLight;\n  vec3 ambientMaterial;\n  vec3 specularMaterial;\n  vec3 emissiveMaterial;\n  vec4 color;\n  float shininess;\n  float metalness;\n};\n\nvoid main(void) {\n  HOOK_beforeFragment();\n\n  Inputs inputs;\n  inputs.normal = normalize(vNormal);\n  inputs.texCoord = vTexCoord;\n  inputs.ambientLight = vAmbientColor;\n  inputs.color = isTexture\n      // Textures come in with premultiplied alpha. To apply tint and still have\n      // premultiplied alpha output, we need to multiply the RGB channels by the\n      // tint RGB, and all channels by the tint alpha.\n      ? TEXTURE(uSampler, vTexCoord) * vec4(uTint.rgb/255., 1.) * (uTint.a/255.)\n      // Colors come in with unmultiplied alpha, so we need to multiply the RGB\n      // channels by alpha to convert it to premultiplied alpha.\n      : vec4(vColor.rgb * vColor.a, vColor.a);\n  inputs.shininess = uShininess;\n  inputs.metalness = uMetallic;\n  inputs.ambientMaterial = uHasSetAmbient ? uAmbientMatColor.rgb : inputs.color.rgb;\n  inputs.specularMaterial = uSpecularMatColor.rgb;\n  inputs.emissiveMaterial = uEmissiveMatColor.rgb;\n  inputs = HOOK_getPixelInputs(inputs);\n\n  vec3 diffuse;\n  vec3 specular;\n  totalLight(vViewPosition, inputs.normal, inputs.shininess, inputs.metalness, diffuse, specular);\n\n  // Calculating final color as result of all lights (plus emissive term).\n\n  vec2 texCoord = inputs.texCoord;\n  vec4 baseColor = inputs.color;\n  ColorComponents c;\n  c.opacity = baseColor.a;\n  c.baseColor = baseColor.rgb;\n  c.ambientColor = inputs.ambientMaterial;\n  c.specularColor = inputs.specularMaterial;\n  c.diffuse = diffuse;\n  c.ambient = inputs.ambientLight;\n  c.specular = specular;\n  c.emissive = inputs.emissiveMaterial;\n  OUT_COLOR = HOOK_getFinalColor(HOOK_combineColors(c));\n  HOOK_afterFragment();\n}\n",fontVert:"IN vec3 aPosition;\nIN vec2 aTexCoord;\nuniform mat4 uModelViewMatrix;\nuniform mat4 uProjectionMatrix;\n\nuniform vec4 uGlyphRect;\nuniform float uGlyphOffset;\n\nOUT vec2 vTexCoord;\nOUT float w;\n\nvoid main() {\n  vec4 positionVec4 = vec4(aPosition, 1.0);\n\n  // scale by the size of the glyph's rectangle\n  positionVec4.xy *= uGlyphRect.zw - uGlyphRect.xy;\n\n  // Expand glyph bounding boxes by 1px on each side to give a bit of room\n  // for antialiasing\n  vec3 newOrigin = (uModelViewMatrix * vec4(0., 0., 0., 1.)).xyz;\n  vec3 newDX = (uModelViewMatrix * vec4(1., 0., 0., 1.)).xyz;\n  vec3 newDY = (uModelViewMatrix * vec4(0., 1., 0., 1.)).xyz;\n  vec2 pixelScale = vec2(\n    1. / length(newOrigin - newDX),\n    1. / length(newOrigin - newDY)\n  );\n  vec2 offset = pixelScale * normalize(aTexCoord - vec2(0.5, 0.5)) * vec2(1., -1.);\n  vec2 textureOffset = offset * (1. / vec2(\n    uGlyphRect.z - uGlyphRect.x,\n    uGlyphRect.w - uGlyphRect.y\n  ));\n\n  // move to the corner of the glyph\n  positionVec4.xy += uGlyphRect.xy;\n\n  // move to the letter's line offset\n  positionVec4.x += uGlyphOffset;\n\n  positionVec4.xy += offset;\n  \n  gl_Position = uProjectionMatrix * uModelViewMatrix * positionVec4;\n  vTexCoord = aTexCoord + textureOffset;\n  w = gl_Position.w;\n}\n",fontFrag:"#ifndef WEBGL2\n#extension GL_OES_standard_derivatives : enable\n#endif\n\n#if 0\n  // simulate integer math using floats\n\t#define int float\n\t#define ivec2 vec2\n\t#define INT(x) float(x)\n\n\tint ifloor(float v) { return floor(v); }\n\tivec2 ifloor(vec2 v) { return floor(v); }\n\n#else\n  // use native integer math\n\tprecision highp int;\n\t#define INT(x) x\n\n\tint ifloor(float v) { return int(v); }\n\tint ifloor(int v) { return v; }\n\tivec2 ifloor(vec2 v) { return ivec2(v); }\n\n#endif\n\nuniform sampler2D uSamplerStrokes;\nuniform sampler2D uSamplerRowStrokes;\nuniform sampler2D uSamplerRows;\nuniform sampler2D uSamplerColStrokes;\nuniform sampler2D uSamplerCols;\n\nuniform ivec2 uStrokeImageSize;\nuniform ivec2 uCellsImageSize;\nuniform ivec2 uGridImageSize;\n\nuniform ivec2 uGridOffset;\nuniform ivec2 uGridSize;\nuniform vec4 uMaterialColor;\n\nIN vec2 vTexCoord;\n\n// some helper functions\nint ROUND(float v) { return ifloor(v + 0.5); }\nivec2 ROUND(vec2 v) { return ifloor(v + 0.5); }\nfloat saturate(float v) { return clamp(v, 0.0, 1.0); }\nvec2 saturate(vec2 v) { return clamp(v, 0.0, 1.0); }\n\nint mul(float v1, int v2) {\n  return ifloor(v1 * float(v2));\n}\n\nivec2 mul(vec2 v1, ivec2 v2) {\n  return ifloor(v1 * vec2(v2) + 0.5);\n}\n\n// unpack a 16-bit integer from a float vec2\nint getInt16(vec2 v) {\n  ivec2 iv = ROUND(v * 255.0);\n  return iv.x * INT(128) + iv.y;\n}\n\nvec2 pixelScale;\nvec2 coverage = vec2(0.0);\nvec2 weight = vec2(0.5);\nconst float minDistance = 1.0/8192.0;\nconst float hardness = 1.05; // amount of antialias\n\n// the maximum number of curves in a glyph\nconst int N = INT(250);\n\n// retrieves an indexed pixel from a sampler\nvec4 getTexel(sampler2D sampler, int pos, ivec2 size) {\n  int width = size.x;\n  int y = ifloor(pos / width);\n  int x = pos - y * width;  // pos % width\n\n  return TEXTURE(sampler, (vec2(x, y) + 0.5) / vec2(size));\n}\n\nvoid calulateCrossings(vec2 p0, vec2 p1, vec2 p2, out vec2 C1, out vec2 C2) {\n\n  // get the coefficients of the quadratic in t\n  vec2 a = p0 - p1 * 2.0 + p2;\n  vec2 b = p0 - p1;\n  vec2 c = p0 - vTexCoord;\n\n  // found out which values of 't' it crosses the axes\n  vec2 surd = sqrt(max(vec2(0.0), b * b - a * c));\n  vec2 t1 = ((b - surd) / a).yx;\n  vec2 t2 = ((b + surd) / a).yx;\n\n  // approximate straight lines to avoid rounding errors\n  if (abs(a.y) < 0.001)\n    t1.x = t2.x = c.y / (2.0 * b.y);\n\n  if (abs(a.x) < 0.001)\n    t1.y = t2.y = c.x / (2.0 * b.x);\n\n  // plug into quadratic formula to find the corrdinates of the crossings\n  C1 = ((a * t1 - b * 2.0) * t1 + c) * pixelScale;\n  C2 = ((a * t2 - b * 2.0) * t2 + c) * pixelScale;\n}\n\nvoid coverageX(vec2 p0, vec2 p1, vec2 p2) {\n\n  vec2 C1, C2;\n  calulateCrossings(p0, p1, p2, C1, C2);\n\n  // determine on which side of the x-axis the points lie\n  bool y0 = p0.y > vTexCoord.y;\n  bool y1 = p1.y > vTexCoord.y;\n  bool y2 = p2.y > vTexCoord.y;\n\n  // could web be under the curve (after t1)?\n  if (y1 ? !y2 : y0) {\n    // add the coverage for t1\n    coverage.x += saturate(C1.x + 0.5);\n    // calculate the anti-aliasing for t1\n    weight.x = min(weight.x, abs(C1.x));\n  }\n\n  // are we outside the curve (after t2)?\n  if (y1 ? !y0 : y2) {\n    // subtract the coverage for t2\n    coverage.x -= saturate(C2.x + 0.5);\n    // calculate the anti-aliasing for t2\n    weight.x = min(weight.x, abs(C2.x));\n  }\n}\n\n// this is essentially the same as coverageX, but with the axes swapped\nvoid coverageY(vec2 p0, vec2 p1, vec2 p2) {\n\n  vec2 C1, C2;\n  calulateCrossings(p0, p1, p2, C1, C2);\n\n  bool x0 = p0.x > vTexCoord.x;\n  bool x1 = p1.x > vTexCoord.x;\n  bool x2 = p2.x > vTexCoord.x;\n\n  if (x1 ? !x2 : x0) {\n    coverage.y -= saturate(C1.y + 0.5);\n    weight.y = min(weight.y, abs(C1.y));\n  }\n\n  if (x1 ? !x0 : x2) {\n    coverage.y += saturate(C2.y + 0.5);\n    weight.y = min(weight.y, abs(C2.y));\n  }\n}\n\nvoid main() {\n\n  // calculate the pixel scale based on screen-coordinates\n  pixelScale = hardness / fwidth(vTexCoord);\n\n  // which grid cell is this pixel in?\n  ivec2 gridCoord = ifloor(vTexCoord * vec2(uGridSize));\n\n  // intersect curves in this row\n  {\n    // the index into the row info bitmap\n    int rowIndex = gridCoord.y + uGridOffset.y;\n    // fetch the info texel\n    vec4 rowInfo = getTexel(uSamplerRows, rowIndex, uGridImageSize);\n    // unpack the rowInfo\n    int rowStrokeIndex = getInt16(rowInfo.xy);\n    int rowStrokeCount = getInt16(rowInfo.zw);\n\n    for (int iRowStroke = INT(0); iRowStroke < N; iRowStroke++) {\n      if (iRowStroke >= rowStrokeCount)\n        break;\n\n      // each stroke is made up of 3 points: the start and control point\n      // and the start of the next curve.\n      // fetch the indices of this pair of strokes:\n      vec4 strokeIndices = getTexel(uSamplerRowStrokes, rowStrokeIndex++, uCellsImageSize);\n\n      // unpack the stroke index\n      int strokePos = getInt16(strokeIndices.xy);\n\n      // fetch the two strokes\n      vec4 stroke0 = getTexel(uSamplerStrokes, strokePos + INT(0), uStrokeImageSize);\n      vec4 stroke1 = getTexel(uSamplerStrokes, strokePos + INT(1), uStrokeImageSize);\n\n      // calculate the coverage\n      coverageX(stroke0.xy, stroke0.zw, stroke1.xy);\n    }\n  }\n\n  // intersect curves in this column\n  {\n    int colIndex = gridCoord.x + uGridOffset.x;\n    vec4 colInfo = getTexel(uSamplerCols, colIndex, uGridImageSize);\n    int colStrokeIndex = getInt16(colInfo.xy);\n    int colStrokeCount = getInt16(colInfo.zw);\n    \n    for (int iColStroke = INT(0); iColStroke < N; iColStroke++) {\n      if (iColStroke >= colStrokeCount)\n        break;\n\n      vec4 strokeIndices = getTexel(uSamplerColStrokes, colStrokeIndex++, uCellsImageSize);\n\n      int strokePos = getInt16(strokeIndices.xy);\n      vec4 stroke0 = getTexel(uSamplerStrokes, strokePos + INT(0), uStrokeImageSize);\n      vec4 stroke1 = getTexel(uSamplerStrokes, strokePos + INT(1), uStrokeImageSize);\n      coverageY(stroke0.xy, stroke0.zw, stroke1.xy);\n    }\n  }\n\n  weight = saturate(1.0 - weight * 2.0);\n  float distance = max(weight.x + weight.y, minDistance); // manhattan approx.\n  float antialias = abs(dot(coverage, weight) / distance);\n  float cover = min(abs(coverage.x), abs(coverage.y));\n  OUT_COLOR = vec4(uMaterialColor.rgb, 1.) * uMaterialColor.a;\n  OUT_COLOR *= saturate(max(antialias, cover));\n}\n",lineVert:q+"/*\n  Part of the Processing project - http://processing.org\n  Copyright (c) 2012-15 The Processing Foundation\n  Copyright (c) 2004-12 Ben Fry and Casey Reas\n  Copyright (c) 2001-04 Massachusetts Institute of Technology\n  This library is free software; you can redistribute it and/or\n  modify it under the terms of the GNU Lesser General Public\n  License as published by the Free Software Foundation, version 2.1.\n  This library is distributed in the hope that it will be useful,\n  but WITHOUT ANY WARRANTY; without even the implied warranty of\n  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n  Lesser General Public License for more details.\n  You should have received a copy of the GNU Lesser General\n  Public License along with this library; if not, write to the\n  Free Software Foundation, Inc., 59 Temple Place, Suite 330,\n  Boston, MA  02111-1307  USA\n*/\n\n#define PROCESSING_LINE_SHADER\n\nprecision highp int;\nprecision highp float;\n\nuniform mat4 uModelViewMatrix;\nuniform mat4 uProjectionMatrix;\nuniform float uStrokeWeight;\n\nuniform bool uUseLineColor;\nuniform vec4 uMaterialColor;\n\nuniform vec4 uViewport;\nuniform int uPerspective;\nuniform int uStrokeJoin;\n\nIN vec4 aPosition;\nIN vec3 aTangentIn;\nIN vec3 aTangentOut;\nIN float aSide;\nIN vec4 aVertexColor;\n\nOUT vec4 vColor;\nOUT vec2 vTangent;\nOUT vec2 vCenter;\nOUT vec2 vPosition;\nOUT float vMaxDist;\nOUT float vCap;\nOUT float vJoin;\nOUT float vStrokeWeight;\n\nvec2 lineIntersection(vec2 aPoint, vec2 aDir, vec2 bPoint, vec2 bDir) {\n  // Rotate and translate so a starts at the origin and goes out to the right\n  bPoint -= aPoint;\n  vec2 rotatedBFrom = vec2(\n    bPoint.x*aDir.x + bPoint.y*aDir.y,\n    bPoint.y*aDir.x - bPoint.x*aDir.y\n  );\n  vec2 bTo = bPoint + bDir;\n  vec2 rotatedBTo = vec2(\n    bTo.x*aDir.x + bTo.y*aDir.y,\n    bTo.y*aDir.x - bTo.x*aDir.y\n  );\n  float intersectionDistance =\n    rotatedBTo.x + (rotatedBFrom.x - rotatedBTo.x) * rotatedBTo.y /\n    (rotatedBTo.y - rotatedBFrom.y);\n  return aPoint + aDir * intersectionDistance;\n}\n\nvoid main() {\n  HOOK_beforeVertex();\n  // Caps have one of either the in or out tangent set to 0\n  vCap = (aTangentIn == vec3(0.)) != (aTangentOut == (vec3(0.)))\n    ? 1. : 0.;\n\n  // Joins have two unique, defined tangents\n  vJoin = (\n    aTangentIn != vec3(0.) &&\n    aTangentOut != vec3(0.) &&\n    aTangentIn != aTangentOut\n  ) ? 1. : 0.;\n\n  vec4 localPosition = vec4(HOOK_getLocalPosition(aPosition.xyz), 1.);\n  vec4 posp = vec4(HOOK_getWorldPosition((uModelViewMatrix * localPosition).xyz), 1.);\n  vec4 posqIn = posp + uModelViewMatrix * vec4(aTangentIn, 0);\n  vec4 posqOut = posp + uModelViewMatrix * vec4(aTangentOut, 0);\n  float strokeWeight = HOOK_getStrokeWeight(uStrokeWeight);\n  vStrokeWeight = strokeWeight;\n\n  float facingCamera = pow(\n    // The word space tangent's z value is 0 if it's facing the camera\n    abs(normalize(posqIn-posp).z),\n\n    // Using pow() here to ramp `facingCamera` up from 0 to 1 really quickly\n    // so most lines get scaled and don't get clipped\n    0.25\n  );\n\n  // Moving vertices slightly toward the camera\n  // to avoid depth-fighting with the fill triangles.\n  // A mix of scaling and offsetting is used based on distance\n  // Discussion here:\n  // https://github.com/processing/p5.js/issues/7200 \n\n  // using a scale <1 moves the lines towards nearby camera\n  // in order to prevent popping effects due to half of\n  // the line disappearing behind the geometry faces.\n  float zDistance = -posp.z; \n  float distanceFactor = smoothstep(0.0, 800.0, zDistance); \n  \n  // Discussed here:\n  // http://www.opengl.org/discussion_boards/ubbthreads.php?ubb=showflat&Number=252848  \n  float scale = mix(1., 0.995, facingCamera);\n  float dynamicScale = mix(scale, 1.0, distanceFactor); // Closer = more scale, farther = less\n\n  posp.xyz = posp.xyz * dynamicScale;\n  posqIn.xyz = posqIn.xyz * dynamicScale;\n  posqOut.xyz = posqOut.xyz * dynamicScale;\n\n  // Moving vertices slightly toward camera when far away \n  // https://github.com/processing/p5.js/issues/6956 \n  float zOffset = mix(0., -1., facingCamera);\n  float dynamicZAdjustment = mix(0.0, zOffset, distanceFactor); // Closer = less zAdjustment, farther = more\n\n  posp.z -= dynamicZAdjustment;\n  posqIn.z -= dynamicZAdjustment;\n  posqOut.z -= dynamicZAdjustment;\n  \n  vec4 p = uProjectionMatrix * posp;\n  vec4 qIn = uProjectionMatrix * posqIn;\n  vec4 qOut = uProjectionMatrix * posqOut;\n  vCenter = HOOK_getLineCenter(p.xy);\n\n  // formula to convert from clip space (range -1..1) to screen space (range 0..[width or height])\n  // screen_p = (p.xy/p.w + <1,1>) * 0.5 * uViewport.zw\n\n  // prevent division by W by transforming the tangent formula (div by 0 causes\n  // the line to disappear, see https://github.com/processing/processing/issues/5183)\n  // t = screen_q - screen_p\n  //\n  // tangent is normalized and we don't care which aDirection it points to (+-)\n  // t = +- normalize( screen_q - screen_p )\n  // t = +- normalize( (q.xy/q.w+<1,1>)*0.5*uViewport.zw - (p.xy/p.w+<1,1>)*0.5*uViewport.zw )\n  //\n  // extract common factor, <1,1> - <1,1> cancels out\n  // t = +- normalize( (q.xy/q.w - p.xy/p.w) * 0.5 * uViewport.zw )\n  //\n  // convert to common divisor\n  // t = +- normalize( ((q.xy*p.w - p.xy*q.w) / (p.w*q.w)) * 0.5 * uViewport.zw )\n  //\n  // remove the common scalar divisor/factor, not needed due to normalize and +-\n  // (keep uViewport - can't remove because it has different components for x and y\n  //  and corrects for aspect ratio, see https://github.com/processing/processing/issues/5181)\n  // t = +- normalize( (q.xy*p.w - p.xy*q.w) * uViewport.zw )\n\n  vec2 tangentIn = normalize((qIn.xy*p.w - p.xy*qIn.w) * uViewport.zw);\n  vec2 tangentOut = normalize((qOut.xy*p.w - p.xy*qOut.w) * uViewport.zw);\n\n  vec2 curPerspScale;\n  if(uPerspective == 1) {\n    // Perspective ---\n    // convert from world to clip by multiplying with projection scaling factor\n    // to get the right thickness (see https://github.com/processing/processing/issues/5182)\n\n    // The y value of the projection matrix may be flipped if rendering to a Framebuffer.\n    // Multiplying again by its sign here negates the flip to get just the scale.\n    curPerspScale = (uProjectionMatrix * vec4(1, sign(uProjectionMatrix[1][1]), 0, 0)).xy;\n  } else {\n    // No Perspective ---\n    // multiply by W (to cancel out division by W later in the pipeline) and\n    // convert from screen to clip (derived from clip to screen above)\n    curPerspScale = p.w / (0.5 * uViewport.zw);\n  }\n\n  vec2 offset;\n  if (vJoin == 1.) {\n    vTangent = normalize(tangentIn + tangentOut);\n    vec2 normalIn = vec2(-tangentIn.y, tangentIn.x);\n    vec2 normalOut = vec2(-tangentOut.y, tangentOut.x);\n    float side = sign(aSide);\n    float sideEnum = abs(aSide);\n\n    // We generate vertices for joins on either side of the centerline, but\n    // the \"elbow\" side is the only one needing a join. By not setting the\n    // offset for the other side, all its vertices will end up in the same\n    // spot and not render, effectively discarding it.\n    if (sign(dot(tangentOut, vec2(-tangentIn.y, tangentIn.x))) != side) {\n      // Side enums:\n      //   1: the side going into the join\n      //   2: the middle of the join\n      //   3: the side going out of the join\n      if (sideEnum == 2.) {\n        // Calculate the position + tangent on either side of the join, and\n        // find where the lines intersect to find the elbow of the join\n        vec2 c = (posp.xy/posp.w + vec2(1.,1.)) * 0.5 * uViewport.zw;\n        vec2 intersection = lineIntersection(\n          c + (side * normalIn * strokeWeight / 2.),\n          tangentIn,\n          c + (side * normalOut * strokeWeight / 2.),\n          tangentOut\n        );\n        offset = (intersection - c);\n\n        // When lines are thick and the angle of the join approaches 180, the\n        // elbow might be really far from the center. We'll apply a limit to\n        // the magnitude to avoid lines going across the whole screen when this\n        // happens.\n        float mag = length(offset);\n        float maxMag = 3. * strokeWeight;\n        if (mag > maxMag) {\n          offset *= maxMag / mag;\n        }\n      } else if (sideEnum == 1.) {\n        offset = side * normalIn * strokeWeight / 2.;\n      } else if (sideEnum == 3.) {\n        offset = side * normalOut * strokeWeight / 2.;\n      }\n    }\n    if (uStrokeJoin == STROKE_JOIN_BEVEL) {\n      vec2 avgNormal = vec2(-vTangent.y, vTangent.x);\n      vMaxDist = abs(dot(avgNormal, normalIn * strokeWeight / 2.));\n    } else {\n      vMaxDist = strokeWeight / 2.;\n    }\n  } else {\n    vec2 tangent = aTangentIn == vec3(0.) ? tangentOut : tangentIn;\n    vTangent = tangent;\n    vec2 normal = vec2(-tangent.y, tangent.x);\n\n    float normalOffset = sign(aSide);\n    // Caps will have side values of -2 or 2 on the edge of the cap that\n    // extends out from the line\n    float tangentOffset = abs(aSide) - 1.;\n    offset = (normal * normalOffset + tangent * tangentOffset) *\n      strokeWeight * 0.5;\n    vMaxDist = strokeWeight / 2.;\n  }\n  vPosition = HOOK_getLinePosition(vCenter + offset);\n\n  gl_Position.xy = p.xy + offset.xy * curPerspScale;\n  gl_Position.zw = p.zw;\n  \n  vColor = HOOK_getVertexColor(uUseLineColor ? aVertexColor : uMaterialColor);\n  HOOK_afterVertex();\n}\n",lineFrag:q+"precision highp int;\nprecision highp float;\n\nuniform vec4 uMaterialColor;\nuniform int uStrokeCap;\nuniform int uStrokeJoin;\n\nIN vec4 vColor;\nIN vec2 vTangent;\nIN vec2 vCenter;\nIN vec2 vPosition;\nIN float vStrokeWeight;\nIN float vMaxDist;\nIN float vCap;\nIN float vJoin;\n\nfloat distSquared(vec2 a, vec2 b) {\n  vec2 aToB = b - a;\n  return dot(aToB, aToB);\n}\n\nstruct Inputs {\n  vec4 color;\n  vec2 tangent;\n  vec2 center;\n  vec2 position;\n  float strokeWeight;\n};\n\nvoid main() {\n  HOOK_beforeFragment();\n\n  Inputs inputs;\n  inputs.color = vColor;\n  inputs.tangent = vTangent;\n  inputs.center = vCenter;\n  inputs.position = vPosition;\n  inputs.strokeWeight = vStrokeWeight;\n  inputs = HOOK_getPixelInputs(inputs);\n\n  if (vCap > 0.) {\n    if (\n      uStrokeCap == STROKE_CAP_ROUND &&\n      HOOK_shouldDiscard(distSquared(inputs.position, inputs.center) > inputs.strokeWeight * inputs.strokeWeight * 0.25)\n    ) {\n      discard;\n    } else if (\n      uStrokeCap == STROKE_CAP_SQUARE &&\n      HOOK_shouldDiscard(dot(inputs.position - inputs.center, inputs.tangent) > 0.)\n    ) {\n      discard;\n    // Use full area for PROJECT\n    } else if (HOOK_shouldDiscard(false)) {\n      discard;\n    }\n  } else if (vJoin > 0.) {\n    if (\n      uStrokeJoin == STROKE_JOIN_ROUND &&\n      HOOK_shouldDiscard(distSquared(inputs.position, inputs.center) > inputs.strokeWeight * inputs.strokeWeight * 0.25)\n    ) {\n      discard;\n    } else if (uStrokeJoin == STROKE_JOIN_BEVEL) {\n      vec2 normal = vec2(-inputs.tangent.y, inputs.tangent.x);\n      if (HOOK_shouldDiscard(abs(dot(inputs.position - inputs.center, normal)) > vMaxDist)) {\n        discard;\n      }\n    // Use full area for MITER\n    } else if (HOOK_shouldDiscard(false)) {\n      discard;\n    }\n  }\n  OUT_COLOR = HOOK_getFinalColor(vec4(inputs.color.rgb, 1.) * inputs.color.a);\n  HOOK_afterFragment();\n}\n",pointVert:"IN vec3 aPosition;\nuniform float uPointSize;\nOUT float vStrokeWeight;\nuniform mat4 uModelViewMatrix;\nuniform mat4 uProjectionMatrix;\n\nvoid main() {\n  HOOK_beforeVertex();\n  vec4 viewModelPosition = vec4(HOOK_getWorldPosition(\n    (uModelViewMatrix * vec4(HOOK_getLocalPosition(aPosition), 1.0)).xyz\n  ), 1.);\n  gl_Position = uProjectionMatrix * viewModelPosition;  \n\n  float pointSize = HOOK_getPointSize(uPointSize);\n\n\tgl_PointSize = pointSize;\n\tvStrokeWeight = pointSize;\n  HOOK_afterVertex();\n}\n",pointFrag:"precision mediump int;\nuniform vec4 uMaterialColor;\nIN float vStrokeWeight;\n\nvoid main(){\n  HOOK_beforeFragment();\n  float mask = 0.0;\n\n  // make a circular mask using the gl_PointCoord (goes from 0 - 1 on a point)\n  // might be able to get a nicer edge on big strokeweights with smoothstep but slightly less performant\n\n  mask = step(0.98, length(gl_PointCoord * 2.0 - 1.0));\n\n  // if strokeWeight is 1 or less lets just draw a square\n  // this prevents weird artifacting from carving circles when our points are really small\n  // if strokeWeight is larger than 1, we just use it as is\n\n  mask = mix(0.0, mask, clamp(floor(vStrokeWeight - 0.5),0.0,1.0));\n\n  // throw away the borders of the mask\n  // otherwise we get weird alpha blending issues\n\n  if(HOOK_shouldDiscard(mask > 0.98)){\n    discard;\n  }\n\n  OUT_COLOR = HOOK_getFinalColor(vec4(uMaterialColor.rgb, 1.) * uMaterialColor.a);\n  HOOK_afterFragment();\n}\n",imageLightVert:"precision highp float;\nattribute vec3 aPosition;\nattribute vec3 aNormal;\nattribute vec2 aTexCoord;\n\nvarying vec3 localPos;\nvarying vec3 vWorldNormal;\nvarying vec3 vWorldPosition;\nvarying vec2 vTexCoord;\n\nuniform mat4 uModelViewMatrix;\nuniform mat4 uProjectionMatrix;\nuniform mat3 uNormalMatrix;\n\nvoid main() {\n  // Multiply the position by the matrix.\n  vec4 viewModelPosition = uModelViewMatrix * vec4(aPosition, 1.0);\n  gl_Position = uProjectionMatrix * viewModelPosition;  \n  \n  // orient the normals and pass to the fragment shader\n  vWorldNormal = uNormalMatrix * aNormal;\n  \n  // send the view position to the fragment shader\n  vWorldPosition = (uModelViewMatrix * vec4(aPosition, 1.0)).xyz;\n  \n  localPos = vWorldPosition;\n  vTexCoord = aTexCoord;\n}\n\n\n/*\nin the vertex shader we'll compute the world position and world oriented normal of the vertices and pass those to the fragment shader as varyings.\n*/\n",imageLightDiffusedFrag:"precision highp float;\nvarying vec3 localPos;\n\n// the HDR cubemap converted (can be from an equirectangular environment map.)\nuniform sampler2D environmentMap;\nvarying vec2 vTexCoord;\n\nconst float PI = 3.14159265359;\n\nvec2 nTOE( vec3 v ){\n  // x = r sin(phi) cos(theta)   \n  // y = r cos(phi)  \n  // z = r sin(phi) sin(theta)\n  float phi = acos( v.y );\n  // if phi is 0, then there are no x, z components\n  float theta = 0.0;\n  // else \n  theta = acos(v.x / sin(phi));\n  float sinTheta = v.z / sin(phi);\n  if (sinTheta < 0.0) {\n    // Turn it into -theta, but in the 0-2PI range\n    theta = 2.0 * PI - theta;\n  }\n  theta = theta / (2.0 * 3.14159);\n  phi = phi / 3.14159 ;\n  \n  vec2 angles = vec2( phi, theta );\n  return angles;\n}\n\nfloat random(vec2 p) {\n  vec3 p3  = fract(vec3(p.xyx) * .1031);\n  p3 += dot(p3, p3.yzx + 33.33);\n  return fract((p3.x + p3.y) * p3.z);\n}\n\nvoid main()\n{   \t \n\t// the sample direction equals the hemisphere's orientation\n  float phi = vTexCoord.x * 2.0 * PI;\n  float theta = vTexCoord.y * PI;\n  float x = sin(theta) * cos(phi);\n  float y = sin(theta) * sin(phi);\n  float z = cos(theta);\n  vec3 normal = vec3( x, y, z);\n\n\t// Discretely sampling the hemisphere given the integral's\n  // spherical coordinates translates to the following fragment code:\n\tvec3 irradiance = vec3(0.0);  \n\tvec3 up\t= vec3(0.0, 1.0, 0.0);\n\tvec3 right = normalize(cross(up, normal));\n\tup = normalize(cross(normal, right));\n\n\t//  We specify a fixed sampleDelta delta value to traverse\n  // the hemisphere; decreasing or increasing the sample delta\n  // will increase or decrease the accuracy respectively.\n\tconst float sampleDelta = 0.100;\n\tfloat nrSamples = 0.0;\n  float randomOffset = random(gl_FragCoord.xy) * sampleDelta;\n\tfor(float rawPhi = 0.0; rawPhi < 2.0 * PI; rawPhi += sampleDelta)\n\t{\n    float phi = rawPhi + randomOffset;\n    for(float rawTheta = 0.0; rawTheta < ( 0.5 ) * PI; rawTheta += sampleDelta)\n    {\n      float theta = rawTheta + randomOffset;\n      // spherical to cartesian (in tangent space) // tangent space to world // add each sample result to irradiance\n      float x = sin(theta) * cos(phi);\n      float y = sin(theta) * sin(phi);\n      float z = cos(theta);\n      vec3 tangentSample = vec3( x, y, z);\n      \n      vec3 sampleVec = tangentSample.x * right + tangentSample.y * up + tangentSample.z * normal;\n        irradiance += (texture2D(environmentMap, nTOE(sampleVec)).xyz) * cos(theta) * sin(theta);\n      nrSamples++;\n    }\n\t}\n\t// divide by the total number of samples taken, giving us the average sampled irradiance.\n\tirradiance = PI * irradiance * (1.0 / float(nrSamples )) ;\n  \n \n\tgl_FragColor = vec4(irradiance, 1.0);\n}",imageLightSpecularFrag:"precision highp float;\r\nvarying vec3 localPos;\r\nvarying vec2 vTexCoord;\r\n\r\n// our texture\r\nuniform sampler2D environmentMap;\r\nuniform float roughness;\r\n\r\nconst float PI = 3.14159265359;\r\n\r\nfloat VanDerCorput(int bits);\r\nvec2 HammersleyNoBitOps(int i, int N);\r\nvec3 ImportanceSampleGGX(vec2 Xi, vec3 N, float roughness);\r\n\r\n\r\nvec2 nTOE( vec3 v ){\r\n  // x = r sin(phi) cos(theta)   \r\n  // y = r cos(phi)  \r\n  // z = r sin(phi) sin(theta)\r\n  float phi = acos( v.y );\r\n  // if phi is 0, then there are no x, z components\r\n  float theta = 0.0;\r\n  // else \r\n  theta = acos(v.x / sin(phi));\r\n  float sinTheta = v.z / sin(phi);\r\n  if (sinTheta < 0.0) {\r\n    // Turn it into -theta, but in the 0-2PI range\r\n    theta = 2.0 * PI - theta;\r\n  }\r\n  theta = theta / (2.0 * 3.14159);\r\n  phi = phi / 3.14159 ;\r\n  \r\n  vec2 angles = vec2( phi, theta );\r\n  return angles;\r\n}\r\n\r\n\r\nvoid main(){\r\n  const int SAMPLE_COUNT = 400; // 4096\r\n  int lowRoughnessLimit = int(pow(2.0,(roughness+0.1)*20.0));\r\n  float totalWeight = 0.0;\r\n  vec3 prefilteredColor = vec3(0.0);\r\n  float phi = vTexCoord.x * 2.0 * PI;\r\n  float theta = vTexCoord.y * PI;\r\n  float x = sin(theta) * cos(phi);\r\n  float y = sin(theta) * sin(phi);\r\n  float z = cos(theta);\r\n  vec3 N = vec3(x,y,z);\r\n  vec3 V = N;\r\n  for (int i = 0; i < SAMPLE_COUNT; ++i)\r\n  {\r\n    // break at smaller sample numbers for low roughness levels\r\n    if(i == lowRoughnessLimit)\r\n    {\r\n      break;\r\n    }\r\n    vec2 Xi = HammersleyNoBitOps(i, SAMPLE_COUNT);\r\n    vec3 H = ImportanceSampleGGX(Xi, N, roughness);\r\n    vec3 L = normalize(2.0 * dot(V, H) * H - V);\r\n\r\n    float NdotL = max(dot(N, L), 0.0);\r\n    if (NdotL > 0.0)\r\n    {\r\n      prefilteredColor += texture2D(environmentMap, nTOE(L)).xyz * NdotL;\r\n      totalWeight += NdotL;\r\n    }\r\n  }\r\n  prefilteredColor = prefilteredColor / totalWeight;\r\n\r\n  gl_FragColor = vec4(prefilteredColor, 1.0);\r\n}\r\n\r\nvec3 ImportanceSampleGGX(vec2 Xi, vec3 N, float roughness){\r\n  float a = roughness * roughness;\r\n\r\n  float phi = 2.0 * PI * Xi.x;\r\n  float cosTheta = sqrt((1.0 - Xi.y) / (1.0 + (a * a - 1.0) * Xi.y));\r\n  float sinTheta = sqrt(1.0 - cosTheta * cosTheta);\r\n  // from spherical coordinates to cartesian coordinates\r\n  vec3 H;\r\n  H.x = cos(phi) * sinTheta;\r\n  H.y = sin(phi) * sinTheta;\r\n  H.z = cosTheta;\r\n\r\n  // from tangent-space vector to world-space sample vector\r\n  vec3 up = abs(N.z) < 0.999 ? vec3(0.0, 0.0, 1.0) : vec3(1.0, 0.0, 0.0);\r\n  vec3 tangent = normalize(cross(up, N));\r\n  vec3 bitangent = cross(N, tangent);\r\n\r\n  vec3 sampleVec = tangent * H.x + bitangent * H.y + N * H.z;\r\n  return normalize(sampleVec);\r\n}\r\n\r\n\r\nfloat VanDerCorput(int n, int base)\r\n{\r\n#ifdef WEBGL2\r\n\r\n    uint bits = uint(n);\r\n    bits = (bits << 16u) | (bits >> 16u);\r\n    bits = ((bits & 0x55555555u) << 1u) | ((bits & 0xAAAAAAAAu) >> 1u);\r\n    bits = ((bits & 0x33333333u) << 2u) | ((bits & 0xCCCCCCCCu) >> 2u);\r\n    bits = ((bits & 0x0F0F0F0Fu) << 4u) | ((bits & 0xF0F0F0F0u) >> 4u);\r\n    bits = ((bits & 0x00FF00FFu) << 8u) | ((bits & 0xFF00FF00u) >> 8u);\r\n    return float(bits) * 2.3283064365386963e-10; // / 0x100000000\r\n\r\n#else\r\n\r\n  float invBase = 1.0 / float(base);\r\n  float denom = 1.0;\r\n  float result = 0.0;\r\n\r\n\r\n  for (int i = 0; i < 32; ++i)\r\n  {\r\n        if (n > 0)\r\n        {\r\n        denom = mod(float(n), 2.0);\r\n        result += denom * invBase;\r\n        invBase = invBase / 2.0;\r\n        n = int(float(n) / 2.0);\r\n        }\r\n  }\r\n\r\n\r\n  return result;\r\n\r\n#endif\r\n}\r\n\r\nvec2 HammersleyNoBitOps(int i, int N)\r\n{\r\n  return vec2(float(i) / float(N), VanDerCorput(i, 2));\r\n}\r\n"},X=Z.sphereMappingFrag;for(L in Z)Z[L]="#ifdef WEBGL2\n\n#define IN in\n#define OUT out\n\n#ifdef FRAGMENT_SHADER\nout vec4 outColor;\n#define OUT_COLOR outColor\n#endif\n#define TEXTURE texture\n\n#else\n\n#ifdef FRAGMENT_SHADER\n#define IN varying\n#else\n#define IN attribute\n#endif\n#define OUT varying\n#define TEXTURE texture2D\n\n#ifdef FRAGMENT_SHADER\n#define OUT_COLOR gl_FragColor\n#endif\n\n#endif\n"+Z[L];N(k={},S.GRAY,"precision highp float;\n\nvarying vec2 vTexCoord;\n\nuniform sampler2D tex0;\n\nfloat luma(vec3 color) {\n  // weighted grayscale with luminance values\n  return dot(color, vec3(0.2126, 0.7152, 0.0722));\n}\n\nvoid main() {\n  vec4 tex = texture2D(tex0, vTexCoord);\n  float gray = luma(tex.rgb);\n  gl_FragColor = vec4(gray, gray, gray, tex.a);\n}\n"),N(k,S.ERODE,"// Reduces the bright areas in an image\n\nprecision highp float;\n\nvarying vec2 vTexCoord;\n\nuniform sampler2D tex0;\nuniform vec2 texelSize;\n\nfloat luma(vec3 color) {\n  // weighted grayscale with luminance values\n  // weights 77, 151, 28 taken from src/image/filters.js\n  return dot(color, vec3(0.300781, 0.589844, 0.109375));\n}\n\nvoid main() {\n  vec4 color = texture2D(tex0, vTexCoord);\n  float lum = luma(color.rgb);\n\n  // set current color as the darkest neighbor color\n\n  vec4 neighbors[4];\n  neighbors[0] = texture2D(tex0, vTexCoord + vec2( texelSize.x, 0.0));\n  neighbors[1] = texture2D(tex0, vTexCoord + vec2(-texelSize.x, 0.0));\n  neighbors[2] = texture2D(tex0, vTexCoord + vec2(0.0,  texelSize.y));\n  neighbors[3] = texture2D(tex0, vTexCoord + vec2(0.0, -texelSize.y));\n\n  for (int i = 0; i < 4; i++) {\n    vec4 neighborColor = neighbors[i];\n    float neighborLum = luma(neighborColor.rgb);\n\n    if (neighborLum < lum) {\n      color = neighborColor;\n      lum = neighborLum;\n    }\n  }\n\n  gl_FragColor = color;\n}\n"),N(k,S.DILATE,"// Increase the bright areas in an image\n\nprecision highp float;\n\nvarying vec2 vTexCoord;\n\nuniform sampler2D tex0;\nuniform vec2 texelSize;\n\nfloat luma(vec3 color) {\n  // weighted grayscale with luminance values\n  // weights 77, 151, 28 taken from src/image/filters.js\n  return dot(color, vec3(0.300781, 0.589844, 0.109375));\n}\n\nvoid main() {\n  vec4 color = texture2D(tex0, vTexCoord);\n  float lum = luma(color.rgb);\n\n  // set current color as the brightest neighbor color\n\n  vec4 neighbors[4];\n  neighbors[0] = texture2D(tex0, vTexCoord + vec2( texelSize.x, 0.0));\n  neighbors[1] = texture2D(tex0, vTexCoord + vec2(-texelSize.x, 0.0));\n  neighbors[2] = texture2D(tex0, vTexCoord + vec2(0.0,  texelSize.y));\n  neighbors[3] = texture2D(tex0, vTexCoord + vec2(0.0, -texelSize.y));\n\n  for (int i = 0; i < 4; i++) {\n    vec4 neighborColor = neighbors[i];\n    float neighborLum = luma(neighborColor.rgb);\n\n    if (neighborLum > lum) {\n      color = neighborColor;\n      lum = neighborLum;\n    }\n  }\n\n  gl_FragColor = color;\n}\n"),N(k,S.BLUR,"precision highp float;\n\n// Two-pass blur filter, unweighted kernel.\n// See also a similar blur at Adam Ferriss' repo of shader examples:\n// https://github.com/aferriss/p5jsShaderExamples/blob/gh-pages/4_image-effects/4-9_single-pass-blur/effect.frag\n\n\nuniform sampler2D tex0;\nvarying vec2 vTexCoord;\nuniform vec2 direction;\nuniform vec2 canvasSize;\nuniform float radius;\n\nfloat random(vec2 p) {\n  vec3 p3  = fract(vec3(p.xyx) * .1031);\n  p3 += dot(p3, p3.yzx + 33.33);\n  return fract((p3.x + p3.y) * p3.z);\n}\n\n// This isn't a real Gaussian weight, it's a quadratic weight. It's what the\n// CPU mode's blur uses though, so we also use it here to match.\nfloat quadWeight(float x, float e) {\n  return pow(e-abs(x), 2.);\n}\n\nvoid main(){\n  vec2 uv = vTexCoord;\n\n  // A reasonable maximum number of samples\n  const float maxSamples = 64.0;\n\n  float numSamples = floor(7. * radius);\n  if (fract(numSamples / 2.) == 0.) {\n    numSamples++;\n  }\n  vec4 avg = vec4(0.0);\n  float total = 0.0;\n\n  // Calculate the spacing to avoid skewing if numSamples > maxSamples\n  float spacing = 1.0;\n  if (numSamples > maxSamples) {\n    spacing = numSamples / maxSamples;\n    numSamples = maxSamples;\n  }\n\n  float randomOffset = (spacing - 1.0) * mix(-0.5, 0.5, random(gl_FragCoord.xy));\n  for (float i = 0.0; i < maxSamples; i++) {\n    if (i >= numSamples) break;\n\n    float sample = i * spacing - (numSamples - 1.0) * 0.5 * spacing + randomOffset;\n    vec2 sampleCoord = uv + vec2(sample, sample) / canvasSize * direction;\n    float weight = quadWeight(sample, (numSamples - 1.0) * 0.5 * spacing);\n\n    avg += weight * texture2D(tex0, sampleCoord);\n    total += weight;\n  }\n\n  avg /= total;\n  gl_FragColor = avg;\n}\n"),N(k,S.POSTERIZE,"// Limit color space for a stylized cartoon / poster effect\n\nprecision highp float;\n\nvarying vec2 vTexCoord;\n\nuniform sampler2D tex0;\nuniform float filterParameter;\n\nvec3 quantize(vec3 color, float n) {\n  // restrict values to N options/bins\n  // and floor each channel to nearest value\n  //\n  // eg. when N = 5, values = 0.0, 0.25, 0.50, 0.75, 1.0\n  // then quantize (0.1, 0.7, 0.9) -> (0.0, 0.5, 1.0)\n\n  color = color * n;\n  color = floor(color);\n  color = color / (n - 1.0);\n  return color;\n}\n\nvoid main() {\n  vec4 color = texture2D(tex0, vTexCoord);\n\n  vec3 restrictedColor = quantize(color.rgb / color.a, filterParameter);\n\n  gl_FragColor = vec4(restrictedColor.rgb * color.a, color.a);\n}\n"),N(k,S.OPAQUE,"// Set alpha channel to entirely opaque\n\nprecision highp float;\n\nvarying vec2 vTexCoord;\n\nuniform sampler2D tex0;\n\nvoid main() {\n  vec4 color = texture2D(tex0, vTexCoord);\n  gl_FragColor = vec4(color.rgb / color.a, 1.0);\n}\n"),N(k,S.INVERT,"// Set each pixel to inverse value\n// Note that original INVERT does not change the opacity, so this follows suit\n\nprecision highp float;\n\nvarying vec2 vTexCoord;\n\nuniform sampler2D tex0;\n\nvoid main() {\nvec4 color = texture2D(tex0, vTexCoord);\nvec3 origColor = color.rgb / color.a;\nvec3 invertedColor = vec3(1.0) - origColor;\ngl_FragColor = vec4(invertedColor * color.a, color.a);\n}\n"),N(k,S.THRESHOLD,"// Convert pixels to either white or black, \n// depending on if their luma is above or below filterParameter\n\nprecision highp float;\n\nvarying vec2 vTexCoord;\n\nuniform sampler2D tex0;\nuniform float filterParameter;\n\nfloat luma(vec3 color) {\n  // weighted grayscale with luminance values\n  return dot(color, vec3(0.2126, 0.7152, 0.0722));\n}\n\nvoid main() {\n  vec4 color = texture2D(tex0, vTexCoord);\n  float gray = luma(color.rgb / color.a);\n  // floor() used to match src/image/filters.js\n  float threshold = floor(filterParameter * 255.0) / 255.0;\n  float blackOrWhite = step(threshold, gray);\n  gl_FragColor = vec4(vec3(blackOrWhite) * color.a, color.a);\n}\n");var W=k;function oe(re,le,Ie,Ae,$,P,K,te,fe,ve){var Te=le.getParameter(le.FRAMEBUFFER_BINDING),we=P*K*(le.bindFramebuffer(le.FRAMEBUFFER,Ie),Ie=te===le.RGBA?4:3),Pe=fe===le.UNSIGNED_BYTE?Uint8Array:Float32Array;if(re instanceof Pe&&re.length===we||(re=new Pe(we)),le.readPixels(Ae,ve?ve-$-K:$,P,K,te,fe,re),le.bindFramebuffer(le.FRAMEBUFFER,Te),ve)for(var je=Math.floor(K/2),be=new Pe(P*Ie),Oe=0;Oe<je;Oe++){var Ge=Oe*P*4,Ke=(K-Oe-1)*P*4;be.set(re.subarray(Ge,Ge+4*P)),re.copyWithin(Ge,Ke,Ke+4*P),re.set(be,Ke)}return re}function ie(re,fe,pe,Ae,$,P,K){var te=re.getParameter(re.FRAMEBUFFER_BINDING);return re.bindFramebuffer(re.FRAMEBUFFER,fe),fe=$===re.RGBA?4:3,fe=new(P===re.UNSIGNED_BYTE?Uint8Array:Float32Array)(fe),re.readPixels(pe,K?K-Ae-1:Ae,1,1,$,P,fe),re.bindFramebuffer(re.FRAMEBUFFER,te),Array.from(fe)}v.default.prototype.setAttributes=function(re,le){if(void 0===this._glAttributes)console.log("You are trying to use setAttributes on a p5.Graphics object that does not use a WEBGL renderer.");else{var pe=!0;if(void 0!==le?(null===this._glAttributes&&(this._glAttributes={}),this._glAttributes[re]!==le&&(this._glAttributes[re]=le,pe=!1)):re instanceof Object&&this._glAttributes!==re&&(this._glAttributes=re,pe=!1),this._renderer.isP3D&&!pe){if(!this._setupDone)for(var Ae in this._renderer.retainedMode.geometry)if(this._renderer.retainedMode.geometry.hasOwnProperty(Ae))return void v.default._friendlyError("Sorry, Could not set the attributes, you need to call setAttributes() before calling the other drawing methods in setup()");this.push(),this._renderer._resetContext(),this.pop(),this._renderer._curCamera&&(this._renderer._curCamera._renderer=this._renderer)}}},v.default.RendererGL=function(re){var le=$;if("function"!=typeof re&&null!==re)throw new TypeError("Super expression must either be null or a function");le.prototype=Object.create(re&&re.prototype,{constructor:{value:le,writable:!0,configurable:!0}}),re&&y(le,re);var Ae=function b(re){return function(){var le,pe,Ae=D(re);return le=function(){if(typeof Reflect<"u"&&Reflect.construct&&!Reflect.construct.sham){if("function"==typeof Proxy)return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch{}}}()?(le=D(this).constructor,Reflect.construct(Ae,arguments,le)):Ae.apply(this,arguments),Ae=this,!(pe=le)||"object"!==E(pe)&&"function"!=typeof pe?x(Ae):pe}}($);function $(P,K,te,fe){if(this instanceof $)return(P=Ae.call(this,P,K,te))._setAttributeDefaults(K),P._initContext(),P.isP3D=!0,P.geometryBuilder=void 0,P.GL=P.drawingContext,P._pInst._setProperty("drawingContext",P.drawingContext),P._isErasing=!1,P._clipDepths=[],P._isClipApplied=!1,P._stencilTestOn=!1,P._enableLighting=!1,P.ambientLightColors=[],P.mixedAmbientLight=[],P.mixedSpecularColor=[],P.specularColors=[1,1,1],P.directionalLightDirections=[],P.directionalLightDiffuseColors=[],P.directionalLightSpecularColors=[],P.pointLightPositions=[],P.pointLightDiffuseColors=[],P.pointLightSpecularColors=[],P.spotLightPositions=[],P.spotLightDirections=[],P.spotLightDiffuseColors=[],P.spotLightSpecularColors=[],P.spotLightAngle=[],P.spotLightConc=[],P.activeImageLight=null,P.diffusedTextures=new Map,P.specularTextures=new Map,P.drawMode=S.FILL,P.curFillColor=P._cachedFillStyle=[1,1,1,1],P.curAmbientColor=P._cachedFillStyle=[1,1,1,1],P.curSpecularColor=P._cachedFillStyle=[0,0,0,0],P.curEmissiveColor=P._cachedFillStyle=[0,0,0,0],P.curStrokeColor=P._cachedStrokeStyle=[0,0,0,1],P.curBlendMode=S.BLEND,P.preEraseBlend=void 0,P._cachedBlendMode=void 0,P.blendExt=P.webglVersion===S.WEBGL2?P.GL:P.GL.getExtension("EXT_blend_minmax"),P._isBlending=!1,P._hasSetAmbient=!1,P._useSpecularMaterial=!1,P._useEmissiveMaterial=!1,P._useNormalMaterial=!1,P._useShininess=1,P._useMetalness=0,P._useLineColor=!1,P._useVertexColor=!1,P.registerEnabled=new Set,P._tint=[255,255,255,255],P.constantAttenuation=1,P.linearAttenuation=0,P.quadraticAttenuation=0,P.uModelMatrix=new v.default.Matrix,P.uViewMatrix=new v.default.Matrix,P.uMVMatrix=new v.default.Matrix,P.uPMatrix=new v.default.Matrix,P.uNMatrix=new v.default.Matrix("mat3"),P.curMatrix=new v.default.Matrix("mat3"),P._currentNormal=new v.default.Vector(0,0,1),P._curCamera=new v.default.Camera(x(P)),P._curCamera._computeCameraDefaultSettings(),P._curCamera._setDefaultCamera(),P.filterCamera=new v.default.Camera(x(P)),P.filterCamera._computeCameraDefaultSettings(),P.filterCamera._setDefaultCamera(),P.prevTouches=[],P.zoomVelocity=0,P.rotateVelocity=new v.default.Vector(0,0),P.moveVelocity=new v.default.Vector(0,0),P.executeZoom=!1,P.executeRotateAndMove=!1,P.specularShader=void 0,P.sphereMapping=void 0,P.diffusedShader=void 0,P._defaultLightShader=void 0,P._defaultImmediateModeShader=void 0,P._defaultNormalShader=void 0,P._defaultColorShader=void 0,P._defaultPointShader=void 0,P.userFillShader=void 0,P.userStrokeShader=void 0,P.userPointShader=void 0,P.retainedMode={geometry:{},buffers:{stroke:[new v.default.RenderBuffer(4,"lineVertexColors","lineColorBuffer","aVertexColor",x(P)),new v.default.RenderBuffer(3,"lineVertices","lineVerticesBuffer","aPosition",x(P)),new v.default.RenderBuffer(3,"lineTangentsIn","lineTangentsInBuffer","aTangentIn",x(P)),new v.default.RenderBuffer(3,"lineTangentsOut","lineTangentsOutBuffer","aTangentOut",x(P)),new v.default.RenderBuffer(1,"lineSides","lineSidesBuffer","aSide",x(P))],fill:[new v.default.RenderBuffer(3,"vertices","vertexBuffer","aPosition",x(P),P._vToNArray),new v.default.RenderBuffer(3,"vertexNormals","normalBuffer","aNormal",x(P),P._vToNArray),new v.default.RenderBuffer(4,"vertexColors","colorBuffer","aVertexColor",x(P)),new v.default.RenderBuffer(3,"vertexAmbients","ambientBuffer","aAmbientColor",x(P)),new v.default.RenderBuffer(2,"uvs","uvBuffer","aTexCoord",x(P),P._flatten)],text:[new v.default.RenderBuffer(3,"vertices","vertexBuffer","aPosition",x(P),P._vToNArray),new v.default.RenderBuffer(2,"uvs","uvBuffer","aTexCoord",x(P),P._flatten)]}},P.immediateMode={geometry:new v.default.Geometry,shapeMode:S.TRIANGLE_FAN,contourIndices:[],_bezierVertex:[],_quadraticVertex:[],_curveVertex:[],buffers:{fill:[new v.default.RenderBuffer(3,"vertices","vertexBuffer","aPosition",x(P),P._vToNArray),new v.default.RenderBuffer(3,"vertexNormals","normalBuffer","aNormal",x(P),P._vToNArray),new v.default.RenderBuffer(4,"vertexColors","colorBuffer","aVertexColor",x(P)),new v.default.RenderBuffer(3,"vertexAmbients","ambientBuffer","aAmbientColor",x(P)),new v.default.RenderBuffer(2,"uvs","uvBuffer","aTexCoord",x(P),P._flatten)],stroke:[new v.default.RenderBuffer(4,"lineVertexColors","lineColorBuffer","aVertexColor",x(P)),new v.default.RenderBuffer(3,"lineVertices","lineVerticesBuffer","aPosition",x(P)),new v.default.RenderBuffer(3,"lineTangentsIn","lineTangentsInBuffer","aTangentIn",x(P)),new v.default.RenderBuffer(3,"lineTangentsOut","lineTangentsOutBuffer","aTangentOut",x(P)),new v.default.RenderBuffer(1,"lineSides","lineSidesBuffer","aSide",x(P))],point:P.GL.createBuffer()}},P.pointSize=5,P.curStrokeWeight=1,P.curStrokeCap=S.ROUND,P.curStrokeJoin=S.ROUND,P.textures=new Map,P.framebuffers=new Set,P.activeFramebuffers=[],P.filterShader=void 0,P.filterLayer=void 0,P.filterLayerTemp=void 0,P.defaultFilterShaders={},P.textureMode=S.IMAGE,P.textureWrapX=S.CLAMP,P.textureWrapY=S.CLAMP,P._tex=null,P._curveTightness=6,P._lookUpTableBezier=[],P._lookUpTableQuadratic=[],P._lutBezierDetail=0,P._lutQuadraticDetail=0,P.isProcessingVertices=!1,P._tessy=P._initTessy(),P.fontInfos={},P._curShader=void 0,P;throw new TypeError("Cannot call a class as a function")}return le=$,(re=[{key:"beginGeometry",value:function(){if(this.geometryBuilder)throw new Error("It looks like `beginGeometry()` is being called while another p5.Geometry is already being build.");this.geometryBuilder=new T.default(this)}},{key:"endGeometry",value:function(){var P;if(this.geometryBuilder)return P=this.geometryBuilder.finish(),this.geometryBuilder=void 0,P;throw new Error("Make sure you call beginGeometry() before endGeometry()!")}},{key:"buildGeometry",value:function(P){return this.beginGeometry(),P(),this.endGeometry()}},{key:"_setAttributeDefaults",value:function(P){var K={alpha:!0,depth:!0,stencil:!0,antialias:navigator.userAgent.toLowerCase().includes("safari"),premultipliedAlpha:!0,preserveDrawingBuffer:!0,perPixelLighting:!0,version:2};P._glAttributes=null===P._glAttributes?K:Object.assign(K,P._glAttributes)}},{key:"_initContext",value:function(){if(1!==this._pInst._glAttributes.version&&(this.drawingContext=this.canvas.getContext("webgl2",this._pInst._glAttributes)),this.webglVersion=this.drawingContext?S.WEBGL2:S.WEBGL,this._pInst._setProperty("webglVersion",this.webglVersion),this.drawingContext||(this.drawingContext=this.canvas.getContext("webgl",this._pInst._glAttributes)||this.canvas.getContext("experimental-webgl",this._pInst._glAttributes)),null===this.drawingContext)throw new Error("Error creating webgl context");var P=this.drawingContext;P.enable(P.DEPTH_TEST),P.depthFunc(P.LEQUAL),P.viewport(0,0,P.drawingBufferWidth,P.drawingBufferHeight),P.pixelStorei(P.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0),this._viewport=this.drawingContext.getParameter(this.drawingContext.VIEWPORT)}},{key:"_getParam",value:function(){var P=this.drawingContext;return P.getParameter(P.MAX_TEXTURE_SIZE)}},{key:"_adjustDimensions",value:function(P,K){this._maxTextureSize||(this._maxTextureSize=this._getParam());var fe=this._maxTextureSize,te=(fe=Math.floor(fe/this.pixelDensity()),Math.min(P,fe));return fe=Math.min(K,fe),te===P&&fe===K||console.warn("Warning: The requested width/height exceeds hardware limits. "+"Adjusting dimensions to width: ".concat(te,", height: ").concat(fe,".")),{adjustedWidth:te,adjustedHeight:fe}}},{key:"_resetContext",value:function(P,K){var te,fe=this.width,ve=this.height,Ie=this.canvas.id,Te=this._pInst instanceof v.default.Graphics;Te?((te=this._pInst).canvas.parentNode.removeChild(te.canvas),te.canvas=document.createElement("canvas"),(te._pInst._userNode||document.body).appendChild(te.canvas),v.default.Element.call(te,te.canvas,te._pInst),te.width=fe,te.height=ve):((te=this.canvas)&&te.parentNode.removeChild(te),(te=document.createElement("canvas")).id=Ie,(this._pInst._userNode||document.body).appendChild(te),this._pInst.canvas=te,this.canvas=te),Ie=new v.default.RendererGL(this._pInst.canvas,this._pInst,!Te),this._pInst._setProperty("_renderer",Ie),Ie.resize(fe,ve),Ie._applyDefaults(),Te||this._pInst._elements.push(Ie),"function"==typeof K&&setTimeout(function(){K.apply(window._renderer,P)},0)}},{key:"_update",value:function(){this.uModelMatrix.reset(),this.uViewMatrix.set(this._curCamera.cameraMatrix),this.ambientLightColors.length=0,this.specularColors=[1,1,1],this.directionalLightDirections.length=0,this.directionalLightDiffuseColors.length=0,this.directionalLightSpecularColors.length=0,this.pointLightPositions.length=0,this.pointLightDiffuseColors.length=0,this.pointLightSpecularColors.length=0,this.spotLightPositions.length=0,this.spotLightDirections.length=0,this.spotLightDiffuseColors.length=0,this.spotLightSpecularColors.length=0,this.spotLightAngle.length=0,this.spotLightConc.length=0,this._enableLighting=!1,this._tint=[255,255,255,255],this.GL.clearStencil(0),this.GL.clear(this.GL.DEPTH_BUFFER_BIT|this.GL.STENCIL_BUFFER_BIT),this.GL.disable(this.GL.STENCIL_TEST)}},{key:"background",value:function(){var fe=(fe=this._pInst).color.apply(fe,arguments);this.clear(fe.levels[0]/255,fe.levels[1]/255,fe.levels[2]/255,fe=fe.levels[3]/255)}},{key:"fill",value:function(P,K,te,fe){var ve=v.default.prototype.color.apply(this._pInst,arguments);this.curFillColor=ve._array,this.drawMode=S.FILL,this._useNormalMaterial=!1,this._tex=null}},{key:"stroke",value:function(P,K,te,fe){var ve=v.default.prototype.color.apply(this._pInst,arguments);this.curStrokeColor=ve._array}},{key:"strokeCap",value:function(P){this.curStrokeCap=P}},{key:"strokeJoin",value:function(P){this.curStrokeJoin=P}},{key:"getFilterLayer",value:function(){return this.filterLayer||(this.filterLayer=this._pInst.createFramebuffer()),this.filterLayer}},{key:"getFilterLayerTemp",value:function(){return this.filterLayerTemp||(this.filterLayerTemp=this._pInst.createFramebuffer()),this.filterLayerTemp}},{key:"matchSize",value:function(P,K){P.width===K.width&&P.height===K.height||P.resize(K.width,K.height),P.pixelDensity()!==K.pixelDensity()&&P.pixelDensity(K.pixelDensity())}},{key:"filter",value:function(){var P,K,te=this,fe=this.getFilterLayer(),ve=void 0,Te=void 0,Ie=("string"==typeof(arguments.length<=0?void 0:arguments[0])?(Te=arguments.length<=0?void 0:arguments[0],N(P={},S.BLUR,3),N(P,S.POSTERIZE,4),N(P,S.THRESHOLD,.5),ve=Te in P&&void 0===(arguments.length<=1?void 0:arguments[1])?P[Te]:arguments.length<=1?void 0:arguments[1],Te in this.defaultFilterShaders||(this.defaultFilterShaders[Te]=new v.default.Shader(fe._renderer,"uniform mat4 uModelViewMatrix;\nuniform mat4 uProjectionMatrix;\n\nattribute vec3 aPosition;\n// texcoords only come from p5 to vertex shader\n// so pass texcoords on to the fragment shader in a varying variable\nattribute vec2 aTexCoord;\nvarying vec2 vTexCoord;\n\nvoid main() {\n  // transferring texcoords for the frag shader\n  vTexCoord = aTexCoord;\n\n  // copy position with a fourth coordinate for projection (1.0 is normal)\n  vec4 positionVec4 = vec4(aPosition, 1.0);\n\n  gl_Position = uProjectionMatrix * uModelViewMatrix * positionVec4;\n}\n",W[Te])),this.filterShader=this.defaultFilterShaders[Te]):this.filterShader=arguments.length<=0?void 0:arguments[0],this.activeFramebuffer()||this),we=(this.matchSize(fe,Ie),fe.draw(function(){return te._pInst.clear()}),[1/(Ie.width*Ie.pixelDensity()),1/(Ie.height*Ie.pixelDensity())]);Te===S.BLUR?(K=this.getFilterLayerTemp(),this.matchSize(K,Ie),this._pInst.push(),this._pInst.noStroke(),this._pInst.blendMode(S.BLEND),this._pInst.shader(this.filterShader),this.filterShader.setUniform("texelSize",we),this.filterShader.setUniform("canvasSize",[Ie.width,Ie.height]),this.filterShader.setUniform("radius",Math.max(1,ve)),K.draw(function(){te.filterShader.setUniform("direction",[1,0]),te.filterShader.setUniform("tex0",Ie),te._pInst.clear(),te._pInst.shader(te.filterShader),te._pInst.noLights(),te._pInst.plane(Ie.width,Ie.height)}),fe.draw(function(){te.filterShader.setUniform("direction",[0,1]),te.filterShader.setUniform("tex0",K),te._pInst.clear(),te._pInst.shader(te.filterShader),te._pInst.noLights(),te._pInst.plane(Ie.width,Ie.height)}),this._pInst.pop()):fe.draw(function(){te._pInst.noStroke(),te._pInst.blendMode(S.BLEND),te._pInst.shader(te.filterShader),te.filterShader.setUniform("tex0",Ie),te.filterShader.setUniform("texelSize",we),te.filterShader.setUniform("canvasSize",[Ie.width,Ie.height]),te.filterShader.setUniform("filterParameter",ve),te._pInst.noLights(),te._pInst.plane(Ie.width,Ie.height)}),this._pInst.push(),this._pInst.noStroke(),this.clear(),this._pInst.push(),this._pInst.imageMode(S.CORNER),this._pInst.blendMode(S.BLEND),Ie.filterCamera._resize(),this._pInst.setCamera(Ie.filterCamera),this._pInst.resetMatrix(),this._pInst.image(fe,-Ie.width/2,-Ie.height/2,Ie.width,Ie.height),this._pInst.clearDepth(),this._pInst.pop(),this._pInst.pop()}},{key:"pixelDensity",value:function(P){return P?this._pInst.pixelDensity(P):this._pInst.pixelDensity()}},{key:"blendMode",value:function(P){P===S.DARKEST||P===S.LIGHTEST||P===S.ADD||P===S.BLEND||P===S.SUBTRACT||P===S.SCREEN||P===S.EXCLUSION||P===S.REPLACE||P===S.MULTIPLY||P===S.REMOVE?this.curBlendMode=P:P!==S.BURN&&P!==S.OVERLAY&&P!==S.HARD_LIGHT&&P!==S.SOFT_LIGHT&&P!==S.DODGE||console.warn("BURN, OVERLAY, HARD_LIGHT, SOFT_LIGHT, and DODGE only work for blendMode in 2D mode.")}},{key:"erase",value:function(P,K){this._isErasing||(this.preEraseBlend=this.curBlendMode,this._isErasing=!0,this.blendMode(S.REMOVE),this._cachedFillStyle=this.curFillColor.slice(),this.curFillColor=[1,1,1,P/255],this._cachedStrokeStyle=this.curStrokeColor.slice(),this.curStrokeColor=[1,1,1,K/255])}},{key:"noErase",value:function(){this._isErasing&&(this.curFillColor=this._cachedFillStyle.slice(),this.curStrokeColor=this._cachedStrokeStyle.slice(),this.curBlendMode=this.preEraseBlend,this.blendMode(this.preEraseBlend),this._isErasing=!1,this._applyBlendMode())}},{key:"drawTarget",value:function(){return this.activeFramebuffers[this.activeFramebuffers.length-1]||this}},{key:"beginClip",value:function(){var P=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};(h(D($.prototype),"beginClip",this).call(this,P),this.drawTarget()._isClipApplied=!0,P=this.GL).clearStencil(0),P.clear(P.STENCIL_BUFFER_BIT),P.enable(P.STENCIL_TEST),this._stencilTestOn=!0,P.stencilFunc(P.ALWAYS,1,255),P.stencilOp(P.KEEP,P.KEEP,P.REPLACE),P.disable(P.DEPTH_TEST),this._pInst.push(),this._pInst.resetShader(),this._doFill&&this._pInst.fill(0,0),this._doStroke&&this._pInst.stroke(0,0)}},{key:"endClip",value:function(){this._pInst.pop();var P=this.GL;P.stencilOp(P.KEEP,P.KEEP,P.KEEP),P.stencilFunc(this._clipInvert?P.EQUAL:P.NOTEQUAL,0,255),P.enable(P.DEPTH_TEST),this._clipDepths.push(this._pushPopDepth),h(D($.prototype),"endClip",this).call(this)}},{key:"_clearClip",value:function(){this.GL.clearStencil(1),this.GL.clear(this.GL.STENCIL_BUFFER_BIT),0<this._clipDepths.length&&this._clipDepths.pop(),this.drawTarget()._isClipApplied=!1}},{key:"strokeWeight",value:function(P){this.curStrokeWeight!==P&&(this.pointSize=P,this.curStrokeWeight=P)}},{key:"_getPixel",value:function(P,K){var te=this.GL;return ie(te,null,P,K,te.RGBA,te.UNSIGNED_BYTE,this._pInst.height*this._pInst.pixelDensity())}},{key:"loadPixels",value:function(){var P,K,te=this._pixelsState;!0!==this._pInst._glAttributes.preserveDrawingBuffer?console.log("loadPixels only works in WebGL when preserveDrawingBuffer is true."):te._setProperty("pixels",oe(te.pixels,K=this.GL,null,0,0,this.width*(P=this._pInst._pixelDensity),this.height*P,K.RGBA,K.UNSIGNED_BYTE,this.height*P))}},{key:"updatePixels",value:function(){var P=this._getTempFramebuffer();P.pixels=this._pixelsState.pixels,P.updatePixels(),this._pInst.push(),this._pInst.resetMatrix(),this._pInst.clear(),this._pInst.imageMode(S.CENTER),this._pInst.image(P,0,0),this._pInst.pop(),this.GL.clearDepth(1),this.GL.clear(this.GL.DEPTH_BUFFER_BIT)}},{key:"_getTempFramebuffer",value:function(){return this._tempFramebuffer||(this._tempFramebuffer=this._pInst.createFramebuffer({format:S.UNSIGNED_BYTE,useDepth:this._pInst._glAttributes.depth,depthFormat:S.UNSIGNED_INT,antialias:this._pInst._glAttributes.antialias})),this._tempFramebuffer}},{key:"geometryInHash",value:function(P){return void 0!==this.retainedMode.geometry[P]}},{key:"viewport",value:function(P,K){this._viewport=[0,0,P,K],this.GL.viewport(0,0,P,K)}},{key:"resize",value:function(ve,fe){v.default.Renderer.prototype.resize.call(this,ve,fe),this._origViewport={width:this.GL.drawingBufferWidth,height:this.GL.drawingBufferHeight},this.viewport(this._origViewport.width,this._origViewport.height),this._curCamera._resize();var te=(void 0!==(ve=this._pixelsState).pixels&&ve._setProperty("pixels",new Uint8Array(this.GL.drawingBufferWidth*this.GL.drawingBufferHeight*4)),!0);fe=!1,ve=void 0;try{for(var Te,Ie=this.framebuffers[Symbol.iterator]();!(te=(Te=Ie.next()).done);te=!0)Te.value._canvasSizeChanged()}catch(we){fe=!0,ve=we}finally{try{te||null==Ie.return||Ie.return()}finally{if(fe)throw ve}}}},{key:"clear",value:function(){var P=(arguments.length<=0?void 0:arguments[0])||0,K=(arguments.length<=1?void 0:arguments[1])||0,te=(arguments.length<=2?void 0:arguments[2])||0,fe=(arguments.length<=3?void 0:arguments[3])||0,ve=this.activeFramebuffer();ve&&ve.format===S.UNSIGNED_BYTE&&!ve.antialias&&0===fe&&(fe=1e-10),this.GL.clearColor(P*fe,K*fe,te*fe,fe),this.GL.clearDepth(1),this.GL.clear(this.GL.COLOR_BUFFER_BIT|this.GL.DEPTH_BUFFER_BIT)}},{key:"clearDepth",value:function(){this.GL.clearDepth(0<arguments.length&&void 0!==arguments[0]?arguments[0]:1),this.GL.clear(this.GL.DEPTH_BUFFER_BIT)}},{key:"applyMatrix",value:function(P,K,te,fe,ve,Te){16===arguments.length?v.default.Matrix.prototype.apply.apply(this.uModelMatrix,arguments):this.uModelMatrix.apply([P,K,0,0,te,fe,0,0,0,0,1,0,ve,Te,0,1])}},{key:"translate",value:function(P,K,te){return P instanceof v.default.Vector&&(te=P.z,K=P.y,P=P.x),this.uModelMatrix.translate([P,K,te]),this}},{key:"scale",value:function(P,K,te){return this.uModelMatrix.scale(P,K,te),this}},{key:"rotate",value:function(P,K){return void 0===K?this.rotateZ(P):(v.default.Matrix.prototype.rotate.apply(this.uModelMatrix,arguments),this)}},{key:"rotateX",value:function(P){return this.rotate(P,1,0,0),this}},{key:"rotateY",value:function(P){return this.rotate(P,0,1,0),this}},{key:"rotateZ",value:function(P){return this.rotate(P,0,0,1),this}},{key:"push",value:function(){var P=v.default.Renderer.prototype.push.apply(this),K=P.properties;return K.uModelMatrix=this.uModelMatrix.copy(),K.uViewMatrix=this.uViewMatrix.copy(),K.uPMatrix=this.uPMatrix.copy(),K._curCamera=this._curCamera,this._curCamera=this._curCamera.copy(),K.ambientLightColors=this.ambientLightColors.slice(),K.specularColors=this.specularColors.slice(),K.directionalLightDirections=this.directionalLightDirections.slice(),K.directionalLightDiffuseColors=this.directionalLightDiffuseColors.slice(),K.directionalLightSpecularColors=this.directionalLightSpecularColors.slice(),K.pointLightPositions=this.pointLightPositions.slice(),K.pointLightDiffuseColors=this.pointLightDiffuseColors.slice(),K.pointLightSpecularColors=this.pointLightSpecularColors.slice(),K.spotLightPositions=this.spotLightPositions.slice(),K.spotLightDirections=this.spotLightDirections.slice(),K.spotLightDiffuseColors=this.spotLightDiffuseColors.slice(),K.spotLightSpecularColors=this.spotLightSpecularColors.slice(),K.spotLightAngle=this.spotLightAngle.slice(),K.spotLightConc=this.spotLightConc.slice(),K.userFillShader=this.userFillShader,K.userStrokeShader=this.userStrokeShader,K.userPointShader=this.userPointShader,K.pointSize=this.pointSize,K.curStrokeWeight=this.curStrokeWeight,K.curStrokeColor=this.curStrokeColor,K.curFillColor=this.curFillColor,K.curAmbientColor=this.curAmbientColor,K.curSpecularColor=this.curSpecularColor,K.curEmissiveColor=this.curEmissiveColor,K._hasSetAmbient=this._hasSetAmbient,K._useSpecularMaterial=this._useSpecularMaterial,K._useEmissiveMaterial=this._useEmissiveMaterial,K._useShininess=this._useShininess,K._useMetalness=this._useMetalness,K.constantAttenuation=this.constantAttenuation,K.linearAttenuation=this.linearAttenuation,K.quadraticAttenuation=this.quadraticAttenuation,K._enableLighting=this._enableLighting,K._useNormalMaterial=this._useNormalMaterial,K._tex=this._tex,K.drawMode=this.drawMode,K._currentNormal=this._currentNormal,K.curBlendMode=this.curBlendMode,K.activeImageLight=this.activeImageLight,K.textureMode=this.textureMode,P}},{key:"pop",value:function(){var P;0<this._clipDepths.length&&this._pushPopDepth===this._clipDepths[this._clipDepths.length-1]&&this._clearClip();for(var K=arguments.length,te=new Array(K),fe=0;fe<K;fe++)te[fe]=arguments[fe];(P=h(D($.prototype),"pop",this)).call.apply(P,[this].concat(te)),this._applyStencilTestIfClipping()}},{key:"_applyStencilTestIfClipping",value:function(){var P=this.drawTarget();P._isClipApplied!==this._stencilTestOn&&(P._isClipApplied?(this.GL.enable(this.GL.STENCIL_TEST),this._stencilTestOn=!0):(this.GL.disable(this.GL.STENCIL_TEST),this._stencilTestOn=!1))}},{key:"resetMatrix",value:function(){return this.uModelMatrix.reset(),this.uViewMatrix.set(this._curCamera.cameraMatrix),this}},{key:"_getImmediateStrokeShader",value:function(){var P=this.userStrokeShader;return P&&P.isStrokeShader()?P:this._getLineShader()}},{key:"_getRetainedStrokeShader",value:function(){return this._getImmediateStrokeShader()}},{key:"_getSphereMapping",value:function(P){return this.sphereMapping||(this.sphereMapping=this._pInst.createFilterShader(X)),this.uNMatrix.inverseTranspose(this.uViewMatrix),this.uNMatrix.invert3x3(this.uNMatrix),this.sphereMapping.setUniform("uFovY",this._curCamera.cameraFOV),this.sphereMapping.setUniform("uAspect",this._curCamera.aspectRatio),this.sphereMapping.setUniform("uNewNormalMatrix",this.uNMatrix.mat3),this.sphereMapping.setUniform("uSampler",P),this.sphereMapping}},{key:"_getImmediateFillShader",value:function(){var P=this.userFillShader;if(this._useNormalMaterial&&(!P||!P.isNormalShader()))return this._getNormalShader();if(this._enableLighting){if(!P||!P.isLightShader())return this._getLightShader()}else if(this._tex){if(!P||!P.isTextureShader())return this._getLightShader()}else if(!P)return this._getImmediateModeShader();return P}},{key:"_getRetainedFillShader",value:function(){if(this._useNormalMaterial)return this._getNormalShader();var P=this.userFillShader;if(this._enableLighting){if(!P||!P.isLightShader())return this._getLightShader()}else if(this._tex){if(!P||!P.isTextureShader())return this._getLightShader()}else if(!P)return this._getColorShader();return P}},{key:"_getImmediatePointShader",value:function(){var P=this.userPointShader;return P&&P.isPointShader()?P:this._getPointShader()}},{key:"_getRetainedLineShader",value:function(){return this._getImmediateLineShader()}},{key:"baseMaterialShader",value:function(){if(this._pInst._glAttributes.perPixelLighting)return this._getLightShader();throw new Error("The material shader does not support hooks without perPixelLighting. Try turning it back on.")}},{key:"_getLightShader",value:function(){return this._defaultLightShader||(this._defaultLightShader=this._pInst._glAttributes.perPixelLighting?new v.default.Shader(this,this._webGL2CompatibilityPrefix("vert","highp")+Z.phongVert,this._webGL2CompatibilityPrefix("frag","highp")+Z.phongFrag,{vertex:{"void beforeVertex":"() {}","vec3 getLocalPosition":"(vec3 position) { return position; }","vec3 getWorldPosition":"(vec3 position) { return position; }","vec3 getLocalNormal":"(vec3 normal) { return normal; }","vec3 getWorldNormal":"(vec3 normal) { return normal; }","vec2 getUV":"(vec2 uv) { return uv; }","vec4 getVertexColor":"(vec4 color) { return color; }","void afterVertex":"() {}"},fragment:{"void beforeFragment":"() {}","Inputs getPixelInputs":"(Inputs inputs) { return inputs; }","vec4 combineColors":"(ColorComponents components) {\n                vec4 color = vec4(0.);\n                color.rgb += components.diffuse * components.baseColor;\n                color.rgb += components.ambient * components.ambientColor;\n                color.rgb += components.specular * components.specularColor;\n                color.rgb += components.emissive;\n                color.a = components.opacity;\n                return color;\n              }","vec4 getFinalColor":"(vec4 color) { return color; }","void afterFragment":"() {}"}}):new v.default.Shader(this,this._webGL2CompatibilityPrefix("vert","highp")+Z.lightVert,this._webGL2CompatibilityPrefix("frag","highp")+Z.lightTextureFrag)),this._defaultLightShader}},{key:"_getImmediateModeShader",value:function(){return this._defaultImmediateModeShader||(this._defaultImmediateModeShader=new v.default.Shader(this,this._webGL2CompatibilityPrefix("vert","mediump")+Z.immediateVert,this._webGL2CompatibilityPrefix("frag","mediump")+Z.vertexColorFrag)),this._defaultImmediateModeShader}},{key:"baseNormalShader",value:function(){return this._getNormalShader()}},{key:"_getNormalShader",value:function(){return this._defaultNormalShader||(this._defaultNormalShader=new v.default.Shader(this,this._webGL2CompatibilityPrefix("vert","mediump")+Z.normalVert,this._webGL2CompatibilityPrefix("frag","mediump")+Z.normalFrag,{vertex:{"void beforeVertex":"() {}","vec3 getLocalPosition":"(vec3 position) { return position; }","vec3 getWorldPosition":"(vec3 position) { return position; }","vec3 getLocalNormal":"(vec3 normal) { return normal; }","vec3 getWorldNormal":"(vec3 normal) { return normal; }","vec2 getUV":"(vec2 uv) { return uv; }","vec4 getVertexColor":"(vec4 color) { return color; }","void afterVertex":"() {}"},fragment:{"void beforeFragment":"() {}","vec4 getFinalColor":"(vec4 color) { return color; }","void afterFragment":"() {}"}})),this._defaultNormalShader}},{key:"baseColorShader",value:function(){return this._getColorShader()}},{key:"_getColorShader",value:function(){return this._defaultColorShader||(this._defaultColorShader=new v.default.Shader(this,this._webGL2CompatibilityPrefix("vert","mediump")+Z.normalVert,this._webGL2CompatibilityPrefix("frag","mediump")+Z.basicFrag,{vertex:{"void beforeVertex":"() {}","vec3 getLocalPosition":"(vec3 position) { return position; }","vec3 getWorldPosition":"(vec3 position) { return position; }","vec3 getLocalNormal":"(vec3 normal) { return normal; }","vec3 getWorldNormal":"(vec3 normal) { return normal; }","vec2 getUV":"(vec2 uv) { return uv; }","vec4 getVertexColor":"(vec4 color) { return color; }","void afterVertex":"() {}"},fragment:{"void beforeFragment":"() {}","vec4 getFinalColor":"(vec4 color) { return color; }","void afterFragment":"() {}"}})),this._defaultColorShader}},{key:"pointShader",value:function(){return this._getPointShader()}},{key:"_getPointShader",value:function(){return this._defaultPointShader||(this._defaultPointShader=new v.default.Shader(this,this._webGL2CompatibilityPrefix("vert","mediump")+Z.pointVert,this._webGL2CompatibilityPrefix("frag","mediump")+Z.pointFrag,{vertex:{"void beforeVertex":"() {}","vec3 getLocalPosition":"(vec3 position) { return position; }","vec3 getWorldPosition":"(vec3 position) { return position; }","float getPointSize":"(float size) { return size; }","void afterVertex":"() {}"},fragment:{"void beforeFragment":"() {}","vec4 getFinalColor":"(vec4 color) { return color; }","bool shouldDiscard":"(bool outside) { return outside; }","void afterFragment":"() {}"}})),this._defaultPointShader}},{key:"baseStrokeShader",value:function(){return this._getLineShader()}},{key:"_getLineShader",value:function(){return this._defaultLineShader||(this._defaultLineShader=new v.default.Shader(this,this._webGL2CompatibilityPrefix("vert","mediump")+Z.lineVert,this._webGL2CompatibilityPrefix("frag","mediump")+Z.lineFrag,{vertex:{"void beforeVertex":"() {}","vec3 getLocalPosition":"(vec3 position) { return position; }","vec3 getWorldPosition":"(vec3 position) { return position; }","float getStrokeWeight":"(float weight) { return weight; }","vec2 getLineCenter":"(vec2 center) { return center; }","vec2 getLinePosition":"(vec2 position) { return position; }","vec4 getVertexColor":"(vec4 color) { return color; }","void afterVertex":"() {}"},fragment:{"void beforeFragment":"() {}","Inputs getPixelInputs":"(Inputs inputs) { return inputs; }","vec4 getFinalColor":"(vec4 color) { return color; }","bool shouldDiscard":"(bool outside) { return outside; }","void afterFragment":"() {}"}})),this._defaultLineShader}},{key:"_getFontShader",value:function(){return this._defaultFontShader||(this.webglVersion===S.WEBGL&&this.GL.getExtension("OES_standard_derivatives"),this._defaultFontShader=new v.default.Shader(this,this._webGL2CompatibilityPrefix("vert","highp")+Z.fontVert,this._webGL2CompatibilityPrefix("frag","highp")+Z.fontFrag)),this._defaultFontShader}},{key:"_webGL2CompatibilityPrefix",value:function(P,K){var te="";return this.webglVersion===S.WEBGL2&&(te+="#version 300 es\n#define WEBGL2\n"),"vert"===P?te+="#define VERTEX_SHADER\n":"frag"===P&&(te+="#define FRAGMENT_SHADER\n"),K&&(te+="precision ".concat(K," float;\n")),te}},{key:"_getEmptyTexture",value:function(){var P;return this._emptyTexture||((P=new v.default.Image(1,1)).set(0,0,255),this._emptyTexture=new v.default.Texture(this,P)),this._emptyTexture}},{key:"getTexture",value:function(P){P instanceof v.default.Framebuffer&&(P=P.color);var K=this.textures.get(P);return K||(K=new v.default.Texture(this,P),this.textures.set(P,K),K)}},{key:"getDiffusedTexture",value:function(P){var K,te,fe=this;return null!=this.diffusedTextures.get(P)?this.diffusedTextures.get(P):(K=Math.floor(P.height/P.width*200),te=this._pInst.createFramebuffer({width:200,height:K,density:1}),this.diffusedShader||(this.diffusedShader=this._pInst.createShader(Z.imageLightVert,Z.imageLightDiffusedFrag)),te.draw(function(){fe._pInst.shader(fe.diffusedShader),fe.diffusedShader.setUniform("environmentMap",P),fe._pInst.noStroke(),fe._pInst.rectMode(S.CENTER),fe._pInst.noLights(),fe._pInst.rect(0,0,200,K)}),this.diffusedTextures.set(P,te),te)}},{key:"getSpecularTexture",value:function(P){var K=this;if(null!=this.specularTextures.get(P))return this.specularTextures.get(P);for(var te,fe=[],ve=this._pInst.createFramebuffer({width:512,height:512,density:1}),Te=Math.log(512)/Math.log(2),Ie=(this.specularShader||(this.specularShader=this._pInst.createShader(Z.imageLightVert,Z.imageLightSpecularFrag)),512);1<=Ie;Ie/=2)!function(we){ve.resize(we,we);var Pe=1-Math.log(we)/Math.log(2)/Te;ve.draw(function(){K._pInst.shader(K.specularShader),K._pInst.clear(),K.specularShader.setUniform("environmentMap",P),K.specularShader.setUniform("roughness",Pe),K._pInst.noStroke(),K._pInst.noLights(),K._pInst.plane(we,we)}),fe.push(ve.get().drawingContext.getImageData(0,0,we,we))}(Ie);return ve.remove(),te=new f.MipmapTexture(this,fe,{}),this.specularTextures.set(P,te),te}},{key:"activeFramebuffer",value:function(){return this.activeFramebuffers[this.activeFramebuffers.length-1]||null}},{key:"createFramebuffer",value:function(P){return new v.default.Framebuffer(this,P)}},{key:"_setStrokeUniforms",value:function(P){P.bindShader(),P.setUniform("uUseLineColor",this._useLineColor),P.setUniform("uMaterialColor",this.curStrokeColor),P.setUniform("uStrokeWeight",this.curStrokeWeight),P.setUniform("uStrokeCap",z[this.curStrokeCap]),P.setUniform("uStrokeJoin",F[this.curStrokeJoin])}},{key:"_setFillUniforms",value:function(P){var K=this,te=(P.bindShader(),this.mixedSpecularColor=m(this.curSpecularColor),0<this._useMetalness&&(this.mixedSpecularColor=this.mixedSpecularColor.map(function(fe,ve){return K.curFillColor[ve]*K._useMetalness+fe*(1-K._useMetalness)})),P.setUniform("uUseVertexColor",this._useVertexColor),P.setUniform("uMaterialColor",this.curFillColor),P.setUniform("isTexture",!!this._tex),this._tex&&P.setUniform("uSampler",this._tex),P.setUniform("uTint",this._tint),P.setUniform("uHasSetAmbient",this._hasSetAmbient),P.setUniform("uAmbientMatColor",this.curAmbientColor),P.setUniform("uSpecularMatColor",this.mixedSpecularColor),P.setUniform("uEmissiveMatColor",this.curEmissiveColor),P.setUniform("uSpecular",this._useSpecularMaterial),P.setUniform("uEmissive",this._useEmissiveMaterial),P.setUniform("uShininess",this._useShininess),P.setUniform("uMetallic",this._useMetalness),this._setImageLightUniforms(P),P.setUniform("uUseLighting",this._enableLighting),this.pointLightDiffuseColors.length/3);P.setUniform("uPointLightCount",te),P.setUniform("uPointLightLocation",this.pointLightPositions),P.setUniform("uPointLightDiffuseColors",this.pointLightDiffuseColors),P.setUniform("uPointLightSpecularColors",this.pointLightSpecularColors),P.setUniform("uDirectionalLightCount",te=this.directionalLightDiffuseColors.length/3),P.setUniform("uLightingDirection",this.directionalLightDirections),P.setUniform("uDirectionalDiffuseColors",this.directionalLightDiffuseColors),P.setUniform("uDirectionalSpecularColors",this.directionalLightSpecularColors),te=this.ambientLightColors.length/3,this.mixedAmbientLight=m(this.ambientLightColors),0<this._useMetalness&&(this.mixedAmbientLight=this.mixedAmbientLight.map(function(fe){return Math.max(0,fe-=K._useMetalness)})),P.setUniform("uAmbientLightCount",te),P.setUniform("uAmbientColor",this.mixedAmbientLight),P.setUniform("uSpotLightCount",te=this.spotLightDiffuseColors.length/3),P.setUniform("uSpotLightAngle",this.spotLightAngle),P.setUniform("uSpotLightConc",this.spotLightConc),P.setUniform("uSpotLightDiffuseColors",this.spotLightDiffuseColors),P.setUniform("uSpotLightSpecularColors",this.spotLightSpecularColors),P.setUniform("uSpotLightLocation",this.spotLightPositions),P.setUniform("uSpotLightDirection",this.spotLightDirections),P.setUniform("uConstantAttenuation",this.constantAttenuation),P.setUniform("uLinearAttenuation",this.linearAttenuation),P.setUniform("uQuadraticAttenuation",this.quadraticAttenuation),P.bindTextures()}},{key:"_setImageLightUniforms",value:function(P){var K;P.setUniform("uUseImageLight",null!=this.activeImageLight),this.activeImageLight&&(K=this.getDiffusedTexture(this.activeImageLight),P.setUniform("environmentMapDiffused",K),K=this.getSpecularTexture(this.activeImageLight),P.setUniform("environmentMapSpecular",K))}},{key:"_setPointUniforms",value:function(P){P.bindShader(),P.setUniform("uMaterialColor",this.curStrokeColor),P.setUniform("uPointSize",this.pointSize*this._pInst._pixelDensity)}},{key:"_bindBuffer",value:function(P,K,te,fe,ve){this.GL.bindBuffer(K=K||this.GL.ARRAY_BUFFER,P),void 0!==te&&((P=te)instanceof v.default.DataArray?P=te.dataArray():P instanceof(fe||Float32Array)||(P=new(fe||Float32Array)(P)),this.GL.bufferData(K,P,ve||this.GL.STATIC_DRAW))}},{key:"_arraysEqual",value:function(P,K){return P.length===K.length&&P.every(function(te,fe){return te===K[fe]})}},{key:"_isTypedArray",value:function(P){return[Float32Array,Float64Array,Int16Array,Uint16Array,Uint32Array].some(function(K){return P instanceof K})}},{key:"_flatten",value:function(P){return P.flat()}},{key:"_vToNArray",value:function(P){return P.flatMap(function(K){return[K.x,K.y,K.z]})}},{key:"_bezierCoefficients",value:function(P){var K=P*P,te=1-P,fe=te*te;return[fe*te,3*fe*P,3*te*K,K*P]}},{key:"_quadraticCoefficients",value:function(P){var K=1-P;return[K*K,2*K*P,P*P]}},{key:"_bezierToCatmull",value:function(P){return[P[1],P[1]+(P[2]-P[0])/this._curveTightness,P[2]-(P[3]-P[1])/this._curveTightness,P[2]]}},{key:"_initTessy",value:function(){var P=new C.default.GluTesselator;return P.gluTessCallback(C.default.gluEnum.GLU_TESS_VERTEX_DATA,function(K,te){var fe=!0,ve=!1,Te=void 0;try{for(var Ie,we=K[Symbol.iterator]();!(fe=(Ie=we.next()).done);fe=!0)te.push(Ie.value)}catch(je){ve=!0,Te=je}finally{try{fe||null==we.return||we.return()}finally{if(ve)throw Te}}}),P.gluTessCallback(C.default.gluEnum.GLU_TESS_BEGIN,function(K){K!==C.default.primitiveType.GL_TRIANGLES&&console.log("expected TRIANGLES but got type: ".concat(K))}),P.gluTessCallback(C.default.gluEnum.GLU_TESS_ERROR,function(K){console.log("error callback"),console.log("error number: ".concat(K))}),P.gluTessCallback(C.default.gluEnum.GLU_TESS_COMBINE,function(K,te,fe){for(var ve=new Array(v.default.RendererGL.prototype.tessyVertexSize).fill(0),Te=0;Te<fe.length;Te++)for(var Ie=0;Ie<ve.length;Ie++)0!==fe[Te]&&te[Te]&&(ve[Ie]+=te[Te][Ie]*fe[Te]);return ve}),P.gluTessCallback(C.default.gluEnum.GLU_TESS_EDGE_FLAG,function(K){}),P.gluTessProperty(C.default.gluEnum.GLU_TESS_WINDING_RULE,C.default.windingRule.GLU_TESS_WINDING_NONZERO),P}},{key:"_triangulate",value:function(P){var K=P[0]?P[0][2]:void 0,te=!0,fe=!0,Pe=!1,be=void 0;try{for(var ve,Te=P[Symbol.iterator]();!(fe=(ve=Te.next()).done);fe=!0)for(var Ie=ve.value,we=0;we<Ie.length;we+=v.default.RendererGL.prototype.tessyVertexSize)if(Ie[we+2]!==K){te=!1;break}}catch(_t){Pe=!0,be=_t}finally{try{fe||null==Te.return||Te.return()}finally{if(Pe)throw be}}this._tessy.gluTessNormal(0,0,te?1:0);var je=(this._tessy.gluTessBeginPolygon(Pe=[]),!0),Oe=void(be=!1);try{for(var Ge,Ke=P[Symbol.iterator]();!(je=(Ge=Ke.next()).done);je=!0){var ze=Ge.value;this._tessy.gluTessBeginContour();for(var qe=0;qe<ze.length;qe+=v.default.RendererGL.prototype.tessyVertexSize){var et=ze.slice(qe,qe+v.default.RendererGL.prototype.tessyVertexSize);this._tessy.gluTessVertex(et,et)}this._tessy.gluTessEndContour()}}catch(_t){be=!0,Oe=_t}finally{try{je||null==Ke.return||Ke.return()}finally{if(be)throw Oe}}return this._tessy.gluTessEndPolygon(),Pe}}])&&p(le.prototype,re),$}(v.default.Renderer),v.default.prototype._assert3d=function(re){if(!this._renderer.isP3D)throw new Error("".concat(re,"() is only supported in WEBGL mode. If you'd like to use 3D graphics and WebGL, see https://p5js.org/examples/3d-geometries/ for more information."))},v.default.RendererGL.prototype.tessyVertexSize=12,H.default=k=v.default.RendererGL},{"../core/constants":272,"../core/main":283,"../core/p5.Renderer":286,"./GeometryBuilder":327,"./p5.Camera":332,"./p5.Framebuffer":334,"./p5.Matrix":336,"./p5.Shader":342,"./p5.Texture":343,"core-js/modules/es.array.concat":153,"core-js/modules/es.array.copy-within":154,"core-js/modules/es.array.every":155,"core-js/modules/es.array.fill":156,"core-js/modules/es.array.flat":160,"core-js/modules/es.array.flat-map":159,"core-js/modules/es.array.from":162,"core-js/modules/es.array.includes":163,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.map":168,"core-js/modules/es.array.slice":169,"core-js/modules/es.array.some":170,"core-js/modules/es.array.unscopables.flat":173,"core-js/modules/es.array.unscopables.flat-map":172,"core-js/modules/es.map":175,"core-js/modules/es.object.assign":183,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.get-prototype-of":188,"core-js/modules/es.object.to-string":190,"core-js/modules/es.reflect.construct":192,"core-js/modules/es.reflect.get":193,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.set":197,"core-js/modules/es.string.includes":199,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.typed-array.copy-within":213,"core-js/modules/es.typed-array.every":214,"core-js/modules/es.typed-array.fill":215,"core-js/modules/es.typed-array.filter":216,"core-js/modules/es.typed-array.find":218,"core-js/modules/es.typed-array.find-index":217,"core-js/modules/es.typed-array.float32-array":219,"core-js/modules/es.typed-array.float64-array":220,"core-js/modules/es.typed-array.for-each":221,"core-js/modules/es.typed-array.includes":222,"core-js/modules/es.typed-array.index-of":223,"core-js/modules/es.typed-array.int16-array":224,"core-js/modules/es.typed-array.iterator":226,"core-js/modules/es.typed-array.join":227,"core-js/modules/es.typed-array.last-index-of":228,"core-js/modules/es.typed-array.map":229,"core-js/modules/es.typed-array.reduce":231,"core-js/modules/es.typed-array.reduce-right":230,"core-js/modules/es.typed-array.reverse":232,"core-js/modules/es.typed-array.set":233,"core-js/modules/es.typed-array.slice":234,"core-js/modules/es.typed-array.some":235,"core-js/modules/es.typed-array.sort":236,"core-js/modules/es.typed-array.subarray":237,"core-js/modules/es.typed-array.to-locale-string":238,"core-js/modules/es.typed-array.to-string":239,"core-js/modules/es.typed-array.uint16-array":240,"core-js/modules/es.typed-array.uint32-array":241,"core-js/modules/es.typed-array.uint8-array":242,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246,libtess:255,path:258}],342:[function(l,de,H){"use strict";l("core-js/modules/es.symbol"),l("core-js/modules/es.symbol.description"),l("core-js/modules/es.symbol.iterator"),l("core-js/modules/es.array.concat"),l("core-js/modules/es.array.index-of"),l("core-js/modules/es.array.iterator"),l("core-js/modules/es.array.slice"),l("core-js/modules/es.array.some"),l("core-js/modules/es.function.name"),l("core-js/modules/es.object.assign"),l("core-js/modules/es.object.keys"),l("core-js/modules/es.object.to-string"),l("core-js/modules/es.regexp.exec"),l("core-js/modules/es.regexp.to-string"),l("core-js/modules/es.string.iterator"),l("core-js/modules/es.string.split"),l("core-js/modules/web.dom-collections.iterator"),l("core-js/modules/es.symbol"),l("core-js/modules/es.symbol.description"),l("core-js/modules/es.symbol.iterator"),l("core-js/modules/es.array.concat"),l("core-js/modules/es.array.index-of"),l("core-js/modules/es.array.iterator"),l("core-js/modules/es.array.slice"),l("core-js/modules/es.array.some"),l("core-js/modules/es.function.name"),l("core-js/modules/es.object.assign"),l("core-js/modules/es.object.keys"),l("core-js/modules/es.object.to-string"),l("core-js/modules/es.regexp.exec"),l("core-js/modules/es.string.iterator"),l("core-js/modules/es.string.split"),l("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(H,"__esModule",{value:!0}),H.default=void 0;var M=(l=l("../core/main"))&&l.__esModule?l:{default:l};function E(S,T){return function(C){if(Array.isArray(C))return C}(S)||function(C,f){if(Symbol.iterator in Object(C)||"[object Arguments]"===Object.prototype.toString.call(C)){var g=[],d=!0,m=!1,p=void 0;try{for(var h,y=C[Symbol.iterator]();!(d=(h=y.next()).done)&&(g.push(h.value),!f||g.length!==f);d=!0);}catch(b){m=!0,p=b}finally{try{d||null==y.return||y.return()}finally{if(m)throw p}}return g}}(S,T)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function v(S,T){for(var C=0;C<T.length;C++){var f=T[C];f.enumerable=f.enumerable||!1,f.configurable=!0,"value"in f&&(f.writable=!0),Object.defineProperty(S,f.key,f)}}M.default.Shader=function(){function S(g,d,m){var p=3<arguments.length&&void 0!==arguments[3]?arguments[3]:{};if(!(this instanceof S))throw new TypeError("Cannot call a class as a function");this._renderer=g,this._vertSrc=d,this._fragSrc=m,this._vertShader=-1,this._fragShader=-1,this._glProgram=0,this._loadedAttributes=!1,this.attributes={},this._loadedUniforms=!1,this.uniforms={},this._bound=!1,this.samplers=[],this.hooks={uniforms:p.uniforms||{},declarations:p.declarations,helpers:p.helpers||{},vertex:p.vertex||{},fragment:p.fragment||{},modified:{vertex:p.modified&&p.modified.vertex||{},fragment:p.modified&&p.modified.fragment||{}}}}var T,C;return T=S,(C=[{key:"shaderSrc",value:function(D,d){var m,p,h,y,b,x=(D=E(D.split("void main"),2))[0],N=(D=D[1],"");for(m in this.hooks.uniforms)N+="uniform ".concat(m,";\n");for(p in this.hooks.declarations&&(N+=this.hooks.declarations+"\n"),this.hooks[d].declarations&&(N+=this.hooks[d].declarations+"\n"),this.hooks.helpers)N+="".concat(p).concat(this.hooks.helpers[p],"\n");for(h in this.hooks[d])"declarations"!==h&&(y=(b=E(h.split(" "),2))[0],b=b[1],this.hooks.modified[d][h]&&(N+="#define AUGMENTED_HOOK_"+b+"\n"),N+=y+" HOOK_"+b+this.hooks[d][h]+"\n");return x+N+"void main"+D}},{key:"version",value:function(){var g=/#version (.+)$/.exec(this.vertSrc());return g?g[1]:"100 es"}},{key:"vertSrc",value:function(){return this.shaderSrc(this._vertSrc,"vertex")}},{key:"fragSrc",value:function(){return this.shaderSrc(this._fragSrc,"fragment")}},{key:"inspectHooks",value:function(){for(var g in console.log("==== Vertex shader hooks: ===="),this.hooks.vertex)console.log((this.hooks.modified.vertex[g]?"[MODIFIED] ":"")+g+this.hooks.vertex[g]);for(var d in console.log(""),console.log("==== Fragment shader hooks: ===="),this.hooks.fragment)console.log((this.hooks.modified.fragment[d]?"[MODIFIED] ":"")+d+this.hooks.fragment[d]);for(var m in console.log(""),console.log("==== Helper functions: ===="),this.hooks.helpers)console.log(m+this.hooks.helpers[m])}},{key:"modify",value:function(g){M.default._validateParameters("p5.Shader.modify",arguments);var d,m={vertex:{},fragment:{},helpers:{}};for(d in g)"declarations"!==d&&"uniforms"!==d&&("vertexDeclarations"===d?m.vertex.declarations=(m.vertex.declarations||"")+"\n"+g[d]:"fragmentDeclarations"===d?m.fragment.declarations=(m.fragment.declarations||"")+"\n"+g[d]:this.hooks.vertex[d]?m.vertex[d]=g[d]:this.hooks.fragment[d]?m.fragment[d]=g[d]:m.helpers[d]=g[d]);var p,h,y=Object.assign({},this.hooks.modified.vertex),b=Object.assign({},this.hooks.modified.fragment);for(p in m.vertex||{})"declarations"!==p&&(y[p]=!0);for(h in m.fragment||{})"declarations"!==h&&(b[h]=!0);return new M.default.Shader(this._renderer,this._vertSrc,this._fragSrc,{declarations:(this.hooks.declarations||"")+"\n"+(g.declarations||""),uniforms:Object.assign({},this.hooks.uniforms,g.uniforms||{}),fragment:Object.assign({},this.hooks.fragment,m.fragment||{}),vertex:Object.assign({},this.hooks.vertex,m.vertex||{}),helpers:Object.assign({},this.hooks.helpers,m.helpers||{}),modified:{vertex:y,fragment:b}})}},{key:"init",value:function(){if(0===this._glProgram){var g,d=this._renderer.GL;if(this._vertShader=d.createShader(d.VERTEX_SHADER),d.shaderSource(this._vertShader,this.vertSrc()),d.compileShader(this._vertShader),!d.getShaderParameter(this._vertShader,d.COMPILE_STATUS))return g=d.getShaderInfoLog(this._vertShader),console.error(g),null;if(this._fragShader=d.createShader(d.FRAGMENT_SHADER),d.shaderSource(this._fragShader,this.fragSrc()),d.compileShader(this._fragShader),!d.getShaderParameter(this._fragShader,d.COMPILE_STATUS))return g=d.getShaderInfoLog(this._fragShader),console.error(g),null;this._glProgram=d.createProgram(),d.attachShader(this._glProgram,this._vertShader),d.attachShader(this._glProgram,this._fragShader),d.linkProgram(this._glProgram),d.getProgramParameter(this._glProgram,d.LINK_STATUS)||M.default._friendlyError("Snap! Error linking shader program: ".concat(d.getProgramInfoLog(this._glProgram))),this._loadAttributes(),this._loadUniforms()}return this}},{key:"setDefaultUniforms",value:function(){for(var g in this.hooks.uniforms){var m,d=E(g.split(" "),2)[1];null!=(m=(g=this.hooks.uniforms[g])instanceof Function?g():g)&&this.setUniform(d,m)}}},{key:"copyToContext",value:function(g){var d=new M.default.Shader(g._renderer,this._vertSrc,this._fragSrc);return d.ensureCompiledOnContext(g),d}},{key:"ensureCompiledOnContext",value:function(g){if(0!==this._glProgram&&this._renderer!==g._renderer)throw new Error("The shader being run is attached to a different context. Do you need to copy it to this context first with .copyToContext()?");0===this._glProgram&&(this._renderer=g._renderer,this.init())}},{key:"_loadAttributes",value:function(){if(!this._loadedAttributes){this.attributes={};for(var g=this._renderer.GL,d=g.getProgramParameter(this._glProgram,g.ACTIVE_ATTRIBUTES),m=0;m<d;++m){var p=g.getActiveAttrib(this._glProgram,m),h=p.name,y=g.getAttribLocation(this._glProgram,h),b={};b.name=h,b.location=y,b.index=m,b.type=p.type,b.size=p.size,this.attributes[h]=b}this._loadedAttributes=!0}}},{key:"_loadUniforms",value:function(){if(!this._loadedUniforms){for(var g=this._renderer.GL,d=g.getProgramParameter(this._glProgram,g.ACTIVE_UNIFORMS),m=0,p=0;p<d;++p){var h=g.getActiveUniform(this._glProgram,p),y={},b=(y.location=g.getUniformLocation(this._glProgram,h.name),y.size=h.size,h.name);1<h.size&&(b=b.substring(0,b.indexOf("[0]"))),y.name=b,y.type=h.type,y._cachedData=void 0,y.type===g.SAMPLER_2D&&(y.samplerIndex=m,m++,this.samplers.push(y)),y.isArray=1<h.size||y.type===g.FLOAT_MAT3||y.type===g.FLOAT_MAT4||y.type===g.FLOAT_VEC2||y.type===g.FLOAT_VEC3||y.type===g.FLOAT_VEC4||y.type===g.INT_VEC2||y.type===g.INT_VEC4||y.type===g.INT_VEC3,this.uniforms[b]=y}this._loadedUniforms=!0}}},{key:"compile",value:function(){}},{key:"bindShader",value:function(){this.init(),this._bound||(this.useProgram(),this._bound=!0,this._setMatrixUniforms(),this.setUniform("uViewport",this._renderer._viewport))}},{key:"unbindShader",value:function(){return this._bound&&(this.unbindTextures(),this._bound=!1),this}},{key:"bindTextures",value:function(){var g=this._renderer.GL,d=!0,m=!1,p=void 0;try{for(var h,y=this.samplers[Symbol.iterator]();!(d=(h=y.next()).done);d=!0){var b=h.value,x=b.texture;void 0===x&&(x=this._renderer._getEmptyTexture()),g.activeTexture(g.TEXTURE0+b.samplerIndex),x.bindTexture(),x.update(),g.uniform1i(b.location,b.samplerIndex)}}catch(D){m=!0,p=D}finally{try{d||null==y.return||y.return()}finally{if(m)throw p}}}},{key:"updateTextures",value:function(){var g=!0,d=!1,m=void 0;try{for(var p,h=this.samplers[Symbol.iterator]();!(g=(p=h.next()).done);g=!0){var y=p.value.texture;y&&y.update()}}catch(b){d=!0,m=b}finally{try{g||null==h.return||h.return()}finally{if(d)throw m}}}},{key:"unbindTextures",value:function(){var g=!0,d=!1,m=void 0;try{for(var p,h=this.samplers[Symbol.iterator]();!(g=(p=h.next()).done);g=!0)this.setUniform(p.value.name,this._renderer._getEmptyTexture())}catch(b){d=!0,m=b}finally{try{g||null==h.return||h.return()}finally{if(d)throw m}}}},{key:"_setMatrixUniforms",value:function(){var g=this._renderer.uModelMatrix,d=this._renderer.uViewMatrix,m=this._renderer.uPMatrix,p=g.copy().mult(d),h=(this._renderer.uMVMatrix=p).copy();h.mult(m),this.isStrokeShader()&&this.setUniform("uPerspective",this._renderer._curCamera.useLinePerspective?1:0),this.setUniform("uViewMatrix",d.mat4),this.setUniform("uProjectionMatrix",m.mat4),this.setUniform("uModelMatrix",g.mat4),this.setUniform("uModelViewMatrix",p.mat4),this.setUniform("uModelViewProjectionMatrix",h.mat4),this.uniforms.uNormalMatrix&&(this._renderer.uNMatrix.inverseTranspose(this._renderer.uMVMatrix),this.setUniform("uNormalMatrix",this._renderer.uNMatrix.mat3)),this.uniforms.uCameraRotation&&(this._renderer.curMatrix.inverseTranspose(this._renderer.uViewMatrix),this.setUniform("uCameraRotation",this._renderer.curMatrix.mat3))}},{key:"useProgram",value:function(){return this._renderer._curShader!==this&&(this._renderer.GL.useProgram(this._glProgram),this._renderer._curShader=this),this}},{key:"setUniform",value:function(g,d){var m=this.uniforms[g];if(m){var p=this._renderer.GL;if(m.isArray){if(m._cachedData&&this._renderer._arraysEqual(m._cachedData,d))return;m._cachedData=d.slice(0)}else{if(m._cachedData&&m._cachedData===d)return;m._cachedData=Array.isArray(d)?d.slice(0):d}var h=m.location;switch(this.useProgram(),m.type){case p.BOOL:p.uniform1i(h,!0===d?1:0);break;case p.INT:1<m.size?d.length&&p.uniform1iv(h,d):p.uniform1i(h,d);break;case p.FLOAT:1<m.size?d.length&&p.uniform1fv(h,d):p.uniform1f(h,d);break;case p.FLOAT_MAT3:p.uniformMatrix3fv(h,!1,d);break;case p.FLOAT_MAT4:p.uniformMatrix4fv(h,!1,d);break;case p.FLOAT_VEC2:1<m.size?d.length&&p.uniform2fv(h,d):p.uniform2f(h,d[0],d[1]);break;case p.FLOAT_VEC3:1<m.size?d.length&&p.uniform3fv(h,d):p.uniform3f(h,d[0],d[1],d[2]);break;case p.FLOAT_VEC4:1<m.size?d.length&&p.uniform4fv(h,d):p.uniform4f(h,d[0],d[1],d[2],d[3]);break;case p.INT_VEC2:1<m.size?d.length&&p.uniform2iv(h,d):p.uniform2i(h,d[0],d[1]);break;case p.INT_VEC3:1<m.size?d.length&&p.uniform3iv(h,d):p.uniform3i(h,d[0],d[1],d[2]);break;case p.INT_VEC4:1<m.size?d.length&&p.uniform4iv(h,d):p.uniform4i(h,d[0],d[1],d[2],d[3]);break;case p.SAMPLER_2D:if("number"==typeof d){if(d<p.TEXTURE0||d>p.TEXTURE31||d!==Math.ceil(d))return console.log("\u{1f338} p5.js says: You're trying to use a number as the data for a texture.Please use a texture."),this;p.activeTexture(d),p.uniform1i(h,d)}else p.activeTexture(p.TEXTURE0+m.samplerIndex),m.texture=d instanceof M.default.Texture?d:this._renderer.getTexture(d),p.uniform1i(h,m.samplerIndex),m.texture.src.gifProperties&&m.texture.src._animateGif(this._renderer._pInst);break;case p.SAMPLER_CUBE:case p.SAMPLER_3D:case p.SAMPLER_2D_SHADOW:case p.SAMPLER_2D_ARRAY:case p.SAMPLER_2D_ARRAY_SHADOW:case p.SAMPLER_CUBE_SHADOW:case p.INT_SAMPLER_2D:case p.INT_SAMPLER_3D:case p.INT_SAMPLER_CUBE:case p.INT_SAMPLER_2D_ARRAY:case p.UNSIGNED_INT_SAMPLER_2D:case p.UNSIGNED_INT_SAMPLER_3D:case p.UNSIGNED_INT_SAMPLER_CUBE:case p.UNSIGNED_INT_SAMPLER_2D_ARRAY:"number"==typeof d&&(d<p.TEXTURE0||d>p.TEXTURE31||d!==Math.ceil(d)?console.log("\u{1f338} p5.js says: You're trying to use a number as the data for a texture.Please use a texture."):(p.activeTexture(d),p.uniform1i(h,d)))}return this}}},{key:"isLightShader",value:function(){return[this.attributes.aNormal,this.uniforms.uUseLighting,this.uniforms.uAmbientLightCount,this.uniforms.uDirectionalLightCount,this.uniforms.uPointLightCount,this.uniforms.uAmbientColor,this.uniforms.uDirectionalDiffuseColors,this.uniforms.uDirectionalSpecularColors,this.uniforms.uPointLightLocation,this.uniforms.uPointLightDiffuseColors,this.uniforms.uPointLightSpecularColors,this.uniforms.uLightingDirection,this.uniforms.uSpecular].some(function(g){return void 0!==g})}},{key:"isNormalShader",value:function(){return void 0!==this.attributes.aNormal}},{key:"isTextureShader",value:function(){return 0<this.samplers.length}},{key:"isColorShader",value:function(){return void 0!==this.attributes.aVertexColor||void 0!==this.uniforms.uMaterialColor}},{key:"isTexLightShader",value:function(){return this.isLightShader()&&this.isTextureShader()}},{key:"isStrokeShader",value:function(){return void 0!==this.uniforms.uStrokeWeight}},{key:"enableAttrib",value:function(g,d,m,p,h,y){var b;return g&&-1!==(g=g.location)&&(b=this._renderer.GL,this._renderer.registerEnabled.has(g)||(b.enableVertexAttribArray(g),this._renderer.registerEnabled.add(g)),this._renderer.GL.vertexAttribPointer(g,d,m||b.FLOAT,p||!1,h||0,y||0)),this}},{key:"disableRemainingAttributes",value:function(){var g=this,d=!0,m=!1,p=void 0;try{for(var h,y=this._renderer.registerEnabled.values()[Symbol.iterator]();!(d=(h=y.next()).done);d=!0)!function(){var b=h.value;Object.keys(g.attributes).some(function(x){return g.attributes[x].location===b})||(g._renderer.GL.disableVertexAttribArray(b),g._renderer.registerEnabled.delete(b))}()}catch(b){m=!0,p=b}finally{try{d||null==y.return||y.return()}finally{if(m)throw p}}}}])&&v(T.prototype,C),S}(),H.default=l=M.default.Shader},{"../core/main":283,"core-js/modules/es.array.concat":153,"core-js/modules/es.array.index-of":164,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.slice":169,"core-js/modules/es.array.some":170,"core-js/modules/es.function.name":174,"core-js/modules/es.object.assign":183,"core-js/modules/es.object.keys":189,"core-js/modules/es.object.to-string":190,"core-js/modules/es.regexp.exec":195,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.string.iterator":200,"core-js/modules/es.string.split":206,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/web.dom-collections.iterator":246}],343:[function(l,de,H){"use strict";function M(b){return(M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(x){return typeof x}:function(x){return x&&"function"==typeof Symbol&&x.constructor===Symbol&&x!==Symbol.prototype?"symbol":typeof x})(b)}function E(b){return(E="function"==typeof Symbol&&"symbol"===M(Symbol.iterator)?function(x){return M(x)}:function(x){return x&&"function"==typeof Symbol&&x.constructor===Symbol&&x!==Symbol.prototype?"symbol":M(x)})(b)}l("core-js/modules/es.symbol"),l("core-js/modules/es.symbol.description"),l("core-js/modules/es.symbol.iterator"),l("core-js/modules/es.array.iterator"),l("core-js/modules/es.object.get-own-property-descriptor"),l("core-js/modules/es.object.get-prototype-of"),l("core-js/modules/es.object.to-string"),l("core-js/modules/es.reflect.construct"),l("core-js/modules/es.regexp.to-string"),l("core-js/modules/es.string.iterator"),l("core-js/modules/es.typed-array.uint8-array"),l("core-js/modules/es.typed-array.copy-within"),l("core-js/modules/es.typed-array.every"),l("core-js/modules/es.typed-array.fill"),l("core-js/modules/es.typed-array.filter"),l("core-js/modules/es.typed-array.find"),l("core-js/modules/es.typed-array.find-index"),l("core-js/modules/es.typed-array.for-each"),l("core-js/modules/es.typed-array.includes"),l("core-js/modules/es.typed-array.index-of"),l("core-js/modules/es.typed-array.iterator"),l("core-js/modules/es.typed-array.join"),l("core-js/modules/es.typed-array.last-index-of"),l("core-js/modules/es.typed-array.map"),l("core-js/modules/es.typed-array.reduce"),l("core-js/modules/es.typed-array.reduce-right"),l("core-js/modules/es.typed-array.reverse"),l("core-js/modules/es.typed-array.set"),l("core-js/modules/es.typed-array.slice"),l("core-js/modules/es.typed-array.some"),l("core-js/modules/es.typed-array.sort"),l("core-js/modules/es.typed-array.subarray"),l("core-js/modules/es.typed-array.to-locale-string"),l("core-js/modules/es.typed-array.to-string"),l("core-js/modules/es.weak-map"),l("core-js/modules/web.dom-collections.iterator"),l("core-js/modules/es.array.iterator"),l("core-js/modules/es.object.to-string"),l("core-js/modules/es.typed-array.uint8-array"),l("core-js/modules/es.typed-array.copy-within"),l("core-js/modules/es.typed-array.every"),l("core-js/modules/es.typed-array.fill"),l("core-js/modules/es.typed-array.filter"),l("core-js/modules/es.typed-array.find"),l("core-js/modules/es.typed-array.find-index"),l("core-js/modules/es.typed-array.for-each"),l("core-js/modules/es.typed-array.includes"),l("core-js/modules/es.typed-array.index-of"),l("core-js/modules/es.typed-array.iterator"),l("core-js/modules/es.typed-array.join"),l("core-js/modules/es.typed-array.last-index-of"),l("core-js/modules/es.typed-array.map"),l("core-js/modules/es.typed-array.reduce"),l("core-js/modules/es.typed-array.reduce-right"),l("core-js/modules/es.typed-array.reverse"),l("core-js/modules/es.typed-array.set"),l("core-js/modules/es.typed-array.slice"),l("core-js/modules/es.typed-array.some"),l("core-js/modules/es.typed-array.sort"),l("core-js/modules/es.typed-array.subarray"),l("core-js/modules/es.typed-array.to-locale-string"),l("core-js/modules/es.typed-array.to-string"),Object.defineProperty(H,"__esModule",{value:!0}),H.checkWebGLCapabilities=y,H.default=H.MipmapTexture=void 0;var v=(h=l("../core/main"))&&h.__esModule?h:{default:h},S=function(b){if(b&&b.__esModule)return b;if(null===b||"object"!==E(b)&&"function"!=typeof b)return{default:b};var x=T();if(x&&x.has(b))return x.get(b);var D,N={},U=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(D in b){var R;Object.prototype.hasOwnProperty.call(b,D)&&((R=U?Object.getOwnPropertyDescriptor(b,D):null)&&(R.get||R.set)?Object.defineProperty(N,D,R):N[D]=b[D])}return N.default=b,x&&x.set(b,N),N}(l("../core/constants"));function T(){var b;return"function"!=typeof WeakMap?null:(T=function(){return b},b=new WeakMap)}function C(b,x){return(C=Object.setPrototypeOf||function(D,N){return D.__proto__=N,D})(b,x)}function g(b){return(g=Object.setPrototypeOf?Object.getPrototypeOf:function(x){return x.__proto__||Object.getPrototypeOf(x)})(b)}function d(b,x){if(!(b instanceof x))throw new TypeError("Cannot call a class as a function")}function m(b,x){for(var D=0;D<x.length;D++){var N=x[D];N.enumerable=N.enumerable||!1,N.configurable=!0,"value"in N&&(N.writable=!0),Object.defineProperty(b,N.key,N)}}function p(b,x,D){x&&m(b.prototype,x),D&&m(b,D)}v.default.Texture=function(){function b(L,D,R){d(this,b),this._renderer=L;var U=this._renderer.GL;return R=R||{},this.src=D,this.glTex=void 0,this.glTarget=U.TEXTURE_2D,this.glFormat=R.format||U.RGBA,this.mipmaps=!1,this.glMinFilter=R.minFilter||U.LINEAR,this.glMagFilter=R.magFilter||U.LINEAR,this.glWrapS=R.wrapS||U.CLAMP_TO_EDGE,this.glWrapT=R.wrapT||U.CLAMP_TO_EDGE,this.glDataType=R.dataType||U.UNSIGNED_BYTE,R=y(L),this.glFormat!==U.HALF_FLOAT||R.halfFloat||(console.log("This device does not support dataType HALF_FLOAT. Falling back to FLOAT."),this.glDataType=U.FLOAT),this.glFormat!==U.HALF_FLOAT||this.glMinFilter!==U.LINEAR&&this.glMagFilter!==U.LINEAR||R.halfFloatLinear||(console.log("This device does not support linear filtering for dataType FLOAT. Falling back to NEAREST."),this.glMinFilter===U.LINEAR&&(this.glMinFilter=U.NEAREST),this.glMagFilter===U.LINEAR&&(this.glMagFilter=U.NEAREST)),this.glFormat!==U.FLOAT||R.float||(console.log("This device does not support dataType FLOAT. Falling back to UNSIGNED_BYTE."),this.glDataType=U.UNSIGNED_BYTE),this.glFormat!==U.FLOAT||this.glMinFilter!==U.LINEAR&&this.glMagFilter!==U.LINEAR||R.floatLinear||(console.log("This device does not support linear filtering for dataType FLOAT. Falling back to NEAREST."),this.glMinFilter===U.LINEAR&&(this.glMinFilter=U.NEAREST),this.glMagFilter===U.LINEAR&&(this.glMagFilter=U.NEAREST)),this.isSrcMediaElement=void 0!==v.default.MediaElement&&D instanceof v.default.MediaElement,this._videoPrevUpdateTime=0,this.isSrcHTMLElement=void 0!==v.default.Element&&D instanceof v.default.Element&&!(D instanceof v.default.Graphics)&&!(D instanceof v.default.Renderer),this.isSrcP5Image=D instanceof v.default.Image,this.isSrcP5Graphics=D instanceof v.default.Graphics,this.isSrcP5Renderer=D instanceof v.default.Renderer,this.isImageData=typeof ImageData<"u"&&D instanceof ImageData,this.isFramebufferTexture=D instanceof v.default.FramebufferTexture,L=this._getTextureDataFromSource(),this.width=L.width,this.height=L.height,this.init(L),this}return p(b,[{key:"_getTextureDataFromSource",value:function(){var x;return this.isFramebufferTexture?x=this.src.rawTexture():this.isSrcP5Image?x=this.src.canvas:this.isSrcMediaElement||this.isSrcP5Graphics||this.isSrcP5Renderer||this.isSrcHTMLElement?(this.src._ensureCanvas&&this.src._ensureCanvas(),x=this.src.canvas||this.src.elt):this.isImageData&&(x=this.src),x}},{key:"init",value:function(x){var D,N=this._renderer.GL;this.isFramebufferTexture||(this.glTex=N.createTexture()),this.glWrapS=this._renderer.textureWrapX,this.glWrapT=this._renderer.textureWrapY,this.setWrapMode(this.glWrapS,this.glWrapT),this.bindTexture(),N.texParameteri(N.TEXTURE_2D,N.TEXTURE_MAG_FILTER,this.glMagFilter),N.texParameteri(N.TEXTURE_2D,N.TEXTURE_MIN_FILTER,this.glMinFilter),this.isFramebufferTexture||(0===this.width||0===this.height||this.isSrcMediaElement&&!this.src.loadedmetadata?(D=new Uint8Array([1,1,1,1]),N.texImage2D(this.glTarget,0,N.RGBA,1,1,0,this.glFormat,this.glDataType,D)):N.texImage2D(this.glTarget,0,this.glFormat,this.glFormat,this.glDataType,x))}},{key:"update",value:function(){var x,D,N,U=this.src;return 0!==U.width&&0!==U.height&&!this.isFramebufferTexture&&(x=this._getTextureDataFromSource(),D=!1,N=this._renderer.GL,x.width!==this.width||x.height!==this.height?(D=!0,this.width=x.width||U.width,this.height=x.height||U.height,this.isSrcP5Image?U.setModified(!1):(this.isSrcMediaElement||this.isSrcHTMLElement)&&U.setModified(!0)):this.isSrcP5Image?U.isModified()&&U.setModified(!(D=!0)):this.isSrcMediaElement?U.isModified()?U.setModified(!(D=!0)):U.loadedmetadata&&this._videoPrevUpdateTime!==U.time()&&(this._videoPrevUpdateTime=U.time(),D=!0):this.isImageData?U._dirty&&(D=!(U._dirty=!1)):D=!0,D&&(this.bindTexture(),N.texImage2D(this.glTarget,0,this.glFormat,this.glFormat,this.glDataType,x)),D)}},{key:"bindTexture",value:function(){return this._renderer.GL.bindTexture(this.glTarget,this.getTexture()),this}},{key:"unbindTexture",value:function(){this._renderer.GL.bindTexture(this.glTarget,null)}},{key:"getTexture",value:function(){return this.isFramebufferTexture?this.src.rawTexture():this.glTex}},{key:"setInterpolation",value:function(x,D){var N=this._renderer.GL;this.glMinFilter=this.glFilter(x),this.glMagFilter=this.glFilter(D),this.bindTexture(),N.texParameteri(N.TEXTURE_2D,N.TEXTURE_MIN_FILTER,this.glMinFilter),N.texParameteri(N.TEXTURE_2D,N.TEXTURE_MAG_FILTER,this.glMagFilter),this.unbindTexture()}},{key:"glFilter",value:function(x){var D=this._renderer.GL;return x===S.NEAREST?D.NEAREST:D.LINEAR}},{key:"setWrapMode",value:function(x,D){function N(z){return 0==(z&z-1)}var U=this._renderer.GL,L=(L=this._getTextureDataFromSource()).naturalWidth&&L.naturalHeight?(R=L.naturalWidth,L.naturalHeight):(R=this.width,this.height),R=N(R);L=N(L),x===S.REPEAT?this._renderer.webglVersion===S.WEBGL2||R&&L?this.glWrapS=U.REPEAT:(console.warn("You tried to set the wrap mode to REPEAT but the texture size is not a power of two. Setting to CLAMP instead"),this.glWrapS=U.CLAMP_TO_EDGE):x===S.MIRROR?this._renderer.webglVersion===S.WEBGL2||R&&L?this.glWrapS=U.MIRRORED_REPEAT:(console.warn("You tried to set the wrap mode to MIRROR but the texture size is not a power of two. Setting to CLAMP instead"),this.glWrapS=U.CLAMP_TO_EDGE):this.glWrapS=U.CLAMP_TO_EDGE,D===S.REPEAT?this._renderer.webglVersion===S.WEBGL2||R&&L?this.glWrapT=U.REPEAT:(console.warn("You tried to set the wrap mode to REPEAT but the texture size is not a power of two. Setting to CLAMP instead"),this.glWrapT=U.CLAMP_TO_EDGE):D===S.MIRROR?this._renderer.webglVersion===S.WEBGL2||R&&L?this.glWrapT=U.MIRRORED_REPEAT:(console.warn("You tried to set the wrap mode to MIRROR but the texture size is not a power of two. Setting to CLAMP instead"),this.glWrapT=U.CLAMP_TO_EDGE):this.glWrapT=U.CLAMP_TO_EDGE,this.bindTexture(),U.texParameteri(U.TEXTURE_2D,U.TEXTURE_WRAP_S,this.glWrapS),U.texParameteri(U.TEXTURE_2D,U.TEXTURE_WRAP_T,this.glWrapT),this.unbindTexture()}}]),b}();var h=function(b){var x=N;if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function");x.prototype=Object.create(b&&b.prototype,{constructor:{value:x,writable:!0,configurable:!0}}),b&&C(x,b);var D=function f(b){return function(){var x,D=g(b);if(x=function(){if(typeof Reflect<"u"&&Reflect.construct&&!Reflect.construct.sham){if("function"==typeof Proxy)return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch{}}}()?(x=g(this).constructor,Reflect.construct(D,arguments,x)):D.apply(this,arguments),D=this,!x||"object"!==E(x)&&"function"!=typeof x){if(void 0!==D)return D;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return x}}(N);function N(U,R,L){return d(this,N),R=(U=D.call(this,U,R,L))._renderer.GL,U.glMinFilter===R.LINEAR&&(U.glMinFilter=R.LINEAR_MIPMAP_LINEAR),U}return p(N,[{key:"glFilter",value:function(U){return this._renderer.GL.LINEAR_MIPMAP_LINEAR}},{key:"_getTextureDataFromSource",value:function(){return this.src}},{key:"init",value:function(U){var R=this._renderer.GL;this.glTex=R.createTexture(),this.bindTexture();for(var L=0;L<U.length;L++)R.texImage2D(this.glTarget,L,this.glFormat,this.glFormat,this.glDataType,U[L]);this.glMinFilter=R.LINEAR_MIPMAP_LINEAR,R.texParameteri(R.TEXTURE_2D,R.TEXTURE_MAG_FILTER,this.glMagFilter),R.texParameteri(R.TEXTURE_2D,R.TEXTURE_MIN_FILTER,this.glMinFilter),this.unbindTexture()}},{key:"update",value:function(){}}]),N}(v.default.Texture);function y(U){var x=U.GL,D=(U=U.webglVersion)===S.WEBGL2?x.getExtension("EXT_color_buffer_float")&&x.getExtension("EXT_float_blend"):x.getExtension("OES_texture_float");return{float:D,floatLinear:D&&x.getExtension("OES_texture_float_linear"),halfFloat:U=x.getExtension(U===S.WEBGL2?"EXT_color_buffer_float":"OES_texture_half_float"),halfFloatLinear:U&&x.getExtension("OES_texture_half_float_linear")}}H.MipmapTexture=h,H.default=l=v.default.Texture},{"../core/constants":272,"../core/main":283,"core-js/modules/es.array.iterator":165,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.get-prototype-of":188,"core-js/modules/es.object.to-string":190,"core-js/modules/es.reflect.construct":192,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.typed-array.copy-within":213,"core-js/modules/es.typed-array.every":214,"core-js/modules/es.typed-array.fill":215,"core-js/modules/es.typed-array.filter":216,"core-js/modules/es.typed-array.find":218,"core-js/modules/es.typed-array.find-index":217,"core-js/modules/es.typed-array.for-each":221,"core-js/modules/es.typed-array.includes":222,"core-js/modules/es.typed-array.index-of":223,"core-js/modules/es.typed-array.iterator":226,"core-js/modules/es.typed-array.join":227,"core-js/modules/es.typed-array.last-index-of":228,"core-js/modules/es.typed-array.map":229,"core-js/modules/es.typed-array.reduce":231,"core-js/modules/es.typed-array.reduce-right":230,"core-js/modules/es.typed-array.reverse":232,"core-js/modules/es.typed-array.set":233,"core-js/modules/es.typed-array.slice":234,"core-js/modules/es.typed-array.some":235,"core-js/modules/es.typed-array.sort":236,"core-js/modules/es.typed-array.subarray":237,"core-js/modules/es.typed-array.to-locale-string":238,"core-js/modules/es.typed-array.to-string":239,"core-js/modules/es.typed-array.uint8-array":242,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246}],344:[function(l,de,H){"use strict";function M(b){return(M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(x){return typeof x}:function(x){return x&&"function"==typeof Symbol&&x.constructor===Symbol&&x!==Symbol.prototype?"symbol":typeof x})(b)}function E(b){return(E="function"==typeof Symbol&&"symbol"===M(Symbol.iterator)?function(x){return M(x)}:function(x){return x&&"function"==typeof Symbol&&x.constructor===Symbol&&x!==Symbol.prototype?"symbol":M(x)})(b)}l("core-js/modules/es.symbol"),l("core-js/modules/es.symbol.description"),l("core-js/modules/es.symbol.iterator"),l("core-js/modules/es.array.iterator"),l("core-js/modules/es.object.get-own-property-descriptor"),l("core-js/modules/es.object.to-string"),l("core-js/modules/es.regexp.exec"),l("core-js/modules/es.string.iterator"),l("core-js/modules/es.string.split"),l("core-js/modules/es.string.sub"),l("core-js/modules/es.weak-map"),l("core-js/modules/web.dom-collections.iterator"),l("core-js/modules/es.symbol"),l("core-js/modules/es.symbol.description"),l("core-js/modules/es.symbol.iterator"),l("core-js/modules/es.array.iterator"),l("core-js/modules/es.object.to-string"),l("core-js/modules/es.regexp.exec"),l("core-js/modules/es.string.iterator"),l("core-js/modules/es.string.split"),l("core-js/modules/es.string.sub"),l("core-js/modules/web.dom-collections.iterator");var v,S=(v=l("../core/main"))&&v.__esModule?v:{default:v},T=function(b){if(b&&b.__esModule)return b;if(null===b||"object"!==E(b)&&"function"!=typeof b)return{default:b};var x=C();if(x&&x.has(b))return x.get(b);var D,N={},U=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(D in b){var R;Object.prototype.hasOwnProperty.call(b,D)&&((R=U?Object.getOwnPropertyDescriptor(b,D):null)&&(R.get||R.set)?Object.defineProperty(N,D,R):N[D]=b[D])}return N.default=b,x&&x.set(b,N),N}(l("../core/constants"));function C(){var b;return"function"!=typeof WeakMap?null:(C=function(){return b},b=new WeakMap)}function f(b,x){if(!(b instanceof x))throw new TypeError("Cannot call a class as a function")}function g(b,x){for(var D=0;D<x.length;D++){var N=x[D];N.enumerable=N.enumerable||!1,N.configurable=!0,"value"in N&&(N.writable=!0),Object.defineProperty(b,N.key,N)}}function d(b,x,D){x&&g(b.prototype,x),D&&g(b,D)}l("./p5.Shader"),l("./p5.RendererGL.Retained"),S.default.RendererGL.prototype._applyTextProperties=function(){this._setProperty("_textAscent",null),this._setProperty("_textDescent",null)},S.default.RendererGL.prototype.textWidth=function(b){return this._isOpenType()?this._textFont._textWidth(b,this._textSize):0};var m=function(){function b(x,D){f(this,b),this.width=x,this.height=D,this.infos=[]}return d(b,[{key:"findImage",value:function(x){var D,N,U=this.width*this.height;if(U<x)throw new Error("font is too complex to render in 3D");for(var R=this.infos.length-1;0<=R;--R){var L=this.infos[R];if(L.index+x<U){N=(D=L).imageData;break}}if(!D){try{N=new ImageData(this.width,this.height)}catch{var z=document.getElementsByTagName("canvas")[0],F=!z,q=(z||((z=document.createElement("canvas")).style.display="none",document.body.appendChild(z)),z.getContext("2d"));q&&(N=q.createImageData(this.width,this.height)),F&&document.body.removeChild(z)}this.infos.push(D={index:0,imageData:N})}return q=D.index,D.index+=x,N._dirty=!0,{imageData:N,index:q}}}]),b}();function p(L,x,D,N,U){var R=L.imageData.data;L=4*L.index++,R[L++]=x,R[L++]=D,R[L++]=N,R[+L]=U}var h=Math.sqrt(3),y=function(){function b(x){f(this,b),this.font=x,this.strokeImageInfos=new m(64,64),this.colDimImageInfos=new m(64,64),this.rowDimImageInfos=new m(64,64),this.colCellImageInfos=new m(64,64),this.rowCellImageInfos=new m(64,64),this.glyphInfos={}}return d(b,[{key:"getGlyphInfo",value:function(x){var D=this.glyphInfos[x.index];if(!D){var N=x.getBoundingBox(),U=N.x1,R=N.y1,L=N.x2-U,z=N.y2-R,F=x.path.commands;if(0==L||0==z||!F.length)return this.glyphInfos[x.index]={};for(var q=[],k=[],Z=[],X=8;0<=X;--X)Z.push([]);for(X=8;0<=X;--X)k.push([]);var W,oe,ie,re,le=function(){function $t(Xt,ln,Wt,Ye){f(this,$t),this.p0=Xt,this.c0=ln,this.c1=Wt,this.p1=Ye}return d($t,[{key:"toQuadratic",value:function(){return{x:this.p0.x,y:this.p0.y,x1:this.p1.x,y1:this.p1.y,cx:(3*(this.c0.x+this.c1.x)-(this.p0.x+this.p1.x))/4,cy:(3*(this.c0.y+this.c1.y)-(this.p0.y+this.p1.y))/4}}},{key:"quadError",value:function(){return S.default.Vector.sub(S.default.Vector.sub(this.p1,this.p0),S.default.Vector.mult(S.default.Vector.sub(this.c1,this.c0),3)).mag()/2}},{key:"split",value:function(vt){var ln=S.default.Vector.lerp(this.p0,this.c0,vt),Ye=S.default.Vector.lerp(this.c0,this.c1,vt),Wt=S.default.Vector.lerp(ln,Ye,vt);return this.c1=S.default.Vector.lerp(this.c1,this.p1,vt),this.c0=S.default.Vector.lerp(Ye,this.c1,vt),Ye=S.default.Vector.lerp(Wt,this.c0,vt),vt=new $t(this.p0,ln,Wt,Ye),this.p0=Ye,vt}},{key:"splitInflections",value:function(){var Xt=S.default.Vector.sub(this.c0,this.p0),ln=S.default.Vector.sub(S.default.Vector.sub(this.c1,this.c0),Xt),Wt=S.default.Vector.sub(S.default.Vector.sub(S.default.Vector.sub(this.p1,this.c1),Xt),S.default.Vector.mult(ln,2)),Ye=[],vt=ln.x*Wt.y-ln.y*Wt.x;return 0!==vt&&0<=(Xt=(Wt=Xt.x*Wt.y-Xt.y*Wt.x)*Wt-4*vt*(Xt.x*ln.y-Xt.y*ln.x))&&(vt<0&&(vt=-vt,Wt=-Wt),Xt=(-Wt+(ln=Math.sqrt(Xt)))/(2*vt),0<(Wt=(-Wt-ln)/(2*vt))&&Wt<1&&(Ye.push(this.split(Wt)),Xt=1-(1-Xt)/(1-Wt)),0<Xt&&Xt<1&&Ye.push(this.split(Xt))),Ye.push(this),Ye}}]),$t}(),pe=!0,Ae=!1,$=void 0;try{for(var P,K=F[Symbol.iterator]();!(pe=(P=K.next()).done);pe=!0){var te=P.value,fe=(te.x-U)/L,ve=(te.y-R)/z;if(!ot(W,oe,fe,ve)){switch(te.type){case"M":ie=fe,re=ve;break;case"L":_t(W,oe,fe,ve);break;case"Q":var Te=(te.x1-U)/L,Ie=(te.y1-R)/z;qe([W,fe,Te],[oe,ve,Ie],{x:W,y:oe,cx:Te,cy:Ie});break;case"Z":ot(W,oe,ie,re)?q.push({x:W,y:oe}):(_t(W,oe,ie,re),q.push({x:ie,y:re}));break;case"C":for(var we=function(xe,Je,ut,Wt,Ye,vt,rt,ge){xe=new le(new S.default.Vector(xe,Je),new S.default.Vector(ut,Wt),new S.default.Vector(Ye,vt),new S.default.Vector(rt,ge)).splitInflections();var he=[],Se=30/h,He=!0;Je=!1,ut=void 0;try{for(var Ot,zt=xe[Symbol.iterator]();!(He=(Ot=zt.next()).done);He=!0){for(var Gt=Ot.value,cn=[],zn=void 0;!(.125<=(zn=Se/Gt.quadError()));){var Nn=Math.pow(zn,.3333333333333333),_n=Gt.split(Nn),Fn=Gt.split(1-Nn/(1-Nn));he.push(_n),cn.push(Gt),Gt=Fn}zn<1&&he.push(Gt.split(.5)),he.push(Gt),Array.prototype.push.apply(he,cn.reverse())}}catch(On){Je=!0,ut=On}finally{try{He||null==zt.return||zt.return()}finally{if(Je)throw ut}}return he}(W,oe,(te.x1-U)/L,(te.y1-R)/z,(te.x2-U)/L,(te.y2-R)/z,fe,ve),Pe=0;Pe<we.length;Pe++){var je=we[Pe].toQuadratic();qe([je.x,je.x1,je.cx],[je.y,je.y1,je.cy],je)}break;default:throw new Error("unknown command type: ".concat(te.type))}W=fe,oe=ve}}}catch($t){Ae=!0,$=$t}finally{try{pe||null==K.return||K.return()}finally{if(Ae)throw $}}for(var be=q.length,Oe=this.strokeImageInfos.findImage(be),Ge=Oe.index,Ke=0;Ke<be;++Ke){var ze=q[Ke];p(Oe,et(ze.x),et(ze.y),et(ze.cx),et(ze.cy))}(D=this.glyphInfos[x.index]={glyph:x,uGlyphRect:[N.x1,-N.y1,N.x2,-N.y2],strokeImageInfo:Oe,strokes:q,colInfo:Kt(Z,this.colDimImageInfos,this.colCellImageInfos),rowInfo:Kt(k,this.rowDimImageInfos,this.rowCellImageInfos)}).uGridOffset=[D.colInfo.dimOffset,D.rowInfo.dimOffset]}return D;function qe($t,Xt,ln){var Wt=q.length;function Ye(he,Se,He){for(var Je=he.length;0<Je--;){var ut=he[Je];ut<Se&&(Se=ut),He<ut&&(He=ut)}return{min:Se,max:He}}q.push(ln),ln=Ye($t,1,0),$t=Math.max(Math.floor(9*ln.min-.5),0);for(var vt=Math.min(Math.ceil(9*ln.max+.5),9),rt=$t;rt<vt;++rt)Z[rt].push(Wt);ln=Ye(Xt,1,0),$t=Math.max(Math.floor(9*ln.min-.5),0);for(var ge=Math.min(Math.ceil(9*ln.max+.5),9),xe=$t;xe<ge;++xe)k[xe].push(Wt)}function et($t){return($t=255*$t)<0?0:255<$t?255:$t}function _t($t,Xt,ln,Wt){qe([$t,ln],[Xt,Wt],{x:$t,y:Xt,cx:($t+ln)/2,cy:(Xt+Wt)/2})}function ot($t,Xt,ln,Wt){return Math.abs(ln-$t)<1e-5&&Math.abs(Wt-Xt)<1e-5}function Kt($t,Xt,ln){for(var Wt=$t.length,Ye=Xt.findImage(Wt),vt=(Xt=Ye.index,0),rt=0;rt<Wt;++rt)vt+=$t[rt].length;for(var ge=ln.findImage(vt),xe=0;xe<Wt;++xe){var he=$t[xe],Se=he.length,He=ge.index;p(Ye,He>>7,127&He,Se>>7,127&Se);for(var Je=0;Je<Se;++Je){var ut=he[Je]+Ge;p(ge,ut>>7,127&ut,0,0)}}return{cellImageInfo:ge,dimOffset:Xt,dimImageInfo:Ye}}}}]),b}();S.default.RendererGL.prototype._renderText=function(b,x,D,N,U){if(this._textFont&&"string"!=typeof this._textFont){if(!(U<=N)&&this._doFill){if(this._isOpenType()){b.push(),U=this._doStroke;var R=this.drawMode,L=(this._doStroke=!1,this.drawMode=T.TEXTURE,this._textFont.font),z=(z=this._textFont._fontInfo)||(this._textFont._fontInfo=new y(L)),F=(D=this._textFont._handleAlignment(this,x,D,N),N=this._textSize/L.unitsPerEm,this.translate(D.x,D.y,0),this.scale(N,N,1),this.GL),q=(D=!this._defaultFontShader,this._getFontShader()),k=(q.init(),q.bindShader(),D&&(q.setUniform("uGridImageSize",[64,64]),q.setUniform("uCellsImageSize",[64,64]),q.setUniform("uStrokeImageSize",[64,64]),q.setUniform("uGridSize",[9,9])),this._applyColorBlend(this.curFillColor),this.retainedMode.geometry.glyph),Z=(k||((N=this._textGeom=new S.default.Geometry(1,1,function(){for(var Pe=0;Pe<=1;Pe++)for(var je=0;je<=1;je++)this.vertices.push(new S.default.Vector(je,Pe,0)),this.uvs.push(je,Pe)})).computeFaces().computeNormals(),k=this.createBuffers("glyph",N)),!0);D=!1,N=void 0;try{for(var X,W=this.retainedMode.buffers.text[Symbol.iterator]();!(Z=(X=W.next()).done);Z=!0)X.value._prepareBuffer(k,q)}catch(Pe){D=!0,N=Pe}finally{try{Z||null==W.return||W.return()}finally{if(D)throw N}}this._bindBuffer(k.indexBuffer,F.ELEMENT_ARRAY_BUFFER),q.setUniform("uMaterialColor",this.curFillColor),F.pixelStorei(F.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1);try{var oe=0,ie=null,re=L.stringToGlyphs(x),le=!0,pe=!1,Ae=void 0;try{for(var $,P=re[Symbol.iterator]();!(le=($=P.next()).done);le=!0){var K,te,fe=$.value,ve=(ie&&(oe+=L.getKerningValue(ie,fe)),z.getGlyphInfo(fe));ve.uGlyphRect&&(K=ve.rowInfo,te=ve.colInfo,q.setUniform("uSamplerStrokes",ve.strokeImageInfo.imageData),q.setUniform("uSamplerRowStrokes",K.cellImageInfo.imageData),q.setUniform("uSamplerRows",K.dimImageInfo.imageData),q.setUniform("uSamplerColStrokes",te.cellImageInfo.imageData),q.setUniform("uSamplerCols",te.dimImageInfo.imageData),q.setUniform("uGridOffset",ve.uGridOffset),q.setUniform("uGlyphRect",ve.uGlyphRect),q.setUniform("uGlyphOffset",oe),q.bindTextures(),F.drawElements(F.TRIANGLES,6,this.GL.UNSIGNED_SHORT,0)),oe+=fe.advanceWidth,ie=fe}}catch(Pe){pe=!0,Ae=Pe}finally{try{le||null==P.return||P.return()}finally{if(pe)throw Ae}}}finally{q.unbindShader(),this._doStroke=U,this.drawMode=R,F.pixelStorei(F.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0),b.pop()}}else console.log("WEBGL: only Opentype (.otf) and Truetype (.ttf) fonts are supported");return b}}else console.log("WEBGL: you must load and set a font before drawing text. See `loadFont` and `textFont` for more details.")}},{"../core/constants":272,"../core/main":283,"./p5.RendererGL.Retained":340,"./p5.Shader":342,"core-js/modules/es.array.iterator":165,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.to-string":190,"core-js/modules/es.regexp.exec":195,"core-js/modules/es.string.iterator":200,"core-js/modules/es.string.split":206,"core-js/modules/es.string.sub":208,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246}]},{},[267])(267)},633:(pi,Pa,ua)=>{var Vn=ua(738).default;function Ci(){"use strict";pi.exports=Ci=function(){return Ms},pi.exports.__esModule=!0,pi.exports.default=pi.exports;var Ms={},Yl=Object.prototype,l=Yl.hasOwnProperty,de=Object.defineProperty||function(k,Z,X){k[Z]=X.value},H="function"==typeof Symbol?Symbol:{},M=H.iterator||"@@iterator",E=H.asyncIterator||"@@asyncIterator",v=H.toStringTag||"@@toStringTag";function S(k,Z,X){return Object.defineProperty(k,Z,{value:X,enumerable:!0,configurable:!0,writable:!0}),k[Z]}try{S({},"")}catch{S=function(X,W,oe){return X[W]=oe}}function T(k,Z,X,W){var ie=Object.create((Z&&Z.prototype instanceof g?Z:g).prototype),re=new z(W||[]);return de(ie,"_invoke",{value:N(k,X,re)}),ie}function C(k,Z,X){try{return{type:"normal",arg:k.call(Z,X)}}catch(W){return{type:"throw",arg:W}}}Ms.wrap=T;var f={};function g(){}function d(){}function m(){}var p={};S(p,M,function(){return this});var h=Object.getPrototypeOf,y=h&&h(h(F([])));y&&y!==Yl&&l.call(y,M)&&(p=y);var b=m.prototype=g.prototype=Object.create(p);function x(k){["next","throw","return"].forEach(function(Z){S(k,Z,function(X){return this._invoke(Z,X)})})}function D(k,Z){function X(oe,ie,re,le){var pe=C(k[oe],k,ie);if("throw"!==pe.type){var Ae=pe.arg,$=Ae.value;return $&&"object"==Vn($)&&l.call($,"__await")?Z.resolve($.__await).then(function(P){X("next",P,re,le)},function(P){X("throw",P,re,le)}):Z.resolve($).then(function(P){Ae.value=P,re(Ae)},function(P){return X("throw",P,re,le)})}le(pe.arg)}var W;de(this,"_invoke",{value:function(ie,re){function le(){return new Z(function(pe,Ae){X(ie,re,pe,Ae)})}return W=W?W.then(le,le):le()}})}function N(k,Z,X){var W="suspendedStart";return function(oe,ie){if("executing"===W)throw new Error("Generator is already running");if("completed"===W){if("throw"===oe)throw ie;return{value:void 0,done:!0}}for(X.method=oe,X.arg=ie;;){var re=X.delegate;if(re){var le=U(re,X);if(le){if(le===f)continue;return le}}if("next"===X.method)X.sent=X._sent=X.arg;else if("throw"===X.method){if("suspendedStart"===W)throw W="completed",X.arg;X.dispatchException(X.arg)}else"return"===X.method&&X.abrupt("return",X.arg);W="executing";var pe=C(k,Z,X);if("normal"===pe.type){if(W=X.done?"completed":"suspendedYield",pe.arg===f)continue;return{value:pe.arg,done:X.done}}"throw"===pe.type&&(W="completed",X.method="throw",X.arg=pe.arg)}}}function U(k,Z){var X=Z.method,W=k.iterator[X];if(void 0===W)return Z.delegate=null,"throw"===X&&k.iterator.return&&(Z.method="return",Z.arg=void 0,U(k,Z),"throw"===Z.method)||"return"!==X&&(Z.method="throw",Z.arg=new TypeError("The iterator does not provide a '"+X+"' method")),f;var oe=C(W,k.iterator,Z.arg);if("throw"===oe.type)return Z.method="throw",Z.arg=oe.arg,Z.delegate=null,f;var ie=oe.arg;return ie?ie.done?(Z[k.resultName]=ie.value,Z.next=k.nextLoc,"return"!==Z.method&&(Z.method="next",Z.arg=void 0),Z.delegate=null,f):ie:(Z.method="throw",Z.arg=new TypeError("iterator result is not an object"),Z.delegate=null,f)}function R(k){var Z={tryLoc:k[0]};1 in k&&(Z.catchLoc=k[1]),2 in k&&(Z.finallyLoc=k[2],Z.afterLoc=k[3]),this.tryEntries.push(Z)}function L(k){var Z=k.completion||{};Z.type="normal",delete Z.arg,k.completion=Z}function z(k){this.tryEntries=[{tryLoc:"root"}],k.forEach(R,this),this.reset(!0)}function F(k){if(k){var Z=k[M];if(Z)return Z.call(k);if("function"==typeof k.next)return k;if(!isNaN(k.length)){var X=-1,W=function oe(){for(;++X<k.length;)if(l.call(k,X))return oe.value=k[X],oe.done=!1,oe;return oe.value=void 0,oe.done=!0,oe};return W.next=W}}return{next:q}}function q(){return{value:void 0,done:!0}}return d.prototype=m,de(b,"constructor",{value:m,configurable:!0}),de(m,"constructor",{value:d,configurable:!0}),d.displayName=S(m,v,"GeneratorFunction"),Ms.isGeneratorFunction=function(k){var Z="function"==typeof k&&k.constructor;return!!Z&&(Z===d||"GeneratorFunction"===(Z.displayName||Z.name))},Ms.mark=function(k){return Object.setPrototypeOf?Object.setPrototypeOf(k,m):(k.__proto__=m,S(k,v,"GeneratorFunction")),k.prototype=Object.create(b),k},Ms.awrap=function(k){return{__await:k}},x(D.prototype),S(D.prototype,E,function(){return this}),Ms.AsyncIterator=D,Ms.async=function(k,Z,X,W,oe){void 0===oe&&(oe=Promise);var ie=new D(T(k,Z,X,W),oe);return Ms.isGeneratorFunction(Z)?ie:ie.next().then(function(re){return re.done?re.value:ie.next()})},x(b),S(b,v,"Generator"),S(b,M,function(){return this}),S(b,"toString",function(){return"[object Generator]"}),Ms.keys=function(k){var Z=Object(k),X=[];for(var W in Z)X.push(W);return X.reverse(),function oe(){for(;X.length;){var ie=X.pop();if(ie in Z)return oe.value=ie,oe.done=!1,oe}return oe.done=!0,oe}},Ms.values=F,z.prototype={constructor:z,reset:function(Z){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(L),!Z)for(var X in this)"t"===X.charAt(0)&&l.call(this,X)&&!isNaN(+X.slice(1))&&(this[X]=void 0)},stop:function(){this.done=!0;var Z=this.tryEntries[0].completion;if("throw"===Z.type)throw Z.arg;return this.rval},dispatchException:function(Z){if(this.done)throw Z;var X=this;function W(Ae,$){return re.type="throw",re.arg=Z,X.next=Ae,$&&(X.method="next",X.arg=void 0),!!$}for(var oe=this.tryEntries.length-1;oe>=0;--oe){var ie=this.tryEntries[oe],re=ie.completion;if("root"===ie.tryLoc)return W("end");if(ie.tryLoc<=this.prev){var le=l.call(ie,"catchLoc"),pe=l.call(ie,"finallyLoc");if(le&&pe){if(this.prev<ie.catchLoc)return W(ie.catchLoc,!0);if(this.prev<ie.finallyLoc)return W(ie.finallyLoc)}else if(le){if(this.prev<ie.catchLoc)return W(ie.catchLoc,!0)}else{if(!pe)throw new Error("try statement without catch or finally");if(this.prev<ie.finallyLoc)return W(ie.finallyLoc)}}}},abrupt:function(Z,X){for(var W=this.tryEntries.length-1;W>=0;--W){var oe=this.tryEntries[W];if(oe.tryLoc<=this.prev&&l.call(oe,"finallyLoc")&&this.prev<oe.finallyLoc){var ie=oe;break}}ie&&("break"===Z||"continue"===Z)&&ie.tryLoc<=X&&X<=ie.finallyLoc&&(ie=null);var re=ie?ie.completion:{};return re.type=Z,re.arg=X,ie?(this.method="next",this.next=ie.finallyLoc,f):this.complete(re)},complete:function(Z,X){if("throw"===Z.type)throw Z.arg;return"break"===Z.type||"continue"===Z.type?this.next=Z.arg:"return"===Z.type?(this.rval=this.arg=Z.arg,this.method="return",this.next="end"):"normal"===Z.type&&X&&(this.next=X),f},finish:function(Z){for(var X=this.tryEntries.length-1;X>=0;--X){var W=this.tryEntries[X];if(W.finallyLoc===Z)return this.complete(W.completion,W.afterLoc),L(W),f}},catch:function(Z){for(var X=this.tryEntries.length-1;X>=0;--X){var W=this.tryEntries[X];if(W.tryLoc===Z){var oe=W.completion;if("throw"===oe.type){var ie=oe.arg;L(W)}return ie}}throw new Error("illegal catch attempt")},delegateYield:function(Z,X,W){return this.delegate={iterator:F(Z),resultName:X,nextLoc:W},"next"===this.method&&(this.arg=void 0),f}},Ms}pi.exports=Ci,pi.exports.__esModule=!0,pi.exports.default=pi.exports},738:pi=>{function Pa(ua){return pi.exports=Pa="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(Vn){return typeof Vn}:function(Vn){return Vn&&"function"==typeof Symbol&&Vn.constructor===Symbol&&Vn!==Symbol.prototype?"symbol":typeof Vn},pi.exports.__esModule=!0,pi.exports.default=pi.exports,Pa(ua)}pi.exports=Pa,pi.exports.__esModule=!0,pi.exports.default=pi.exports},756:(pi,Pa,ua)=>{var Vn=ua(633)();pi.exports=Vn;try{regeneratorRuntime=Vn}catch{"object"==typeof globalThis?globalThis.regeneratorRuntime=Vn:Function("r","regeneratorRuntime = r")(Vn)}}},pi=>{pi(pi.s=25)}]);